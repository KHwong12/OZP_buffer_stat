import{fc as Y,aD as m,e8 as B,di as $,dh as A,b4 as x,fg as C,aY as j,eM as M,fi as w}from"./index.4188ada5.js";import{s as E,c as a}from"./vectorStacks.04effb99.js";function D(t){return t?{origin:Y(t.origin),vector:Y(t.vector)}:{origin:m(),vector:m()}}function F(t,r){const n=I.get();return n.origin=t,n.vector=r,n}function L(t,r=D()){return G(t.origin,t.vector,r)}function G(t,r,n=D()){return B(n.origin,t),B(n.vector,r),n}function N(t,r,n=D()){return B(n.origin,t),$(n.vector,r,t),n}function O(t,r){const n=$(a.get(),r,t.origin),c=A(t.vector,n),s=A(t.vector,t.vector),i=j(c/s,0,1),f=$(a.get(),x(a.get(),t.vector,i),n);return A(f,f)}function Q(t,r,n){return H(t,r,0,1,n)}function R(t,r,n){return M(n,t.origin,x(n,t.vector,r))}function H(t,r,n,c,s){const{vector:i,origin:f}=t,u=$(a.get(),r,f),h=A(i,u)/C(i);return x(s,i,j(h,n,c)),M(s,s,t.origin)}function T(t,r){if(y(t,F(r.origin,r.direction),!1,k)){const{tA:n,pB:c,distance2:s}=k;if(n>=0&&n<=1)return s;if(n<0)return w(t.origin,c);if(n>1)return w(M(a.get(),t.origin,t.vector),c)}return null}function U(t,r,n){return!!y(t,r,!0,k)&&(B(n,k.pA),!0)}function y(t,r,n,c){const i=t.origin,f=M(a.get(),i,t.vector),u=r.origin,h=M(a.get(),u,r.vector),g=a.get(),e=a.get();if(g[0]=i[0]-u[0],g[1]=i[1]-u[1],g[2]=i[2]-u[2],e[0]=h[0]-u[0],e[1]=h[1]-u[1],e[2]=h[2]-u[2],Math.abs(e[0])<1e-6&&Math.abs(e[1])<1e-6&&Math.abs(e[2])<1e-6)return!1;const o=a.get();if(o[0]=f[0]-i[0],o[1]=f[1]-i[1],o[2]=f[2]-i[2],Math.abs(o[0])<1e-6&&Math.abs(o[1])<1e-6&&Math.abs(o[2])<1e-6)return!1;const P=g[0]*e[0]+g[1]*e[1]+g[2]*e[2],d=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],z=g[0]*o[0]+g[1]*o[1]+g[2]*o[2],q=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],S=(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])*q-d*d;if(Math.abs(S)<1e-6)return!1;let v=(P*d-z*q)/S,p=(P+d*v)/q;n&&(v=j(v,0,1),p=j(p,0,1));const b=a.get(),l=a.get();return b[0]=i[0]+v*o[0],b[1]=i[1]+v*o[1],b[2]=i[2]+v*o[2],l[0]=u[0]+p*e[0],l[1]=u[1]+p*e[1],l[2]=u[2]+p*e[2],c.tA=v,c.tB=p,c.pA=b,c.pB=l,c.distance2=w(b,l),!0}const k={tA:0,tB:0,pA:m(),pB:m(),distance2:0},I=new E(()=>({origin:null,vector:null}));export{H as A,T as B,O as b,Q as d,L as h,R as j,U as k,N as l,G as m,D as v};
