(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function i(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(s){if(s.ep)return;s.ep=!0;const h=i(s);fetch(s.href,h)}})();function MO(e,t){e.classList.contains("open")?t.classList.replace("bx-menu","bx-menu-alt-right"):t.classList.replace("bx-menu-alt-right","bx-menu")}document.getElementById("lastModified").innerHTML=document.lastModified;function EO(){document.querySelector(".sidebar").classList.add("open")}const CH=[{onStatisticField:"CASE WHEN ZONE_MAS = 'R(A)' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_RA",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'R(B)' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_RB",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'R(C)' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_RC",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'G/IC' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_GIC",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'O' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_O",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'C' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_C",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS = 'MRDJ' THEN 1 ELSE 0 END",outStatisticFieldName:"zone_MRDJ",statisticType:"sum"},{onStatisticField:"CASE WHEN ZONE_MAS NOT IN ('R(A)', 'R(B)', 'R(C)', 'G/IC', 'O', 'C', 'MRDJ') THEN 1 ELSE 0 END",outStatisticFieldName:"zone_OTHERS",statisticType:"sum"}];function OH(e,t,i){const r=e.createQuery();return r.geometry=t,r.distance=i,r.outStatistics=CH,e.queryFeatures(r).then(function(s){return s.features[0].attributes},console.error)}function PH(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const h=Object.getOwnPropertyDescriptor(r,s);h&&Object.defineProperty(e,s,h.get?h:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var U6={exports:{}};(function(e,t){function i(){function s(c){if(typeof c=="number")return W.Uc.ah(c);if(c==null)return null;if(Wp[c]!=null)return W.Uc.ah(Wp[c]);throw Error("Unrecognised Unit Type")}function h(c){if(typeof c=="number")return W.Uc.ah(c);if(c==null)return null;if(qh[c]!=null)return W.Uc.ah(qh[c]);throw Error("Unrecognised Unit Type")}function y(c){if(c)switch(c){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function f(c,C,b,u){if(b==null||b.B())return null;switch(b.K()){case W.sn.Point:return c.exportPoint(C,b,u);case W.sn.Polygon:return c.exportPolygon(C,b,u);case W.sn.Polyline:return c.exportPolyline(C,b,u);case W.sn.MultiPoint:return c.exportMultipoint(C,b,u);case W.sn.Envelope:return c.exportExtent(C,b,u)}return null}function w(c,C,b,u){if(b.K()!==W.sn.Point)throw Error("Geometry not Point");return c.exportPoint(C,b,u)}function S(c,C,b){return c.convertToGEGeometry(C,b)}function E(c){var C=c.wkid;c=c.wkt;var b=uu.get(C||c);return b==null&&(C!==-1&&C!=null?(b=W.Gg.create(C),uu.set(C,b)):c&&(b=W.Gg.kP(c),uu.set(c,b))),b}function A(c){var C;if(c==null)return null;var b=E(c);return c=b.Id(),b=b.Ln(),(C={}).tolerance=b,C.unitType=c==null?-1:c.od,C.unitID=c==null?-1:c.Fc(),C.unitBaseFactor=c==null?0:c.ci,C.unitSquareDerivative=c==null?0:W.Uc.VF(c).Fc(),C}function P(c,C,b,u){return b==null?null:(b=W.bc.clip(S(c,Pe,b),S(c,Pe,u),E(C)),f(c,Pe,b,C))}function N(c,C,b,u){b=W.bc.fl(S(c,Pe,b),S(c,Pe,u),E(C)),u=[];for(var a=0;a<b.length;a++)u.push(f(c,Pe,b[a],C));return u}function F(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.contains(S(c,Pe,b),S(c,Pe,u),E(C))}function V(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.vP(S(c,Pe,b),S(c,Pe,u),E(C))}function U(c,C,b,u,a){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.ub(S(c,Pe,b),S(c,Pe,u),E(C),s(a))}function X(c,C,b,u){return!(b==null&&u!=null||u==null&&b!=null)&&W.bc.Nb(S(c,Pe,b),S(c,Pe,u),E(C))}function re(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.LS(S(c,Pe,b),S(c,Pe,u),E(C))}function he(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.touches(S(c,Pe,b),S(c,Pe,u),E(C))}function pe(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.iY(S(c,Pe,b),S(c,Pe,u),E(C))}function ae(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.NP(S(c,Pe,b),S(c,Pe,u),E(C))}function le(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.vU(S(c,Pe,b),S(c,Pe,u),E(C))}function Te(c,C,b,u,a){if(b==null||u==null)throw Error("Illegal Argument Exception");return W.bc.sB(S(c,Pe,b),S(c,Pe,u),E(C),a)}function Ee(c,C,b){if(b==null)throw Error("Illegal Argument Exception");return W.bc.WS(S(c,Pe,b),E(C))}function Oe(c,C,b){if(b==null)throw Error("Illegal Argument Exception");return b=W.bc.ZB(S(c,Pe,b),E(C)),f(c,Pe,b,C)}function Ae(c,C,b,u){if(u===void 0&&(u=!1),b==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){var a=u,n=[];for(u=0;u<b.length;u++)n.push(S(c,Pe,b[u]));for(b=W.bc.dP(n,a),a=Array(b.length),u=0;u<b.length;u++)a[u]=f(c,Pe,b[u],C);return a}return u=W.bc.cP(S(c,Pe,b),E(C)),f(c,Pe,u,C)}function Fe(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(S(c,Pe,b[n]));for(b=W.bc.KP(a,S(c,Pe,u),E(C)),u=Array(b.length),n=0;n<b.length;n++)u[n]=f(c,Pe,b[n],C);return u}return n=W.bc.km(S(c,Pe,b),S(c,Pe,u),E(C)),f(c,Pe,n,C)}function ze(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(S(c,Pe,b[n]));for(b=W.bc.NX(a,S(c,Pe,u),E(C)),u=Array(b.length),n=0;n<b.length;n++)u[n]=f(c,Pe,b[n],C);return u}return n=W.bc.fp(S(c,Pe,b),S(c,Pe,u),E(C)),f(c,Pe,n,C)}function Ge(c,C,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var a=[],n=0;n<b.length;n++)a.push(S(c,Pe,b[n]));for(b=W.bc.JS(a,S(c,Pe,u),E(C)),u=Array(b.length),n=0;n<b.length;n++)u[n]=f(c,Pe,b[n],C);return u}return n=W.bc.Fa(S(c,Pe,b),S(c,Pe,u),E(C)),f(c,Pe,n,C)}function ke(c,C,b,u){if(b==null)return null;var a=[];if(Array.isArray(b)){if(b.length===0)return null;for(u=0;u<b.length;u++)a.push(S(c,Pe,b[u]))}else a.push(S(c,Pe,b)),u!=null&&a.push(S(c,Pe,u));return f(c,Pe,W.bc.bY(a,E(C)),C)}function ht(c,C,b,u,a,n,o,l){var p=0;if(n!=null)switch(n){case"round":p=0;break;case"bevel":p=1;break;case"miter":p=2;break;case"square":p=3}if(Array.isArray(b)){if(b==null)c=null;else if(b.length===0)c=[];else{var d=[];for(n=0;n<b.length;n++)d.push(S(c,Pe,b[n]));for(b=W.bc.tU(d,E(C),u,p,o,l,s(a)),u=Array(b.length),n=0;n<b.length;n++)u[n]=f(c,Pe,b[n],C);c=u}return c}return b=W.bc.offset(S(c,Pe,b),E(C),u,p,o,l,s(a)),f(c,Pe,b,C)}function Kt(c,C,b,u,a,n){if(n===void 0&&(n=!1),Array.isArray(b)){if(!Array.isArray(u)){for(var o=[],l=0;l<b.length;l++)o.push(u);u=o}if(u.length!=b.length){if(u.length==0)throw Error("Illegal Argument Exception");o=[];var p=0;for(l=0;l<b.length;l++)u[l]===void 0?o.push(p):(o.push(u[l]),p=u[l]);u=o}return Ct(c,C,b,u,a,!1,n,"geodesic",NaN)}return b=W.bc.buffer(S(c,Pe,b),E(C),u,s(a),!1,0,NaN),f(c,Pe,b,C)}function bt(c,C,b,u,a,n,o,l){if(Array.isArray(b)){if(!Array.isArray(u)){for(var p=[],d=0;d<b.length;d++)p.push(u);u=p}if(u.length!==b.length){if(u.length===0)throw Error("Illegal Argument Exception");p=[];var m=0;for(d=0;d<b.length;d++)u[d]===void 0?p.push(m):(p.push(u[d]),m=u[d]);u=p}return Ct(c,C,b,u,a,!0,n,o,l)}return o===void 0&&(o=NaN),b=W.bc.buffer(S(c,Pe,b),E(C),u,s(a),!0,y(n),o),f(c,Pe,b,C)}function Ct(c,C,b,u,a,n,o,l,p){if(p===void 0&&(p=NaN),b==null)return null;if(b.length===0)return[];for(var d=[],m=0;m<b.length;m++)d.push(S(c,Pe,b[m]));for(b=W.bc.GN(d,E(C),u,s(a),n,o,y(l),p),u=Array(b.length),m=0;m<b.length;m++)u[m]=f(c,Pe,b[m],C);return u}function yi(c,C,b,u,a){var n;return a===void 0&&(a=!0),b=W.bc.iz(S(c,Pe,b),S(c,Pe,u),a),(n={}).coordinate=w(c,Pe,b.az(),C),n.distance=b.cz(),n.isRightSide=b.Nz(),n.vertexIndex=b.Va(),n.isEmpty=b.B(),n}function Es(c,C,b,u){var a;return b=W.bc.jz(S(c,Pe,b),S(c,Pe,u)),(a={}).coordinate=w(c,Pe,b.az(),C),a.distance=b.cz(),a.isRightSide=b.Nz(),a.vertexIndex=b.Va(),a.isEmpty=b.B(),a}function ra(c,C,b,u,a,n){var o;for(b=W.bc.kz(S(c,Pe,b),S(c,Pe,u),a,n),u=[],a=0;a<b.length;a++)b[a].B()===!1&&u.push(((o={}).coordinate=w(c,Pe,b[a].az(),C),o.distance=b[a].cz(),o.isRightSide=b[a].Nz(),o.vertexIndex=b[a].Va(),o.isEmpty=b[a].B(),o));return u}function au(c,C,b,u,a,n){return b=W.bc.KQ(S(c,Pe,b),E(C),u,a,s(n)),f(c,Pe,b,C)}function lu(c,C,b,u,a){return b=W.bc.Sr(S(c,Pe,b),E(C),u,s(a)),f(c,Pe,b,C)}function Gh(c,C,b,u,a,n){return n===void 0&&(n=0),b=W.bc.Ry(S(c,Pe,b),E(C),u,s(a),n),f(c,Pe,b,C)}function Uh(c,C,b,u){if(b==null)throw Error("Illegal Argument Exception");return W.bc.BU(S(c,Pe,b),E(C),h(u))}function Ff(c,C,b,u){if(b==null)throw Error("Illegal Argument Exception");return W.bc.CU(S(c,Pe,b),E(C),s(u))}function qp(c,C,b,u,a){if(b==null)throw Error("Illegal Argument Exception");return W.bc.QQ(S(c,Pe,b),E(C),h(u),y(a))}function jf(c,C,b,u,a){if(b==null)throw Error("Illegal Argument Exception");return W.bc.TQ(S(c,Pe,b),E(C),s(u),y(a))}function Df(c){W.HL.bind(c)}function zf(c,C,b,u,a){var n=null,o=null;if(u){if(!a)throw W.i.O("AOI missing Spatial Reference");n=S(c,Pe,u),o=E(a).hh()}return(c=W.iu.QR(E(C).hh(),E(b).hh(),n,o))!==null?c:null}function Vf(c,C,b,u,a){var n=null,o=null;if(u){if(!a)throw W.i.O("AOI missing Spatial Reference");n=S(c,Pe,u),o=E(a).hh()}return W.iu.RR(E(C).hh(),E(b).hh(),n,o)}function Gf(c,C,b,u,a,n){if(a===void 0&&(a=null),n===void 0&&(n=null),n){var o=new W.sC;o.Xu=n.densificationStep,o.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&o.HW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&o.IW(n.clipWithOutputHorizon)}if(this.CY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(C.length===0)return[];if(a){if(!(n=a.getCachedGeTransformation(b,u)))e:{if(n=a,a=null,n){var l=n.getGTListEntry();if(l!==null){a=new W.qC(null);for(var p=0,d=l.steps;p<d.length;p++){l=d[p];var m=new W.Cx(l.geogtran);l.isInverse&&m.Lz(),a.add(m)}o=W.xr.Pr(E(b).hh(),E(u).hh(),a,o),n.assignCachedGe(b,u,o),n=o;break e}}if(a===null&&n&&n.steps&&0<n.steps.length){for(a=new W.qC(null),p=0,d=n.steps;p<d.length;p++)(l=d[p]).wkid!=-1&&l.wkid!=null?a.add(W.Cx.create(l.wkid,l.isInverse)):a.add(W.Cx.oP(l.wkt,l.isInverse));o=W.xr.Pr(E(b).hh(),E(u).hh(),a,o),n.assignCachedGe(b,u,o),n=o}else n=W.xr.Pr(E(b).hh(),E(u).hh(),a,o)}for(b=[],a=0;a<C.length;a++)o=C[a],b.push(Bp(c,o,u,n))}else for(n=W.xr.Pr(E(b).hh(),E(u).hh(),null),b=[],a=0;a<C.length;a++)o=C[a],b.push(Bp(c,o,u,n));return b}function Bp(c,C,b,u){return C=W.bc.Bh(S(c,Pe,C),u),f(c,Pe,C,b)}var zi,W,Tr,Hp,Ot=this&&this.__extends||function(){function c(C,b){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var n in a)a.hasOwnProperty(n)&&(u[n]=a[n])})(C,b)}return function(C,b){function u(){this.constructor=C}c(C,b),C.prototype=b===null?Object.create(b):(u.prototype=b.prototype,new u)}}();(function(c){var C;(C=c.sn||(c.sn={}))[C.Unknown=0]="Unknown",C[C.Point=33]="Point",C[C.Line=322]="Line",C[C.Envelope=197]="Envelope",C[C.MultiPoint=550]="MultiPoint",C[C.Polyline=1607]="Polyline",C[C.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(c.SK||(c.SK={}));var b=function(){function u(){this.description=null,this.PA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.kg=function(a){this.wc(),a!=this.description&&this.un(a)},u.prototype.un=function(){},u.prototype.Ll=function(a){this.wc(),a!=this.description&&(a=c.ee.wR(this.description,a))!=this.description&&this.un(a)},u.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)},u.prototype.se=function(a){this.wc(),this.description.hasAttribute(a)||(a=c.ee.vR(this.description,a),this.un(a))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.Ro=function(){},u.prototype.yc=function(a){this.A(a)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.cG=function(){return this.hasAttribute(1)},u.uf=function(a){return 1+((192&a)>>6)>>1},u.Sn=function(a){return(32&a)!=0},u.MS=function(a){return(128&a)!=0},u.zd=function(a){return(256&a)!=0},u.zj=function(a){return(512&a)!=0},u.Ic=function(a){return(1024&a)!=0},u.prototype.Pf=function(){var a=this.Ja();return this.copyTo(a),a},u.prototype.mg=function(){return null},u.ig=function(a){var n=a.Ja();return a.copyTo(n),n},u.prototype.wc=function(){0<=this.PA&&(this.PA+=2147483649)},u.zx=function(a){var n=a.K();if(u.zj(n))return a.I();if(a.B())return 0;if(n==197)return 4;if(n==33)return 1;if(u.zd(n))return 2;throw c.i.ga("missing type")},u}();c.ba=b})(W||(W={})),Tr=W||(W={}),Hp=function(){function c(){this.y=this.x=0}return c.construct=function(C,b){var u=new c;return u.x=C,u.y=b,u},c.cl=function(C){var b=new c;return b.x=C.x,b.y=C.y,b},c.prototype.na=function(C,b){this.x=C,this.y=b},c.prototype.N=function(C){this.x=C.x,this.y=C.y},c.prototype.hq=function(C,b){return this.x===C&&this.y===b},c.prototype.Mz=function(C){return 2220446049250313e-31>=Math.abs(this.x-C.x)&&2220446049250313e-31>=Math.abs(this.y-C.y)},c.prototype.rb=function(C){return this.x===C.x&&this.y===C.y},c.prototype.Nb=function(C){return C==this||C instanceof c&&this.x==C.x&&this.y==C.y},c.prototype.sub=function(C){this.x-=C.x,this.y-=C.y},c.prototype.vc=function(C,b){this.x=C.x-b.x,this.y=C.y-b.y},c.prototype.add=function(C,b){b!==void 0?(this.x=C.x+b.x,this.y=C.y+b.y):(this.x+=C.x,this.y+=C.y)},c.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},c.prototype.nt=function(C){this.x=-C.x,this.y=-C.y},c.prototype.GS=function(C,b,u){this.x=C.x*(1-u)+b.x*u,this.y=C.y*(1-u)+b.y*u},c.prototype.Dt=function(C,b){this.x=this.x*C+b.x,this.y=this.y*C+b.y},c.prototype.yW=function(C,b,u){this.x=b.x*C+u.x,this.y=b.y*C+u.y},c.prototype.scale=function(C){this.x*=C,this.y*=C},c.prototype.compare=function(C){return this.y<C.y?-1:this.y>C.y?1:this.x<C.x?-1:this.x>C.x?1:0},c.prototype.normalize=function(){var C=this.length();C==0&&(this.x=1,this.y=0),this.x/=C,this.y/=C},c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.Tk=function(){return this.x*this.x+this.y*this.y},c.ub=function(C,b){return Math.sqrt(this.zc(C,b))},c.Jy=function(C,b,u,a){return C-=u,b-=a,Math.sqrt(C*C+b*b)},c.prototype.Sh=function(C){return this.x*C.x+this.y*C.y},c.prototype.$C=function(C){return Math.abs(this.x*C.x)+Math.abs(this.y*C.y)},c.prototype.yi=function(C){return this.x*C.y-this.y*C.x},c.prototype.Ct=function(C,b){var u=-this.x*b+this.y*C;this.x=this.x*C+this.y*b,this.y=u},c.prototype.Jv=function(){var C=this.x;this.x=-this.y,this.y=C},c.prototype.GG=function(C){this.x=-C.y,this.y=C.x},c.prototype.cr=function(){var C=this.x;this.x=this.y,this.y=-C},c.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},c.pu=function(C,b){var u=C.su(),a=b.su();return a==u?0>(C=C.yi(b))?1:0<C?-1:0:u<a?-1:1},c.zc=function(C,b){var u=C.x-b.x;return u*u+(C=C.y-b.y)*C},c.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},c.prototype.Sc=function(){this.y=this.x=NaN},c.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},c.prototype.offset=function(C,b){var u=c.ub(C,b),a=c.construct(this.x,this.y);if(u==0)return c.ub(a,C);var n=new c;return n.N(b),n.sub(C),a.sub(C),a.yi(n)/u},c.Wq=function(C,b,u){var a=new Tr.Xb;a.set(b.x),a.sub(C.x);var n=new Tr.Xb;n.set(u.y),n.sub(C.y);var o=new Tr.Xb;o.set(b.y),o.sub(C.y);var l=new Tr.Xb;return l.set(u.x),l.sub(C.x),a.Ag(n),o.Ag(l),a.sub(o),a.rs()?(a=new Tr.ip(b.x),n=new Tr.ip(C.x),o=new Tr.ip(C.y),a=a.kt(n),C=(C=new Tr.ip(u.y)).kt(o),b=(b=new Tr.ip(b.y)).kt(o),u=(u=new Tr.ip(u.x)).kt(n),a=a.nr(C),b=b.nr(u),(a=a.nr(b)).fT()?-1:a.ZR()?1:0):0>(u=a.value())?-1:0<u?1:0},c.prototype.dc=function(){return Tr.P.wj(Tr.P.wj())},c}(),Tr.h=Hp,function(c){var C=function(){function b(u){this.Ay=this.Ot=0,this.GX=u}return b.prototype.reset=function(){this.Ay=this.Ot=0},b.prototype.add=function(u){u-=this.Ay;var a=this.Ot+u;this.Ay=a-this.Ot-u,this.Ot=a},b.prototype.sub=function(u){this.add(-u)},b.prototype.tm=function(){return this.GX+this.Ot},b}();c.Ex=C,c.mc=function(){function b(){}return b.Dn=function(u,a){return 0<=a?Math.abs(u):-Math.abs(u)},b.sign=function(u){return 0>u?-1:0<u?1:0},b.LK=function(u){return u-360*Math.floor(u/360)},b.round=function(u){return Math.floor(u+.5)},b.ox=function(u){return u*u},b.jq=function(u,a,n){return .5>=n?u+(a-u)*n:a-(a-u)*(1-n)},b.IG=function(u,a,n,o){.5>=n?(o.x=u.x+(a.x-u.x)*n,o.y=u.y+(a.y-u.y)*n):(o.x=a.x-(a.x-u.x)*(1-n),o.y=a.y-(a.y-u.y)*(1-n))},b.dT=function(u,a,n,o,l,p){.5>=l?(p.x=u+(n-u)*l,p.y=a+(o-a)*l):(p.x=n-(n-u)*(1-l),p.y=o-(o-a)*(1-l))},b}()}(W||(W={})),function(c){var C=function(b){function u(){var a=b.call(this)||this;return a.sa=0,a.oa=0,a.qa=0,a.ma=0,a.la=null,a}return Ot(u,b),u.prototype.ac=function(){return c.h.construct(this.sa,this.oa)},u.prototype.$p=function(a){a.x=this.sa,a.y=this.oa},u.prototype.Ec=function(a){this.gm(0,a)},u.prototype.TB=function(a,n){this.gm(0,c.h.construct(a,n))},u.prototype.Uo=function(a){this.bD(0,a)},u.prototype.setStart=function(a){this.oD(0,a)},u.prototype.yv=function(a,n){return this.Pd(0,a,n)},u.prototype.SB=function(a,n,o){this.vn(0,a,n,o)},u.prototype.xc=function(){return c.h.construct(this.qa,this.ma)},u.prototype.Vr=function(a){a.x=this.qa,a.y=this.ma},u.prototype.Rc=function(a){this.gm(1,a)},u.prototype.Sl=function(a,n){this.gm(1,c.h.construct(a,n))},u.prototype.Qo=function(a){this.bD(1,a)},u.prototype.setEnd=function(a){this.oD(1,a)},u.prototype.jv=function(a,n){return this.Pd(1,a,n)},u.prototype.IB=function(a,n,o){this.vn(1,a,n,o)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(a,n,o,l,p){return this.EM(a,n,o,l,p)},u.prototype.isIntersecting=function(a,n){return this.Br(a,n,!1)!=0},u.prototype.ss=function(a,n){return this.tu(a,n,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(a){if(this.wc(),this.la==null&&0<a)this.la=c.P.lg(2*a);else if(this.la!=null&&this.la.length<2*a){for(var n=this.la.slice(0),o=this.la.length;o<2*a;o++)n[o]=0;this.la=n}},u.aM=function(a,n,o){if(0<o)var l=0;for(var p=0;p<o;p++)n[0+l]=a[0],l++},u.prototype.gm=function(a,n){a!=0?(this.qa=n.x,this.ma=n.y):(this.sa=n.x,this.oa=n.y)},u.prototype.un=function(a){if(this.la!=null){for(var n=c.ee.Kw(a,this.description),o=[],l=u.Ig(this.description,0),p=u.Ig(this.description,1),d=u.Ig(a,0),m=u.Ig(a,1),v=0,_=1,M=a.Ba;_<M;_++){var T=a.qd(_),I=c.ua.Wa(T);if(n[_]==-1){var O=c.ua.te(T);for(T=0;T<I;T++)o[d+v]=O,o[m+v]=O,v++}else for(O=this.description.ak(n[_])-2,T=0;T<I;T++)o[d+v]=this.la[l+O],o[m+v]=this.la[p+O],v++,O++}this.la=o}this.description=a},u.prototype.bD=function(a,n){if(this.Bc())throw c.i.ga("empty geometry");n.kg(this.description),n.Bc()&&n.up();for(var o=0;o<this.description.Ba;o++)for(var l=this.description.Fd(o),p=0,d=c.ua.Wa(l);p<d;p++){var m=this.Pd(a,l,p);n.setAttribute(l,p,m)}},u.prototype.oD=function(a,n){if(this.wc(),n.Bc())throw c.i.ga("empty geometry");for(var o=n.description,l=0,p=o.Ba;l<p;l++)for(var d=o.Fd(l),m=c.ua.Wa(d),v=0;v<m;v++){var _=n.Vc(d,v);this.vn(a,d,v,_)}},u.prototype.Pd=function(a,n,o){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.ma:this.qa:o!=0?this.oa:this.sa;if(o>=c.ua.Wa(n))throw c.i.re();var l=this.description.Qf(n);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,a)+this.description.ak(l)-2+o]):c.ua.te(n)},u.prototype.vn=function(a,n,o,l){if(this.wc(),o>=c.ua.Wa(n))throw c.i.re();var p=this.description.Qf(n);0>p&&(this.se(n),p=this.description.Qf(n)),n==0?a!=0?o!=0?this.ma=l:this.qa=l:o!=0?this.oa=l:this.sa=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,a)+this.description.ak(p)-2+o]=l)},u.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();a.description=this.description,a.$x(this.description.Be.length-2),u.aM(this.la,a.la,2*(this.description.Be.length-2)),a.sa=this.sa,a.oa=this.oa,a.qa=this.qa,a.ma=this.ma,a.wc(),this.pp(a)},u.prototype.Vg=function(a,n){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(o.pa=this.Pd(0,a,n),o.wa=o.pa,o.Mk(this.Pd(1,a,n)),o)},u.prototype.TI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Mk(this.Pd(1,0,0)))},u.prototype.Vw=function(a,n){n.kg(this.description),n.Db(this.ic(a));for(var o=1,l=this.description.Ba;o<l;o++)for(var p=this.description.Fd(o),d=c.ua.Wa(p),m=0;m<d;m++){var v=this.Vc(a,p,m);n.setAttribute(p,m,v)}},u.prototype.zM=function(a){if(this.description!=a.description||this.sa!=a.sa||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.vG=function(){return this.sa==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var a=this.sa;this.sa=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=1;for(var n=this.description.Ba;a<n;a++)for(var o=this.description.qd(a),l=0,p=c.ua.Wa(o);l<p;l++){var d=this.Pd(0,o,l),m=this.Pd(1,o,l);this.vn(0,o,l,m),this.vn(1,o,l,d)}},u.prototype.Br=function(a,n,o){var l=a.K();if(this.K()===322){if(l==322)return c.zb.IM(this,a,n,o);throw c.i.Ra()}throw c.i.Ra()},u.prototype.EM=function(a,n,o,l,p){var d=a.K();if(this.K()===322){if(d==322)return c.zb.Yx(this,a,n,o,l,p);throw c.i.Ra()}throw c.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(a,n){return n*(a.Be.length-2)},u.prototype.ic=function(a,n){if(n===void 0)return n=new c.h,this.ic(a,n),n;c.mc.dT(this.sa,this.oa,this.qa,this.ma,a,n)},u.prototype.fe=function(){return null},u.prototype.ZF=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Qn=function(){return null},u.prototype.jg=function(){return null},u.prototype.Tx=function(a,n){return n!==void 0?this.ux(n)-this.ux(a):this.ux(a)},u.prototype.pp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.HG=function(){return null},u.prototype.ub=function(a,n){if(!n&&this.Br(a,0,!1)!=0)return 0;n=17976931348623157e292;var o=this.ac(),l=a.fe(o,!1);return o.sub(a.ic(l)),(o=o.length())<n&&(n=o),o=this.xc(),l=a.fe(o,!1),o.sub(a.ic(l)),(o=o.length())<n&&(n=o),o=a.ac(),l=this.fe(o,!1),o.sub(this.ic(l)),(o=o.length())<n&&(n=o),o=a.xc(),l=this.fe(o,!1),o.sub(this.ic(l)),(o=o.length())<n&&(n=o),n},u.prototype.mg=function(){return c.si.im(this,null)},u}(c.ba);c.MC=C}(W||(W={})),new W.h,function(c){var C;(C=c.UK||(c.UK={}))[C.Unknown=-1]="Unknown",C[C.Not=0]="Not",C[C.Weak=1]="Weak",C[C.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(c.GK||(c.GK={}));var b=function(u){function a(){var n=u.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return Ot(a,u),a.prototype.pp=function(){},a.prototype.Zx=function(){},a.prototype.ey=function(){},a.prototype.I=function(){return this.xa},a.prototype.B=function(){return this.Bc()},a.prototype.Bc=function(){return this.xa==0},a.prototype.bk=function(n){return(this.Jm&n)!=0},a.prototype.Nf=function(n,o){this.Jm=o?this.Jm|n:this.Jm&~n},a.prototype.rc=function(){this.bk(32)&&this.WM()},a.prototype.vx=function(){if(this.Bc())throw c.i.ga("This operation was performed on an Empty Geometry.")},a.prototype.we=function(n,o){if(0>n||n>=this.xa)throw c.i.ga("index out of bounds");this.rc(),o.kg(this.description),o.B()&&o.up();for(var l=0;l<this.description.Ba;l++)for(var p=this.description.Fd(l),d=0,m=c.ua.Wa(p);d<m;d++){var v=this.Aa[l].Bg(m*n+d);o.setAttribute(p,d,v)}},a.prototype.It=function(n,o){this.rc();for(var l=o.description,p=0;p<l.Ba;p++)for(var d=l.Fd(p),m=c.ua.Wa(d),v=0;v<m;v++){var _=o.Vc(d,v);this.setAttribute(d,n,v,_)}},a.prototype.D=function(n,o){if(0>n||n>=this.I())throw c.i.re();this.rc(),this.Aa[0].uc(2*n,o)},a.prototype.Oa=function(n){var o=new c.h;return this.D(n,o),o},a.prototype.Hc=function(n,o){this.Aa[0].uc(2*n,o)},a.prototype.Db=function(n,o,l){if(0>n||n>=this.xa)throw c.i.re();this.rc();var p=this.Aa[0];l!==void 0?(p.write(2*n,o),p.write(2*n+1,l)):p.Vt(2*n,o),this.Qc(1993)},a.prototype.xz=function(){if(void 0>=this.I())throw c.i.re();this.rc();var n=this.Aa[0],o=new c.Od;return o.x=n.read(NaN),o.y=n.read(NaN),o.z=this.hasAttribute(1)?this.Aa[1].Bg(void 0):c.ua.te(1),o},a.prototype.YB=function(n){if(0>n||n>=this.I())throw c.i.re();this.se(1),this.rc(),this.Qc(1993);var o=this.Aa[0];o.write(2*n,(void 0).x),o.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},a.prototype.Vc=function(n,o,l){if(0>o||o>=this.xa)throw c.i.re();var p=c.ua.Wa(n);if(l>=p)throw c.i.re();this.rc();var d=this.description.Qf(n);return 0<=d?this.Aa[d].Bg(o*p+l):c.ua.te(n)},a.prototype.sF=function(n,o){return this.Vc(n,o,void 0)},a.prototype.setAttribute=function(n,o,l,p){if(0>o||o>=this.xa)throw c.i.re();var d=c.ua.Wa(n);if(l>=d)throw c.i.re();this.se(n),this.rc(),n=this.description.Qf(n),this.Qc(1993),this.Aa[n].rr(o*d+l,p)},a.prototype.vb=function(n){return this.vx(),this.se(n),this.rc(),this.Aa[this.description.Qf(n)]},a.prototype.kn=function(n,o){if(o!=null&&c.ua.Vp(n)!=o.Vp())throw c.i.O();this.se(n),n=this.description.Qf(n),this.Aa==null&&(this.Aa=c.Zc.kI(this.description.Ba)),this.Aa[n]=o,this.Qc(16777215)},a.prototype.un=function(n){var o=null;if(this.Aa!=null){var l=c.ee.Kw(n,this.description);o=[];for(var p=0,d=n.Ba;p<d;p++)l[p]!=-1&&(o[p]=this.Aa[l[p]])}this.description=n,this.Aa=o,this.Rg=-1,this.Qc(16777215)},a.prototype.uD=function(n){this.yu(!0),n instanceof c.l?this.aa.A(n):this.aa.Ro(n)},a.prototype.VM=function(n){this.yu(!1),n instanceof c.l?this.aa.A(n):this.aa.Ro(n)},a.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},a.prototype.A=function(n){this.uD(n)},a.prototype.Ro=function(n){this.uD(n)},a.prototype.yc=function(n){this.VM(n)},a.prototype.Vg=function(n,o){var l=new c.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(n,o))},a.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var o=this.I(),l=0,p=this.description.Ba;l<p;l++)n=this.Aa[l].Bn(n,0,o*c.ua.Wa(this.description.Fd(l)));return n},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var o=this.I();if(o!=n.I())return!1;for(var l=0;l<this.description.Ba;l++){var p=this.description.qd(l),d=this.vb(p),m=n.vb(p);if(!d.Nb(m,0,o*c.ua.Wa(p)))return!1}return!0},a.prototype.copyTo=function(n){if(n.K()!=this.K())throw c.i.O();this.YC(n)},a.prototype.YC=function(n){this.rc(),n.description=this.description,n.Aa=null;var o=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var p=0;p<o;p++)this.Aa[p]!=null&&(l[p]=this.Aa[p].AB(this.I()*c.ua.Wa(this.description.Fd(p))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=l;try{this.pp(n)}catch{throw n.Pa(),c.i.hu()}},a.prototype.qD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},a.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.fM(),this.wc()},a.prototype.yu=function(n){if(this.rc(),this.bk(192))if(this.aa==null?this.aa=new c.Hh(this.description):this.aa.kg(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var o=1;o<this.description.Ba;o++)for(var l=this.description.Fd(o),p=c.ua.Wa(l),d=this.Aa[o],m=0;m<p;m++){var v=new c.Oc;v.Pa();for(var _=0;_<this.xa;_++){var M=d.Bg(_*p+m);v.$b(M)}this.aa.setInterval(l,m,v)}n&&this.Nf(192,!1)}},a.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],o=new c.h,l=0;l<this.xa;l++)n.uc(2*l,o),this.aa.$b(o)},a.prototype.Ap=function(n){n.Pa();for(var o=this.Aa[0],l=new c.h,p=0;p<this.xa;p++)o.uc(2*p,l),n.$b(l)},a.prototype.WM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=c.Zc.kI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var o=this.description.Fd(n);if(this.Aa[n]!=null){var l=c.ua.Wa(o),p=c.P.truncate(this.Aa[n].size/l);p<this.xa&&(p=c.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(p*l,c.ua.te(o))),p<this.Rg&&(this.Rg=p)}else this.Aa[n]=c.Zc.SE(o,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},a.prototype.fm=function(n){if(0>n)throw c.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},a.prototype.qm=function(n){if(!this.bk(1)){if(!this.bk(2))return 0;if(this.IT>=n)return this.bk(8)?1:2}return-1},a.prototype.Eh=function(n,o){if(this.IT=o,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw c.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},a.prototype.fM=function(){this.Cb!=null&&(this.Cb=null)},a.prototype.eD=function(n,o,l,p){if(0>n||n>=this.xa||0>o||o>=this.xa)throw c.i.ga("index out of bounds");this.rc(),p.kg(this.description),p.B()&&p.up();for(var d=0;d<this.description.Ba;d++)for(var m=this.description.Fd(d),v=0,_=c.ua.Wa(m);v<_;v++){var M=this.Aa[d].Bg(_*n+v),T=this.Aa[d].Bg(_*o+v);p.setAttribute(m,v,c.mc.jq(M,T,l))}},a.prototype.Ar=function(n,o){var l=this.Aa[0].o,p=l[2*n]-l[2*o];return n=l[2*n+1]-l[2*o+1],Math.sqrt(p*p+n*n)},a.prototype.Fh=function(n,o){if(0>n||n>=this.xa)throw c.i.re();if(o.B())throw c.i.O();this.rc();for(var l=o.description,p=0;p<l.Ba;p++)for(var d=l.qd(p),m=c.ua.Wa(d),v=0;v<m;v++){var _=o.Vc(d,v);this.setAttribute(d,n,v,_)}},a.prototype.nu=function(){return null},a.prototype.hj=function(){return null},a}(c.ba);c.Fx=b}(W||(W={})),function(c){var C=function(){function b(){this.ob=this.$n=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new c.ad(7),this.$n=null}return b.prototype.Wo=function(u){this.$n=u},b.prototype.LP=function(){this.Tv=!1},b.prototype.Ee=function(u){this.ob.Ee(u)},b.prototype.Rr=function(u){var a=this.ob.De();return this.jX(a),this.mX(u,a),a},b.prototype.GP=function(u){this.ob.kd(u)},b.prototype.addElement=function(u,a){return a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne),this.zD(u,0,a)},b.prototype.DD=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.zD(u,1,this.Ne)},b.prototype.yn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var a=this.Ne,n=this.ob.o;if(a==-1||n[7*a]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*a]=u,this.xp(-1,u,a,n),u;var o=a==-1?-1:n[7*a+2];return u=this.ob.Nl([-1,-1,o,u,this.il(),-1,-1]),(n=this.ob.o)[7*o+1]=u,this.ky(u,n),n[7*u+2]===-1&&(n[7*a]=u),this.xp(-1,u,a,n),u},b.prototype.Bu=function(u,a,n,o){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var p=this.ob.o;if(l==-1||p[7*l]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(p=this.ob.o)[7*l]=n,this.xp(-1,n,l,p),n;if(o){o=a!=-1?this.$n.compare(this,n,a):-1;var d=u!=-1?this.$n.compare(this,n,u):1}else o=-1,d=1;if(o==0||d==0)return p[7*l+3]=o==0?a:u,-1;for((a!=-1&&u!=-1?this.Vm>c.P.WA(this.Vm)>>1:a!=-1)?u=a:o=d,a=!0;;){if(0>o){if((d=p[7*u])==-1){o=u,n=this.ob.Nl([-1,-1,u,n,this.il(),-1,-1]),(p=this.ob.o)[7*u]=n;break}u=d}else{if((d=p[7*u+1])==-1){o=p[7*u+6],n=this.ob.Nl([-1,-1,u,n,this.il(),-1,-1]),(p=this.ob.o)[7*u+1]=n;break}u=d}a&&(o*=-1,a=!1)}return this.ky(n,p),p[7*n+2]===-1&&(p[7*l]=n),this.xp(o,n,l,p),n},b.prototype.zF=function(){return this.cR(this.Ne)},b.prototype.wd=function(u,a){a=a==-1?this.Ne:a,this.Tv?this.FP(u,a):this.aY(u,a)},b.prototype.search=function(u,a){for(a=this.uv(a);a!=-1;){var n=this.$n.compare(this,u,a);if(n==0)return a;a=0>n?this.nl(a):this.Zp(a)}return-1},b.prototype.zW=function(u){for(var a=this.uv(-1),n=-1;a!=-1;){var o=u.compare(this,a);if(o==0)return a;0>o?a=this.nl(a):(n=a,a=this.Zp(a))}return n},b.prototype.oJ=function(u){for(var a=this.uv(-1),n=-1;a!=-1;){var o=u.compare(this,a);if(o==0)return a;0>o?(n=a,a=this.nl(a)):a=this.Zp(a)}return n},b.prototype.ka=function(u){return this.ob.U(u,3)},b.prototype.nl=function(u){return this.ob.U(u,0)},b.prototype.Zp=function(u){return this.ob.U(u,1)},b.prototype.getParent=function(u){return this.ob.U(u,2)},b.prototype.lb=function(u){return this.ob.U(u,6)},b.prototype.xe=function(u){return this.ob.U(u,5)},b.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},b.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},b.prototype.SR=function(u){return u==-1?this.WF(this.Ne):this.WF(u)},b.prototype.Uj=function(u,a){this.HB(u,a)},b.prototype.uv=function(u){return u==-1?this.SF(this.Ne):this.SF(u)},b.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},b.prototype.size=function(u){return u==-1?this.UF(this.Ne):this.UF(u)},b.prototype.EN=function(u,a){for(var n=a[7*u],o=a[7*u+1],l=a[7*u+4];n!=-1||o!=-1;){var p=n!=-1?a[7*n+4]:2147483647;if(o=o!=-1?a[7*o+4]:2147483647,l<=Math.min(p,o))break;p<=o?this.mJ(n,a):this.lJ(u,a),n=a[7*u],o=a[7*u+1]}},b.prototype.ky=function(u,a){if(this.Tv)for(var n=a[7*u+4],o=a[7*u+2];o!=-1&&a[7*o+4]>n;)a[7*o]==u?this.mJ(u,a):this.lJ(o,a),o=a[7*u+2]},b.prototype.lJ=function(u,a){var n=a[7*u+1];a[7*n+2]=a[7*u+2],a[7*u+2]=n;var o=a[7*n];a[7*u+1]=o,o!=-1&&(a[7*o+2]=u),a[7*n]=u,(o=a[7*n+2])!=-1&&(a[7*o]==u?a[7*o]=n:a[7*o+1]=n)},b.prototype.mJ=function(u,a){var n=a[7*u+2];a[7*u+2]=a[7*n+2],a[7*n+2]=u;var o=a[7*u+1];a[7*n]=o,o!=-1&&(a[7*o+2]=n),a[7*u+1]=n,(o=a[7*u+2])!=-1&&(a[7*o]===n?a[7*o]=u:a[7*o+1]=u)},b.prototype.Qk=function(u,a){this.ob.T(u,2,a)},b.prototype.NB=function(u,a){this.ob.T(u,0,a)},b.prototype.RB=function(u,a){this.ob.T(u,1,a)},b.prototype.QB=function(u,a){this.ob.T(u,5,a)},b.prototype.fx=function(u,a){this.ob.T(u,6,a)},b.prototype.RJ=function(u,a){this.ob.T(a,0,u)},b.prototype.jX=function(u){this.ob.T(u,4,0)},b.prototype.mX=function(u,a){this.ob.T(a,5,u)},b.prototype.SF=function(u){return u==-1?-1:this.ob.U(u,0)},b.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},b.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},b.prototype.cR=function(u){return u==-1?-1:this.ob.U(u,3)},b.prototype.UF=function(u){return u==-1?0:this.ob.U(u,4)},b.prototype.WF=function(u){return this.ob.U(u,5)},b.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},b.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},b.prototype.il=function(){return this.Vm=c.P.WA(this.Vm),1073741823&this.Vm},b.prototype.zD=function(u,a,n){var o=this.ob.o;if(n==-1||o[7*n]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(o=this.ob.o)[7*n]=u,this.xp(-1,u,n,o),u;for(var l=n==-1?-1:o[7*n];;){var p=a==-1?1:this.$n.compare(this,u,l);if(0>p){if((p=this.nl(l))==-1){a=l,u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(o=this.ob.o)[7*l]=u;break}l=p}else{if(a==1&&p==0)return o[7*n+3]=l,-1;if((p=o[7*l+1])==-1){a=o[7*l+6],u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(o=this.ob.o)[7*l+1]=u;break}l=p}}return this.ky(u,o),o[7*u+2]===-1&&(o[7*n]=u),this.xp(a,u,n,o),u},b.prototype.xp=function(u,a,n,o){if(u!=-1){var l=o[7*u+5];o[7*u+5]=a}else l=n==-1?-1:o[7*n+2];o[7*a+5]=l,l!=-1&&(o[7*l+6]=a),o[7*a+6]=u,u==(n==-1?-1:o[7*n+1])&&(o[7*n+1]=a),u==-1&&(o[7*n+2]=a),o[7*n+4]=(n==-1?0:o[7*n+4])+1},b.prototype.uB=function(u,a){var n=this.ob.o,o=n[7*u+5];u=n[7*u+6],o!=-1?n[7*o+6]=u:n[7*a+1]=u,u!=-1?n[7*u+5]=o:n[7*a+2]=o,n[7*a+4]=a===-1?-1:n[7*a+4]-1},b.prototype.aY=function(u,a){this.uB(u,a);var n=this.nl(u),o=this.Zp(u),l=this.getParent(u),p=u;if(n!=-1&&o!=-1){this.Vm=c.P.WA(this.Vm);var d=1073741823<this.Vm?this.lb(u):this.xe(u),m=this.getParent(d)==u;this.ob.aC(u,d,0),this.ob.aC(u,d,1),this.ob.aC(u,d,2),l!=-1?this.nl(l)==u?this.NB(l,d):this.RB(l,d):this.RJ(d,a),m?(n==d?(this.NB(d,u),this.Qk(o,d)):o==d&&(this.RB(d,u),this.Qk(n,d)),this.Qk(u,d),l=d):(this.Qk(n,d),this.Qk(o,d),l=this.getParent(u),p=d),n=this.nl(u),o=this.Zp(u),n!=-1&&this.Qk(n,u),o!=-1&&this.Qk(o,u)}n=n!=-1?n:o,l==-1?this.RJ(n,a):this.nl(l)==p?this.NB(l,n):this.RB(l,n),n!=-1&&this.Qk(n,l),this.hl(u)},b.prototype.FP=function(u,a){var n=this.ob.o;n[7*u+4]=2147483647;var o=-1,l=-1,p=a===-1?-1:n[7*a],d=p==u;if(d&&(o=n[7*p],l=n[7*p+1],o==-1&&l==-1))return this.uB(p,a),this.hl(p),void(n[7*a]=-1);this.EN(u,n),(p=n[7*u+2])!=-1&&(n[7*p]==u?n[7*p]=-1:n[7*p+1]=-1),this.uB(u,a),this.hl(u),d&&(n[7*a]=o==-1||n[7*o+2]!=-1?l:o)},b.prototype.HB=function(u,a){this.ob.T(u,3,a)},b}();c.Zj=C}(W||(W={})),function(c){var C=function(){function b(u,a){u!==void 0&&this.L(u,a)}return b.prototype.L=function(u,a){this.pa=u,this.wa=a,this.normalize()},b.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},b.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},b.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},b.prototype.Pa=function(){this.wa=this.pa=NaN},b.prototype.B=function(){return isNaN(this.pa)},b.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Mk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},b.prototype.Mk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},b.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},b.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},b.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},b.prototype.EB=function(u,a){u>a?(this.pa=a,this.wa=u):(this.pa=u,this.wa=a)},b.prototype.Kt=function(u){return c.P.Sk(u,this.pa,this.wa)},b.prototype.S=function(){return this.wa-this.pa},b.prototype.tf=function(){return .5*(this.pa+this.wa)},b.prototype.Nb=function(u){return u==this||u instanceof b&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},b.prototype.dc=function(){return c.P.wj(c.P.wj())},b}();c.Oc=C}(W||(W={})),function(c){var C=new c.Oc,b=new c.Oc,u=function(){this.ne=null,this.pb=-1,this.tb=new c.zb,this.kA=55555555,this.Vv=this.Xv=!1,this.Vf=new c.Oc,this.Vf.EB(0,0)};c.AY=u;var a=function(){function n(o,l,p){this.g=o,this.Ik=NaN,this.HH=this.Mq=0,this.IH=NaN,this.ra=l,this.Pq=10*l,this.JH=this.KH=NaN,this.rg=!1,this.Fm=this.ht=this.Mo=this.Zs=this.Ys=-1,this.bA=p,this.NA=new u,this.SH=new u,c.P.truncate(3*o.gd/2)}return n.prototype.gG=function(o,l,p,d){o.ne=d===null?null:d[p[5*l]],o.Vv=o.ne!=null,o.Vv||((d=p[5*l+2])!==-1&&this.g.eW(p[5*l],p[5*d],o.tb),o.ne=o.tb,o.Vf.EB(o.tb.sa,o.tb.qa),o.Vf.wa+=this.ra,o.tb.lI(),o.Xv=o.tb.ma==o.tb.oa,o.Xv||(o.kA=(o.tb.qa-o.tb.sa)/(o.tb.ma-o.tb.oa)))},n.prototype.IO=function(o,l){var p=o.Br(l,this.ra,!0);return p!=0?p==2?this.Ly():this.zi():(o.$p(Xn),o.Vr(Ts),l.$p($s),l.Vr(oo),wi.na(this.Mq,this.Ik),Xn.rb($s)&&this.Ik==Xn.y?0>Ts.compare(oo)?wi.N(Ts):wi.N(oo):Xn.rb(oo)&&this.Ik==Xn.y?0>Ts.compare($s)?wi.N(Ts):wi.N($s):$s.rb(Ts)&&this.Ik==$s.y?0>Xn.compare(oo)?wi.N(Xn):wi.N(oo):Ts.rb(oo)&&this.Ik==Ts.y&&(0>Xn.compare($s)?wi.N(Xn):wi.N($s)),o.Me(wi.y,wi.x)<l.Me(wi.y,wi.x)?-1:1)},n.prototype.GO=function(o,l){if(o.tb.oa==l.tb.oa&&o.tb.sa==l.tb.sa)return o.tb.ma==l.tb.ma&&o.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.JE(o,l);if(o.tb.ma==l.tb.ma&&o.tb.qa==l.tb.qa)return this.IE(o,l);var p=this.IE(o,l);return o=this.JE(o,l),0>p&&0>o?-1:0<p&&0<o?1:this.zi()},n.prototype.CO=function(o,l){if(o.qa>l.qa){if(l.qa>l.sa&&l.ma-l.oa<2*this.ra&&o.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.sa)*(o.qa-o.sa)<this.Pq&&l.xi(o.qa,o.ma,this.ra))return this.zi();return 1},n.prototype.DO=function(o,l){if(o.sa<l.sa){if(l.qa>l.sa&&l.ma-l.oa<2*this.ra&&o.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.sa)*(o.sa-o.qa)<this.Pq&&l.xi(o.sa,o.oa,this.ra))return this.zi();return-1},n.prototype.EO=function(o,l){var p=new c.h;p.vc(l.xc(),l.ac()),p.cr(),p.normalize();var d=new c.h;d.vc(o.ac(),l.ac());var m=new c.h;m.vc(o.xc(),l.ac()),d=d.Sh(p),p=m.Sh(p),m=Math.abs(d);var v=Math.abs(p);if(m<v){if(m<this.Pq&&l.xi(o.sa,o.oa,this.ra))return this.zi()}else if(v<this.Pq&&l.xi(o.qa,o.ma,this.ra))return this.zi();return 0>d&&0>p?-1:0<d&&0<p?1:this.zi()},n.prototype.HE=function(o,l){return o.oa==l.oa&&o.sa==l.sa?this.CO(o,l):o.ma==l.ma&&o.qa==l.qa?this.DO(o,l):this.EO(o,l)},n.prototype.FO=function(o,l){return o.ma==l.ma&&o.qa==l.qa&&o.oa==l.oa&&o.sa==l.sa?this.bA?this.Ly():0:this.zi()},n.prototype.IE=function(o,l){var p=1;if(o.tb.oa<l.tb.oa){p=-1;var d=o;o=l,l=d}o=o.tb,d=l.tb;var m=o.sa-d.sa;l=l.kA*(o.oa-d.oa);var v=this.Pq;return m<l-v?-p:m>l+v?p:d.xi(o.sa,o.oa,this.ra)?this.zi():m<l?-p:p},n.prototype.JE=function(o,l){var p=1;if(l.tb.ma<o.tb.ma){p=-1;var d=o;o=l,l=d}o=o.tb,d=l.tb;var m=o.qa-d.sa;l=l.kA*(o.ma-d.oa);var v=this.Pq;return m<l-v?-p:m>l+v?p:d.xi(o.qa,o.ma,this.ra)?this.zi():m<l?-p:p},n.prototype.Ly=function(){return this.rg=!0,this.Pi=new c.Nd(5,this.Mo,this.ht),-1},n.prototype.zi=function(){return this.rg=!0,this.bA?this.Pi=new c.Nd(4,this.Mo,this.ht):this.ht=this.Mo=this.Zs=this.Ys=-1,-1},n.prototype.HO=function(o,l,p,d){if(this.rg)return-1;var m=this.IH==this.Ik&&this.HH==this.Mq;if(m&&o==this.Ys)var v=this.JH;else v=NaN,this.Ys=-1;return m&&l==this.Zs?m=this.KH:(m=NaN,this.Zs=-1),p.ne.TI(C),d.ne.TI(b),C.wa<b.pa?-1:b.wa<C.pa?1:(this.IH=this.Ik,this.HH=this.Mq,isNaN(v)&&(this.Ys=o,this.JH=v=o=p.ne.Me(this.Ik,this.Mq)),isNaN(m)&&(this.Zs=l,this.KH=m=o=d.ne.Me(this.Ik,this.Mq)),Math.abs(v-m)<=this.ra?this.IO(p.ne,d.ne):v<m?-1:v>m?1:0)},n.prototype.Mr=function(){this.rg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.UJ=function(o,l){this.Ik=o,this.Mq=l,this.ht=this.Mo=this.Zs=this.Ys=-1},n.prototype.compare=function(o,l,p){return this.rg?-1:(o=o.ka(p),this.Fm=p,this.LE(l,l,o,o))},n.prototype.LE=function(o,l,p,d){if(this.Mo==l)var m=this.NA;else this.Mo=l,m=this.NA,this.NA.pb=o,this.gG(m,l,this.g.ud.o,this.g.Te);if(v==null){this.ht=d;var v=this.SH;this.SH.pb=p,this.gG(v,d,this.g.ud.o,this.g.Te)}return m.Vv||v.Vv?this.HO(l,d,m,v):m.Vf.wa<v.Vf.pa?-1:v.Vf.wa<m.Vf.pa?1:(o=m.Xv?1:0,(o|=v.Xv?2:0)==0?this.GO(m,v):o==1?this.HE(m.tb,v.tb):o==2?-1*this.HE(v.tb,m.tb):this.FO(m.tb,v.tb))},n}();c.OC=a}(W||(W={})),function(c){var C=function(){function b(u,a){this.g=u,this.ra=a,this.rg=!1,this.Mo=-1,this.Vf=new c.Oc,this.Iq=new c.h,this.Iq.Sc(),this.ie=new c.zb,this.Fm=-1,this.vA=17976931348623157e292}return b.prototype.Mr=function(){this.rg=!1,this.vA=17976931348623157e292},b.prototype.Fh=function(u){this.Iq.N(u)},b.prototype.compare=function(u,a){return this.ME(a,u.ka(a))},b.prototype.ME=function(u,a){var n=this.g.cc(a)!=null;if(n||(this.g.fd(a,this.ie),this.Vf.EB(this.ie.sa,this.ie.qa)),n)throw c.i.ga("not implemented");if(this.Iq.x+this.ra<this.Vf.pa)return-1;if(this.Iq.x-this.ra>this.Vf.wa)return 1;if(this.ie.oa==this.ie.ma)return this.Fm=u,this.rg=!0,0;this.ie.lI(),n=this.ie.ac(),(a=new c.h).vc(this.ie.xc(),n),a.cr();var o=new c.h;return o.vc(this.Iq,n),n=a.Sh(o),(n/=a.length())<10*-this.ra?-1:n>10*this.ra?1:this.ie.ss(this.Iq,this.ra)&&((a=Math.abs(n))<this.vA&&(this.Fm=u,this.vA=a),this.rg=!0,a<.25*this.ra)?0:0>n?-1:1},b}();c.VL=C}(W||(W={})),function(c){function C(u,a,n,o){n=new Float64Array(u.subarray(n,o)),u.set(n,a)}var b=function(){function u(a){this.Pb=this.qk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Float64Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Cn=function(a){var n=new u(0);return n.o=new Float64Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Float64Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?((a=new Float64Array(a)).set(this.o),this.o=a):this.o=new Float64Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.AB=function(a){return u.Nr(this,a)},u.prototype.Bg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Float64Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Float64Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Bn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.wj(this.read(n));return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var m=0;m<o;m+=p){l-=p;for(var v=0;v<p;v++)this.o[d+m+v]=a.o[n+l+v]}}},u.prototype.Nn=function(a,n,o,l,p,d,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();var v=this.size-m;if(v<l&&this.resize(this.size+l-v),C(this.o,a+l,a,a+(m-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,m=0;m<l;m+=d)for(p-=d,v=0;v<d;v++)this.o[a+m+v]=n.o[o+p+v]},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var m=l-1;p<l;++p)d=n[o+m],this.o[a++]=d.x,this.o[a++]=d.y,m--}},u.prototype.Mn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var m=0;m<d;m++)this.o[a+m]=o.o[l+m];a+=d,l-=d}},u.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var m=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=m}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var m=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=m}o+=p,a-=p}},u.prototype.pC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.oC=function(a,n,o){if(0>a||0>n)throw c.i.O();if(n!=0){this.size<(n<<1)+a&&this.resize((n<<1)+a),n+=0;for(var l=0;l<n;l++)this.o[a]=o[l][0],this.o[a+1]=o[l][1],a+=2}},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.oB=function(a,n,o){if(0>a||0>n||this.size<(n>>1)+a)throw c.i.O();if(n!=0){n=0+n;for(var l=0;l<n;l++)o[l][0]=this.o[a],o[l][1]=this.o[a+1],a+=2}},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(a,n,o){Array.prototype.sort.call(this.o.subarray(a,n),o)},u.prototype.Vp=function(){return 1},u}();c.ce=b}(W||(W={})),function(c){function C(u,a,n,o){n=new Int32Array(u.subarray(n,o)),u.set(n,a)}c.jY=function(){this.random=1973};var b=function(){function u(a){this.Pb=this.qk=!1,this.o=null;var n=a;2>n&&(n=2),this.o=new Int32Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Cn=function(a){var n=new u(0);return n.o=new Int32Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int32Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?((a=new Int32Array(a)).set(this.o),this.o=a):this.o=new Int32Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.AB=function(a){return u.Nr(this,a)},u.prototype.Bg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int32Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int32Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Bn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.Vh(this.read(n),a);return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var m=0;m<o;m+=p){l-=p;for(var v=0;v<p;v++)this.o[d+m+v]=a.o[n+l+v]}}},u.prototype.Nn=function(a,n,o,l,p,d,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();if(C(this.o,a+l,a,a+(m-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,m=0;m<l;m+=d){p-=d;for(var v=0;v<d;v++)this.o[a+m+v]=n.o[o+p+v]}},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var m=l-1;p<l;++p)d=n[o+m],this.o[a++]=d.x,this.o[a++]=d.y,m--}},u.prototype.Mn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var m=0;m<d;m++)this.o[a+m]=o.o[l+m];a+=d,l-=d}},u.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var m=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=m}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var m=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=m}o+=p,a-=p}},u.prototype.pC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(a,n,o){10>n-a?u.lG(this.o,a,n,o):u.kB(this.o,a,n-1,o)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.TW=function(a){this.o[this.size-1]=a},u.prototype.KV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.fF=function(a){for(var n=0,o=this.size;n<o;n++)if(this.o[n]==a)return n;return-1},u.prototype.bG=function(a){return 0<=this.fF(a)},u.lG=function(a,n,o,l){for(var p=n;p<o;p++){for(var d=a[p],m=p-1;m>=n&&0<l(a[m],d);)a[m+1]=a[m],m--;a[m+1]=d}},u.sx=function(a,n,o){var l=a[o];a[o]=a[n],a[n]=l},u.kB=function(a,n,o,l){if(!(n>=o))for(;;){if(9>o-n){u.lG(a,n,o+1,l);break}var p=a[n];u.sx(a,n,o);for(var d=n,m=n;m<o;m++)0>=l(a[m],p)&&(u.sx(a,d,m),d+=1);u.sx(a,d,o),d-n<o-d?(u.kB(a,n,d-1,l),n=d+1):(u.kB(a,d+1,o,l),o=d-1)}},u}();c.ja=b}(W||(W={})),function(c){function C(u,a,n,o){n=new Int8Array(u.subarray(n,o)),u.set(n,a)}var b=function(){function u(a){this.o=null;var n=a;2>n&&(n=2),this.o=new Int8Array(n),this.size=a}return u.prototype.rotate=function(a,n,o){if(this.Pb)throw c.i.ga("invalid_call");if(n<a||n>o||a>o)throw c.i.O();a!=n&&o!=n&&(this.pi(a,n-a,1),this.pi(n,o-n,1),this.pi(a,o-a,1))},u.rf=function(a,n){var o=new u(a),l=o.o;if(2>a&&(a=2),n!==0)for(var p=0;p<a;p++)l[p]=n;return o},u.Cn=function(a){var n=new u(0);return n.o=new Int8Array(a.o),n.size=a.size,n},u.Nr=function(a,n){var o=new u(0);return o.size=a.size,o.size>n&&(o.size=n),2>(n=o.size)&&(n=2),o.o=new Int8Array(n),o.o.set(a.o.length<=n?a.o:a.o.subarray(0,n),0),o},u.prototype.Jb=function(a){0>=a||(this.o==null?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?((a=new Int8Array(a)).set(this.o),this.o=a):this.o=new Int8Array(a)))},u.prototype.read=function(a){return this.o[a]},u.prototype.uc=function(a,n){n.x=this.o[a],n.y=this.o[a+1]},u.prototype.get=function(a){return this.o[a]},u.prototype.write=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.set=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n},u.prototype.Vt=function(a,n){if(this.Pb)throw c.i.Hb();this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.add=function(a){this.resize(this.size+1),this.o[this.size-1]=a},u.prototype.AB=function(a){return u.Nr(this,a)},u.prototype.Bg=function(a){return this.read(a)},u.prototype.resize=function(a,n){if(n===void 0&&(n=0),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var o=new Int8Array(this.o,0,a);this.o=o}}else{a>this.o.length&&(o=c.P.truncate(64>a?Math.max(2*a,4):5*a/4),(o=new Int8Array(o)).set(this.o),this.o=o),o=this.o;for(var l=this.size;l<a;l++)o[l]=n}this.size=a},u.prototype.Dh=function(a){if((this.o==null||a>this.o.length)&&this.resize(a),this.qk)throw c.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a},u.prototype.rr=function(a,n){this.write(a,n)},u.prototype.Bn=function(a,n,o){for(var l=this.size;n<l&&n<o;n++)a=c.P.Vh(this.read(n),a);return a},u.prototype.Nb=function(a,n,o){if(a==null||!(a instanceof u))return!1;var l=this.size,p=a.size;if(o>l||o>p&&l!=p)return!1;for(o>l&&(o=l);n<o;n++)if(this.read(n)!=a.read(n))return!1;return!0},u.prototype.addRange=function(a,n,o,l,p){if(this.Pb)throw c.i.Hb();if(!l&&(1>p||o%p!=0))throw c.i.O();var d=this.size;if(this.resize(d+o),l)this.o.set(a.o.subarray(n,n+o),d);else{l=o;for(var m=0;m<o;m+=p){l-=p;for(var v=0;v<p;v++)this.o[d+m+v]=a.o[n+l+v]}}},u.prototype.Nn=function(a,n,o,l,p,d,m){if(this.Pb)throw c.i.Hb();if(!p&&(1>d||l%d!=0))throw c.i.O();if(C(this.o,a+l,a,a+(m-a)),this.o==n.o&&a<o&&(o+=l),p)this.o.set(n.o.subarray(o,o+l),a);else for(p=l,m=0;m<l;m+=d){p-=d;for(var v=0;v<d;v++)this.o[a+m+v]=n.o[o+p+v]}},u.prototype.Mn=function(a,n,o,l){if(this.Pb)throw c.i.Hb();for(l-=a,C(this.o,a+l,a,a+l),l=0;l<o;l++)this.o[a+l]=n},u.prototype.Dz=function(a,n,o,l,p,d){if(this.Pb)throw c.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,a+2*l,a,a+(d-a)),p)for(p=0;p<l;p++)d=n[o++],this.o[a++]=d.x,this.o[a++]=d.y;else{p=0;for(var m=l-1;p<l;++p)d=n[o+m],this.o[a++]=d.x,this.o[a++]=d.y,m--}},u.prototype.xj=function(a,n,o){if(this.Pb)throw c.i.Hb();C(this.o,a+2,a,a+(o-a)),this.o[a]=n.x,this.o[a+1]=n.y},u.prototype.Wt=function(a,n,o,l,p,d){if(0>a||0>n||0>l||!p&&(0>=d||n%d!=0)||o.size<l+n)throw c.i.O();if(n!=0)if(this.size<n+a&&this.resize(n+a),o==this)this.Cr(a,n,l,p,d);else if(p)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l++;else if(l=l+n-d,d==1)for(p=0;p<n;p++)this.o[a]=o.o[l],a++,l--;else for(p=0,n=c.P.truncate(n/d);p<n;p++){for(var m=0;m<d;m++)this.o[a+m]=o.o[l+m];a+=d,l-=d}},u.prototype.Fn=function(a,n,o){if(this.Pb||a+n>this.size)throw c.i.Hb();0<o-(a+n)&&C(this.o,a,a+n,a+(o-(a+n))+n),this.size-=n},u.prototype.pi=function(a,n,o){if(this.Pb||1>o||n%o!=0)throw c.i.Hb();for(var l=n>>1,p=0;p<l;p+=o){n-=o;for(var d=0;d<o;d++){var m=this.o[a+p+d];this.o[a+p+d]=this.o[a+n+d],this.o[a+n+d]=m}}},u.prototype.Yj=function(a,n,o){if(0>n||0>o||0>n||o+n>this.size)throw c.i.O();for(var l=n;l<n+o;l++)this.o[l]=a},u.prototype.Cr=function(a,n,o,l,p){if(!(l&&a==o||(this.o.set(this.o.subarray(o,o+n),a),l)))for(o=a,a=a+n-p,l=0,n=c.P.truncate(n/2);l<n;l++){for(var d=0;d<p;d++){var m=this.o[o+d];this.o[o+d]=this.o[a+d],this.o[a+d]=m}o+=p,a-=p}},u.prototype.pC=function(a,n,o,l,p){if(0>a||0>n||0>l)throw c.i.O();if(n!=0)for(this.size<(n<<1)+a&&this.resize((n<<1)+a),p||(a+=n-1<<1),p=p?2:-2,n+=l;l<n;l++)this.o[a]=o[l].x,this.o[a+1]=o[l].y,a+=p},u.prototype.Xw=function(a,n,o,l,p){if(0>a||0>n||0>l||this.size<n+a)throw c.i.O();if(p)for(p=0;p<n;p++)o[l+p]=this.o[a+p];else for(l=l+n-1;a<n;a++)o[l]=this.o[a],l--},u.prototype.clear=function(a){a?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(a,n,o){n=this.o.subarray(a,n),Array.prototype.sort.call(n,o),this.o.set(n,a)},u.prototype.tJ=function(a,n){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=n},u.prototype.EE=function(a,n){if(this.Pb)throw c.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~n},u.prototype.Vp=function(){return 1},u}();c.rn=b}(W||(W={})),function(c){c.Zc=function(){function C(){}return C.Or=function(b,u){return c.rn.rf(b,u)},C.En=function(b,u){return c.ce.rf(b,u)},C.jP=function(b,u,a){switch(b){case 1:b=c.ce.rf(u,a);break;case 2:b=c.ja.rf(u,a);break;case 4:b=c.rn.rf(u,a);break;default:throw c.i.Ra()}return b},C.SE=function(b,u){return C.jP(c.ua.Vp(b),u*c.ua.Wa(b),c.ua.te(b))},C.Qh=function(b,u){return c.ja.rf(b,u)},C.kI=function(b){var u,a=[];for(u=0;u<b;u++)a.push(null);return a},C}()}(W||(W={})),function(c){c.ha=function(C){C===void 0&&(C=0),this.u=C}}(W||(W={})),function(c){c.HL=function(){function C(){}return C.bind=function(b){c.Tc=b.PeDefs,c.qf=b.PeFactory,c.HC=b.PeVertcs,c.gj=b.PeCSTransformations,c.GC=b.PeGTTransformations,c.FL=b.PeGeogtran,c.EL=b.PeFactoryCodechange,c.FC=b.PeGCSExtent,c.Eg=b.PePCSInfo,c.GL=b.PeHorizon,c.DL=b.PeCoordsys,c.mp=b.PeGTlistExtended,c.mp.PE_GTLIST_OPTS_USE_DEFAULT=128,c.qf.initialize(null),c.Lx=b.PeGTlistExtendedEntry,c.qf.fromString(c.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},C}(),c.qf=null,c.HC=null,c.DL=null,c.GL=null,c.Eg=null,c.mp=null,c.Lx=null,c.FC=null,c.EL=null,c.FL=null,c.Tc=null,c.GC=null,c.gj=null}(W||(W={})),function(c){var C=function(){function b(){}return b.Mb=function(u,a){return 0<=a?b.R(u):-b.R(u)},b.R=function(u){return 0>u?-u:u},b.vi=function(u){return 3552713678800501e-30>u},b.EC=function(u,a,n){return b.R(u-a)<=n*(1+(b.R(u)+b.R(a))/2)},b.$=function(u,a){return b.EC(u,a,3552713678800501e-30)},b.zL=function(u){return 3552713678800501e-30>=b.R(u)},b.Dd=function(u){return b.zL(u)},b}();c.s=C,c.F=function(){function b(){}return b.hp=function(u,a){var n=0;return(u=C.R(u))+(a=C.R(a))!=0&&(u>a?(n=a/u,n=u*Math.sqrt(1+n*n)):(n=u/a,n=a*Math.sqrt(1+n*n))),n},b.Yq=function(u,a,n,o,l){for(var p=[0,0,0],d=[0,0,0],m=0;2>=m;m++)a[m]-=u[m],n[m]-=a[m];n=p[1]*d[2]-p[2]*d[1],a=p[2]*d[0]-p[0]*d[2],p=p[0]*d[1]-p[1]*d[0],u=-1*(n*u[0]+a*u[1]+p*u[2]),o[0]=n,o[1]=a,o[2]=p,o[3]=u,d=b.qn(o),o[0]/=d,o[1]/=d,o[2]/=d,o[3]/=d,l!=0&&(d=C.Dd(p)?C.Dd(u)?C.Mb(1,a):-C.Mb(1,u):C.Mb(1,p),d*=C.Mb(1,l),o[0]*=d,o[1]*=d,o[2]*=d,o[3]*=d)},b.yx=function(u,a,n){n[0]=u[1]*a[2]-a[1]*u[2],n[1]=u[2]*a[0]-a[2]*u[0],n[2]=u[0]*a[1]-a[0]*u[1]},b.Ut=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]},b.qn=function(u){return b.hp(b.hp(u[0],u[1]),u[2])},b.el=function(u,a,n,o,l,p,d,m){u=b.n(u,a,n);var v=Math.cos(n);p.u=(u+l)*v*Math.cos(o),d.u=(u+l)*v*Math.sin(o),m.u=(u*(1-a)+l)*Math.sin(n)},b.dO=function(u,a,n,o,l,p,d){var m=b.hp(a,n),v=1*Math.sqrt(1-u),_=v/1;if(C.$(m,0))p.u=0,l.u=C.Mb(1.570796326794897,o),d.u=C.R(o)-v;else{p.u=Math.atan2(n,a),n=Math.atan2(1*o,v*m),p=Math.cos(n);var M=Math.sin(n);a=v*u/(1-u),u*=1,n=Math.atan2(o+a*M*M*M,m-u*p*p*p),3.141592653589793<C.R(n)&&(n=C.Mb(3.141592653589793,n)-n),n=Math.atan(_*Math.tan(n)),M=Math.sin(n),p=Math.cos(n),l.u=Math.atan2(o+a*M*M*M,m-u*p*p*p),1.570796326794897<C.R(l.u)&&(l.u=C.Mb(3.141592653589793,l.u)-l.u),n=Math.atan(_*Math.tan(l.u)),M=Math.sin(n),p=Math.cos(n),d.u=(o-v*M)*Math.sin(l.u)+(m-1*p)*Math.cos(l.u)}},b.n=function(u,a,n){return n=Math.sin(n),u/Math.sqrt(1-a*n*n)},b.pt=function(u,a){return Math.atan2(Math.sin(a)*(1-u),Math.cos(a))},b.Sj=function(u,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-u))},b.Tq=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=Math.sqrt(1-u),o=(1-n)/(1+n),l=o*o,p=o*l,d=o*p,m=o*d,v=o*m,_=o*v,M=1.572916666666667*p-3.2578125*m+4.295068359375*_;u=2.142578125*d-6.071484375*v,n=3.129296875*m-11.249837239583334*_;var T=4.775276692708333*v,I=7.958636765252976*_,O=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*o-.84375*p+.525390625*m-.2688395182291667*_-M+n-I+O*(2*(1.3125*l-1.71875*d+1.650146484375*v)-4*u+6*T+O*(4*M-12*n+24*I+O*(8*u-32*T+O*(16*n-80*I+O*(32*T+64*O*I))))))}for(n=1-u,o=u/2,p=(l=C.R(a))*b.av(u)/(1.570796326794897*n),d=9999,v=l,l=0;1e-16<d&&50>l;l++)_=b.w(u,v),m=v-(M=(m=(b.eG(v,u)-o*Math.sin(2*v)/_)/n-p)/(_=1/(_*_*_))),d=C.R(M),v=m;return 0<=a?v:-v},b.iW=function(u,a){return C.vi(a)?u:u*b.av(a)/1.570796326794897},b.ca=function(u){return 0>(u=b.jF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>C.R(u)||C.$(C.R(u),3.141592653589793)?u:u-6.283185307179586},b.jF=function(u,a){return u-Math.floor(u/a)*a},b.Ch=function(u,a){if(.006884661117170036>a){var n=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,o=n*n;return u/(1+a)*(1+.25*n+.015625*o+.00390625*n*o)*1.570796326794897}return u*b.av(a)},b.Xq=function(u,a){var n=C.Mb(1,Math.sin(a));return a=1.570796326794897>=(a=C.R(b.jF(a,3.141592653589793)))?a:3.141592653589793-a,(C.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-u)*Math.tan(a)))*n},b.q=function(u,a,n){if(.006884661117170036>a){var o=(a=(1-(a=Math.sqrt(1-a)))/(1+a))*a,l=a*o,p=a*l,d=a*p,m=a*d,v=a*m,_=-.7291666666666666*l+.2278645833333333*d+.03987630208333334*v,M=.615234375*p-.21533203125*m,T=-.54140625*d+.20302734375*v,I=.48876953125*m,O=-.4488699776785715*v,R=Math.cos(2*n);return u/(1+a)*((1+.25*o+.015625*p+.00390625*m)*n+Math.sin(2*n)*(-1.5*a+.1875*l+.0234375*d+.00732421875*v-_+T-O+R*(2*(.9375*o-.234375*p-.03662109375*m)-4*M+6*I+R*(4*_-12*T+24*O+R*(8*M-32*I+R*(16*T-80*O+R*(32*I+64*R*O)))))))}return u*(b.eG(n,a)-.5*a*Math.sin(2*n)/b.w(a,n))},b.w=function(u,a){return a=Math.sin(a),Math.sqrt(1-u*a*a)},b.av=function(u){return C.EC(u,1,2220446049250313e-31)?1:1>u?b.Zw(0,1-u)-u/3*b.Ww(0,1-u):NaN},b.eG=function(u,a){var n=C.Mb(1,u);u=C.R(u);var o=Math.floor(u/1.570796326794897);if(1<a)a=u==0?0:NaN;else if(C.Dd(o))a=(u=b.sin(u))*b.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*b.Ww(1-u*u,1-a*u*u);else{var l=c.P.truncate(o%2),p=b.av(a);0<l?a=p*(o+1)-(a=(u=Math.sin(1.570796326794897*(o+1)-u))*b.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*b.Ww(1-u*u,1-a*u*u)):a=p*o+(a=(u=Math.sin(u-1.570796326794897*o))*b.Zw(1-u*u,1-a*u*u)-a/3*u*u*u*b.Ww(1-u*u,1-a*u*u))}return a*n},b.sin=function(u){u=b.ca(u);var a=C.Mb(1,u);return u=C.R(u),C.$(u,3.141592653589793)?0:C.$(u,1.570796326794897)?1*a:Math.sin(u)*a},b.Ww=function(u,a){var n,o,l,p,d=u,m=a,v=1;for(a=0,u=1;o=((n=.2*(d+m+3*v))-d)/n,l=(n-m)/n,p=(n-v)/n,!(1e-4>C.R(o)&&1e-4>C.R(l)&&1e-4>C.R(p));)p=Math.sqrt(m),a+=u/((n=Math.sqrt(v))*(v+(p=Math.sqrt(d)*(p+n)+p*n))),u*=.25,d=.25*(d+p),m=.25*(m+p),v=.25*(v+p);return m=(d=o*l)-(v=p*p),3*a+u*(1+(v=d-6*v)*(.10227272727272728*v-.2142857142857143-.1730769230769231*p*(o=v+m+m))+p*(.1666666666666667*o+p*(-.4090909090909091*m+.1153846153846154*p*d)))/(n*Math.sqrt(n))},b.Zw=function(u,a){for(var n,o,l,p,d=1;o=2-((n=(u+a+d)/3)+u)/n,l=2-(n+a)/n,p=2-(n+d)/n,!(1e-4>C.R(o)&&1e-4>C.R(l)&&1e-4>C.R(p));d=.25*(d+n))n=Math.sqrt(a),o=Math.sqrt(d),u=.25*(u+(n=Math.sqrt(u)*(n+o)+n*o)),a=.25*(a+n);return(1+(.04166666666666666*(u=o*l-p*p)-.1-.06818181818181818*(a=o*l*p))*u+.07142857142857142*a)/Math.sqrt(n)},b.Sw=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=u*u,o=u*n,l=u*o,p=u*l,d=u*p,m=u*d,v=-(.02708333333333333*o+.03430059523809524*l+.03149181547619048*p+.02634359154541446*d+.02156896735835538*m),_=.007669890873015873*l+.01299603174603175*p+.0148051353064374*d+.01454454953803912*m,M=-(.002275545634920635*p+.004830845032667949*d+.006558395368616723*m),T=.0006957236677288761*d+.001775193002406544*m,I=-.000217324089394402*m,O=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*u+.2083333333333333*n+.09375*o+.04878472222222222*l+.02916666666666667*p+.01938905423280423*d+.01388255931712963*m)-v+M-I+O*(2*(.1041666666666667*n+.0875*o+.06050347222222222*l+.04151785714285714*p+.02958958540013228*d+.02203667534722222*m)-4*_+6*T+O*(4*v-12*M+24*I+O*(8*_-32*T+O*(16*M-80*I+O*(32*T+64*O*I))))))}return a==0||C.$(C.R(a),1.570796326794897)?n=a:(l=(o=Math.sqrt(u))*Math.sin(a),n=Math.tan(.7853981633974483+a/2)*Math.pow((1-l)/(1+l),o/2),n=2*Math.atan(n)-1.570796326794897),n},b.sO=function(u,a){if(C.vi(u)||a==0||C.$(C.R(a),1.570796326794897))return a;if(.006884661117170036>u){var n=u*(T=u*(M=u*(O=u*u))),o=u*(I=u*n),l=.05833333333333333*M+.07232142857142858*T+.05634300595238095*n+.0355325796406526*I+.020235546186067*o,p=.02653149801587302*T+.04379960317460317*n+.0429211791776896*I+.03255384637546096*o,d=.01294022817460318*n+.02668104344536636*I+.03155651254609588*o,m=.00659454790965208*I+.0163075268674227*o,v=.003463473736911237*o,_=Math.cos(2*a);return a+Math.sin(2*a)*(.5*u+.2083333333333333*O+.08333333333333333*M+.03611111111111111*T+.01875*n+.01195601851851852*I+.008863673941798942*o-l+d-v+_*(2*(.1458333333333333*O+.1208333333333333*M+.07039930555555556*T+.03616071428571429*n+.01839451058201058*I+.01017113095238095*o)-4*p+6*m+_*(4*l-12*d+24*v+_*(8*p-32*m+_*(16*d-80*v+_*(32*m+64*_*v))))))}var M=Math.sqrt(u),T=M/2,I=Math.tan(.7853981633974483+a/2);u=0,l=1;for(var O=a;l!=0;O=o)n=M*Math.sin(O),o=I*Math.pow((1+n)/(1-n),T),o=2*Math.atan(o)-1.570796326794897,u++,(C.$(o,O)||3e4<u)&&(l=0);return O},b}()}(W||(W={})),function(c){var C=function(){function b(u){this.wl=this.Ws=null,this.Kv=!1,this.AA=this.BA=0,this.BH=new c.h,this.RH=new c.h,this.EA=!1,this.xq=new c.l,this.qH=this.uw=0,this.vw=null,this.Bl=!1,this.Fo=null,this.Xz=0,this.Re=u,this.Cs=c.Ab.zv(this.Re,0,!0),this.BH.Sc(),this.RH.Sc(),this.LH=NaN;var a=u.getCode();0<a?(this.Lk=a,c.qf.getCode(u)):this.Lk=c.qf.getCode(u),0>this.Lk&&(this.Lk=0);var n=this.Re.getType();if(this.dH=n==c.Tc.PE_TYPE_PROJCS?2:1,n==c.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw c.i.O("PeProjcs.loadConstants failed");a=n==c.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=c.Tc.PE_TYPE_GEOGCS&&c.qf.getCode(a),this.Fo=u.getUnit(),this.LH=a.getPrimem().getLongitude(),this.qH=u=a.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.AA=u,(n&c.Tc.PE_TYPE_PROJCS)!=0?(a=this.Re,this.BA=1/a.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=c.Eg.generate(a,c.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=c.Ab.kN(this.vw.getCentralMeridian(),this.AA)):(this.EA=this.Bl=!0,this.BA=0,n=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.xK(),this.fY(),this.wK(),this.dY(),this.eY())}return b.prototype.cs=function(){return this.Lk},b.prototype.lk=function(){return this.vw},b.Ky=function(u,a){return u==a||u!=null&&a!=null&&u.Lk==0&&a.Lk==0&&u.Cs===a.Cs},b.prototype.Xc=function(){return this.Bl},b.prototype.ih=function(u){u.L(this.to)},b.prototype.rv=function(){return this.to.v},b.prototype.qv=function(){return this.to.C},b.prototype.AR=function(u){u.L(this.ww)},b.prototype.dY=function(){var u=this.Re.getType();if(u==c.Tc.PE_TYPE_PROJCS){u=this.Re;var a=this.lk().getCentralMeridian(),n=u.getGeogcs();if(n==null)throw c.i.ga("internal error");a=[[a+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],c.gj.geogToProj(u,1,a),a=a[0][0],n=u.getParameters()[c.Tc.PE_PARM_X0].getValue();var o=this.ol();u=new c.l,o.A(u),a=(o=Math.abs(a-n))+n,n=-1*o+n,o=u.H,u=u.G;var l=new c.l;l.L(n,u,a,o),this.to==null&&(this.to=l)}else{if(u!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new c.l).L(-n,-n/2,n,n/2),this.to==null&&(this.to=u)}},b.prototype.eY=function(){var u=this.Re.getType();if(u==c.Tc.PE_TYPE_PROJCS){var a=this.Re;if(u=this.lk().getCentralMeridian(),(a=a.getGeogcs())==null)throw c.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),o=new c.l;n.A(o),(n=new c.l).L(u-a,o.G,u+a,o.H),this.ww==null&&(this.ww=n)}else{if(u!=c.Tc.PE_TYPE_GEOGCS)throw c.i.ga("internal error");a=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new c.l).L(-a,-a/2,a,a/2),this.ww==null&&(this.ww=u)}},b.prototype.bf=function(){return this.AA},b.prototype.rm=function(){return this.BA},b.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u!=null?u:(this.wx(),this.wl)},b.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.SG)},b.prototype.wx=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var u=this.Re,a=u.getGeogcs(),n=u.horizonGcsGenerate();if(n!=null){var o=n[0].getNump(),l=n[0].getKind();u=0<n[0].getInclusive();var p=this.bf(),d=90*p,m=360*p,v=370*p,_=180*p*c.Tc.PE_HORIZON_DELTA/Math.PI,M=new c.l,T=null;if(1<o){for(var I=1;I<o;I++)if(n[I].getKind()==c.Tc.PE_HORIZON_LINE){T==null&&(T=new c.Ua);var O=n[I].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(l==c.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),M.L(n[0][0],n[0][1]),M.$b(n[1][0],n[1][1]),Math.abs(M.H-d)<1e-7*_&&(M.H=d),Math.abs(M.G+d)<1e-7*_&&(M.G=-d),M.S()>v&&(n=-400*p,M.L(n,M.G,n+5*m,M.H)),n=new c.Hh(M),this.wl==null&&(this.wl=n,this.Kv=u);else{if(v=new c.Ea,m=this.lk().isGcsHorizonMultiOverlap(),M=c.iu.WE(a,c.ju.Integer64),m){for(v=new c.aL,_=c.Ih.local().W(v,M,null),I=0;I<o;I++)if(n[I].getKind()==c.Tc.PE_HORIZON_POLY){for(a=n[I].getSize(),p=n[I].getCoord(),l=[],d=0;d<a;d++)l[d]=c.h.construct(p[d][0],p[d][1]);n[I].getInclusive(),m&&((p=new c.Ea).$k(l,a-1),v.RX(p),_.qe())}v=_.next()}else for(I=0;I<o;I++)if(n[I].getKind()==c.Tc.PE_HORIZON_POLY){for(a=n[I].getSize(),p=n[I].getCoord(),m=[],d=0;d<a;d++)m[d]=c.h.construct(p[d][0],p[d][1]);n[I].getInclusive(),v.$k(m,a-1)}u?c.Xk.local().xn(v,M,1):c.lp.local().xn(v,M,1),c.fj.local().xn(v,M,1),this.wl==null&&(this.wl=v,this.Kv=u,this.SG=T)}}}},b.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},b.prototype.xK=function(){if(this.dH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var a=u[0].getKind();u[0].getInclusive();var n=u[0].getNump(),o=!1;if(a==c.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(n=new c.l).L(u[0][0],u[0][1]),n.$b(u[1][0],u[1][1]),u=new c.Hh(n);else{for(a=-1,o=0;o<n;o++)u[o].getKind()==c.Tc.PE_HORIZON_POLY&&(a=o);for(o=u[a].getSize()-1,u=u[a].getCoord(),n=[],a=0;a<o;a++)n[a]=c.h.construct(u[a][0],u[a][1]);u=a=new c.Ea,a.$k(n,o),o=!0}this.lk().isDensificationNeeded()&&(n=1e5*this.rm(),u=c.Zl.local().W(u,n,null)),o&&(o=new c.Hh,u.dn(o),u.He(),u.Rb(),u.jR(),c.Xk.local().xn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},b.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u!=null?u:(this.xK(),this.Ws)},b.prototype.fY=function(){if(this.Re.getType()==c.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],c.gj.geogToProj(this.Re,2,u);var a=this.lk(),n=a.getNorthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.EA||(n&&this.BH.na(u[0][0],u[0][1]),a&&this.RH.na(u[1][0],u[1][1]))}this.EA=!0},b.prototype.wK=function(){if(this.dH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=c.Eg.generate(this.Re,c.Eg.PE_PCSINFO_OPTION_DOMAIN),u=c.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},b.prototype.bR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.wK(),u.L(this.xq)},b.prototype.Wp=function(){return this.LH},b.prototype.Bi=function(){return this.Xz},b.prototype.Id=function(){return this.Fo},b.prototype.Zr=function(){return this.qH},b}();c.IC=C}(W||(W={})),function(c){var C=function(){function b(u){this.CT=u,this.Cs=c.Ab.zv(u,0,!0);var a=u.getCode();this.us=0<a?a:c.qf.getCode(u),0>this.us&&(this.us=0),this.Fo=a=this.CT.getUnit(),this.CH=1/a.getUnitFactor(),c.qf.getCode(u)}return b.Ky=function(u,a){return u==a||u!=null&&a!=null&&u.us==0&&a.us==0&&u.Cs===a.Cs},b.prototype.cs=function(){return this.us},b}();c.JL=C}(W||(W={})),function(c){c.$g=function(){function C(){}return C.ub=function(b,u,a,n,o,l,p,d){if(l!=null||p!=null||d!=null){n=c.F.ca(n),u=c.F.ca(u),a=c.F.ca(a),o=c.F.ca(o),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,u=c.F.ca(u+3.141592653589793)),1.570796326794897<c.s.R(o)&&(o=c.s.Mb(3.141592653589793,o)-o,n=c.F.ca(n+3.141592653589793));var m=c.F.ca(n-u);if(c.s.$(a,o)&&(c.s.$(u,n)||c.s.$(c.s.R(a),1.570796326794897)))l!=null&&(l.u=0),p!=null&&(p.u=0),d!=null&&(d.u=0);else{if(c.s.$(a,-o)){if(c.s.$(c.s.R(a),1.570796326794897))return l!=null&&(l.u=3.141592653589793*b),p!=null&&(p.u=0<a?c.F.ca(3.141592653589793-c.F.ca(n)):c.F.ca(n)),void(d!=null&&(d.u=0<a?c.F.ca(n):c.F.ca(3.141592653589793-c.F.ca(n))));if(c.s.$(c.s.R(m),3.141592653589793))return l!=null&&(l.u=3.141592653589793*b),p!=null&&(p.u=0),void(d!=null&&(d.u=0))}var v=c.s.R(a)==1.570796326794897?0:Math.cos(a),_=Math.sin(a),M=c.s.R(o)==1.570796326794897?0:Math.cos(o),T=Math.sin(o),I=c.s.R(m)==1.570796326794897?0:Math.cos(m),O=c.s.R(m)==3.141592653589793?0:Math.sin(m);if(l!=null){var R=Math.sin((o-a)/2);m=Math.sin(m/2),l.u=2*Math.asin(Math.sqrt(R*R+v*M*m*m))*b}p!=null&&(p.u=c.s.$(c.s.R(a),1.570796326794897)?0>a?n:c.F.ca(3.141592653589793-n):Math.atan2(M*O,v*T-_*M*I)),d!=null&&(c.s.$(c.s.R(o),1.570796326794897)?d.u=0>o?u:c.F.ca(3.141592653589793-u):(d.u=Math.atan2(v*O,T*v*I-M*_),d.u=c.F.ca(d.u+3.141592653589793)))}}},C.sf=function(b,u,a,n,o,l,p){if(l!=null||p!=null){u=c.F.ca(u),a=c.F.ca(a),1.570796326794897<c.s.R(a)&&(a=c.s.Mb(3.141592653589793,a)-a,u=c.F.ca(u+3.141592653589793)),c.s.$(c.s.R(a),1.570796326794897)&&(u=0),o=c.F.ca(o);var d=c.s.$(c.s.R(o),1.570796326794897)?0:Math.cos(o),m=c.s.$(c.s.R(o),3.141592653589793)?0:Math.sin(o),v=c.s.$(c.s.R(a),1.570796326794897)?0:Math.cos(a),_=Math.sin(a);b=n/b,n=c.s.$(c.s.R(b),1.570796326794897)?0:Math.cos(b);var M=c.s.$(c.s.R(b),3.141592653589793)?0:Math.sin(b),T=Math.asin(_*n+v*M*d);p!=null&&(p.u=T),l!=null&&(l.u=c.s.$(c.s.R(T),1.570796326794897)?c.s.$(a,-T)?0>T?o:c.F.ca(3.141592653589793-o):u:c.s.$(c.s.R(a),1.570796326794897)&&c.s.$(b,3.141592653589793)?0>a?o:c.F.ca(3.141592653589793-o):c.F.ca(u+Math.atan2(M*m,v*n-_*M*d)))}},C}()}(W||(W={})),function(c){c.Yk=function(){function C(){}return C.ub=function(b,u,a,n,o,l,p,d,m){var v=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],I=[0,0,0],O=new c.ha(0),R=new c.ha(0),L=new c.ha(0),G=new c.ha(0),q=new c.ha(0);if(p!=null||d!=null||m!=null)if(c.s.vi(u))c.$g.ub(b,a,n,o,l,p,d,m);else{o=c.F.ca(o),a=c.F.ca(a);var D=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.$(a,o)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),m!=null&&(m.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(D),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0),m!=null&&(m.u=0))}else(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897))&&(c.s.$(c.s.R(n),1.570796326794897)?a=o:o=a);var H=0;if(0>D){H=1;var ee=a;a=o,o=ee,ee=n,n=l,l=ee}D=c.F.pt(u,n);var te=c.F.pt(u,l);d==null&&m==null||(c.$g.ub(b,a,D,o,te,null,v,_),v=Math.atan2(Math.sin(v.u)*Math.cos(n-D),Math.cos(v.u)),_=Math.atan2(Math.sin(_.u)*Math.cos(l-te),Math.cos(_.u)),H!=0&&(ee=v,v=_,_=ee),d!=null&&(d.u=v),m!=null&&(m.u=_)),p!=null&&(c.F.el(1,u,n,a,0,L,G,q),M[0]=L.u,M[1]=G.u,M[2]=q.u,c.F.el(1,u,l,o,0,L,G,q),T[0]=L.u,T[1]=G.u,T[2]=q.u,I[0]=M[1]*T[2]-T[1]*M[2],I[1]=-(M[0]*T[2]-T[0]*M[2]),I[2]=M[0]*T[1]-T[0]*M[1],u=1-c.F.w(u,c.F.Xq(u,c.F.Sj(u,Math.acos(I[2]/Math.sqrt(I[0]*I[0]+I[1]*I[1]+I[2]*I[2]))))),u*=2-u,d=Math.atan2(-I[1],-I[0]),I=c.F.ca(d-1.570796326794897),d=c.F.ca(d+1.570796326794897),I=c.s.R(c.F.ca(a-I))<=c.s.R(c.F.ca(a-d))?I:d,c.$g.ub(1,I,0,a,D,O,null,null),c.$g.ub(1,I,0,o,te,R,null,null),3.141592653589793<O.u+R.u&&(I=c.F.ca(I+3.141592653589793),c.$g.ub(1,I,0,a,D,O,null,null),c.$g.ub(1,I,0,o,te,R,null,null)),O.u*=c.s.Mb(1,n),R.u*=c.s.Mb(1,l),O.u=c.F.Sj(u,O.u),R.u=c.F.Sj(u,R.u),a=c.F.q(b,u,O.u),b=c.F.q(b,u,R.u),p.u=c.s.R(b-a))}}},C.sf=function(b,u,a,n,o,l,p,d){var m=0,v=new c.ha(0),_=new c.ha(0),M=[0,0,0],T=[0,0,0],I=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||d!=null)if(c.s.vi(u))c.$g.sf(b,a,n,o,l,p,d);else if(c.s.Dd(o))p!=null&&(p.u=a),d!=null&&(d.u=n);else if(l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),a=c.F.ca(a),n=c.F.ca(n),1.570796326794897<c.s.R(n)&&(a=c.F.ca(a+3.141592653589793),n=c.s.Mb(3.141592653589793,n)-n),c.s.$(c.s.R(n),1.570796326794897)&&(a=0),c.s.Dd(n)){var L=c.s.R(1.570796326794897-c.s.R(l));L=c.F.Sj(u,L),L=1-c.F.w(u,c.F.Xq(u,L)),L*=2-L,b=o/c.F.Ch(b,L)*1.570796326794897,b=c.F.Tq(L,b),b=c.F.pt(L,b),c.$g.sf(1,a,n,b,l,p,v),d!=null&&(m=v.u),d!=null&&(d.u=c.F.Sj(u,m))}else if(c.s.$(c.s.R(n),1.570796326794897))v=2*(m=c.F.Ch(b,u)),l=0<(b=c.s.Mb(1.570796326794897,n))?c.F.ca(3.141592653589793-l):l,n=m-o,c.s.R(n)<=m?p!=null&&(p.u=l):(n=Math.floor(o/v),c.P.truncate(n%2)==0?(p!=null&&(p.u=l),o-=n*v):(p!=null&&(p.u=c.F.ca(l+3.141592653589793)),o=(n+1)*v-o),n=m-o),d!=null&&(d.u=c.F.Tq(u,n/m*b));else{L=c.F.pt(u,n),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(n-L));var G=c.P.truncate(c.s.Mb(1,L))*(1.570796326794897>=c.s.R(l)?1:-1);l=c.F.ca(a+Math.atan(Math.tan(l)*-Math.sin(L))),c.$g.ub(b,l,0,a,L,null,_,null),L=c.s.R(1.570796326794897-c.s.R(_.u)),L=c.F.Sj(u,L),L=1-c.F.w(u,c.F.Xq(u,L)),L*=2-L,c.F.el(1,u,0,l,0,I,O,R),M[0]=I.u,M[1]=O.u,M[2]=R.u,c.F.el(1,u,n,a,0,I,O,R),T[0]=I.u,T[1]=O.u,T[2]=R.u,n=Math.acos((M[0]*T[0]+M[1]*T[1]+M[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),n=c.F.Sj(L,n),o=0<(n=c.F.q(b,L,n)+o*G)?_.u:c.F.ca(_.u+3.141592653589793),b=c.s.R(n)/c.F.Ch(b,L)*1.570796326794897,b=c.F.Tq(L,b),b=c.F.pt(L,b),c.$g.sf(1,l,0,b,o,p,v),d!=null&&(m=v.u),d!=null&&(d.u=c.F.Sj(u,m))}},C}()}(W||(W={})),function(c){c.eu=function(){function C(){}return C.ub=function(b,u,a,n,o,l,p,d,m){var v=0,_=0,M=0;if(p!=null||d!=null||m!=null)if(c.s.vi(u))c.$g.ub(b,a,n,o,l,p,d,m);else{var T=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.Dd(T)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),m!=null&&(m.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(T),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897)||c.s.Dd(T)||c.s.$(c.s.R(T),3.141592653589793))return void c.Yk.ub(b,u,a,n,o,l,p,d,m);var I=1-Math.sqrt(1-u),O=u/(1-u),R=b*(1-I);b=c.F.Xq(u,n);var L=c.F.Xq(u,l);u=c.s.R(b)==1.570796326794897?0:Math.cos(b);var G=Math.sin(b),q=c.s.R(L)==1.570796326794897?0:Math.cos(L),D=Math.sin(L),H=T,ee=Math.cos(H),te=Math.sin(H),Z=1,ce=0;do{var ye=H,Me=Math.sqrt(Math.pow(q*te,2)+Math.pow(u*D-G*q*ee,2)),xe=G*D+u*q*ee,be=Math.atan2(Me,xe);if(Me==0){Z=0;break}var Ce=u*q*te/Me;if(v=Math.cos(Math.asin(Ce)),_=xe-2*G*D/(v*=v),1<c.s.R(_)&&(_=c.s.Mb(1,_)),H=T+(1-(H=I/16*v*(4+I*(4-3*v))))*I*Ce*(be+H*Me*(_+H*xe*(2*(M=_*_)-1))),ee=Math.cos(H),te=Math.sin(H),ce++,3.141592653589793<c.s.R(H)&&30<ce){Z=0;break}}while(5e3>=ce&&!c.s.$(ye,H));if(Z!=0)I=(O*=v)*(256+O*(O*(74-47*O)-128))/1024,p!=null&&(p.u=R*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(be-I*Me*(_+I/4*(xe*(2*M-1)-I/6*_*(4*Me*Me-3)*(4*M-3))))),d!=null&&(d.u=c.s.$(c.s.R(n),1.570796326794897)?0>n?o:c.F.ca(3.141592653589793-o):Math.atan2(q*te,u*D-G*q*ee)),m!=null&&(c.s.$(c.s.R(l),1.570796326794897)?m.u=0>l?a:c.F.ca(3.141592653589793-a):(m.u=Math.atan2(u*te,u*D*ee-G*q),m.u=c.F.ca(m.u+3.141592653589793)));else{H=c.s.Mb(3.141592653589793,T),xe=G*D-u*q,be=Math.acos(xe),Me=Math.sin(be),v=1,ce=Ce=0;do M=Ce,ee=1-.25*(Ce=I*(v*=v)*(1+I+I*I))+.1875*(_=I*I*(ee=v*v)*(1+2.25*I))-.1953125*(Z=I*I*I*ee*v),Ce=.25*Ce-.25*_+.29296875*Z,te=.03125*_-.05859375*Z,Z*=.00651041666666667,_=xe-2*G*D/v,1<c.s.R(_)&&(_=c.s.Mb(1,_)),v=Math.acos(_),xe=Math.cos(2*v),ye=Math.cos(3*v),te=(Ce=c.s.$(n,-l)?c.F.ca(3.141592653589793-T)/(3.141592653589793*I*ee):c.F.ca(H-T)/(I*(ee*be+Ce*Me*_+te*Math.sin(2*be)*xe+Z*Math.sin(3*be)*ye)))*Me/(u*q),H=1.570796326794897<c.s.R(T)?c.s.Mb(3.141592653589793,te)-Math.asin(te):Math.asin(te),ee=Math.cos(H),Me=Math.sqrt(Math.pow(q*te,2)+Math.pow(u*D-G*q*ee,2)),be=3.141592653589793-Math.asin(c.s.R(Me)),xe=Math.cos(be),v=Math.cos(Math.asin(Ce)),ce++;while(70>=ce&&!c.s.$(M,Ce));p!=null&&(ee=1+(O*=v*=v)*(4096+O*(O*(320-175*O)-768))/16384,c.s.$(n,-l)?p.u=3.141592653589793*R*ee:(_=xe-2*G*D/v,v=Math.acos(_),xe=Math.cos(2*v),ye=Math.cos(3*v),p.u=R*(ee*be+O*(O*(128+O*(35*O-60))-512)/2048*Me*_+O*(5*O-4)/6144*O*O*Math.sin(2*be)*xe+Z*Math.sin(3*be)*ye+-762939453125e-16*O*O*O*O*Math.sin(4*be)*Math.cos(4*v)))),d!=null&&(c.s.Dd(n)&&c.s.Dd(l)?(v=Math.sqrt(1-Ce*Ce),d.u=Math.acos(v),0>T&&(d.u*=-1)):c.s.$(c.s.R(n),1.570796326794897)?d.u=0>n?o:c.F.ca(3.141592653589793-o):(p=Ce/u,R=Math.sqrt(1-p*p),0>u*D-G*q*Math.cos(H)&&(R*=-1),d.u=Math.atan2(p,R),c.s.$(n,-l)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-I*Math.cos(n))&&(0<n&&1.570796326794897>c.s.R(d.u)||0>n&&1.570796326794897<c.s.R(d.u))&&(d.u=c.s.Mb(3.141592653589793,d.u)-d.u))),m!=null&&(c.s.Dd(n)&&c.s.Dd(l)?(v=Math.sqrt(1-Ce*Ce),m.u=Math.acos(v),0<=T&&(m.u*=-1)):c.s.$(c.s.R(l),1.570796326794897)?m.u=0>l?a:c.F.ca(3.141592653589793-a):(T=Ce/q,p=Math.sqrt(1-T*T),R=Math.sin(H/2),0>Math.sin(L-b)-2*u*D*R*R&&(p*=-1),m.u=Math.atan2(T,p),m.u=c.F.ca(m.u+3.141592653589793),c.s.$(n,-l)&&!c.s.Dd(n)&&!c.s.$(c.s.R(n),1.570796326794897)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-I*Math.cos(n))&&(d!=null?R=d.u:(p=Ce/u,R=Math.sqrt(1-p*p),0>u*D-G*q*Math.cos(H)&&(R*=-1),R=Math.atan2(p,R),c.s.$(n,-l)&&c.s.R(c.F.ca(a-o))>3.141592653589793*(1-I*Math.cos(n))&&(0<n&&1.570796326794897>c.s.R(R)||0>n&&1.570796326794897<c.s.R(R))&&(R=c.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=c.s.R(R)&&1.570796326794897<c.s.R(m.u)||1.570796326794897<=c.s.R(R)&&1.570796326794897>c.s.R(m.u))&&(m.u=-1*c.F.ca(m.u+3.141592653589793))))}}}},C.sf=function(b,u,a,n,o,l,p,d){if(p!=null||d!=null)if(c.s.vi(u))c.$g.sf(b,a,n,o,l,p,d);else if(l=c.F.ca(l),c.s.$(c.s.R(n),1.570796326794897)||c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))c.Yk.sf(b,u,a,n,o,l,p,d);else{var m=c.s.R(l)==1.570796326794897?0:Math.cos(l),v=c.s.R(l)==3.141592653589793?0:Math.sin(l);c.s.$(c.s.R(n),1.570796326794897)&&(a=0),l=1-Math.sqrt(1-u);var _=c.F.Xq(u,n);n=c.s.R(_)==1.570796326794897?0:Math.cos(_);var M=Math.sin(_);_=Math.atan2(Math.tan(_),m);var T=n*v,I=T*T,O=1-I,R=u/(1-u)*O,L=(u=R*(256+R*(R*(74-47*R)-128))/1024)/4,G=u/6,q=o/(b*(1-l)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),D=q;do{var H=D;o=c.s.R(D)==1.570796326794897?0:Math.cos(D);var ee=(R=c.s.R(D)==3.141592653589793?0:Math.sin(D))*R;D=u*R*((b=Math.cos(2*_+D))+L*(o*(2*(D=b*b)-1)-G*b*(4*ee-3)*(4*D-3)))+q}while(!c.s.$(H,D));o=c.s.R(D)==1.570796326794897?0:Math.cos(D),R=c.s.R(D)==3.141592653589793?0:Math.sin(D),p!=null&&(v=Math.atan2(R*v,n*o-M*R*m),O=l/16*O*(4+l*(4-3*O)),b=Math.cos(2*_+D),p.u=c.F.ca(a+(v-(1-O)*l*T*(D+O*R*(b+O*o*(2*b*b-1)))))),d!=null&&(O=M*R-n*o*m,O=(1-l)*Math.sqrt(I+O*O),d.u=Math.atan2(M*o+n*R*m,O))}},C}()}(W||(W={})),function(c){c.JC=function(){function C(){}return C.ub=function(b,u,a,n,o,l,p,d,m){var v=c.F.ca(o-a),_=c.s.$(c.s.R(n),1.570796326794897),M=c.s.$(c.s.R(l),1.570796326794897);if(c.s.$(n,l)&&(c.s.Dd(v)||_))p!=null&&(p.u=0),d!=null&&(d.u=0),m!=null&&(m.u=0);else{if(c.s.vi(u)){var T=Math.sin(n),I=Math.sin(l);T=Math.sqrt((1+T)/(1-T)),I=Math.sqrt((1+I)/(1-I)),T=Math.log(I)-Math.log(T),T=Math.atan2(v,T),p!=null&&(p.u=c.s.$(n,l)?c.s.R(b*Math.cos(n)*v):c.s.R((b*l-b*n)/Math.cos(T)))}else I=c.F.Sw(u,l),T=Math.sin(c.F.Sw(u,n)),I=Math.sin(I),T=Math.sqrt((1+T)/(1-T)),I=Math.sqrt((1+I)/(1-I)),T=Math.log(I)-Math.log(T),T=Math.atan2(v,T),p!=null&&(c.s.$(n,l)?p.u=c.s.R(b*v*Math.cos(n)/c.F.w(u,n)):(v=c.F.q(b,u,n),b=c.F.q(b,u,l),p.u=c.s.R((b-v)/Math.cos(T))));d==null&&m==null||(p=c.F.ca(T+3.141592653589793),_&&M||!_&&!M||(_?T=0>n?o:c.F.ca(3.141592653589793-o):M&&(p=0>l?a:c.F.ca(3.141592653589793-a))),d!=null&&(d.u=T),m!=null&&(m.u=p))}},C.sf=function(b,u,a,n,o,l,p,d){l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),c.s.vi(u)?c.s.$(c.s.R(n),1.570796326794897)?(a=0>n?l:c.F.ca(3.141592653589793-l),3.141592653589793>=(l=o/b%6.283185307179586)?b=n-c.s.Mb(l,n):(a=c.F.ca(a+3.141592653589793),b=-n+c.s.Mb(l-3.141592653589793,n))):c.s.$(c.s.R(l),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,l)/(b*Math.cos(n))),b=n):(b=n+o*Math.cos(l)/b,1.570796326794897<c.s.R(b)&&(b=1.570796326794897),c.s.$(c.s.R(b),1.570796326794897)&&(c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))||(1.570796316258184<c.s.R(b)&&(b=c.s.Mb(1.570796316258184,b)),u=Math.sin(n),n=Math.sin(b),u=Math.sqrt((1+u)/(1-u)),n=Math.sqrt((1+n)/(1-n)),u=Math.log(n)-Math.log(u),a=c.F.ca(a+Math.tan(l)*u))):c.s.$(c.s.R(n),1.570796326794897)?(a=0>n?l:c.F.ca(3.141592653589793-l),l=o/c.F.iW(b,u),3.141592653589793>=(l%=6.283185307179586)?b=n-c.s.Mb(l,n):(a=c.F.ca(a+3.141592653589793),b=-n+c.s.Mb(l-3.141592653589793,n)),b=c.F.Tq(u,b)):c.s.$(c.s.R(l),1.570796326794897)?(a=c.F.ca(a+c.s.Mb(o,l)*c.F.w(u,n)/(b*Math.cos(n))),b=n):(b=1.570796326794897*(o*Math.cos(l)+c.F.q(b,u,n))/c.F.Ch(b,u),1.570796326794897<c.s.R(b)&&(b=c.s.Mb(1.570796326794897,b)),b=c.F.Tq(u,b),c.s.$(c.s.R(b),1.570796326794897)&&(c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))||(o=c.F.Sw(u,n),n=c.F.Sw(u,b),1.570796316258184<c.s.R(n)&&(n=c.s.Mb(1.570796316258184,b),b=c.F.sO(u,n)),u=Math.sin(o),n=Math.sin(n),u=Math.sqrt((1+u)/(1-u)),n=Math.sqrt((1+n)/(1-n)),u=Math.log(n)-Math.log(u),a=c.F.ca(a+Math.tan(l)*u))),p!=null&&(p.u=a),d!=null&&(d.u=b)},C}()}(W||(W={})),function(c){c.kb=function(){function C(){}return C.Sy=function(b,u,a,n,o,l,p){c.eu.ub(b,u,a,n,o,l,null,p,null)},C.Ai=function(b,u,a,n,o,l,p,d){c.eu.sf(b,u,a,n,o,l,p,d)},C.xd=function(b,u,a,n,o,l,p,d,m,v){switch(v){case 2:c.Yk.ub(b,u,a,n,o,l,p,d,m);break;case 3:c.KC.ub(b,u,a,n,o,l,p,d,m);break;case 1:c.JC.ub(b,u,a,n,o,l,p,d,m);break;default:c.eu.ub(b,u,a,n,o,l,p,d,m)}},C.qj=function(b,u,a,n,o,l,p,d,m){switch(m){case 2:c.Yk.sf(b,u,a,n,o,l,p,d);break;case 3:c.KC.sf(b,u,a,n,o,l,p,d);break;case 1:c.JC.sf(b,u,a,n,o,l,p,d);break;default:c.eu.sf(b,u,a,n,o,l,p,d)}},C}()}(W||(W={})),function(c){var C=function(){function u(){this.y=this.x=null}return u.construct=function(a){var n=new u;return n.x=new c.Xb,n.x.set(a.x),n.y=new c.Xb,n.y.set(a.y),n},u.PE=function(a,n){var o=new u;return o.x=new c.Xb,o.x.set(a),o.y=new c.Xb,o.y.set(n),o},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()},u.prototype.value=function(){return c.h.construct(this.x.value(),this.y.value())},u}();c.nY=C;var b=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(a){var n=new u;return n.x=new c.Xb,n.x.set(a.x),n.y=new c.Xb,n.y.set(a.y),n.z=new c.Xb,n.z.set(a.z),n},u.PE=function(a,n,o){var l=new u;return l.x=new c.Xb,l.x.set(a),l.y=new c.Xb,l.y.set(n),l.z=new c.Xb,l.z.set(o),l},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},u.prototype.value=function(){return new c.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(a){var n=new c.Xb,o=new c.Xb,l=new c.Xb;return n.Ml(this.x,a.x),o.Ml(this.y,a.y),l.Ml(this.z,a.z),(a=new c.Xb).YM(n,o),a.add(l),a},u.prototype.XE=function(a){var n=new u;n.x.Ml(this.y,a.z),n.y.Ml(this.z,a.x),n.z.Ml(this.x,a.y);var o=new c.Xb,l=new c.Xb,p=new c.Xb;return o.Ml(this.z,a.y),l.Ml(this.x,a.z),p.Ml(this.y,a.x),n.x.sub(o),n.y.sub(l),n.z.sub(p),n},u}();c.oY=b,c.Nx=function(){function u(){}return u.yP=function(a,n,o){var l=n.x;n=n.y,u.el(1,a,Math.cos(l),Math.sin(l),Math.cos(n),Math.sin(n),o)},u.xP=function(a,n){var o=new c.Od;return u.yP(a,n,o),o},u.el=function(a,n,o,l,p,d,m){a/=Math.sqrt(1-n*d*d),m.L(a*p*o,a*p*l,a*(1-n)*d)},u.$u=function(a,n){var o=new c.Xb,l=new c.Xb,p=new c.Xb,d=new c.Xb;o.cos(n.x),l.sin(n.x),p.cos(n.y),d.sin(n.y);var m=new c.Xb;return m.set(d),m.Ag(d),m.Oo(a),m.Oo(-1),m.eN(),m.sqrt(),(n=new c.Xb).set(1),n.lm(m),(m=new c.Xb).set(n),m.Ag(p),m.Ag(o),(o=new c.Xb).set(n),o.Ag(p),o.Ag(l),(l=new c.Xb).set(n),l.Oo(1-a),l.Ag(d),b.PE(m,o,l)},u.KS=function(a,n,o,l){if(Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x)return NaN;if(l=u.XA(l,Math.min(n.x,o.x),Math.max(n.x,o.x)),!new c.Oc(n.x,o.x).contains(l))return NaN;var p=C.construct(n);if(o=C.construct(o),p=u.$u(a,p),o=u.$u(a,o),(o=p.XE(o)).z.qg())return n.y;var d=new c.Xb;d.set(o.x),d.lm(o.z),d.Oo(-1);var m=new c.Xb;m.set(o.y),m.lm(o.z),m.Oo(-1);var v=new c.Xb;return v.set(m),v.Ag(m),(p=new c.Xb).set(d),p.Ag(d),p.add(v),p.sqrt(),p.qg()||d.qg()&&m.qg()?n.y:(n=Math.atan2(m.value(),d.value()),n=Math.atan2(p.value()*Math.cos(n-l),1-a),l=u.xP(a,c.h.construct(l,n)),a=new c.Od(l.x,l.y,-l.z),l=o.value().Sh(l),a=o.value().Sh(a),Math.abs(a)<Math.abs(l)&&(n=-n),n)},u.Jz=function(a,n,o,l,p){if(p[0]=NaN,p[1]=NaN,Math.abs(n.x-o.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(o.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(o.y)==.5*Math.PI)&&n.x!=o.x||Math.abs(l)>=.5*Math.PI||0<n.y&&0<o.y&&n.y>l&&o.y>l||0>n.y&&0>o.y&&n.y<l&&o.y<l)return 0;var d=C.construct(n),m=C.construct(o);d=u.$u(a,d),m=u.$u(a,m);var v=d.XE(m);if(v.z.qg())return new c.Oc(n.y,o.y).contains(l)?(p[0]=n.x,1):0;(m=new c.Xb).set(v.x),m.lm(v.z),m.Oo(-1),(d=new c.Xb).set(v.y),d.lm(v.z),d.Oo(-1),(v=new c.Xb).set(d),v.Ag(d);var _=new c.Xb;return _.set(m),_.Ag(m),_.add(v),_.sqrt(),_.qg()||m.qg()&&d.qg()?l==0?(p[0]=n.x,p[1]=o.x,2):0:(a=(1-a)*Math.tan(l)/_.value(),1<Math.abs(a)?0:(a=Math.acos(a),v=Math.atan2(d.value(),m.value()),m=Math.min(n.x,o.x),d=Math.max(n.x,o.x),o=u.XA(v-a,m,d),a=l!=0?u.XA(v+a,m,d):o,l=0,m<=o&&o<=d&&(p[l]=o,l++),a!=o&&m<=a&&a<=d&&(p[l]=a,++l==2&&Math.abs(p[0]-n.x)>Math.abs(p[1]-n.x)&&(n=p[0],p[0]=p[1],p[1]=n)),l))},u.XA=function(a,n,o){return a>o?a-=2*(n=Math.ceil((a-o)/(2*Math.PI)))*Math.PI:a<n&&(a+=2*(n=Math.ceil((n-a)/(2*Math.PI)))*Math.PI),a},u}()}(W||(W={})),function(c){c.RK=function(){function C(){}return C.SX=function(b,u){var a=8,n=[0,0,0,0],o=new c.h;o.N(u),o.scale(c.cb.tc(b).Id().Fc()==9102?1:c.cb.tc(b).Id().ci/3.141592653589793*180),-180>o.x?(o.x-=o.x%360,-180>o.x&&(o.x+=360)):180<o.x&&(o.x-=o.x%360,180<o.x&&(o.x-=360)),90<o.y&&(o.y=90),-90>o.y&&(o.y=-90);for(var l=-180,p=180,d=(b=5*a)-1,m=(u=(b+31)/32)-1;0<=m;m--)for(var v=d-32*m,_=Math.min(32,b-32*m),M=1;M<_;M+=2){var T=.5*(p+l);o.x>=T?(n[m]|=1<<v,l=T):p=T,v-=2,d-=2}for(l=-90,p=90,d=b-2,m=u-1;0<=m;m--)for(v=d-32*m,_=Math.min(32,b-32*m),M=0;M<_;M+=2)T=.5*(p+l),o.y>=T?(n[m]|=1<<v,l=T):p=T,v-=2,d-=2;return C.UP(n,a,a)},C.UP=function(b,u,a){for(var n=[],o=0;o<u;o++)n[o]="";for(var l=o=0,p=0;p<u;p++){var d=b[o]>>l&31;if(31<(l+=5)){var m=37-l;d&=(1<<m)-1,l-=32,d|=(b[++o]&(1<<l)-1)<<m}n[u-1-p]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[d]}if(a>u)for(p=0;p<a-u;p++)n.push("0");else a<u&&(n.length=a);return n.join("")},C}()}(W||(W={})),function(c){var C={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},b={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};c.yr=function(){function u(){}return u.Ny=function(a){u.zp===!1&&u.zt();var n=u.zQ(a);if(n==-1){var o=u.Ax(a);o!=a&&(n=u.Ny(o))}return n==-1&&(o=u.zK(a))!=a&&(n=u.Ny(o)),n},u.zQ=function(a){return u.Hw[a]!==void 0?u.Hw[a]:-1},u.wQ=function(a){u.zp===!1&&u.zt();var n=u.hF(a);if(n==1e38){var o=u.Ax(a);if(o!=a&&(n=u.hF(o)),n==1e38)return 1e-10}return n},u.RS=function(a){if(u.Ks[a]!==void 0)return!0;var n=u.Ax(a);return n!=a&&u.Ks[n]!==void 0},u.TS=function(a){if(u.yo[a]!==void 0)return!0;var n=u.Ax(a);return n!=a&&u.yo[n]!==void 0},u.hF=function(a){return u.zp===!1&&u.zt(),u.Ks[a]!==void 0?u.Ks[a]:u.yo[a]!==void 0?u.yo[a]:1e38},u.zK=function(a){return u.zp===!1&&u.zt(),u.QA[a]!==void 0?u.QA[a]:a},u.Ax=function(a){return u.zp===!1&&u.zt(),u.RA[a]!==void 0?u.RA[a]:a},u.zt=function(){for(var a,n=C,o=0;o<n.pcsid.length;o+=2)u.yo[n.pcsid[o]]=n.pcstol[2*n.pcsid[o+1]+1];for(o=0;o<n.pcsidc.length;o+=1)for(var l=(a=n.pcsidc[o])[0];l<=a[1];l++)u.yo[l]=n.pcstol[2*a[2]+1];for(o=0;o<n.gcsid.length;o+=2)u.Ks[n.gcsid[o]]=n.gcstol[2*n.gcsid[o+1]+1];for(o=0;o<n.gcsidc.length;o+=1)for(l=(a=n.gcsidc[o])[0];l<=a[1];l++)u.yo[l]=n.gcstol[2*a[2]+1];for(o=0;o<b.c.length;o+=1)for(l=(a=b.c[o])[0];l<=a[1];l++)u.Hw[l]=a[2];for(o=0;o<b.nc.length;o+=2)u.Hw[b.nc[o]]=b.nc[o+1];for(b=null,o=0;o<n.newtoold.length;o+=2)u.QA[n.newtoold[o+1]]=n.newtoold[o],u.RA[n.newtoold[o]]=n.newtoold[o+1];C=null,u.zp=!0},u.zp=!1,u.Ks=[],u.yo=[],u.QA=[],u.RA=[],u.Hw=[],u}()}(W||(W={})),function(c){function C(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var b=[];c.RC=function(){function u(){}return u.yQ=function(a){try{for(var n=0;n<b.length;n++)if(b[n].wkttext===a)return b[n].unit;for(var o,l=n="",p=!1,d=0;d<a.length;d++){var m=a[d];p===!0?m=='"'?a[d+1]=='"'?n+=m:p=p=!1:n+=m:/[\s]/.test(m)||(m==","?(l=n!==""?l+(C(n)+","):l+",",n=""):m==")"||m=="]"?(l=n!==""?l+(C(n)+"]}"):l+"]}",n=""):m=="("||m=="["?(l+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):m=='"'?(p=!0,n=""):n+=m)}o=JSON.parse(l);var v=u.gF(o);if(v===null)return null;for(o=null,m=0;m<v.values.length;m++)if(typeof v.values[m]=="object"&&v.values[m].entity==="UNIT"){o=v.values[m];break}if(o===null)return null;var _=c.Uc.TO(v.entity==="GEOGCS"?1:0,o.values[1],o.values[2]);return b.push({wkttext:a,unit:_}),10<b.length&&b.shift(),_}catch{return null}},u.gF=function(a){if(a===null)return null;if(a.entity==="GEOGCS"||a.entity==="PROJCS")return a;for(var n=[],o=0;o<a.values.length;o++)if(typeof a.values[o]=="object"&&a.values[o].entity!==void 0){if(a.values[o].entity==="GEOGCS"||a.values[o].entity=="PROJCS")return a.values[o];n.push(a.values[o])}for(a=0;a<n.length;a++)if((o=u.gF(n[a]))!==null)return o;return null},u.xQ=function(a){var n=-1;if(a!=null&&0<a.length){var o=a.indexOf("PROJCS");if(0<=o){var l=0;if(0<=(o=a.lastIndexOf("UNIT"))&&0<(o=a.indexOf(",",o+4))){o++;var p=a.indexOf("]",o+1);if(0<p)try{l=parseFloat(a.substring(o,p))}catch{l=0}}0<l&&(n=.001/l)}else if(0<=(o=a.indexOf("GEOGCS"))){var d=0;if(l=0,0<(o=a.indexOf("SPHEROID",o+6))&&0<(o=a.indexOf(",",o+8))){if(o++,0<(p=a.indexOf(",",o+1)))try{d=parseFloat(a.substring(o,p))}catch{d=0}if(0<d&&0<=(o=a.indexOf("UNIT",p+1))&&0<(o=a.indexOf(",",o+4))&&(o++,0<(p=a.indexOf("]",o+1))))try{l=parseFloat(a.substring(o,p))}catch{l=0}}0<d&&0<l&&(n=.001/(d*l))}}return n},u}()}(W||(W={})),function(c){var C;(C=c.ZK||(c.ZK={}))[C.NONE=0]="NONE",C[C.LINEAR=1]="LINEAR",C[C.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(c.KL||(c.KL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(c.Kh||(c.Kh={}));var b=function(){function u(a,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.cg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.cg=n.cg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],a=n=0;a<this.Ba;a++)this.Xs[a]=n,n+=u.Wa(this.cg[a]);for(this.Qq=n,this.Be=[],a=0;a<this.Ba;a++){n=u.Wa(this.qd(a));for(var o=u.te(this.qd(a)),l=0;l<n;l++)this.Be[this.Xs[a]+l]=o}}else this.Qq=this.Ba=0}return u.prototype.qd=function(a){if(0>a||a>this.Ba)throw c.i.O();return this.cg[a]},u.prototype.Qf=function(a){return this.wh[a]},u.gz=function(a){return u.DM[a]},u.Vp=function(a){return u.MM[a]},u.Wa=function(a){return u.lM[a]},u.prototype.hasAttribute=function(a){return 0<=this.wh[a]},u.prototype.cG=function(){return this.hasAttribute(1)},u.te=function(a){return u.ZC[a]},u.prototype.ER=function(a){return this.Xs[a]},u.xG=function(a,n){return u.ZC[a]===n},u.prototype.Nb=function(a){return this===a},u.prototype.Bn=function(){for(var a=c.P.Vh(this.cg[0]),n=1;n<this.Ba;n++)a=c.P.Vh(this.cg[n],a);return a},u.prototype.ak=function(a){return this.Xs[a]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(a){return this.cg[a]},u.ZC=[0,0,NaN,0,0,0,0,0,0],u.DM=[1,1,1,0,2,1,1,1,0],u.MM=[1,1,1,2,0,0,0,0,2],u.lM=[2,1,1,1,3,1,2,3,2],u}();c.ua=b}(W||(W={})),function(c){function C(p,d,m){var v=d-(p=new l(p)).e,_=p.c;for(_.length>++d&&b(p,v,l.gu),_[0]?m?v=d:(_=p.c,v=p.e+v+1):++v;_.length<v;_.push(0));return v=p.e,m===1||m&&(d<=v||v<=a)?(0>p.Cd&&_[0]?"-":"")+(1<_.length?_[0]+"."+_.join("").slice(1):_[0])+(0>v?"e":"e+")+v:p.toString()}function b(p,d,m,v){var _=p.c,M=p.e+d+1;if(m===1?v=5<=_[M]:m===2?v=5<_[M]||_[M]==5&&(v||0>M||_[M+1]!==void 0||1&_[M-1]):m===3?v=v||_[M]!==void 0||0>M:(v=!1,m!==0&&u("!Big.RM!")),1>M||!_[0])v?(p.e=-d,p.c=[1]):p.c=[p.e=0];else{if(_.length=M--,v)for(;9<++_[M];)_[M]=0,M--||(++p.e,_.unshift(1));for(M=_.length;!_[--M];_.pop());}return p}function u(p){throw(p=Error(p)).name="BigError",p}var a=-7,n=21,o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function p(d){if(d instanceof p)this.Cd=d.Cd,this.e=d.e,this.c=d.c.slice();else{var m,v,_;for(d===0&&0>1/d?d="-0":o.test(d+="")||u(NaN),this.Cd=d.charAt(0)=="-"?(d=d.slice(1),-1):1,-1<(m=d.indexOf("."))&&(d=d.replace(".","")),0<(v=d.search(/e/i))?(0>m&&(m=v),m+=+d.slice(v+1),d=d.substring(0,v)):0>m&&(m=d.length),v=0;d.charAt(v)=="0";v++);if(v==(_=d.length))this.c=[this.e=0];else{for(;d.charAt(--_)=="0";);for(this.e=m-v-1,this.c=[],m=0;v<=_;this.c[m++]=+d.charAt(v++));}}}return p.prototype.abs=function(){var d=new p(this);return d.Cd=1,d},p.prototype.cmp=function(d){var m=this.c,v=(d=new p(d)).c,_=this.Cd,M=d.Cd,T=this.e,I=d.e;if(!m[0]||!v[0])return m[0]?_:v[0]?-M:0;if(_!=M)return _;if(d=0>_,T!=I)return T>(I^d)?1:-1;for(_=-1,M=(T=m.length)<(I=v.length)?T:I;++_<M;)if(m[_]!=v[_])return m[_]>(v[_]^d)?1:-1;return T==I?0:T>(I^d)?1:-1},p.prototype.lm=function(d){var m=this.c,v=(d=new p(d)).c,_=this.Cd==d.Cd?1:-1,M=p.tr;if((M!==~~M||0>M||1e6<M)&&u("!Big.DP!"),!m[0]||!v[0])return m[0]==v[0]&&u(NaN),v[0]||u(_/0),new p(0*_);var T,I,O=v.slice(),R=T=v.length,L=m.length,G=m.slice(0,T),q=G.length,D=d,H=D.c=[],ee=0,te=M+(D.e=this.e-d.e)+1;for(D.Cd=_,_=0>te?0:te,O.unshift(0);q++<T;G.push(0));do{for(I=0;10>I;I++){if(T!=(q=G.length))var Z=T>q?1:-1;else{var ce=-1;for(Z=0;++ce<T;)if(v[ce]!=G[ce]){Z=v[ce]>G[ce]?1:-1;break}}if(!(0>Z))break;for(d=q==T?v:O;q;){if(G[--q]<d[q]){for(ce=q;ce&&!G[--ce];G[ce]=9);--G[ce],G[q]+=10}G[q]-=d[q]}for(;!G[0];G.shift());}H[ee++]=Z?I:++I,G[0]&&Z?G[q]=m[R]||0:G=[m[R]]}while((R++<L||G[0]!==void 0)&&_--);return H[0]||ee==1||(H.shift(),D.e--),ee>te&&b(D,M,p.gu,G[0]!==void 0),D},p.prototype.ZR=function(){return 0<this.cmp(0)},p.prototype.fT=function(){return 0>this.cmp(0)},p.prototype.kt=function(d){var m,v=this.Cd,_=(d=new p(d)).Cd;if(v!=_)return d.Cd=-_,this.nI(d);var M=this.c.slice(),T=this.e,I=d.c,O=d.e;if(!M[0]||!I[0])return I[0]?(d.Cd=-_,d):new p(M[0]?this:0);if(v=T-O){for((m=0>v)?(v=-v,T=M):(O=T,T=I),T.reverse(),_=v;_--;T.push(0));T.reverse()}else for(T=((m=M.length<I.length)?M:I).length,v=_=0;_<T;_++)if(M[_]!=I[_]){m=M[_]<I[_];break}if(m&&(T=M,M=I,I=T,d.Cd=-d.Cd),0<(_=(T=I.length)-(m=M.length)))for(;_--;M[m++]=0);for(_=m;T>v;){if(M[--T]<I[T]){for(m=T;m&&!M[--m];M[m]=9);--M[m],M[T]+=10}M[T]-=I[T]}for(;M[--_]==0;M.pop());for(;M[0]==0;)M.shift(),--O;return M[0]||(d.Cd=1,M=[O=0]),d.c=M,d.e=O,d},p.prototype.nI=function(d){var m=this.Cd,v=(d=new p(d)).Cd;if(m!=v)return d.Cd=-v,this.kt(d);v=this.e;var _=this.c,M=d.e,T=d.c;if(!_[0]||!T[0])return T[0]?d:new p(_[0]?this:0*m);if(_=_.slice(),m=v-M){for(0<m?(M=v,v=T):(m=-m,v=_),v.reverse();m--;v.push(0));v.reverse()}for(0>_.length-T.length&&(v=T,T=_,_=v),m=T.length,v=0;m;)v=(_[--m]=_[m]+T[m]+v)/10|0,_[m]%=10;for(v&&(_.unshift(v),++M),m=_.length;_[--m]==0;_.pop());return d.c=_,d.e=M,d},p.prototype.pow=function(d){var m=this,v=new p(1),_=v,M=0>d;for((d!==~~d||-1e6>d||1e6<d)&&u("!pow!"),d=M?-d:d;1&d&&(_=_.nr(m)),d>>=1;)m=m.nr(m);return M?v.lm(_):_},p.prototype.round=function(d,m){var v=this;return d==null?d=0:(d!==~~d||0>d||1e6<d)&&u("!round!"),b(v=new p(v),d,m==null?p.gu:m),v},p.prototype.sqrt=function(){var d=this.c,m=this.Cd,v=this.e,_=new p("0.5");if(!d[0])return new p(this);0>m&&u(NaN),(m=Math.sqrt(this.toString()))==0||m==1/0?((m=d.join("")).length+v&1||(m+="0"),(d=new p(Math.sqrt(m).toString())).e=((v+1)/2|0)-(0>v||1&v)):d=new p(m.toString()),m=d.e+(p.tr+=4);do v=d,d=_.nr(v.nI(this.lm(v)));while(v.c.slice(0,m).join("")!==d.c.slice(0,m).join(""));return b(d,p.tr-=4,p.gu),d},p.prototype.nr=function(d){var m=this.c,v=(d=new p(d)).c,_=m.length,M=v.length,T=this.e,I=d.e;if(d.Cd=this.Cd==d.Cd?1:-1,!m[0]||!v[0])return new p(0*d.Cd);if(d.e=T+I,_<M){var O=m;m=v,v=O,I=_,_=M,M=I}for(O=Array(I=_+M);I--;O[I]=0);for(T=M;T--;){for(M=0,I=_+T;I>T;)M=O[I]+v[T]*m[I-T-1]+M,O[I--]=M%10,M=M/10|0;O[I]=(O[I]+M)%10}for(M&&++d.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return d.c=O,d},p.prototype.toString=function(){var d=this.e,m=this.c.join(""),v=m.length;if(d<=a||d>=n)m=m.charAt(0)+(1<v?"."+m.slice(1):"")+(0>d?"e":"e+")+d;else if(0>d){for(;++d;m="0"+m);m="0."+m}else if(0<d)if(++d>v)for(d-=v;d--;m+="0");else d<v&&(m=m.slice(0,d)+"."+m.slice(d));else 1<v&&(m=m.charAt(0)+"."+m.slice(1));return 0>this.Cd&&this.c[0]?"-"+m:m},p.prototype.toExponential=function(d){return d==null?d=this.c.length-1:(d!==~~d||0>d||1e6<d)&&u("!toExp!"),C(this,d,1)},p.prototype.toFixed=function(d){var m=a,v=n;if(a=-(n=1/0),d==null)var _=this.toString();else d===~~d&&0<=d&&1e6>=d&&(_=C(this,this.e+d),0>this.Cd&&this.c[0]&&0>_.indexOf("-")&&(_="-"+_));return a=m,n=v,_||u("!toFix!"),_},p.prototype.toPrecision=function(d){return d==null?this.toString():((d!==~~d||1>d||1e6<d)&&u("!toPre!"),C(this,d-1,2))},p.tr=20,p.gu=1,p}();c.ip=l}(W||(W={})),function(c){var C=function(){function b(u){this.lf=u}return b.prototype.qr=function(u,a,n){var o=new c.h,l=new c.h,p=this.lf;n.Wd(u,a,function(d,m){return p.uc(2*d,o),p.uc(2*m,l),o.compare(l)})},b.prototype.bq=function(u){return this.lf.read(2*u+1)},b}();c.si=function(){function b(){}return b.cq=function(u){if(u.B())return!1;var a=u.K();return a==1736?u.He()!=0:a==1607?(a=[!1],b.mE(u,!0,a),a[0]):!(a!=197&&(!c.ba.zd(a)||u.vG()))},b.im=function(u){var a=u.K();if(a==1736)return a=new c.Ua(u.description),u.B()||u.YC(a),a;if(a==1607)return b.mE(u,!1,null);if(a==197)return a=new c.Ua(u.description),u.B()||a.bd(u,!1),a;if(c.ba.zd(a)){if(a=new c.de(u.description),!u.B()&&!u.vG()){var n=new c.Ta;u.Uo(n),a.add(n),u.Qo(n),a.add(n)}return a}if(c.ba.Sn(a))return null;throw c.i.O()},b.mE=function(u,a,n){n!=null&&(n[0]=!1);var o=null;if(a||(o=new c.de(u.description)),!u.B()){var l=new c.ja(0);l.Jb(2*u.ea());for(var p=0,d=u.ea();p<d;p++)if(0<u.Ka(p)&&!u.On(p)){var m=u.Ca(p);l.add(m),m=u.Wc(p)-1,l.add(m)}if(0<l.size){d=new c.Zt,p=u.vb(0),d.sort(l,0,l.size,new C(p)),d=new c.h,p.uc(2*l.get(0),d),m=0;for(var v=1,_=new c.Ta,M=new c.h,T=1,I=l.size;T<I;T++)if(p.uc(2*l.get(T),M),M.rb(d))l.get(m)>l.get(T)?(l.set(m,2147483647),m=T):l.set(T,2147483647),v++;else{if((1&v)==0)l.set(m,2147483647);else if(a)return n!=null&&(n[0]=!0),null;d.N(M),m=T,v=1}if((1&v)==0)l.set(m,2147483647);else if(a)return n!=null&&(n[0]=!0),null;if(!a)for(l.Wd(0,l.size,function(O,R){return O-R}),T=0,I=l.size;T<I&&l.get(T)!=2147483647;T++)u.we(l.get(T),_),o.add(_)}}return a?null:o},b}()}(W||(W={})),function(c){var C=function(){function b(){this.zf=new c.ja(0),this.As=new c.ja(0),this.yH=1,this.Gs=NaN}return b.prototype.sort=function(u,a,n,o){if(32>n-a)o.qr(a,n,u);else{var l=!0;try{for(var p=1/0,d=-1/0,m=a;m<n;m++){var v=o.bq(u.get(m));v<p&&(p=v),v>d&&(d=v)}if(this.reset(n-a,p,d,n-a)){for(m=a;m<n;m++){var _=u.get(m);v=o.bq(_);var M=this.tF(v);this.zf.set(M,this.zf.get(M)+1),this.As.write(m-a,_)}var T=this.zf.get(0);this.zf.set(0,0),m=1;for(var I=this.zf.size;m<I;m++){var O=this.zf.get(m);this.zf.set(m,T),T+=O}for(m=a;m<n;m++){_=this.As.read(m-a),v=o.bq(_),M=this.tF(v);var R=this.zf.get(M);u.set(R+a,_),this.zf.set(M,R+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)o.qr(a,n,u);else{for(m=n=0,I=this.zf.size;m<I;m++)l=n,(n=this.zf.get(m))>l&&o.qr(a+l,a+n,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},b.prototype.reset=function(u,a,n,o){return!(2>u||n==a)&&(u=Math.min(b.bL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.yH=a,this.As.resize(o),this.Gs=(n-a)/(u-1),!0)},b.prototype.tF=function(u){return c.P.truncate((u-this.yH)/this.Gs)},b.bL=65536,b}();c.Zt=C}(W||(W={})),function(c){var C,b;(b=C||(C={}))[b.enum_line=1]="enum_line",b[b.enum_arc=2]="enum_arc",b[b.enum_dummy=4]="enum_dummy",b[b.enum_concave_dip=8]="enum_concave_dip",b[b.enum_connection=3]="enum_connection";var u=function(){function p(){}return p.Su=function(d,m,v,_,M,T){var I=new p;return I.Km=new c.h,I.Xm=new c.h,I.cw=new c.h,I.Km.N(d),I.Xm.N(m),I.cw.N(v),I.Do=_,I.sh=M,I.uh=T,I},p.construct=function(d,m,v,_){var M=new p;return M.Km=new c.h,M.Xm=new c.h,M.cw=new c.h,M.Km.N(d),M.Xm.N(m),M.cw.Sc(),M.Do=4,M.sh=v,M.uh=_,M},p}(),a=function(){function p(d,m,v,_,M,T){this.$v=null,this.za=0,this.yA=d,this.WH=this.UH=0,this.La=m,this.Oj=v,this.wk=_,this.Fq=M,this.Vb=T}return p.prototype.next=function(){for(var d=new c.Ta;;){if(this.za==this.yA.I())return null;if(this.yA.we(this.za,d),this.za++,!d.B())break}var m=!1;if(this.$v==null&&(this.UH=d.Ng(),this.WH=d.kh(),this.$v=l.buffer(d,this.La,this.Oj,this.wk,this.Fq,this.Vb),m=!0),this.za<this.yA.I()){var v=new c.Ea;this.$v.copyTo(v)}else v=this.$v;if(!m){m=new c.Ed;var _=d.Ng()-this.UH;d=d.kh()-this.WH,m.gg(_,d),v.Pc(m)}return v},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),n=function(){function p(d,m){this.Xa=d,this.za=0,this.qq=m}return p.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var m=this.za;if(this.za++,!d.On(m))for(var v=d.Oa(d.Wc(m)-1);this.za<d.ea();){var _=d.Oa(d.Ca(this.za));if(d.On(this.za)||_!=v)break;v=d.Oa(d.Wc(this.za)-1),this.za++}if(this.za-m==1)return this.Xa.eE(this.Xa.Y,m,this.qq);for((v=new c.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,m,!0),m+=1;m<this.za;m++)v.Fr(this.Xa.Y,m,0,d.tv(m),!1);return this.Xa.eE(v,0,this.qq)}return null},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),o=function(){function p(d){this.Xa=d,this.za=0}return p.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var m=this.za;for(d.Kr(this.za),this.za++;this.za<d.ea()&&!(0<d.Kr(this.za));)this.za++;return m==0&&this.za==d.ea()?this.Xa.ly(d,0,d.ea()):this.Xa.ly(d,m,this.za)}return null},p.prototype.Ma=function(){return 0},p.prototype.qe=function(){},p}(),l=function(){function p(d){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=d,this.sb=this.Mv=this.BT=this.La=this.nA=this.dt=this.ra=0,this.iA=this.wk=-1,this.qq=!0}return p.buffer=function(d,m,v,_,M,T){if(d==null||0>_)throw c.i.O();if(d.B())return new c.Ea(d.description);var I=new c.l;return d.yc(I),0<m&&I.X(m,m),(T=new p(T)).Oj=v,T.Y=d,T.ra=c.ta.Xd(v,I,!0),T.dt=c.ta.Xd(null,I,!0),T.La=m,T.BT=d.K(),0>=M&&(M=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(_)||_==0?_=1e-5*T.sb:_>.5*T.sb&&(_=.5*T.sb),12>M&&(M=12),(d=Math.abs(m)*(1-Math.cos(Math.PI/M)))>_?_=d:(d=Math.PI/Math.acos(1-_/Math.abs(m)))<M-1&&12>(M=c.P.truncate(d))&&(M=12,_=Math.abs(m)*(1-Math.cos(Math.PI/M))),T.wk=_,T.Fq=M,T.nA=Math.min(T.dt,.25*_),T.fE()},p.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var d=this.kE();d=c.P.truncate((d+3)/4);var m=.5*Math.PI/d;this.iA=m;for(var v=0;v<4*d;v++)this.Jd.push(null);var _=Math.cos(m);m=Math.sin(m);var M=c.h.construct(0,1);for(v=0;v<d;v++)this.Jd[v+0*d]=c.h.construct(M.y,-M.x),this.Jd[v+1*d]=c.h.construct(-M.x,-M.y),this.Jd[v+2*d]=c.h.construct(-M.y,M.x),this.Jd[v+3*d]=M,(M=c.h.construct(M.x,M.y)).Ct(_,m)},p.prototype.fE=function(){var d=this.Y.K();if(c.ba.zd(d))return(d=new c.Ua(this.Y.description)).oc(this.Y,!0),this.Y=d,this.fE();if(this.La<=this.ra){if(!c.ba.MS(d))return new c.Ea(this.Y.description);if(0>=this.La&&(d=new c.l,this.Y.A(d),d.S()<=2*-this.La||d.da()<=2*this.La))return new c.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.JN();case 550:return this.IN();case 1607:return this.LN();case 1736:return this.KN();case 197:return this.FN();default:throw c.i.Ra()}},p.prototype.LN=function(){if(this.yG(this.Y)){var d=new c.Ta;this.Y.we(0,d);var m=new c.l;return this.Y.A(m),d.Db(m.tf()),this.Iu(d)}return this.Y=this.OV(this.Y),d=new n(this,this.qq),c.Ih.local().W(d,this.Oj,this.Vb).next()},p.prototype.KN=function(){if(this.La==0)return this.Y;var d=c.$l.local();if(this.ev(),this.Y=d.W(this.Y,null,!1,this.Vb),0>this.La){var m=this.Y;return m=this.ly(m,0,m.ea()),d.W(m,this.Oj,!1,this.Vb)}return this.yG(this.Y)?(d=new c.Ta,this.Y.we(0,d),m=new c.l,this.Y.A(m),d.Db(m.tf()),this.Iu(d)):(d=new o(this),c.Ih.local().W(d,this.Oj,this.Vb).next())},p.prototype.ly=function(d,m,v){for(var _=new c.Ea(d.description);m<v;m++)if(!(1>d.Ka(m))){var M=d.Kr(m),T=new c.l;if(d.Tj(m,T),0<this.La){if(0<M)if(this.zG(d,m))M=new c.Ta,d.we(d.Ca(m),M),M.Db(T.tf()),this.Au(_,M);else{var I=M=new c.Ua(d.description);I=c.au.DG(this.Y,m)||this.An(this.Y,m,I,!0,1)==2?this.dE(d,m):this.zn(M),_.add(I,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(I=M=new c.Ua(d.description),this.An(this.Y,m,I,!0,1),M.B()))){var O=new c.l;for(O.L(T),O.X(this.sb,this.sb),I.vp(O),T=1,M=(I=this.zn(M)).ea();T<M;T++)_.addPath(I,T,!0)}}else if(0<M){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(I=M=new c.Ua(d.description),this.An(this.Y,m,I,!0,-1),M.B())))for(O=new c.l,I.yc(O),O.X(this.sb,this.sb),I.vp(O),T=1,M=(I=this.zn(M)).ea();T<M;T++)_.addPath(I,T,!0)}else for(I=M=new c.Ua(d.description),this.An(this.Y,m,I,!0,-1),T=0,M=(I=this.zn(M)).ea();T<M;T++)_.addPath(I,T,!0)}if(0<this.La)return 1<_.ea()?_=this.zn(_):p.kx(_);if(d=new c.l,_.yc(d),_.B())return p.kx(_);for(d.X(this.sb,this.sb),_.vp(d),_=this.zn(_),d=new c.Ea(_.description),T=1,M=_.ea();T<M;T++)d.addPath(_,T,!1);return p.kx(d)},p.prototype.JN=function(){return this.Iu(this.Y)},p.prototype.Iu=function(d){var m=new c.Ea(this.Y.description);return this.Au(m,d),this.kX(m)},p.prototype.IN=function(){var d=new a(this.Y,this.La,this.Oj,this.wk,this.Fq,this.Vb);return c.Ih.local().W(d,this.Oj,this.Vb).next()},p.prototype.FN=function(){var d=new c.Ea(this.Y.description);if(0>=this.La){if(this.La==0)d.bd(this.Y,!1);else{var m=new c.Hh;this.Y.dn(m),m.X(this.La,this.La),d.bd(m,!1)}return d}return d.bd(this.Y,!1),this.Y=d,this.dE(d,0)},p.prototype.dE=function(d,m){this.ev();var v=new c.Ea(d.description),_=new c.h,M=new c.h,T=new c.h,I=new c.h,O=new c.h,R=new c.h,L=new c.h,G=new c.h,q=d.Ka(m),D=d.Ca(m),H=0;for(m=d.Ka(m);H<m;H++){if(d.D(D+H,M),d.D(D+(H+1)%q,I),d.D(D+(H+2)%q,R),L.vc(I,M),L.length()==0||(L.Jv(),L.normalize(),L.scale(this.sb),_.add(L,M),T.add(L,I),H==0?v.Nt(_):v.Ei(_),v.Ei(T),G.vc(R,I),G.length()==0))throw c.i.Ra();G.Jv(),G.normalize(),G.scale(this.sb),O.add(G,I),this.AD(v,I,T,O,!1)}return p.kx(v)},p.prototype.eE=function(d,m,v){if(this.ev(),1>d.Ka(m))return null;if(this.zG(d,m)&&0<this.La){v=new c.Ta,d.we(d.Ca(m),v);var _=new c.l;return d.Tj(m,_),v.Db(_.tf()),this.Iu(v)}if(_=new c.Ua(d.description),d.On(m))this.An(d,m,_,v,1),this.An(d,m,_,v,-1);else{var M=new c.Ua(d.description);M.addPath(d,m,!1),M.Fr(d,m,0,d.tv(m),!1),this.An(M,0,_,v,1)}return this.zn(_)},p.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw c.i.hu("user_canceled")},p.prototype.zn=function(d){return c.Hg.Nk(d,this.dt,!0,!0,this.Vb)},p.prototype.kE=function(){if(this.wk==0)return this.Fq;var d=1-this.wk*Math.abs(this.Mv);return 4>(d=-1>d?4:2*Math.PI/Math.acos(d)+.5)?d=4:d>this.Fq&&(d=this.Fq),c.P.truncate(d)},p.prototype.AD=function(d,m,v,_,M){this.ev();var T=new c.h;T.vc(v,m),T.scale(this.Mv);var I=new c.h;I.vc(_,m),I.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.iA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(I=Math.atan2(I.y,I.x)/this.iA)&&(I=this.Jd.length+I),(I=this.Jd.length-I)<T&&(I+=this.Jd.length);var O=c.P.truncate(I);I=c.P.truncate(Math.ceil(T)),(T=new c.h).N(this.Jd[I%this.Jd.length]),T.Dt(this.sb,m);var R=10*this.ra;for(T.sub(v),T.length()<R&&(I+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,m),T.sub(_),T.length()<R&&--O,v=O-I,v++,O=0,I%=this.Jd.length;O<v;O++,I=(I+1)%this.Jd.length)T.N(this.Jd[I]),T.Dt(this.sb,m),d.Ei(T),this.Zq();M&&d.Ei(_)},p.prototype.An=function(d,m,v,_,M){var T=new c.hd,I=T.gN(d,m);if(T.Ip(this.nA,!1,!1),2>T.I(I))return 0>M||(M=d,T=new c.Ta,M.we(M.Ca(m),T),this.Au(v,T)),1;var O=T.Oa(T.Ya(T.Ob(I))),R=new c.Ed;if(R.gg(-O.x,-O.y),T.Pc(R),_&&(this.nQ(T,I,M),2>T.I(I)))return 0>M||(M=d,T=new c.Ta,M.we(M.Ca(m),T),this.Au(v,T)),1;this.$d.length=0;var L=T.Ob(I);m=T.Ya(L);var G=M==1?T.Na(m):T.V(m);d=M==1?T.V(m):T.Na(m);var q=!0;_=new c.h,I=new c.h;var D=new c.h,H=new c.h,ee=new c.h,te=new c.h,Z=new c.h,ce=new c.h,ye=new c.h,Me=new c.h,xe=this.sb;L=T.Ka(L);for(var be=0;be<L;be++)T.D(d,I),q&&(T.D(m,_),T.D(G,D),ce.vc(_,D),ce.normalize(),Me.GG(ce),Me.scale(xe),H.add(Me,_)),Z.vc(I,_),Z.normalize(),ye.GG(Z),ye.scale(xe),ee.add(_,ye),G=ce.yi(Z),q=ce.Sh(Z),0>G||0>q&&G==0?this.$d.push(u.Su(H,ee,_,2,this.$d.length+1,this.$d.length-1)):H.rb(ee)||(this.$d.push(u.construct(H,_,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(_,ee,this.$d.length+1,this.$d.length-1,"dummy"))),te.add(I,ye),this.$d.push(u.Su(ee,te,_,1,this.$d.length+1,this.$d.length-1)),H.N(te),Me.N(ye),D.N(_),_.N(I),ce.N(Z),G=m,m=d,q=!1,d=M==1?T.V(m):T.Na(m);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.QV(v),R.gg(O.x,O.y),v.SD(R,v.ea()-1),1},p.prototype.QV=function(d){for(var m=this.tO(),v=!0,_=m+1,M=m;_!=m;M=_){var T=this.$d[M];_=T.sh!=-1?T.sh:(M+1)%this.$d.length,T.Do!=0&&(v&&d.Nt(T.Km),T.Do==2?this.AD(d,T.cw,T.Km,T.Xm,!0):d.Ei(T.Xm),v=!1)}},p.prototype.tO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var d=0,m=0,v=this.$d.length;m<v;){var _=this.$d[m];if((3&_.Do)!=0){d=m;break}m=_.sh}for(v=d+1,m=d;v!=d;m=v){v=(_=this.$d[m]).sh;for(var M=1,T=null;v!=m&&(3&(T=this.$d[v]).Do)==0;)v=T.sh,M++;M!=1&&(_.Do&T.Do)==1&&(this.Ns==null&&(this.Ns=new c.zb,this.nw=new c.zb),this.Ns.Ec(_.Km),this.Ns.Rc(_.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(_.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),_.sh=v,T.uh=m))}return d},p.prototype.Hv=function(d,m,v){var _=new c.h;if(_.vc(v,d),v=_.length(),0<(v=this.sb*this.sb-v*v*.25)){v=Math.sqrt(v),_.normalize(),_.cr();var M=new c.h;if(M.vc(m,d),M.Sh(_)+v>=this.sb)return!0}return!1},p.prototype.nQ=function(d,m,v){for(var _=0;1>_;_++){var M=!1,T=d.Ob(m),I=d.Ka(T);if(I==0)break;var O=I;if(3>I)break;!d.ec(T)&&(O=I-1),T=d.Ya(T),I=0<v?d.Na(T):d.V(T);for(var R=0<v?d.V(T):d.Na(T),L=I,G=!0,q=new c.h,D=new c.h,H=new c.h,ee=new c.h,te=new c.h,Z=c.h.construct(0,0),ce=new c.h,ye=new c.h,Me=new c.h,xe=new c.h,be=this.sb,Ce=0,Ze=0;Ze<O&&(d.D(R,D),G&&(d.D(T,q),d.D(I,H),L=I),ye.vc(q,H),ye.normalize(),ce.vc(D,q),ce.normalize(),L!=R);){var Qe=ye.yi(ce),_t=ye.Sh(ce),xt=!0;if(0>Qe||0>_t&&Qe==0||!this.Hv(H,q,D)||(Z.N(D),xt=!1,++Ce,M=!0),xt){if(0<Ce)for(;(Qe=0<v?d.Na(L):d.V(L))!=T;){if(d.D(Qe,ee),!this.Hv(ee,H,Z)){Qe!=R&&this.Hv(ee,H,D)&&this.Hv(ee,q,D)&&(H.N(ee),L=Qe,xt=!1,++Ce);break}H.N(ee),L=Qe,xt=!1,++Ce}if(!xt)continue;if(0<Ce){for(L=0<v?d.Na(I):d.V(I),G=1;G<Ce;G++)xt=0<v?d.Na(L):d.V(L),d.pd(L,!0),L=xt;Me.vc(q,H),Ce=be*be-(Ce=Me.length())*Ce*.25,be-(Ce=Math.sqrt(Ce))>.5*this.wk?(te.add(H,q),te.scale(.5),Me.normalize(),Me.cr(),xe.N(Me),xe.scale(be-Ce),te.add(xe),d.mf(I,te)):d.pd(I,!0),Ce=0}H.N(q),L=T}q.N(D),I=T,T=R,R=0<v?d.V(T):d.Na(T),Ze++,G=!1}if(0<Ce){for(L=0<v?d.Na(I):d.V(I),G=1;G<Ce;G++)xt=0<v?d.Na(L):d.V(L),d.pd(L,!0),L=xt;te.add(H,q),te.scale(.5),Me.vc(q,H),Ce=be*be-(Ce=Me.length())*Ce*.25,Ce=Math.sqrt(Ce),Me.normalize(),Me.cr(),xe.N(Me),xe.scale(be-Ce),te.add(xe),d.mf(I,te)}if(d.Ip(this.nA,!1,!1),!M)break}},p.prototype.zG=function(d,m){if(d.Ka(m)==1)return!0;var v=new c.l;return d.Tj(m,v),Math.max(v.S(),v.da())<.5*this.wk},p.prototype.yG=function(d){var m=new c.l;return d.A(m),Math.max(m.S(),m.da())<.5*this.wk},p.prototype.OV=function(d){for(var m=0,v=0,_=(d=c.yC.local().W(d,.25*this.wk,!1,this.Vb)).ea();v<_;v++)m=Math.max(d.Ka(v),m);return 32>m?(this.qq=!1,d):(this.qq=!0,c.Hg.Nk(d,this.dt,!1,!0,this.Vb))},p.prototype.Au=function(d,m){if(m=m.D(),this.Jd!=null&&this.Jd.length!==0){var v=new c.h;v.N(this.Jd[0]),v.Dt(this.sb,m),d.Nt(v);for(var _=1,M=this.Jd.length;_<M;_++)v.N(this.Jd[_]),v.Dt(this.sb,m),d.Ei(v)}else{_=this.kE(),v=c.P.truncate((_+3)/4),_=.5*Math.PI/v,M=Math.cos(_);for(var T=Math.sin(_),I=new c.h,O=3;0<=O;O--){switch(I.na(0,this.sb),O){case 0:for(_=0;_<v;_++)d.Aj(I.x+m.x,I.y+m.y),I.Ct(M,T);break;case 1:for(_=0;_<v;_++)d.Aj(-I.y+m.x,I.x+m.y),I.Ct(M,T);break;case 2:for(_=0;_<v;_++)d.Aj(-I.x+m.x,-I.y+m.y),I.Ct(M,T);break;default:for(d.rx(I.y+m.x,-I.x+m.y),_=1;_<v;_++)I.Ct(M,T),d.Aj(I.y+m.x,-I.x+m.y)}this.Zq()}}},p.kx=function(d){return d.Eh(1,0),d},p.prototype.kX=function(d){return d.Eh(2,this.ra),d.hm(),d},p}();c.BK=l}(W||(W={})),function(c){var C=function(){function b(u){this.Da=u,this.g=new c.hd,this.ed=new c.ja(0)}return b.prototype.Nh=function(u,a,n){switch(a){case 0:if(u.v<n&&u.C<=n)break;return u.v>=n?1:-1;case 1:if(u.G<n&&u.H<=n)break;return u.G>=n?1:-1;case 2:if(u.v>=n&&u.C>n)break;return u.C<=n?1:-1;case 3:if(!(u.G>=n&&u.H>n))return u.H<=n?1:-1}return 0},b.prototype.vy=function(u,a){return u.K()==1736?this.xy(u,a):this.yy(u)},b.prototype.xy=function(u,a){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var n=new c.l;u.yc(n),this.Y=this.g.Ib(u);var o=new c.l,l=new c.l,p=new c.h,d=new c.h,m=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0];new c.hg;var _=new c.zb,M=new c.ja(0);M.Jb(Math.min(100,u.I()));for(var T=!1,I=0;!T&&4>I;I++){var O=!1,R=(1&I)!=0,L=0;switch(I){case 0:L=this.Da.v,O=n.v<=L&&n.C>=L;break;case 1:L=this.Da.G,O=n.G<=L&&n.H>=L;break;case 2:L=this.Da.C,O=n.v<=L&&n.C>=L;break;case 3:L=this.Da.H,O=n.G<=L&&n.H>=L}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var G=-1,q=-1,D=this.g.Ya(O),H=D;do{var ee=this.g.cc(H);ee==null&&(ee=_,this.g.D(H,p),ee.Ec(p),this.g.D(this.g.V(H),d),ee.Rc(d)),ee.A(o);var te=this.Nh(o,I,L),Z=0,ce=-1;if(te==-1){Z=0<(ee=ee.fq(R,L,m,v))?this.g.Wl(H,v,ee):0,Z+=1;var ye=H,Me=this.g.V(ye);for(ee=0;ee<Z;ee++){if(this.g.D(ye,p),this.g.D(Me,d),(ce=this.g.cc(ye))==null&&((ce=_).Ec(p),ce.Rc(d)),ce.A(l),(ce=this.Nh(l,I,L))==-1){if(R)(ce=Math.abs(p.y-L))<(xe=Math.abs(d.y-L))?(p.y=L,this.g.mf(ye,p)):(d.y=L,this.g.mf(Me,d));else{ce=Math.abs(p.x-L);var xe=Math.abs(d.x-L);ce<xe?(p.x=L,this.g.mf(ye,p)):(d.x=L,this.g.mf(Me,d))}(ce=this.g.cc(ye))==null&&((ce=_).Ec(p),ce.Rc(d)),ce.A(l),ce=this.Nh(l,I,L)}xe=G,G=ce,q==-1&&(q=G),xe==0&&G==1||xe==1&&G==0||xe!=0||G!=0||M.add(ye),G==1&&(T=!1),ce=ye=Me,Me=this.g.V(Me)}}Z==0&&(xe=G,G=te,q==-1&&(q=G),xe==0&&G==1||xe==1&&G==0||xe!=0||G!=0||M.add(H),G==1&&(T=!1),ce=this.g.V(H)),H=ce}while(H!=D);for(q==0&&G==0&&M.add(D),ee=0,G=M.size;ee<G;ee++)q=M.get(ee),this.g.pd(q,!1);M.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.zB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},b.prototype.yy=function(u){var a=new c.l,n=new c.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],p=new c.hg,d=u,m=new c.l;u.yc(m);for(var v=0;4>v;v++){var _=!1,M=(1&v)!=0,T=0;switch(v){case 0:T=this.Da.v,_=m.v<=T&&m.C>=T;break;case 1:T=this.Da.G,_=m.G<=T&&m.H>=T;break;case 2:T=this.Da.C,_=m.v<=T&&m.C>=T;break;case 3:T=this.Da.H,_=m.G<=T&&m.H>=T}if(_){_=d,d=u.Ja(),(_=_.Ha()).aj();for(var I,O=new c.h;_.ab();)for(var R,L=!0;_.Ia();){var G=_.ia();G.A(a);var q=this.Nh(a,v,T);if(q==-1){if(0<(q=G.fq(M,T,o,l))){var D=0;I=G.ac();for(var H=0;H<=q;H++)if(D!=(R=H<q?l[H]:1)){G.dh(D,R,p);var ee=p.get();ee.Ec(I),H<q&&(M?(O.x=o[H],O.y=T):(O.x=T,O.y=o[H]),ee.Rc(O)),ee.A(n);var te=this.Nh(n,v,T);if(te==-1){if(I=ee.ac(),D=ee.xc(),M)(te=Math.abs(I.y-T))<(Z=Math.abs(D.y-T))?(I.y=T,ee.Ec(I)):(D.y=T,ee.Rc(D));else{te=Math.abs(I.x-T);var Z=Math.abs(D.x-T);te<Z?(I.x=T,ee.Ec(I)):(D.x=T,ee.Rc(D))}ee.A(n),te=this.Nh(n,v,T)}I=ee.xc(),D=R,(R=te)==1?(d.oc(ee,L),L=!1):L=!0}}}else(R=q)==1?(d.oc(G,L),L=!1):L=!0}}}return d},b.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++,n=this.g.V(n))this.g.D(n,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(u){for(var a=new c.h,n=new c.h,o=c.P.lg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var p=this.g.Ya(l),d=p;do{var m=this.g.V(d);this.g.D(d,a);var v=-1;if(a.x==this.Da.v?(this.g.D(m,n),n.x==this.Da.v&&(v=1)):a.x==this.Da.C&&(this.g.D(m,n),n.x==this.Da.C&&(v=1)),a.y==this.Da.G?(this.g.D(m,n),n.y==this.Da.G&&(v=0)):a.y==this.Da.H&&(this.g.D(m,n),n.y==this.Da.H&&(v=0)),v!=-1&&(v=c.h.ub(a,n),!(1>=(v=c.P.truncate(Math.min(Math.ceil(v/u),2048)))))){for(var _=1;_<v;_++)o[_-1]=1*_/v;this.g.Wl(d,o,v-1)}d=m}while(d!=p)}},b.prototype.Xl=function(u,a){var n=this.g.Hd(),o=new c.h,l=new c.ja(0);l.Jb(100);for(var p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var d=this.g.Ya(p),m=0,v=this.g.Ka(p);m<v;m++){var _=this.g.V(d);this.g.D(d,o),(u?o.y==a:o.x==a)&&(this.g.D(_,o),(u?o.y==a:o.x==a)&&(this.g.Qa(d,n)!=1&&(l.add(d),this.g.Sa(d,n,1)),this.g.Qa(_,n)!=1&&(l.add(_),this.g.Sa(_,n,1)))),d=_}if(this.g.Ud(n),!(3>l.size)){var M=this;l.Wd(0,l.size,function(te,Z){return M.Oh(te,Z)}),n=new c.h,p=new c.h,d=new c.h,p.Sc();var T=-1;m=new c.ja(0),v=new c.ja(0),_=this.g.Hd();for(var I=this.g.Hd(),O=0,R=l.size;O<R;O++){var L=l.get(O);if(this.g.D(L,o),!o.rb(p)){if(T!=-1){for(var G=T;G<O;G++){T=l.get(G);var q=this.g.V(T);L=this.g.Na(T);var D=!1;0>this.Oh(T,q)&&(this.g.D(q,n),u?n.y==a:n.x==a)&&(m.add(T),D=!0,this.g.Sa(T,I,1)),0>this.Oh(T,L)&&(this.g.D(L,n),u?n.y==a:n.x==a)&&(D||m.add(T),this.g.Sa(T,_,1))}for(G=0,D=m.size;G<D;G++){if(T=m.get(G),L=this.g.Qa(T,_),q=this.g.Qa(T,I),L==1){L=this.g.Na(T),this.g.D(L,d);var H=[0];if(H[0]=0,!d.rb(o)){var ee=c.h.ub(p,d);H[0]=c.h.ub(d,o)/ee,H[0]==0?H[0]=2220446049250313e-31:H[0]==1&&(H[0]=.9999999999999998),this.g.Wl(L,H,1),L=this.g.Na(T),this.g.mf(L,o),v.add(L),this.g.Sa(L,_,1),this.g.Sa(L,I,-1)}}q==1&&(q=this.g.V(T),this.g.D(q,d),(H=[0])[0]=0,d.rb(o)||(ee=c.h.ub(p,d),H[0]=c.h.ub(p,o)/ee,H[0]==0?H[0]=2220446049250313e-31:H[0]==1&&(H[0]=.9999999999999998),this.g.Wl(T,H,1),L=this.g.V(T),this.g.mf(L,o),v.add(L),this.g.Sa(L,_,-1),this.g.Sa(L,I,1)))}T=m,m=v,(v=T).clear(!1)}T=O,p.N(o)}}this.g.Ud(_),this.g.Ud(I)}},b.prototype.Pl=function(u,a){var n=new c.h,o=new c.ja(0);o.Jb(100);for(var l=this.g.Hd(),p=0,d=this.ed.size;p<d;p++){var m=this.ed.get(p);if(m!=-1){var v=this.g.V(m);this.g.D(m,n),(u?n.y==a:n.x==a)&&(this.g.D(v,n),(u?n.y==a:n.x==a)&&(this.g.Qa(m,l)!=-2&&(o.add(m),this.g.Sa(m,l,-2)),this.g.Qa(v,l)!=-2&&(o.add(v),this.g.Sa(v,l,-2))))}}if(o.size!=0){var _=this;for(o.Wd(0,o.size,function(Z,ce){return _.Oh(Z,ce)}),p=0,d=o.size;p<d;p++){var M=o.get(p);this.g.Sa(M,l,p)}m=new c.h,(v=new c.h).Sc();var T=-1;for(p=0,d=o.size;p<d;p++)if((M=o.get(p))!=-1&&(this.g.D(M,n),!n.rb(v))){if(T!=-1)for(;;){M=!1;for(var I=1<p-T?p-1:p,O=T;O<I;O++){var R=o.get(O);if(R!=-1){var L=-1,G=this.g.V(R);0>this.Oh(R,G)&&(this.g.D(G,m),u?m.y==a:m.x==a)&&(L=G),G=-1;var q=this.g.Na(R);if(0>this.Oh(R,q)&&(this.g.D(q,m),u?m.y==a:m.x==a)&&(G=q),L!=-1&&G!=-1)this.Mh(R,o,l),this.g.pd(R,!1),this.Mh(L,o,l),this.g.pd(L,!1),M=!0;else if(L!=-1||G!=-1){for(q=O+1;q<p;q++){var D=o.get(q);if(D!=-1){var H=this.g.V(D),ee=-1;0>this.Oh(D,H)&&(this.g.D(H,m),u?m.y==a:m.x==a)&&(ee=H),H=this.g.Na(D);var te=-1;if(0>this.Oh(D,H)&&(this.g.D(H,m),u?m.y==a:m.x==a)&&(te=H),ee!=-1&&te!=-1){this.Mh(D,o,l),this.g.pd(D,!1),this.Mh(ee,o,l),this.g.pd(ee,!1),M=!0;break}if(L!=-1&&te!=-1){this.At(o,R,L,D,te,l),M=!0;break}if(G!=-1&&ee!=-1){this.At(o,D,ee,R,G,l),M=!0;break}}}if(M)break}}}if(!M)break}T=p,v.N(n)}}this.g.Ud(l)},b.prototype.Mh=function(u,a,n){n=this.g.Qa(u,n),a.set(n,-1),n=this.g.Qa(u,this.li),this.ed.set(n,-1),(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},b.prototype.At=function(u,a,n,o,l,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,l),this.g.Cc(l,n),this.Mh(o,u,p),this.g.oi(o,!1),this.Mh(l,u,p),this.g.oi(l,!0)},b.prototype.Oy=function(){for(var u=0,a=this.ed.size;u<a;u++){var n=this.ed.get(u);n!=-1&&this.g.cj(n,-1)}for(var o=0,l=0,p=this.g.Ob(this.Y);p!=-1;){var d=this.g.Ya(p);if(d==-1||p!=this.g.cd(d)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{n=d,m=0;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=d);2>=m?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.pd(d,!1),m==2&&(n=this.g.Qa(d,this.li),this.ed.set(n,-1),this.g.pd(d,!1)),m=p,p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)):(this.g.ep(p,!1),this.g.Yg(p,this.g.Na(d)),this.g.Xj(p,m),l+=m,o++,p=this.g.Sb(p))}}for(u=0,a=this.ed.size;u<a;u++)if((n=this.ed.get(u))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),m=0,d=n;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=d);2>=m?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.pd(d,!1),m==2&&(0<=(n=this.g.Qa(d,this.li))&&this.ed.set(n,-1),this.g.pd(d,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,d),this.g.Yg(p,this.g.Na(d)),this.g.ep(p,!1),l+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,l),u=0,a=this.g.ld;a!=-1;a=this.g.ve(a))u+=this.g.I(a);this.g.WB(u)},b.wy=function(u,a,n){return new b(a).vy(u,n)},b.clip=function(u,a,n,o){if(u.B())return u;if(a.B())return u.Ja();if((n=u.K())==33)return o=u.D(),a.contains(o)?u:u.Ja();if(n==197)return o=new c.l,u.A(o),o.Fa(a)?(a=new c.Hh,u.copyTo(a),a.Yo(o),a):u.Ja();var l=new c.l;if(u.yc(l),a.contains(l))return u;if(!a.isIntersecting(l))return u.Ja();if((l=u.Cb)!=null&&(l=l.Gk)!=null){if((l=l.So(a))==1){if(n!=1736)throw c.i.Ra();return(u=new c.Ea(u.description)).vp(a),u}if(l==0)return u.Ja()}switch(n){case 550:n=null,l=u.I();for(var p=u.vb(0),d=0,m=0;m<l;m++)o=new c.h,p.uc(2*m,o),a.contains(o)||(d==0&&(n=u.Ja()),d<m&&n.Gd(u,d,m),d=m+1);return 0<d&&n.Gd(u,d,l),d==0?u:n;case 1736:case 1607:return b.wy(u,a,o);default:throw c.i.Ra()}},b.prototype.Oh=function(u,a){var n=new c.h;return this.g.D(u,n),u=new c.h,this.g.D(a,u),n.compare(u)},b}();c.Vd=C}(W||(W={})),function(c){var C=function(){function b(u,a){this.Da=u,this.g=new c.hd,this.ed=new c.ja(0),this.nd=a}return b.prototype.Nh=function(u,a,n){switch(a){case 0:if(u.v<n&&u.C<=n)break;return u.v>=n?1:-1;case 1:if(u.G<n&&u.H<=n)break;return u.G>=n?1:-1;case 2:if(u.v>=n&&u.C>n)break;return u.C<=n?1:-1;case 3:if(!(u.G>=n&&u.H>n))return u.H<=n?1:-1}return 0},b.prototype.vy=function(u,a){return u.K()==1736?this.xy(u,a):this.yy(u)},b.prototype.xy=function(u,a){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var n=new c.l;u.yc(n),this.Y=this.g.Ib(u);var o=new c.l,l=new c.l,p=new c.h,d=new c.h,m=[0,0,0,0,0,0,0,0,0],v=[0,0,0,0,0,0,0,0,0],_=new c.zb,M=new c.ja(0);M.Jb(256);for(var T=!1,I=0;!T&&4>I;I++){var O=!1,R=(1&I)!=0,L=0;switch(I){case 0:L=this.Da.v,O=n.v<=L&&n.C>=L;break;case 1:L=this.Da.G,O=n.G<=L&&n.H>=L;break;case 2:L=this.Da.C,O=n.v<=L&&n.C>=L;break;case 3:L=this.Da.H,O=n.G<=L&&n.H>=L}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var G=!0,q=-1,D=-1,H=this.g.Ya(O),ee=H;do{var te=this.g.cc(ee);te==null&&(te=_,this.g.D(ee,p),te.Ec(p),this.g.D(this.g.V(ee),d),te.Rc(d)),te.A(o);var Z=this.Nh(o,I,L),ce=0,ye=-1;if(Z==-1){ce=0<(te=te.fq(R,L,m,v))?this.g.DX(ee,v,te):0,ce+=1;var Me=ee,xe=this.g.V(Me);for(te=0;te<ce;te++){if(this.g.D(Me,p),this.g.D(xe,d),(ye=this.g.cc(Me))==null&&((ye=_).Ec(p),ye.Rc(d)),ye.A(l),(ye=this.Nh(l,I,L))==-1){if(R)(ye=Math.abs(p.y-L))<(be=Math.abs(d.y-L))?(p.y=L,this.g.mf(Me,p)):(d.y=L,this.g.mf(xe,d));else{ye=Math.abs(p.x-L);var be=Math.abs(d.x-L);ye<be?(p.x=L,this.g.mf(Me,p)):(d.x=L,this.g.mf(xe,d))}(ye=this.g.cc(Me))==null&&((ye=_).Ec(p),ye.Rc(d)),ye.A(l),ye=this.Nh(l,I,L)}be=q,q=ye,D==-1&&(D=q),be==0&&q==1||be==1&&q==0||be!=0||q!=0||M.add(Me),q==1&&(G=T=!1),ye=Me=xe,xe=this.g.V(xe)}}if(ce==0&&(be=q,q=Z,D==-1&&(D=q),be==0&&q==1||be==1&&q==0||be!=0||q!=0||M.add(ee),q==1&&(G=T=!1),ye=this.g.V(ee)),ee=ye,256<=M.size){for(te=1,Z=M.size-1;te<Z;te++)ce=M.get(te),this.g.pd(ce,!1);M.set(1,M.Gc()),M.Dh(2)}}while(ee!=H);if(!G)for(D==0&&q==0&&M.add(H),te=0,Z=M.size;te<Z;te++)ce=M.get(te),this.g.pd(ce,!1);M.clear(!1),O=G||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.zB(),0<a&&this.Hy(a),this.g.Ke(this.Y))},b.prototype.yy=function(u){var a=new c.l,n=new c.l,o=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],p=new c.hg,d=u,m=new c.l;u.yc(m);for(var v=new c.h,_=new c.h,M=null,T=null,I=0;4>I;I++){var O=!1,R=(1&I)!=0,L=0;switch(I){case 0:L=this.Da.v,O=m.v<=L&&m.C>=L;break;case 1:L=this.Da.G,O=m.G<=L&&m.H>=L;break;case 2:L=this.Da.C,O=m.v<=L&&m.C>=L;break;case 3:L=this.Da.H,O=m.G<=L&&m.H>=L}if(O)for(O=d,d=u.Ja(),(O=O.Ha()).aj();O.ab();)for(var G,q=!0;O.Ia();){var D=O.ia();D.A(a);var H=this.Nh(a,I,L);if(H==-1){if(0<(H=D.fq(R,L,o,l))){var ee=0;D.$p(v);for(var te=0;te<=H;te++)if(ee!=(G=te<H?l[te]:1)){D.dh(ee,G,p);var Z=p.get();Z.Ec(v),te<H&&(R?(_.x=o[te],_.y=L):(_.x=L,_.y=o[te]),Z.Rc(_)),Z.A(n);var ce=this.Nh(n,I,L);ce==-1&&(M==null&&(M=new c.h),T==null&&(T=new c.h),Z.$p(M),Z.Vr(T),R?(ee=Math.abs(M.y-L))<(ce=Math.abs(T.y-L))?(M.y=L,Z.Ec(M)):(T.y=L,Z.Rc(T)):(ee=Math.abs(M.x-L))<(ce=Math.abs(T.x-L))?(M.x=L,Z.Ec(M)):(T.x=L,Z.Rc(T)),Z.A(n),ce=this.Nh(n,I,L)),Z.Vr(v),ee=G,(G=ce)==1?(d.oc(Z,q),q=!1):q=!0}}}else(G=H)==1?(d.oc(D,q),q=!1):q=!0}}return d},b.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new c.h,a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++,n=this.g.V(n))this.g.D(n,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(u){for(var a=new c.h,n=new c.h,o=null,l=null,p=c.P.lg(2048,0),d=this.g.Ob(this.Y);d!=-1;d=this.g.Sb(d)){var m=this.g.Ya(d),v=m;do{var _=this.g.V(v);this.g.D(v,a);var M=-1;if(a.x==this.Da.v?(this.g.D(_,n),n.x==this.Da.v&&(M=1)):a.x==this.Da.C&&(this.g.D(_,n),n.x==this.Da.C&&(M=1)),a.y==this.Da.G?(this.g.D(_,n),n.y==this.Da.G&&(M=0)):a.y==this.Da.H&&(this.g.D(_,n),n.y==this.Da.H&&(M=0)),M!=-1){if(o==null&&(o=new c.h),l==null&&(l=new c.h),o.N(a),l.na(0,0),M==0){var T=a.x-this.Da.v;l.x=c.mc.sign(n.x-a.x),o.x=u*c.mc.Dn(Math.floor(Math.abs(T/u)),T)+this.Da.v,0>o.x&&(o.x+=u)}else T=a.y-this.Da.G,l.y=c.mc.sign(n.y-a.y),o.y=u*c.mc.Dn(Math.floor(Math.abs(T/u)),T)+this.Da.G,0>o.y&&(o.y+=u);T=M!=0?n.y-a.y:n.x-a.x;var I=Math.abs(T);if(65536<I/u)throw c.i.ga("internal error");if(0<I){I=c.P.truncate(I/u)+2,p.length<I&&(p=c.P.lg(I));for(var O=I=0;;O++){var R=new c.h;if(R.x=o.x+l.x*O*u,R.y=o.y+l.y*O*u,1<=(R=(M!=0?R.y-a.y:R.x-a.x)/T))break;0>=R||(p[I]=R,I++)}I!=0&&this.g.Wl(v,p,I)}}v=_}while(v!=m)}},b.prototype.Xl=function(u,a){for(var n=-1,o=new c.h,l=null,p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p))for(var d=this.g.Ya(p),m=0,v=this.g.Ka(p);m<v;m++){var _=this.g.V(d);this.g.D(d,o),(u?o.y==a:o.x==a)&&(this.g.D(_,o),(u?o.y==a:o.x==a)&&(n==-1&&(n=this.g.Hd()),l==null&&(l=new c.ja(0)).Jb(100),this.g.Qa(d,n)!=1&&(l.add(d),this.g.Sa(d,n,1)),this.g.Qa(_,n)!=1&&(l.add(_),this.g.Sa(_,n,1)))),d=_}if(n!=-1&&this.g.Ud(n),!(l==null||3>l.size)){var M=this;l.Wd(0,l.size,function(te,Z){return M.Oh(te,Z)}),n=new c.h,p=new c.h,d=new c.h,p.Sc();var T=-1;m=new c.ja(0),v=new c.ja(0),_=null;for(var I=this.g.Hd(),O=this.g.Hd(),R=0,L=l.size;R<L;R++){var G=l.get(R);if(this.g.D(G,o),!o.rb(p)){if(T!=-1){for(var q=T;q<R;q++){T=l.get(q);var D=this.g.V(T);G=this.g.Na(T);var H=!1;this.g.D(D,n),0>p.compare(n)&&(u?n.y==a:n.x==a)&&(m.add(T),H=!0,this.g.Sa(T,O,1)),this.g.D(G,n),0>p.compare(n)&&(u?n.y==a:n.x==a)&&(H||m.add(T),this.g.Sa(T,I,1))}for(q=0,H=m.size;q<H;q++){if(T=m.get(q),G=this.g.Qa(T,I),D=this.g.Qa(T,O),G==1&&(G=this.g.Na(T),this.g.D(G,d),!d.rb(o))){_==null&&(_=[]);var ee=c.h.ub(p,d);_[0]=c.h.ub(d,o)/ee,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(G,_,1),G=this.g.Na(T),this.g.mf(G,o),v.add(G),this.g.Sa(G,I,1),this.g.Sa(G,O,-1)}D==1&&(D=this.g.V(T),this.g.D(D,d),d.rb(o)||(_==null&&(_=[]),ee=c.h.ub(p,d),_[0]=c.h.ub(p,o)/ee,_[0]==0?_[0]=2220446049250313e-31:_[0]==1&&(_[0]=.9999999999999998),this.g.Wl(T,_,1),G=this.g.V(T),this.g.mf(G,o),v.add(G),this.g.Sa(G,I,-1),this.g.Sa(G,O,1)))}T=m,m=v,(v=T).clear(!1)}T=R,p.N(o)}}this.g.Ud(I),this.g.Ud(O)}},b.prototype.Pl=function(u,a){for(var n=new c.h,o=null,l=-1,p=0,d=this.ed.size;p<d;p++){var m=this.ed.get(p);if(m!=-1){var v=this.g.V(m);this.g.D(m,n),(u?n.y==a:n.x==a)&&(this.g.D(v,n),(u?n.y==a:n.x==a)&&(l==-1&&(l=this.g.Hd()),o==null&&(o=new c.ja(0)).Jb(100),this.g.Qa(m,l)!=-2&&(o.add(m),this.g.Sa(m,l,-2)),this.g.Qa(v,l)!=-2&&(o.add(v),this.g.Sa(v,l,-2))))}}if(o==null)l!=-1&&this.g.Ud(l);else{var _=this;for(o.Wd(0,o.size,function(Z,ce){return _.Oh(Z,ce)}),p=0,d=o.size;p<d;p++){var M=o.get(p);this.g.Sa(M,l,p)}m=new c.h,(v=new c.h).Sc();var T=-1;for(p=0,d=o.size;p<d;p++)if((M=o.get(p))!=-1&&(this.g.D(M,n),!n.rb(v))){if(T!=-1)for(;;){M=!1;for(var I=1<p-T?p-1:p,O=T;O<I;O++){var R=o.get(O);if(R!=-1){var L=-1,G=this.g.V(R);this.g.D(G,m),0>v.compare(m)&&(u?m.y==a:m.x==a)&&(L=G),G=-1;var q=this.g.Na(R);if(this.g.D(q,m),0>v.compare(m)&&(u?m.y==a:m.x==a)&&(G=q),L!=-1&&G!=-1)this.Mh(R,o,l),this.g.pd(R,!1),this.Mh(L,o,l),this.g.pd(L,!1),M=!0;else if(L!=-1||G!=-1){for(q=O+1;q<p;q++){var D=o.get(q);if(D!=-1){var H=this.g.V(D),ee=-1;this.g.D(H,m),0>v.compare(m)&&(u?m.y==a:m.x==a)&&(ee=H),H=this.g.Na(D);var te=-1;if(this.g.D(H,m),0>v.compare(m)&&(u?m.y==a:m.x==a)&&(te=H),ee!=-1&&te!=-1){this.Mh(D,o,l),this.g.pd(D,!1),this.Mh(ee,o,l),this.g.pd(ee,!1),M=!0;break}if(L!=-1&&te!=-1){this.At(o,R,L,D,te,l),M=!0;break}if(G!=-1&&ee!=-1){this.At(o,D,ee,R,G,l),M=!0;break}}}if(M)break}}}if(!M)break}T=p,v.N(n)}this.g.Ud(l)}},b.prototype.Mh=function(u,a,n){n=this.g.Qa(u,n),a.set(n,-1),n=this.g.Qa(u,this.li),this.ed.set(n,-1),(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u&&(this.g.Kf(a,-1),this.g.Yg(a,-1))},b.prototype.At=function(u,a,n,o,l,p){this.g.Cc(a,o),this.g.Dc(o,a),this.g.Dc(n,l),this.g.Cc(l,n),this.Mh(o,u,p),this.g.oi(o,!1),this.Mh(l,u,p),this.g.oi(l,!0)},b.prototype.Oy=function(){for(var u=0,a=this.ed.size;u<a;u++){var n=this.ed.get(u);n!=-1&&this.g.cj(n,-1)}for(var o=0,l=0,p=this.g.Ob(this.Y);p!=-1;){var d=this.g.Ya(p);if(d==-1||p!=this.g.cd(d)){var m=p;p=this.g.Sb(p),this.g.Kf(m,-1),this.g.br(m)}else{n=d,m=0;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=d);this.g.ep(p,!1),this.g.Yg(p,this.g.Na(d)),this.g.Xj(p,m),l+=m,o++,p=this.g.Sb(p)}}for(u=0,a=this.ed.size;u<a;u++)if((n=this.ed.get(u))!=-1&&(p=this.g.cd(n))==-1){p=this.g.wf(this.Y,-1),m=0,d=n;do this.g.cj(n,p),m++,n=this.g.V(n);while(n!=d);2>=m?(n=this.g.Qa(d,this.li),this.ed.set(n,-1),d=this.g.pd(d,!1),m==2&&(0<=(n=this.g.Qa(d,this.li))&&this.ed.set(n,-1),this.g.pd(d,!1)),m=p,this.g.Kf(m,-1),this.g.br(m)):(this.g.mn(p,!0),this.g.Xj(p,m),this.g.Kf(p,d),this.g.Yg(p,this.g.Na(d)),this.g.ep(p,!1),l+=m,o++)}for(this.g.Tl(this.Y,o),this.g.Vj(this.Y,l),u=0,a=this.g.ld;a!=-1;a=this.g.ve(a))u+=this.g.I(a);this.g.WB(u)},b.wy=function(u,a,n,o){return new b(a,o).vy(u,n)},b.clip=function(u,a,n,o,l){return b.Pu(u,a,null,n,o,l)},b.Pu=function(u,a,n,o,l,p){var d=u.K();if(d==33)return l=u.D(),a.contains(l)?u:u.Ja();if(d==197)return l=new c.l,u.A(l),l.Fa(a)?(a=new c.Hh,u.copyTo(a),a.Yo(l),a):u.Ja();if(u.B())return u;if(a.B())return u.Ja();var m=new c.l;if(u.yc(m),a.contains(m))return u;if(!a.isIntersecting(m))return u.Ja();if((n!=null||isNaN(o))&&c.ta.oy(n,a,!1),!c.ba.zj(d))throw c.i.O();if((n=u.Cb)!=null&&(n=n.Gk)!=null){if((n=n.So(a))==1){if(d!=1736)throw c.i.ga("internal error");return(u=new c.Ea(u.description)).vp(a),u}if(n==0)return u.Ja()}switch(d){case 550:for(p=null,d=u.I(),n=u.vb(0),o=0,l=new c.h,m=0;m<d;m++)n.uc(2*m,l),a.contains(l)||(o==0&&(p=u.Ja()),o<m&&p.Gd(u,o,m),o=m+1);return 0<o&&p.Gd(u,o,d),o==0?u:p;case 1736:case 1607:return b.wy(u,a,l,p);default:throw c.i.ga("internal error")}},b.prototype.Oh=function(u,a){var n=new c.h;return this.g.D(u,n),u=new c.h,this.g.D(a,u),n.compare(u)},b}();c.ti=C}(W||(W={})),function(c){var C=new c.h,b=function(){function a(n,o,l,p,d){this.Rm=new c.h,this.Ek=new c.h,this.Ri=new c.h,this.g=n,this.Cw=l,this.oo=p,this.Rm=o,this.Al=d,this.Ek.Sc(),this.Ri.Sc()}return a.prototype.rE=function(n){this.g.D(n,this.Ek),n=c.P.truncate((this.Ek.x-this.Rm.x)*this.oo+.5);var o=c.P.truncate((this.Ek.y-this.Rm.y)*this.oo+.5);return u.dG(n,o)},a.prototype.ez=function(n){return this.g.Qa(n,this.Al)},a.prototype.Ky=function(n,o){return this.g.D(n,this.Ek),this.g.D(o,this.Ri),u.Ev(this.Ek.x,this.Ek.y,this.Ri.x,this.Ri.y,this.Cw)},a}();c.kY=function(){};var u=function(){function a(){this.Rm=new c.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.ro=this.Al=-1}return a.cQ=function(n,o){var l=new a;return l.g=n,l.ra=o,l.Cw=o*o,l.bw=2*o,l.oo=1/l.bw,l.vO()},a.Ev=function(n,o,l,p,d){return(n-=l)*n+(o-=p)*o<=d},a.dG=function(n,o){return c.P.Vh(o,c.P.Vh(n))},a.prototype.xO=function(n,o){this.g.Hc(n,C);for(var l=(C.y-this.Rm.y)*this.oo,p=c.P.truncate((C.x-this.Rm.x)*this.oo),d=c.P.truncate(l),m=l=0;1>=m;m+=1)for(var v=0;1>=v;v+=1){var _=a.dG(p+m,d+v),M=this.zl.kR(_);M!=-1&&(this.rq[l]=M,this.zs[l]=_,l++)}for(p=l-1;1<=p;p--)for(M=this.rq[p],d=p-1;0<=d;d--)if(M==this.rq[d]){this.zs[d]=-1,p!=--l&&(this.zs[p]=this.zs[l],this.rq[p]=this.rq[l]);break}for(d=0;d<l;d++)this.yO(n,this.zs[d],C,this.rq[d],o)},a.prototype.yO=function(n,o,l,p,d){for(var m=new c.h;p!=-1;p=this.zl.yR(p)){var v=this.zl.ka(p);n==v||o!=-1&&this.g.Qa(v,this.Al)!=o||(this.g.Hc(v,m),a.Ev(l.x,l.y,m.x,m.y,this.Cw)&&d.add(p))}},a.prototype.Zm=function(n,o,l){var p=this.g.Qa(n,this.ro),d=this.g.Qa(o,this.ro);return p==-1&&(p=this.Ad.Rh(),this.Ad.addElement(p,n),this.g.Sa(n,this.ro,p)),d==-1?this.Ad.addElement(p,o):this.Ad.Cy(p,d),this.g.Sa(o,this.ro,-2),o=this.QT(n,o),l&&(l=this.mw.rE(n),this.g.Sa(n,this.Al,l)),o},a.OT=function(n,o,l){n.Nb(o),l=n;var p=new c.h;a.PT(n.D(),o.D(),p),l.Db(p)},a.PT=function(n,o,l){var p=n.x;n.x!=o.x&&(p=(1*n.x+1*o.x)/2);var d=n.y;n.y!=o.y&&(d=(1*n.y+1*o.y)/2),l.na(p,d)},a.prototype.QT=function(n,o){var l=new c.h;this.g.D(n,l);var p=new c.h;this.g.D(o,p);var d=this.g.XF(n),m=d+(o=this.g.XF(o)),v=0,_=l.x;l.x!=p.x&&(_=(l.x*d+p.x*o)/m,v++);var M=l.y;return l.y!=p.y&&(M=(l.y*d+p.y*o)/m,v++),0<v&&this.g.Db(n,_,M),this.g.nX(n,m),v!=0},a.prototype.vO=function(){var n=this.g.gd,o=this.g.CF();for(this.Rm=o.hz(),o=Math.max(o.da(),o.S())/2147483646,this.bw<o&&(this.bw=o,this.oo=1/this.bw),this.Ad=new c.cu,this.Ad.Bt(c.P.truncate(this.g.gd/3+1)),this.Ad.hn(c.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.ro=this.g.Hd(),this.mw=new b(this.g,this.Rm,this.Cw,this.oo,this.Al),this.zl=new c.YK(c.P.truncate(4*n/3),this.mw),this.zl.sW(this.g.gd),n=!1,o=this.g.ld;o!=-1;o=this.g.ve(o))for(var l=this.g.Ob(o);l!=-1;l=this.g.Sb(l))for(var p=this.g.Ya(l),d=0,m=this.g.Ka(l);d<m;d++){var v=this.mw.rE(p);this.g.Sa(p,this.Al,v),this.zl.addElement(p,v),p=this.g.V(p)}var _=new c.ja(0);for(_.Jb(10),o=this.g.ld;o!=-1;o=this.g.ve(o))for(l=this.g.Ob(o);l!=-1;l=this.g.Sb(l))for(p=this.g.Ya(l),d=0,m=this.g.Ka(l);d<m;d++){if(this.g.Qa(p,this.ro)!=-2)for(v=this.g.Qa(p,this.Al),this.zl.kd(p,v);this.xO(p,_),_.size!=0;){v=!1;for(var M=0,T=_.size;M<T;M++){var I=_.get(M),O=this.zl.ka(I);this.zl.wd(I),v=this.Zm(p,O,M+1==T)||v}if(n=n||v,_.clear(!1),!v)break}p=this.g.V(p)}return n&&this.pN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.ro),n},a.prototype.pN=function(){for(var n=new c.h,o=this.Ad.je;o!=-1;o=this.Ad.lz(o)){var l=this.Ad.sc(o);for(this.g.D(this.Ad.ka(l),n),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),n)}},a}();c.$t=u}(W||(W={})),function(c){var C=function(){function b(u){u===void 0&&(u=null),this.yg=null,this.Pb=!1,this.yg=u===null?[]:u}return b.prototype.copyTo=function(u){if(u.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.yg.length;a++)u.yg.push(this.yg[a].Pf())},b.prototype.count=function(){return this.yg.length},b.prototype.add=function(u){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.yg.push(u.Pf())},b.prototype.clear=function(){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.yg.length=0},b.prototype.remove=function(u){if(this.Pb)throw c.i.ga("CompositeGeographicTransformation is read-only");this.yg.splice(u,1)},b.prototype.ig=function(){var u=new b;return this.copyTo(u),u},b.prototype.Pf=function(){return this.ig()},b.prototype.transform=function(u,a,n,o){if(u.length<a)throw c.i.ga("invalid Argument");var l=n;for(n=0;n<this.yg.length;n++){var p=this.yg[n];if(p.sm()!=null){var d=p.Vn,m=d?1:0,v=d?p.sm().getGeogcs2():p.sm().getGeogcs1();if(v=l/(v=v.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(v-1))for(l=0;l<a;l++)u[l][0]*=v,u[l][1]*=v;c.GC.geogToGeog(p.sm(),a,u,null,m),l=(d?p.sm().getGeogcs1():p.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(v=l/o,3552713678800501e-30<Math.abs(v-1))for(l=0;l<a;l++)u[l][0]*=v,u[l][1]*=v;return a},b.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof b)||this.yg.length!=u.yg.length)return!1;for(var a=0;a<this.yg.length;a++)if(!this.yg[a].Nb(u.yg[a]))return!1;return!0},b.prototype.ix=function(){this.Pb=!0},b.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",a=0,n=this.count();a<n;++a)u+=this.yg[a].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},b.create=function(){return new b},b}();c.qC=C}(W||(W={})),function(c){var C,b=Math.PI,u=2*Math.PI,a=Math.PI/2,n=function(){function p(){}return p.NO=function(d,m){var v=new p;return v.x=d,v.y=m,v.type=0,v.Wh=0,v},p.cl=function(d){var m=new p;return m.x=d.x,m.y=d.y,m.type=0,m.Wh=0,m},p.MO=function(d){var m=new p;return m.x=d.x,m.y=d.y,m.type=d.type,m.Wh=d.Wh,m},p.Qd=function(d,m,v){var _=new p;return _.x=d.x+m*Math.cos(v),_.y=d.y+m*Math.sin(v),_.type=d.type,_.Wh=d.Wh,_},p.Ru=function(d,m){var v=new p;return v.x=.5*(d.x+m.x),v.y=.5*(d.y+m.y),v.type=d.type,v.Wh=d.Wh,v},p.NE=function(d,m){var v=new p;return v.x=d.x+.001*(m.x-d.x),v.y=d.y+.001*(m.y-d.y),v.type=d.type,v.Wh=d.Wh,v},p}(),o=function(){};(C=c.$K||(c.$K={}))[C.Round=0]="Round",C[C.Bevel=1]="Bevel",C[C.Miter=2]="Miter",C[C.Square=3]="Square";var l=function(){function p(d){this.HA=this.Zb=this.wg=null,this.nd=d}return p.W=function(d,m,v,_,M,T){if(d==null||1>d.Eb())throw c.i.O();return m==0||d.B()?d:((T=new p(T)).lo=d,T.La=m,T.ra=M,T.Mi=v,T.wA=_,T.Qx())},p.prototype.ZL=function(){var d=this.lo,m=d.ac(),v=d.xc(),_=new c.h;return _.vc(v,m),_.normalize(),_.Jv(),_.scale(this.La),m.add(_),v.add(_),_=d.Ja(),d.Ec(m),d.Rc(v),_},p.prototype.YL=function(){var d=this.lo;if(0<this.La&&this.Mi!=2){var m=new c.Ea;return m.bd(d,!1),this.lo=m,this.Qx()}return(d=new c.Hh(d.aa)).X(this.La,this.La),d},p.prototype.nJ=function(d,m,v,_){return(m.x-d.x)*(_.x-v.x)+(m.y-d.y)*(_.y-v.y)},p.prototype.hc=function(d,m){if(m===void 0)this.Zb.push(d),this.gf++;else if(this.gf==0)this.hc(d);else{var v=this.Dw,_=this.wg[m==0?v-1:m-1],M=this.wg[m],T=this.nJ(_,M,this.Zb[this.gf-1],d);0<T?this.hc(d):0>T&&(0<this.nJ(_,M,M,this.Zb[this.gf-1])?(M=this.wg[m==0?v-2:m==1?v-1:m-2],v=n.Qd(_,this.La,Math.atan2(_.y-M.y,_.x-M.x)-a),this.Zb[this.gf-1]=v,this.Mi==1||this.Mi==2?(v=n.Ru(v,_),this.hc(v),v=n.Qd(_,this.La,this.Lv+a),(_=n.Ru(v,_)).type|=256,this.hc(_)):(v=n.Qd(_,this.La,this.Lv+a)).type|=256,this.hc(v),this.hc(d,m)):(v=n.Qd(M,this.La,this.Lv+a),this.hc(v),this.Mi==1||this.Mi==2?(v=n.Ru(v,M),this.hc(v),v=n.Qd(M,this.La,this.Wz-a),(_=n.Ru(v,M)).type|=256,this.hc(_)):(v=n.Qd(M,this.La,this.Wz-a)).type|=256,this.hc(v)))}},p.prototype.gE=function(){var d,m=this.Dw;this.gf=0;var v=.5*this.ra,_=0,M=0;for(d=0;d<m;d++){var T=this.wg[d],I=d==0?this.wg[m-1]:this.wg[d-1],O=d==m-1?this.wg[0]:this.wg[d+1],R=I.x-T.x,L=I.y-T.y,G=O.x-T.x,q=O.y-T.y,D=Math.atan2(L,R),H=Math.atan2(q,G);if(this.Lv=D,this.Wz=H,d==0&&(_=D,M=H),R=R*q-G*L,L=H,H<D&&(H+=u),0<R*this.La)this.Mi==1||this.Mi==2?(D=n.Qd(T,this.La,D+a),this.hc(D),D=n.NE(T,D),this.hc(D),D=n.Qd(T,this.La,H-a),(T=n.NE(T,D)).type|=256,this.hc(T),this.hc(D)):(R=.5*(H-D),R=this.La/Math.abs(Math.sin(R)),D=n.Qd(T,R,.5*(D+H)),this.hc(D,d));else if((512&T.type)!=0){for(R=1-v/Math.abs(this.La),I=1,O=0>this.La?-b:b,-1<R&&1>R&&(.017453292519943295>(L=2*Math.acos(R))&&(L=.017453292519943295),1<(I=c.P.truncate(b/L+1.5))&&(O/=I)),L=D+a,D=n.Qd(T,this.La,L),d==0&&(D.type|=1024),this.hc(D,d),R=this.La/Math.cos(O/2),L+=O/2,(D=n.Qd(T,R,L)).type|=1024,this.hc(D);0<--I;)L+=O,(D=n.Qd(T,R,L)).type|=1024,this.hc(D);(D=n.Qd(T,this.La,H-a)).type|=1024,this.hc(D)}else if(this.Mi==1)D=n.Qd(T,this.La,D+a),this.hc(D,d),D=n.Qd(T,this.La,H-a),this.hc(D);else if(this.Mi==0)for(R=1-v/Math.abs(this.La),I=1,O=H-a-(D+a),-1<R&&1>R&&(.017453292519943295>(L=2*Math.acos(R))&&(L=.017453292519943295),1<(I=c.P.truncate(Math.abs(O)/L+1.5))&&(O/=I)),R=this.La/Math.cos(.5*O),L=D+a+.5*O,D=n.Qd(T,R,L),this.hc(D,d);0<--I;)L+=O,D=n.Qd(T,R,L),this.hc(D);else this.Mi==2?(R=I.x-T.x,L=I.y-T.y,.99999999<(I=(R*(G=O.x-T.x)+L*(q=O.y-T.y))/Math.sqrt(R*R+L*L)/Math.sqrt(G*G+q*q))?(D=n.Qd(T,1.4142135623730951*this.La,H-.25*b),this.hc(D,d),D=n.Qd(T,1.4142135623730951*this.La,H+.25*b),this.hc(D)):(I=Math.abs(this.La/Math.sin(.5*Math.acos(I))))>(O=Math.abs(this.wA*this.La))?(R=.5*(H-D),R=this.La/Math.abs(Math.sin(R)),D=n.Qd(T,R,.5*(D+H)),H=c.h.construct(D.x,D.y),D=c.h.construct(T.x,T.y),(T=new c.h).vc(H,D),(H=new c.h).yW(O/T.length(),T,D),D=(I-O)*Math.abs(this.La)/Math.sqrt(I*I-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(D/T.length()),(D=new c.h).add(H,T),(I=new c.h).vc(H,T),D=n.cl(D),this.hc(D,d),D=n.cl(I),this.hc(D)):(R=.5*(H-D),R=this.La/Math.abs(Math.sin(R)),D=n.Qd(T,R,.5*(D+H)),this.hc(D,d))):(H=L,0<this.La?(H>D&&(H-=u),I=D-H<a):(H<D&&(H+=u),I=H-D<a),I?(L=0>(R=1.4142135623730951*this.La)?D+.25*b:D+.75*b,D=n.Qd(T,R,L),this.hc(D,d),L=0>R?H-.25*b:H-.75*b,D=n.Qd(T,R,L),this.hc(D)):(R=.5*(H-D),R=this.La/Math.abs(Math.sin(R)),H<D&&(H+=u),D=n.Qd(T,R,(D+H)/2),this.hc(D,d)))}return this.Lv=_,this.Wz=M,this.hc(this.Zb[0],0),T=n.MO(this.Zb[this.gf-1]),this.Zb[0]=T,this.oW()},p.prototype.Cu=function(d,m){if(!(2>m))for(var v=0;v<m;v++){var _=this.Zb[d+v];v!=0?this.HA.Ei(c.h.construct(_.x,_.y)):this.HA.Nt(c.h.construct(_.x,_.y))}},p.prototype.$L=function(d,m,v){var _=d.Ca(m),M=d.Wc(m);if(this.Zb=[],this.HA=v,d.ec(m)){for(m=d.Oa(_);d.Oa(M-1).rb(m);)M--;if(2<=M-_){for(this.Dw=M-_,this.wg=[],m=_;m<M;m++)this.wg.push(n.cl(d.Oa(m)));this.gE()&&this.Cu(0,this.gf-1)}}else{for(m=d.Oa(_);_<M&&d.Oa(_+1).rb(m);)_++;for(m=d.Oa(M-1);_<M&&d.Oa(M-2).rb(m);)M--;if(2<=M-_){for(this.Dw=2*(M-_)-2,this.wg=[],(v=n.cl(d.Oa(_))).type|=1536,this.wg.push(v),m=_+1;m<M-1;m++)v=n.cl(d.Oa(m)),this.wg.push(v);for((v=n.cl(d.Oa(M-1))).type|=512,this.wg.push(v),m=M-2;m>=_+1;m--)(v=n.cl(d.Oa(m))).type|=1024,this.wg.push(v);if(this.gE())if(2<=this.Zb.length){for(d=-1,(M=(1024&this.Zb[this.gf-1].type)!=0)||(d=0),m=1;m<this.gf;m++)(_=(1024&this.Zb[m].type)!=0)?M||1<(M=m-1)-d+1&&this.Cu(d,M-d+1):M&&(d=m-1),M=_;M||1<(M=this.gf-1)-d+1&&this.Cu(d,M-d+1)}else d=0,M=this.gf-1,0<=d&&1<=M-d&&this.Cu(d,M-d+1)}}this.wg=null,this.Dw=0,this.Zb=null,this.gf=0},p.prototype.oW=function(){for(var d=!1,m=0;m<this.gf;m++){var v=this.Zb[m];v.sh=m+1,v.uh=m-1,this.Zb[m]=v}for((v=this.Zb[0]).uh=this.gf-2,this.Zb[0]=v,(v=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=v,m=v=0;m<this.gf;m++)if((256&this.Zb[v].type)!=0){var _=this.AP(v);if(_==-1){d=!0;break}v=_}else v=this.Zb[v].sh;return!d&&(this.KO(v),!0)},p.prototype.AP=function(d){for(var m,v,_=this.gf-1,M=d,T=1;T<=_-2;T++){m=M=this.Zb[M].sh,v=d;for(var I=1;I<=T;I++){if(v=this.Zb[v].uh,(256&this.Zb[v].type)==0&&(256&this.Zb[m].type)==0){var O=this.$R(v,m);if(O!=-1)return O}m=this.Zb[m].uh}}return-1},p.prototype.$R=function(d,m){var v=this.Zb[this.Zb[d].uh],_=this.Zb[d],M=this.Zb[this.Zb[m].uh],T=this.Zb[m];if(!this.AW(v,_,M,T))return-1;var I=new o;return this.rQ(v,_,M,T,I)&&!I.WD&&c.P.WJ((_.x-v.x)*(T.y-M.y)-(_.y-v.y)*(T.x-M.x))!=c.P.WJ(this.La)?(v=this.Zb[d].uh,I.cn.type=_.type,I.cn.sh=m,I.cn.uh=v,this.Zb[d]=I.cn,I.cn=this.Zb[m],I.cn.uh=d,this.Zb[m]=I.cn,m):-1},p.prototype.AW=function(d,m,v,_){return Math.max(d.x,m.x)>=Math.min(v.x,_.x)&&Math.max(v.x,_.x)>=Math.min(d.x,m.x)&&Math.max(d.y,m.y)>=Math.min(v.y,_.y)&&Math.max(v.y,_.y)>=Math.min(d.y,m.y)},p.prototype.rQ=function(d,m,v,_,M){M.WD=!1;var T=(m.y-d.y)*(_.x-v.x)-(m.x-d.x)*(_.y-v.y),I=(v.y-d.y)*(m.x-d.x)-(v.x-d.x)*(m.y-d.y);if(0<=(T=T==0?2:I/T)&&1>=T){var O=T;if(T=(_.y-v.y)*(m.x-d.x)-(_.x-v.x)*(m.y-d.y),I=(d.y-v.y)*(_.x-v.x)-(d.x-v.x)*(_.y-v.y),0<=(T=T==0?2:I/T)&&1>=T)return M.cn=n.NO(d.x+T*(m.x-d.x),d.y+T*(m.y-d.y)),M.cn.Wh=v.Wh+O*(_.Wh-v.Wh),O!=0&&O!=1||T!=0&&T!=1||(M.WD=!0),M.NY=T,M.OY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},p.prototype.KO=function(d){for(;this.Zb[d].uh<d;)d=this.Zb[d].uh;var m=0,v=d;do v=this.Zb[v],this.Zb[m]=v,v=v.sh,m++;while(v!=d);this.Zb[m]=this.Zb[0],this.gf=m+1},p.prototype.UC=function(d){var m=this.lo,v=m.Ha();if(v!=null){v.aj();for(var _=-1;v.ab();)_++,this.$L(m,_,d)}},p.prototype.Qx=function(){var d=this.lo.K();return d==322?this.ZL():d==197?this.YL():c.ba.zd(d)?((d=new c.Ua).oc(this.lo,!0),this.lo=d,this.Qx()):d==1607?(d=new c.Ua,this.UC(d),d):d==1736?(d=new c.Ea,this.UC(d),d):null},p}();c.CK=l}(W||(W={})),function(c){var C=function(){function n(o){this.rk=o}return n.prototype.D=function(o,l){this.rk.g.D(o,l)},n.prototype.wd=function(o){var l=this.rk.Ga.ka(o);this.rk.Ga.wd(o,-1),this.rk.g.pd(l,!1)},n}(),b=function(){function n(o){this.rk=o}return n.prototype.D=function(o,l){this.rk.AT.D(o,l)},n.prototype.wd=function(o){this.rk.Ga.wd(o,-1)},n}(),u=function(){function n(o){this.rk=o}return n.prototype.D=function(o,l){l.N(this.rk.DT[o])},n.prototype.wd=function(o){this.rk.Ga.wd(o,-1)},n}(),a=function(){function n(o){o===void 0?(this.Ga=new c.Zj,this.Ga.Ee(20),this.g=new c.hd,this.oT=this.g.Kg(550),this.Us=this.g.wf(this.oT,-1),this.Zh=new C(this)):o instanceof Array?(this.Ga=new c.Zj,this.Ga.Ee(20),this.DT=o,this.Zh=new u(this)):(this.Ga=new c.Zj,this.Ga.Ee(20),this.AT=o,this.Zh=new b(this))}return n.prototype.Ib=function(o){var l=o.K();if(c.Fx.zj(l))this.dN(o);else if(c.Wk.zd(l))this.iN(o);else if(l==197)this.aN(o);else{if(l!=33)throw c.i.O("invalid shape type");this.hN(o)}},n.prototype.XQ=function(){var o=new c.Ta,l=this.Ga.sc(-1),p=new c.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),o),p.nf(o),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),o),p.lineTo(o);return p},n.LO=function(o){var l=new n(o),p=o.I(),d=1,m=new c.h,v=new c.h,_=new c.h;for(o.D(0,m);o.D(d,v),v.Mz(m)&&d<p-1;)d++;for(l.Ga.addElement(0,-1),l.Ga.yn(d),p=d+1;p<o.I();p++)o.D(p,_),(d=l.jC(_))!=-1&&l.Ga.Uj(d,p);for(_=new c.Ta,d=l.Ga.sc(-1),p=new c.Ea(o.description),o.we(l.Ga.ka(d),_),p.nf(_),d=l.Ga.lb(d);d!=-1;d=l.Ga.lb(d))o.we(l.Ga.ka(d),_),p.lineTo(_);return p},n.construct=function(o,l,p){for(var d=new n(o),m=1,v=o[0];o[m].Mz(v)&&m<l-1;)m++;for(d.Ga.addElement(0,-1),d.Ga.yn(m),m+=1;m<l;m++)(v=d.jC(o[m]))!=-1&&d.Ga.Uj(v,m);for(o=0,l=d.Ga.sc(-1);l!=-1;l=d.Ga.lb(l))p[o++]=d.Ga.ka(l);return o},n.DG=function(o,l){var p=o.Ca(l),d=o.Wc(l);if(l=!o.ec(l)&&o.On(l),o=o.vb(0),d*=2,l&&(d-=2),6>d-(p*=2))return!0;l=new c.h;var m=new c.h,v=new c.h;o.uc(p,l),o.uc(p+2,m),o.uc(p+4,v);var _=n.Yu(m,v,l);if(_.rs()||!n.wm(_.value()))return!1;var M=c.h.construct(m.x,m.y),T=new c.h;for(p+=6;p<d;p+=2)if(T.N(m),m.N(v),o.uc(p,v),(_=n.Yu(m,v,l)).rs()||!n.wm(_.value())||(_=n.Yu(M,v,l)).rs()||!n.wm(_.value())||(_=n.Yu(m,v,T)).rs()||!n.wm(_.value()))return!1;return!0},n.prototype.dN=function(o){for(var l=new c.Ta,p=new c.h,d=0;d<o.I();d++){o.D(d,p);var m=this.Er(p);if(m!=-1){o.we(d,l);var v=this.g.hc(this.Us,l);this.Ga.Uj(m,v)}}},n.prototype.aN=function(o){for(var l=new c.Ta,p=new c.h,d=0;4>d;d++){o.gB(d,p);var m=this.Er(p);if(m!=-1){o.If(d,l);var v=this.g.hc(this.Us,l);this.Ga.Uj(m,v)}}},n.prototype.iN=function(o){var l=new c.Ta,p=o.ac();if((p=this.Er(p))!=-1){o.Uo(l);var d=this.g.hc(this.Us,l);this.Ga.Uj(p,d)}p=o.xc(),(p=this.Er(p))!=-1&&(o.Qo(l),o=this.g.hc(this.Us,l),this.Ga.Uj(p,o))},n.prototype.hN=function(o){var l=o.D();(l=this.Er(l))!=-1&&(o=this.g.hc(this.Us,o),this.Ga.Uj(l,o))},n.prototype.Er=function(o){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var p=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return o.Mz(p)||(l=this.Ga.yn(-5)),l}return this.jC(o)},n.prototype.jC=function(o){var l=-1;do{var p=this.Ga.sc(-1),d=this.Ga.Gc(-1),m=this.Ga.ka(p),v=this.Ga.ka(d),_=new c.h,M=new c.h;if(this.Zh.D(m,_),this.Zh.D(v,M),m=c.h.Wq(M,o,_),n.wm(m))l=this.Ga.yn(-1),(_=this.hC(o,d,p))!=p&&this.iC(o,p,this.Ga.xe(_));else if(n.wG(m)){M=this.Ga.uv(-1);var T=this.Ga.sc(-1),I=this.Ga.Gc(-1);for(m=new c.h,v=new c.h;T!=this.Ga.xe(I);){var O=this.Ga.ka(M);this.Zh.D(O,m),O=c.h.Wq(m,o,_),n.wG(O)?(I=M,M=this.Ga.nl(M)):(T=M,M=this.Ga.Zp(M))}if(M=I,_=T,O=this.Ga.ka(M),T=this.Ga.ka(_),this.Zh.D(O,m),this.Zh.D(T,v),_!=p&&(m=c.h.Wq(v,o,m),!n.wm(m)))continue;l=this.Ga.Bu(_,M,-2,!1),this.iC(o,M,d),this.hC(o,_,p)}else this.tb==null&&(this.tb=new c.zb),this.tb.Ec(M),this.tb.Rc(_),0>(_=this.tb.fe(o,!0))?(_=this.Ga.xe(d),this.Ga.wd(d,-1),l=this.Ga.yn(-3),this.hC(o,_,p)):1<_&&(_=this.Ga.lb(p),this.Ga.wd(p,-1),l=this.Ga.Bu(-1,_,-3,!1),this.iC(o,_,d))}while(0);return l},n.prototype.iC=function(o,l,p){if(l!=p){var d=this.Ga.ka(l),m=this.Ga.lb(l),v=new c.h,_=new c.h;for(this.Zh.D(d,v);l!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),d=c.h.Wq(_,o,v),!n.wm(d));)d=l,l=m,v.N(_),m=this.Ga.lb(l),this.Zh.wd(d)}},n.prototype.hC=function(o,l,p){if(l==p)return p;var d=this.Ga.ka(l),m=this.Ga.xe(l),v=new c.h,_=new c.h;for(this.Zh.D(d,v);l!=p&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(m),_),d=c.h.Wq(v,o,_),!n.wm(d));)d=l,l=m,v.N(_),m=this.Ga.xe(l),this.Zh.wd(d);return l},n.Yu=function(o,l,p){var d=new c.Xb;d.set(l.x),d.sub(o.x);var m=new c.Xb;m.set(p.y),m.sub(o.y);var v=new c.Xb;return v.set(l.y),v.sub(o.y),(l=new c.Xb).set(p.x),l.sub(o.x),d.Ag(m),v.Ag(l),d.sub(v),d},n.wm=function(o){return 0>o},n.wG=function(o){return 0<o},n}();c.au=a}(W||(W={})),function(c){var C=function(){function b(u){this.g=null,this.nH=!0,this.nd=u}return b.rU=function(u,a,n){return u=c.ta.Gr(u),c.$t.Ev(a.Ng(),a.kh(),n.Ng(),n.kh(),c.mc.ox(u))},b.wO=function(u,a){var n=new c.Ta;return c.$t.OT(u,a,n),n},b.W=function(u,a,n,o){return(n=new b(n)).g=u,n.ra=a,n.nH=o,n.yM()},b.prototype.hM=function(u){return c.$t.cQ(this.g,u)},b.prototype.mM=function(u){return c.bu.W(this.g,u,this.nd)},b.prototype.yM=function(){var u=this.ra,a=c.ta.Gr(u),n=1.00001*(u=c.ta.lN(u));u*=1.000001;for(var o=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),p=0,d=this.g.cS();;p++){if(p>l)throw c.i.ga("Internal Error: max number of iterations exceeded");var m=this.hM(a);if(o=o||m,this.nH&&(m=this.g.Ip(a,!0,!1)!=0,o=o||m),m=!1,(p==0||d||c.bu.eI(!0,this.g,u,null,this.nd))&&(m=this.mM(n),o=o||m),!m)break;c.np.Bp(this.nd)}return o},b}();c.Uk=C}(W||(W={})),function(c){var C=function(){function u(a){this.ae=this.Nc=null,this.$s=0,this.Vb=a,this.Yz=!0}return u.prototype.wv=function(a,n){var o=this.g.cc(a);if(o==null){if(!this.g.fd(a,n))return null;o=n}return o},u.prototype.Zq=function(){var a;a===void 0&&(a=!1),this.$s++,(a||(4095&this.$s)==0)&&(this.$s=0,c.np.Bp(this.Vb))},u.prototype.hP=function(){var a=this.g.$q(!1),n=!1,o=new c.zb,l=new c.zb,p=new c.l;p.Pa();var d=new c.l;d.Pa();for(var m=new c.Ta,v=new c.NC,_=a.next();_!=-1;_=a.next()){c.np.Bp(this.Vb);var M=null,T=!1;if(!c.ba.Sn(this.g.jc(a.dk))){if((M=this.wv(_,o))==null)continue;if(M.A(p),p.X(this.ra,this.ra),M.Di(this.ra)){if(!M.Di(0))continue;T=!0,M=null}}var I=this.g.$q(a),O=I.next();for(O!=-1&&(O=I.next());O!=-1;O=I.next()){var R=null,L=!1;if(!c.ba.Sn(this.g.jc(I.dk))){if((R=this.wv(O,l))==null)continue;if(R.A(d),R.Di(this.ra)){if(!R.Di(0))continue;L=!0,R=null}}var G=0,q=0;if(M!=null&&R!=null)p.BG(d)&&(v.Po(M),v.Po(R),v.Fa(this.ra,!1),0<(G=v.ql(0))+(q=v.ql(1))&&(this.g.lr(_,v,0,!0),this.g.lr(O,v,1,!0)),v.clear());else if(M!=null){var D=new c.h;if(this.g.D(O,D),p.contains(D)){if(v.Po(M),this.g.Xi(O,m),v.Fz(this.ra,m,!1),0<(G=v.ql(0)))if(this.g.lr(_,v,0,!0),L){for(L=-1,D=this.g.V(O);D!=-1&&D!=O&&(L=D,(R=this.wv(D,l))!=null&&R.Di(0));D=this.g.V(D));for(D=O;D!=-1&&(this.g.Fh(D,v.Cf),D!=L);D=this.g.V(D));}else this.g.Fh(O,v.Cf);v.clear()}}else{if(R==null)continue;if(D=new c.h,this.g.D(_,D),d.X(this.ra,this.ra),d.contains(D)){if(v.Po(R),this.g.Xi(_,m),v.Fz(this.ra,m,!1),0<(q=v.ql(0)))if(this.g.lr(O,v,0,!0),T){for(L=-1,D=this.g.V(_);D!=-1&&D!=_&&(L=D,(R=this.wv(D,l))!=null&&R.Di(0));D=this.g.V(D));for(D=_;D!=-1&&(this.g.Fh(D,v.Cf),D!=L);D=this.g.V(D));}else this.g.Fh(_,v.Cf);v.clear()}}if(G+q!=0){if(G!=0){if((M=this.g.cc(_))==null){if(!this.g.fd(_,o))continue;M=o,o.A(p)}else M.A(p);if(M.Di(this.ra))break}n=!0}}}return n},u.prototype.iP=function(){return this.IU()},u.prototype.IU=function(){return new c.LC().HX(this.g,this.ra)},u.prototype.fI=function(){var a=!1;this.Nc==null&&(this.Nc=new c.Zj);var n=new c.ja(0);n.Jb(this.g.gd+1);for(var o=this.g.$q(),l=o.next();l!=-1;l=o.next())n.add(l);this.g.nx(n,n.size),n.add(-1),o=this.g.Hd(),l=this.g.Hd(),this.ae=new c.OC(this.g,this.ra,!this.Yz),this.Nc.Wo(this.ae);var p=new c.ja(0),d=new c.ja(0),m=0;new c.h;var v=this.g.ud;this.g.wb.rc();for(var _,M,T=this.g.wb.Aa[0].o,I=n.get(m++);I!=-1;){var O=_=T[2*(M=v.U(I,0))],R=M=T[2*M+1];do{var L=v.U(I,2),G=v.U(I,1);if(L!=-1){var q=v.U(L,0),D=T[2*q];0>(R<(q=T[2*q+1])?-1:R>q?1:O<D?-1:O>D?1:0)&&(d.add(I),d.add(L))}G!=-1&&(D=T[2*(q=v.U(G,0))],0>(R<(q=T[2*q+1])?-1:R>q?1:O<D?-1:O>D?1:0)&&(d.add(G),d.add(G))),(D=this.g.Qa(I,o))!=-1&&(p.add(D),this.g.Sa(I,o,-1)),(D=this.g.Qa(I,l))!=-1&&(p.add(D),this.g.Sa(I,l,-1)),(I=n.get(m++))!==-1&&(O=T[2*(R=v.U(I,0))],R=T[2*R+1])}while(I!=-1&&O===_&&R===M);for(O=p.size==1&&d.size==2,D=R=-1,L=0,G=p.size;L<G;L++){q=p.get(L);var H=this.Nc.xe(q);if(H==-1||p.bG(H)||(R=H),(q=this.Nc.lb(q))==-1||p.bG(q)||(D=q),R!=-1&&D!=-1)break}for(this.ae.UJ(M,_),L=0,G=p.size;L<G;L++)q=p.get(L),this.Nc.wd(q,-1);if(p.clear(!1),!O&&R!=-1&&D!=-1&&this.kO(R,D)){a=!0,this.Pi=this.ae.tm();break}for(L=0,G=d.size;L<G;L+=2){if(M=d.get(L),_=d.get(L+1),O?(M=this.Nc.Bu(R,D,M,!0),O=!1):M=this.Nc.addElement(M,-1),this.ae.rg){this.Pi=this.ae.tm(),a=!0;break}this.g.Qa(_,o)==-1?this.g.Sa(_,o,M):this.g.Sa(_,l,M)}if(a)break;d.Dh(0)}return this.g.Ud(o),this.g.Ud(l),a},u.prototype.kO=function(a,n){return this.ae.compare(this.Nc,this.Nc.ka(a),n),a=this.ae.rg,this.ae.Mr(),a},u.sE=function(a){for(var n=a.ld;n!=-1;n=a.ve(n))if(c.ba.Ic(a.jc(n)))return!0;return!1},u.$P=function(a,n,o,l){return!!u.sE(a)&&((n=new u(l)).g=a,n.ra=o,15>a.gd?a=n.hP():n.iP())},u.W=function(a,n,o){return u.$P(a,a.CF(),n,o)},u.eI=function(a,n,o,l,p){if(!u.sE(n))return!1;var d=new u(p);if(d.g=n,d.ra=o,d.Yz=a,d.fI())return l!=null&&l.Yt(d.Pi),!0;var m=new c.Ed;return m.UB(),n.Pc(m),(d=new u(p)).g=n,d.ra=o,d.Yz=a,a=d.fI(),m.UB(),n.Pc(m),!!a&&(l!=null&&l.Yt(d.Pi),!0)},u.Ol=function(a,n){return!(16>(a=a.I()))&&2*a+Math.log(a)*Math.LOG10E/Math.log(2)*n<1*a*n},u.fP=function(a,n,o,l){if(c.ba.Ic(n.K()))return new u(l).gP(a,n,o);throw c.i.ga("crack_A_with_B")},u.prototype.gP=function(a,n,o){var l=new c.l;a.yc(l);var p=new c.l;if(n.yc(p),p.X(o,o),!p.isIntersecting(l))return a;var d=a.Cb,m=null;d!=null&&(m=d.Gb),u.Ol(a,a.I())&&(m=c.ta.lj(a,p));var v=m!=null?m.getIterator():null,_=n.Ha();n=a.Ha();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=[];_.ab();)for(;_.Ia();){var T=_.ia();if(m!=null){for(v.Vo(T,o),d=v.next();d!=-1;d=v.next())if(this.Zq(),n.Wb(m.ka(d),-1),n.Ia()){var I=(d=n.ia()).Fa(T,null,M,null,o);for(d=0;d<I;++d){var O=M[d];if(O!=0&&O!=1){var R=n.xb(),L=new b;L.t=O,L.index=R,p.push(L)}}}}else{var G=new c.l;if(T.yc(G),G.X(o,o),l.isIntersecting(G)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),d=n.ia(),O=new c.l,d.yc(O),O.isIntersecting(G))for(I=d.Fa(T,null,M,null,o),d=0;d<I;++d)(O=M[d])!=0&&O!=1&&(R=n.xb(),(L=new b).t=O,L.index=R,p.push(L))}}}if(p.length==0)return a;for(p=p.sort(b.zy),a=a.Ja(),n.aj();n.ab()&&!n.Ia(););for(o=n.ia(),l=new c.hg,m=-1,d=0,v=p.length;d<v;){for(M=p[d].index,_=d+1;_<v&&p[_].index==M;)++_;for(;n.xb()<M;){if(this.Zq(),T=n.Ia(),O=n.gb,(G=T||!n.Pn()||n.Qn())&&a.oc(o,m!=O),m=O,!T)for(;n.ab()&&!n.Ia(););o=n.ia()}for(M=0;d<_;d++)(O=p[d].t)!=M&&(o.dh(M,O,l),M=O,O=n.gb,a.oc(l.get(),m!=O),m=O);if((G=(T=n.Ia())||!n.Pn()||n.Qn())&&(o.dh(M,1,l),a.oc(l.get(),!1)),T)o=n.ia();else{for(;n.ab()&&!n.Ia(););o=n.Ia()?n.ia():null}d=_}for(o!=null&&(O=n.gb,(G=(T=n.Ia())||!n.Pn()||n.Qn())&&a.oc(o,m!=O),m=O),T=n.Ia();;){if(!T){for(;n.ab()&&!(T=n.Ia()););if(!T)break}o=n.ia(),O=n.gb,(G=(T=n.Ia())||!n.Pn()||n.Qn())&&a.oc(o,m!=O),m=O}return a},u}();c.bu=C;var b=function(){function u(){}return u.zy=function(a,n){return a.index==n.index?a.t>n.t?1:a.t<n.t?-1:0:a.index>n.index?1:-1},u}()}(W||(W={})),function(c){var C;(C=c.EK||(c.EK={}))[C.Left=0]="Left",C[C.Right=1]="Right",C[C.Coincident=2]="Coincident",C[C.Undefined=3]="Undefined",C[C.Uncut=4]="Uncut";var b=function(n,o,l,p,d,m,v,_,M,T,I){this.Y=n,this.ct=o,this.Ps=l,this.tg=p,this.Nm=T,this.Cl=I};c.mY=b;var u=function(){function n(o,l){this.DH=o,this.Ji=l}return n.prototype.kM=function(o,l){var p=new c.h;this.Ji.D(o,p);var d=new c.h;return this.Ji.D(l,d),(p=p.compare(d))!=0?p:(o=this.Ji.Qa(o,this.DH))<(l=this.Ji.Qa(l,this.DH))?-1:o==l?0:1},n}(),a=function(n,o,l,p,d,m,v,_,M){this.tg=n,this.Ps=o,this.IA=l,this.OH=p,this.Gi=d,this.Cl=m,this.Nm=v,this.PH=_,this.GT=M};c.lY=a,c.FK=function(){function n(){}return n.DK=function(o,l,p,d,m,v){if(l.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else if(p.B())o=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{var _=new c.hd;if(_.Ib(l),_.Ib(p),c.Uk.W(_,d,v,!0),_.gd==0)o=new b(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),m.push(o);else{for(l=0,p=_.Hd(),d=_.ld;d!=-1;d=_.ve(d))for(v=_.Ob(d);v!=-1;v=_.Sb(v))for(var M=_.Ya(v),T=0,I=_.Ka(v);T<I;M=_.V(M),T++)_.Sa(M,p,l++);l=n.BM(p,_),n.XL(o,l,_,m)}}},n.BM=function(o,l){for(var p=l.gd,d=new c.ja(0),m=l.ld;m!=-1;m=l.ve(m))for(var v=l.Ob(m);v!=-1;v=l.Sb(v))for(var _=l.Ya(v),M=0,T=l.Ka(v);M<T;_=l.V(_),M++)d.add(_);var I=new u(o,l);d.Wd(0,p,function(Me,xe){return I.kM(Me,xe)}),o=[];var O=[],R=l.Hd(),L=l.Hd();m=l.ld,v=l.ve(m),T=new c.h;var G=new c.h,q=d.get(0),D=l.cd(q),H=l.Rf(D);l.D(q,T);var ee=1;for(_=0;ee<p-1;){var te=!1;for(M=ee;M<p;M++)if(M!=_){var Z=d.get(M),ce=l.cd(Z),ye=l.Rf(ce);if(l.D(Z,G),!T.rb(G))break;H==m&&ye==v&&(te=n.oM(R,L,l,o,O,D,q,ce,Z))}if(te||_==ee-1){if(te&&_==ee-1&&ee--,++_==p)break;q=d.get(_),D=l.cd(q),H=l.Rf(D),l.D(q,T)}te||(ee=_+1)}for(p=[],m=l.ld;m!=-1;m=l.ve(m))for(v=l.Ob(m);v!=-1;v=l.Sb(v))for(d=l.Ya(v),M=0,T=l.Ka(v);M<T;d=l.V(d),M++){if(0<=(_=l.Qa(d,L)))for(;_<O.length&&O[_].tg==d;)p.push(O[_++]);if(0<=(_=l.Qa(d,R)))for(;_<o.length&&o[_].tg==d;)p.push(o[_++])}return l.Ud(R),l.Ud(L),p},n.oM=function(o,l,p,d,m,v,_,M,T){var I=p.tj(v),O=p.tj(M),R=p.Ya(v),L=p.Ya(M),G=p.Na(_),q=p.Na(T),D=!1,H=!1,ee=!1,te=!1;return _!=R&&(T!=L&&(D=n.pM(o,p,d,v,G,M,q)),T!=O&&(H=n.qM(o,p,d,v,G,M,T))),_!=I&&(T!=L&&(ee=n.rM(l,p,m,v,_,M,q,R)),T!=O&&(te=n.sM(l,p,m,v,_,M,T,R))),D&&H&&ee?(o=d.length-1,m[te?m.length-2:m.length-1].Gi==2&&(d[o-1]=d[o],--d.length)):D&&H&&te&&m[m.length-1].Gi==2&&(m=d[d.length-1],--d.length,p.Qa(m.tg,o)==d.length&&p.Sa(m.tg,o,-1)),D||H||ee||te},n.pM=function(o,l,p,d,m,v,_){var M=new c.zb,T=new c.zb,I=[0,0],O=[0,0],R=l.cc(m);return R==null&&(l.fd(m,M),R=M),(M=l.cc(_))==null&&(l.fd(_,T),M=T),2>(R=R.Fa(M,null,I,O,0))&&(d=new a(m,d,I[0],NaN,R,_,v,O[0],NaN),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1)),!0},n.qM=function(o,l,p,d,m,v,_){var M=new c.zb,T=new c.zb,I=[0,0],O=[0,0],R=l.cc(m);return R==null&&(l.fd(m,M),R=M),(M=l.cc(_))==null&&(l.fd(_,T),M=T),2>(R=R.Fa(M,null,I,O,0))&&(d=new a(m,d,I[0],NaN,R,_,v,O[0],NaN),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1),!0)},n.rM=function(o,l,p,d,m,v,_,M){var T=new c.zb,I=new c.zb,O=[0,0],R=[0,0],L=l.cc(m);return L==null&&(l.fd(m,T),L=T),(T=l.cc(_))==null&&(l.fd(_,I),T=I),(L=L.Fa(T,null,O,R,0))==2?(d=new a(m,d,O[0],O[1],L,_,v,R[0],R[1]),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1),!0):(I=!1,m==M&&(d=new a(m,d,O[0],NaN,L,_,v,R[0],NaN),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1),I=!0),I)},n.sM=function(o,l,p,d,m,v,_,M){var T=new c.zb,I=new c.zb,O=[0,0],R=[0,0],L=l.cc(m);return L==null&&(l.fd(m,T),L=T),(T=l.cc(_))==null&&(l.fd(_,I),T=I),(L=L.Fa(T,null,O,R,0))==2?(d=new a(m,d,O[0],O[1],L,_,v,R[0],R[1]),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1),!0):(I=!1,m==M&&(d=new a(m,d,O[0],NaN,L,_,v,R[0],NaN),p.push(d),0>(d=l.Qa(m,o))&&l.Sa(m,o,p.length-1),I=!0),I)},n.XL=function(o,l,p,d){var m=[];m[0]=new c.h,m[1]=new c.h,m[2]=new c.h,m[3]=new c.h;var v=new c.h,_=new c.h,M=new c.h,T=new c.h,I=null;d!=null&&(I=new c.hg).Qr();var O=0,R=null,L=new c.zb;new c.zb;for(var G=p.Ob(p.ld);G!=-1;G=p.Sb(G)){for(var q=4,D=-1,H=-1,ee=-1,te=-1,Z=NaN,ce=!0,ye=!1,Me=!0,xe=!0,be=!0,Ce=0,Ze=G,Qe=0,_t=p.Ya(G),xt=p.Ka(G),Ei=0;Ei<xt;_t=p.V(_t),Ei++){var Bt=p.cc(_t);if(Bt==null){if(!p.fd(_t,L))continue;Bt=L}H==-1&&(H=_t);for(var Ue=0;O<l.length&&_t==l[O].tg;){D=l[O].Ps;var Nt=l[O].tg,dt=l[O].IA,hi=l[O].Nm,Qt=l[O].Cl,jr=l[O].PH;if(l[O].Gi==2){if(ye||(Ze=D,H=Nt,Qe=dt,ee=hi,te=Qt,Z=jr,q=2,d!=null?R=new c.Ua:Ce=0,be=!1,xe=!0),dt=l[O].OH,jr=l[O].GT,d!=null?(Bt.dh(Ue,l[O].OH,I),R.oc(I.get(),xe)):Ce++,Ue=dt,ye=!0,xe=ce=!1,O+1==l.length||l[O+1].Gi!=2||l[O+1].tg==Nt&&l[O+1].IA!=Ue){if(d!=null){var wt=new b(R,2,D,Nt,dt,q,Ze,H,Qe,hi,Qt);d.push(wt)}else null.add(Ce);Ze=D,H=Nt,Qe=dt,ee=hi,te=Qt,Z=jr,q=2,ye=ce=!1,xe=be=!0}}else{var Ji=p.V(Nt);if(O<l.length-1&&l[O+1].tg==Ji&&l[O+1].Cl==Qt&&l[O+1].Gi==2)dt!=Ue&&(be&&(d!=null?R=new c.Ua:Ce=0),ce=0<O&&l[O-1].Ps==D?q==1?0:q==0?1:3:3,d!=null?(Bt.dh(Ue,dt,I),R.oc(I.get(),xe),wt=new b(R,ce,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):(Ce++,null.add(Ce)),Ue=dt,Ze=D,H=Nt,Qe=dt,ee=hi,te=Qt,Z=jr,q=ce,ce=Me=!1,xe=be=!0);else if(!n.wM(o,p,l,O,v,_)){n.tM(p,l,O,G,_t,M,T);var at=!1;if(Ji=!1,wt=!0,!(v.rb(M)||_.rb(M)||v.rb(T)||_.rb(T))){m[0].N(v),m[1].N(_),m[2].N(M),m[3].N(T),m.sort(c.h.pu);var hu=m[0],el=m[1],cu=m[2],Bh=m[3];hu.rb(v)?el.rb(_)?o?(Ji=at=!0,wt=!1):at=!1:Bh.rb(_)?o?wt=Ji=at=!0:at=!1:(at=!0,wt=el.rb(M)):el.rb(v)?cu.rb(_)?o?(Ji=at=!0,wt=!1):at=!1:hu.rb(_)?o?wt=Ji=at=!0:at=!1:(at=!0,wt=cu.rb(M)):cu.rb(v)?Bh.rb(_)?o?(Ji=at=!0,wt=!1):at=!1:el.rb(_)?o?wt=Ji=at=!0:at=!1:(at=!0,wt=Bh.rb(M)):hu.rb(_)?o?(Ji=at=!0,wt=!1):at=!1:cu.rb(_)?o?wt=Ji=at=!0:at=!1:(at=!0,wt=hu.rb(M))}at&&(at=_t==Nt,(dt!=Ue||at&&Ue==0)&&(be&&(d!=null?R=new c.Ua:Ce=0),d!=null?(Bt.dh(Ue,dt,I),R.oc(I.get(),xe)):Ce++),wt?q!=1?((dt!=Ue||at&&Ue==0)&&(d!=null?(wt=new b(R,1,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce)),Ji?(O>=l.length-2||l[O+2].Ps!=D)&&(q=0):q=1):((dt!=Ue||at&&Ue==0)&&(d!=null?(wt=new b(R,3,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce)),q=1):q!=0?((dt!=Ue||at&&Ue==0)&&(d!=null?(wt=new b(R,0,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce)),Ji?(O>=l.length-2||l[O+2].Ps!=D)&&(q=1):q=0):((dt!=Ue||at&&Ue==0)&&(d!=null?(wt=new b(R,3,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce)),q=0),(dt!=Ue||at&&Ue==0)&&(Ue=dt,Ze=D,H=Nt,Qe=dt,ee=hi,te=Qt,Z=jr,ce=Me=!1,xe=be=!0))}}O++}Ue!=1&&(be&&(d!=null?R=new c.Ua:Ce=0),d!=null?(Bt.dh(Ue,1,I),R.oc(I.get(),xe)):Ce++,xe=be=!1,Me=!0)}Me&&(dt=1,Nt=p.tj(G),Nt=p.Na(Nt),Qt=hi=-1,jr=NaN,ce?d!=null?(wt=new b(R,4,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce):(ce=q==1?0:q==0?1:3,d!=null?(wt=new b(R,ce,D,Nt,dt,q,Ze,H,Qe,hi,Qt),d.push(wt)):null.add(Ce)))}},n.wM=function(o,l,p,d,m,v){var _=p[d].PH;if(_==1)return n.uM(o,l,p,d,m,v);if(_==0)return n.vM(o,l,p,d,m,v);throw c.i.Ra()},n.uM=function(o,l,p,d,m,v){var _=new c.zb,M=p[d].tg,T=p[d].Nm,I=p[d].Cl,O=-1,R=-1,L=-1,G=-1;if(!o&&0<d){var q=p[d-1];O=q.tg,R=q.Nm,L=q.Cl,G=q.Gi}var D=-1,H=-1,ee=-1,te=-1;d<p.length-1&&(D=(q=p[d+1]).tg,H=q.Nm,ee=q.Cl,te=q.Gi);var Z=l.V(M);return q=l.V(I),o?d==p.length-1||D!=M||H!=T||ee!=q||te==2?((o=l.cc(I))==null&&(l.fd(I,_),o=_),v.N(o.jg()),m.nt(v),v.normalize(),m.normalize(),!1):((o=l.cc(I))==null&&(l.fd(I,_),o=_),m.N(o.jg()),(o=l.cc(q))==null&&(l.fd(q,_),o=_),v.N(o.jg()),m.Uq(),v.normalize(),m.normalize(),!1):0<d&&O==M&&R==T&&L==q&&G==2||d<p.length-1&&D==Z&&H==T&&ee==q&&te==2?((o=l.cc(I))==null&&(l.fd(I,_),o=_),v.N(o.jg()),m.nt(v),v.normalize(),m.normalize(),!1):!(d<p.length-1&&D==M&&H==T&&ee==q)||((o=l.cc(I))==null&&(l.fd(I,_),o=_),m.N(o.jg()),(o=l.cc(q))==null&&(l.fd(q,_),o=_),v.N(o.jg()),m.Uq(),v.normalize(),m.normalize(),!1)},n.vM=function(o,l,p,d,m,v){var _=new c.zb,M=p[d].tg,T=p[d].Nm,I=p[d].Cl,O=-1,R=-1,L=-1,G=-1;if(!o&&d<p.length-1){var q=p[d+1];O=q.tg,R=q.Nm,L=q.Cl,G=q.Gi}var D=-1,H=-1,ee=-1;q=-1,0<d&&(D=(q=p[d-1]).tg,H=q.Nm,ee=q.Cl,q=q.Gi);var te=l.V(M),Z=l.Na(I);return o?d!=0&&D==M&&H==T&&ee==Z&&q!=2||((o=l.cc(I))==null&&(l.fd(I,_),o=_),v.N(o.jg()),m.nt(v),v.normalize(),m.normalize(),!1):!(0<d&&D==M&&H==T&&ee==Z&&q==2||d<p.length-1&&O==te&&R==T&&L==Z&&G==2)||((o=l.cc(I))==null&&(l.fd(I,_),o=_),v.N(o.jg()),m.nt(v),v.normalize(),m.normalize(),!1)},n.tM=function(o,l,p,d,m,v,_){var M=new c.zb,T=o.cc(m);if(T==null&&(o.fd(m,M),T=M),l=(p=l[p]).tg,p=p.IA,m=o.V(l),p==1)v.N(T.jg()),m!=-1&&m!=o.tj(d)?((T=o.cc(m))==null&&(o.fd(m,M),T=M),_.N(T.jg()),(T=o.cc(l))==null&&o.fd(l,M)):_.N(v),v.Uq(),_.normalize(),v.normalize();else{if(p!=0)throw c.i.Ra();_.N(T.jg()),v.nt(_),_.normalize(),v.normalize()}},n}()}(W||(W={})),function(c){var C;(C=c.WL||(c.WL={}))[C.Linear=0]="Linear",C[C.Angular=1]="Angular",C[C.Area=2]="Area";var b=function(){function d(m,v,_){this.od=v,this.ci=_,this.pA=m}return d.prototype.Nb=function(m){return m instanceof d&&this.ci===m.ci},d.VF=function(m){return m.od!==0?null:m.pA===-1?new d(-1,2,m.ci*m.ci):d.ah(l[m.pA])},d.ah=function(m){return(m=o[m])===void 0?null:m},d.TO=function(m,v,_){var M=null;if(_!=null)try{_.values[0]==="EPSG"&&(M=d.ah(parseInt(_.values[1])))}catch{}return M===null&&(M=new d(-1,m,v)),M},d.prototype.Fc=function(){return this.pA},d.prototype.wF=function(m){if(m.od!=this.od)throw c.i.Hb();return this.ci/m.ci},d.Ph=function(m,v,_){return v.wF(_)*m},d.RE=function(m,v,_,M,T){for(_=_.wF(M),M=0;M<v;M++)T[M]=m[M]*_},d}();c.Uc=b;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],a=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],o=[],l=[],p=0;p<u.length;p+=2)o[u[p]]=new b(u[p],2,u[p+1]);for(u=null,p=0;p<a.length;p+=2)o[a[p]]=new b(a[p],1,a[p+1]);for(a=null,p=0;p<n.length;p+=3)o[n[p]]=new b(n[p],0,n[p+1]),l[n[p]]=n[p+2];n=null}(W||(W={})),function(c){var C=function(){function b(){this.yb=this.pb=0}return b.prototype.set=function(u,a){a!==void 0?(this.pb=u,this.yb=a):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},b.prototype.value=function(){return this.pb},b.prototype.add=function(u){var a=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(a),this.pb=a,this.yb=u},b.prototype.eN=function(){var u=this.pb+1,a=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=a},b.prototype.YM=function(u,a){this.pb=u.pb+a.pb,this.yb=u.yb+a.yb+2220446049250313e-31*Math.abs(this.pb)},b.prototype.sub=function(u){if(typeof u=="number"){var a=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(a)}else a=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(a);this.pb=a,this.yb=u},b.prototype.Ag=function(u){var a=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Oo=function(u){var a=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(a),this.pb=a},b.prototype.Ml=function(u,a){var n=Math.abs(u.pb)*Math.abs(a.pb);this.yb=u.yb*Math.abs(a.pb)+a.yb*Math.abs(u.pb)+u.yb*a.yb+2220446049250313e-31*Math.abs(n),this.pb=n},b.prototype.lm=function(u){var a=Math.abs(u.pb),n=this.pb/u.pb,o=(this.yb+Math.abs(n)*u.yb)/a;u.yb>.01*a&&(o*=1+(1+(u=u.yb/a))*u),this.pb=n,this.yb=o+2220446049250313e-31*Math.abs(n)},b.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);a+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?a=u=NaN:(u=0,a=Math.sqrt(this.yb));this.pb=u,this.yb=a},b.prototype.sin=function(u){var a=Math.sin(u.pb),n=Math.cos(u.pb);this.pb=a,a=Math.abs(a),this.yb=(Math.abs(n)+.5*a*u.yb)*u.yb+2220446049250313e-31*a},b.prototype.cos=function(u){var a=Math.sin(u.pb),n=Math.cos(u.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(a)+.5*n*u.yb)*u.yb+2220446049250313e-31*n},b.prototype.qg=function(){return Math.abs(this.pb)<=this.yb},b.prototype.rs=function(){return this.qg()&&this.yb!=0},b}();c.Xb=C}(W||(W={}));var wi=new W.h,Xn=new W.h,Ts=new W.h,$s=new W.h,oo=new W.h;(function(c){var C,b;(b=C||(C={}))[b.closedPath=1]="closedPath",b[b.exteriorPath=2]="exteriorPath",b[b.ringAreaValid=4]="ringAreaValid";var u=function(){function a(n,o,l,p,d,m,v){o!==void 0?(this.ib=n,this.dk=o,this.dl=l,this.ki=p,this.za=m,this.cA=v,this.gw=d):(this.ib=n.ib,this.dk=n.dk,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.WG=!0}return a.prototype.next=function(){return this.WG?(this.WG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.ST()):-1},a.prototype.ST=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.dk!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.dk=this.ib.ve(this.dk),this.dk==-1)break;this.cA&&!c.ba.Ic(this.ib.jc(this.dk))||(this.dl=this.ib.Ob(this.dk))}return-1},a.uP=function(n,o,l,p,d,m,v){return new a(n,o,l,p,d,m,v)},a}();c.rY=u,C=function(){function a(){this.ko=this.Cm=this.xk=this.dd=this.Dk=this.wo=this.Qi=this.md=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.ld=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return a.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},a.prototype.Zg=function(n,o){if(this.Te==null){if(o==null)return;this.Te=[];for(var l=0,p=this.wb.I();l<p;l++)this.Te.push(null)}this.Te[n]=o},a.prototype.cp=function(n,o){this.md.T(n,1,o)},a.prototype.bp=function(n,o){this.md.T(n,2,o)},a.prototype.PB=function(n,o){this.md.T(n,6,o)},a.prototype.Up=function(n){return this.md.U(n,6)},a.prototype.gx=function(n,o){this.md.T(n,7,o)},a.prototype.sv=function(n){return this.md.U(n,0)},a.prototype.IJ=function(n,o){this.dd.T(n,1,o)},a.prototype.MJ=function(n,o){this.dd.T(n,0,o)},a.prototype.DF=function(n){return this.dd.U(n,7)},a.prototype.$o=function(n,o){this.dd.T(n,3,o)},a.prototype.ap=function(n,o){this.dd.T(n,4,o)},a.prototype.mU=function(n){this.dd==null&&(this.dd=new c.ad(8));var o=this.dd.De();return this.dd.T(o,2,n),this.dd.T(o,5,0),this.dd.T(o,6,0),this.dd.T(o,7,o),o},a.prototype.IQ=function(n){this.dd.kd(n)},a.prototype.oU=function(n){this.md==null&&(this.md=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.wo=new c.ce(0));var o=this.md.De();return this.md.T(o,0,o),this.md.T(o,3,0),this.md.T(o,6,0),this.gx(o,n),o>=this.Qi.size&&(n=16>o?16:c.P.truncate(3*o/2),this.Qi.resize(n),this.wo.resize(n)),this.Qi.set(o,0),this.wo.set(o,0),o},a.prototype.mF=function(n){this.md.kd(n)},a.prototype.Qy=function(n){this.ud.kd(n),this.gd--},a.prototype.iI=function(n){this.md==null&&(this.md=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.wo=new c.ce(0));var o=this.ud.De(),l=0<=n?n:o;if(this.ud.T(o,0,l),0>n){if(l>=this.wb.I()){if(n=16>l?16:c.P.truncate(3*l/2),this.wb.resize(n),this.Te!=null)for(var p=0;p<n;p++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(o,4,2*l),this.gd++,o},a.prototype.yj=function(n,o,l){var p=o!=-1?this.Na(o):this.tj(n),d=p!=-1?this.V(p):-1,m=this.iI(l==null?this.gd:-1),v=this.Va(m);return l!=null&&this.wb.It(v,l),this.cj(m,n),this.Cc(m,d),this.Dc(m,p),d!=-1&&this.Dc(d,m),p!=-1&&this.Cc(p,m),l=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,m),o==p&&this.Kf(n,m),l&&d==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(n,this.Ka(n)+1),n=this.Rf(n),this.Vj(n,this.I(n)+1),m},a.prototype.pm=function(){return this.ko==null&&(this.ko=new c.Ta(this.wb.description)),this.ko},a.prototype.Zo=function(n,o){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(o==1?134217728:0))},a.prototype.Jn=function(n){return(134217728&this.dd.U(n,2))!=0?1:0},a.prototype.bN=function(n){var o=this.Kg(n.K(),n.description);return n.K()==1736&&this.Zo(o,n.Jn()),this.OD(o,n),o},a.prototype.cN=function(n){var o=this.Kg(n.K(),n.description);return this.PD(o,n),o},a.prototype.PV=function(n,o){this.md==null&&(this.md=new c.ad(8),this.ud=new c.ad(5),this.Qi=new c.ce(0),this.wo=new c.ce(0)),this.md.Ee(this.md.Jg+n),this.ud.Ee(this.ud.Jg+o),this.Qi.Jb(this.Qi.size+n),this.wo.Jb(this.wo.size+n)},a.prototype.OD=function(n,o){this.PV(o.ea(),o.I()),this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&o.Se!=null,p=0,d=o.ea();p<d;p++)if(!(2>o.Ka(p))){var m=this.wf(n,-1);this.mn(m,o.ec(p));for(var v=o.Ca(p),_=o.Wc(p);v<_;v++){var M=this.yj(m,-1,null);if(l)if(M=this.Va(M),(1&o.TF(v))!=0)this.Zg(M,null);else{var T=new c.hg;o.cc(v,T,!0),this.Zg(M,T.get())}}}},a.prototype.PD=function(n,o){this.Kl.Gd(o,0,o.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var l=0;for(o=o.I();l<o;l++)this.yj(n,-1,null)},a.prototype.FX=function(n,o,l){var p=this.V(n);if(p==-1)throw c.i.Ra();for(var d=this.pm(),m=this.cd(n),v=0,_=o.ql(l);v<_;v++){var M=this.Va(n),T=this.V(n),I=o.Xp(l,v);v==0&&(I.Uo(d),this.Fh(n,d)),I.K()==322?this.Zg(M,null):this.Zg(M,c.ba.ig(I)),I.Qo(d),v<_-1?n=this.yj(m,T,d):this.Fh(p,d)}},a.prototype.EX=function(n,o,l){var p=this.V(n);if(p==-1)throw c.i.Ra();for(var d=this.pm(),m=this.cd(n),v=0,_=o.ql(l);v<_;v++){var M=this.Va(n),T=this.V(n),I=o.Xp(l,_-v-1);v==0&&(I.Qo(d),this.Fh(n,d)),I.K()==322?this.Zg(M,null):this.Zg(M,c.ba.ig(I)),I.Uo(d),v<_-1?n=this.yj(m,T,d):this.Fh(p,d)}},a.prototype.CF=function(){var n=new c.l;n.Pa();for(var o=this.$q(),l=new c.h,p=!0,d=o.next();d!=-1;d=o.next())this.D(d,l),p?n.$b(l.x,l.y):n.Mk(l.x,l.y),p=!1;return n},a.prototype.Ib=function(n){var o=n.K();if(c.ba.Ic(o))return this.bN(n);if(o==550)return this.cN(n);throw c.i.Ra()},a.prototype.oN=function(n,o){var l=o.K();if(c.ba.Ic(l))this.OD(n,o);else{if(l!=550)throw c.i.Ra();this.PD(n,o)}},a.prototype.gN=function(n,o){var l=this.Kg(1736,n.description);if(2>n.Ka(o))return l;this.Kl.Gd(n,n.Ca(o),n.Wc(o)),this.jt=this.wb.vb(0);var p=this.wf(l,-1);this.mn(p,n.ec(o)||!0);var d=this.Te!=null&&n.Se!=null,m=n.Ca(o);for(o=n.Wc(o);m<o;m++){var v=this.yj(p,-1,null);if(d)if(v=this.Va(v),(1&n.TF(m))!=0)this.Zg(v,null);else{var _=new c.hg;n.cc(m,_,!0),this.Zg(v,_.get())}}return l},a.prototype.Ke=function(n){var o=this.jc(n),l=c.TK.Kg(o,this.Kl.description),p=this.I(n);if(p==0)return l;if(c.ba.Ic(o)){o=this.ea(n);for(var d=c.Zc.Qh(o+1),m=c.Zc.Or(o+1,0),v=l.description,_=0,M=v.Ba;_<M;_++){for(var T=v.qd(_),I=c.ua.Wa(T),O=c.Zc.SE(T,p),R=this.wb.vb(T),L=0,G=0,q=0,D=this.Ob(n);D!=-1;D=this.Sb(D)){var H=0;this.ec(D)&&(H|=1),this.QS(D)&&(H|=4),H!=0&&m.tJ(G,H);var ee=this.Ka(D);if(d.write(G++,q),q+=ee,T==0){ee=R;var te=O,Z=new c.h;for(H=this.Ya(D);L<q;H=this.V(H),L++){var ce=this.Va(H);ee.uc(2*ce,Z),te.Vt(2*L,Z)}}else for(H=this.Ya(D);L<q;H=this.V(H),L++)for(ce=this.Va(H),te=0;te<I;te++)Z=R.Bg(ce*I+te),O.rr(L*I+te,Z)}l.kn(T,O),d.write(o,p)}l.JJ(m),l.KJ(d),l.Qc(16777215)}else if(o==550){for(v=l.description,l.resize(p),_=0,M=v.Ba;_<M;_++){for(T=v.qd(_),I=c.ua.Wa(T),O=l.vb(T),R=this.wb.vb(T),L=0,D=this.Ob(n),ee=this.Ka(D),H=this.Ya(D);L<ee;H=this.V(H),L++)for(ce=this.Va(H),te=0;te<I;te++)Z=R.Bg(ce*I+te),O.rr(L*I+te,Z);l.kn(T,O)}l.Qc(16777215)}return l},a.prototype.vB=function(n){for(var o=this.Ob(n);o!=-1;o=this.ar(o));o=this.IR(n);var l=this.ve(n);o!=-1?this.IJ(o,l):this.ld=l,l!=-1?this.MJ(l,o):this.sw=o,this.IQ(n)},a.prototype.Kg=function(n,o){return o===void 0?this.UE(n,c.ee.og()):this.UE(n,o)},a.prototype.UE=function(n,o){return n=this.mU(n),this.wb==null?this.wb=this.Kl=new c.de(o):this.Kl.Ll(o),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.ld==-1?this.ld=n:(this.MJ(n,this.sw),this.IJ(this.sw,n)),this.sw=n},a.prototype.ve=function(n){return this.dd.U(n,1)},a.prototype.IR=function(n){return this.dd.U(n,0)},a.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},a.prototype.BJ=function(n,o,l){o=this.xk[o],(n=this.DF(n))>=o.size&&o.resize(Math.max(c.P.truncate(1.25*n),16),-1),o.write(n,l)},a.prototype.EF=function(n,o){return(n=this.DF(n))<(o=this.xk[o]).size?o.read(n):-1},a.prototype.VE=function(){this.xk==null&&(this.xk=[]);for(var n=0;n<this.xk.length;n++)if(this.xk[n]==null)return this.xk[n]=c.Zc.Qh(0),n;return this.xk.push(c.Zc.Qh(0)),this.xk.length-1},a.prototype.pW=function(n){this.xk[n]=null},a.prototype.Ob=function(n){return this.dd.U(n,3)},a.prototype.mv=function(n){return this.dd.U(n,4)},a.prototype.I=function(n){return this.dd.U(n,5)},a.prototype.ea=function(n){return this.dd.U(n,6)},a.prototype.Ip=function(n,o,l){for(var p=0,d=this.ld;d!=-1;d=this.ve(d)){var m=this.jc(d);if(c.ba.Ic(m)&&(!l||m==1736)){m=this.jc(d)==1736;for(var v=this.Ob(d);v!=-1;){for(var _=0,M=this.Ya(v);_<c.P.truncate(this.Ka(v)/2);){var T=this.V(M);if(T==-1)break;var I=this.Va(M),O=this.Uh(I);O!=null?I=O.Rb():(O=this.Va(T),I=this.wb.Ar(I,O)),I<=n?(I==0?p==0&&(p=-1):p=1,T!=this.tj(v)&&(this.fC(T,M),this.pd(T,!0))):M=this.V(M),_++}for(_=this.Ya(v),M=this.ec(v)?_:this.tj(v);0<this.Ka(v);){if((T=this.Na(M))==-1){this.pd(M,!0),p==0&&(p=-1);break}var R=this.Va(T);if((O=this.Uh(R))!=null?I=O.Rb():(I=this.Va(M),I=this.wb.Ar(I,R)),I<=n)I==0?p==0&&(p=-1):p=1,this.fC(T,M),this.pd(T,!1),_==T&&(_=this.Ya(v));else if((M=this.Na(M))==_)break}M=this.Ka(v),o&&(m?3>M:2>M)?(v=this.ar(v),p=0<M?1:p==0?-1:p):v=this.Sb(v)}}}return p},a.prototype.fC=function(n,o){var l=this.Va(n),p=this.Va(o);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(p,l)),this.di!=null){for(p=0,l=this.di.length;p<l;p++)if(this.di[p]!=null){var d=this.Qa(n,p);d!=-1&&this.Sa(o,p,d)}}},a.prototype.Wl=function(n,o,l){var p=0,d=this.V(n);if(d==-1)throw c.i.Ra();for(var m=this.Va(n),v=this.Va(d),_=this.Uh(m),M=_==null?this.wb.Ar(m,v):_.Rb(),T=0;T<l;T++){var I=o[T];if(0<I&&1>I){var O=I;_!=null&&(O=0<M?_.Tx(I)/M:0),this.wb.eD(m,v,O,this.pm());var R=this.yj(this.cd(n),d,this.pm());if(p++,_!=null){var L=_.fl(0,I);O=this.Va(this.Na(R)),this.Zg(O,L),this.mf(R,L.xc()),T!=l-1&&o[T+1]!=1||(I=_.fl(I,1),this.Zg(O,I))}}}return p},a.prototype.DX=function(n,o,l){var p=0,d=this.V(n);if(d==-1)throw c.i.ga("internal error");var m=this.Va(n),v=this.Va(d),_=this.Uh(m),M=_==null?this.wb.Ar(m,v):_.Rb(),T=0;n=this.cd(n);for(var I=0;I<l;I++){var O=o[I];if(T<O&&1>O){var R=O;if(_!=null&&(R=0<M?_.Tx(O)/M:0),this.wb.eD(m,v,R,this.pm()),R=this.rS(n,d,this.pm()),p++,_!=null){T=_.fl(T,O);var L=this.Va(this.Na(R));this.Zg(L,T),this.Db(R,T.qa,T.ma),I!=l-1&&o[I+1]!=1||(T=_.fl(O,1),R=this.Va(R),this.Zg(R,T))}}T=O}return p},a.prototype.rS=function(n,o,l){var p=o!=-1?this.Na(o):this.tj(n),d=p!=-1?this.V(p):-1,m=this.iI(l==null?this.gd:-1),v=this.Va(m);return l!=null&&this.wb.It(v,l),this.cj(m,n),this.Cc(m,d),this.Dc(m,p),d!=-1&&this.Dc(d,m),p!=-1&&this.Cc(p,m),l=this.ec(n),p=this.Ya(n),o==-1&&this.Yg(n,m),o==p&&(l&&p!=-1||this.Kf(n,m)),l&&d==-1&&(this.Cc(m,m),this.Dc(m,m)),this.Xj(n,this.Ka(n)+1),n=this.Rf(n),this.Vj(n,this.I(n)+1),m},a.prototype.oE=function(n,o,l){var p=this.Va(o),d=this.Va(l);if(0>p||d>this.gd-1)throw c.i.O("invalid call");if(p>d&&!this.ec(n))throw c.i.O("cannot iterate across an open path");for(n=0;o!=l;o=this.V(o))p=this.Va(o),(d=this.Uh(p))!=null?n+=d.Rb():(d=this.Va(this.V(o)),n+=this.wb.Ar(p,d));return n},a.prototype.Fh=function(n,o){var l=this.Va(n);this.wb.It(l,o),(l=this.Uh(l))!=null&&l.setStart(o),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&l.setEnd(o))},a.prototype.Xi=function(n,o){n=this.Va(n),this.wb.we(n,o)},a.prototype.mf=function(n,o){this.Db(n,o.x,o.y)},a.prototype.Db=function(n,o,l){var p=this.Va(n);this.wb.Db(p,o,l),(p=this.Uh(p))!=null&&p.TB(o,l),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&p.Sl(o,l))},a.prototype.D=function(n,o){this.wb.D(this.ud.U(n,0),o)},a.prototype.Hc=function(n,o){this.wb.Aa[0].uc(2*this.ud.U(n,0),o)},a.prototype.Oa=function(n){var o=new c.h;return this.wb.D(this.ud.U(n,0),o),o},a.prototype.YF=function(n,o){this.jt.uc(2*n,o)},a.prototype.Vc=function(n,o,l){return this.wb.Vc(n,this.Va(o),l)},a.prototype.setAttribute=function(n,o,l,p){this.wb.setAttribute(n,this.Va(o),l,p)},a.prototype.Va=function(n){return this.ud.U(n,0)},a.prototype.kh=function(){var n=new c.h;return this.D(void 0,n),n.y},a.prototype.hq=function(n,o){n=this.Va(n),o=this.Va(o);var l=this.wb.Aa[0].o;return l[2*n]===l[2*o]&&l[2*n+1]===l[2*o+1]},a.prototype.Fv=function(n,o){n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*n]===o.x&&l[2*n+1]===o.y},a.prototype.nX=function(n,o){if(1>o&&(o=1),this.Ug==null){if(o==1)return;this.Ug=c.Zc.En(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,o)},a.prototype.XF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},a.prototype.Sa=function(n,o,l){o=this.di[o],n=this.Va(n),o.size<this.wb.I()&&o.resize(this.wb.I(),-1),o.write(n,l)},a.prototype.Qa=function(n,o){return(n=this.Va(n))<(o=this.di[o]).size?o.read(n):-1},a.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=c.Zc.Qh(0,-1),n;return this.di.push(c.Zc.Qh(0,-1)),this.di.length-1},a.prototype.Ud=function(n){this.di[n]=null},a.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},a.prototype.fd=function(n,o){var l=this.ud.U(n,2);if(l==-1)return!1;if(this.aA){var p=new c.Ta;this.Xi(n,p),o.setStart(p),this.Xi(l,p),o.setEnd(p)}else this.wb.Hc(this.ud.U(n,0),wi),o.gm(0,wi),this.wb.Hc(this.ud.U(l,0),wi),o.gm(1,wi);return!0},a.prototype.eW=function(n,o,l){if(this.aA){var p=new c.Ta;this.Xi(n,p),l.setStart(p),this.Xi(o,p),l.setEnd(p)}else this.wb.Hc(n,wi),l.gm(0,wi),this.wb.Hc(o,wi),l.gm(1,wi)},a.prototype.wf=function(n,o){if(o!=-1){if(n!=this.Rf(o))throw c.i.Ra();var l=this.es(o)}else l=this.mv(n);var p=this.oU(n);return o!=-1&&this.cp(o,p),this.bp(p,o),this.cp(p,l),l!=-1?this.bp(l,p):this.$o(n,p),o==-1&&this.ap(n,p),this.Tl(n,this.ea(n)+1),p},a.prototype.hG=function(n,o,l,p){n=this.wf(n,-1);for(var d=0,m=o,v=!1;m==l&&(v=!0),this.cj(m,n),d++,(m=this.V(m))!=o;);return this.mn(n,!0),this.Xj(n,d),v&&(o=l),this.Kf(n,o),this.Yg(n,this.Na(o)),this.ep(n,!1),p!=null&&(p[0]=v),n},a.prototype.ar=function(n){var o=this.es(n),l=this.Sb(n),p=this.Rf(n);return o!=-1?this.bp(o,l):this.$o(p,l),l!=-1?this.cp(l,o):this.ap(p,o),this.uO(n),this.Tl(p,this.ea(p)-1),this.mF(n),l},a.prototype.uO=function(n){var o=this.Ya(n);if(o!=-1){for(var l=0,p=this.Ka(n);l<p;l++){var d=o;o=this.V(o),this.Qy(d)}o=this.Rf(n),this.Vj(o,this.I(o)-this.Ka(n))}this.Xj(n,0)},a.prototype.Sb=function(n){return this.md.U(n,2)},a.prototype.es=function(n){return this.md.U(n,1)},a.prototype.Ka=function(n){return this.md.U(n,3)},a.prototype.ec=function(n){return(1&this.Up(n))!=0},a.prototype.mn=function(n,o){if(this.ec(n)!=o){if(0<this.Ka(n)){var l=this.Ya(n),p=this.tj(n);o?(this.Cc(p,l),this.Dc(l,p),l=this.Va(p)):(this.Cc(p,-1),this.Dc(l,-1),l=this.Va(p)),this.Zg(l,null)}this.PB(n,(1|this.Up(n))-1|(o?1:0))}},a.prototype.Rf=function(n){return this.md.U(n,7)},a.prototype.QS=function(n){return(2&this.Up(n))!=0},a.prototype.JB=function(n,o){this.PB(n,(2|this.Up(n))-2|(o?2:0))},a.prototype.qz=function(n){if(this.VS(n))return this.Qi.get(this.sv(n));var o=new c.zb,l=this.Ya(n);if(l==-1)return 0;var p=new c.h;this.D(l,p);for(var d=0,m=0,v=this.Ka(n);m<v;m++,l=this.V(l)){var _=this.cc(l);if(_==null){if(!this.fd(l,o))continue;_=o}d+=_.Sx(p.x,p.y)}return this.ep(n,!0),this.Qi.set(this.sv(n),d),d},a.prototype.ir=function(n,o,l){o=this.Dk[o],n=this.sv(n),o.size<this.Qi.size&&o.resize(this.Qi.size,-1),o.write(n,l)},a.prototype.uj=function(n,o){return(n=this.sv(n))<(o=this.Dk[o]).size?o.read(n):-1},a.prototype.Fy=function(){this.Dk==null&&(this.Dk=[]);for(var n=0;n<this.Dk.length;n++)if(this.Dk[n]==null)return this.Dk[n]=c.Zc.Qh(0),n;return this.Dk.push(c.Zc.Qh(0)),this.Dk.length-1},a.prototype.wB=function(n){this.Dk[n]=null},a.prototype.RT=function(n,o,l){if(l==-1)throw c.i.O();if(o!=l){var p=this.Sb(l),d=this.es(l),m=this.Rf(l);d==-1?this.$o(m,p):this.bp(d,p),p==-1?this.ap(m,d):this.cp(p,d),this.Vj(m,this.I(m)-this.Ka(l)),this.Tl(m,this.ea(m)-1),d=o==-1?this.mv(n):this.es(o),this.cp(l,d),this.bp(l,o),o==-1?this.ap(n,l):this.cp(o,l),d==-1?this.$o(n,l):this.bp(d,l),this.Vj(n,this.I(n)+this.Ka(l)),this.Tl(n,this.ea(n)+1),this.gx(l,n)}},a.prototype.kj=function(n,o){this.wb.we(this.Va(o),this.pm()),this.yj(n,-1,this.pm())},a.prototype.pd=function(n,o){var l=this.cd(n),p=this.Na(n),d=this.V(n);p!=-1&&this.Cc(p,d);var m=this.Ka(l);if(n==this.Ya(l)&&this.Kf(l,1<m?d:-1),d!=-1&&this.Dc(d,p),n==this.tj(l)&&this.Yg(l,1<m?p:-1),p!=-1&&d!=-1){p=this.Va(p);var v=this.Va(d);o?(o=this.Uh(p))!=null&&(p=new c.h,this.wb.D(v,p),o.Rc(p)):(v=this.Va(n),o=this.Uh(v),this.Zg(p,o),o!=null&&(p=this.wb.Oa(p),o.Ec(p)))}return this.Xj(l,m-1),l=this.Rf(l),this.Vj(l,this.I(l)-1),this.Qy(n),d},a.prototype.Ya=function(n){return this.md.U(n,4)},a.prototype.tj=function(n){return this.md.U(n,5)},a.prototype.V=function(n){return this.ud.U(n,2)},a.prototype.Na=function(n){return this.ud.U(n,1)},a.prototype.cd=function(n){return this.ud.U(n,3)},a.prototype.hc=function(n,o){return this.yj(n,-1,o)},a.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof u)return new u(n);var o,l=-1,p=-1,d=-1,m=0,v=!1;for(o=this.ld;o!=-1;o=this.ve(o))if(!n||c.ba.Ic(this.jc(o))){for(l=this.Ob(o);l!=-1;l=this.Sb(l))if(d=p=this.Ya(l),m=0,p!=-1){v=!0;break}if(v)break}return u.uP(this,o,l,p,d,m,n)},a.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var o=0,l=this.Te.length;o<l;o++)this.Te[o]!=null&&this.Te[o].Pc(n)},a.prototype.lr=function(n,o,l,p){p?this.FX(n,o,l):this.EX(n,o,l)},a.prototype.Dc=function(n,o){this.ud.T(n,1,o)},a.prototype.Cc=function(n,o){this.ud.T(n,2,o)},a.prototype.cj=function(n,o){this.ud.T(n,3,o)},a.prototype.Xj=function(n,o){this.md.T(n,3,o)},a.prototype.Kf=function(n,o){this.md.T(n,4,o)},a.prototype.Yg=function(n,o){this.md.T(n,5,o)},a.prototype.Tl=function(n,o){this.dd.T(n,6,o)},a.prototype.Vj=function(n,o){this.dd.T(n,5,o)},a.prototype.jJ=function(n){var o=n;do{var l=this.V(o);this.Cc(o,this.Na(o)),this.Dc(o,l),o=l}while(o!=n)},a.prototype.WB=function(n){this.gd=n},a.prototype.br=function(n){var o=this.es(n),l=this.Sb(n),p=this.Rf(n);o!=-1?this.bp(o,l):this.$o(p,l),l!=-1?this.cp(l,o):this.ap(p,o),this.Kf(n,-1),this.Yg(n,-1),this.mF(n)},a.prototype.oi=function(n,o){var l=this.Na(n),p=this.V(n);if(l!=-1&&this.Cc(l,p),p!=-1&&this.Dc(p,l),l!=-1&&p!=-1)if(l=this.Va(l),p=this.Va(p),o){if((o=this.Uh(l))!=null){var d=new c.h;this.wb.D(p,d),o.Rc(d)}}else o=this.Va(n),o=this.Uh(o),this.Zg(l,o),o!=null&&(d=new c.h,this.wb.D(l,d),o.Ec(d));this.Qy(n)},a.prototype.VS=function(n){return(4&this.Up(n))!=0},a.prototype.ep=function(n,o){this.PB(n,(4|this.Up(n))-4|(o?4:0))},a.prototype.nx=function(n,o){var l=this.ud.o;this.wb.rc();var p=this.wb.Aa[0].o;n.Wd(0,o,function(d,m){var v=l[5*d];d=l[5*m],m=p[2*v],v=p[2*v+1];var _=p[2*d];return v<(d=p[2*d+1])?-1:v>d?1:m<_?-1:m>_?1:0})},a.prototype.cS=function(){for(var n=this.ld;n!=-1;n=this.ve(n))if(!c.ba.Ic(this.jc(n)))return!0;return!1},a.prototype.bC=function(n,o){for(var l=this.Ob(n),p=this.Ob(o),d=this.mv(n),m=this.mv(o),v=this.Ob(n);v!=-1;v=this.Sb(v))this.gx(v,o);for(v=this.Ob(o);v!=-1;v=this.Sb(v))this.gx(v,n);this.$o(n,p),this.$o(o,l),this.ap(n,m),this.ap(o,d),l=this.I(n),p=this.ea(n),d=this.ea(o),this.Vj(n,this.I(o)),this.Vj(o,l),this.Tl(n,d),this.Tl(o,p),l=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(o,2)),this.dd.T(o,2,l)},a}(),c.hd=C})(W||(W={})),function(c){var C=function(b){function u(a,n,o,l){var p=b.call(this)||this;return p.aa=new c.l,a===void 0?p.OE():typeof a=="number"?p.PO(a,n,o,l):a instanceof c.Ta?n!==void 0?p.Su(a,n,o):p.QO(a):a instanceof c.ua?n!==void 0?p.SO(a,n):p.RO(a):a instanceof c.l?p.OO(a):p.OE(),p}return Ot(u,b),u.prototype.Su=function(a,n,o){this.description=c.ee.og(),this.aa.Pa(),a.B()||this.vu(a,n,o)},u.prototype.OO=function(a){this.description=c.ee.og(),this.aa.L(a),this.aa.normalize()},u.prototype.RO=function(a){if(a==null)throw c.i.O();this.description=a,this.aa.Pa()},u.prototype.SO=function(a,n){if(a==null)throw c.i.O();this.description=a,this.aa.L(n),this.aa.normalize()},u.prototype.OE=function(){this.description=c.ee.og(),this.aa.Pa()},u.prototype.QO=function(a){this.description=c.ee.og(),this.aa.Pa(),a.B()||this.vu(a)},u.prototype.PO=function(a,n,o,l){this.description=c.ee.og(),this.L(a,n,o,l)},u.prototype.L=function(a,n,o,l){if(this.wc(),typeof a=="number")this.aa.L(a,n,o,l);else for(this.Pa(),n=0,o=a.length;n<o;n++)this.$b(a[n])},u.prototype.Yo=function(a){if(this.wc(),!a.YS())throw c.i.O();this.aa.L(a)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.hk=function(){return this.aa.hk()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(a){if(a instanceof c.h)this.wc(),this.aa.$b(a);else if(a instanceof c.l)this.wc(),this.aa.$b(a);else if(a instanceof c.Ta){if(this.wc(),!a.Bc()){var n=a.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(a);else{this.aa.$b(a.D());for(var o=1,l=n.Ba;o<l;o++)for(var p=n.Fd(o),d=c.ua.Wa(p),m=0;m<d;m++){var v=a.Vc(p,m),_=this.Vg(p,m);_.$b(v),this.setInterval(p,m,_)}}}}else if(a instanceof u&&!a.B())for((n=a.description)!=this.description&&this.Ll(n),this.aa.$b(a.aa),o=1,l=n.Ba;o<l;o++)for(p=n.qd(o),d=c.ua.Wa(p),m=0;m<d;m++)v=a.Vg(p,m),(_=this.Vg(p,m)).$b(v),this.setInterval(p,m,_)},u.prototype.vu=function(a,n,o){if(n!==void 0){this.aa.L(a.D(),n,o),o=1;for(var l=(n=a.description).Ba;o<l;o++)for(var p=n.Fd(o),d=c.ua.Wa(p),m=0;m<d;m++){var v=a.Vc(p,m);this.setInterval(p,m,v,v)}}else for(this.aa.L(a.la[0],a.la[1]),o=1,l=(n=a.description).Ba;o<l;o++)for(p=n.Fd(o),d=c.ua.Wa(p),m=0;m<d;m++)v=a.Vc(p,m),this.setInterval(p,m,v,v)},u.prototype.setInterval=function(a,n,o,l){if(o=typeof o=="number"?new c.Oc(o,l):o,this.wc(),a==0)if(n==0)this.aa.v=o.pa,this.aa.C=o.wa;else{if(n!=1)throw c.i.re();this.aa.G=o.pa,this.aa.H=o.wa}else this.pD(0,a,n,o.pa),this.pD(1,a,n,o.wa)},u.prototype.X=function(a,n){this.wc(),this.aa.X(a,n)},u.prototype.Pc=function(a){if(a instanceof c.Ed)this.wc(),a.gC(this.aa);else if(this.wc(),!this.aa.B()){var n=new c.IK;this.Ro(n),n.PS()?n.Pa():a.gC(n)}},u.prototype.copyTo=function(a){if(a.K()!=this.K())throw c.i.O();if(a.wc(),a.description=this.description,a.aa.L(this.aa),a.la=null,this.la!=null){a.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)a.la[n]=this.la[n]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.qF()},u.prototype.Rb=function(){return this.aa.sR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(a){this.copyTo(a)},u.prototype.A=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H},u.prototype.Ro=function(a){a.v=this.aa.v,a.G=this.aa.G,a.C=this.aa.C,a.H=this.aa.H,a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(a,n){var o=new c.Oc;return o.L(this.Pd(0,a,n),this.Pd(1,a,n)),o},u.prototype.If=function(a,n){n.kg(this.description);var o=this.description.Ba-1;switch(a){case 0:for(a=0;a<o;a++)for(var l=this.description.qd(a),p=c.ua.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(0,l,d));n.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<o;a++)for(l=this.description.qd(a),p=c.ua.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(1,l,d));n.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<o;a++)for(l=this.description.qd(a),p=c.ua.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(0,l,d));n.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<o;a++)for(l=this.description.qd(a),p=c.ua.Wa(l),d=0;d<p;d++)n.setAttribute(l,d,this.Pd(1,l,d));n.Db(this.aa.C,this.aa.G);break;default:throw c.i.re()}},u.prototype.gB=function(a,n){a=this.aa.gB(a),n.na(a.x,a.y)},u.prototype.eR=function(a,n){return n*(a.Qq-2)},u.prototype.rF=function(a,n,o){if(this.aa.B())throw c.i.ga("empty geometry");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.ua.Wa(n))throw c.i.O();var l=this.description.Qf(n);return this.qu(),0<=l?this.la[this.eR(this.description,a)+this.description.ER(l)-2+o]:c.ua.te(n)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var a=u.Ig(this.description,0),n=u.Ig(this.description,1),o=0,l=1,p=this.description.Ba;l<p;l++){var d=this.description.qd(l),m=c.ua.Wa(d);d=c.ua.te(d);for(var v=0;v<m;v++)this.la[a+o]=d,this.la[n+o]=d,o++}}},u.prototype.un=function(a){if(this.la!=null)if(2<a.Be.length){for(var n=c.ee.Kw(a,this.description),o=[],l=u.Ig(this.description,0),p=u.Ig(this.description,1),d=u.Ig(a,0),m=u.Ig(a,1),v=0,_=1,M=a.Ba;_<M;_++){var T=a.qd(_),I=c.ua.Wa(T);if(n[_]==-1){var O=c.ua.te(T);for(T=0;T<I;T++)o[d+v]=O,o[m+v]=O,v++}else for(O=this.description.ak(n[_])-2,T=0;T<I;T++)o[d+v]=this.la[l+O],o[m+v]=this.la[p+O],v++,O++}this.la=o}else this.la=null;this.description=a},u.prototype.Pd=function(a,n,o){if(this.aa.B())throw c.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return a!=0?o!=0?this.aa.H:this.aa.C:o!=0?this.aa.G:this.aa.v;if(o>=c.ua.Wa(n))throw c.i.re();var l=this.description.Qf(n);return 0<=l?(this.qu(),this.la[u.Ig(this.description,a)+this.description.ak(l)-2+o]):c.ua.te(n)},u.prototype.pD=function(a,n,o,l){if(this.wc(),n==0)a!=0?o!=0?this.aa.H=l:this.aa.C=l:o!=0?this.aa.G=l:this.aa.v=l;else{if(o>=c.ua.Wa(n))throw c.i.re();if(!this.hasAttribute(n)){if(c.ua.xG(n,l))return;this.se(n)}n=this.description.Qf(n),this.qu(),this.la[u.Ig(this.description,a)+this.description.ak(n)-2+o]=l}},u.Ig=function(a,n){return n*(a.Be.length-2)},u.prototype.Fa=function(a){this.wc();var n=new c.l;return a.A(n),this.aa.Fa(n)},u.prototype.isIntersecting=function(a){return a instanceof c.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)},u.prototype.Lu=function(a,n){this.wc(),a.B()?this.Pa():n!==void 0?this.vu(a,n,void 0):this.aa.Lu(a.Ng(),a.kh())},u.prototype.offset=function(a,n){this.wc(),this.aa.offset(a,n)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(a){if(a===void 0){if(a=new c.Ta(this.description),this.B())return a;for(n=this.description.Ba,o=1;o<n;o++)for(l=this.description.Fd(o),p=c.ua.Wa(l),d=0;d<p;d++)m=.5*(this.Pd(0,l,d)+this.Pd(1,l,d)),a.setAttribute(l,d,m);return a.Db(this.aa.hk(),this.aa.Lp()),a}if(a.kg(this.description),this.B())a.Pa();else{for(var n=this.description.Ba,o=1;o<n;o++)for(var l=this.description.qd(o),p=c.ua.Wa(l),d=0;d<p;d++){var m=.5*(this.rF(0,l,d)+this.rF(1,l,d));a.setAttribute(l,d,m)}a.Db(this.aa.tf())}},u.prototype.hz=function(){return new c.Ta(this.aa.hz())},u.prototype.contains=function(a){return a instanceof c.Ta?!a.B()&&this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)},u.prototype.YO=function(a){return this.aa.contains(a)},u.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof u)||this.description!=a.description)return!1;if(this.B())return!!a.B();if(!this.aa.Nb(a.aa))return!1;for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.dc=function(){var a=this.description.dc();if(a=c.P.Vh(a,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,o=2*(this.description.Be.length-2);n<o;n++)a=c.P.Vh(a,this.la[n]);return a},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.mg=function(){return c.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(c.ba);c.Hh=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o){u===void 0?this.Pa():(this.v=u,this.G=a,this.C=n,this.H=o)}return b.construct=function(u,a,n,o){var l=new b;return l.v=u,l.G=a,l.C=n,l.H=o,l},b.prototype.L=function(u,a,n,o){typeof u=="number"?n!==void 0?(this.v=u,this.G=a,this.C=n,this.H=o,this.normalize()):(this.v=u,this.G=a,this.C=u,this.H=a):u instanceof c.h?a!==void 0?(this.v=u.x-.5*a,this.C=this.v+a,this.G=u.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof b?this.L(u.v,u.G,u.C,u.H):u instanceof c.Oc&&(u.B()||a.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=a.pa,this.H=a.wa))},b.prototype.bx=function(u,a){if(a!==void 0)if(a==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<a;n++){var o=u[n];o.x<this.v?this.v=o.x:o.x>this.C&&(this.C=o.x),o.y<this.G?this.G=o.y:o.y>this.H&&(this.H=o.y)}}else if(u==null||u.length==0)this.Pa();else for(o=u[0],this.L(o.x,o.y),n=1;n<u.length;n++)a=u[n],this.Mk(a.x,a.y)},b.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.$b=function(u,a){typeof u=="number"?this.B()?(this.v=u,this.G=a,this.C=u,this.H=a):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a)):u instanceof c.h||u instanceof c.Od?this.$b(u.x,u.y):u instanceof b&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},b.prototype.Mk=function(u,a){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a)},b.prototype.X=function(u,a){this.B()||(this.v-=u,this.C+=u,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())},b.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},b.prototype.zoom=function(u,a){this.B()||this.L(this.tf(),u*this.S(),a*this.da())},b.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},b.prototype.BG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},b.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},b.prototype.gB=function(u){switch(u){case 0:return c.h.construct(this.v,this.G);case 1:return c.h.construct(this.v,this.H);case 2:return c.h.construct(this.C,this.H);case 3:return c.h.construct(this.C,this.G);default:throw c.i.re()}},b.prototype.hB=function(u){if(u==null||4>u.length)throw c.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=c.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=c.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=c.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=c.h.construct(this.C,this.G)},b.prototype.qF=function(){return this.B()?0:this.S()*this.da()},b.prototype.sR=function(){return this.B()?0:2*(this.S()+this.da())},b.prototype.hk=function(){return(this.C+this.v)/2},b.prototype.Lp=function(){return(this.H+this.G)/2},b.prototype.S=function(){return this.C-this.v},b.prototype.da=function(){return this.H-this.G},b.prototype.move=function(u,a){this.B()||(this.v+=u,this.G+=a,this.C+=u,this.H+=a)},b.prototype.Lu=function(u,a){if(a!==void 0)this.move(u-this.hk(),a-this.Lp());else if(u instanceof c.h)this.Lu(u.x,u.y);else{if(!(u instanceof c.Ta))throw c.i.O();a=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=u.Ng()-a,this.C=u.Ng()+a,this.G=u.kh()-n,this.H=u.kh()+n}},b.prototype.offset=function(u,a){this.v+=u,this.C+=u,this.G+=a,this.H+=a},b.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=u,this.C=a,u=Math.min(this.G,this.H),a=Math.max(this.G,this.H),this.G=u,this.H=a}},b.prototype.fn=function(u){u.na(this.v,this.G)},b.prototype.UI=function(u){u.na(this.C,this.G)},b.prototype.XI=function(u){u.na(this.v,this.H)},b.prototype.gn=function(u){u.na(this.C,this.H)},b.prototype.YS=function(){return this.B()||this.v<=this.C&&this.G<=this.H},b.prototype.tf=function(){return c.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},b.prototype.hz=function(){return c.h.construct(this.v,this.G)},b.prototype.contains=function(u,a){if(a!==void 0)return u>=this.v&&u<=this.C&&a>=this.G&&a<=this.H;if(u instanceof c.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof c.h)return this.contains(u.x,u.y);if(u instanceof b)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw c.i.O()},b.prototype.jm=function(u,a){if(a!==void 0)return u>this.v&&u<this.C&&a>this.G&&a<this.H;if(u instanceof c.h)return this.jm(u.x,u.y);if(u instanceof b)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw c.i.O()},b.prototype.Nb=function(u){return u==this||u instanceof b&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},b.prototype.dc=function(){var u=this.v;u=c.P.truncate(u^u>>>32);var a=c.P.Vh(u);return u=this.C,u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a),u=this.G,u=c.P.truncate(u^u>>>32),a=c.P.Vh(u,a),u=this.H,u=c.P.truncate(u^u>>>32),c.P.Vh(u,a)},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},b.prototype.uy=function(u,a){var n=this.$j(u),o=this.$j(a);if((n&o)!=0)return 0;if((n|o)==0)return 4;var l=(n!=0?1:0)|(o!=0?2:0);do{var p=a.x-u.x,d=a.y-u.y;if(p>d?(n&b.SC)!=0?((n&b.lu)!=0?(u.y+=d*(this.v-u.x)/p,u.x=this.v):(u.y+=d*(this.C-u.x)/p,u.x=this.C),n=this.$j(u)):(o&b.SC)!=0?((o&b.lu)!=0?(a.y+=d*(this.v-a.x)/p,a.x=this.v):(a.y+=d*(this.C-a.x)/p,a.x=this.C),o=this.$j(a)):n!=0?((n&b.mu)!=0?(u.x+=p*(this.G-u.y)/d,u.y=this.G):(u.x+=p*(this.H-u.y)/d,u.y=this.H),n=this.$j(u)):((o&b.mu)!=0?(a.x+=p*(this.G-a.y)/d,a.y=this.G):(a.x+=p*(this.H-a.y)/d,a.y=this.H),o=this.$j(a)):(n&b.TC)!=0?((n&b.mu)!=0?(u.x+=p*(this.G-u.y)/d,u.y=this.G):(u.x+=p*(this.H-u.y)/d,u.y=this.H),n=this.$j(u)):(o&b.TC)!=0?((o&b.mu)!=0?(a.x+=p*(this.G-a.y)/d,a.y=this.G):(a.x+=p*(this.H-a.y)/d,a.y=this.H),o=this.$j(a)):n!=0?((n&b.lu)!=0?(u.y+=d*(this.v-u.x)/p,u.x=this.v):(u.y+=d*(this.C-u.x)/p,u.x=this.C),n=this.$j(u)):((o&b.lu)!=0?(a.y+=d*(this.v-a.x)/p,a.x=this.v):(a.y+=d*(this.C-a.x)/p,a.x=this.C),o=this.$j(a)),(n&o)!=0)return 0}while((n|o)!=0);return l},b.prototype.$j=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},b.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},b.prototype.ub=function(u){return u instanceof c.h?Math.sqrt(this.cK(u)):Math.sqrt(this.px(u))},b.prototype.px=function(u){var a=0,n=0,o=this.v-u.C;return o>a&&(a=o),(o=this.G-u.H)>n&&(n=o),(o=u.v-this.C)>a&&(a=o),(o=u.G-this.H)>n&&(n=o),a*a+n*n},b.prototype.cK=function(u){var a=0,n=0,o=this.v-u.x;return o>a&&(a=o),(o=this.G-u.y)>n&&(n=o),(o=u.x-this.C)>a&&(a=o),(o=u.y-this.H)>n&&(n=o),a*a+n*n},b.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},b.lu=1,b.mu=4,b.SC=3,b.TC=12,b}();c.l=C}(W||(W={})),function(c){var C,b;(b=C||(C={}))[b.initialize=0]="initialize",b[b.initializeRed=1]="initializeRed",b[b.initializeBlue=2]="initializeBlue",b[b.initializeRedBlue=3]="initializeRedBlue",b[b.sweep=4]="sweep",b[b.sweepBruteForce=5]="sweepBruteForce",b[b.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",b[b.sweepRedBlue=7]="sweepRedBlue",b[b.sweepRed=8]="sweepRed",b[b.sweepBlue=9]="sweepBlue",b[b.iterate=10]="iterate",b[b.iterateRed=11]="iterateRed",b[b.iterateBlue=12]="iterateBlue",b[b.iterateBruteForce=13]="iterateBruteForce",b[b.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",b[b.resetRed=15]="resetRed",b[b.resetBlue=16]="resetBlue";var u=function(){function a(n,o){this.ei=n,this.YG=o}return a.prototype.qr=function(n,o,l){this.ei.BX(l,n,o,this.YG)},a.prototype.bq=function(n){return this.ei.Tr(n,this.YG)},a}();C=function(){function a(){this.qw=this.po=this.ff=this.sd=null,this.yq=new c.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.ho=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Ok()}return a.prototype.mr=function(){this.Ok(),this.Rv=!0,this.Fb==null?(this.ho=new c.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},a.prototype.bd=function(n,o){if(!this.Rv)throw c.i.Hb();var l=new c.l;l.L(o),this.ho.add(n),this.Fb.push(l)},a.prototype.Hp=function(){if(!this.Rv)throw c.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},a.prototype.jK=function(){this.Ok(),this.Qv=!0,this.Fb==null?(this.ho=new c.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},a.prototype.CD=function(n,o){if(!this.Qv)throw c.i.Hb();var l=new c.l;l.L(o),this.ho.add(n),this.Fb.push(l)},a.prototype.cF=function(){if(!this.Qv)throw c.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},a.prototype.iK=function(){this.Ok(),this.Pv=!0,this.rd==null?(this.ew=new c.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},a.prototype.yD=function(n,o){if(!this.Pv)throw c.i.Hb();var l=new c.l;l.L(o),this.ew.add(n),this.rd.push(l)},a.prototype.bF=function(){if(!this.Pv)throw c.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},a.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.kS();break;case 2:n=this.hS();break;case 3:n=this.jS();break;case 4:n=this.MX();break;case 5:n=this.IX();break;case 6:n=this.JX();break;case 7:n=this.KX();break;case 8:n=this.tx();break;case 9:n=this.cC();break;case 10:n=this.Pz();break;case 11:n=this.bT();break;case 12:n=this.ZS();break;case 13:n=this.$S();break;case 14:n=this.aT();break;case 15:n=this.eJ();break;case 16:n=this.dJ();break;default:throw c.i.Ra()}return!this.Jc},a.prototype.VB=function(n){this.ra=n},a.prototype.oz=function(n){return this.Fb[n]},a.prototype.Wy=function(n){return this.rd[n]},a.prototype.pl=function(n){return this.ho.read(n)},a.prototype.jl=function(n){return this.ew.read(n)},a.Oz=function(n){return(1&n)==1},a.gq=function(n){return(1&n)==0},a.prototype.Ok=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.pe=-1,this.Jc=!0},a.prototype.Bz=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length)return this.pe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new c.ur(!0),this.po=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.pe=2*this.Fb.length,this.Yb=4,!0},a.prototype.kS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.po=this.sd.getIterator(),this.Md=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.pe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.dJ()},a.prototype.hS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var o=this.rd[n];this.ff.Dr(o.v,o.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.eJ()},a.prototype.jS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new c.ur(!0),this.po=this.sd.getIterator(),this.Md=new c.ja(0)),this.ff==null&&(this.ff=new c.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new c.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var o=this.Fb[n];this.sd.Dr(o.v,o.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)o=this.rd[n],this.ff.Dr(o.v,o.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.pe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},a.prototype.MX=function(){var n=this.Md.get(--this.pe),o=n>>1;return a.gq(n)?(this.sd.remove(o),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1)):(this.po.yB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Wf=o,this.Yb=10,!0)},a.prototype.IX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Tg=this.Wf=this.pe,this.Yb=13,!0)},a.prototype.JX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Wf=this.pe,this.Tg=this.rd.length,this.Yb=14,!0)},a.prototype.KX=function(){var n=this.Md.get(this.pe-1),o=this.Ff.get(this.Tg-1),l=this.Tr(n,!0),p=this.Tr(o,!1);return l>p?this.tx():l<p?this.cC():a.Oz(n)?this.tx():a.Oz(o)?this.cC():this.tx()},a.prototype.tx=function(){var n=this.Md.get(--this.pe),o=n>>1;if(a.gq(n))return this.Ef!=-1&&this.Kj.get(o)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(o)),this.Kj.set(o,-1)):this.sd.remove(o),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var l=this.Bd.getData(n);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=l}return 0<this.ff.size()?(this.qw.yB(this.Fb[o].v,this.Fb[o].C,this.ra),this.Wf=o,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new c.kp),this.Kj=new c.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(o,this.Bd.addElement(this.Ef,o)),this.Yb=7),!0},a.prototype.cC=function(){var n=this.Ff.get(--this.Tg),o=n>>1;if(a.gq(n))return this.Df!=-1&&this.Jj.get(o)!=-1?(this.Bd.kd(this.Df,this.Jj.get(o)),this.Jj.set(o,-1)):this.ff.remove(o),this.Tg!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var l=this.Bd.getData(n);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=l}return 0<this.sd.size()?(this.po.yB(this.rd[o].v,this.rd[o].C,this.ra),this.Bf=o,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new c.kp),this.Jj=new c.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(o,this.Bd.addElement(this.Df,o)),this.Yb=7),!0},a.prototype.Pz=function(){if(this.Bf=this.po.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.pe)>>1;return this.sd.xj(n),this.Yb=4,!0},a.prototype.bT=function(){if(this.Wf=this.po.next(),this.Wf!=-1)return!1;this.Bf=this.Wf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},a.prototype.ZS=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.pe)>>1;return this.sd.xj(n),this.Yb=7,!0},a.prototype.$S=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.pe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.aT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.pe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},a.prototype.eJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.pe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},a.prototype.dJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},a.prototype.Mt=function(n,o,l){this.Cm==null&&(this.Cm=new c.Zt),l=new u(this,l),this.Cm.sort(n,0,o,l)},a.prototype.BX=function(n,o,l,p){var d=this;n.Wd(o,l,function(m,v){var _=d.Tr(m,p),M=d.Tr(v,p);return _<M||_==M&&a.gq(m)&&a.Oz(v)?-1:1})},a.prototype.Tr=function(n,o){var l=.5*this.ra;return o?(o=this.Fb[n>>1],a.gq(n)?o.G-l:o.H+l):(o=this.rd[n>>1],a.gq(n)?o.G-l:o.H+l)},a}(),c.rC=C}(W||(W={})),function(c){var C=function(){function b(){}return b.construct=function(u,a,n,o,l,p){var d=new b;return d.v=u,d.G=a,d.Xe=n,d.C=o,d.H=l,d.Dg=p,d},b.prototype.Pa=function(){this.Xe=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.PS=function(){return isNaN(this.Xe)},b.prototype.L=function(u,a,n,o,l,p){o!==void 0?typeof u=="number"?(this.v=u,this.G=a,this.Xe=n,this.C=o,this.H=l,this.Dg=p):(this.v=u.x-.5*a,this.C=this.v+a,this.G=u.y-.5*n,this.H=this.G+n,this.Xe=u.z-.5*o,this.Dg=this.Xe+o):(this.v=u,this.G=a,this.Xe=n,this.C=u,this.H=a,this.Dg=n)},b.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},b.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},b.prototype.Mk=function(u,a,n){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>a?this.G=a:this.H<a&&(this.H=a),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},b.prototype.$b=function(u,a,n){if(typeof u=="number")this.B()?(this.v=u,this.G=a,this.Xe=n,this.C=u,this.H=a,this.Dg=n):this.Mk(u,a,n);else if(u instanceof c.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof b))throw c.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},b.prototype.construct=function(u,a,n){u.B()||a.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=a.pa,this.H=a.wa,this.Xe=n.pa,this.Dg=n.wa)},b.prototype.hB=function(u){if(u==null||8>u.length)throw c.i.O();u[0]=new c.Od(this.v,this.G,this.Xe),u[1]=new c.Od(this.v,this.H,this.Xe),u[2]=new c.Od(this.C,this.H,this.Xe),u[3]=new c.Od(this.C,this.G,this.Xe),u[4]=new c.Od(this.v,this.G,this.Dg),u[5]=new c.Od(this.v,this.H,this.Dg),u[6]=new c.Od(this.C,this.H,this.Dg),u[7]=new c.Od(this.C,this.G,this.Dg)},b.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var a=u[0];for(this.L(a.x,a.y,a.z),a=1;a<u.length;a++){var n=u[a];this.Mk(n.x,n.y,n.z)}}},b}();c.IK=C}(W||(W={})),function(c){(function(C){C.Ra=function(){var b=Error();return b.message="Internal Error",b},C.Fe=function(){var b=Error();return b.message="Not Implemented",b},C.Zk=function(){var b=Error();return b.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",b},C.Hb=function(){var b=Error();return b.message="Invalid Call",b},C.O=function(b){var u=Error();return u.message="Illegal Argument Exception",b!==void 0&&(u.message+=": "+b),u},C.hu=function(b){var u=Error();return u.message=b!==void 0?"Runtime Exception: "+b:"Runtime Exception.",u},C.ga=function(b){var u=Error();return u.message="Geometry Exception: "+b,u},C.AK=function(){var b=Error();return b.message="Assert Failed Exception",b},C.re=function(){var b=Error();return b.message="IndexOutOfBoundsException",b},C.QC=function(){var b=Error();return b.message="UserCancelException",b}})(c.i||(c.i={}))}(W||(W={})),function(c){(c=c.dm||(c.dm={}))[c.forward=0]="forward",c[c.reverse=1]="reverse"}(W||(W={})),function(c){var C=function(){function a(n,o){this.Xa=n,this.zH=o,this.FH=-1,this.ul=!1}return a.prototype.qe=function(){},a.prototype.next=function(){if(++this.FH==this.zH.I())return null;var n=this.zH.Oa(this.FH);n.scale(this.Xa.fc);var o=new c.Ea;return this.Xa.ny(n,this.ul,o),o},a.prototype.Ma=function(){return 0},a}(),b=function(){function a(n,o,l){this.Xa=n,this.tw=o,this.Yn=!1,this.eo=l,this.dw=[0],this.tk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new c.Ea,this.vk=[]}return a.prototype.qe=function(){},a.prototype.next=function(){if(this.Yn){this.Yn=!1,this.td.ia();var n=c.ba.ig(this.sq);return c.Hg.Nk(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.eo!=null&&this.eo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.eo!=null&&this.eo.$k(null,0)}n=null,this.tk[0]=0,this.zA=this.dw[0]=0,this.fi=NaN,this.Yn=!1;for(var o=this.vk.length=0,l=new c.h,p=new c.h,d=[0];this.td.Ia()&&8>this.zA;){var m=this.td.ia();if(l.N(m.ac()),p.N(m.xc()),l.scale(this.Xa.fc),p.scale(this.Xa.fc),c.ej.Ou(l,p)?l.x=p.x:c.ej.Mu(l,p)&&(p.x=l.x),this.vk.length=0,c.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,p,this.Xa.KA,this.Xa.at,d,this.Pj,this.Is,this.vk,this.dw),this.eo!=null&&(m=this.vk.slice(0),this.eo.kG(this.eo.ea()-1,m,m.length-1)),c.ej.Nu(l,p)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Yn=!0):(this.sq.Pa(),this.Yn=this.sy(d[0],this.sq)),this.Yn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.uW();break}n==null&&(n=new c.Ea).$k(null,0),this.HD(n),o++}if(this.dw[0]=0,0<o){for(d=this.td.xb();0<o;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),p.N(this.tw.Oa(this.td.jk())),l.scale(this.Xa.fc),p.scale(this.Xa.fc),this.ul&&(c.ej.Ou(l,p)?l.x=p.x:c.ej.Mu(l,p)&&(p.x=l.x)),this.vk.length=0,c.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,p,l,this.Xa.KA,this.Xa.at,null,this.Pj,this.Is,this.vk,this.dw),this.HD(n),o--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.bo,this.ul,this.tk,n,NaN,NaN),this.td.Wb(d),this.td.ia(),o=c.ta.mj(null,n,!0),c.Hg.Nk(n,o,!0,!0,this.Xa.Vb)}return this.Yn=!1,this.td.ia(),n=c.ba.ig(this.sq),c.Hg.Nk(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},a.prototype.HD=function(n){var o=this.vk[0],l=this.Pj[0]-1.570796326794897,p=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var d=this.fi+1.570796326794897;l=d+3.141592653589793-(this.fi-this.Pj[0])}else l=(d=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var m=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),v=!1;if(Math.abs(l-d)<=.5*this.Xa.bo)if(m){var _=n.Oa(n.I()-2);_.scale(this.Xa.fc);var M=new c.ha(0);for(c.kb.Sy(this.Xa.Ub,this.Xa.lc,o.x,o.y,_.x,_.y,M),_=M.u;_<=d;)_+=6.283185307179586;for(;_>d;)_-=6.283185307179586;_<l&&(v=!0)}else v=!0;v?(n.xB(0,n.I()-1),this.ul||((o=new c.h).N(n.Oa(n.I()-1)),o.scale(this.Xa.fc),-3.141592653589793>o.x-this.tk[0]?this.tk[0]-=6.283185307179586:3.141592653589793<o.x-this.tk[0]&&(this.tk[0]+=6.283185307179586)),m||(l=.5*(l+d))):(m?((d=new c.h).N(o),d.scale(1/this.Xa.fc),n.xf(0,-1,d)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.vk[0],d,l,this.Xa.bo,this.ul,this.tk,n,NaN,NaN),this.zA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.vk,l,p,this.ul,this.tk,n),this.fi=this.Is[0]},a.prototype.sy=function(n,o){return this.Xa.sy(this.vk,n,this.Pj[0],this.Is[0],this.ul,o)},a.prototype.Ma=function(){return 0},a}(),u=function(){function a(){}return a.buffer=function(n,o,l,p,d,m){if(n==null)throw c.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new c.Ea(n.description);var v=new a;v.Sg=o,v.Kc=c.cb.tc(o);var _=c.cb.xv(v.Kc);if(v.Vb=m,v.Ub=c.cb.gv(v.Kc),v.lc=_*(2-_),v.fc=v.Kc.Id().ci,v.ra=v.Sg.Ln(),v.Cq=v.Kc.Ln(),v.at=v.Cq*v.fc,v.Bq=1.570796326794897/v.fc,v.GY=3.141592653589793/v.fc,v.Ls=6.283185307179586/v.fc,v.HY=v.Ls/6,v.FA=0,v.FY=1.5707963267948966*v.Ub/v.FA,l==4?(v.Ae=2,v.Yv=!0):(v.Ae=l,v.Yv=!1),v.La=p,v.sb=Math.abs(p),isNaN(d)||.001>d?v.pX():v.ao=d,l=n.K(),c.ba.zd(l)?((l=new c.Ua(n.description)).oc(n,!0),n=l,l=1607):l==197&&(l=new c.l,n.A(l),l.S()<=v.ra||l.da()<=v.ra?((l=new c.Ua(n.description)).bd(n,!1),n=l,l=1607):((l=new c.Ea(n.description)).bd(n,!1),n=l,l=1736)),v.qX(),c.ba.Sn(l)||v.rX(),v.sb<=.5*v.ao)return l!=1736?new c.Ea(n.description):v.Yv?n:c.ej.Sr(n,v.Sg,v.Ae,v.KA,-1,m);if(0>v.La&&l!=1736)return new c.Ea(n.description);if(v.Yv&&c.ba.Ic(l)?(o=c.ej.Sr(n,o,4,NaN,v.ao,m),n=c.cb.Bh(o,v.Sg,v.Kc)):n=c.cb.Bh(n,v.Sg,v.Kc),(n=c.Jh.nj(n,v.Kc)).B())return new c.Ea(n.description);switch(!v.Yv&&c.ba.Ic(l)&&(n=c.ej.jI(v.fc,n)),n=a.CX(n,v.Kc),l){case 1736:o=v.ON(n);break;case 1607:o=v.PN(n);break;case 550:o=v.MN(n);break;case 33:o=v.NN(n);break;default:throw c.i.ga("corrupted_geometry")}return(v=c.cb.Bh(o,v.Kc,v.Sg)).Ll(n.description),v},a.prototype.ON=function(n){var o=new c.Ea;n=new b(this,n,o),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),n=c.jp.pj(n,this.Kc,2);var l=new c.Ed;return l.scale(1/this.fc,1/this.fc),o.Pc(l),o=c.jp.pj(o,this.Kc,2),0<=this.La?c.Ih.local().W(o,n,this.Kc,this.Vb):c.lp.local().W(o,n,this.Kc,this.Vb)},a.prototype.PN=function(n){return n=new b(this,n,null),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),c.jp.pj(n,this.Kc,2)},a.prototype.MN=function(n){return n=new C(this,n),n=c.Ih.local().W(n,this.Kc,this.Vb).next(),c.jp.pj(n,this.Kc,2)},a.prototype.NN=function(n){(n=n.D()).scale(this.fc);var o=new c.Ea;return this.ny(n,!1,o),c.jp.pj(o,this.Kc,2)},a.prototype.sy=function(n,o,l,p,d,m){var v=n[0],_=n[n.length-1],M=v.y>_.y?v.y:_.y,T=c.F.q(this.Ub,this.lc,v.y<_.y?v.y:_.y);if(M=c.F.q(this.Ub,this.lc,M),.001<this.FA-(T+o+this.sb)&&.001<this.FA+(M-o-this.sb))return!1;T=(o=l-1.570796326794897)-3.141592653589793,M=o+3.141592653589793;var I=(l=p+1.570796326794897)+3.141592653589793,O=[NaN],R=[NaN],L=[NaN],G=[NaN];if(p=!1,a.YI(this.Ub,this.lc,this.sb,v,o,T,_,l,O,R),a.YI(this.Ub,this.lc,this.sb,_,I,l,v,T,L,G),(l<O[0]&&O[0]<I||l<R[0]&&R[0]<I)&&(p=!0),p||(T<L[0]&&L[0]<o||T<G[0]&&G[0]<o)&&(p=!0),!p&&d)return!1;for(var q=[],D=n.length-1;0<=D;D--)q.push(n[D]);return m.Pa(),m.$k(null,0),D=[0],a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,o,l,d,D,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,_,l,I,this.bo,d,D,m,O[0],R[0]),a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,q,I,M,d,D,m),a.Jr(this.Ub,this.lc,this.fc,this.sb,v,T,o,this.bo,d,D,m,L[0],G[0]),n=!1,d||(n=this.CE(this.fc,m)),p||n},a.prototype.ny=function(n,o,l){l.Pa(),l.$k(null,0),a.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.bo,6.283185307179586,this.bo,o,[0],l,NaN,NaN),o||this.CE(this.fc,l)},a.prototype.CE=function(n,o){var l=this.pO(n,o);return n=this.qO(n,o),l||n},a.prototype.pO=function(n,o){var l=o.I(),p=!1,d=new c.l;if(o.A(d),!c.s.$(d.H*n,1.570796326794897)&&!c.s.$(d.G*n,-1.570796326794897))return!1;var m=new c.h;for(--l;0<=l;l--)o.D(l,m),(m.y==d.H&&c.s.$(m.y*n,1.570796326794897)||m.y==d.G&&c.s.$(m.y*n,-1.570796326794897))&&(p=!0,this.II(m,l,o));return p},a.prototype.qO=function(n,o){var l=o.Oa(0),p=o.Oa(o.I()-1);return 3.141592653589793<Math.abs(l.x-p.x)*n?(this.NV(o),!0):this.oO(o)},a.prototype.oO=function(n){return 0>n.He()&&(this.MV(n),!0)},a.prototype.II=function(n,o,l){var p=l.I(),d=0<o?o-1:p-1;if(p=l.Oa(o<p-1?o+1:0),d=l.Oa(d),!c.s.$(p.y,n.y)&&!c.s.$(p.x,n.x)){var m=new c.h;m.na(p.x,n.y),l.Db(o,m)}c.s.$(d.y,n.y)||c.s.$(d.x,n.x)||((p=new c.h).na(d.x,n.y),l.xf(0,o,p))},a.prototype.NV=function(n){var o=new c.Ea,l=new c.Ea,p=new c.Ed,d=n.Oa(0),m=n.Oa(n.I()-1),v=new c.h;d.x>m.x?(m=this.Bq,p.gg(-this.Ls,0)):(m=-this.Bq,p.gg(this.Ls,0)),o.add(n,!1),n.Pa(),l.add(o,!1),l.Pc(p),d=new c.l,l.A(d),d.X((this.Ls-d.S())/2,0),d.G=-this.Bq,d.H=this.Bq;for(var _=0;_<l.I();_++)l.D(_,v),o.xf(0,-1,v);for(l.Pc(p),_=0;_<l.I();_++)l.D(_,v),o.xf(0,-1,v);l=o.Oa(0),p=o.Oa(o.I()-1),v.na(p.x,m),o.xf(0,-1,v),v.na(.5*(p.x+l.x),m),o.xf(0,-1,v),v.na(l.x,m),o.xf(0,-1,v),o=c.Jh.ms(o,this.Kc,2,!0,d.v),o=c.Jh.ms(o,this.Kc,2,!0,d.C),o=c.Vd.clip(o,d,this.Cq,NaN),n.add(o,!1)},a.prototype.MV=function(n){var o=new c.l;n.A(o),o.X((this.Ls-o.S())/2,0),o.G=-this.Bq,o.H=this.Bq,n.$k(null,0);var l=new c.h;l.na(o.v,o.G),n.xf(1,-1,l),l.na(o.v,o.H),n.xf(1,-1,l),l.na(.5*(o.v+o.C),o.H),n.xf(1,-1,l),l.na(o.C,o.H),n.xf(1,-1,l),l.na(o.C,o.G),n.xf(1,-1,l),l.na(.5*(o.v+o.C),o.G),n.xf(1,-1,l)},a.my=function(n,o,l,p,d,m,v,_,M,T,I){var O=null;M||((O=new c.h).Sc(),0<I.I()&&(O.N(I.Oa(I.I()-1)),O.scale(l)));var R=new c.ha(0),L=new c.ha(0),G=new c.ha(0),q=new c.h,D=new c.h,H=m[m.length-1];l=1/l;for(var ee=0;ee<m.length;ee++){var te=m[ee];if(ee==0)var Z=v;else ee==m.length-1?Z=_:(c.kb.xd(n,o,H.x,H.y,te.x,te.y,null,null,R,d),Z=R.u-1.570796326794897);c.kb.Ai(n,o,te.x,te.y,p,Z,L,G),M?D.na(L.u,G.u):(q.na(L.u,G.u),a.aJ(te.x,q.x,O.x,T),D.na(T[0]+q.x,q.y),O.N(D)),D.scale(l),I.xf(0,-1,D)}},a.Jr=function(n,o,l,p,d,m,v,_,M,T,I,O,R){if(!(v-m<_)){var L=new c.ha(0),G=new c.ha(0),q=new c.h,D=new c.h,H=null;M||((H=new c.h).Sc(),0<I.I()&&(H.N(I.Oa(I.I()-1)),H.scale(l)));var ee=c.P.truncate(Math.ceil(m/_)),te=ee++*_;for(te==m&&(te=ee++*_),l=1/l;te<v+_&&(m<O&&O<te?(te=O,ee--):m<R&&R<te&&(te=R,ee--),!(te>=v));)c.kb.Ai(n,o,d.x,d.y,p,te,L,G),M?D.na(L.u,G.u):(q.na(L.u,G.u),a.aJ(d.x,q.x,H.x,T),D.na(T[0]+q.x,q.y),H.N(D)),D.scale(l),I.xf(0,-1,D),m=te,te=ee++*_}},a.YI=function(n,o,l,p,d,m,v,_,M,T){var I=new c.h,O=new c.h,R=new c.ha(0),L=new c.ha(0);for(c.kb.Ai(n,o,p.x,p.y,l,d,R,L),I.na(R.u,L.u),c.kb.Ai(n,o,p.x,p.y,l,m,R,L),O.na(R.u,L.u),l=new c.ha(0),c.kb.Sy(n,o,v.x,v.y,I.x,I.y,l),M[0]=l.u,c.kb.Sy(n,o,v.x,v.y,O.x,O.y,l),T[0]=l.u;M[0]<=T[0];)M[0]+=6.283185307179586;for(;M[0]>T[0];)M[0]-=6.283185307179586;for(;M[0]>=_;)M[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;M[0]<_;)M[0]+=6.283185307179586,T[0]+=6.283185307179586},a.aJ=function(n,o,l,p){if(isNaN(l)){for(;3.141592653589793<p[0]+o-n;)p[0]-=6.283185307179586;for(;3.141592653589793<n-(p[0]+o);)p[0]+=6.283185307179586}else 3.141592653589793<p[0]+o-l?p[0]-=6.283185307179586:3.141592653589793<l-(p[0]+o)&&(p[0]+=6.283185307179586)},a.CX=function(n,o){var l=n.K(),p=c.ba.Ic(l)?n.ea():l==550?n.I():1;if(p==1)return n;var d=new c.ja(0);d.resize(p);for(var m=[],v=new c.l,_=0;_<p;_++){if(d.write(_,_),c.ba.Ic(l)){n.Tj(_,v);var M=v.tf()}else M=n.Oa(_);M=c.RK.SX(o,M),m[_]=M}for(d.Wd(0,d.size,function(T,I){return m[T]<m[I]?-1:m[T]>m[I]?1:0}),o=n.Ja(),_=0;_<p;_++)v=d.read(_),c.ba.Ic(l)?o.addPath(n,v,!0):o.Gd(n,v,v+1);return o},a.prototype.qX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new c.h;o.na(0,10*this.fc);var l=45*this.fc,p=new c.ha(0),d=new c.ha(0),m=new c.ha(0),v=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),I=new c.ha(0),O=new c.h,R=new c.h,L=new c.h,G=new c.h;c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,0,p,d),O.na(p.u,d.u),c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,l,m,v),R.na(m.u,v.u),p=new c.ha(0),d=new c.ha(0);for(var q=new c.ha(0);c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,.5*(0+l),_,M),L.na(_.u,M.u),c.kb.xd(this.Ub,this.lc,O.x,O.y,R.x,R.y,p,d,null,2),c.kb.qj(this.Ub,this.lc,O.x,O.y,.5*p.u,d.u,T,I,2),G.na(T.u,I.u),c.kb.xd(this.Ub,this.lc,L.x,L.y,G.x,G.y,q,null,null,2),!(q.u<=this.ao);)l*=.9,c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,l,m,v),R.na(m.u,v.u);this.bo=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},a.prototype.rX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var o=new c.h,l=new c.h;o.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var p=new c.ha(0),d=new c.ha(0),m=new c.ha(0);c.kb.xd(this.Ub,this.lc,o.x,o.y,l.x,l.y,m,p,d,this.Ae);var v=new c.ha(0),_=new c.ha(0),M=new c.ha(0),T=new c.ha(0),I=new c.h,O=new c.ha(0),R=new c.ha(0),L=new c.ha(0),G=new c.ha(0),q=new c.ha(0),D=new c.ha(0),H=new c.ha(0),ee=new c.ha(0),te=new c.ha(0),Z=new c.h,ce=new c.h,ye=new c.h,Me=new c.h,xe=1;p=p.u,d=d.u+1.570796326794897,m=m.u,c.kb.Ai(this.Ub,this.lc,o.x,o.y,n,p-1.570796326794897,R,L),Z.na(R.u,L.u),c.kb.Ai(this.Ub,this.lc,l.x,l.y,n,d,G,q),ce.na(G.u,q.u),R=new c.ha(0),L=new c.ha(0),d=new c.ha(0);for(var be=new c.ha(0);c.kb.qj(this.Ub,this.lc,o.x,o.y,.5*(0+xe)*m,p,v,_,this.Ae),I.na(v.u,_.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,I.x,I.y,null,null,O,this.Ae),c.kb.Ai(this.Ub,this.lc,I.x,I.y,n,O.u+1.570796326794897,D,H),ye.na(D.u,H.u),c.kb.xd(this.Ub,this.lc,Z.x,Z.y,ce.x,ce.y,R,L,null,2),c.kb.qj(this.Ub,this.lc,Z.x,Z.y,.5*R.u,L.u,ee,te,2),Me.na(ee.u,te.u),c.kb.xd(this.Ub,this.lc,ye.x,ye.y,Me.x,Me.y,d,null,null,2),!(d.u<=this.ao);)xe*=.9,c.kb.qj(this.Ub,this.lc,o.x,o.y,xe*m,p,M,T,this.Ae),l.na(M.u,T.u),c.kb.xd(this.Ub,this.lc,o.x,o.y,l.x,l.y,null,null,be,this.Ae),c.kb.Ai(this.Ub,this.lc,l.x,l.y,n,be.u+1.570796326794897,G,q),ce.na(G.u,q.u);1e5<(n=xe*m)&&(n=1e5),this.KA=n},a.prototype.pX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.ao=n},a}();c.PK=u}(W||(W={})),function(c){var C=function(){function b(){}return b.Of=function(u,a){var n=new c.h;n.N(a),u.push(n)},b.wp=function(u,a){u.add(a.x),u.add(a.y)},b.bB=function(u){u.Dh(u.size-2)},b.iB=function(u,a){a.na(u.get(u.size-2),u.get(u.size-1))},b.Sr=function(u,a,n,o,l,p){if(u==null)throw c.i.O();var d=u.K();if(u.B()||c.ba.Sn(d))return u;var m=new b;m.Sg=a,m.Kc=c.cb.tc(a);var v=c.cb.xv(m.Kc);if(m.Vb=p,m.Ub=c.cb.gv(m.Kc),m.lc=v*(2-v),m.fc=m.Kc.Id().ci,m.Cq=m.Kc.Ln(),m.at=m.Cq*m.fc,m.uA=o,m.tA=l,m.Ae=n,d==197?(n=new c.Ea(u.description)).bd(u,!1):c.ba.zd(d)?(n=new c.Ua(u.description)).oc(u,!0):n=u,m.Ae!=4){if((a=m.Sg.Nb(m.Kc)==0?c.cb.Bh(n,m.Sg,m.Kc):c.Jh.nj(n,m.Kc)).B())return a;a=b.jI(m.fc,a),a=m.Uy(a),a=c.jp.pj(a,m.Kc,m.Ae),m=c.cb.Bh(a,m.Kc,m.Sg)}else{if(c.Gg.Tb(a)==2?(u=c.cb.ol(),(a=c.Xk.local().W(n,u,a,p))==u&&(a=new c.Ea,u.copyTo(a))):a=c.Jh.nj(n,m.Kc),a.B())return a;m=m.uX(a)}return m},b.jI=function(u,a){var n=new c.l;if(a.yc(n),3.141592653589793>n.S()*u)return a;var o=!1;n=a.Ha();for(var l=new c.h,p=new c.h;n.ab();)for(;n.Ia();){var d=n.ia();if(l.N(d.ac()),p.N(d.xc()),l.scale(u),p.scale(u),3.141592653589793<Math.abs(l.x-p.x)){var m=b.Nu(l,p);if(!m){o=!0;break}if(6.283185307179586<Math.abs(l.x-p.x)){o=!0;break}}}if(!o)return a;o=a.Ja();var v=1<a.description.Ba,_=new c.h,M=new c.h,T=new c.h,I=new c.h,O=new c.Ta;for(n.aj();n.ab();)for(var R=NaN,L=[0];n.Ia();){if(d=n.ia(),l.N(d.ac()),p.N(d.xc()),l.scale(u),p.scale(u),isNaN(R)?(b.Yi(l.x,NaN,L),M.N(l)):M.N(T),R=M.x,m=b.Nu(l,p)){if(6.283185307179586<p.x-l.x)for(;6.283185307179586<p.x-l.x;)p.x-=6.283185307179586;if(-6.283185307179586>p.x-l.x)for(;-6.283185307179586>p.x-l.x;)p.x+=6.283185307179586;b.Yi(p.x,NaN,L),T.N(p)}else _.N(p),b.sU(_),b.Yi(_.x,R,L),T.na(L[0]+_.x,_.y);.5>Math.abs(T.x-p.x)&&T.N(p),v?(d.Vw(0,O),I.N(M),I.scale(1/u),O.Db(I),(m=n.xm())?o.nf(O):o.lineTo(O),n.Rn()&&!a.ec(n.gb)&&(d.Vw(1,O),I.N(T),I.scale(1/u),O.Db(I),o.lineTo(O))):((m=n.xm())&&o.Cz(null,0),d=o.ea()-1,I.N(M),I.scale(1/u),o.xf(d,-1,I),n.Rn()&&!a.ec(n.gb)&&(I.N(T),I.scale(1/u),o.xf(d,-1,I)))}return o},b.nF=function(u,a,n,o,l,p,d,m,v,_,M,T){var I=new c.h,O=new c.h,R=0<o.compare(l);b.$I(R,o,l,I,O),b.oF(u,a,n,I,O,p,NaN,d,m,v,_,null,M,T),R&&b.$B(v,_,null,M)},b.prototype.Uy=function(u){var a=u.Ja(),n=u.Ha(),o=[],l=null,p=null,d=1<u.description.Ba;d&&(l=new c.ce(0),p=new c.hg);for(var m=[0],v=new c.h,_=new c.h,M=new c.h,T=new c.h;n.ab();)for(m[0]=0;n.Ia();){var I=n.ia();v.N(I.ac()),_.N(I.xc()),v.scale(this.fc),_.scale(this.fc);var O=0<v.compare(_);b.$I(O,v,_,M,T),o.length=0,l!=null&&l.Dh(0),0<this.uA?b.oF(this.Ub,this.lc,this.Ae,M,T,this.uA,this.tA,this.at,null,null,null,d?l:null,o,m):b.VQ(this.Ub,this.lc,this.Ae,M,T,this.tA,this.at,d?l:null,o,m),O&&b.$B(null,null,d?l:null,o),o[0].N(I.ac()),o[o.length-1].N(I.xc());for(var R=1;R<o.length-1;R++)o[R].scale(1/this.fc);d?(O=b.ZI(O,I,p),b.ND(n.xm(),n.Rn()&&!u.ec(n.gb),I,O,l,o,a)):b.MD(n.xm(),n.Rn()&&!u.ec(n.gb),o,a)}return a},b.prototype.uX=function(u){var a=u.Ja(),n=u.Ha(),o=[],l=null,p=new c.hg,d=1<u.description.Ba;for(d&&(l=new c.ce(0));n.ab();)for(;n.Ia();){var m=n.ia(),v=m.ac(),_=m.xc();v=0<v.compare(_),_=b.ZI(v,m,p),o.length=0,l!=null&&l.Dh(0),b.tX(this.Ub,this.lc,this.fc,_,this.Sg,this.uA,this.tA,d?l:null,o),v&&b.$B(null,null,d?l:null,o),d?b.ND(n.xm(),n.Rn()&&!u.ec(n.gb),m,_,l,o,a):b.MD(n.xm(),n.Rn()&&!u.ec(n.gb),o,a)}return a},b.MD=function(u,a,n,o){u&&o.Cz(null,0),u=o.ea()-1;var l=n.slice(0);o.kG(u,l,l.length-1),a&&o.xf(u,-1,n[n.length-1])},b.ND=function(u,a,n,o,l,p,d){var m=new c.Ta;if(n.Uo(m),u?d.nf(m):d.lineTo(m),2<p.length){u=o.Rb();for(var v=1;v<p.length-1;v++){var _=o.HG(l.get(v)*u);o.Vw(_,m),m.Db(p[v]),d.lineTo(m)}}a&&(n.Qo(m),d.lineTo(m))},b.oF=function(u,a,n,o,l,p,d,m,v,_,M,T,I,O){var R=new c.ha(0),L=new c.ha(0),G=new c.ha(0);c.kb.xd(u,a,o.x,o.y,l.x,l.y,G,R,L,n),G=G.u;var q=R=R.u;0>q&&(q+=6.283185307179586),0>(L=L.u)&&(L+=6.283185307179586),v!=null&&(v[0]=G),_!=null&&(_[0]=q),M!=null&&(M[0]=L),_=v=NaN,T!=null&&(v=((_=c.F.Ch(u,a))-(M=c.F.q(u,a,o.y)))/G,_=(_+M)/G),M=b.Ou(o,l),L=b.Mu(o,l),q=M||L;var D=b.zE(o,l,m),H=new c.ha(0),ee=new c.ha(0),te=new c.h,Z=new c.h,ce=new c.h;b.Yi(o.x,NaN,O);var ye=[O[0]];if(G<=p)b.Of(I,o),b.Yi(l.x,NaN,O),T!=null&&T.add(0),q?(M&&b.eB(o,l,T,I),L&&b.cB(o,l,T,I)):D?b.dB(o,l,R,v,_,T,I):0<d&&(Z.na(o.x-ye[0],o.y),te.na(l.x-O[0],l.y),b.Ty(u,a,n,o,G,R,Z,te,0,1,d,T,I,ye)),b.Of(I,l);else{var Me=G/((p=1+c.P.truncate(Math.ceil(G/p)))-1),xe=new c.h,be=0;b.Of(I,o),xe.N(o),Z.na(o.x-O[0],o.y),T!=null&&T.add(0);for(var Ce=1;Ce<p;Ce++){if(Ce<p-1){c.kb.qj(u,a,o.x,o.y,Ce*Me,R,H,ee,n),te.na(H.u,ee.u),b.Yi(te.x,xe.x,O),ce.na(O[0]+te.x,te.y);var Ze=Ce/(p-1)}else b.Yi(l.x,NaN,O),te.na(l.x-O[0],l.y),ce.N(l),Ze=1;q?(Ce==1&&M&&b.eB(o,ce,T,I),Ce==p-1&&L&&b.cB(xe,l,T,I)):D?b.yE(xe,ce,m)&&(o.x<l.x?xe.x>ce.x&&(O[0]+=6.283185307179586,ce.na(O[0]+te.x,te.y)):xe.x<ce.x&&(O[0]-=6.283185307179586,ce.na(O[0]+te.x,te.y)),b.dB(xe,ce,R,v,_,T,I)):0<d&&b.Ty(u,a,n,o,G,R,Z,te,be,Ze,d,T,I,ye),b.Of(I,ce),T!=null&&T.add(Ze),xe.N(ce),Z.N(te),ye[0]=O[0],be=Ze}}},b.VQ=function(u,a,n,o,l,p,d,m,v,_){var M=new c.ha(0),T=new c.ha(0),I=new c.ha(0);c.kb.xd(u,a,o.x,o.y,l.x,l.y,I,M,T,n),T=I.u,M=M.u;var O=I=NaN;if(m!=null){O=c.F.Ch(u,a);var R=c.F.q(u,a,o.y);I=(O-R)/T,O=(O+R)/T}R=b.Ou(o,l);var L=b.Mu(o,l),G=R||L;d=b.zE(o,l,d);var q=b.Nu(o,l);q=G||d||q,b.Yi(o.x,NaN,_);var D=new c.h;b.Of(v,o),D.N(o),m!=null&&m.add(0),q?(G?(R&&b.eB(o,l,m,v),L&&b.cB(o,l,m,v)):d&&b.dB(o,l,M,I,O,m,v),b.Yi(l.x,NaN,_),b.Of(v,l)):T<=p?(b.Yi(l.x,NaN,_),b.Of(v,l)):(I=new c.h,d=new c.h,I.N(o),d.N(l),I.x-=_[0],d.x-=_[0],-3.141592653589793>d.x?d.x+=6.283185307179586:3.141592653589793<d.x&&(d.x-=6.283185307179586),b.Ty(u,a,n,o,T,M,I,d,0,1,p,m,v,_),b.Of(v,l),b.Yi(l.x,NaN,_)),m!=null&&m.add(1)},b.Ty=function(u,a,n,o,l,p,d,m,v,_,M,T,I,O){var R=new c.h,L=new c.h;R.na(d.x+O[0],d.y),new c.ha(0),new c.ha(0),new c.ha(0),new c.ha(0);var G=new c.ha(0),q=new c.ha(0),D=new c.ha(0),H=new c.h,ee=new c.h,te=new c.h,Z=new c.h;H.N(d),ee.N(m),d=new c.ce(0),m=new c.ce(0),b.wp(d,ee),m.add(_);var ce=new c.h,ye=new c.zb,Me=[];for(b.SJ(4,Me);0<d.size;){for(var xe,be=!1,Ce=NaN,Ze=0;3>Ze;Ze++)if(xe=Me[Ze]*_+(1-Me[Ze])*v,c.kb.qj(u,a,o.x,o.y,xe*l,p,G,q,n),te.na(G.u,q.u),Ze==0&&(Ce=xe,Z.N(te)),b.NW(H,te,ee,ye),ye.ic(ye.fe(te,!0),ce),c.kb.xd(u,a,te.x,te.y,ce.x,ce.y,D,null,null,2),D.u>M){be=!0;break}be?(ee.N(Z),_=Ce,b.wp(d,ee),m.add(_)):(b.bB(d),m.Fn(m.size-1,1,m.size-1),0<d.size&&(b.Yi(ee.x,R.x,O),L.na(O[0]+ee.x,ee.y),b.Of(I,L),R.N(L),T!=null&&T.add(_),H.N(ee),v=_,b.iB(d,ee),_=m.get(m.size-1)))}},b.tX=function(u,a,n,o,l,p,d,m,v){var _=new c.h,M=new c.h,T=new c.h,I=new c.h,O=new c.h,R=new c.h,L=new c.h,G=new c.h,q=new c.h,D=new c.h,H=new c.ha(0),ee=new c.ha(0),te=new c.h,Z=[[],[]],ce=c.Gg.Tb(l)==1;l=l.Yd(0);var ye=o.ac(),Me=o.xc();ce?(R.na(ye.x*n,ye.y*n),L.na(Me.x*n,Me.y*n)):(Z[0][0]=ye.x,Z[0][1]=ye.y,Z[1][0]=Me.x,Z[1][1]=Me.y,c.cb.wt(),R.x=Z[0][0]*n,R.y=Z[0][1]*n,L.x=Z[1][0]*n,L.y=Z[1][1]*n);var xe=0,be=0,Ce=1,Ze=o.Qn();_.N(ye),M.N(Me),Me=new c.ce(0);var Qe=new c.ce(0),_t=new c.ce(0);b.wp(Me,M),b.wp(Qe,L),_t.add(Ce),b.Of(v,_),m!=null&&m.add(be);var xt=[],Ei=0<d?Ze?5:3:Ze?5:1;b.SJ(Ei,xt);for(var Bt=new c.ha(0),Ue=new c.ha(0),Nt=new c.ha(0),dt=new c.ha(0),hi=new c.ha(0),Qt=new c.ha(0),jr=new c.ha(0);0<Qe.size;){var wt=!1,Ji=NaN;for(c.kb.xd(u,a,R.x,R.y,L.x,L.y,Bt,Ue,null,2),ye=0;ye<Ei&&!(ye==0&&(!Ze&&0>=d&&Bt.u<=p&&3.141592653589793>Math.abs(R.x-L.x)||o.Tx(be,Ce)<=l));ye++){var at=xt[ye]*Ce+(1-xt[ye])*be;if(o.ic(at,T),ce?G.na(T.x*n,T.y*n):(Z[0][0]=T.x,Z[0][1]=T.y,c.cb.wt(),G.x=Z[0][0]*n,G.y=Z[0][1]*n),ye==0&&(Ji=at,O.N(T),D.N(G),0<p&&(Bt.u>p||3.141592653589793<=Math.abs(R.x-L.x)))){wt=!0;break}if(Ze&&0<p){if(c.kb.xd(u,a,R.x,R.y,G.x,G.y,Nt,null,null,2),Nt.u>p||3.141592653589793<=Math.abs(R.x-G.x)){wt=!0;break}}else if(0<d){if(Ze?(I.GS(_,M,xt[ye]),ce?q.na(I.x*n,I.y*n):(Z[0][0]=I.x,Z[0][1]=I.y,c.cb.wt(),q.x=Z[0][0]*n,q.y=Z[0][1]*n)):(I.N(T),q.N(G)),c.kb.xd(u,a,R.x,R.y,q.x,q.y,dt,null,null,2),!(dt.u<=Bt.u)){wt=!0;break}if(c.kb.qj(u,a,R.x,R.y,dt.u,Ue.u,H,ee,2),te.na(H.u,ee.u),c.kb.xd(u,a,te.x,te.y,G.x,G.y,hi,null,null,2),hi.u>d){wt=!0;break}if(Ze){if(c.kb.xd(u,a,te.x,te.y,q.x,q.y,Qt,null,null,2),Qt.u>d){wt=!0;break}if(c.kb.xd(u,a,q.x,q.y,G.x,G.y,jr,null,null,2),jr.u>d){wt=!0;break}}}}wt?(M.N(O),L.N(D),Ce=Ji,b.wp(Me,M),b.wp(Qe,L),_t.add(Ce)):(b.bB(Me),b.bB(Qe),_t.Fn(_t.size-1,1,_t.size-1),b.Of(v,M),xe+=Bt.u,m!=null&&m.add(xe),0<Qe.size&&(_.N(M),R.N(L),be=Ce,b.iB(Me,M),b.iB(Qe,L),Ce=_t.get(_t.size-1)))}if(m!=null)for(u=1/xe,ye=0;ye<m.size;ye++)m.write(ye,m.read(ye)*u)},b.$B=function(u,a,n,o){o.reverse(),n!=null&&n.pi(0,n.size,1),n=u!=null?u[0]:NaN,o=a!=null?a[0]:NaN,u!=null&&(u[0]=o),a!=null&&(a[0]=n)},b.$I=function(u,a,n,o,l){u?(o.N(n),l.N(a)):(o.N(a),l.N(n))},b.ZI=function(u,a,n){return u?(n.create(a.K()),a.copyTo(n.get()),n.get().reverse(),n.get()):a},b.Yi=function(u,a,n){if(isNaN(a)){for(;3.141592653589793<n[0]-u;)n[0]-=6.283185307179586;for(;3.141592653589793<u-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+u-a?n[0]-=6.283185307179586:3.141592653589793<a-(n[0]+u)&&(n[0]+=6.283185307179586)},b.NW=function(u,a,n,o){3.141592653589793>Math.abs(a.x-u.x)?(o.Ec(u),3.141592653589793<=n.x-u.x?o.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=u.x-n.x?o.Sl(n.x+6.283185307179586,n.y):o.Sl(n.x,n.y)):(o.Ec(n),3.141592653589793<=u.x-n.x?o.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=n.x-u.x?o.Sl(u.x+6.283185307179586,u.y):o.Sl(u.x,u.y))},b.SJ=function(u,a){for(var n=0;n<u;n++){var o=Math.ceil(n/2)/(u+1);n%2!=0&&(o=-o),a[n]=.5+o}},b.Ou=function(u,a){return!!(c.s.$(u.y,1.570796326794897)&&!c.s.$(a.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)&&!c.s.$(a.y,-1.570796326794897))},b.Mu=function(u,a){return!!(c.s.$(a.y,1.570796326794897)&&!c.s.$(u.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897)&&!c.s.$(u.y,-1.570796326794897))},b.zE=function(u,a,n){return!(!b.yE(u,a,n)||c.s.$(u.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)||c.s.$(a.y,1.570796326794897)||c.s.$(a.y,-1.570796326794897))},b.yE=function(u,a,n){return Math.abs(Math.abs(u.x-a.x)-3.141592653589793)<=n},b.Nu=function(u,a){return!!(c.s.$(u.y,1.570796326794897)&&c.s.$(a.y,1.570796326794897)||c.s.$(u.y,-1.570796326794897)&&c.s.$(a.y,-1.570796326794897))},b.eB=function(u,a,n,o){if(0<u.y){var l=new c.h;l.na(a.x,1.570796326794897)}else(l=new c.h).na(a.x,-1.570796326794897);c.s.$(u.x,l.x)||c.s.$(a.y,l.y)||(b.Of(o,l),n!=null&&n.add(0))},b.cB=function(u,a,n,o){if(0<a.y){var l=new c.h;l.na(u.x,1.570796326794897)}else(l=new c.h).na(u.x,-1.570796326794897);c.s.$(a.x,l.x)||c.s.$(u.y,l.y)||(b.Of(o,l),n!=null&&n.add(1))},b.dB=function(u,a,n,o,l,p,d){c.s.Dd(n)?(0<1.570796326794897-u.y&&((n=new c.h).na(u.x,1.570796326794897),b.Of(d,n),p!=null&&p.add(o)),0<1.570796326794897-a.y&&((n=new c.h).na(a.x,1.570796326794897),b.Of(d,n),p!=null&&p.add(o))):(0<1.570796326794897+u.y&&((n=new c.h).na(u.x,-1.570796326794897),b.Of(d,n),p!=null&&p.add(l)),0<1.570796326794897+a.y&&((n=new c.h).na(a.x,-1.570796326794897),b.Of(d,n),p!=null&&p.add(l)))},b.sU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},b}();c.ej=C}(W||(W={})),function(c){c.jp=function(){function C(){}return C.pj=function(b,u,a){if(b==null||u==null||!c.cb.Xc(u))throw c.i.O();if(b.B())return b;var n=b,o=n.K();if(c.ba.Ic(o)){n=c.Jh.nj(b,u),b=new c.l,n.A(b),o=c.ta.Xd(u,b,!1);for(var l=c.cb.ih(u),p=Math.floor((b.v-l.v)/l.S())*l.S()+l.v;p<b.C;)p>b.v+o&&p<b.C-o&&(n=c.Jh.ms(n,u,a,!0,p)),p+=l.S()}else{if(o==197)return(b=new c.Ea(n.description)).bd(n,!1),C.pj(b,u,a);if(c.ba.zd(o))return(b=new c.Ua(n.description)).oc(n,!0),C.pj(b,u,a)}return C.Py(n,u)},C.Py=function(b,u){if(b==null||u==null||!c.cb.Xc(u))throw c.i.O();if(b.B())return b;var a=b.K();return a==197?(a=new c.Ea(b.description)).bd(b,!1):c.ba.zd(a)?(a=new c.Ua(b.description)).oc(b,!0):a=b,(a=c.Jh.nj(a,u)).B()?a:c.Gg.Tb(u)==1?c.Jh.Gn(a,u,0,a!=b,0):C.HQ(a,u,a!=b)},C.HQ=function(b,u,a){if(!c.cb.Xc(u))throw c.i.O();if(b.B())return b;var n=c.cb.bf(u),o=-180*n;return n*=360,c.Gg.Tb(u)==2&&(n=(o=c.cb.ih(u)).C,n-=o=o.v),c.Jh.Jp(b,o,n,u,a,0,!0)},C}()}(W||(W={})),function(c){c.tY=function(){function C(){}return C.R=function(b){return 0>b?-b:b},C.Mb=function(b,u){return 0<=u?C.R(b):-C.R(b)},C.$=function(b,u){return b==u||C.R(b-u)<=C.DC*(1+(C.R(b)+C.R(u))/2)},C.Dd=function(b){return b==0||C.R(b)<=C.DC},C.Ch=function(b,u){var a=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return b/(1+u)*(1+a*(.25+a*(.015625+1/256*a)))*C.yL},C.yL=1.5707963267948966,C.DC=3552713678800501e-30,C}()}(W||(W={})),function(c){var C=function(u){this.Xf=u,this.Lk=this.Xf.getCode(),0>this.Lk&&(this.Lk=0)};c.vY=C;var b=function(){function u(a){a===void 0&&(a=null),this.Ej=null,this.Vn=!1,a!==null&&(this.Ej=new C(a))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Lk:0},u.prototype.Pf=function(){var a=new u;return this.copyTo(a),a},u.prototype.copyTo=function(a){a.Ej=this.Ej,a.Vn=this.Vn},u.prototype.Lz=function(){this.Vn=!this.Vn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Xf:null},u.prototype.FJ=function(a){if(0>=a)throw c.i.O();if(a!=this.Fc()){if((a=c.qf.geogtran(a))==null)throw c.i.O("Geogtran not found.");this.Ej=new C(a)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Xf.toString()},u.prototype.lX=function(a){if(a==null)throw c.i.O();var n=null;try{n=c.qf.fromString(c.Tc.PE_TYPE_GEOGTRAN,a)}catch{throw c.i.O()}this.Ej=new C(n)},u.prototype.Nb=function(a){return a==this||!(!(a instanceof u)||(0>=this.Fc()||this.Fc()!=a.Fc())&&!this.sm().isEqual(a.sm()))&&this.Vn==a.Vn},u.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a},u.create=function(a,n){var o=new u;return o.FJ(a),n&&o.Lz(),o},u.oP=function(a,n){var o=new u;return o.lX(a),n&&o.Lz(),o},u}();c.Cx=b}(W||(W={})),function(c){var C=function(){function u(){}return u.construct=function(a,n,o,l){var p=new u;return p.jw=a,p.kw=n,p.IY=o,p.JY=l,p},u.zy=function(a,n){return a.jw==n.jw?a.kw==n.kw?0:a.kw<n.kw?-1:1:a.jw<n.jw?-1:1},u}(),b=function(){function u(){this.qT=[],this.rT=[],this.rp()}return u.fz=function(){return u.dK==null&&(u.dK=new u),u.dK},u.prototype.rp=function(){this.cD(this.qT),this.cD(this.rT)},u.prototype.cD=function(a){try{var n=[];n=n.sort(C.zy);for(var o=0;o<n.length;o++)a.push(n[o])}catch{}},u}();c.uY=b}(W||(W={})),function(c){var C=function(){function b(){}return b.prototype.sD=function(u){this.Gk=u},b.prototype.QM=function(u){this.Gb=u},b.prototype.rD=function(u){this.Ao=u},b.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},b.uE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},b.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},b}();c.Vk=C}(W||(W={})),function(c){c.bc=function(){function C(){}return C.LT=function(b){var u=new c.Ea;return u.rx(b.gs(),b.js()),u.Aj(b.gs(),b.hs()),u.Aj(b.fs(),b.hs()),u.Aj(b.fs(),b.js()),u},C.Bh=function(b,u){return b===null?null:c.Gx.local().W(b,u,null)},C.bY=function(b,u){var a=c.Ih.local();return b=new c.$c(b),a.W(b,u,null).next()},C.km=function(b,u,a){return c.lp.local().W(b,u,a,null)},C.fp=function(b,u,a){return c.Jx.local().W(b,u,a,null)},C.NX=function(b,u,a){var n=c.Jx.local();for(b=new c.$c(b),u=new c.$c(u),a=n.W(b,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.Nb=function(b,u,a){return c.fj.local().W(3,b,u,a,null)},C.NP=function(b,u,a){return c.fj.local().W(4,b,u,a,null)},C.JS=function(b,u,a){var n=c.Xk.local();for(b=new c.$c(b),u=new c.$c(u),a=n.W(b,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.KP=function(b,u,a){var n=c.lp.local();for(b=new c.$c(b),u=new c.$c(u),a=n.W(b,u,a,null),n=[];(u=a.next())!=null;)n.push(u);return n},C.Fa=function(b,u,a){return c.Xk.local().W(b,u,a,null)},C.iY=function(b,u,a){return c.fj.local().W(2,b,u,a,null)},C.contains=function(b,u,a){return c.fj.local().W(1,b,u,a,null)},C.vP=function(b,u,a){return c.fj.local().W(16,b,u,a,null)},C.touches=function(b,u,a){return c.fj.local().W(8,b,u,a,null)},C.vU=function(b,u,a){return c.fj.local().W(32,b,u,a,null)},C.LS=function(b,u,a){return c.fj.local().W(1073741824,b,u,a,null)},C.sB=function(b,u,a,n){return c.tL.local().W(b,u,a,n,null)},C.ub=function(b,u,a,n){var o=null;if(a!=null){if(o=a.Id(),n!=null&&o.Fc()!=n.Fc()&&o.od!=n.od)throw c.i.Zk()}else if(n!=null)throw c.i.O();return b=c.kL.local().W(b,u,null),o!==null&&n!==null&&(b=c.Uc.Ph(b,o,n)),b},C.clip=function(b,u,a){return c.eL.local().W(b,c.l.construct(u.gs(),u.js(),u.fs(),u.hs()),a,null)},C.fl=function(b,u,a){if(b==null||u==null)return null;for(b=c.gL.local().W(!0,b,u,a,null),u=[];(a=b.next())!=null;)a.B()||u.push(a);return u.slice(0)},C.GN=function(b,u,a,n,o,l,p,d){if(o===!0)return C.HN(b,u,a,n,l,p,d);if(o=a,u!=null){if(p=u.Id(),n!=null&&p.Fc()!=n.Fc()){if(p.od!=n.od)throw c.i.Zk();o=[],c.Uc.RE(a,a.length,n,p,o)}}else if(n!=null)throw c.i.O();if(a=c.uC.local(),l){for(b=new c.$c(b),u=a.W(b,u,o,l,null),b=[];(l=u.next())!=null;)b.push(l);l=b.slice(0)}else for(l=[],n=0;n<b.length;n++)l[n]=a.W(b[n],u,o[n],null);return l},C.HN=function(b,u,a,n,o,l,p){if(u===null||(n==null&&(n=u.Fc()!==4326?u.Id():c.Uc.ah(9001)),n.od!==0))throw c.i.O();if(c.Uc.RE(a,a.length,n,c.Uc.ah(9001),a),n=c.zC.local(),o){for(b=new c.$c(b),u=n.W(b,u,l,a,p,!1,o,null),a=[];(l=u.next())!=null;)a.push(l);o=a.slice(0)}else{o=[];for(var d=0;d<b.length;d++)o[d]=n.W(b[d],u,l,a[d],p,!1,null)}return o},C.buffer=function(b,u,a,n,o,l,p){var d=a;if(o===!1){if(u!=null){if(o=u.Id(),n!=null&&o.Fc()!=n.Fc()){if(o.od!=n.od)throw c.i.Zk();d=c.Uc.Ph(a,n,o)}}else if(n!=null)throw c.i.O();b=c.uC.local().W(b,u,d,null)}else{if(u===null||(n==null&&(n=u.Fc()!==4326?u.Id():c.Uc.ah(9001)),n.od!==0))throw c.i.O();d=c.Uc.Ph(a,n,c.Uc.ah(9001)),b=c.zC.local().W(b,u,l,d,p,!1,null)}return b},C.tU=function(b,u,a,n,o,l,p){if(u!=null){var d=u.Id();if(p!=null&&d.Fc()!=p.Fc()){if(d.od!=p.od)throw c.i.Zk();a=c.Uc.Ph(a,p,d)}}else if(p!=null)throw c.i.O();for(b=new c.$c(b),u=c.CC.local().W(b,u,a,n,o,l,null),a=[];(n=u.next())!=null;)a.push(n);return a.slice(0)},C.offset=function(b,u,a,n,o,l,p){if(u!=null){var d=u.Id();if(p!=null&&d.Fc()!=p.Fc()){if(d.od!=p.od)throw c.i.Zk();a=c.Uc.Ph(a,p,d)}}else if(p!=null)throw c.i.O();return c.CC.local().W(b,u,a,n,o,l,null)},C.cP=function(b){return c.wC.local().W(b,null)},C.dP=function(b,u){var a=c.wC.local();for(b=new c.$c(b),u=a.W(b,u,null),a=[];(b=u.next())!=null;)a.push(b);return a},C.iz=function(b,u,a){return c.Hx.local().iz(b,u,a)},C.jz=function(b,u){return c.Hx.local().jz(b,u)},C.kz=function(b,u,a,n){return c.Hx.local().kz(b,u,a,n)},C.ZB=function(b,u){return c.$l.local().W(b,u,!1,null)},C.WS=function(b,u){return c.$l.local().ts(b,u,null)},C.KQ=function(b,u,a,n,o){var l=c.yC.local();if(u!=null){if(u=u.Id(),o!=null&&u.Fc()!=o.Fc()){if(u.od!=o.od)throw c.i.Zk();a=c.Uc.Ph(a,o,u)}}else if(o!=null)throw c.i.O();return l.W(b,a,n,null)},C.Sr=function(b,u,a,n){var o=c.Zl.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.od!=n.od)throw c.i.Zk();a=c.Uc.Ph(a,n,u)}}else if(n!=null)throw c.i.O();return o.W(b,a,null)},C.Ry=function(b,u,a,n,o){o===void 0&&(o=0);var l=c.mL.local();if(o==4||o!==0)throw c.i.Fe();if(n!==null){if(n.od!==0)throw c.i.O("Unit must be a linear unit type");a=c.Uc.Ph(a,n,c.Uc.ah(9001))}return l.W(b,a,u,o,null)},C.QQ=function(b,u,a,n){if(b===null)return 0;if(n==4||n!==0)throw c.i.Fe();if(b.K()==197)b=C.LT(b);else if(b.K()!=1736)return 0;if(n=c.cb.tc(u),b=c.cb.Bh(b,u,n),b=c.OK.RQ([b])[0],a!==null){if(a.od!==2)throw c.i.O("Unit must be a area unit type");b=c.Uc.Ph(b,c.Uc.ah(109404),a)}return b},C.TQ=function(b,u,a,n){if(b=c.oL.local().W(b,u,n,null),a!==null){if(a.od!==0)throw c.i.O("Unit must be a linear unit type");b=c.Uc.Ph(b,c.Uc.ah(9001),a)}return b},C.BU=function(b,u,a){if(b===null)return 0;var n=null;if(u!=null){if((n=u.Id()).od==0&&(n=c.Uc.VF(n))==null&&a!==null)throw c.i.O();if(a!=null&&n.Fc()!=a.Fc()&&n.od!=a.od)throw c.i.Zk()}else if(a!=null)throw c.i.O();return b.K()==1736||b.K()==197?(b=b.He(),a!==null?c.Uc.Ph(b,n,a):b):0},C.CU=function(b,u,a){if(b===null||b.B()||1>b.Eb())return 0;var n=null;if(u!=null){if(n=u.Id(),a!=null&&n.Fc()!=a.Fc()&&n.od!=a.od)throw c.i.Zk()}else if(a!=null)throw c.i.O();b.K()==1736||b.K()==197?u=b.mg():c.ba.zd(b.K())?(u=new c.Ua(b.description)).oc(b,!0):u=b,b=0,u=u.Ha();for(var o=new c.h,l=new c.h;u.ab();)for(;u.Ia();){var p=u.ia();p.$p(o),p.Vr(l),b+=c.h.ub(o,l)}return n!==null&&a!==null&&(b=c.Uc.Ph(b,n,a)),b},C.$O=function(b){return b.points!==void 0?C.fS(b,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM):b.rings!==void 0?C.fG(b.rings,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"P"):b.paths!==void 0?C.fG(b.paths,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"L"):b.x!==void 0?C.gS(b):b.xmin!==void 0?C.eS(b):null},C.gS=function(b){if(b.x==null||b.x=="NaN")return new c.Ta;var u=new c.Ta(b.x,b.y);return b.z!==void 0&&b.z!==null&&u.oX(b.z),b.m!==void 0&&b.m!==null&&u.ZW(b.m),u},C.eS=function(b){if(b.xmin==null||b.xmin=="NaN")return new c.Hh;var u=new c.Hh(b.xmin,b.ymin,b.xmax,b.ymax);return b.zmin!==void 0&&b.zmin!==null&&u.setInterval(1,0,b.zmin,b.zmax),b.mmin!==void 0&&b.mmin!==null&&u.setInterval(2,0,b.mmin,b.mmax),u},C.fS=function(b,u,a){var n=0,o=new c.de,l=3*b.points.length;l%2!=0&&l++,2>l&&(l=2);var p=c.P.truncate(3*b.points.length/2);4>p?p=4:16>p&&(p=16),l=c.Zc.En(l,0);var d=c.Zc.En(p);p=c.Zc.En(p);for(var m=0;m<b.points.length;m++)l.write(2*m,b.points[m][0]),l.write(2*m+1,b.points[m][1]),d.write(m,u||a?b.points[m][2]:NaN),p.write(m,a&&u?b.points[m][3]:NaN),n++;return n!=0&&(o.resize(n),o.kn(0,l)),u&&(o.se(1),o.kn(1,d)),a&&(o.se(2),o.kn(2,u==0?d:p)),o.Qc(16777215),o},C.fG=function(b,u,a,n){var o=0,l=2;if(n=="P"){var p=new c.Ea;o=1,l=3}else p=new c.Ua;for(var d=c.Zc.Qh(0),m=c.Zc.Or(0),v=0,_=0,M=[],T=[],I=0;I<b.length;I++){var O=b[I].length;if(M[I]=!1,n==="P"&&b[I][0][0]===b[I][b[I].length-1][0]&&b[I][0][1]===b[I][b[I].length-1][1]){var R=a==0||b[I][0][3]===b[I][b[I].length-1][3]||b[I][0][3]===void 0&&b[I][b[I].length-1][3]===void 0;(u==0||b[I][0][2]===b[I][b[I].length-1][2]||b[I][0][2]===void 0&&b[I][b[I].length-1][2]===void 0)&&R&&(M[I]=!0,--O)}O>=l?(T[I]=!1,_+=1,d.add(v),m.add(o),v+=O):T[I]=!0}for((n=3*v)%2!=0&&n++,2>n&&(n=2),4>(I=c.P.truncate(3*v/2))?I=4:16>I&&(I=16),n=c.Zc.En(n,0),o=c.Zc.En(I),l=c.Zc.En(I),I=O=0;I<b.length;I++)if(T[I]===!1)for(R=0;R<b[I].length;R++){var L=!1;R===b[I].length-1&&M[I]===!0&&(L=!0),L||(n.write(2*O,b[I][R][0]),n.write(2*O+1,b[I][R][1]),o.write(O,u||a?b[I][R][2]:NaN),l.write(O,a&&u?b[I][R][3]:NaN),O++)}return v!=0&&(b=p,d.resize(_),m.resize(_),0<v&&(d.add(v),m.add(0)),b.kn(0,n),b.JJ(m),b.KJ(d)),u&&(p.se(1),p.kn(1,o)),a&&(p.se(2),p.kn(2,u==0?o:l)),p.Qc(16777215),p},C}()}(W||(W={})),function(c){c.Dx=function(){function C(){}return C.dr=function(b){var u,a=0,n=b.length,o=b[0];for(u=0;u<n-1;u++){var l=b[u+1];a+=(l[0]-o[0])*(l[1]+o[1]),o=l}return 0<=a},C.rotate=function(b,u,a){u=u*Math.PI/180;var n=Math.cos(u),o=Math.sin(u);if(b.paths!==void 0){u={paths:[]};for(var l=0;l<b.paths.length;l++){for(var p=b.paths[l],d=[],m=0;m<p.length;m++){var v=p[m].slice(0);d.push(v);var _=n*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+n*(p[m][1]-a.y)+a.y;v[0]=_,v[1]=M}u.paths.push(d)}return u}if(b.rings!==void 0){for(u={rings:[]},l=0;l<b.rings.length;l++){p=b.rings[l],d=[];var T=C.dr(p);for(m=0;m<p.length;m++)v=p[m].slice(0),d.push(v),_=n*(p[m][0]-a.x)-o*(p[m][1]-a.y)+a.x,M=o*(p[m][0]-a.x)+n*(p[m][1]-a.y)+a.y,v[0]=_,v[1]=M;C.dr(d)!==T&&d.reverse(),u.rings.push(d)}return u}if(b.x!==void 0)return u={x:n*(b.x-a.x)-o*(b.y-a.y)+a.x,y:o*(b.x-a.x)+n*(b.y-a.y)+a.y},b.z!==void 0&&(u.z=b.z),b.m!==void 0&&(u.m=b.m),u;if(b.points!==void 0){for(u={points:[]},b=b.points,m=0;m<b.length;m++)(l=b[m].slice(0))[0]=n*(b[m][0]-a.x)-o*(b[m][1]-a.y)+a.x,l[1]=o*(b[m][0]-a.x)+n*(b[m][1]-a.y)+a.y,u.points.push(l);return u}return null},C.DQ=function(b,u){if(b.paths!==void 0){for(var a={paths:[]},n=0;n<b.paths.length;n++){for(var o=b.paths[n],l=[],p=0;p<o.length;p++){var d=o[p].slice(0);l.push(d);var m=u.x-o[p][0];d[0]=o[p][0]+2*m}a.paths.push(l)}return a}if(b.rings!==void 0){for(a={rings:[]},n=0;n<b.rings.length;n++){o=b.rings[n];var v=C.dr(o);for(l=[],p=0;p<o.length;p++)d=o[p].slice(0),l.push(d),m=u.x-o[p][0],d[0]=o[p][0]+2*m;C.dr(l)!==v&&l.reverse(),a.rings.push(l)}return a}if(b.x!==void 0)return m=u.x-b.x,a={x:b.x+2*m,y:b.y},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),a;if(b.points!==void 0){for(a={points:[]},b=b.points,p=0;p<b.length;p++)n=b[p].slice(0),m=u.x-n[0],n[0]+=2*m,a.points.push(n);return a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),m=u.x-b.xmin,a.xmax=b.xmin+2*m,m=u.x-b.xmax,a.xmin=b.xmax+2*m,a):null},C.EQ=function(b,u){if(b.paths!==void 0){for(var a={paths:[]},n=0;n<b.paths.length;n++){for(var o=b.paths[n],l=[],p=0;p<o.length;p++){var d=o[p].slice(0);l.push(d);var m=u.y-o[p][1];d[1]=o[p][1]+2*m}a.paths.push(l)}return a}if(b.rings!==void 0){for(a={rings:[]},n=0;n<b.rings.length;n++){o=b.rings[n];var v=C.dr(o);for(l=[],p=0;p<o.length;p++)d=o[p].slice(0),l.push(d),m=u.y-o[p][1],d[1]=o[p][1]+2*m;C.dr(l)!==v&&l.reverse(),a.rings.push(l)}return a}if(b.x!==void 0)return m=u.y-b.y,a={y:b.y+2*m,x:b.x},b.z!==void 0&&(a.z=b.z),b.m!==void 0&&(a.m=b.m),a;if(b.points!==void 0){for(a={points:[]},b=b.points,p=0;p<b.length;p++)n=b[p].slice(0),m=u.y-n[1],n[1]+=2*m,a.points.push(n);return a}return b.xmin!==void 0?(a={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(a.zmin=b.zmin,a.zmax=b.zmax),b.mmin!==void 0&&(a.mmin=b.mmin,a.mmax=b.mmax),m=u.y-b.ymin,a.ymax=b.ymin+2*m,m=u.y-b.ymax,a.ymin=b.ymax+2*m,a):null},C}()}(W||(W={})),function(c){c.TK=function(){function C(){}return C.Kg=function(b,u){switch(u==null&&(u=c.ee.og()),b){case 33:return new c.Ta(u);case 322:return new c.zb(u);case 197:return new c.Hh(u);case 550:return new c.de(u);case 1607:return new c.Ua(u);case 1736:return new c.Ea(u);default:throw c.i.ga("invalid argument.")}},C}()}(W||(W={})),function(c){var C=function(){function b(u,a){this.Qe=c.ja.rf(u,-1),this.va=new c.cu,this.yl=a}return b.prototype.sW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},b.prototype.addElement=function(u,a){if(a===void 0)return this.ZM(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,u)},b.prototype.ZM=function(u){var a=this.yl.ez(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);return n==-1&&(n=this.va.Rh(),this.Qe.set(a,n)),this.va.addElement(n,u)},b.prototype.kd=function(u,a){if(a===void 0)this.EP(u);else{a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==u?(this.va.kd(n,l,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):l=o,o=p}}},b.prototype.EP=function(u){var a=this.yl.ez(u);a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){var p=this.va.lb(o);this.va.ka(o)==u?(this.va.kd(n,l,o),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1))):l=o,o=p}},b.prototype.kR=function(u){return u=c.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},b.prototype.yR=function(u){return this.va.lb(u)},b.prototype.wd=function(u){var a=this.yl.ez(this.ka(u));a=c.P.truncate(a%this.Qe.size);var n=this.Qe.get(a);if(n==-1)throw c.i.O();for(var o=this.va.sc(n),l=-1;o!=-1;){if(o==u)return this.va.kd(n,l,o),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(a,-1)));l=o,o=this.va.lb(o)}throw c.i.O()},b.prototype.ka=function(u){return this.va.ka(u)},b.prototype.clear=function(){this.Qe=c.ja.rf(this.Qe.size,-1),this.va.clear()},b.prototype.size=function(){return this.va.NF()},b}();c.YK=C}(W||(W={})),function(c){var C=function(){function b(){this.Ni=new c.ad(3),this.va=new c.ad(6),this.jT=!1,this.je=-1}return b.prototype.hl=function(u){this.Ni.kd(u)},b.prototype.Rw=function(){return this.Ni.De()},b.prototype.dv=function(u){this.va.kd(u)},b.prototype.UA=function(){return this.va.De()},b.prototype.QB=function(u,a){this.Ni.T(u,1,a)},b.prototype.fx=function(u,a){this.Ni.T(u,2,a)},b.prototype.YW=function(u,a){this.Ni.T(u,3,a)},b.prototype.OB=function(u,a){this.va.T(u,4,a)},b.prototype.aX=function(u,a){this.va.T(u,3,a)},b.prototype.NJ=function(u,a){this.va.T(u,2,a)},b.prototype.Rh=function(u){var a=this.UA();return this.va.T(a,3,this.je),this.va.T(a,4,0),this.va.T(a,5,u),this.je!=-1&&this.NJ(this.je,a),this.je=a},b.prototype.eh=function(u){this.FE(u);var a=this.va.U(u,2),n=this.va.U(u,3);return a!=-1?this.aX(a,n):this.je=n,n!=-1&&this.NJ(n,a),this.dv(u),n},b.prototype.Bt=function(u){this.va.Ee(u)},b.prototype.JF=function(u){return this.va.U(u,5)},b.prototype.XW=function(u,a){this.va.T(u,5,a)},b.prototype.addElement=function(u,a){return this.mS(u,a)},b.prototype.mS=function(u,a){var n=this.Rw();this.fx(n,-1),this.va.U(u,0)==-1&&this.va.T(u,0,n);var o=this.va.U(u,1);return this.QB(n,o),o!=-1&&this.fx(o,n),this.va.T(u,1,n),this.setData(n,a),this.OB(u,this.ds(u)+1),this.jT&&this.YW(n,u),n},b.prototype.kd=function(u,a){var n=this.xe(a),o=this.lb(a);return n!=-1?this.fx(n,o):this.va.T(u,0,o),o!=-1?this.QB(o,n):this.va.T(u,1,n),this.hl(a),this.OB(u,this.ds(u)-1),o},b.prototype.hn=function(u){this.Ni.Ee(u)},b.prototype.getData=function(u){return this.Ni.U(u,0)},b.prototype.setData=function(u,a){this.Ni.T(u,0,a)},b.prototype.lb=function(u){return this.Ni.U(u,2)},b.prototype.xe=function(u){return this.Ni.U(u,1)},b.prototype.sc=function(u){return this.va.U(u,0)},b.prototype.Gc=function(u){return this.va.U(u,1)},b.prototype.clear=function(){for(var u=this.je;u!=-1;)u=this.eh(u)},b.prototype.FE=function(u){for(var a=this.Gc(u);a!=-1;){var n=a;a=this.xe(n),this.hl(n)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.OB(u,0)},b.prototype.B=function(){return this.Ni.size==0},b.prototype.NF=function(){return this.Ni.size},b.prototype.ds=function(u){return this.va.U(u,4)},b.prototype.lz=function(u){return this.va.U(u,3)},b}();c.kp=C}(W||(W={})),function(c){var C=function(){function b(u){u===void 0?(this.ug=new c.ad(2),this.va=new c.ad(4),this.je=-1,this.Sv=!0):(this.ug=new c.ad(2),this.va=new c.ad(u?4:2),this.je=-1,this.Sv=u)}return b.prototype.hl=function(u){this.ug.kd(u)},b.prototype.Rw=function(){return this.ug.De()},b.prototype.dv=function(u){this.va.kd(u)},b.prototype.UA=function(){return this.va.De()},b.prototype.Rh=function(){var u=this.UA();return this.Sv&&(this.va.T(u,3,this.je),this.je!=-1&&this.va.T(this.je,2,u),this.je=u),u},b.prototype.eh=function(u){for(var a=this.sc(u);a!=-1;){var n=a;a=this.lb(a),this.hl(n)}this.Sv&&(a=this.va.U(u,2),n=this.va.U(u,3),a!=-1?this.va.T(a,3,n):this.je=n,n!=-1&&this.va.T(n,2,a)),this.dv(u)},b.prototype.Bt=function(u){this.va.Ee(u)},b.prototype.addElement=function(u,a){var n=this.va.U(u,1),o=this.Rw();return n!=-1?this.ug.T(n,1,o):this.va.T(u,0,o),this.va.T(u,1,o),this.ug.T(o,0,a),o},b.prototype.hn=function(u){this.ug.Ee(u)},b.prototype.kd=function(u,a,n){a!=-1?(this.ug.T(a,1,this.ug.U(n,1)),this.va.U(u,1)==n&&this.va.T(u,1,a)):(this.va.T(u,0,this.ug.U(n,1)),this.va.U(u,1)==n&&this.va.T(u,1,-1)),this.hl(n)},b.prototype.Cy=function(u,a){var n=this.va.U(u,1),o=this.va.U(a,0);o!=-1&&(n!=-1?this.ug.T(n,1,o):this.va.T(u,0,o),this.va.T(u,1,this.va.U(a,1))),this.Sv&&(u=this.va.U(a,2),n=this.va.U(a,3),u!=-1?this.va.T(u,3,n):this.je=n,n!=-1&&this.va.T(n,2,u)),this.dv(a)},b.prototype.ka=function(u){return this.ug.U(u,0)},b.prototype.Uj=function(u,a){this.ug.T(u,0,a)},b.prototype.lb=function(u){return this.ug.U(u,1)},b.prototype.sc=function(u){return this.va.U(u,0)},b.prototype.Kn=function(u){return this.ka(this.sc(u))},b.prototype.clear=function(){this.ug.oj(!0),this.va.oj(!0),this.je=-1},b.prototype.B=function(){return this.ug.size==0},b.prototype.NF=function(){return this.ug.size},b.prototype.lz=function(u){return this.va.U(u,3)},b}();c.cu=C}(W||(W={})),function(c){c.ta=function(){function C(){}return C.Xd=function(b,u,a){return u=u.zr(),b=b!=null&&b.Yd!==void 0?b.Yd(0):0,a&&(u*=4,b*=1.1),Math.max(b,u)},C.Gr=function(b){return 2*Math.sqrt(2)*b},C.lN=function(b){return Math.sqrt(2)*b},C.mj=function(b,u,a){var n=new c.l;return u.A(n),C.Xd(b,n,a)},C.qE=function(b,u,a){return u=u.Vg(1,0).zr(),b=b!=null?b.Yd(1):0,a&&(u*=4,b*=1.1),Math.max(b,u)},C.ov=function(b,u){var a=new c.l;return b.yc(a),b=new c.l,u.yc(b),a.$b(b),a},C.SN=function(b){var u=new c.l;if(b.yc(u),u.B())return null;var a=new c.fu(u,8),n=-1,o=new c.l,l=!1;do for(var p=0,d=b.ea();p<d;p++){if(b.Tj(p,o),(n=a.Ez(p,o,n))==-1){if(l)throw c.i.ga("internal error");b.Ap(u,!1),l=!0,a.reset(u,8);break}l=!1}while(l);return a},C.hE=function(b){var u=new c.l;b.yc(u);for(var a=new c.fu(u,8),n=-1,o=b.Ha(),l=new c.l,p=!1;o.ab();)for(;o.Ia();){var d=o.ia(),m=o.xb();if(d.A(l),(n=a.Ez(m,l,n))==-1){if(p)throw c.i.Ra();b.Ap(u,!1),p=!0,a.reset(u,8),o.aj();break}}return a},C.lj=function(b,u){var a=new c.l;b.yc(a);for(var n=new c.fu(a,8),o=-1,l=new c.l,p=b.Ha(),d=!1;p.ab();)for(;p.Ia();){var m=p.ia(),v=p.xb();if(m.A(l),l.isIntersecting(u)&&(o=n.Ez(v,l,o))==-1){if(d)throw c.i.ga("internal error.");b.Ap(a,!1),d=!0,n.reset(a,8),p.aj();break}}return n},C.iE=function(b,u){for(var a=new c.fu(u,8),n=new c.h,o=!1,l=new c.l,p=0;p<b.I();p++)if(b.D(p,n),u.contains(n)&&(l.L(n),a.xj(p,l)==-1)){if(o)throw c.i.Ra();o=!0,p=new c.l,b.Ap(p,!1),a.reset(p,8),p=-1}return a},C.fR=function(b,u,a){var n=new c.l,o=new c.l;b.yc(n),u.yc(o),n.X(a,a),o.X(a,a);var l=new c.l;l.L(n),l.Fa(o),b=b.Ha(),u=u.Ha();var p=new c.rC;p.VB(a);var d=!1;for(p.jK();b.ab();)for(;b.Ia();)b.ia().A(n),n.isIntersecting(l)&&(d=!0,(a=new c.l).L(n),p.CD(b.xb(),a));if(p.cF(),!d)return null;for(n=!1,p.iK();u.ab();)for(;u.Ia();)u.ia().A(o),o.isIntersecting(l)&&(n=!0,(a=new c.l).L(o),p.yD(u.xb(),a));return p.bF(),n?p:null},C.gR=function(b,u,a,n,o){var l=b.K(),p=u.K(),d=new c.l,m=new c.l;b.yc(d),u.yc(m),d.X(a,a),m.X(a,a);var v=new c.l;v.L(d),v.Fa(m);var _=new c.rC;_.VB(a);var M=!1;_.jK();var T=0;for(a=b.ea();T<a;T++)n&&l==1736&&!b.Gv(T)||(b.Tj(T,d),d.isIntersecting(v)&&(M=!0,_.CD(T,d)));if(_.cF(),!M)return null;for(b=!1,_.iK(),n=0,a=u.ea();n<a;n++)o&&p==1736&&!u.Gv(n)||(u.Tj(n,m),m.isIntersecting(v)&&(b=!0,_.yD(n,m)));return _.bF(),b?_:null},C.Tu=function(b,u,a){if(b!=u)for(var n=0;n<a;n++)b[n]==null?b[n]=c.h.cl(u[n]):b[n].N(u[n])},C.Ey=function(b,u,a,n){var o=0;for(n+=0;o<n;a++,o++)b[o]==null&&(b[o]=[0,0]),b[o][0]=u[a].x,b[o][1]=u[a].y},C.Dy=function(b,u,a,n){var o=u,l=0;for(u=n+u;o<u;l++,o++)b[o]==null?b[o]=c.h.construct(a[l][0],a[l][1]):b[o].na(a[l][0],a[l][1])},C.eP=function(b,u,a){if(b!=u)for(var n=0;n<a;n++)b[n]==null?b[n]=new c.Ta(u[n]):u[n].copyTo(b[n])},C.pE=function(b,u,a,n){var o=0;return b!=null&&(o=b.Yd(0),n&&!a||b==null||(o+=1.01*b.pz(0))),a&&(u*=4,o*=1.01),Math.max(o,u)},C.oy=function(b,u,a){return C.pE(b,u.zr(),a,!1)},C.aO=function(b,u){var a=new c.l;return u.A(a),C.oy(b,a,!0)},C.py=function(b,u){return C.pE(b,u.zr(),!1,!0)},C.Ju=function(b,u){var a=new c.l;return u.A(a),C.py(b,a)},C.uG=function(b,u,a,n){n*=n;var o=new c.h;if(o.vc(b,u),(b=new c.h).vc(a,u),u=o.Tk(),a=b.Tk(),u<=n&&a<=n)return!0;var l=c.mc.ox(o.yi(b));return(l<=n*u||l<=n*a)&&0<=o.Sh(b)},C.YJ=function(b,u,a,n){for(var o=0;o<u;o++){var l=b[o].y,p=c.P.Sk(l,a,n);p!=l&&(b[o].y=p)}},C}()}(W||(W={})),function(c){var C,b,u=function(){function l(p){this.Za=p}return l.prototype.compare=function(p,d,m){p=p.ka(m),m=this.Za.pk(d);var v=this.Za.pk(p);return m<v?-1:m==v?o.iq(d)&&o.Iv(p)?-1:o.iq(p)&&o.Iv(d)?1:0:1},l}(),a=function(){function l(p){this.Za=p}return l.prototype.qr=function(p,d,m){this.Za.yX(m,p,d)},l.prototype.bq=function(p){return this.Za.pk(p)},l}();(b=C||(C={}))[b.initialize=0]="initialize",b[b.pIn=1]="pIn",b[b.pL=2]="pL",b[b.pR=3]="pR",b[b.pT=4]="pT",b[b.right=5]="right",b[b.left=6]="left",b[b.all=7]="all";var n=function(){function l(){this.Za=null,this.Si=new c.Oc,this.ji=new c.ja(0),this.sg=[0,0]}return l.prototype.Zi=function(p,d){this.Si.pa=p.pa-d,this.Si.wa=p.wa+d,this.ji.resize(0),this.he=0,this.sg[0]=0},l.prototype.yB=function(p,d,m){if(p>d)throw c.i.O();this.Si.pa=p-m,this.Si.wa=d+m,this.ji.resize(0),this.he=0,this.sg[0]=0},l.prototype.Vo=function(p,d){this.Si.pa=p-d,this.Si.wa=p+d,this.ji.resize(0),this.he=0,this.sg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw c.i.Hb();if(0>this.he)return-1;for(var p=!0;p;)switch(this.sg[this.he]){case 1:p=this.xU();break;case 2:p=this.yU();break;case 3:p=this.zU();break;case 4:p=this.AU();break;case 5:p=this.xW();break;case 6:p=this.cT();break;case 7:p=this.nN();break;case 0:p=this.Bz();break;default:throw c.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(p){var d=new l;return d.Za=p,d.ji.Jb(20),d.he=-1,d},l.prototype.Bz=function(){return this.Qg=this.pH=this.Oi=this.Mc=-1,this.Za.me!=null&&0<this.Za.me.size?(this.sg[0]=1,this.Oi=this.Za.kf,!0):(this.he=-1,!1)},l.prototype.xU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.he=-1,!1;var p=this.Za.Pp(this.Mc);return this.Si.wa<p?(p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=6),!0):p<this.Si.pa?(p=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.pH=this.Mc,p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),!0)},l.prototype.yU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=3,this.Oi=this.Za.mk(this.pH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var p=this.Za.nk(this.Mc);return this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.bs(p),this.sg[++this.he]=5),!0}return p=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),(p=this.Za.mk(this.Mc))!=-1&&this.ji.add(p),!0},l.prototype.zU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var p=this.Za.nk(this.Mc);return this.Oi=this.Za.sj(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=6),!0}return p=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),(p=this.Za.sj(this.Mc))!=-1&&this.ji.add(p),!0},l.prototype.AU=function(){if(this.ji.size==0)return this.Qg=this.he=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var p=this.Za.nk(this.Mc);return p!=-1&&(this.gi=this.Za.ml(p),this.sg[++this.he]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.mk(this.Mc)!=-1&&this.ji.add(this.Za.mk(this.Mc)),!0},l.prototype.cT=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())&&this.Za.pk(this.Op())<=this.Si.wa?(this.gi=this.MF(),!1):(this.he--,!0)},l.prototype.xW=function(){return this.Qg=this.gi,this.Qg!=-1&&o.Iv(this.Op())&&this.Za.pk(this.Op())>=this.Si.pa?(this.gi=this.JR(),!1):(this.he--,!0)},l.prototype.nN=function(){return this.Qg=this.gi,this.Qg!=-1&&o.iq(this.Op())?(this.gi=this.MF(),!1):(this.he--,!0)},l.prototype.MF=function(){return this.Za.Tf?this.Za.ag.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.JR=function(){return this.Za.Tf?this.Za.ag.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Tf?this.Za.ag.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();c.wY=n;var o=function(){function l(p){this.Cm=this.bi=this.ag=this.Vi=this.Mm=this.Gj=this.me=this.Hj=null,this.Tf=p,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Ok(!0)},l.prototype.Dr=function(p,d){if(!this.Uv)throw c.i.Hb();this.Hj.push(new c.Oc(p,d))},l.prototype.Hp=function(){if(!this.Uv)throw c.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Tf||(this.oS(),this.aw=this.Hj.length)},l.prototype.xj=function(p){if(!this.Tf||!this.nq)throw c.i.O("invalid call");if(this.kf==-1){var d=this.Hj.length;if(this.dA){var m=new c.ja(0);m.Jb(2*d),this.WI(m),this.bi.Jb(2*d),this.bi.resize(0),this.VI(m),this.Mm.resize(d,-1),this.Mm.Yj(-1,0,d),this.dA=!1}else this.Mm.Yj(-1,0,d);this.kf=this.Vu()}d=this.jG(p<<1,this.kf),m=this.ag.addElement(1+(p<<1),this.rz(d)),this.PJ(d,m),this.Mm.set(p,d),this.aw++},l.prototype.remove=function(p){if(!this.Tf||!this.nq)throw c.i.ga("invalid call");var d=this.Mm.get(p);if(d==-1)throw c.i.O("the interval does not exist in the interval tree");this.Mm.set(p,-1),this.aw--;var m=this.rz(d),v=this.ag.SR(m);this.ag.wd(this.qR(d),m),this.ag.wd(this.MR(d),m),(p=this.ag.size(m))==0&&(this.ag.GP(m),this.TJ(v,-1)),this.Gj.kd(d),m=this.OF(v);var _=this.sj(v),M=this.mk(v);for(d=0;!(0<p||v==this.kf||_!=-1&&M!=-1);)v==this.sj(m)?_!=-1?(this.Pk(m,_),this.Wj(_,m),this.Pk(v,-1)):M!=-1?(this.Pk(m,M),this.Wj(M,m),this.Rk(v,-1)):this.Pk(m,-1):_!=-1?(this.Rk(m,_),this.Wj(_,m),this.Pk(v,-1)):M!=-1?(this.Rk(m,M),this.Wj(M,m),this.Rk(v,-1)):this.Rk(m,-1),this.Wj(v,-1),d++,v=m,p=(m=this.nk(v))!=-1?this.ag.size(m):0,_=this.sj(v),M=this.mk(v),m=this.OF(v)},l.prototype.reset=function(){if(!this.Tf||!this.nq)throw c.i.O("invalid call");this.Ok(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return n.construct(this)},l.prototype.WI=function(p){for(var d=this.Hj.length,m=0;m<2*d;m++)p.add(m);this.zX(p,2*d)},l.prototype.VI=function(p){for(var d=NaN,m=0;m<p.size;m++){var v=p.get(m),_=this.pk(v);_!=d&&(this.bi.add(v),d=_)}},l.prototype.oS=function(){var p=this.Hj.length,d=new c.ja(0);d.Jb(2*p),this.WI(d),this.bi.Jb(2*p),this.bi.resize(0),this.VI(d),this.Gj.Ee(p),this.Vi.hn(2*p);var m=c.Zc.Qh(p);for(m.Yj(-1,0,p),this.kf=this.Vu(),p=0;p<d.size;p++){var v=d.get(p),_=m.get(v>>1);_!=-1?this.PJ(_,this.Vi.addElement(this.rz(_),v)):(_=this.jG(v,this.kf),m.set(v>>1,_))}},l.prototype.jG=function(p,d){var m=d,v=d,_=-1,M=0,T=this.bi.size-1,I=0,O=p>>1,R=NaN,L=NaN,G=!0,q=this.xR(O);for(O=this.uR(O);G;){M<T?(I=M+c.P.truncate((T-M)/2),this.bz(m)==-1&&this.zJ(m,this.bi.get(I),this.bi.get(I+1))):this.bz(m)==-1&&this.zJ(m,this.bi.get(M),this.bi.get(M));var D=this.Pp(m);if(O<D)d!=-1&&(d==m?(v=m,R=D,L=(d=this.sj(m))!=-1?this.Pp(d):NaN):L>D&&(D<R?this.Pk(v,m):this.Rk(v,m),this.Rk(m,d),this.Tf&&(this.Wj(m,v),this.Wj(d,m)),v=m,R=D,d=-1,L=NaN)),(T=this.rR(m))==-1&&(T=this.Vu(),this.VW(m,T)),m=T,T=I;else if(q>D)d!=-1&&(d==m?(v=m,R=D,L=(d=this.mk(m))!=-1?this.Pp(d):NaN):L<D&&(D<R?this.Pk(v,m):this.Rk(v,m),this.Pk(m,d),this.Tf&&(this.Wj(m,v),this.Wj(d,m)),v=m,R=D,d=-1,L=NaN)),(M=this.NR(m))==-1&&(M=this.Vu(),this.fX(m,M)),m=M,M=I+1;else{(G=this.nk(m))==-1&&(G=this.tP(m),this.TJ(m,G));var H=this.$M(G,p);_=this.rP(),this.iX(_,G),this.UW(_,H),m!=d&&(D<R?this.Pk(v,m):this.Rk(v,m),this.Tf&&this.Wj(m,v),d!=-1&&(L<D?this.Pk(m,d):this.Rk(m,d),this.Tf&&this.Wj(d,m))),G=!1}}return _},l.prototype.Vu=function(){return this.me.De()},l.prototype.tP=function(p){return this.Tf?this.ag.Rr(p):this.Vi.Rh(p)},l.prototype.rP=function(){return this.Gj.De()},l.prototype.Ok=function(p){p?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=c.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Tf?this.Mm==null?(this.Mm=c.Zc.Qh(0),this.ag=new c.Zj,this.ag.Wo(new u(this))):this.ag.clear():this.Vi==null?this.Vi=new c.kp:this.Vi.clear(),this.me==null?(this.Gj=new c.ad(3),this.me=new c.ad(this.Tf?8:7)):(this.Gj.oj(!1),this.me.oj(!1)),this.kf=-1,this.aw=0},l.prototype.zJ=function(p,d,m){this.OW(p,d),this.PW(p,m)},l.prototype.Pp=function(p){var d=this.bz(p);return d==-1?NaN:(d=this.pk(d))==(p=this.pk(this.aR(p)))?d:.5*(d+p)},l.prototype.OW=function(p,d){this.me.T(p,0,d)},l.prototype.PW=function(p,d){this.me.T(p,1,d)},l.prototype.VW=function(p,d){this.me.T(p,3,d)},l.prototype.fX=function(p,d){this.me.T(p,4,d)},l.prototype.TJ=function(p,d){this.me.T(p,2,d)},l.prototype.Pk=function(p,d){this.me.T(p,5,d)},l.prototype.Rk=function(p,d){this.me.T(p,6,d)},l.prototype.Wj=function(p,d){this.me.T(p,7,d)},l.prototype.iX=function(p,d){this.Gj.T(p,0,d)},l.prototype.$M=function(p,d){return this.Tf?this.ag.addElement(d,p):this.Vi.addElement(p,d)},l.prototype.UW=function(p,d){this.Gj.T(p,1,d)},l.prototype.PJ=function(p,d){this.Gj.T(p,2,d)},l.prototype.ml=function(p){return this.Tf?this.ag.sc(p):this.Vi.sc(p)},l.prototype.bs=function(p){return this.Tf?this.ag.Gc(p):this.Vi.Gc(p)},l.iq=function(p){return(1&p)==0},l.Iv=function(p){return(1&p)==1},l.prototype.bz=function(p){return this.me.U(p,0)},l.prototype.aR=function(p){return this.me.U(p,1)},l.prototype.nk=function(p){return this.me.U(p,2)},l.prototype.rR=function(p){return this.me.U(p,3)},l.prototype.NR=function(p){return this.me.U(p,4)},l.prototype.sj=function(p){return this.me.U(p,5)},l.prototype.mk=function(p){return this.me.U(p,6)},l.prototype.OF=function(p){return this.me.U(p,7)},l.prototype.rz=function(p){return this.Gj.U(p,0)},l.prototype.qR=function(p){return this.Gj.U(p,1)},l.prototype.MR=function(p){return this.Gj.U(p,2)},l.prototype.xR=function(p){return this.Hj[p].pa},l.prototype.uR=function(p){return this.Hj[p].wa},l.prototype.zX=function(p,d){this.Cm==null&&(this.Cm=new c.Zt);var m=new a(this);this.Cm.sort(p,0,d,m)},l.prototype.yX=function(p,d,m){var v=this;p.Wd(d,m,function(_,M){var T=v.pk(_),I=v.pk(M);return T<I||T==I&&l.iq(_)&&l.Iv(M)?-1:1})},l.prototype.pk=function(p){var d=this.Hj[p>>1];return l.iq(p)?d.pa:d.wa},l}();c.ur=o}(W||(W={})),function(c){var C=function(){function b(u){if(u==null)throw c.i.ga("Invalid arguement");this.hf=u;var a=u.hR();a.aS()?u.ef.CG()?this.mo=c.ui.PannableFold:this.mo=c.ui.Clip:this.mo=c.ui.DontClip,a.bS()?u.Zf.CG()?this.Sm=c.ui.PannableFold:this.Sm=c.ui.Clip:this.Sm=c.ui.DontClip,this.Dm=a.Lr,this.gH=a.Xu,u=this.hf.mH,this.VG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return b.Bh=function(u,a,n){return a.yw.Bh(u,n)},b.Tt=function(u,a,n,o){return u.yw.Tt(a,n,o)},b.St=function(u,a,n,o){if(n=0>n?a.length:n,(u=u.yw.Tt(a,n,o))==n)return u;for(var l=a=0;l<n;l++){var p=o[l];p.isNaN()||(a<l&&o[a].N(p),a++)}for(;a<n;a++)o[a].Sc();return u},b.transform=function(u,a,n,o,l){if(u.isIdentity())return c.ta.eP(o,a,n),n;for(var p=[],d=0,m=0;m<n;){for(var v=Math.min(p.length,n-m),_=m,M=0;_<v;_++,M++)p[M]==null?p[M]=a[_].D():a[_].D(p[M]);var T=l?b.St(u,p,v,p):b.Tt(u,p,v,p);for(M=_=0;_<T;_++,M++)o[m]==null&&(o[m]=new c.Ta(a[m])),o[m].Db(p[M]);m+=v,d+=T}return d},b.prototype.Tt=function(u,a,n){if(this.hf.isIdentity())return u!=n&&c.ta.Tu(n,u,a),a;var o=this.hf.ef,l=this.hf.Zf,p=o.Tb(),d=l.Tb();if(p==0&&p===d){var m=o.Sp();return l=m/(l=l.Sp()),(m=new c.Ed).Jt(l,l),m.XX(u,a,n),a}if(m=c.P.Hu(Math.min(a,64)),p==3){var v=o.Li;p=(o=v.gk()).Tb(),n!=u&&c.ta.Tu(n,u,a),c.Ab.bl(v,n,a,!0),v.St(c.dm.forward,n,a),c.Ab.al(v,n,a,!0)}if(p==3||d===3)throw c.i.ga("image: transform_in_place_");if(p==2)this.mo==c.ui.Clip?(n!=u&&c.ta.Tu(n,u,a),u=o.ol(),c.Ab.HS(u,o,n,a)):(n!=u&&c.ta.Tu(n,u,a),o.Xc()&&(p=o.Yd(0),v=o.Le(),c.Ab.wX(n,a,v,p),c.Ab.kF(n,a,o,0))),c.Ab.CL(o,n,a,m);else for(p=o.Yd(0),v=o.Le(),o=0;o<a;o++)c.Ab.xX(u[o],v,p,n[o]);for(c.Ab.AL(this.hf,n,a,m),u=0,(d=d==2)?u=l.Bi():isNaN(this.Dm)||(u=this.Dm),d&&this.Sm!=c.ui.Clip||c.Ab.kF(n,a,l.tc(),u),d&&(c.Ab.sG(n,a,l,this.Sm),c.Ab.BL(l,n,a,m)),u=a,o=0;o<a;++o)n[o].isNaN()&&u--;return u},b.prototype.Bh=function(u,a){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.RI(u);var n=this.hf.ef,o=this.hf.Zf,l=n.Tb(),p=o.Tb();if(l==0&&l==p)return a=n.Sp(),a/=o=o.Sp(),(o=new c.Ed).Jt(a,a),(u=c.ba.ig(u)).Pc(o),u;switch(u.K()){case 1607:case 1736:u=this.OI(u,a);break;case 550:u=this.YV(u,a);break;case 197:u=this.XV(u,a);break;default:throw c.i.ga("")}return u},b.prototype.RI=function(u){var a=u.D(),n=[];return n[0]=a,this.Tt(n,1,n),(u=new c.Ta(u)).Db(n[0]),u},b.prototype.OI=function(u,a){if(u.vm())throw c.i.ga("curves not supported");var n=u.K();if(n==1736)return this.ZV(u,a);if(n==1607)return this.$V(u,a);throw c.i.ga("projectMultiPath")},b.prototype.ZV=function(u,a){var n=this.hf.ef,o=this.hf.Zf,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64)),m=c.Ea.ig(u);l==3&&(l=(n=(u=n.Li).gk()).Tb(),m=u.bl(m,!0),this.yp(u,c.dm.forward,m),m=u.al(m,!0)),u=null,p==3&&(p=(o=(u=o.Li).gk()).Tb());var v=l==2,_=p==2,M=_?o.tc():o,T=!_&&!this.Wv;p=!1;var I=m;if(v){if((I=c.Ab.NI(I,n,this.mo,a)).B())return I}else{if(m=new c.l,I.yc(m),l=n.Le(),m.G<l.G||m.H>l.H){var O=c.l.construct(m.v-1,l.G,m.C+1,l.H);if((I=c.ti.Pu(I,O,n,NaN,0,a)).B())return I}m.S()>2*l.S()&&(I=c.Ab.Jp(I,-2*l.S(),2*l.S(),n,!0,0,!0,a))}m=this.gH,(l=!isNaN(m))&&(I=c.Zl.local().W(I,m,a)),O=_?o.lk():null;var R=NaN;v&&(R=n.Bi());var L=o.Yr()!=null;if(this.VG)v&&(c.Ab.wr(n,R,I,d),l&&(v=n.jh(),m*=(R=n.tc().jh())/v)),c.Ab.vr(this.hf,I,T,d),l&&(v=n.tc().jh(),m*=(R=o.tc().jh())/v),n=I;else{var G=new c.Ua(I.description);G.xD(I),v&&(c.Ab.wr(n,R,G,d),l&&(v=n.jh(),m*=(R=n.tc().jh())/v)),c.Ab.vr(this.hf,G,T,d),l&&(v=n.tc().rm(),m*=(R=o.tc().rm())/v),T=NaN,_?(O=o.lk(),T=o.Bi()):isNaN(this.Dm)||(T=this.Dm),v=b.vv(n)|b.vv(o),R=10*M.Yd(0),this.Wv&&(v=3,R=0),n=c.Ab.OQ(I,n,G,M,T,a,v,R)}return L&&(n=c.Ab.RD(n,o,a)),_&&(p||(_=M.Le().S(),n.Vg(0,0).S()>=_-M.Yd(0)&&(M=O.getNorthPoleLocation(),_=O.getSouthPoleLocation(),I=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,I==c.Eg.PE_POLE_POINT&&M!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==c.Eg.PE_POLE_POINT&&_!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(p=!0))),n=c.Ab.Hz(n,o,this.Sm,a),l&&(n=c.Zl.local().W(n,m,a)),c.Ab.Kx(o,n,d)),n.B()||(p&&(n=c.$l.local().W(n,o,!1,a)),u!=null&&(n=u.al(n,!1),this.yp(u,c.dm.reverse,n),n=u.bl(n,!1))),n},b.vv=function(u){if(u.Tb()!=2)return 0;var a=0,n=u.lk();u=n.getNorthPoleLocation();var o=n.getSouthPoleLocation(),l=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),l==c.Eg.PE_POLE_POINT&&u!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1),n==c.Eg.PE_POLE_POINT&&o!=c.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2),a},b.prototype.$V=function(u,a){var n=this.hf.ef,o=this.hf.Zf,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64)),m=c.Ua.ig(u);l==3&&(l=(n=(u=n.Li).gk()).Tb(),m=u.bl(m,!0),this.yp(u,c.dm.forward,m),m=u.al(m,!0)),u=null,p==3&&(p=(o=(u=o.Li).gk()).Tb());var v=l==2;l=(p=p==2)?o.tc():o;var _=!p&&!this.Wv;if(v){if((m=c.Ab.NI(m,n,this.mo,a)).B())return m}else{var M=new c.l;m.yc(M);var T=n.Le();if((M.G<T.G||M.H>T.H)&&(M=c.l.construct(M.v-1,T.G,M.C+1,T.H),(m=c.ti.Pu(m,M,n,NaN,0,a)).B()))return m}var I=NaN;v&&(I=n.Bi()),M=o.Yr()!=null,T=this.gH;var O=!isNaN(T);if(O&&(m=c.Zl.local().W(m,T,a)),this.VG)v&&c.Ab.wr(n,I,m,d),O&&(v=n.jh(),T*=(I=n.tc().jh())/v),c.Ab.vr(this.hf,m,_,d),O&&(v=n.tc().jh(),T*=(I=o.tc().jh())/v),n=m;else{var R=new c.Ua(m.description);R.xD(m),v&&(c.Ab.wr(n,I,R,d),O&&(v=n.jh(),T*=(I=n.tc().jh())/v)),c.Ab.vr(this.hf,R,_,d),O&&(v=n.tc().jh(),T*=(I=o.tc().jh())/v),_=NaN,p?_=o.Bi():isNaN(this.Dm)||(_=this.Dm),v=b.vv(n)|b.vv(o),I=10*l.Yd(0),this.Wv&&(v=3,I=0),n=c.Ab.PQ(m,n,R,l,_,a,v,I)}return M&&(n=c.Ab.RD(n,o,a)),p&&(n=c.Ab.Hz(n,o,this.Sm,a),O&&(n=c.Zl.local().W(n,T,a)),c.Ab.Kx(o,n,d)),n.B()||u!=null&&(n=u.al(n,!1),this.yp(u,c.dm.reverse,n),n=u.bl(n,!1)),n},b.prototype.XV=function(u,a){var n=(u.da()+u.S())/400;return n!=0?(n=c.Zl.local().W(u,n,a),n=this.OI(n,a),a=u.Ja(),n.dn(a)):(a=new c.Ta(u.Kp()),n=this.RI(a),a=u.Ja(),n.B()?a.Pa():(u.copyTo(a),u=n.D(),a.L(u.x,u.y,u.x,u.y))),a},b.prototype.YV=function(u,a){u=c.ba.ig(u);var n=this.hf.ef,o=this.hf.Zf,l=n.Tb(),p=o.Tb(),d=c.P.Hu(Math.min(u.I(),64));if(l==3){var m=n.Li;l=(n=m.gk()).Tb(),u=m.al(u,!0),this.yp(m,c.dm.forward,u),u=m.bl(u,!0)}if(l==2){if(this.mo==c.ui.Clip?u=c.Xk.local().W(u,n.ol(),n,a):n.Xc()&&(l=new c.l,u.yc(l),n.Le().contains(l)||(this.mo==c.ui.PannableFold&&(u=c.Ab.nj(u,n)),c.Ab.Lt(u,n.Le(),n.Yd(0),!0),u=c.Ab.Gn(u,n,0,!0,0,a))),u.B())return u;c.Ab.wr(n,0,u,d)}else c.Ab.Lt(u,n.Le(),n.Yd(0),!0);return c.Ab.vr(this.hf,u,!1,d),n=0,l=!1,m=null,p==3&&(l=!0,p=(o=(m=o.Li).gk()).Tb()),(p=p==2)?n=o.Bi():isNaN(this.Dm)||(n=this.Dm),p&&this.Sm!=c.ui.Clip||(u=c.Ab.Gn(u,o.tc(),n,!1,0,a)),p&&(u=c.Ab.Hz(u,o,this.Sm,a),c.Ab.Kx(o,u,d),u.B())||l&&(u=m.al(u,!0),this.yp(m,c.dm.reverse,u),u=m.bl(u,!0)),u},b.prototype.yp=function(u,a,n){var o=n.I();if(o!=0){for(var l=n.vb(0),p=c.P.lg(200,0),d=[],m=0;m<o;){var v=Math.min(100,o-m);l.Xw(2*m,2*v,p,2,!0);for(var _=0;_<v;++_)d[_]=c.h.construct(p[2*m],p[2*m+1]);u.St(a,d,v),m+=v}n.Qc(1993)}},b.Py=function(u,a,n){if(u==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(u.B())return u;var o=u.K();return o==197?(o=new c.Ea(u.description)).bd(u,!1):c.ba.zd(o)?(o=new c.Ua(u.description)).oc(u,!0):o=u,(o=c.Ab.nj(o,a)).B()?o:c.Ab.Gn(o,a,0,o!=u,0,n)},b.pj=function(u,a,n,o){if(u==null||a==null||!a.Xc())throw c.i.ga("Invalid Arguement");if(u.B())return u;var l=u.K();if(c.ba.Ic(l)){u=c.Ab.nj(u,a),l=new c.l,u.A(l);for(var p=c.ta.oy(a,l,!1),d=a.ih(),m=Math.floor((l.v-d.v)/d.S())*d.S()+d.v;m<l.C;)m>l.v+p&&m<l.C-p&&(u=c.Ab.nS(u,a,n,m)),m+=d.S()}else{if(l==197)return(l=new c.Ea(u.description)).bd(u,!1),b.pj(l,a,n,o);if(c.ba.zd(l))return(l=new c.Ua(u.description)).oc(u,!0),b.pj(l,a,n,o)}return b.Py(u,a,o)},b}();c.du=C}(W||(W={})),function(c){var C=function(b){function u(a,n,o,l){var p=b.call(this)||this;return a===void 0?p.description=c.ee.og():o===void 0?p.description=a:(p.description=c.ee.og(),p.TB(a,n),p.Sl(o,l)),p}return Ot(u,b),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var a=this.sa-this.qa,n=this.oa-this.ma;return Math.sqrt(a*a+n*n)},u.prototype.Di=function(a){var n=this.sa-this.qa,o=this.oa-this.ma;return Math.sqrt(n*n+o*o)<=a},u.prototype.Qn=function(){return!1},u.prototype.jg=function(){var a=new c.h;return a.vc(this.xc(),this.ac()),a},u.XO=function(a,n){return new u(a.x,a.y,n.x,n.y)},u.prototype.dn=function(a){a.Pa(),a.kg(this.description);var n=new c.l;this.A(n),a.Yo(n),n=1;for(var o=this.description.Ba;n<o;n++)for(var l=this.description.qd(n),p=c.ua.Wa(l);n<p;n++){var d=this.Vg(l,0);a.setInterval(l,0,d)}},u.prototype.A=function(a){a.L(this.sa,this.oa,this.qa,this.ma),a.normalize()},u.prototype.Ro=function(a){a.Pa(),a.$b(this.sa,this.oa,this.Pd(0,1,0)),a.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(a){if(a instanceof c.Ed){this.wc();var n=new c.h;n.x=this.sa,n.y=this.oa,a.Gh(n,n),this.sa=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,a.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new c.Od).x=this.sa,n.y=this.oa,n.z=this.Pd(0,1,0),n=a.gp(n),this.sa=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=a.gp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(a,n){return(this.qa-a-(this.sa-a))*(this.ma-n+(this.oa-n))*.5},u.prototype.ux=function(a){return a*this.Rb()},u.prototype.HG=function(a){return a/this.Rb()},u.prototype.xF=function(a){return c.mc.jq(this.sa,this.qa,a)},u.prototype.$Q=function(a){return c.mc.jq(this.oa,this.ma,a)},u.prototype.fl=function(a,n){var o=new c.hg;return this.dh(a,n,o),o.get()},u.prototype.dh=function(a,n,o){if(o==null)throw c.i.O();o.Qr(),(o=o.get()).kg(this.description);var l=new c.h;this.ic(a,l),o.TB(l.x,l.y),this.ic(n,l),o.Sl(l.x,l.y),l=1;for(var p=this.description.Ba;l<p;l++)for(var d=this.description.Fd(l),m=c.ua.Wa(d),v=0;v<m;v++){var _=this.Vc(a,d,v);o.SB(d,v,_),_=this.Vc(n,d,v),o.IB(d,v,_)}},u.prototype.Vc=function(a,n,o){if(n==0)return o==0?this.ic(a).x:this.ic(a).y;switch(c.ua.gz(n)){case 0:return .5>a?this.yv(n,o):this.jv(n,o);case 1:var l=this.yv(n,o);return n=this.jv(n,o),c.mc.jq(l,n,a);case 2:throw c.i.ga("not implemented")}throw c.i.Ra()},u.prototype.fe=function(a,n){var o=this.qa-this.sa,l=this.ma-this.oa,p=o*o+l*l;return p==0?.5:(a=((a.x-this.sa)*o+(a.y-this.oa)*l)/p,n||(0>a?a=0:1<a&&(a=1)),a)},u.prototype.fq=function(a,n,o,l){if(a){if((a=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/a)||1<n)return 0;o!=null&&(o[0]=this.xF(n))}else{if((a=this.qa-this.sa)==0)return n==this.qa?-1:0;if(0>(n=(n-this.sa)/a)||1<n)return 0;o!=null&&(o[0]=this.$Q(n))}return l!=null&&(l[0]=n),1},u.prototype.Me=function(a,n){var o=this.ma-this.oa;return o==0?a==this.ma?n:NaN:(a=(a-this.oa)/o,n=this.xF(a),a==1&&(n=this.qa),n)},u.prototype.tu=function(a,n,o){return 0<=this.sp(a.x,a.y,n,o)},u.prototype.xi=function(a,n,o){return 0<=this.sp(a,n,o,!0)},u.prototype.ss=function(a,n){return this.tu(a,n,!1)},u.prototype.lI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.sa){var a=this.sa;this.sa=this.qa,this.qa=a,a=this.oa,this.oa=this.ma,this.ma=a,a=0;for(var n=this.description.Qq-2;a<n;a++){var o=this.la[a];this.la[a]=this.la[a+n],this.la[a+n]=o}}},u.prototype.wu=function(a,n){(n=c.h.construct(a,n)).sub(this.ac());var o=new c.h;return o.vc(this.xc(),this.ac()),(a=o.yi(n))>(n=8881784197001252e-31*(Math.abs(o.x*n.y)+Math.abs(o.y*n.x)))?-1:a<-n?1:0},u.prototype.sp=function(a,n,o,l){var p=this.sa,d=this.oa,m=a-p,v=n-d;if((m=Math.sqrt(m*m+v*v))<=Math.max(o,6661338147750939e-31*m))return l&&m==0?NaN:0;if(m=a-this.qa,v=n-this.ma,(m=Math.sqrt(m*m+v*v))<=Math.max(o,6661338147750939e-31*m))return l&&m==0?NaN:1;if(m=this.qa-this.sa,v=this.ma-this.oa,0<(l=Math.sqrt(m*m+v*v))){var _=1/l,M=a-p,T=n-d,I=M*(m*=_)+T*(v*=_),O=17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*v)),R=m;if(m=-v,v=R,I<-(O=Math.max(o,O))||I>l+O)return NaN;if(Math.abs(M*m+T*v)<=Math.max(o,17763568394002505e-31*(Math.abs(M*m)+Math.abs(T*v)))&&(.5>=(m=c.P.Sk(I*_,0,1))?(v=this.sa+(this.qa-this.sa)*m,l=this.oa+(this.ma-this.oa)*m):(v=this.qa-(this.qa-this.sa)*(1-m),l=this.ma-(this.ma-this.oa)*(1-m)),c.h.Jy(v,l,a,n)<=o)){if(.5>m){if(c.h.Jy(v,l,p,d)<=o)return 0}else if(c.h.Jy(v,l,this.qa,this.ma)<=o)return 1;return m}}return NaN},u.prototype.Nb=function(a){return a!=null&&(a==this||a.constructor===this.constructor&&this.zM(a))},u.prototype.lD=function(a,n,o){var l=o?this.sa:this.qa;o=o?this.oa:this.ma;var p=new c.h;return p.x=a.qa-l,p.y=a.ma-o,!(n.Sh(p)>6661338147750939e-31*n.$C(p))||(p.x=a.sa-l,p.y=a.oa-o,n.Sh(p)<=6661338147750939e-31*n.$C(p))},u.prototype.kD=function(a){var n=new c.h;return n.x=this.qa-this.sa,n.y=this.ma-this.oa,!!this.lD(a,n,!1)&&(n.Uq(),!!this.lD(a,n,!0))},u.HM=function(a,n){var o=a.wu(n.sa,n.oa),l=a.wu(n.qa,n.ma);return!(0>o&&0>l||0<o&&0<l)&&(o=n.wu(a.sa,a.oa),l=n.wu(a.qa,a.ma),!(0>o&&0>l||0<o&&0<l)&&((o=a.Rb())>(l=n.Rb())?a.kD(n):n.kD(a)))},u.FM=function(a,n,o){var l=c.h.construct(NaN,NaN),p=a.qa-a.sa,d=a.ma-a.oa,m=n.qa-n.sa,v=n.ma-n.oa,_=m*d-p*v;if(_==0)return l;var M=8881784197001252e-31*(Math.abs(m*d)+Math.abs(p*v)),T=n.sa-a.sa,I=n.oa-a.oa,O=m*I-T*v,R=O/_,L=Math.abs(_);return R<-(m=(8881784197001252e-31*(Math.abs(m*I)+Math.abs(T*v))*L+M*Math.abs(O))/(_*_)+2220446049250313e-31*Math.abs(R))||R>1+m||(m=(v=p*I-T*d)/_)<-(p=(8881784197001252e-31*(Math.abs(p*I)+Math.abs(T*d))*L+M*Math.abs(v))/(_*_)+2220446049250313e-31*Math.abs(m))||m>1+p||(R=c.P.Sk(R,0,1),p=c.P.Sk(m,0,1),d=a.ic(R),_=n.ic(p),(M=new c.h).vc(d,_),M.length()>o&&(M.add(d,_),M.scale(.5),R=a.fe(M,!1),p=n.fe(M,!1),a=a.ic(R),n=n.ic(p),a.sub(n),a.length()>o)||l.na(R,p)),l},u.IM=function(a,n,o,l){var p=0;if((a.sa==n.sa&&a.oa==n.oa||a.sa==n.qa&&a.oa==n.ma)&&(p++,!l))return 1;if(a.qa==n.sa&&a.ma==n.oa||a.qa==n.qa&&a.ma==n.ma){if(++p==2)return 2;if(!l)return 1}return n.xi(a.sa,a.oa,o)||n.xi(a.qa,a.ma,o)||a.xi(n.sa,n.oa,o)||a.xi(n.qa,n.ma,o)?1:l&&p!=0||u.HM(a,n)==0?0:1},u.Yx=function(a,n,o,l,p,d){var m=0,v=a.sp(n.sa,n.oa,d,!1),_=a.sp(n.qa,n.ma,d,!1),M=n.sp(a.sa,a.oa,d,!1),T=n.sp(a.qa,a.ma,d,!1);return isNaN(v)||(l!=null&&(l[m]=v),p!=null&&(p[m]=0),o!=null&&(o[m]=c.h.construct(n.sa,n.oa)),m++),isNaN(_)||(l!=null&&(l[m]=_),p!=null&&(p[m]=1),o!=null&&(o[m]=c.h.construct(n.qa,n.ma)),m++),m==2||isNaN(M)||v==0&&M==0||_==0&&M==1||(l!=null&&(l[m]=0),p!=null&&(p[m]=M),o!=null&&(o[m]=c.h.construct(a.sa,a.oa)),m++),m==2||isNaN(T)||v==1&&T==0||_==1&&T==1||(l!=null&&(l[m]=1),p!=null&&(p[m]=T),o!=null&&(o[m]=c.h.construct(n.qa,n.ma)),m++),0<m?(m==2&&l!=null&&l[0]>l[1]&&(a=l[0],l[0]=l[1],l[1]=a,p!=null&&(l=p[0],p[0]=p[1],p[1]=l),o!=null&&(p=c.h.construct(o[0].x,o[0].y),o[0]=o[1],o[1]=p)),m):(m=u.FM(a,n,d),isNaN(m.x)?0:(o!=null&&(o[0]=a.ic(m.x)),l!=null&&(l[0]=m.x),p!=null&&(p[0]=m.y),1))},u.prototype.ZF=function(){return 0},u.prototype.pp=function(){},u.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(c.MC);c.zb=C}(W||(W={})),function(c){var C=function(){function b(){this.Lm=[],this.za=-1}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},b.prototype.RX=function(u){this.Lm.push(u)},b.prototype.qe=function(){},b}();c.aL=C}(W||(W={})),function(c){var C;(C=c.ML||(c.ML={}))[C.enumFillRuleOddEven=0]="enumFillRuleOddEven",C[C.enumFillRuleWinding=1]="enumFillRuleWinding";var b=function(u){function a(n,o){var l=u.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,o===void 0)l.yf=n,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=c.ee.og();else{if(o==null)throw c.i.O();l.yf=n,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=o}return l.Cj=null,l.gb=0,l}return Ot(a,u),a.prototype.vm=function(){return 0<this.vq},a.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new c.Ta(this.description):this.Gq.kg(this.description)},a.prototype.rx=function(n,o){var l=new c.h;l.x=n,l.y=o,this.Nt(l)},a.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},a.prototype.nf=function(n){if(n.B())throw c.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},a.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=c.Zc.Qh(2),this.nb.write(0,0),this.mb=c.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var o=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(o+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(o,this.Gq),this.Og=!1)},a.prototype.Aj=function(n,o){this.Rx(),this.Db(this.xa-1,n,o)},a.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},a.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},a.prototype.uU=function(n){if(this.wc(),this.yf)throw c.i.Ra();var o=this.ea();if(n>o)throw c.i.Ra();if(this.ec(n)){if(this.mb==null)throw c.i.Ra();var l=this.xa,p=this.Ca(n),d=this.Wc(n);this.fm(this.xa+1),this.rc();for(var m=0,v=this.description.Ba;m<v;m++)if(this.Aa[m]!=null){var _=c.ua.Wa(this.description.Fd(m));this.Aa[m].Nn(_*d,this.Aa[m],_*p,_,!0,1,_*l)}for(;o>n;o--)l=this.nb.read(o),this.nb.write(o,l+1);this.mb.EE(n,1)}},a.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var o=this.mb.read(n);this.mb.write(n,1|o),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},a.prototype.ec=function(n){return(1&this.mb.read(n))!=0},a.prototype.On=function(n){if(this.ec(n))return!0;var o=this.Ca(n);return!(o>(n=this.Wc(n)-1))&&(o=this.Oa(o),n=this.Oa(n),o.rb(n))},a.prototype.Av=function(n){return(2&this.mb.read(n))!=0},a.prototype.oc=function(n,o){if(this.Ll(n.description),n.K()!=322)throw c.i.Ra();var l=new c.Ta;(o||this.B())&&(n.Uo(l),this.nf(l)),n.Qo(l),this.lineTo(l)},a.prototype.vp=function(n){var o=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,o&&this.Nf(256,!1)},a.prototype.bd=function(n,o){if(!n.B()){for(var l=this.xa==0,p=new c.Ta(this.description),d=0;4>d;d++)n.If(o?4-d-1:d,p),d==0?this.nf(p):this.lineTo(p);this.Cp(),this.Og=!1,l&&!o&&this.Nf(256,!1)}},a.prototype.add=function(n,o){for(var l=0;l<n.ea();l++)this.addPath(n,l,!o)},a.prototype.addPath=function(n,o,l){this.wf(-1,n,o,l)},a.prototype.$k=function(n,o){this.Cz(n,o)},a.prototype.Fr=function(n,o,l,p,d){if(d||this.ea()!=0||(d=!0),0>o&&(o=n.ea()-1),o>=n.ea()||0>l||0>p||p>n.tv(o))throw c.i.ga("index out of bounds");if(p!=0){var m=n.ec(o)&&l+p==n.tv(o);if(!m||p!=1){if(this.Og=!1,this.Ll(n.description),l=n.Ca(o)+l+1,d&&(p++,l--),m&&p--,m=this.xa,this.fm(this.xa+p),this.rc(),d){if(p==0)return;this.nb.add(this.xa),d=n.mb.read(o),d&=-5,this.yf&&(d|=1),this.mb.write(this.mb.size-1,d),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);d=0;for(var v=this.description.Ba;d<v;d++){var _=this.description.qd(d),M=c.ua.Wa(_),T=n.description.Qf(_);0>T||n.Aa[T]==null?this.Aa[d].Mn(M*m,c.ua.te(_),p*M,M*m):this.Aa[d].Nn(M*m,n.Aa[T],M*l,p*M,!0,M,M*m)}if(this.vm()||n.Av(o))throw c.i.Ra();this.Qc(1993)}}},a.prototype.iJ=function(){for(var n=0,o=this.ea();n<o;n++)this.wW(n)},a.prototype.wW=function(n){if(this.rc(),n>=this.ea())throw c.i.O();var o=this.Ca(n),l=this.Ka(n);n=this.ec(n)?1:0;for(var p=0,d=this.description.Ba;p<d;p++)if(this.Aa[p]!=null){var m=c.ua.Wa(this.description.Fd(p));this.Aa[p].pi(m*(o+n),m*(l-n),m)}this.Qc(1993)},a.prototype.ar=function(n){this.rc();var o=this.ea();if(0>n&&(n=o-1),n>=o)throw c.i.O();for(var l=this.Ca(n),p=this.Ka(n),d=0,m=this.description.Ba;d<m;d++)if(this.Aa[d]!=null){var v=c.ua.Wa(this.description.Fd(d));this.Aa[d].Fn(v*l,v*p,v*this.xa)}for(l=n+1;l<=o;l++)d=this.nb.read(l),this.nb.write(l-1,d-p);if(this.mb==null)for(l=n+1;l<=o;l++)n=this.mb.read(l),this.mb.write(l-1,n);this.nb.resize(o),this.mb.resize(o),this.xa-=p,this.Rg-=p,this.Qc(1993)},a.prototype.wf=function(n,o,l,p){if(o==this||l>=o.ea())throw c.i.O();var d=this.ea();if(n>d)throw c.i.O();0>n&&(n=d),0>l&&(l=o.ea()-1),this.Og=!1,this.Ll(o.description),o.rc();var m=o.Ca(l),v=o.Ka(l),_=this.xa,M=o.ec(l)&&!p?1:0;this.fm(this.xa+v),this.rc();for(var T=n<d?this.Ca(n):_,I=0,O=this.description.Ba;I<O;I++){var R=this.description.Fd(I),L=o.description.Qf(R),G=c.ua.Wa(R);0<=L&&o.Aa[L]!=null?(M!=0&&this.Aa[I].Nn(T*G,o.Aa[L],G*m,G,!0,G,G*_),this.Aa[I].Nn((T+M)*G,o.Aa[L],G*(m+M),G*(v-M),p,G,G*(_+M))):this.Aa[I].Mn(T*G,c.ua.te(R),G*v,G*_)}for(this.nb.add(_+v),p=d;p>=n+1;p--)m=this.nb.read(p-1),this.nb.write(p,m+v);for(o.Av(l),this.mb.add(0),p=d-1;p>=n+1;p--)d=this.mb.read(p),d&=-5,this.mb.write(p+1,d);d=o.DR().read(l),d&=-5,this.yf&&(d|=1),this.mb.write(n,d)},a.prototype.Cz=function(n,o){var l=-1,p=this.ea();if(l>p)throw c.i.O();0>l&&(l=p),this.Og=!1;var d=this.xa;this.fm(this.xa+o),this.rc();var m=l<p?this.Ca(l):d;if(n!=null)this.Aa[0].Dz(2*m,n,0,o,!0,2*d);else{var v=c.ua.te(0);this.Aa[0].Mn(2*m,v,2*o,2*d)}n=1;for(var _=this.description.Ba;n<_;n++){v=this.description.qd(n);var M=c.ua.Wa(v);v=c.ua.te(v),this.Aa[n].Mn(m*M,v,M*o,M*d)}for(this.nb.add(this.xa),d=p;d>=l+1;d--)m=this.nb.read(d-1),this.nb.write(d,m+o);for(this.mb.add(0),d=p-1;d>=l+1;d--)o=this.mb.read(d),o&=-5,this.mb.write(d+1,o);this.yf&&this.mb.write(l,1)},a.prototype.kG=function(n,o,l){var p=-1;if(0>n&&(n=this.ea()),n>this.ea()||p>this.Ka(n)||l>o.length)throw c.i.ga("index out of bounds");if(l!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>p&&(p=this.Ka(n)),this.rc();var d=this.xa;this.fm(this.xa+l),this.rc();for(var m=0,v=this.description.Ba;m<v;m++){var _=this.description.Fd(m),M=c.ua.Wa(_);this.Aa[m].Wt(M*(this.Ca(n)+p+l),(d-this.Ca(n)-p)*M,this.Aa[m],M*(this.Ca(n)+p),!0,M),m==0?this.Aa[m].pC(M*(this.Ca(n)+p),l,o,0,!0):this.Aa[m].Yj(c.ua.te(_),(this.Ca(n)+p)*M,l*M)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+p+l,d-this.Ca(n)-p,this.Se,this.Ca(n)+p,!0,1),this.Nj.Wt(this.Ca(n)+p+l,d-this.Ca(n)-p,this.Nj,this.Ca(n)+p,!0,1),this.Se.Yj(1,this.Ca(n)+p,l),this.Nj.Yj(-1,this.Ca(n)+p,l)),n+=1,o=this.ea();n<=o;n++)this.nb.write(n,this.nb.read(n)+l)}},a.prototype.xf=function(n,o,l){var p=this.ea();if(0>n&&(n=this.ea()),n>=p||o>this.Ka(n))throw c.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>o&&(o=this.Ka(n));var d=this.xa;this.fm(this.xa+1),this.rc();var m=this.Ca(n);this.Aa[0].xj(2*(m+o),l,2*d),l=1;for(var v=this.description.Ba;l<v;l++){var _=this.description.Fd(l),M=c.ua.Wa(_);this.Aa[l].Mn(M*(m+o),c.ua.te(_),M,M*d)}for(n+=1;n<=p;n++)this.nb.write(n,this.nb.read(n)+1)},a.prototype.xB=function(n,o){var l=this.ea();if(0>n&&(n=l-1),n>=l||o>=this.Ka(n))throw c.i.ga("index out of bounds");this.rc();var p=this.Ca(n);0>o&&(o=this.Ka(n)-1),o=p+o,p=0;for(var d=this.description.Ba;p<d;p++)if(this.Aa[p]!=null){var m=c.ua.Wa(this.description.Fd(p));this.Aa[p].Fn(m*o,m,m*this.xa)}for(;l>=n+1;l--)o=this.nb.read(l),this.nb.write(l,o-1);this.xa--,this.Rg--,this.Qc(1993)},a.prototype.oE=function(n,o,l,p){if(n=this.Ca(n)+o,(l=this.Ca(l)+p)<n||0>n||l>this.I()-1)throw c.i.O();o=0,(p=this.Ha()).Wb(n);do{for(;p.Ia()&&(n=p.ia(),p.xb()!=l);)o+=n=n.Rb();if(p.xb()==l)break}while(p.ab());return o},a.prototype.$N=function(n,o,l){if(o=this.Ca(n)+o,l=this.Ca(n)+l,0>o||l>this.I()-1)throw c.i.O();var p=this.Ha();if(o>l){if(!this.ec(n))throw c.i.O("cannot iterate across an open path");p.DB()}var d=n=0;p.Wb(o);do d+=n,n=p.ia().Rb();while(p.xb()!=l);return d},a.prototype.mg=function(){return c.si.im(this,null)},a.prototype.DS=function(n,o,l){for(var p=n;p<l-1;p++)if(this.ec(p))throw c.i.O("cannot interpolate across closed paths");if((p=this.description.Ba)!=1){var d=this.oE(n,o,l,void 0);if(d!=0)for(var m=1;m<p;m++){var v=this.description.qd(m);if(c.ua.gz(v)!=2)for(var _=c.ua.Wa(v),M=0;M<_;M++)this.FS(v,n,o,l,d,M)}}},a.prototype.CS=function(n,o,l){var p=this.description.Ba;if(p!=1){var d=this.$N(n,o,l);if(d!=0)for(var m=1;m<p;m++){var v=this.description.qd(m);if(c.ua.gz(v)!=2)for(var _=c.ua.Wa(v),M=0;M<_;M++)this.ES(v,n,o,l,d,M)}}},a.prototype.FS=function(n,o,l,p,d,m){var v=this.Ha(),_=this.Ca(o)+l;p=this.Ca(p)+void 0,o=this.Vc(n,_,m),l=this.Vc(n,p,m);var M=o,T=0;v.Wb(_);do if(v.Ia()){if(v.ia(),v.xb()==p)break;this.setAttribute(n,v.xb(),m,M),v.ni();do{if(_=v.ia(),v.jk()==p)return;T+=_=_.Rb(),M=c.mc.jq(o,l,T/d),v.Pn()||this.setAttribute(n,v.jk(),m,M)}while(v.Ia())}while(v.ab())},a.prototype.ES=function(n,o,l,p,d,m){var v=this.Ha(),_=this.Ca(o)+l;if((o=this.Ca(o)+p)!=_){p=this.Vc(n,_,m),l=this.Vc(n,o,m);var M=0;v.Wb(_),v.DB(),_=p;do{var T=v.ia();this.setAttribute(n,v.xb(),m,_),M+=_=T.Rb(),_=c.mc.jq(p,l,M/d)}while(v.jk()!=o)}},a.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.qD()},a.prototype.Pc=function(n){n instanceof c.Ed?this.SD(n,-1):this.qN(n)},a.prototype.SD=function(n,o){if(!this.B()&&!n.isIdentity()){this.rc();var l=this.Aa[0],p=new c.h,d=new c.h;if(0>o){var m=this.vm(),v=0;o=this.xa}else m=this.Av(o),v=this.Ca(o),o=this.Wc(o);for(;v<o;v++){if(p.x=l.read(2*v),p.y=l.read(2*v+1),m){var _=this.Nj.read(v);if(0<=_)switch(7&this.Se.read(v)){case 2:d.x=this.Td.read(_),d.y=this.Td.read(_+1),n.Gh(d,d),this.Td.write(_,d.x),this.Td.write(_+1,d.y),d.x=this.Td.read(_+3),d.y=this.Td.read(_+4),n.Gh(d,d),this.Td.write(_+3,d.x),this.Td.write(_+4,d.y);break;case 4:throw c.i.Ra()}}n.Gh(p,p),l.write(2*v,p.x),l.write(2*v+1,p.y)}this.Qc(1993)}},a.prototype.qN=function(n){if(!this.B()){this.se(1),this.rc();for(var o=this.Aa[0],l=this.Aa[1],p=new c.Od,d=new c.Od,m=this.vm(),v=0;v<this.xa;v++){if(p.x=o.read(2*v),p.y=o.read(2*v+1),p.z=l.read(v),m){var _=this.Nj.read(v);if(0<=_)switch(7&this.Se.read(v)){case 2:d.x=this.Td.read(_),d.y=this.Td.read(_+1),d.z=this.Td.read(_+2),d=n.gp(d),this.Td.write(_,d.x),this.Td.write(_+1,d.y),this.Td.write(_+1,d.z),d.x=this.Td.read(_+3),d.y=this.Td.read(_+4),d.z=this.Td.read(_+5),d=n.gp(d),this.Td.write(_+3,d.x),this.Td.write(_+4,d.y),this.Td.write(_+5,d.z);break;case 4:throw c.i.Ra()}}p=n.gp(p),o.write(2*v,p.x),o.write(2*v+1,p.y),l.write(v,p.z)}this.Qc(1993)}},a.prototype.ey=function(){this.nb==null&&(this.nb=c.Zc.Qh(1,0),this.mb=c.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},a.prototype.pp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?c.ja.Cn(this.nb):null,n.mb=this.mb!=null?c.rn.Cn(this.mb):null,n.Nj=this.Nj!=null?c.ja.Cn(this.Nj):null,n.Se=this.Se!=null?c.rn.Cn(this.Se):null,n.Td=this.Td!=null?c.ce.Cn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.bk(1024)?null:this.Cj},a.prototype.Rb=function(){if(!this.bk(512))return this.uq;for(var n=this.Ha(),o=new c.Ex(0);n.ab();)for(;n.Ia();)o.add(n.ia().Rb());return this.uq=o.tm(),this.Nf(512,!1),o.tm()},a.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof a&&u.prototype.Nb.call(this,n)))return!1;var o=this.ea();return!(o!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,o+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,o))&&u.prototype.Nb.call(this,n)},a.prototype.Ha=function(){return new c.SL(this)},a.prototype.dy=function(n){if(u.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Ap=function(n,o){if(u.prototype.Ap.call(this,n,o),this.vm())for(n=this.Ha();n.ab();)n.Ia()},a.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},a.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},a.prototype.Gv=function(n){return!!this.yf&&(this.bk(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},a.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},a.prototype.zu=function(){if(this.bk(1024)){var n=this.ea();this.Cj==null?this.Cj=new c.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new c.Ex(0);for(var o=new c.Ex(0),l=new c.h,p=0,d=this.Ha();d.ab();){for(o.reset(),this.D(this.Ca(d.gb),l);d.Ia();)o.add(d.ia().Sx(l.x,l.y));n.add(o.tm());var m=p++;this.Cj.write(m,o.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},a.prototype.zR=function(){if(this.yf){this.hm();for(var n=this.ea(),o=0;o<n;o++)4&this.mb.read(o)}},a.prototype.hm=function(){if(this.bk(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=c.Zc.Or(n+1));for(var o=1,l=0;l<n;l++){var p=this.Cj.read(l);l==0&&(o=0<p?1:-1),0<p*o?this.mb.tJ(l,4):this.mb.EE(l,4)}this.Nf(8,!1)}},a.prototype.nz=function(n){var o=this.gb,l=this.ea();if(0<=o&&o<l){if(n<this.Wc(o)){if(n>=this.Ca(o))return o;o--}else o++;if(0<=o&&o<l&&n>=this.Ca(o)&&n<this.Wc(o))return this.gb=o}if(5>l){for(o=0;o<l;o++)if(n<this.Wc(o))return this.gb=o;throw c.i.ga("corrupted geometry")}for(o=0,--l;l>o;){var p=o+(l-o>>1);if(n<this.Ca(p))l=p-1;else{if(!(n>=(o=this.Wc(p))))return this.gb=p;o=p+1}}return this.gb=o},a.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var o=0,l=this.ea();o<l;o++)this.ec(o)&&n++}return n},a.prototype.tv=function(n){var o=this.Ka(n);return this.ec(n)||o--,o},a.prototype.Ja=function(){return new a(this.yf,this.description)},a.prototype.Eb=function(){return this.yf?2:1},a.prototype.K=function(){return this.yf?1736:1607},a.prototype.KJ=function(n){this.nb=n,this.Qc(16777215)},a.prototype.OR=function(){return this.vx(),this.Se},a.prototype.DR=function(){return this.vx(),this.mb},a.prototype.JJ=function(n){this.mb=n,this.Qc(16777215)},a.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},a.prototype.Wc=function(n){return this.nb.read(n+1)},a.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},a.prototype.Ca=function(n){return this.nb.read(n)},a.prototype.nu=function(n,o){this.Cb==null&&(this.Cb=new c.Vk),o=c.Mx.hW(o);var l=this.Cb.Gk;if(l!=null){if(!(l.Jk<n||o>l.KR()))return!0;this.Cb.sD(null)}return l=c.Mx.create(this,n,o),this.Cb.sD(l),!0},a.prototype.dc=function(){var n=u.prototype.dc.call(this);if(!this.Bc()){var o=this.ea();this.nb!=null&&this.nb.Bn(n,0,o+1),this.mb!=null&&this.mb.Bn(n,0,o)}return n},a.prototype.TF=function(n){return this.Se!=null?this.Se.read(n):1},a.prototype.cc=function(n,o,l){var p=this.nz(n);if(n==this.Wc(p)-1&&!this.ec(p))throw c.i.ga("index out of bounds");this.rc();var d=this.Se,m=1;if(d!=null&&(m=7&d.read(n)),m!==1)throw c.i.Ra();if(o.Qr(),o=o.get(),l?o.kg(c.ee.og()):o.kg(this.description),p=n==this.Wc(p)-1&&this.ec(p)?this.Ca(p):n+1,d=new c.h,this.D(n,d),o.Ec(d),this.D(p,d),o.Rc(d),!l)for(l=1,d=this.description.Ba;l<d;l++){m=this.description.Fd(l);for(var v=c.ua.Wa(m),_=0;_<v;_++){var M=this.Vc(m,n,_);o.SB(m,_,M),M=this.Vc(m,p,_),o.IB(m,_,M)}}},a.prototype.Tj=function(n,o){if(n>=this.ea())throw c.i.O();if(this.B())o.Pa();else{if(this.Av(n))throw c.i.ga("not implemented");var l=this.vb(0),p=new c.h,d=new c.l;d.Pa();var m=this.Ca(n);for(n=this.Wc(n);m<n;m++)l.uc(2*m,p),d.$b(p);o.L(d)}},a.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new c.Vk),!(n==0||16>this.I())&&(n=c.ta.hE(this),this.Cb.QM(n),!0)},a.prototype.bM=function(){if(this.Cb==null&&(this.Cb=new c.Vk),this.Cb.Ao==null){this.Cb.rD(null);var n=c.ta.SN(this);this.Cb.rD(n)}},a.prototype.Zo=function(n){this.zq=n},a.prototype.Jn=function(){return this.zq},a.prototype.xD=function(n){if(this==n)throw c.i.ga("MultiPathImpl.add");for(var o=this.ea(),l=0;l<n.ea();l++)this.addPath(n,l,!0),this.uU(o),o++},a.prototype.eO=function(n){var o=this.nz(n),l=this.Ca(o);if(l!=n){if(n>=(o=this.Wc(o))||n<l)throw c.i.ga("change_ring_start_point");for(var p=0,d=this.description.Ba;p<d;p++){var m=this.description.qd(p);m=c.ua.Wa(m),this.Aa[p].rotate(l*m,n*m,o*m)}}},a}(c.Fx);c.Wk=b}(W||(W={})),function(c){var C=function(b){function u(a){var n=b.call(this)||this;if(a!==void 0){if(a==null)throw c.i.O();n.description=a}else n.description=c.ee.og();return n.xa=0,n}return Ot(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(a){this.resize(this.xa+1),this.Fh(this.xa-1,a)},u.prototype.Du=function(a,n){this.resize(this.xa+1);var o=new c.h;o.na(a,n),this.Db(this.xa-1,o)},u.prototype.Gd=function(a,n,o){if(o=0>o?a.I():o,0>n||n>a.I()||o<n)throw c.i.O();if(n!=o){this.Ll(a.description),o-=n;var l=this.xa;this.resize(this.xa+o),this.rc();for(var p=0,d=a.description.Ba;p<d;p++){var m=a.description.Fd(p),v=c.ua.Wa(m),_=this.vb(m);m=a.vb(m),_.Nn(l*v,m,n*v,o*v,!0,1,l*v)}}},u.prototype.BD=function(a,n){var o=a.length;if(n=0>n?o:n,0>o||0>n)throw c.i.O();if(n!=0){o=n-0,n=this.xa,this.resize(this.xa+o);for(var l=0;l<o;l++)this.Db(n+l,a[0+l])}},u.prototype.xB=function(a){if(0>a||a>=this.I())throw c.i.ga("index out of bounds");this.rc();for(var n=0,o=this.description.Ba;n<o;n++)if(this.Aa[n]!=null){var l=c.ua.Wa(this.description.Fd(n));this.Aa[n].Fn(l*a,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(a){this.fm(a)},u.prototype.pp=function(){},u.prototype.Pa=function(){b.prototype.qD.call(this)},u.prototype.Pc=function(a){if(a instanceof c.Ed){if(this.B())return;this.rc();for(var n=this.Aa[0],o=new c.h,l=0;l<this.xa;l++)o.x=n.read(2*l),o.y=n.read(2*l+1),a.Gh(o,o),n.write(2*l,o.x),n.write(2*l+1,o.y)}else{if(this.B())return;this.rc(),this.se(1),this.rc(),n=this.Aa[0],o=this.Aa[1];var p=new c.Od;for(l=0;l<this.xa;l++){p.x=n.read(2*l),p.y=n.read(2*l+1),p.z=o.read(l);var d=a.gp(p);n.write(2*l,d.x),n.write(2*l+1,d.y),o.write(l,d.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(a){return a==this||a instanceof u&&b.prototype.Nb.call(this,a)},u.prototype.dW=function(a,n){var o=this.xa;if(o=Math.min(o,n+1e3),0>n||n>=this.xa||o<n||a.length!=1e3)throw c.i.O();var l=o-n,p=[];for(this.vb(0).Xw(2*n,2*l,p,0,!0),n=0;n<l;n++)a[n]=c.h.construct(p[2*n],p[2*n+1]);return o},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.mg=function(){return null},u}(c.Fx);c.de=C}(W||(W={})),function(c){var C;(C=c.cL||(c.cL={}))[C.NotDetermined=0]="NotDetermined",C[C.Structure=1]="Structure",C[C.DegenerateSegments=2]="DegenerateSegments",C[C.Clustering=3]="Clustering",C[C.Cracking=4]="Cracking",C[C.CrossOver=5]="CrossOver",C[C.RingOrientation=6]="RingOrientation",C[C.RingOrder=7]="RingOrder",C[C.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",C[C.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",C[C.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var b=function(){function u(a,n,o){a===void 0?(this.Lj=0,this.Lo=this.Ko=-1):(this.Lj=a,this.Ko=n,this.Lo=o)}return u.prototype.Yt=function(a){this.Lj=a.Lj,this.Ko=a.Ko,this.Lo=a.Lo},u}();c.Nd=b}(W||(W={})),function(c){c.P=function(){function C(){}return C.assert=function(b){if(b===!1)throw c.i.AK()},C.WJ=function(b){return isNaN(b)?NaN:b===0?b:0<b?1:-1},C.Hu=function(b){var u;u===void 0&&(u=0);for(var a=[],n=0;n<b;n++)a[n]=C.lg(2,u);return a},C.lg=function(b,u){u===void 0&&(u=0);for(var a=[],n=0;n<b;n++)a[n]=u;return a},C.bv=function(b,u){var a,n;for(a===void 0&&(a=0),n===void 0&&(n=b.length-1);a<=n;a++)b[a]=u},C.Sk=function(b,u,a){return b<u?u:b>a?a:b},C.Vh=function(b,u){var a=5381;return((a=((a=((a=u!==void 0?(u<<5)+u+(255&b):(a<<5)+a+(255&b))<<5)+a+(b>>8&255))<<5)+a+(b>>16&255))<<5)+a+(b>>24&255)&2147483647},C.wj=function(){throw Error("Not Implemented")},C.WA=function(b){return C.TT(b)+12345&2147483647},C.QG=function(b){var u=32,a=b%C.Px|0,n=b/C.Px|0;return(u&=63)==0?b:(32>u?(b=a>>>u|n<<32-u,u=n>>u):(b=n>>u-32,u=0<=n?0:-1),u*C.Px+(b>>>0))},C.TT=function(b){var u=1103515245,a=65535&u;return((u-a)*(b|=0)|0)+(a*b|0)|0},C.truncate=function(b){return 0>b?-1*Math.floor(Math.abs(b)):Math.floor(b)},C.MAX_SAFE_INTEGER=Math.pow(2,53)-1,C.MIN_SAFE_INTEGER=-C.MAX_SAFE_INTEGER,C.PC=65536,C.Px=C.PC*C.PC,C}()}(W||(W={})),function(c){var C;(C=c.wL||(c.wL={}))[C.Project=0]="Project",C[C.Union=1]="Union",C[C.Difference=2]="Difference",C[C.Proximity2D=3]="Proximity2D",C[C.Relate=4]="Relate",C[C.Equals=5]="Equals",C[C.Disjoint=6]="Disjoint",C[C.Intersects=7]="Intersects",C[C.Within=8]="Within",C[C.Contains=9]="Contains",C[C.Crosses=10]="Crosses",C[C.Touches=11]="Touches",C[C.Overlaps=12]="Overlaps",C[C.Buffer=13]="Buffer",C[C.Distance=14]="Distance",C[C.Intersection=15]="Intersection",C[C.Clip=16]="Clip",C[C.Cut=17]="Cut",C[C.DensifyByLength=18]="DensifyByLength",C[C.DensifyByAngle=19]="DensifyByAngle",C[C.LabelPoint=20]="LabelPoint",C[C.GeodesicBuffer=21]="GeodesicBuffer",C[C.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",C[C.ShapePreservingDensify=23]="ShapePreservingDensify",C[C.GeodeticLength=24]="GeodeticLength",C[C.GeodeticArea=25]="GeodeticArea",C[C.Simplify=26]="Simplify",C[C.SimplifyOGC=27]="SimplifyOGC",C[C.Offset=28]="Offset",C[C.Generalize=29]="Generalize",C[C.SymmetricDifference=30]="SymmetricDifference",C[C.ConvexHull=31]="ConvexHull",C[C.Boundary=32]="Boundary",C[C.SimpleRelation=33]="SimpleRelation";var b=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.xn=function(){},u.prototype.Ku=function(){return!1},u}();c.Ge=b}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(p=new c.$c(a),this.W(p,n,[o],!1,l).next()):l===!0?(o=new c.vC(a,n,o,!1,p),c.Ih.local().W(o,n,p)):new c.vC(a,n,o,!1,p)},u.instance=null,u}(c.Ge);c.uC=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l){this.za=-1,this.Sd=u,this.Vz=a,this.Es=n,this.kT=new c.l,this.kT.Pa(),this.fo=-1,this.Vb=l}return b.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.fo+1<this.Es.length&&this.fo++,this.buffer(u,this.Es[this.fo]);return null},b.prototype.Ma=function(){return this.za},b.prototype.buffer=function(u,a){return c.BK.buffer(u,a,this.Vz,NaN,96,this.Vb)},b.prototype.qe=function(){},b}();c.vC=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.fL(a,n,o,l)},u.instance=null,u}(c.Ge);c.eL=C}(W||(W={})),function(c){var C=function(){function b(u,a,n){if(this.za=-1,u==null)throw c.i.O();this.aa=a,this.zk=u,this.ra=c.ta.Xd(n,a,!1)}return b.prototype.next=function(){var u;return(u=this.zk.next())!=null?(this.za=this.zk.Ma(),c.Vd.clip(u,this.aa,this.ra,0)):null},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();c.fL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){return a instanceof c.ba?c.xC.lE(a):new c.xC(n,a,o)},u.instance=null,u}(c.Ge);c.wC=C}(W||(W={})),function(c){var C=function(){function b(u,a,n){if(this.oA=new c.au,this.za=-1,a==null)throw c.i.O();this.XG=u,this.Jc=!1,this.zk=a,this.Vb=n}return b.prototype.next=function(){if(this.XG){if(!this.Jc){var u=this.YN(this.zk);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.zk.next())!=null)return this.za=this.zk.Ma(),b.lE(u);this.Jc=!0}return null},b.prototype.Ma=function(){return this.za},b.prototype.YN=function(u){for(var a;(a=u.next())!=null;)this.oA.Ib(a);return this.oA.XQ()},b.prototype.qe=function(){if(!this.Jc){if(!this.XG)throw c.i.ga("Invalid call for non merging convex hull.");var u=this.zk.next();if(u==null)throw c.i.ga("Expects a non-null geometry.");this.oA.Ib(u)}},b.lE=function(u){if(b.NS(u))return u;var a=u.K();if(c.Wk.zd(a))return(a=new c.Ua(u.description)).oc(u,!0),a;if(a==550&&u.I()==2){var n=new c.Ta;return a=new c.Ua(u.description),u.we(0,n),a.nf(n),u.we(1,n),a.lineTo(n),a}return c.au.LO(u)},b.NS=function(u){if(u.B())return!0;var a=u.K();return a==33||a==197||!c.Wk.zd(a)&&(a==550?u.I()==1:a==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||c.au.DG(u,0)))},b}();c.xC=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return new c.hL(a,n,o,l,p)},u.instance=null,u}(c.Ge);c.gL=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l){if(this.Uf=null,a==null||n==null)throw c.i.ga("invalid argument");this.hT=u,this.hA=a,this.fH=n,u=c.ta.ov(a,n),this.ra=c.ta.Xd(o,u,!0),this.eH=-1,this.nd=l}return b.prototype.Ma=function(){return 0},b.prototype.next=function(){return this.LQ(),++this.eH<this.Uf.length?this.Uf[this.eH]:null},b.prototype.LQ=function(){if(this.Uf==null)switch(this.Uf=[],this.hA.K()){case 1607:this.NQ();break;case 1736:this.MQ()}},b.prototype.NQ=function(){var u=new c.Ua,a=new c.Ua,n=new c.Ua;this.Uf.push(u),this.Uf.push(a);var o=[];c.FK.DK(this.hT,this.hA,this.fH,this.ra,o,this.nd);for(var l=0;l<o.length;l++){var p=o[l];if(p.ct==0)u.add(p.Y,!1);else if(p.ct==1||p.ct==2)a.add(p.Y,!1);else if(p.ct==3)this.Uf.push(p.Y);else{if(p.ct!=4)throw c.i.ga("internal");n.add(p.Y,!1)}}n.B()||u.B()&&a.B()&&!(3<=this.Uf.length)||this.Uf.push(n),u.B()&&a.B()&&3>this.Uf.length&&(this.Uf.length=0)},b.prototype.MQ=function(){var u=new c.ja(0),a=new c.hd,n=a.VE(),o=a.Ib(this.hA),l=a.Ib(this.fH),p=new c.Hg;try{p.Gt(a,this.ra,this.nd),p.fl(n,o,l,u);var d=a.Ke(o),m=new c.Ea,v=new c.Ea;for(this.Uf.length=0,this.Uf.push(m),this.Uf.push(v),o=0;o<u.size;o++){var _=new c.hd,M=_.Ib(d),T=_.Ib(a.Ke(u.get(o)));p.fr(_,this.nd);var I=p.Cv(M,T),O=_.Ke(I);if(!O.B()){var R=a.EF(u.get(o),n);R==2?m.add(O,!1):R==1?v.add(O,!1):this.Uf.push(O);var L=new c.hd;M=L.Ib(d),T=L.Ib(a.Ke(u.get(o))),p.fr(L,this.nd),d=L.Ke(p.km(M,T))}}!d.B()&&0<u.size&&this.Uf.push(d),m.B()&&v.B()&&(this.Uf.length=0)}finally{p.Wg()}},b.prototype.qe=function(){},b}();c.hL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){if(a instanceof c.ba)return a=new c.$c(a),this.W(a,n,o).next();if(0>=n)throw c.i.O();return new c.iL(a,n,o)},u.instance=null,u}(c.Ge);c.Zl=C}(W||(W={})),function(c){var C=function(){function b(u,a){this.za=-1,this.Sd=u,this.Rs=a}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.HP(u)):null},b.prototype.HP=function(u){if(u.B()||1>u.Eb())return u;var a=u.K();if(a==1736||a==1607)return this.Iy(u);if(c.ba.zd(a))return this.JP(u);if(a==197)return this.IP(u);throw c.i.Ra()},b.prototype.JP=function(u){if(u.Rb()<=this.Rs)return u;var a=new c.Ua(u.description);return a.oc(u,!0),this.Iy(a)},b.prototype.IP=function(u){var a=new c.Ea(u.description);a.bd(u,!1);var n=new c.l;return u.A(n),u=n.da(),n.S()<=this.Rs&&u<=this.Rs?a:this.Iy(a)},b.prototype.Iy=function(u){for(var a=u.Ja(),n=u.Ha();n.ab();)for(var o=!0;n.Ia();){var l=n.ia();if(l.K()!=322)throw c.i.ga("not implemented");var p=n.Pn(),d=l.Rb();if(d>this.Rs){var m=Math.ceil(d/this.Rs);d=new c.Ta(u.description),o&&(l.Uo(d),a.nf(d));var v=o=1/m,_=0;for(--m;_<m;_++)l.Vw(v,d),a.lineTo(d),v+=o;p?a.Cp():(l.Qo(d),a.lineTo(d))}else p?a.Cp():a.oc(l,o);o=!1}return a},b.prototype.qe=function(){},b}();c.iL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l).next()):new c.jL(a,n,o,l)},u.km=function(a,n,o,l){if(a.B()||n.B())return a;var p=a.Eb(),d=n.Eb();if(p>d)return a;var m=a.K(),v=n.K(),_=new c.l,M=new c.l,T=new c.l;a.A(_),n.A(M),T.L(_),T.$b(M);var I=(T=c.ta.Xd(o,T,!0))*Math.sqrt(2)*1.00001,O=new c.l;if(O.L(_),O.X(I,I),!O.isIntersecting(M))return a;if(p==1&&d==2)return u.CV(a,n,v,o,l);if(m==33)switch(c.Wk.zd(v)?(o=new c.Ua(n.description),o.oc(n,!0)):o=n,v){case 1736:return u.PU(a,o,T);case 1607:return u.QU(a,o,T);case 550:return u.NU(a,o,T);case 197:return u.MU(a,o,T);case 33:return u.OU(a,o,T);default:throw c.i.O()}else if(m==550)switch(v){case 1736:return u.fU(a,n,T);case 197:return u.dU(a,n,T);case 33:return u.eU(a,n,T)}return c.Hg.km(a,n,o,l)},u.PU=function(a,n,o){return c.jd.EG(n,a,o)==0?a:a.Ja()},u.QU=function(a,n,o){var l=a.D();n=n.Ha();for(var p=o*Math.sqrt(2)*1.00001,d=p*p,m=new c.l;n.ab();)for(;n.Ia();){var v=n.ia();if(v.A(m),m.X(p,p),m.contains(l)){if(v.ss(l,o))return a.Ja();var _=v.ac();if(c.h.zc(l,_)<=d||(_=v.xc(),c.h.zc(l,_)<=d))return a.Ja()}}return a},u.NU=function(a,n,o){var l=n.vb(0);n=n.I();var p=a.D(),d=new c.h;o=o*Math.sqrt(2)*1.00001,o*=o;for(var m=0;m<n;m++)if(l.uc(2*m,d),c.h.zc(d,p)<=o)return a.Ja();return a},u.MU=function(a,n,o){var l=new c.l;return n.A(l),l.X(o,o),n=a.D(),l.contains(n)?a.Ja():a},u.OU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D();return n=n.D(),c.h.zc(l,n)<=o?a.Ja():a},u.fU=function(a,n,o){var l=new c.l;n.A(l),l.X(o,o);for(var p=a.I(),d=!1,m=[],v=0;v<p;v++)m[v]=!1;var _=new c.h;for(v=0;v<p;v++)a.D(v,_),l.contains(_)&&c.jd.Zd(n,_,o)!=0&&(d=!0,m[v]=!0);if(!d)return a;for(n=a.Ja(),v=0;v<p;v++)m[v]||n.Gd(a,v,v+1);return n},u.dU=function(a,n,o){var l=new c.l;n.A(l),l.X(o,o),n=a.I();var p=!1;o=[];for(var d=0;d<n;d++)o[d]=!1;var m=new c.h;for(d=0;d<n;d++)a.D(d,m),l.contains(m)&&(p=!0,o[d]=!0);if(!p)return a;for(l=a.Ja(),d=0;d<n;d++)o[d]||l.Gd(a,d,d+1);return l},u.eU=function(a,n,o){var l=a.vb(0),p=a.I(),d=n.D(),m=new c.h,v=!1;n=[];for(var _=0;_<p;_++)n[_]=!1;for(o=(_=o*Math.sqrt(2)*1.00001)*_,_=0;_<p;_++)l.uc(2*_,m),c.h.zc(m,d)<=o&&(v=!0,n[_]=!0);if(!v)return a;for(l=a.Ja(),_=0;_<p;_++)n[_]||l.Gd(a,_,_+1);return l},u.CV=function(a,n,o,l,p){var d=new c.Hh;a.dn(d);var m=new c.l;return n.A(m),d.$b(m),d.X(.1*d.S(),.1*d.da()),(m=new c.Ea).bd(d,!1),o==1736?m.add(n,!0):m.bd(n,!0),c.Xk.local().W(a,m,l,p)},u.instance=null,u}(c.Ge);c.lp=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o){this.vs=a==null,this.za=-1,this.Sd=u,this.Vz=n,this.nT=a.next(),this.Vb=o}return b.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.lp.km(u,this.nT,this.Vz,this.Vb)):null;var u},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();c.jL=C}(W||(W={})),function(c){var C=function(){function u(a){this.nd=a,this.Dj=new c.l,this.Dj.Pa(),this.qh=new c.l,this.qh.Pa()}return u.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=a,a=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=a,a=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=a,a=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=a},u.prototype.ZP=function(a,n){if(this.nd!=null&&!this.nd.progress(-1,-1))throw c.i.hu("user_canceled");var o=!this.Dj.isIntersecting(this.qh);return c.ba.Ic(a.K())&&c.ba.Ic(n.K())?a.I()>n.I()?this.aE(a,n,o):(this.Pt(),a=this.aE(n,a,o),this.Pt(),a):a.K()==550&&c.ba.Ic(n.K())?(a=this.bE(n,a,o),this.Pt(),a):n.K()==550&&c.ba.Ic(a.K())?this.bE(a,n,o):a.K()==550&&n.K()==550?a.I()>n.I()?this.cE(a,n):(this.Pt(),a=this.cE(n,a),this.Pt(),a):0},u.prototype.aE=function(a,n,o){var l=a.Ha(),p=n.Ha(),d=new c.l,m=new c.l,v=17976931348623157e292;if(!o&&this.hY(a,n,l,p))return 0;for(;l.ab();)for(;l.Ia();)if((a=l.ia()).A(d),!(d.px(this.qh)>v)){for(;p.ab();)for(;p.Ia();)if((n=p.ia()).A(m),d.px(m)<v&&(n=a.ub(n,o),(n*=n)<v)){if(n==0)return 0;v=n}p.aj()}return Math.sqrt(v)},u.prototype.bE=function(a,n,o){var l=a.Ha(),p=new c.l,d=17976931348623157e292,m=new c.h,v=n.I();for(o=!o&&a.K()==1736;l.ab();)for(;l.Ia();){var _=l.ia();if(_.A(p),!(1<v&&p.px(this.qh)>d)){for(var M=0;M<v;M++){if(n.D(M,m),o&&c.jd.Zd(a,m,0)!=0)return 0;var T=_.fe(m,!1);if(m.sub(_.ic(T)),(T=m.Tk())<d){if(T==0)return 0;d=T}}o=!1}}return Math.sqrt(d)},u.prototype.cE=function(a,n){for(var o,l=17976931348623157e292,p=new c.h,d=new c.h,m=a.I(),v=n.I(),_=0;_<m;_++)if(a.D(_,p),!(1<v&&this.qh.cK(p)>l)){for(var M=0;M<v;M++)if(n.D(M,d),(o=c.h.zc(p,d))<l){if(o==0)return 0;l=o}}return Math.sqrt(l)},u.prototype.hY=function(a,n,o,l){if(a.K()==1736){for(;l.ab();)if(l.Ia()){var p=l.ia();if(c.jd.Zd(a,p.xc(),0)!=0)return!0}l.aj()}if(n.K()==1736){for(;o.ab();)if(o.Ia()&&(a=o.ia(),c.jd.Zd(n,a.xc(),0)!=0))return!0;o.aj()}return!1},u.prototype.im=function(a,n){return a.B()||n.B()?NaN:(a.A(this.Dj),n.A(this.qh),this.ZP(a,n))},u}(),b=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return Ot(a,u),a.prototype.W=function(n,o,l){if(n==null||o==null)throw c.i.O();if(n.B()||o.B())return NaN;var p=n.K(),d=o.K();if(p==33){if(d==33)return c.h.ub(n.D(),o.D());if(d==197)return l=new c.l,o.A(l),l.ub(n.D());(p=new c.de).add(n),n=p}else if(p==197){if(d==197)return d=new c.l,n.A(d),l=new c.l,o.A(l),l.ub(d);(p=new c.Ea).bd(n,!1),n=p}return d==33?((d=new c.de).add(o),o=d):d==197&&((d=new c.Ea).bd(o,!1),o=d),new C(l).im(n,o)},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 14},a.instance=null,a}(c.Ge);c.kL=b}(W||(W={})),function(c){var C=function(){function b(u,a,n,o){this.tH=u,this.xH=a,this.nd=o,this.UG=n}return b.prototype.next=function(){var u=this.tH.next();return u==null?null:this.tC(u)},b.prototype.Ma=function(){return this.tH.Ma()},b.prototype.tC=function(u){var a=u.K();if(c.ba.Sn(a))return u;if(a==197)return(a=new c.Ea(u.description)).bd(u,!1),this.tC(a);if(u.B())return u;if(u==null)throw c.i.Ra();a=u.Ja();for(var n=new c.zb,o=0,l=u.ea();o<l;o++)this.NK(u,o,a,n);return a},b.prototype.NK=function(u,a,n,o){if(!(2>u.Ka(a))){var l=u.Ca(a),p=u.Wc(a)-1,d=u.vb(0),m=u.ec(a),v=new c.ja(0);v.Jb(u.Ka(a)+1);var _=new c.ja(0);for(_.Jb(u.Ka(a)+1),v.add(m?l:p),v.add(l),l=new c.h;1<v.size;){var M=v.Gc();v.Jf();var T=v.Gc();u.D(M,l),o.Ec(l),u.D(T,l),o.Rc(l),0<=(T=this.MK(o,l,d,M,T,p))?(v.add(T),v.add(M)):_.add(M)}if(m||_.add(v.get(0)),_.size==v.size)n.addPath(u,a,!0);else if(2<=_.size&&(!this.UG||_.size!=2||!(m||c.h.ub(u.Oa(_.get(0)),u.Oa(_.get(1)))<=this.xH))){for(a=new c.Ta,o=0,p=_.size;o<p;o++)u.we(_.get(o),a),o==0?n.nf(a):n.lineTo(a);m&&(this.UG||_.size!=2||n.lineTo(a),n.Cp())}}},b.prototype.MK=function(u,a,n,o,l,p){var d=l-1;for(l<=o&&(d=p),p=l=-1,o+=1;o<=d;o++){n.uc(2*o,a);var m=a.x,v=a.y;u.ic(u.fe(a,!1),a),a.x-=m,a.y-=v,(m=a.length())>this.xH&&m>p&&(l=o,p=m)}return l},b.prototype.qe=function(){},b}();c.lL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 29},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.lL(a,n,o,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.yC=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p,d,m,v){return a instanceof c.ba?(v=new c.$c(a),this.W(v,n,o,[l],p,d,!1,m).next()):m===!0?(o=new c.AC(a,n,o,l,p,!1,!1,v),c.Ih.local().W(o,n,v)):new c.AC(a,n,o,l,p,!1,!1,v)},u.instance=null,u}(c.Ge);c.zC=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l,p,d,m){if(p)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=u,this.vg=a,this.Ae=n,this.Es=o,this.ao=l,this.fo=-1,this.Vb=m,this.lT=new c.l,this.lT.Pa()}return b.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.fo+1<this.Es.length&&this.fo++,this.UQ(u,this.Es[this.fo]);return null},b.prototype.Ma=function(){return this.za},b.prototype.UQ=function(u,a){return c.PK.buffer(u,this.vg,this.Ae,a,this.ao,this.Vb)},b.prototype.qe=function(){},b}();c.AC=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o){if(n==null)throw c.i.O();if(a.B()||1>a.Eb())return 0;if(o==4)throw c.i.Fe();var l=c.cb.tc(n),p=c.cb.xv(l),d=c.cb.gv(l);p*=2-p;var m=l.Id().ci,v=a.K();if(v==1736||v==197)var _=a.mg();else c.ba.zd(v)?(_=new c.Ua(a.description)).oc(a,!0):_=a;if(l.Nb(n)==0){if(c.cb.Xc(n)){_=c.Jh.nj(_,n),v==1607&&_==a&&(_=c.ba.ig(a)),a=new c.Oc,c.cb.ih(n).en(a),v=0;for(var M=_.I();v<M;v++){var T=_.Oa(v);T.x=c.Jh.an(T.x,a),_.Db(v,T)}}a=_.Ja(),_=c.Jh.QI(n,l,_,a)?a:c.cb.Bh(_,n,l)}return this.bQ(_,o,d,p,m)},u.prototype.bQ=function(a,n,o,l,p){var d=new c.ha(0),m=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var v=a.ia(),_=v.ac();v=v.xc(),_.scale(p),v.scale(p),c.kb.xd(o,l,_.x,_.y,v.x,v.y,d,null,null,n),m+=d.u}return m},u.instance=null,u}(c.Ge);c.oL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l,p).next()):new c.nL(a,o,l,n,-1,-1,p)},u.instance=null,u}(c.Ge);c.mL=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l,p){if(0<p||n!=4&&0<l)throw c.i.Fe();if(a==null)throw c.i.O();this.za=-1,this.Os=u,this.vg=a,this.Ae=n,this.vT=o,this.uT=l}return b.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},b.prototype.Ma=function(){return this.za},b.prototype.Uy=function(u){return c.ej.Sr(u,this.vg,this.Ae,this.vT,this.uT,this.Vb)},b.prototype.qe=function(){},b}();c.nL=C}(W||(W={})),function(c){(function(C){C[C.Unknown=0]="Unknown",C[C.Contains=1]="Contains",C[C.Within=2]="Within",C[C.Equals=3]="Equals",C[C.Disjoint=4]="Disjoint",C[C.Touches=8]="Touches",C[C.Crosses=16]="Crosses",C[C.Overlaps=32]="Overlaps",C[C.NoThisRelation=64]="NoThisRelation",C[C.Intersects=1073741824]="Intersects",C[C.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(c.XK||(c.XK={})),c.qL=function(){function C(){}return C.fW=function(b,u){var a=b.K(),n=u.K();if(c.ba.zj(a)){var o=b.Cb;if(o!=null&&(o=o.Gk)!=null){if(n==33){var l=u.D();o=o.To(l.x,l.y)}else l=new c.l,u.A(l),o=o.So(l);if(o==1)return 1;if(o==0)return 4}}if(c.ba.zj(n)&&(o=u.Cb)!=null&&(o=o.Gk)!=null){if(a==33?(b=b.D(),o=o.To(b.x,b.y)):(u=new c.l,b.A(u),o=o.So(u)),o==1)return 2;if(o==0)return 4}return 0},C}()}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(a,n,o,l,p){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l,p).next()):p===void 0?new c.BC(a,n,o,l,-1):new c.BC(a,n,o,l,p)},u.prototype.xn=function(a,n,o){this.Ku(a)&&(n=c.ta.mj(n,a,!1),a.hj(o)||a.nu(n,o))},u.prototype.Ku=function(a){return c.Mx.tE(a)},u.instance=null,u}(c.Ge);c.Xk=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l){if(this.vs=a==null,this.za=-1,this.Sd=u,this.vg=n,this.Pe=a.next(),this.Fj=this.Pe.K(),this.Vb=o,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw c.i.O("bad dimension mask")}return b.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.IS(u),u=this.Bw.next()),u;return null},b.prototype.Ma=function(){return this.za},b.prototype.Fa=function(u){var a=this.tK(u);if(a!=null)return a;a=c.ta.ov(this.Pe,u);var n=c.ta.Xd(this.vg,a,!0);a=new c.l,this.Pe.A(a);var o=new c.l;return u.A(o),a.X(2*n,2*n),a.Fa(o),a.X(100*n,100*n),n=c.Vd.clip(this.Pe,a,0,0),u=c.Vd.clip(u,a,0,0),c.Hg.Cv(u,n,this.vg,this.Vb)},b.prototype.JI=function(u,a,n){var o=0;if((1&a)!=0)n[0]==null&&(n[0]=new c.de(u)),o++;else for(var l=0;l<n.length-1;l++)n[l]=n[l+1];if((2&a)!=0)n[o]==null&&(n[o]=new c.Ua(u)),o++;else for(l=o;l<n.length-1;l++)n[l]=n[l+1];if((4&a)!=0)n[o]==null&&(n[o]=new c.Ea(u)),o++;else for(l=o;l<n.length-1;l++)n[l]=n[l+1];if(o!=3){for(u=[],l=0;l<o;l++)u[l]=n[l];return new c.$c(u)}return new c.$c(n)},b.prototype.IS=function(u){var a=this.tK(u);if(a!=null){var n=[null,null,null];return n[a.Eb()]=a,this.JI(u.description,this.Hi,n)}a=c.ta.ov(this.Pe,u),n=c.ta.Xd(this.vg,a,!0),a=new c.l,this.Pe.A(a),a.X(2*n,2*n);var o=new c.l;return u.A(o),a.Fa(o),a.X(100*n,100*n),n=c.Vd.clip(this.Pe,a,0,0),a=c.Vd.clip(u,a,0,0),n=c.Hg.Kz(a,n,this.vg,this.Vb),this.JI(u.description,this.Hi,n)},b.prototype.tK=function(u){var a=c.ta.ov(u,this.Pe),n=c.ta.Xd(this.vg,a,!0);a=u.K();var o=u.B(),l=this.Pe.B();if(!(l=o||l)){l=new c.l,u.A(l);var p=new c.l;this.Pe.A(p),p.X(2*n,2*n),l=!l.isIntersecting(p)}if(!l)if((p=c.qL.fW(this.Pe,u))==4)l=!0;else{if((2&p)!=0)return this.Pe;if((1&p)!=0)return u}if(l)return(n=c.ba.uf(a))<(l=c.ba.uf(this.Fj))?b.BB(u,o):n>l||n==0&&a==550&&this.Fj==33?this.hJ():b.BB(u,o);if((this.Hi==-1||this.Hi==4)&&a==197&&this.Fj==197)return n=this.Pe,a=new c.l,u.A(a),o=new c.l,n.A(o),a.Fa(o),n=new c.Hh,u.copyTo(n),n.Yo(a),n;if(a==197&&c.ba.uf(this.Fj)==0||this.Fj==197&&c.ba.uf(a)==0)return o=a==197?u:this.Pe,u=a==197?this.Pe:u,a=new c.l,o.A(a),c.Vd.clip(u,a,n,0);if(c.ba.uf(a)==0&&0<c.ba.uf(this.Fj)||0<c.ba.uf(a)&&c.ba.uf(this.Fj)==0){if(n=c.ta.mj(this.vg,u,!1),a==550||a==33)return c.Hg.tG(u,this.Pe,n);if(this.Fj==550||this.Fj==33)return c.Hg.tG(this.Pe,u,n);throw c.i.Ra()}return this.Hi!=-1&&this.Hi!=2||a!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||a!=1736||this.Fj!=1607?null:this.qK(this.Pe,u):this.qK(u,this.Pe)},b.prototype.qK=function(u,a){var n=u,o=a,l=c.ta.mj(this.vg,a,!1),p=new c.l;o.A(p);var d=new c.l;n.A(d),d.X(2*l,2*l),p.Fa(d),p.X(10*l,10*l),n=u=c.Vd.clip(u,p,0,0),d=new c.ja(0);var m=-1,v=o.Cb;if(v!=null){var _=v.Gk;if(_!=null){m=0,d.Jb(n.I()+n.ea());for(var M=new c.l,T=n.Ha();T.ab();)for(;T.Ia();){T.ia().A(M);var I=_.So(M);I==1?d.add(1):I==0?d.add(0):(d.add(-1),m++)}}}if(5<a.I()&&(v=(o=a=c.Vd.clip(a,p,0,0)).Cb),0>m&&(m=n.sz()),p=n.I()+o.I(),m*o.I()>Math.log(p)*p*4)return null;p=null,m=o.Ha(),v!=null&&v.Gb!=null&&(p=v.Gb),p==null&&20<o.I()&&(p=c.ta.hE(o)),u=u.Ja(),o=null,v=n.Ha(),_=[0,0,0,0,0,0,0,0,0],M=new c.ce(0),T=new c.hg,I=-1;for(var O=0,R=0,L=0<d.size,G=-1;v.ab();){G=v.gb;var q=0;for(I=-1,O=0;v.Ia();){var D=L?c.P.truncate(d.get(R)):-1;R++;var H=v.ia();if(0>D){if(p!=null)for(o==null?o=p.oR(H,l):o.Vo(H,l),D=o.next();D!=-1;D=o.next()){m.Wb(p.ka(D)),D=m.ia();var ee=H.Fa(D,null,_,null,l);for(D=0;D<ee;D++)M.add(_[D])}else for(m.aj();m.ab();)for(;m.Ia();)for(D=m.ia(),ee=H.Fa(D,null,_,null,l),D=0;D<ee;D++)M.add(_[D]);if(0<M.size){M.Wd(0,M.size,function(Me,xe){return Me-xe});var te=0;M.add(1),ee=-1,D=0;for(var Z=M.size;D<Z;D++){var ce=M.get(D);if(ce!=te){var ye=!1;if(te!=0||ce!=1?(H.dh(te,ce,T),te=T.get()):(te=H,ye=!0),2<=q){if(u.Fr(n,G,I,O,q==3),this.KD(a,te.ac(),l)!=1&&this.LD(a,te,l)!=1)return null;u.oc(te,!1),q=1,O=0}else switch(ee=this.LD(a,te,l),ee){case 1:ye?2>q?(I=v.xb()-n.Ca(G),O=1,q=q==0?3:2):O++:(u.oc(te,q==0),q=1);break;case 0:q=0,I=-1,O=0;break;default:return null}te=ce}}}else{if(0>(D=this.KD(a,H.ac(),l)))return null;D==1?(2>q&&(I=v.xb()-n.Ca(G),q=q==0?3:2),O++):(I=-1,O=0)}M.clear(!1)}else D!=0&&D==1&&(q==0?(q=3,I=v.xb()-n.Ca(G)):q==1?(q=2,I=v.xb()-n.Ca(G)):O++)}2<=q&&(u.Fr(n,G,I,O,q==3),I=-1)}return u},b.prototype.KD=function(u,a,n){return c.Fg.ym(u,a,n)},b.prototype.LD=function(u,a,n){var o=a.ac();a=a.xc();var l=c.Fg.ym(u,o,n),p=c.Fg.ym(u,a,n);return l==1&&p==0||l==0&&p==1?-1:l==0||p==0?0:l==1||p==1?1:((l=new c.h).add(o,a),l.scale(.5),(u=c.Fg.ym(u,l,n))==0?0:u==1?1:-1)},b.BB=function(u,a){return a?u:u.Ja()},b.prototype.hJ=function(){return this.sH==null&&(this.sH=this.Pe.Ja()),this.sH},b.prototype.qe=function(){},b}();c.BC=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l,p,d,m){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l,p,d,m).next()):new c.rL(a,n,o,l,p,d,m)},u.instance=null,u}(c.Ge);c.CC=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o,l,p,d){this.za=-1,this.Sd=u,this.Oj=a,this.La=n,this.Mi=o,this.wA=l,this.oH=p,this.nd=d}return b.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.dL(u)):null},b.prototype.Ma=function(){return this.za},b.prototype.dL=function(u){var a=0>=this.oH?c.ta.mj(this.Oj,u,!1):this.oH;return c.CK.W(u,this.La,this.Mi,this.wA,a,this.nd)},b.prototype.qe=function(){},b}();c.rL=C}(W||(W={})),function(c){var C;(C=c.HK||(c.HK={}))[C.clipToDomainOnly=1]="clipToDomainOnly",C[C.clipWithHorizon=2]="clipWithHorizon",C[C.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var b=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return Ot(a,u),a.prototype.K=function(){return 0},a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.W=function(n,o,l){return n instanceof c.ba?(n=new c.$c(n),this.W(n,o,l).next()):new c.sL(n,o,l)},a.prototype.transform=function(n,o,l,p){return c.du.transform(n,o,l,p,!0)},a.prototype.St=function(n,o,l,p){return c.du.St(n,o,l,p)},a.instance=null,a}(c.Ge);c.Gx=b}(W||(W={})),function(c){var C=function(){function b(u,a,n){this.za=-1,this.Sd=u,this.ET=a,this.nd=n}return b.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),c.du.Bh(u,this.ET,this.nd)):null},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();c.sL=C}(W||(W={})),function(c){var C=function(){function u(){}return u.prototype.reset=function(){this.rh=this.yk=-1,this.ws=this.mq=!1},u.prototype.uQ=function(a,n,o){for(a.Wb(n,o);a.Ia();){var l=a.ia();if((l=l.Rb())!=0)return a.xb()}for(a.Wb(n,o);a.zz();)if((l=(l=a.ni()).Rb())!=0)return a.xb();return-1},u.prototype.vQ=function(a,n){for(a.Wb(n,-1);a.zz();)if(a.ni().Rb()!=0)return a.xb();return-1},u.prototype.tQ=function(a,n){for(a.Wb(n,-1),a.ia();a.Ia();)if(a.ia().Rb()!=0)return a.xb();return-1},u.prototype.sQ=function(a,n,o,l){if(this.yk=this.uQ(n,o,l),this.yk!=-1){n.Wb(this.yk,-1);var p=n.ia(),d=p.ic(p.fe(a,!1));if(o=c.h.zc(d,a),(l=new c.h).N(d),l.sub(p.ac()),(d=new c.h).N(a),d.sub(p.ac()),this.mq=0>l.yi(d),this.rh=this.tQ(n,this.yk),this.rh!=-1){n.Wb(this.rh,-1);var m=(p=n.ia()).fe(a,!1);m=p.ic(m);var v=c.h.zc(m,a);v>o?this.rh=-1:(l.N(m),l.sub(p.ac()),d.N(a),d.sub(p.ac()),this.ws=0>l.yi(d))}this.rh==-1&&(this.rh=this.vQ(n,this.yk),this.rh!=-1&&(n.Wb(this.rh,-1),m=(p=n.ia()).fe(a,!1),m=p.ic(m),(v=c.h.zc(m,a))>o?this.rh=-1:(l.N(m),l.sub(p.ac()),d.N(a),d.sub(p.ac()),this.ws=0>l.yi(d),a=this.yk,this.yk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}},u.prototype.XN=function(a,n,o,l,p){return o=o.Ha(),this.sQ(a,o,l,p),this.yk!=-1&&this.rh==-1?this.mq:this.yk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(o.Wb(this.yk,-1),a=o.ia().jg(),o.Wb(this.rh,-1),n=o.ia().jg(),0<=a.yi(n)):n},u}(),b=function(u){function a(){return u!==null&&u.apply(this,arguments)||this}return Ot(a,u),a.local=function(){return a.instance===null&&(a.instance=new a),a.instance},a.prototype.K=function(){return 3},a.prototype.iz=function(n,o,l){var p;if(p===void 0&&(p=!1),n.B())return new c.bm;o=o.D();var d=n,m=n.K();switch(m==197&&((d=new c.Ea).bd(n,!1),m=1736),m){case 33:return this.rI(d,o);case 550:return this.dI(d,o);case 1607:case 1736:return this.UT(d,o,l,p);default:throw c.i.ga("not implemented")}},a.prototype.jz=function(n,o){if(n.B())return new c.bm;o=o.D();var l=n,p=n.K();switch(p==197&&((l=new c.Ea).bd(n,!1),p=1736),p){case 33:return this.rI(l,o);case 550:case 1607:case 1736:return this.dI(l,o);default:throw c.i.ga("not implemented")}},a.prototype.kz=function(n,o,l,p){if(0>p)throw c.i.O();if(n.B())return[];o=o.D();var d=n,m=n.K();switch(m==197&&((d=new c.Ea).bd(n,!1),m=1736),m){case 33:return this.LU(d,o,l,p);case 550:case 1607:case 1736:return this.lU(d,o,l,p);default:throw c.i.ga("not implemented")}},a.prototype.UT=function(n,o,l,p){if(n.K()==1736&&l&&(l=new c.l,n.A(l),l=c.ta.Xd(null,l,!1),(p?c.jd.Zd(n,o,0):c.jd.Zd(n,o,l))!=0)){var d=new c.bm(o,0,0);return p&&d.QJ(!0),d}var m=n.Ha();d=new c.h;for(var v=l=-1,_=17976931348623157e292,M=0;m.ab();)for(;m.Ia();){var T=m.ia();T=T.ic(T.fe(o,!1));var I=c.h.zc(T,o);I<_?(M=1,d=T,l=m.xb(),v=m.gb,_=I):I==_&&M++}return d=new c.bm(d,l,Math.sqrt(_)),p&&(m.Wb(l,v),T=m.ia(),p=0>c.h.Wq(o,T.ac(),T.xc()),1<M&&((M=new C).reset(),p=M.XN(o,p,n,l,v)),d.QJ(p)),d},a.prototype.rI=function(n,o){return n=n.D(),o=c.h.ub(n,o),new c.bm(n,0,o)},a.prototype.dI=function(n,o){for(var l=n.vb(0),p=n.I(),d=n=0,m=0,v=17976931348623157e292,_=0;_<p;_++){var M=new c.h;l.uc(2*_,M);var T=c.h.zc(M,o);T<v&&(d=M.x,m=M.y,n=_,v=T)}return(o=new c.bm).by(d,m,n,Math.sqrt(v)),o},a.prototype.LU=function(n,o,l,p){return p==0?[]:(l*=l,n=n.D(),(o=c.h.zc(n,o))<=l?(l=[],(p=new c.bm).by(n.x,n.y,0,Math.sqrt(o)),l[0]=p):l=[],l)},a.prototype.lU=function(n,o,l,p){if(p==0)return[];var d=n.vb(0),m=n.I();n=[],l*=l;for(var v=0;v<m;v++){var _=d.read(2*v),M=d.read(2*v+1),T=o.x-_,I=o.y-M;(T=T*T+I*I)<=l&&((I=new c.bm).by(_,M,v,Math.sqrt(T)),n.push(I))}return o=n.length,n.sort(function(O,R){return O.La<R.La?-1:O.La==R.La?0:1}),p>=o||(n.length=p),n.slice(0)},a.instance=null,a}(c.Ge);c.Hx=b}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 4},u.prototype.W=function(a,n,o,l,p){return c.cm.sB(a,n,o,l,p)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(a){return c.Xt.ry(a)},u.prototype.xn=function(a,n,o){c.Xt.wD(a,n,o)},u.instance=null,u}(c.Ge);c.tL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 33},u.prototype.W=function(a,n,o,l,p){return a===1073741824?!c.vd.tB(n,o,l,4,p):c.vd.tB(n,o,l,a,p)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(a){return c.Xt.ry(a)},u.prototype.xn=function(a,n,o){c.Xt.wD(a,n,o)},u.instance=null,u}(c.Ge);c.fj=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o){if(this.nd=o,this.iT=n,this.za=-1,u==null)throw c.i.O();this.zk=u,this.Oj=a}return b.prototype.next=function(){var u;if((u=this.zk.next())!=null){if(this.za=this.zk.Ma(),this.nd!=null&&!this.nd.progress(-1,-1))throw c.i.hu("user_canceled");return this.ZB(u)}return null},b.prototype.Ma=function(){return this.za},b.prototype.ZB=function(u){if(u==null)throw c.i.O();return c.Ix.XJ(u,this.Oj,this.iT,this.nd)},b.prototype.qe=function(){},b}();c.uL=C}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 26},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),this.W(a,n,o,l).next()):new c.uL(a,n,o,l)},u.prototype.ts=function(a,n,o,l,p){return 0<(l!==void 0?c.Ix.ts(a,n,o,l,p):c.Ix.ts(a,n,!1,null,o))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.$l=C}(W||(W={})),function(c){var C=function(){function p(){this.Aq=0}return p.prototype.eX=function(d){this.Aq&=-2,this.Aq|=d?1:0},p.prototype.Yp=function(){return(1&this.Aq)!=0},p.prototype.RF=function(){return this.Yp()?0:1},p}();c.pY=C;var b=function(){},u=function(p,d,m,v){this.x=p,this.y=d,this.Ci=m,this.zm=v},a=function(){function p(d){this.Ce=d}return p.prototype.compare=function(d,m,v){return d=d.ka(v),m=this.Ce.lf.read(2*m),0>(m-=d=this.Ce.lf.read(2*d))?-1:0<m?1:0},p}(),n=function(){function p(d){this.Ce=d}return p.prototype.compare=function(d,m,v){m=this.Ce.hb[m],d=this.Ce.hb[d.ka(v)];var _=m.Yp(),M=d.Yp();v=m.ne.Me(this.Ce.No,0);var T=d.ne.Me(this.Ce.No,0);return v==T&&((_=.5*((v=Math.min(_?m.ne.oa:m.ne.ma,M?d.ne.oa:d.ne.ma))-this.Ce.No)+this.Ce.No)==this.Ce.No&&(_=v),v=m.ne.Me(_,0),T=d.ne.Me(_,0)),v<T?-1:v>T?1:0},p}(),o=function(){function p(d,m){this.SI=new c.h,this.parent=d,this.XR=m}return p.prototype.qr=function(d,m,v){var _=this.parent,M=this.XR;v.Wd(d,m,function(T,I){return _.Oh(T,I,M)})},p.prototype.bq=function(d){return d=this.parent.ii.get(d),this.parent.lf.uc(2*(d>>1),this.SI),this.SI.y+((1&d)!=0?this.parent.Qj:-this.parent.Qj)},p}(),l=function(){function p(d,m,v,_,M){this.hH=d.description,this.Y=d,this.Sg=m,this.Qj=c.ta.mj(this.Sg,d,!1),this.Co=c.ta.mj(this.Sg,d,!0),this.rA=v,this.gT=this.hH.Ba,this.hb=[],this.qo=[],this.oh=new c.kp,this.fb=new c.Zj,this.ke=new c.Nd,this.TG=this.sl=M}return p.prototype.XS=function(){return this.TG=!0,(!c.ba.Ic(this.Y.K())||this.AE()&&this.xE(!1))&&this.gO()?c.ba.Ic(this.Y.K())?this.jO()?this.Y.K()==1607?this.lO()?2:0:this.mO()?this.nO():0:0:2:0},p.prototype.eC=function(d,m){var v=this.lf.read(2*d);d=this.lf.read(2*d+1);var _=this.lf.read(2*m);m=this.lf.read(2*m+1);var M=!c.$t.Ev(v,d,_,m,this.Qj*this.Qj);return M||this.Y.Eb()!=0&&v==_&&d==m},p.prototype.AE=function(){for(var d=this.Y,m=d.yf?3:2,v=0,_=d.ea();v<_;v++)if(d.Ka(v)<m)return this.ke=new c.Nd(1,v,0),!1;return!0},p.prototype.xE=function(d){var m=this.Y,v=m.Ha(),_=m.hasAttribute(1);for(m=_?c.ta.qE(this.Sg,m,!1):0;v.ab();)for(;v.Ia();){var M=v.ia();if(!(M.Rb()>this.Qj)){if(d&&_){var T=M.yv(1,0);if(M=M.yv(1,0),Math.abs(M-T)>m)continue}return this.ke=new c.Nd(2,v.xb(),-1),!1}}return!0},p.prototype.gO=function(){var d=this.Y,m=null;c.ba.Ic(this.Y.K())&&(m=this.Y);var v=(this.TG||this.sl)&&m!=null,_=d.I();this.lf=d.vb(0),this.ii=new c.ja(0),this.ii.Jb(2*_),this.hi=new c.ja(0),this.hi.Jb(2*_),v&&(this.Hl==null&&(this.Hl=new c.ja(0)),this.Hl.Jb(_));for(var M=d=0;M<_;M++)if(this.ii.add(2*M),this.ii.add(2*M+1),this.hi.add(2*M),this.hi.add(2*M+1),v){for(;M>=m.Wc(d);)d++;this.Hl.add(d)}for(new c.Zt().sort(this.hi,0,2*_,new o(this,v)),this.fb.clear(),this.fb.Wo(new a(this)),this.fb.Ee(_),m=0,_*=2;m<_;m++)if(v=this.hi.get(m),v=(d=this.ii.get(v))>>1,(1&d)==0){if(d=this.fb.addElement(v,-1),(M=this.fb.xe(d))!=-1&&!this.eC(this.fb.ka(M),v))return this.ke=new c.Nd(3,v,this.fb.ka(M)),!1;var T=this.fb.lb(d);if(T!=-1&&!this.eC(this.fb.ka(T),v))return this.ke=new c.Nd(3,v,this.fb.ka(T)),!1}else if(d=this.fb.search(v,-1),M=this.fb.xe(d),T=this.fb.lb(d),this.fb.wd(d,-1),M!=-1&&T!=-1&&!this.eC(this.fb.ka(M),this.fb.ka(T)))return this.ke=new c.Nd(3,this.fb.ka(M),this.fb.ka(T)),!1;return!0},p.prototype.jO=function(){return 10>this.Y.I()?this.hO():this.iO()},p.prototype.iO=function(){var d=new c.hd;d.Ib(this.Y);var m=new c.Nd;return!c.bu.eI(!1,d,this.Qj,m,this.nd)||(m.Ko=d.Va(m.Ko),m.Lo=d.Va(m.Lo),this.ke.Yt(m),!1)},p.prototype.hO=function(){var d=this.Y,m=d.Ha();for(d=d.Ha();m.ab();)for(;m.Ia();){var v=m.ia();if(!m.Rn()||!m.SS()){d.tW(m);do for(;d.Ia();){var _=d.ia();if((_=v.Br(_,this.Qj,!0))!=0)return this.ke=new c.Nd(_==2?5:4,m.xb(),d.xb()),!1}while(d.ab())}}return!0},p.prototype.mO=function(){var d=this.Y;this.hb.length=0,this.qo.length=0,this.$f=d.Ha(),this.$f.DB();var m=new c.ja(0);m.Jb(10);var v=NaN,_=0,M=0;for(d=2*d.I();M<d;M++){var T=this.hi.get(M);if((1&(T=this.ii.get(T)))==0){T>>=1;var I=this.lf.read(2*T),O=this.lf.read(2*T+1);if(m.size!=0&&(I!=v||O!=_)){if(!this.KI(m))return!1;m!=null&&m.clear(!1)}m.add(T),v=I,_=O}}return!!this.KI(m)},p.prototype.lO=function(){for(var d=this.Y,m=Array(d.ea()),v=0,_=d.ea();v<_;v++)m[v]=d.On(v);_=new b;var M=new c.h;v=this.hi.get(0);var T=(v=this.ii.get(v))>>1;this.lf.uc(2*T,M);var I=m[v=this.Hl.get(T)],O=d.Ca(v),R=d.Wc(v)-1;_.gl=T==O||T==R,_.jy=this.sl?!I&&_.gl:_.gl,_.Ci=v,_.x=M.x,_.y=M.y,_.zm=T;for(var L=new b,G=1,q=this.hi.size;G<q;G++)if(v=this.hi.get(G),(1&(v=this.ii.get(v)))==0){T=v>>1,this.lf.uc(2*T,M),(v=this.Hl.get(T))!=_.Ci&&(I=m[v],O=d.Ca(v),R=d.Wc(v)-1);var D=T==O||T==R,H=this.sl?!I&&_.gl:_.gl;if(L.x=M.x,L.y=M.y,L.Ci=v,L.zm=T,L.jy=H,L.gl=D,L.x==_.x&&L.y==_.y){if(this.sl){if(!(L.jy&&_.jy||L.Ci==_.Ci&&(L.gl||_.gl)))return this.ke=new c.Nd(8,L.zm,_.zm),!1}else if(!L.gl||!_.gl)return this.ke=new c.Nd(5,L.zm,_.zm),!1}v=_,_=L,L=v}return!0},p.prototype.DE=function(){for(var d=this.Y,m=[],v=-1,_=!1,M=0,T=d.ea();M<T;M++)d.Gv(M)&&(_=!1,v++,M<T-1&&(d.Gv(M+1)||(_=!0))),m[M]=_?v:-1;_=new c.h,M=this.hi.get(0);var I=(M=this.ii.get(M))>>1;this.lf.uc(2*I,_),M=this.Hl.get(I),v=new u(_.x,_.y,M,I,m[M]),d=[];var O=1;for(T=this.hi.size;O<T;O++)if(M=this.hi.get(O),(1&(M=this.ii.get(M)))==0){if(I=M>>1,this.lf.uc(2*I,_),M=this.Hl.get(I),(M=new u(_.x,_.y,M,I,m[M])).x==v.x&&M.y==v.y){if(M.Ci==v.Ci)return this.ke=new c.Nd(9,M.zm,v.zm),!1;0<=m[M.Ci]&&m[M.Ci]==m[v.Ci]&&(d.length!=0&&d[d.length-1]==v||d.push(v),d.push(M))}v=M}if(d.length==0)return!0;for(M=new c.kp(!0),c.P.bv(m,-1),_=-1,(O=new c.h).Sc(),v=0,T=d.length;v<T;v++){(I=d[v]).x==O.x&&I.y==O.y||(_=M.Rh(0),O.x=I.x,O.y=I.y);var R=m[I.Ci];R==-1&&(R=M.Rh(2),m[I.Ci]=R),M.addElement(R,_),M.addElement(_,R)}for((T=new c.ja(0)).Jb(10),v=M.je;v!=-1;v=M.lz(v))if((1&(d=M.JF(v)))==0&&(2&d)!=0){for(d=-1,T.add(v),T.add(-1);0<T.size;){if(_=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(I=M.JF(O)))!=0){d=(2&I)==0?_:O;break}for(M.XW(O,1|I),I=M.sc(O);I!=-1;I=M.lb(I))(R=M.getData(I))!=_&&(T.add(R),T.add(O))}if(d!=-1){for(M=-1,v=0,T=m.length;v<T;v++)if(m[v]==d){M=v;break}return this.ke=new c.Nd(10,M,-1),!1}}return!0},p.prototype.nO=function(){var d=this.Y;if(0>=d.He())return this.ke=new c.Nd(6,d.ea()==1?1:-1,-1),0;if(d.ea()==1)return this.sl&&!this.DE()?0:2;this.uo=c.ja.rf(d.ea(),0),this.DA=c.ja.rf(d.ea(),-1);for(var m=-1,v=0,_=0,M=d.ea();_<M;_++){var T=d.Kr(_);if(this.uo.write(_,0>T?0:256),0<T)m=_,v=T;else{if(T==0)return this.ke=new c.Nd(6,_,-1),0;if((0>m||v<Math.abs(T))&&(this.ke=new c.Nd(7,_,-1),this.sl))return 0;this.DA.write(_,m)}}for(this.et=d.ea(),this.Qm=new c.ja(0),this.Qm.Jb(10),M=d.I(),this.No=NaN,(d=new c.ja(0)).Jb(10),this.Sq=c.ja.rf(M,-1),this.Jw=c.ja.rf(M,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new c.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Wo(new n(this)),m=0,M*=2;0<this.et&&m<M;m++)if(v=this.hi.get(m),(1&(v=this.ii.get(v)))==0){if(v>>=1,(_=this.lf.read(2*v+1))!=this.No&&d.size!=0){if(!this.vt(d))return 0;d!=null&&d.clear(!1)}d.add(v),this.No=_}return 0<this.et&&!this.vt(d)?0:this.sl?this.ke.Lj==0&&this.DE()?2:0:this.ke.Lj==0?2:1},p.prototype.KI=function(d){if(d.size==1)return!0;for(var m=0,v=d.size;m<v;m++){var _=d.get(m);this.$f.Wb(_);var M=this.$f.ni();this.hb.push(this.Uu(M,_,this.$f.gb,!0)),this.$f.ia(),M=this.$f.ia(),this.hb.push(this.Uu(M,_,this.$f.gb,!1))}var T=this;for(this.hb.sort(function(R,L){return T.RP(R,L)}),(_=this.oh.je)==-1&&(_=this.oh.Rh(0)),this.oh.hn(this.hb.length),m=0,v=this.hb.length;m<v;m++)this.oh.addElement(_,m);m=!0;for(var I=v=-1;m&&(m=!1,(M=this.oh.sc(_))!=-1);)for(var O=this.oh.lb(M);O!=-1;)if(v=this.oh.getData(M),I=this.oh.getData(O),(v=this.hb[v].Jo)!=(I=this.hb[I].Jo))M=O,O=this.oh.lb(M);else if(m=!0,this.oh.kd(_,M),M=this.oh.xe(O),(O=this.oh.kd(_,O))==-1||M==-1)break;if(m=this.oh.ds(_),this.oh.FE(_),0<m)return this.ke=new c.Nd(5,v,I),!1;for(m=0,v=d.size;m<v;m++)this.pB(this.hb[m]);return this.hb.length=0,!0},p.prototype.vt=function(d){for(var m=0,v=d.size;m<v;m++){var _=d.get(m),M=this.Sq.read(_);if(M!=-1){var T=this.fb.ka(M);this.Bj.add(T),this.fb.wd(M,-1),this.pB(this.hb[T]),this.hb[T]=null,this.Sq.write(_,-1)}(M=this.Jw.read(_))!=-1&&(T=this.fb.ka(M),this.Bj.add(T),this.fb.wd(M,-1),this.pB(this.hb[T]),this.hb[T]=null,this.Jw.write(_,-1))}for(m=0,v=d.size;m<v;m++){if(_=d.get(m),this.$f.Wb(_),(M=this.$f.ni()).oa>M.ma){var I=this.$f.xb(),O=this.Uu(M,_,this.$f.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(I)==-1?this.Sq.write(I,M):this.Jw.write(I,M),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(M)}this.$f.ia(),(M=this.$f.ia()).oa<M.ma&&(I=this.$f.jk(),O=this.Uu(M,_,this.$f.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),M=this.fb.addElement(T,-1),this.Sq.read(I)==-1?this.Sq.write(I,M):this.Jw.write(I,M),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(M))}for(m=0,v=this.Qm.size;m<v&&0<this.et;m++)if(M=this.Qm.get(m),(3&this.uo.read(this.hb[this.fb.ka(M)].CA))==0){d=-1,_=this.fb.xe(M);var R=M;O=null,T=-1;for(var L=0;_!=-1&&(T=this.fb.ka(_),T=(O=this.hb[T]).CA,(3&(L=this.uo.read(T)))==0);)R=_,_=this.fb.xe(_);_==-1?(I=1,_=R):(d=(3&L)==1?T:this.DA.read(T),I=O.RF()!=0?0:1,_=this.fb.lb(_));do{if(T=this.fb.ka(_),T=(O=this.hb[T]).CA,(3&(R=this.uo.read(T)))==0){if(I!=O.RF())return this.ke=new c.Nd(6,T,-1),!1;if(R=252&R|(L=I==0||O.Yp()?2:1),this.uo.write(T,L),L==2&&this.ke.Lj==0&&this.DA.read(T)!=d&&(this.ke=new c.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&R)==1&&(d=T),R=_,_=this.fb.lb(_),I=I!=0?0:1}while(R!=M)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new c.ja(0),!0},p.prototype.Uu=function(d,m,v,_){if(d.K()!=322)throw c.i.Ra();return(d=this.mP(d)).Jo=m,d.CA=v,d.Aq=0,d.eX(_),d},p.prototype.mP=function(d){if(0<this.qo.length){var m=this.qo[this.qo.length-1];--this.qo.length,d.copyTo(m.ne)}else(m=new C).ne=c.MC.ig(d);return m},p.prototype.pB=function(d){d.ne.K()==322&&this.qo.push(d)},p.prototype.cU=function(){for(var d=this.Y.I(),m=new c.ja(0),v=0;v<d;v++)m.add(v);var _=this;for(m.Wd(0,d,function(M,T){return _.Qu(M,T)}),v=1;v<d;v++)if(this.Qu(m.get(v-1),m.get(v))==0)return this.ke=new c.Nd(3,m.get(v-1),m.get(v)),0;return 2},p.prototype.BV=function(){return this.AE()&&this.xE(!0)?2:0},p.prototype.gV=function(){return this.XS()},p.prototype.hU=function(){for(var d=this.Y.I(),m=new c.ja(0),v=0;v<d;v++)m.add(v);var _=this;m.Wd(0,d,function(R,L){return _.JO(R,L)});var M=Array(d);for(c.P.bv(M,!1),M[m.get(0)]=!0,v=1;v<d;v++){var T=m.get(v-1),I=m.get(v);this.Qu(T,I)==0?M[I]=!1:M[I]=!0}m=this.Y.Ja(),T=this.Y,I=0;var O=1;for(v=0;v<d;v++)M[v]?O=v+1:(I<O&&m.Gd(T,I,O),I=v+1);return I<O&&m.Gd(T,I,O),m.Eh(2,this.Co),m},p.prototype.FV=function(){var d=this.Y,m=d.Ha(),v=d.Ha(),_=this.Y.Ja(),M=this.Y,T=d.hasAttribute(1),I=T?c.ta.qE(this.Sg,d,!0):0,O=new c.ja(0),R=new c.ja(0);for(O.Jb(c.P.truncate(d.I()/2+1)),R.Jb(c.P.truncate(d.I()/2+1));m.ab();)if(v.ab(),!(2>d.Ka(m.gb))){v.vW();for(var L,G,q=!0;m.Ia();){var D=m.ia(),H=v.ni();if(m.xb()>v.xb())break;q&&(O.add(m.xb()),R.add(v.jk()),q=!1),G=O.Gc();var ee=m.jk();if(1<ee-G){var te=new c.h;te.vc(d.Oa(G),d.Oa(ee)),L=te.length()}else L=D.Rb();G=R.Gc(),1<(ee=v.xb())-G?((te=new c.h).vc(d.Oa(G),d.Oa(ee)),G=te.length()):G=H.Rb(),L>this.Co?O.add(m.jk()):T&&(L=d.Vc(1,O.Gc(),0),D=D.jv(1,0),Math.abs(D-L)>I&&O.add(m.jk())),G>this.Co?R.add(v.xb()):T&&(L=d.Vc(1,R.Gc(),0),D=H.jv(1,0),Math.abs(D-L)>I&&R.add(v.xb()))}if(O.Gc()<R.Gc()?O.size>R.size?O.Jf():R.Jf():(O.Gc()!=R.Gc()&&R.Jf(),R.Jf()),2<=R.size+O.size){for(q=new c.Ta,H=0,D=O.size;H<D;H++)M.we(O.get(H),q),H==0?_.nf(q):_.lineTo(q);for(H=R.size-1;0<H;H--)M.we(R.get(H),q),_.lineTo(q);M.ec(m.gb)?_.Cp():0<R.size&&(M.we(R.get(0),q),_.lineTo(q))}O!=null&&O.clear(!1),R!=null&&R.clear(!1)}return _.Eh(2,this.Co),_},p.prototype.jV=function(){return this.vX()},p.prototype.vX=function(){return this.Y.K()==1736&&this.Y.Jn()==1?c.Hg.Nk(this.Y,this.Co,!0,!1,this.nd):(this.Ji=new c.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.rA!=1&&c.Uk.W(this.Ji,this.Co,this.nd,!0),this.Y.K()==1736&&c.tn.W(this.Ji,this.Ji.ld,this.rA,!1,this.nd)),this.Y=this.Ji.Ke(this.Ji.ld),this.Y.K()==1736&&(this.Y.hm(),this.Y.Zo(0)),this.Y.Eh(2,this.Co),this.Y)},p.ts=function(d,m,v,_,M){if(_!=null&&(_.Lj=0,_.Ko=-1,_.Lo=-1),d.B())return 1;var T=d.K();if(T==33)return 1;var I=c.ta.mj(m,d,!1);if(T==197)return m=new c.l,d.A(m),m.Di(I)?(_!=null&&(_.Lj=2,_.Ko=-1,_.Lo=-1),0):1;if(c.ba.zd(T))return(I=new c.Ua(d.description)).oc(d,!0),p.ts(I,m,v,_,M);var O=d.qm(I);if((v=v?-1:O)!=-1)return v;if(m=new p(d,m,v,M,!1),T==550)v=m.cU();else if(T==1607)v=m.BV();else{if(T!=1736)throw c.i.Ra();v=m.gV()}return d.Eh(v,I),_!=null&&v==0&&_.Yt(m.ke),v},p.XJ=function(d,m,v,_){if(d.B())return d;var M=d.K();if(M==33)return d;var T=c.ta.mj(m,d,!1);if(M==197)return m=new c.l,d.A(m),m.Di(T)?d.Ja():d;if(c.ba.zd(M))return(M=new c.Ua(d.description)).oc(d,!0),p.XJ(M,m,v,_);if(T=d.qm(T),(v=v?-1:T)==2)return d;if(d=new p(d,m,v,_,!1),M==550)d=d.hU();else if(M==1607)d=d.FV();else{if(M!=1736)throw c.i.Ra();d=d.jV()}return d},p.prototype.Oh=function(d,m,v){if(d==m)return 0;d=this.ii.get(d);var _=this.ii.get(m);m=d>>1;var M=_>>1,T=new c.h,I=new c.h;return this.lf.uc(2*m,T),T.y+=(1&d)!=0?this.Qj:-this.Qj,this.lf.uc(2*M,I),I.y+=(1&_)!=0?this.Qj:-this.Qj,(d=T.compare(I))==0&&v?0>(v=this.Hl.get(m)-this.Hl.get(M))?-1:0<v?1:0:d},p.prototype.Qu=function(d,m){if(d==m)return 0;var v=this.Y,_=v.Oa(d),M=v.Oa(m);if(_.x<M.x)return-1;if(_.x>M.x)return 1;if(_.y<M.y)return-1;if(_.y>M.y)return 1;for(_=1;_<this.gT;_++){M=this.hH.qd(_);for(var T=c.ua.Wa(M),I=0;I<T;I++){var O=v.Vc(M,d,I),R=v.Vc(M,m,I);if(O<R)return-1;if(O>R)return 1}}return 0},p.prototype.JO=function(d,m){var v=this.Qu(d,m);return v==0?d<m?-1:1:v},p.prototype.RP=function(d,m){if(d===m)return 0;var v=d.ne.jg();d.Yp()&&v.Uq(),d=m.ne.jg(),m.Yp()&&d.Uq(),m=v.su();var _=d.su();return _==m?(m=v.yi(d),Math.abs(m)<=8881784197001252e-31*(Math.abs(d.x*v.y)+Math.abs(d.y*v.x))&&(m--,m++),0>m?1:0<m?-1:0):m<_?-1:1},p}();c.Ix=l}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(a,n,o,l){return a instanceof c.ba?(a=new c.$c(a),n=new c.$c(n),this.W(a,n,o,l).next()):new c.vL(a,n,o,l)},u.fp=function(a,n,o,l){var p=a.Eb(),d=n.Eb();if(a.B()&&n.B())return p>d?a:n;if(a.B())return n;if(n.B())return a;var m=new c.l,v=new c.l,_=new c.l;return a.A(m),n.A(v),_.L(m),_.$b(v),m=c.ta.Xd(o,_,!0),v=a.K(),_=n.K(),v==33&&_==33?u.TU(a,n,m):v!=_?0<p||0<d?p>d?a:n:v==550?u.cI(a,n,m):u.cI(n,a,m):c.Hg.fp(a,n,o,l)},u.TU=function(a,n,o){o=o*Math.sqrt(2)*1.00001,o*=o;var l=a.D(),p=n.D(),d=new c.de(a.description);return c.h.zc(l,p)>o&&(d.add(a),d.add(n)),d},u.cI=function(a,n,o){var l=a.vb(0),p=a.I(),d=n.D(),m=a.Ja();o=o*Math.sqrt(2)*1.00001;var v=new c.l;if(a.A(v),v.X(o,o),v.contains(d)){o*=o,v=!1;for(var _=[],M=0;M<p;M++)_[M]=!1;for(M=0;M<p;M++){var T=l.read(2*M),I=l.read(2*M+1);(T-=d.x)*T+(I-=d.y)*I<=o&&(v=!0,_[M]=!0)}if(v)for(M=0;M<p;M++)_[M]||m.Gd(a,M,M+1);else m.Gd(a,0,p),m.add(n)}else m.Gd(a,0,p),m.add(n);return m},u.instance=null,u}(c.Ge);c.Jx=C}(W||(W={})),function(c){var C=function(){function b(u,a,n,o){this.vs=a==null,this.za=-1,this.Sd=u,this.vg=n,this.FT=a.next(),this.Vb=o}return b.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),c.Jx.fp(u,this.FT,this.vg,this.Vb)):null;var u},b.prototype.Ma=function(){return this.za},b.prototype.qe=function(){},b}();c.vL=C}(W||(W={})),function(c){var C=function(){function a(){}return a.prototype.Az=function(){this.Vy=null,this.zx=-1,this.uK=!1},a}(),b=function(){function a(){this.Ir=0,this.rj=[]}return a.prototype.jN=function(n){this.Ir+=n.zx,this.rj.push(n)},a.prototype.LV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},a.prototype.iy=function(){return this.rj[this.rj.length-1]},a.prototype.Nb=function(n){return n===this},a}(),u=function(){function a(n,o,l){this.za=-1,this.Jc=!1,this.uH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Ak=-1,this.kq=0,this.co=-1,this.Eo=[],this.Sd=n,this.vg=o,this.Vb=l}return a.YD=function(n){var o=[],l=0;for(n=Object.keys(n);l<n.length;l++)o.push(Number(n[l]));return o.sort(function(p,d){return p-d}),o},a.prototype.$F=function(n){var o=this.Eo[n],l=a.YD(o)[0],p=o[l],d=p.iy().Vy;return p=p.iy().uK,delete o[l],p&&(d=c.$l.local().W(d,this.vg,!1,this.Vb),n==0&&d.K()==33&&(n=new c.de(d.description),d.B()||n.add(d),d=n)),d},a.prototype.next=function(){if(this.Jc&&this.co==this.Ak)return null;for(;!this.kK(););if(this.Ak==-1)return null;if(this.eA){for(this.co++;;){if(this.co>this.Ak||0>this.co)throw c.i.Ra();if(this.uH[this.co])break}return this.za++,this.$F(this.co)}return this.za=0,this.co=this.Ak,this.$F(this.Ak)},a.prototype.Ma=function(){return this.za},a.prototype.kK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),c.np.Bp(this.Vb),n!=null){var o=n.Eb();this.uH[o]=!0,o>=this.Ak&&!this.eA&&(this.GD(o,!1,n),o>this.Ak&&!this.eA&&this.rW(o))}if(0<this.kq)for(o=0;o<=this.Ak;o++)for(;1<this.wq[o]&&(n=this.zO(o)).length!=0;)n=c.Hg.PP(n,this.vg,this.Vb),this.GD(o,!0,n);return this.Jc},a.prototype.zO=function(n){for(var o=[],l=[],p=this.Eo[n],d=a.YD(p),m=0;m<d.length;m++){var v=d[m],_=p[v];if(this.Jc||1e4<_.Ir&&1<_.rj.length){for(this.wq[n]-=_.rj.length,this.kq-=_.rj.length;0<_.rj.length;)o.push(_.iy().Vy),_.LV();l.push(v)}}for(m=0;m<l.length;m++)delete p[l[m]];return o},a.prototype.rW=function(n){for(var o=0;o<n;o++)this.Eo[o]=[],this.kq-=this.wq[o],this.wq[o]=0},a.prototype.GD=function(n,o,l){var p=new C;if(p.Az(),p.Vy=l,l=a.YR(l),p.zx=l,l=a.WR(l),n+1>this.Eo.length)for(var d=0,m=Math.max(2,n+1);d<m;d++)this.Eo.push([]);(d=this.Eo[n][l])===void 0&&(d=new b,this.Eo[n][l]=d),p.uK=o,d.jN(p),this.wq[n]++,this.kq++,this.Ak=Math.max(this.Ak,n)},a.WR=function(n){return 0<n?c.P.truncate(Math.log(n)/Math.log(4)+.5):0},a.YR=function(n){var o=n.K();if(c.ba.zj(o))return n.I();if(o==33)return 1;if(o==197)return 4;if(c.ba.zd(o))return 2;throw c.i.Ra()},a.prototype.qe=function(){this.kK()},a}();c.xL=u}(W||(W={})),function(c){var C=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return Ot(u,b),u.prototype.K=function(){return 1},u.prototype.W=function(a,n,o,l){return l===void 0?new c.xL(a,n,o):this.aQ(a,n,o,l)},u.prototype.aQ=function(a,n,o,l){return a=new c.$c([a,n]),this.W(a,o,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(c.Ge);c.Ih=C}(W||(W={})),function(c){var C,b;(b=C||(C={}))[b.nextPath=0]="nextPath",b[b.nextSegment=1]="nextSegment",b[b.iterate=2]="iterate",C=function(){function u(a,n,o,l){this.Vs=new c.l,this.yT=a,this.zT=n,this.oq=l,this.vo=-1,this.tl=!1;var p=a.Cb;p!=null&&(p=l?p.Ao:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.vo=n.ea():this.td=n.Ha()),this.tl||(p=n.Cb)!=null&&(p=l?p.Ao:p.Gb)!=null&&(this.Jc=!1,this.ra=o,this.Gb=p,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.vo=a.ea():this.td=a.Ha()),this.tl||(this.ei=l?c.ta.gR(a,n,o,1<=a.qm(0),1<=n.qm(0)):c.ta.fR(a,n,o))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.pU();break;case 1:a=this.qU();break;case 2:a=this.Pz();break;default:throw c.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.vo:this.td.xb():this.ei.pl(this.ei.Wf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.vo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Gb.AF(this.Hs):this.Vs:this.ei.oz(this.ei.Wf)},u.prototype.Wy=function(){if(!this.oq)throw c.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.AF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.pU=function(){return this.oq?--this.vo==-1?(this.Jc=!0,!1):(this.pq?this.zT.Tj(this.vo,this.Vs):this.yT.Tj(this.vo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.qU=function(){if(!this.td.Ia())return this.Yb=0,!0;var a=this.td.ia();return this.zw.Vo(a,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),c.am=C}(W||(W={})),function(c){(c=c.IL||(c.IL={}))[c.enumClosed=1]="enumClosed",c[c.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",c[c.enumOGCStartPolygon=4]="enumOGCStartPolygon",c[c.enumCalcMask=4]="enumCalcMask"}(W||(W={})),function(c){c.KC=function(){function C(){}return C.ub=function(b,u,a,n,o,l,p,d,m){var v=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0,0],I=new c.ha(0),O=new c.ha(0),R=new c.ha(0);if(p!=null||d!=null||m!=null)if(c.s.vi(u))c.$g.ub(b,a,n,o,l,p,d,m);else{o=c.F.ca(o),a=c.F.ca(a);var L=c.F.ca(o-a);if(c.s.$(n,l)&&(c.s.$(a,o)||c.s.$(c.s.R(n),1.570796326794897)))p!=null&&(p.u=0),d!=null&&(d.u=0),m!=null&&(m.u=0);else{if(c.s.$(n,-l)){if(c.s.$(c.s.R(n),1.570796326794897))return p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0<n?c.F.ca(3.141592653589793-c.F.ca(o)):c.F.ca(o)),void(m!=null&&(m.u=0<n?c.F.ca(o):c.F.ca(3.141592653589793-c.F.ca(o))));c.s.$(c.s.R(L),3.141592653589793)&&(p!=null&&(p.u=2*c.F.Ch(b,u)),d!=null&&(d.u=0),m!=null&&(m.u=0))}else if(c.s.$(c.s.R(n),1.570796326794897)||c.s.$(c.s.R(l),1.570796326794897)||c.s.$(a,o)||c.s.$(c.s.R(L),3.141592653589793)||c.s.Dd(n))return void c.Yk.ub(b,u,a,n,o,l,p,d,m);var G=Math.sqrt(1-u);o=c.F.ca(o-a),a=0,c.F.el(1,u,n,a,0,I,O,R),v[0]=I.u,v[1]=O.u,v[2]=R.u,c.F.el(1,u,l,o,0,I,O,R),_[0]=I.u,_[1]=O.u,_[2]=R.u,M[0]=0,M[1]=0,M[2]=-1*u*c.F.n(1,u,n)*Math.sin(n),0>o?c.F.Yq(M,_,v,T,0):c.F.Yq(M,v,_,T,0),O=[0,0,0],R=[0,0,0];var q=[0,0,0];v=[0,0,0],I=[0,0,0];var D=Math.acos(T[2]/1),H=1-u,ee=Math.tan(D),te=1+ee*ee/H,Z=2*M[2]*ee/H;for(H=(-Z+(ee=Math.sqrt(Z*Z-4*te*(M[2]*M[2]/H-1))))/(te*=2),Z=(-Z-ee)/te,ee=Math.tan(D),D=(H+Z)/2,M=((te=ee*H+M[2])+(ee*Z+M[2]))/2,ee=c.F.hp(H-D,te-M),H=M/G*1.570796326794897,Z=0;100>Z&&(te=(te=c.F.w(u,H))*te/Math.cos(H)*(Math.sin(H)-M*te/(1-u)),!c.s.Dd(te));Z++)H-=te;M=c.F.n(1,u,H)*Math.cos(H),ee=1-ee/(M=Math.sqrt((M-D)*(M+D))),ee*=2-ee,te=c.F.qn(O),D=c.F.qn(R),H=c.F.qn(q);var ce=c.F.Ut(q,O);Z=c.F.Ut(q,R),c.F.yx(q,O,v),c.F.yx(q,R,I),O=Math.acos(ce/(H*te)),R=Math.acos(Z/(H*D)),R*=c.s.Mb(1,c.F.Ut(v,I)),(1.570796326794897<=c.s.R(O)&&1.570796326794897<=c.s.R(R)||3.141592653589793<c.s.R(O-R))&&(O=(3.141592653589793-c.s.R(O))*c.s.Mb(1,O),R=(3.141592653589793-c.s.R(R))*c.s.Mb(1,R)),v=c.F.Sj(ee,R),I=c.F.q(M,ee,c.F.Sj(ee,O)),v=c.F.q(M,ee,v),v=c.s.R(v-I)*b,O=new c.ha(0),R=new c.ha(0),q=T[1]/1,q*=-c.s.Mb(1,L),I=Math.acos(q)*c.s.Mb(1,L),C.sf(b,u,a,n,v,I,O,R),c.s.$(o,O.u)&&c.s.$(l,R.u)||(ee=c.F.hp(c.F.ca(o-O.u),l-R.u),C.sf(b,u,a,n,v,c.F.ca(I+3.141592653589793),O,R),(te=c.F.hp(c.F.ca(o-O.u),l-R.u))<ee&&(I=c.F.ca(I+3.141592653589793))),O=[0,0,0,0],R=[0,0,0,0],ee=[0,0,0],b=[0,0,0],a=[0,0,0],n=[0,0,0],q=[0,0,0],(M=[0,0,0])[0]=0,M[1]=0,M[2]=G,ee[0]=0,ee[1]=0,ee[2]=0,c.F.Yq(ee,M,_,O,0),c.s.Dd(l)?(b[0]=_[0],b[1]=_[1],b[2]=1,a[0]=1*Math.cos(o)-1*Math.sin(o),a[1]=1*Math.sin(o)+1*Math.cos(o)):(u=c.F.n(1,u,l)*Math.cos(l),b[0]=0,b[1]=0,_[2]+=Math.tan(1.570796326794897-c.s.R(l))*u*c.s.Mb(1,l),a[0]=u*Math.cos(o)-u*Math.sin(o),a[1]=u*Math.sin(o)+u*Math.cos(o)),a[2]=_[2],c.F.Yq(_,a,b,R,1),c.F.yx(R,O,n),c.F.yx(R,T,q),q=c.F.Ut(n,q)/(c.F.qn(n)*c.F.qn(q)),q*=c.s.Mb(1,L),o=Math.acos(q)*-c.s.Mb(1,L),(0<I&&0<o||0>I&&0>o)&&(o=c.F.ca(o+3.141592653589793)),p!=null&&(p.u=v),d!=null&&(d.u=I),m!=null&&(m.u=o)}}},C.sf=function(b,u,a,n,o,l,p,d){var m=[0,0,0],v=[0,0,0],_=[0,0,0],M=[0,0,0],T=[0,0,0],I=[0,0,0],O=[0,0,0],R=[0,0,0,0],L=new c.ha(0),G=new c.ha(0),q=new c.ha(0),D=new c.ha(0),H=new c.ha(0),ee=new c.ha(0);if(p!=null&&d!=null)if(c.s.vi(u))c.$g.sf(b,a,n,o,l,p,d);else if(c.s.Dd(o))p!=null&&(p.u=a),d!=null&&(d.u=n);else if(l=c.F.ca(l),0>o&&(o=c.s.R(o),l=c.F.ca(l+3.141592653589793)),a=c.F.ca(a),n=c.F.ca(n),1.570796326794897<c.s.R(n)&&(a=c.F.ca(a+3.141592653589793),n=c.s.Mb(3.141592653589793,n)-n),c.s.$(c.s.R(n),1.570796326794897)||c.s.Dd(n)||c.s.Dd(l)||c.s.$(c.s.R(l),3.141592653589793))c.Yk.sf(b,u,a,n,o,l,p,d);else{var te=Math.sqrt(1-u);for(b=o/b,c.F.el(1,u,n,0,0,D,H,ee),m[0]=D.u,m[1]=H.u,m[2]=H.u,O[0]=0,O[1]=0,O[2]=-1*u*c.F.n(1,u,n)*Math.sin(n),D=c.F.n(1,u,n),H=c.F.ca(1.570796326794897-l),ee=Math.sin(H),o=Math.cos(n),n=Math.sin(n),T[0]=D*o-n*ee,T[1]=Math.cos(H),T[2]=(1-u)*D*n+o*ee,0>l?c.F.Yq(O,T,m,R,0):c.F.Yq(O,m,T,R,0),m=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),n=1-u,H=1+(T=Math.tan(m))*T/n,n=(-(D=2*O[2]*T/n)+(T=Math.sqrt(D*D-4*H*(O[2]*O[2]/n-1))))/(H*=2),D=(-D-T)/H,T=Math.tan(m),m=(n+D)/2,O=((H=T*n+O[2])+(T*D+O[2]))/2,T=c.F.hp(n-m,H-O),te=O/te*1.570796326794897,n=0;100>n&&(D=(D=c.F.w(u,te))*D/Math.cos(te)*(Math.sin(te)-O*D/(1-u)),!c.s.Dd(D));n++)te-=D;te=c.F.n(1,u,te)*Math.cos(te),O=1-T/(te=Math.sqrt((te-m)*(te+m))),O*=2-O,I=Math.acos(c.F.Ut(I,v)/(c.F.qn(I)*c.F.qn(v))),I*=c.s.Mb(1,v[0]),l=(c.F.q(te,O,c.F.Sj(O,I))+b*c.s.Mb(1,l))/c.F.Ch(te,O),l=c.F.ca(1.570796326794897*l),l=c.F.Tq(O,l),c.F.n(te,O,l),T=c.F.ca(R+a),a=Math.cos(T),l=Math.sin(T),_[0]=M[0]*a+M[1]*-l,_[1]=M[0]*l+M[1]*a,_[2]=M[2],c.F.dO(u,_[0],_[1],_[2],q,G,L),p!=null&&(p.u=G.u),d!=null&&(d.u=q.u)}},C}()}(W||(W={})),function(c){var C=function(){function o(l){this.Za=null,this.xt=new c.h,this.yt=new c.h,this.g=l}return o.prototype.compare=function(l,p,d){return this.g.Hc(p,this.xt),this.g.Hc(l.ka(d),this.yt),this.xt.compare(this.yt)},o}(),b=function(){function o(l){this.Cf=new c.h,this.Ek=new c.h,this.g=l}return o.prototype.Fh=function(l){this.Cf.N(l)},o.prototype.compare=function(l,p){return this.g.Hc(l.ka(p),this.Ek),this.Cf.compare(this.Ek)},o}(),u=function(o){function l(p){var d=o.call(this,p.g,p.ra,!1)||this;return d.ib=p,d}return Ot(l,o),l.prototype.compare=function(p,d,m){if(this.rg)return-1;var v=this.ib.Rd.Kn(this.ib.Th(d));p=p.ka(m);var _=this.ib.Rd.Kn(this.ib.Th(p));return this.Fm=m,this.LE(d,v,p,_)},l}(c.OC),a=function(o){function l(p){var d=o.call(this,p.g,p.ra)||this;return d.ib=p,d}return Ot(l,o),l.prototype.compare=function(p,d){return this.rg?-1:(p=this.ib.Rd.Kn(this.ib.Th(p.ka(d))),this.Fm=d,this.ME(d,p))},l}(c.VL),n=function(){function o(){this.Nc=this.df=this.ko=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.ie=this.Hk=this.ph=this.Bk=this.Gf=this.ae=null,this.zh=this.Lq=this.OA=this.ra=0,this.Zv=this.Xn=!1,this.zo=new c.h,this.Ri=new c.h,this.hb=new c.ad(8),this.Ad=new c.ad(5),this.nh=new c.cu,this.Rd=new c.cu,this.Pg=!1,this.xh=new c.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Xn=!1,this.g=null,this.df=new c.Zj,this.Nc=new c.Zj,this.ph=new c.ja(0),this.Hk=new c.NC,this.Gf=new c.ja(0),this.Bk=new c.ja(0),this.ko=new c.Ta}return o.prototype.HX=function(l,p){var d=new c.Ed;return d.UB(),l.Pc(d),this.gr(l),this.Xn=!1,this.ra=p,this.OA=p*p,p=this.dC(),l.Pc(d),p||(this.kQ(),p||this.dC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Xn},o.prototype.LX=function(l,p){this.gr(l),this.Xn=!1,this.ra=p,this.OA=p*p,this.Pg=!1,this.dC(),this.Pg||(this.Pg=l.Ip(p,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},o.prototype.pg=function(l,p){return this.hb.U(l,0+p)},o.prototype.FB=function(l,p,d){this.hb.T(l,0+p,d)},o.prototype.Th=function(l){return this.hb.U(l,2)},o.prototype.QW=function(l,p){this.hb.T(l,2,p)},o.prototype.LF=function(l,p){return this.hb.U(l,3+p)},o.prototype.Rp=function(l){return this.hb.U(l,7)},o.prototype.Rl=function(l,p){this.hb.T(l,7,p)},o.prototype.Tp=function(l,p){return this.hb.U(l,3+this.Qp(l,p))},o.prototype.hr=function(l,p,d){this.hb.T(l,3+this.Qp(l,p),d)},o.prototype.GR=function(l,p){return this.hb.U(l,5+this.Qp(l,p))},o.prototype.jr=function(l,p,d){this.hb.T(l,5+this.Qp(l,p),d)},o.prototype.Ur=function(l){return this.Ad.U(l,0)},o.prototype.MW=function(l,p){this.Ad.T(l,0,p)},o.prototype.$y=function(l){return this.Ad.U(l,4)},o.prototype.er=function(l,p){this.Ad.T(l,4,p)},o.prototype.kl=function(l){return this.Ad.U(l,1)},o.prototype.nn=function(l,p){this.Ad.T(l,1,p)},o.prototype.Zy=function(l){return this.Ad.U(l,3)},o.prototype.Ft=function(l,p){this.Ad.T(l,3,p)},o.prototype.$m=function(l){var p=this.Ad.De(),d=this.nh.Rh();return this.MW(p,d),l!=-1?(this.nh.addElement(d,l),this.g.Sa(l,this.zh,p),this.er(p,this.g.Va(l))):this.er(p,-1),p},o.prototype.BP=function(l){this.Ad.kd(l)},o.prototype.ED=function(l,p){this.nh.addElement(this.Ur(l),p),this.g.Sa(p,this.zh,l)},o.prototype.ot=function(l){var p=this.hb.De(),d=this.Rd.Rh();return this.QW(p,d),l!=-1&&this.Rd.addElement(d,l),p},o.prototype.FD=function(l,p){this.Rd.addElement(this.Th(l),p)},o.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.fF(l))&&this.ph.KV(l)},o.prototype.jj=function(l,p){if(this.pg(l,0)==-1)this.FB(l,0,p);else{if(this.pg(l,1)!=-1)throw c.i.Ra();this.FB(l,1,p)}this.gy(l,p)},o.prototype.gy=function(l,p){var d=this.kl(p);if(d!=-1){var m=this.Tp(d,p);this.jr(m,p,l),this.hr(l,p,m),this.hr(d,p,l),this.jr(l,p,d)}else this.jr(l,p,l),this.hr(l,p,l),this.nn(p,l)},o.prototype.Qp=function(l,p){return this.pg(l,0)==p?0:1},o.prototype.Zm=function(l,p){var d,m=this.Zy(p);if(m!=-1&&(this.df.wd(m,-1),this.Ft(p,-1)),(m=this.kl(p))!=-1){var v=d=m;do{var _=!1,M=this.Qp(d,p),T=this.LF(d,M);if(this.pg(d,M+1&1)==l){if(this.Zu(d),this.Rd.eh(this.Th(d)),this.Wu(d),d==T){m=-1;break}m==d&&(m=this.kl(p),v=T,_=!0)}d=T}while(d!=v||_);if(m!=-1){do M=this.Qp(d,p),T=this.LF(d,M),this.FB(d,M,l),d=T;while(d!=v);(d=this.kl(l))!=-1?(v=this.Tp(d,l),_=this.Tp(m,l),v==d?(this.nn(l,m),this.gy(d,l),this.nn(l,d)):_==m&&this.gy(m,l),this.hr(m,l,v),this.jr(v,l,m),this.hr(d,l,_),this.jr(_,l,d)):this.nn(l,m)}}for(m=this.Ur(l),d=this.Ur(p),v=this.nh.sc(d);v!=-1;v=this.nh.lb(v))this.g.Sa(this.nh.ka(v),this.zh,l);this.nh.Cy(m,d),this.BP(p)},o.prototype.MT=function(l,p){var d=this.pg(l,0),m=this.pg(l,1),v=this.pg(p,0),_=this.pg(p,1);this.Rd.Cy(this.Th(l),this.Th(p)),p==this.kl(d)&&this.nn(d,l),p==this.kl(m)&&this.nn(m,l),this.Zu(p),this.Wu(p),d==v&&m==_||m==v&&d==_||(this.In(d,this.zo),this.In(v,this.Ri),this.zo.rb(this.Ri)?(d!=v&&this.Zm(d,v),m!=_&&this.Zm(m,_)):(m!=v&&this.Zm(m,v),d!=_&&this.Zm(d,_)))},o.prototype.Zu=function(l){var p=this.pg(l,1);this.YE(l,this.pg(l,0)),this.YE(l,p)},o.prototype.YE=function(l,p){var d=this.Tp(l,p),m=this.GR(l,p),v=this.kl(p);d!=l?(this.hr(m,p,d),this.jr(d,p,m),v==l&&this.nn(p,d)):this.nn(p,-1)},o.prototype.QD=function(l,p,d){var m=this.Rd.sc(l),v=this.Rd.ka(m);l=this.Ie(v);var _=this.Ie(this.g.V(v));for(this.g.lr(v,p,d,!0),m=this.Rd.lb(m);m!=-1;m=this.Rd.lb(m)){v=this.Rd.ka(m);var M=this.Ie(v)==l;this.g.lr(v,p,d,M)}m=p.Xp(d,0).ac(),p=p.Xp(d,p.ql(d)-1).xc(),this.vK(l,m),this.vK(_,p)},o.prototype.TE=function(l,p,d){var m=this.Th(l),v=this.pg(l,0),_=this.pg(l,1),M=this.ot(-1);for(this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,v),l=1,p=p.ql(d);l<p;l++)d=this.$m(-1),this.Bk.add(d),this.Gf.add(d),this.jj(M,d),M=this.ot(-1),this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,d);for(this.jj(M,_),m=this.Rd.sc(m);m!=-1;m=this.Rd.lb(m))if(_=this.Rd.ka(m),this.Ie(_)==v){l=0;do 0<l&&(M=this.Gf.get(l-1),this.ED(M,_),this.$y(M)==-1&&this.er(M,this.g.Va(_))),M=this.Gf.get(l),l+=2,this.FD(M,_),_=this.g.V(_);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&(M=this.Gf.get(l+1),this.ED(M,_),0>this.$y(M)&&this.er(M,this.g.Va(_))),M=this.Gf.get(l),l-=2,this.FD(M,_),_=this.g.V(_);while(0<=l)}this.Gf.clear(!1)},o.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},o.prototype.MI=function(l,p,d){var m=this.pg(p,0),v=new c.h;this.In(m,v);var _=new c.h,M=this.pg(p,1);this.In(M,_);var T=d.ql(l),I=d.Xp(l,0),O=new c.h;if(I.$p(O),!v.rb(O)){if(!this.Pg){var R=v.compare(this.xh);0>R*(O=O.compare(this.xh))&&(this.Pg=!0)}this.pF(m,this.Gf),this.Bk.add(m)}for(!this.Pg&&1<T&&(R=v.compare(_),I=I.xc(),(v.compare(I)!=R||I.compare(_)!=R||0>I.compare(this.xh))&&(this.Pg=!0)),l=(I=d.Xp(l,T-1)).xc(),_.rb(l)||(this.Pg||0>(R=_.compare(this.xh))*(O=l.compare(this.xh))&&(this.Pg=!0),this.pF(M,this.Gf),this.Bk.add(M)),this.Gf.add(p),_=0,M=this.Gf.size;_<M;_++)l=this.Gf.get(_),d=this.Rp(l),c.ad.FG(d)&&(this.Nc.wd(d,-1),this.Rl(l,-1)),l!=p&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},o.prototype.fO=function(l,p){this.ae.compare(this.Nc,this.Nc.ka(l),p),this.ae.rg&&(this.ae.Mr(),this.iF(l,p))},o.prototype.iF=function(l,p){this.Xn=!0,l=this.Nc.ka(l),p=this.Nc.ka(p);var d=this.Rd.Kn(this.Th(l)),m=this.Rd.Kn(this.Th(p)),v=this.g.cc(d);v==null&&(this.ie==null&&(this.ie=new c.zb),this.g.fd(d,this.ie),v=this.ie),(d=this.g.cc(m))==null&&(this.Pm==null&&(this.Pm=new c.zb),this.g.fd(m,this.Pm),d=this.Pm),this.Hk.Po(v),this.Hk.Po(d),this.Hk.Fa(this.ra,!0)&&(this.Pg=!0),this.bK(l,p,-1,this.Hk),this.Hk.clear()},o.prototype.AQ=function(l,p){this.Xn=!0,p=this.Nc.ka(p);var d=this.Rd.Kn(this.Th(p)),m=this.g.cc(d);m==null&&(this.ie==null&&(this.ie=new c.zb),this.g.fd(d,this.ie),m=this.ie),d=this.vF(l),this.Hk.Po(m),this.g.Xi(d,this.ko),this.Hk.Fz(this.ra,this.ko,!0),this.bK(p,-1,l,this.Hk),this.Hk.clear()},o.prototype.qS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.OS(l)!=-1&&this.pS(l),this.Wn=!1}},o.prototype.pS=function(l){if(this.Wn){var p=this.Nc.Bu(this.GH,this.AH,l,!0);this.Wn=!1}else p=this.Nc.DD(l);p==-1?this.MT(this.Nc.ka(this.Nc.zF()),l):(this.Rl(l,p),this.ae.rg&&(this.ae.Mr(),this.iF(this.ae.Fm,p)))},o.prototype.OS=function(l){var p=this.pg(l,0);if(l=this.pg(l,1),this.In(p,this.zo),this.In(l,this.Ri),c.h.zc(this.zo,this.Ri)<=this.OA)return this.Pg=!0,-1;var d=this.zo.compare(this.xh),m=this.Ri.compare(this.xh);return 0>=d&&0<m?l:0>=m&&0<d?p:-1},o.prototype.iQ=function(){var l=new c.ja(0);l.Jb(this.g.gd);for(var p=this.g.$q(),d=p.next();d!=-1;d=p.next())this.g.Qa(d,this.zh)!=-1&&l.add(d);this.g.nx(l,l.size),this.jQ(l)},o.prototype.jQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Wo(new C(this.g));var p=new c.h;p.Sc();for(var d=-1,m=new c.h,v=0,_=l.size;v<_;v++){var M=l.get(v);this.g.Hc(M,m),m.rb(p)?(M=this.g.Qa(M,this.zh),this.Zm(d,M)):(d=this.Ie(M),this.g.Hc(M,p),M=this.df.yn(M),this.Ft(d,M))}},o.prototype.kQ=function(){var l=new c.ja(0);l.Jb(this.g.gd);for(var p=this.df.sc(-1);p!=-1;p=this.df.lb(p))l.add(this.df.ka(p));this.df.clear(),this.g.nx(l,l.size),p=0;for(var d=l.size;p<d;p++){var m=l.get(p),v=this.Ie(m);m=this.df.yn(m),this.Ft(v,m)}},o.prototype.pF=function(l,p){var d=this.kl(l);if(d!=-1){var m=d;do c.ad.FG(this.Rp(m))&&p.add(m),m=this.Tp(m,l);while(m!=d)}},o.prototype.vK=function(l,p){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),p)},o.prototype.bK=function(l,p,d,m){this.Zu(l),p!=-1&&this.Zu(p),this.MI(0,l,m),p!=-1&&this.MI(1,p,m),d!=-1&&(m.Cf.D(this.zo),this.In(d,this.Ri),this.Ri.rb(this.zo)||this.Bk.add(d)),d=0;for(var v=this.Bk.size;d<v;d++){var _=this.Bk.get(d),M=this.Zy(_);M!=-1&&(this.df.wd(M,-1),this.Ft(_,-1))}for(d=this.Th(l),v=p!=-1?this.Th(p):-1,this.QD(d,m,0),p!=-1&&this.QD(v,m,1),this.TE(l,m,0),p!=-1&&this.TE(p,m,1),this.Rd.eh(d),this.Wu(l),p!=-1&&(this.Rd.eh(v),this.Wu(p)),d=0,v=this.Bk.size;d<v;d++)(_=this.Bk.get(d))==this.Lq&&(this.Zv=!0),(M=this.Zy(_))==-1&&((M=this.df.DD(this.vF(_)))==-1?(l=this.Ie(this.df.ka(this.df.zF())),this.Zm(l,_)):this.Ft(_,M));this.Bk.clear(!1)},o.prototype.In=function(l,p){this.g.YF(this.$y(l),p)},o.prototype.vF=function(l){return this.nh.Kn(this.Ur(l))},o.prototype.dC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.$n=this.ae);var l=new c.ja(0),p=null,d=null;this.AH=this.GH=-1,this.Wn=!1;for(var m=this.df.sc(-1);m!=-1;){this.Wn=!1;var v=this.df.ka(m);this.Lq=this.Ie(v),this.g.Hc(v,this.xh),this.ae.UJ(this.xh.y,this.xh.x);var _=this.kl(this.Lq),M=_==-1;if(!M){v=_;do{var T=this.Rp(v);T==-1?(this.ph.add(v),this.Rl(v,-3)):T!=-3&&l.add(T),v=this.Tp(v,this.Lq)}while(v!=_)}if(0<l.size){for(this.Wn=l.size==1&&this.ph.size==1,M=0,_=l.size;M<_;M++)v=this.Nc.ka(l.get(M)),this.Rl(v,-2);var I=-2,O=-2;for(M=0,_=l.size;M<_;M++){if(T=l.get(M),I==-2){var R=this.Nc.xe(T);R!=-1?(v=this.Nc.ka(R),(v=this.Rp(v))!=-2&&(I=R)):I=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(v=this.Nc.ka(T),(v=this.Rp(v))!=-2&&(O=T)):O=-1),I!=-2&&O!=-2)break}for(M=0,_=l.size;M<_;M++)T=l.get(M),v=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(v,-1);l.clear(!1),this.GH=I!=-1?I:-1,this.AH=O!=-1?O:-1,I!=-1&&O!=-1?this.Wn||this.fO(I,O):I==-1&&O==-1&&(this.Wn=!1)}else M&&(p==null&&(p=new a(this)),p.Fh(this.xh),this.Nc.oJ(p),p.rg&&(p.Mr(),this.AQ(this.Lq,p.Fm)));this.qS(),this.Zv?(this.Zv=!1,d==null&&(d=new b(this.g)),d.Fh(this.xh),m=this.df.oJ(d)):m=this.df.lb(m)}return this.Xn},o.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.ld;l!=-1;l=this.g.ve(l))if(c.ba.Ic(this.g.jc(l)))for(T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var p=this.g.Ka(T),d=this.g.Ya(T),m=this.$m(d),v=this.ot(d);for(this.jj(v,m),I=this.g.V(d),d=0,p-=2;d<p;d++){var _=this.g.V(I),M=this.$m(I);this.jj(v,M),v=this.ot(I),this.jj(v,M),I=_}this.g.ec(T)?(M=this.$m(I),this.jj(v,M),v=this.ot(I),this.jj(v,M),this.jj(v,m)):(M=this.$m(I),this.jj(v,M))}else for(var T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var I=this.g.Ya(T);for(m=0,p=this.g.Ka(T);m<p;m++)this.$m(I),I=this.g.V(I)}this.iQ()},o}();c.LC=n}(W||(W={})),function(c){var C=function(b){function u(a,n,o){var l=b.call(this)||this;if(a!==void 0)if(o!==void 0){l.description=c.ee.og();var p=new c.Od;p.L(a,n,o),l.YB(p)}else if(n!==void 0)l.description=c.ee.og(),l.Db(a,n);else if(a instanceof c.ua)l.description=a;else if(a instanceof c.h)l.description=c.ee.og(),l.Db(a);else{if(!(a instanceof u))throw c.i.O();l.description=a.description,l.Db(a.Ng(),a.kh()),a.la!==null&&(l.la=a.la.slice(0))}else l.description=c.ee.og();return l}return Ot(u,b),u.prototype.D=function(a){if(a===void 0){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return(a=new c.h).na(this.la[0],this.la[1]),a}if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])},u.prototype.Db=function(a,n){typeof a=="number"?(this.wc(),this.la==null&&this.up(),this.la[0]=a,this.la[1]=n):(this.wc(),this.Db(a.x,a.y))},u.prototype.xz=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");var a=new c.Od;return a.x=this.la[0],a.y=this.la[1],a.z=this.description.cG()?this.la[2]:c.ua.te(1),a},u.prototype.YB=function(a){this.wc();var n=this.hasAttribute(1);n||c.ua.xG(1,a.z)||(this.se(1),n=!0),this.la==null&&this.up(),this.la[0]=a.x,this.la[1]=a.y,n&&(this.la[2]=a.z)},u.prototype.Ng=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.XB=function(a){this.setAttribute(0,0,a)},u.prototype.kh=function(){if(this.Bc())throw c.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.VJ=function(a){this.setAttribute(0,1,a)},u.prototype.VR=function(){return this.Vc(1,0)},u.prototype.oX=function(a){this.setAttribute(1,0,a)},u.prototype.tR=function(){return this.Vc(2,0)},u.prototype.ZW=function(a){this.setAttribute(2,0,a)},u.prototype.Fc=function(){return this.sF(3,0)},u.prototype.FJ=function(a){this.setAttribute(3,0,a)},u.prototype.Vc=function(a,n){var o=this.description.Qf(a);return 0<=o?this.la[this.description.ak(o)+n]:c.ua.te(a)},u.prototype.sF=function(a,n){var o=this.description.Qf(a);return 0<=o?this.la[this.description.ak(o)+n]:c.ua.te(a)},u.prototype.setAttribute=function(a,n,o){this.wc();var l=this.description.Qf(a);0>l&&(this.se(a),l=this.description.Qf(a)),this.la==null&&this.up(),this.la[this.description.ak(l)+n]=o},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(a){if(this.la!=null){for(var n=c.ee.Kw(a,this.description),o=[],l=0,p=0,d=a.Ba;p<d;p++){var m=a.qd(p),v=c.ua.Wa(m);if(n[p]==-1){var _=c.ua.te(m);for(m=0;m<v;m++)o[l]=_,l++}else for(_=this.description.ak(n[p]),m=0;m<v;m++)o[l]=this.la[_],l++,_++}this.la=o}this.description=a},u.prototype.up=function(){this.fJ(this.description.Be.length),u.XD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(a){if(a instanceof c.Ed){if(!this.Bc()){var n=this.D();a.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.YB(a.gp(n)))},u.prototype.copyTo=function(a){if(a.K()!=33)throw c.i.O();a.wc(),this.la==null?(a.Pa(),a.la=null,a.kg(this.description)):(a.kg(this.description),a.fJ(this.description.Be.length),u.XD(this.la,a.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(a){a.Pa(),this.description!=a.description&&a.kg(this.description),a.$b(this)},u.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])},u.prototype.Ro=function(a){if(this.Bc())a.Pa();else{var n=this.xz();a.v=n.x,a.G=n.y,a.Xe=n.z,a.C=n.x,a.H=n.y,a.Dg=n.z}},u.prototype.Vg=function(a,n){var o=new c.Oc;return this.Bc()?(o.Pa(),o):(a=this.Vc(a,n),o.pa=a,o.wa=a,o)},u.prototype.fJ=function(a){if(this.la==null)this.la=c.P.lg(a);else if(this.la.length<a){for(var n=this.la.slice(0),o=this.la.length;o<a;o++)n[o]=0;this.la=n}},u.XD=function(a,n,o){if(0<o)for(o=0;o<a.length;o++)n[o]=a[o]},u.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof u)||this.description!=a.description)return!1;if(this.Bc())return!!a.Bc();for(var n=0,o=this.description.Be.length;n<o;n++)if(this.la[n]!=a.la[n])return!1;return!0},u.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var n=0,o=this.description.Be.length;n<o;n++){var l=this.la[n];l=c.P.truncate(l^l>>>32),a=c.P.Vh(l,a)}return a},u.prototype.mg=function(){return null},u}(c.ba);c.Ta=C}(W||(W={})),function(c){var C=function(){function b(u,a,n){u!==void 0&&(this.x=u,this.y=a,this.z=n)}return b.construct=function(u,a,n){var o=new b;return o.x=u,o.y=a,o.z=n,o},b.prototype.L=function(u,a,n){this.x=u,this.y=a,this.z=n},b.prototype.lx=function(){this.z=this.y=this.x=0},b.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.sub=function(u){return new b(this.x-u.x,this.y-u.y,this.z-u.z)},b.prototype.Ag=function(u){new b(this.x*u,this.y*u,this.z*u)},b.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},b}();c.Od=C}(W||(W={})),function(c){var C=function(){function b(u,a,n){this.Iw=this.xA=null,this.Yf=a,this.xT=a.y-n,this.wT=a.y+n,this.Gw=0,this.Zz=u,this.ra=n,this.JT=n*n,this.$z=n!=0,this.Nv=!1}return b.prototype.result=function(){return this.Gw!=0?1:0},b.prototype.TM=function(u){return u=u.ic(u.fe(this.Yf,!1)),c.h.zc(u,this.Yf)<=this.JT},b.prototype.$E=function(u){if(!this.$z&&(this.Zz&&this.Yf.rb(u.ac())||this.Yf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Yf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var a=Math.max(u.sa,u.qa);this.Yf.x>Math.min(u.sa,u.qa)&&this.Yf.x<a&&(this.Nv=!0)}}else{var n=!1;if(a=Math.max(u.sa,u.qa),this.Yf.x>a?n=!0:this.Yf.x>=Math.min(u.sa,u.qa)&&(n=0<u.fq(!0,this.Yf.y,this.Iw,null)&&this.Iw[0]<=this.Yf.x),n){if(this.Yf.y==u.ac().y){if(this.Yf.y<u.xc().y)return}else if(this.Yf.y==u.xc().y&&this.Yf.y<u.ac().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.ac().y>u.xc().y?1:-1)}}},b.prototype.LI=function(u){var a=u.Vg(0,1);if(a.pa>this.wT||a.wa<this.xT)return!1;if(this.$z&&this.TM(u))return!0;if(a.pa>this.Yf.y||a.wa<this.Yf.y)return!1;if(this.xA==null&&(this.xA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(a=u.ZF()))for(u=0;u<a;u++){var n=this.xA[u].get();if(this.$E(n),this.Nv)return!0}else if(this.$E(u),this.Nv)return!0;return!1},b.JM=function(u,a,n){for(a=new b(u.Jn()==0,a,n),u=u.Ha();u.ab();)for(;u.Ia();)if(n=u.ia(),a.LI(n))return-1;return a.result()},b.KM=function(u,a,n,o){var l=new c.l;u.yc(l),l.X(o,o);var p=new b(u.Jn()==0,n,o);u=u.Ha();var d=new c.l;for(d.L(l),d.C=n.x+o,d.G=n.y-o,d.H=n.y+o,o=(n=a.GF(d,o)).next();o!=-1;o=n.next())if(u.Wb(a.ka(o)),u.Ia()&&(o=u.ia(),p.LI(o)))return-1;return p.result()},b.ym=function(u,a,n){if(u.B())return 0;var o=new c.l;if(u.yc(o),o.X(n,n),!o.contains(a))return 0;if((o=u.Cb)!=null){var l=o.Gk;if(l!=null){if((l=l.To(a.x,a.y))==1)return 1;if(l==0)return 0}if((o=o.Gb)!=null)return b.KM(u,o,a,n)}return b.JM(u,a,n)},b.US=function(u,a,n){return a.B()?0:b.ym(u,a.D(),n)},b.Ol=function(u,a){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*a<1*u*a},b}();c.Fg=C}(W||(W={})),function(c){var C=function(b){function u(a){return b.call(this,!0,a)||this}return Ot(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.rG=function(a,n,o){this.CS(a,n,o)},u.prototype.jR=function(){this.zR()},u}(c.Wk);c.Ea=C}(W||(W={})),function(c){(function(C){C[C.PiPOutside=0]="PiPOutside",C[C.PiPInside=1]="PiPInside",C[C.PiPBoundary=2]="PiPBoundary"})(c.LL||(c.LL={})),c.jd=function(){function C(){}return C.EG=function(b,u,a){return(b=c.Fg.US(b,u,a))==0?0:b==1?1:2},C.Zd=function(b,u,a){return(b=c.Fg.ym(b,u,a))==0?0:b==1?1:2},C.OX=function(b,u,a,n,o){if(u.length<a||o.length<a)throw c.i.O();for(var l=0;l<a;l++)o[l]=C.Zd(b,u[l],n)},C.mK=function(b,u,a,n,o){if(b.K()==1736)C.OX(b,u,a,n,o);else{if(b.K()!=197)throw c.i.ga("invalid_call");var l=new c.l;b.A(l),C.UM(l,u,a,n,o)}},C.UM=function(b,u,a,n,o){if(u.length<a||o.length<a)throw c.i.O();if(b.B())for(n=0;n<a;n++)o[n]=0;else for(b.X(.5*-n,.5*-n),b.X(.5*n,.5*n),n=0;n<a;n++)b.contains(u[n])?o[n]=1:b.contains(u[n])?o[n]=2:o[n]=0},C.QX=function(b,u,a,n,o){for(var l=0;l<a;l++)o[l]=b.ss(u[l],n)?2:0},C.PX=function(b,u,a,n,o){var l=b.Cb,p=null;l!=null&&(p=l.Gk),l=a;for(var d=0;d<a;d++)if(o[d]=1,p!=null){var m=u[d];p.To(m.x,m.y)==0&&(o[d]=0,l--)}if(l!=0)for(b=b.Ha();b.ab()&&l!=0;)for(;b.Ia()&&l!=0;)for(p=b.ia(),d=0;d<a&&l!=0;d++)o[d]==1&&p.ss(u[d],n)&&(o[d]=2,l--);for(d=0;d<a;d++)o[d]==1&&(o[d]=0)},C.nK=function(b,u,a,n,o){var l=b.K();if(l==1607)C.PX(b,u,a,n,o);else{if(!c.ba.zd(l))throw c.i.ga("Invalid call.");C.QX(b,u,a,n,o)}},C}()}(W||(W={})),function(c){var C=function(b){function u(a,n){if(arguments.length==2){var o=b.call(this,!1,a.description)||this;o.nf(a),o.lineTo(n)}else o=b.call(this,!1,a)||this;return o}return Ot(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.rG=function(a,n,o){this.DS(a,n,o)},u}(c.Wk);c.Ua=C}(W||(W={})),function(c){var C=function(){function b(){}return b.prototype.progress=function(){return!0},b.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw c.i.QC()},b}();c.np=C}(W||(W={})),function(c){var C;(C=c.JK||(c.JK={}))[C.clipWithInputHorizon=1]="clipWithInputHorizon",C[C.clipWithOutputHorizon=2]="clipWithOutputHorizon";var b=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.HW=function(o){this.KB(1,o)},n.prototype.IW=function(o){this.KB(2,o)},n.prototype.aS=function(){return this.ks(1)},n.prototype.bS=function(){return this.ks(2)},n.prototype.KB=function(o,l){this.Mg=l?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.prototype.Pf=function(){var o=new n;return o.Lr=this.Lr,o.Xu=this.Xu,o.Mg=this.Mg,o},n}();c.sC=b,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(c.KK||(c.KK={}));var u=function(){function n(){this.Mg=0}return n.prototype.KB=function(o,l){this.Mg=l?this.Mg|o:this.Mg&~o},n.prototype.ks=function(o){return(this.Mg&o)!=0},n.ig=function(o){var l=new n;return l.Mg=o.Mg,l},n.prototype.gM=function(o){this.Mg=o.Mg},n}();c.sY=u;var a=function(){function n(o,l,p){this.ef=o,this.Zf=l,this.Vf=new c.l,this.Vf.L(p),this.sT=o.dc()+l.dc()+this.Vf.dc().toString()}return n.prototype.dc=function(){return this.sT},n.prototype.Nb=function(o){return this==o||this.ef.Nb(o.ef)&&this.Zf.Nb(o.Zf)&&this.Vf.Nb(o.Vf)},n}();c.xY=a,a=function(){function n(){this.Zf=this.ef=null,this.lH=new b,this.mH=new u,this.yw=this.Xf=null,this.ow=this.Un=!0}return n.Pr=function(o,l,p,d){var m;d===void 0&&(d=null),m===void 0&&(m=null);var v=new n;return v.rp(o,l,p,d,m),v},n.prototype.rp=function(o,l,p,d,m){if(o==null||l==null)throw c.i.ga("invalidArgument");if(this.ef=o,this.Zf=l,this.ow=this.Un=!1,d!=null&&(this.lH=d.Pf()),m!=null&&this.mH.gM(m),m=!1,l.Tb()==1&&d!=null&&(d=d.Lr,isNaN(d)||d==0||(m=!0)),o==l)this.Un=!m,this.ow=!0;else{d=o.Tb();var v=l.Tb();if(d==0||v==0){if(p!=null)throw c.i.O();o.Id()!=null&&l.Id()!=null&&(this.Un=o.Id().Nb(l.Id()))}else d==3||v==3?this.Un=o.Nb(l):this.ef.dS(this.Zf)?this.Un=!m:this.Un=!1,this.Xf=p,this.Xf!=null&&this.Xf.ix(),this.ow=(this.Xf==null||this.Xf.count()==0)&&this.ef.tc().Nb(this.Zf.tc())}this.gY()},n.prototype.isIdentity=function(){return this.Un},n.prototype.hR=function(){return this.lH.Pf()},n.prototype.Nb=function(o){return o==this||!!(o instanceof n&&this.ef.Nb(o.ef)&&this.Zf.Nb(o.Zf))&&(this.Xf==o.Xf||!(this.Xf==null||o.Xf==null||!this.Xf.Nb(o.Xf)))},n.prototype.gY=function(){this.yw=new c.du(this)},n}(),c.xr=a}(W||(W={})),function(c){var C=function(){function b(){}return b.Ep=function(u){return u*b.gW},b.mx=function(u,a){return b.aP(a-u)},b.bP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=c.mc.LK(u))&&(u+=360),u)},b.aP=function(u){return 180<(u=b.bP(u))&&(u-=360),u},b.gW=57.29577951308232,b}();c.sr=C,c.Jh=function(){function b(){}return b.nj=function(u,a){var n=new c.l;u.A(n);var o=c.cb.ih(a),l=new c.l;return l.L(o),l.v=n.v,l.C=n.C,l.X(.01*l.da(),0),a=c.ta.Xd(a,n,!1),l.contains(n)?u:c.Vd.clip(u,l,a,0)},b.ms=function(u,a,n,o,l){if(!c.cb.Xc(a))throw c.i.O();var p=c.ta.mj(a,u,!1),d=c.cb.ih(a),m=c.cb.tc(a),v=m.Id().ci,_=c.cb.xv(m);m=c.cb.gv(m),_*=2-_;var M=new c.Oc;d.en(M);var T=[[0,0],[0,0]];if(c.Gg.Tb(a)==2?o?(T[0][0]=b.an(l,M),T[0][1]=d.Lp(),c.cb.wt(),d=T[0][0]*v):(T[0][0]=d.hk(),T[0][1]=l,c.cb.wt(),d=T[0][1]*v):d=l*v,!o&&d!=0)throw c.i.O();var I=new c.ha,O=new c.hd;u=O.Ib(u);for(var R=[0],L=new c.h,G=new c.h,q=new c.h,D=new c.h,H=new c.h,ee=new c.h,te=O.Ob(u);te!=-1;te=O.Sb(te)){var Z=O.Ya(te);O.D(Z,q);for(var ce=!1,ye=Z=O.V(Z);ye!=-1;ye=O.V(ye)){if(ye==Z){if(ce)break;ce=!0}if(O.D(ye,D),o&&p<l-q.x&&D.x-l>p||p<l-D.x&&q.x-l>p||!o&&p<-q.y&&D.y>p||p<-D.y&&q.y>p)do if(!(Math.abs(q.x-D.x)>=.5*M.S())){if(c.Gg.Tb(a)==2?(T[0][0]=b.an(q.x,M),T[0][1]=q.y,T[1][0]=b.an(D.x,M),T[1][1]=D.y,c.cb.WV(),H.x=T[0][0]*v,H.y=T[0][1]*v,ee.x=T[1][0]*v,ee.y=T[1][1]*v):(H.x=q.x*v,H.y=q.y*v,ee.x=D.x*v,ee.y=D.y*v),ee.x=6.283185307179586*(D.x-q.x)/M.S()+H.x,o){if(G.x=d,G.y=b.Iz(m,_,H,ee,d,n),isNaN(G.y))break}else{if(G.x=b.Gz(m,_,H,ee,n),isNaN(G.x))break;G.y=0}c.kb.xd(m,_,H.x,H.y,ee.x,ee.y,I,null,null,n);var Me=I.u;c.kb.xd(m,_,H.x,H.y,G.x,G.y,I,null,null,n);var xe=I.u;c.Gg.Tb(a)==2?(T[0][0]=G.x/v,T[0][1]=G.y/v,c.cb.WQ(),o?(L.y=T[0][1],L.x=l):(L.x=b.qs(T[0][0],q.x,D.x,M),L.y=l)):o?(L.x=l,L.y=G.y/v):(L.x=b.qs(G.x/v,q.x,D.x,M),L.y=l),R[0]=0<Me?c.P.Sk(xe/Me,0,1):.5,R[0]!=0&&R[0]!=1&&(Me=O.Na(ye),O.Wl(Me,R,1),O.Db(O.V(Me),L.x,L.y))}while(0);q.N(D)}}return O.Ke(u)},b.Gn=function(u,a,n,o,l){if(u.B())return u;var p=c.cb.bf(a);return b.Jp(u,n-180*p,360*p,a,o,l,!0)},b.Iz=function(u,a,n,o,l,p){if(3.141592653589793<=Math.abs(n.x-o.x)||!b.Tn(n.x,o.x,l))return NaN;if(n.x>o.x)var d=o;else d=n,n=o;o=new c.ha(0);var m=new c.ha(0),v=new c.ha(0);c.kb.xd(u,a,d.x,d.y,n.x,n.y,m,o,null,p);var _=m.u,M=0,T=1,I=new c.h;for(I.N(d);_*(T-M)>1e-12*u;){var O=.5*(M+T);if(c.kb.qj(u,a,d.x,d.y,_*O,o.u,m,v,p),I.x=m.u,I.y=v.u,I.x==l)break;if(b.Tn(d.x,I.x,l))T=O;else{if(!b.Tn(n.x,I.x,l))return NaN;M=O}}return I.y},b.Tn=function(u,a,n){return u=C.Ep(u),a=C.mx(u,C.Ep(a)),(n=C.mx(u,C.Ep(n)))==0||0<a&&0<n&&n<=a||0>a&&0>n&&n>=a},b.an=function(u,a){var n=a.wa-a.pa;return a.Kt(u-Math.floor((u-a.pa)/n)*n)},b.qs=function(u,a,n,o){var l=new c.Oc;for(l.L(a,n),n=o.S(),u=Math.floor((u-a)/n)*n+u,l=l.tf();Math.abs(u-l)>Math.abs(u+n-l);)u+=n;return u},b.Gz=function(u,a,n,o,l){if(n.y>o.y)var p=o;else p=n,n=o;if((o=new c.Oc).L(p.y,n.y),!o.contains(0)||3.141592653589793<=Math.abs(p.x-n.x))return NaN;if(p.x==n.x)return p.x;var d=new c.ha(0),m=new c.ha(0),v=new c.ha(0);c.kb.xd(u,a,p.x,p.y,n.x,n.y,m,d,null,l);var _=m.u,M=0,T=1,I=new c.h;for(I.N(p);_*(T-M)>1e-12*u;){var O=.5*(M+T);if(c.kb.qj(u,a,p.x,p.y,_*O,d.u,m,v,l),I.x=m.u,I.y=v.u,o.L(p.y,I.y),I.y==0)break;if(o.contains(0))T=O;else{if(o.L(n.y,I.y),!o.contains(0))return NaN;M=O}}return I.x},b.Jp=function(u,a,n,o,l,p,d){var m=new c.l;if(u.A(m),m.B())return u;var v=new c.Oc;m.en(v);var _=new c.Oc;if(_.L(a,a+n),_.contains(v)&&_.wa!=v.wa)return u;var M=new c.l;M.L(m);var T=u.K();if(T==33)return((m=(M=l?u:u.Pf()).Ng())<_.pa||m>=_.wa||d&&m==_.wa)&&(m+=Math.ceil((_.pa-m)/n)*n,m=_.Kt(m),M.XB(m)),M;if(T==550){for(o=(M=l?u:u.Pf()).vb(0),T=2*M.I(),u=!1,l=0;l<T;l+=2)((m=o.read(l))<_.pa||m>=_.wa||d&&m==_.wa)&&(u=!0,m+=Math.ceil((_.pa-m)/n)*n,m=_.Kt(m),o.write(l,m));return u&&M.Qc(1993),M}if(_.contains(v))return u;if(T==197)return n=l?u:u.Pf(),m.Fa(M),n.Yo(m),n;var I=.1*Math.max(m.da(),m.S());for(M.X(0,I),d=u,_=o.Yd(0),u=c.Ih.local(),l=new c.Ed;;){var O=Math.floor((v.pa-a)/n),R=Math.ceil((v.wa-a)/n);if(!(3<R-O))break;O=Math.floor(.5*(R+O)),M.v=m.v-I,M.C=a+n*O;var L=c.Vd.clip(d,M,_,p);M.v=M.C,M.C=m.C+I;var G=c.Vd.clip(d,M,_,p);l.gg((O-R)*n,0),G.Pc(l),T==1736?d=u.W(L,G,o,null):(d=L).add(G,!1),d.A(m),m.en(v)}for(M.v=a,M.C=a+n,(a=new c.l).L(M),a.X(_,0),(a=Math.floor((m.v-M.v)/n)*n)!=0?(M.move(a,0),l.gg(-a,0)):l.LB(),a=T==1607?new c.Ua(d.description):new c.Ea(d.description),p=new c.l,v=new c.l;m.C>M.v;)(I=c.Vd.clip(d,M,_,0)).A(v),(T==1607?!I.B()&&(v.S()>_||v.da()>_):!I.B()&&(T!=1736||v.S()>_))&&(I.Pc(l),I.A(v),a.A(p),p.X(_,_),p.isIntersecting(v)&&T==1736?a=u.W(a,I,o,null):a.add(I,!1)),M.move(n,0),l.shift(-n,0);return a},b.QI=function(u,a,n,o){var l=new c.de(n.description);l.Gd(n,0,-1),l=c.cb.Bh(l,u,a);var p=n.I();if(o.Pa(),!c.cb.Xc(u)||p!=l.I())return!1;var d=new c.l;n.A(d);var m=new c.l;if(l.A(m),d=d.S(),m=m.S(),d!=0&&m!=0){if(m/=d,u=c.cb.ih(a).S()/c.cb.ih(u).S(),1e-10<Math.abs(m/u-1))return!1}else if(d!=0||m!=0)return!1;for(o.add(n,!1),n=0;n<p;n++)u=l.Oa(n),o.Db(n,u);return!0},b.Jz=function(){throw c.i.Fe()},b}()}(W||(W={})),function(c){var C,b,u;(b=C=c.ui||(c.ui={}))[b.Clip=0]="Clip",b[b.DontClip=1]="DontClip",b[b.PannableFold=2]="PannableFold",function(a){a[a.Geodesic=0]="Geodesic",a[a.Loxodrome=1]="Loxodrome",a[a.GreatElliptic=2]="GreatElliptic",a[a.NormalSection=3]="NormalSection",a[a.ShapePreserving=4]="ShapePreserving"}(u=c.QK||(c.QK={})),c.Ab=function(){function a(){}return a.zv=function(n,o,l){if(l||0<o){for(n=n.toString(c.Tc.PE_STR_NAME_CANON|c.Tc.PE_STR_AUTH_NONE),o=[],l=0;l<n.length;l++)o[l]="a"<=n[l]&&"z">=n[l]?o[l]=n[l].toUpperCase():n[l];return o.join()}return n.toString(c.Tc.PE_STR_AUTH_TOP)},a.wr=function(n,o,l,p){var d=p.length,m=l.I();if(m!=0){var v=l.vb(0),_=Math.min(m,d),M=0,T=n.gh();isNaN(o)&&(o=0);for(var I=n.Xc(),O=179*(n=I?n.tc().Le().S():0)/360;0<m;){if(v.oB(M<<1,_,p),c.gj.projToGeogCenter(T,_,p,o),I)for(var R=0;R<_;R++){var L=p[R][0]-o,G=c.mc.sign(L),q=v.read(2*(M+R));0>G*c.mc.sign(q)&&Math.abs(L)>O&&(p[R][0]+=-G*n)}v.oC(M<<1,_,p),M+=_,m-=_,_=Math.min(m,d)}l.Qc(1993)}},a.CL=function(n,o,l,p){var d=0,m=n.gh();isNaN(d)&&(d=0);var v=n.Xc(),_=n.bf();n=360*_,_*=179;for(var M=p.length,T=0;T<l;){for(var I=T;I<l&&o[I].isNaN();++I)T++;var O=Math.min(M,l-T);if(0<O){I=1;for(var R=T+1;I<O;++I,++R)if(o[R].isNaN()){O=I;break}if(c.ta.Ey(p,o,T,O),c.gj.projToGeogCenter(m,O,p,d),v)for(I=0,R=T;I<O;++I,++R){var L=o[R].x,G=p[I][0]-d,q=c.mc.sign(G);0>q*c.mc.sign(L)&&Math.abs(G)>_&&(p[I][0]-=q*n)}c.ta.Dy(o,T,p,O),T+=O}}},a.Kx=function(n,o,l){var p=l.length,d=o.I();if(!(1>d)){var m=o.vb(0),v=Math.min(d,p),_=0,M=n.gh(),T=n.Xc(),I=T?n.Le().S():0,O=179*I/360,R=0;for(T&&(R=n.Bi());0<d;){if(m.oB(_<<1,v,l),c.gj.geogToProj(M,v,l),T)for(n=0;n<v;n++){var L=l[n][0],G=c.mc.sign(L),q=m.read(2*(_+n))-R;0>G*c.mc.sign(q)&&Math.abs(L)>O&&(l[n][0]+=-G*I)}m.oC(_<<1,v,l),_+=v,d-=v,v=Math.min(d,p)}o.Qc(1993)}},a.BL=function(n,o,l,p){if(l!=0){var d=n.gh(),m=n.Xc(),v=m?n.Le().S():0,_=179*v/360,M=0;for(m&&(M=n.Bi()),n=0;n<l;){for(var T=n;T<l&&o[T].isNaN();++T)n++;var I=Math.min(p.length,l-n);if(0<I){T=1;for(var O=n+1;T<I;++T,++O)if(o[O].isNaN()){I=T;break}if(c.ta.Ey(p,o,n,I),c.gj.geogToProj(d,I,p),m)for(T=0,O=n;T<I;T++){var R=p[T][0],L=c.mc.sign(R);0>L*c.mc.sign(o[O].x-M)&&Math.abs(R)>_&&(p[T][0]-=L*v)}c.ta.Dy(o,n,p,I),n+=I}}}},a.vr=function(n,o,l,p){var d=o.I();if(d!=0){var m=o.vb(0),v=n.ef,_=n.Zf,M=v.tc().Sp(),T=_.tc().Sp(),I=v.bf(),O=_.bf();if((n=n.Xf)==null||n.count()==0){for(l=M/T,p=(v.Wp()-_.Wp())*O,T=-90*I,n=90*I,M=!1,O=1,v=2*d;O<v;)I=m.get(O),(_=c.P.Sk(I,T,n))!=I&&(m.set(O,_),M=!0),O+=2;if(p!=0||l!=1)for(M=!0,T=new c.h,O=0;O<d;O++)m.uc(2*O,T),T.x*=l,T.x+=p,T.y*=l,m.Vt(2*O,T);M&&o.Qc(1993)}else{v=p.length,_=Math.min(d,v);var R=c.P.lg(_),L=null,G=0,q=NaN,D=NaN,H=360*O,ee=O/I;l&&(D=90*O,q=89.9*I,L=c.P.lg(_));for(var te=!0,Z=0;d!=0;){for(I=!1,m.oB(G<<1,_,p),O=0;O<_;O++)R[O]=p[O][0];if(l)for(O=0;O<_;O++){var ce=Math.abs(p[O][1])-q;0<ce&&(I=p[O][1],p[O][1]=c.mc.Dn(q,I),L[O]=c.mc.Dn(ce,I),I=!0)}for(O=p[0][0],n.transform(p,_,M,T),te&&(Z=p[0][0]-ee*O,te=!1),O=0;O<_;O++)ce=p[O][0]-R[O]*ee-Z,200<Math.abs(ce)&&(p[O][0]=0<ce?p[O][0]-H:p[O][0]+H);if(I){for(O=0;O<_;O++)L[O]!=0&&(p[O][1]+=ee*L[O],p[O][1]>D?p[O][1]=D:p[O][1]<-D&&(p[O][1]=-D));for(I=0;I<_;I++)L[I]=0}m.oC(G<<1,_,p),G+=_,d-=_,_=Math.min(d,v)}o.Qc(1993)}}},a.AL=function(n,o,l,p){if(n.ow)p=90*n.ef.bf(),c.ta.YJ(o,l,-p,p);else{var d=n.Xf,m=n.ef,v=n.Zf;n=m.Zr();var _=v.Zr(),M=m.bf(),T=90*M,I=v.bf();if(d==null||d.count()==0){if(p=n/_,d=(m.Wp()-v.Wp())*I,c.ta.YJ(o,l,-T,T),d!=0||p!=1)for(I=0;I<l;I++)o[I].x*=p,o[I].x+=d,o[I].y*=p}else{m=Math.min(l,p.length),T=c.P.lg(m),v=360*I,M=I/M;for(var O=!0,R=0,L=0;l!=0;){for(I=0;I<m;I++)T[I]=o[I+L].x;for(I=o[0].x,c.ta.Ey(p,o,L,m),d.transform(p,m,n,_),c.ta.Dy(o,L,p,m),O&&(R=o[0].x-M*I,O=!1),I=0;I<m;I++){var G=o[L+I].x-T[I]*M-R;200<Math.abs(G)&&(o[L+I].x=0<G?o[L+I].x-v:o[L+I].x+v)}L+=m,l-=m,m=Math.min(l,p.length)}}}},a.fv=function(n,o){return n=n.ih(),isNaN(o)||n.Lu(o,0),n},a.OQ=function(n,o,l,p,d,m,v,_){for(var M=a.fv(p,d),T=M.S(),I=T/360,O=a.jE*I,R=n.vb(0),L=o.Xc(),G=L?T/o.Le().S():0,q=!1,D=new c.Ea(l.description),H=0,ee=l.ea();H<ee;++H){var te=L,Z=new c.Ua(l.description);if(Z.addPath(l,H,!0),v!=0){var ce=a.JD(!0,Z,M.H-_,M.H,v);(q=q||ce)&&(te=!1)}var ye=-1;te&&(ye=n.Ca(H));var Me=Z.vb(0),xe=Z.I(),be=0,Ce=Me.read(0),Ze=0;ce=3*p.Yd(0);var Qe=!1,_t=new c.h;_t.Sc();var xt=new c.h;xt.Sc();for(var Ei=!1,Bt=1;Bt<xe;++Bt){var Ue=c.h.construct(Me.Bg(2*Bt),Me.Bg(2*Bt+1)),Nt=Ue.x,dt=Nt+be,hi=dt-Ce;if(Ue.x=dt,Math.abs(hi)>O){if(te){var Qt=ye+(Bt+1<xe?Bt:0),jr=R.read(2*(ye+Bt-1));Qt=(R.read(2*Qt)-jr)*G,Math.abs(hi-Qt)>1*I&&(te=!1)}te||(dt=Nt+(be-=c.mc.Dn(T,dt-Ce)),++Ze,Ei=be!=0,Ue.x=dt)}else Qe||c.ta.uG(xt,_t,Ue,ce)&&(Qe=!0);Ei&&Me.write(2*Bt,dt),Ce=dt,xt.N(_t),_t.N(Ue)}0<Ze&&Z.Qc(1993),te=Z.Oa(0),xe=Z.Oa(xe-1),Z=c.h.ub(te,xe)<ce?a.oQ(Z,p,d,m,Qe):a.pQ(n,H,Z,p,d),D.add(Z,!1)}return d=p.Yd(0),l=M.S()/180,a.Lt(D,M,.1*d,!1),D=D!=(d=c.ti.clip(D,M,d,l,m)),n=n.He(),v=0,0<(_=d.He())&&0>n?v=1:0>=_&&0<n&&(_==0?(_=NaN,o.Tb()==2?_=o.ol().He():o.Tb()==1&&(_=o.Le().qF()),n>.99*_&&(v=-1)):v=-1),v!=0&&((o=new c.Ea(d.description)).vp(M),(o=c.Zl.local().W(o,l,m)).add(d,!1),D=!0,d=o),D&&(d=c.$l.local().W(d,p,!1,m)),d},a.pQ=function(n,o,l,p,d){var m=l.I(),v=l.Oa(0),_=l.Oa(m-1);d=(p=a.fv(p,d)).S(),v=c.mc.sign(_.x-v.x);var M=new c.l;l.yc(M);var T=p.hk();if(_=T-d,T+=d,0<=v){var I=Math.ceil((_-M.v)/d);for(I*=d;_>M.v+I;)I+=d;for(;_<M.C+I;)I-=d;var O=I;720<M.S()&&(T=_+360*Math.ceil(M.S()/360))}else{for(I=Math.ceil((T-M.C)/d),I*=d;T<M.C+I;)I-=d;for(;T>M.v+I;)I+=d;O=I,720<M.S()&&(_=T-360*Math.ceil(M.S()/360))}I=v*d;var R=c.l.construct(M.v,M.G,M.C,M.H);R.move(O,0);var L=new c.Ed;L.gg(O,0),l.Pc(L),(M=new c.Ua(l.description)).add(l,!1),O=l.Oa(m-1),d=0;for(var G=M.Oa(0).x,q=0;0<v?R.C<T:R.v>_;)1024<=q&&(q=0),R.move(I,0),L.Lb=I,l.Pc(L),G+=I,p.v<=G&&p.C>=G&&(d=M.I()-1),l.Db(0,O),O=l.Oa(m-1),M.Fr(l,0,0,m-1,!1);return l=new c.Ea(M.description),m=0<n.Kr(o),l.add(M,!1),n=M.Oa(0),_=M.Oa(M.I()-1),o=l.ea()-1,(0>v?m:!m)?(v=c.h.construct(_.x,p.H),l.Ei(v),v=c.h.construct(p.hk(),p.H),l.Ei(v),p=c.h.construct(n.x,p.H)):(v=c.h.construct(_.x,p.G),l.Ei(v),v=c.h.construct(p.hk(),p.G),l.Ei(v),p=c.h.construct(n.x,p.G)),l.Ei(p),l.rG(0,o,0),l.eO(d),l},a.oQ=function(n,o,l,p,d){var m=new c.Ea(n.description);m.add(n,!1),m.xB(0,m.I()-1);var v=new c.l;m.yc(v);var _=(l=a.fv(o,l)).S(),M=Math.ceil((l.v-v.v)/_);for(M*=_;l.v>v.v+M;)M+=_;for(;l.v<v.C+M;)M-=_;if((M+=_)!=0){v.move(M,0);var T=new c.Ed;T.gg(M,0),m.Pc(T)}if(l.v<=v.v&&l.C>v.C)return d&&(d=m.He(),o=(m=c.$l.local().W(m,o,!0,p)).He(),(o=c.mc.sign(d)!=c.mc.sign(o))&&m.iJ()),m;for((n=new c.Ea(n.description)).add(m,!1),d=d||v.S()>_-o.Yd(0);v.v<l.C;)v.move(_,0),(T=new c.Ed).gg(_,0),m.Pc(T),n.add(m,!1);return d&&(d=n.He(),n.Zo(1),o=(n=c.$l.local().W(n,o,!0,p)).He(),(o=c.mc.sign(d)!=c.mc.sign(o))&&n.iJ()),n},a.JD=function(n,o,l,p,d){for(var m=o.vb(0),v=o.I(),_=!1,M=0;M<v;M++){var T=c.h.construct(m.Bg(2*M),m.Bg(2*M+1));if((1&d)!=0&&T.y>=l){_=!0;break}if((2&d)!=0&&T.y<=-l){_=!0;break}}if(!_)return!1;m=!1,n&&(m=o.On(0)),v=(n=new c.hd).Ib(o),_=n.Ob(v);var I=-1,O=!0,R=new c.h;R.Sc(),M=new c.Ta;for(var L=-1,G=n.Ya(_);G!=-1;G=n.V(G)){T=n.Oa(G);var q=(1&d)!=0&&90<=T.y?1:0;if(q|=(2&d)!=0&&T.y<=-l?2:0,0<I&&I!=q){if(R.x!=T.x){R.x=T.x,n.Xi(n.Na(G),M);var D=n.yj(_,G,M);n.mf(D,R)}if(m)for(L=L!=-1?n.V(L):n.Ya(_),D=n.Na(G);L!=D;)L=n.pd(L,!1);L=-1}0<q&&(T.y=c.mc.Dn(p,T.y),n.mf(G,T),O||I==q||(T.x!=R.x?(n.Xi(G,M),D=n.yj(_,G,M),n.Db(D,R.x,T.y),L=D):L=G)),I=q,R=T,O=!1}if(m){if(L!=-1)for(L=n.V(L);L!=-1;)L=n.pd(L,!1);l=n.Ya(_),n.hq(l,n.tj(_))||(n.Xi(l,M),n.yj(_,-1,M))}return n.Ke(v).copyTo(o),!0},a.Hz=function(n,o,l,p){var d=n;if(d.B()||l==C.DontClip)return d;var m=d.K();if(m==33)return d=[(p=d).D()],a.sG(d,1,o,l),d[0].isNaN()?p.Pa():p.Db(d[0]),n;var v=(n=o.tc()).bf(),_=90*v,M=180*v,T=360*v,I=o.Bi(),O=.5*v,R=new c.l;d.A(R);var L=o.Xr(),G=o.JQ(),q=L.K()==197;if(o=new c.l,L.A(o),l==C.PannableFold&&(l=n.Le().S(),o.v=I-.5*l,o.C=o.v+l),R.G<-_||R.H>_){if(new c.l().L(R.v-v,-_,R.C+v,_),(d=c.ti.Pu(d,o,n,NaN,0,p)).B())return d;d.A(R)}if(G&&(o.H<R.G||o.G>R.H))return d.Ja();if(R.S()>T&&(d=a.Jp(d,I-M,T,n,!0,0,!0,p)).A(R),(_=a.ZN(R.v,R.C,o.v,o.C,T))!=0&&R.move(_,0),R.C>o.C||R.v<o.v){if(R.C>o.C)for(;R.v>=o.C;)R.move(-T,0),_-=T;for(;R.v<o.C-T;)R.move(T,0),_+=T}if(l=c.ta.Ju(n,L),_!=0&&((v=new c.Ed).gg(_,0),d.Pc(v)),G){if(q&&o.contains(R))return d;for(G=[null,null],_=0;2>_;_++){if(q?v=c.ba.Ic(m)?c.ti.clip(d,o,l,O,p):c.ti.clip(d,o,l,0,p):(v=c.Xk.local().W(d,L,n,p))==L&&(v=c.ba.ig(v)),o.v<=R.v&&o.C>=R.C||o.v>=R.v&&o.C<=R.C)return v;G[_]=v,_==0&&(R.move(-T,0),(v=new c.Ed).gg(-T,0),d.Pc(v))}if(m==550)G[0].Gd(G[1],0,-1);else if(c.ba.Ic(m))G[0].add(G[1],!1);else{if(m!=33)throw c.i.ga("intersect_with_GCS_horizon: unexpected geometry type");G[0].B()&&(G[0]=G[1])}return G[0]}if(o.H<R.G||o.G>R.H)return d;for(m=0;!d.B()&&R.C>o.v;)m!=0&&((v=new c.Ed).gg(m,0),d.Pc(v)),c.fj.local().W(4,d,L,n,p)||L==(d=c.lp.local().W(d,L,n,p))&&(d=c.ba.ig(d)),m!=0&&((O=new c.Ed).gg(-m,0),d.Pc(O)),m-=T,R.move(-T,0);return d},a.sG=function(n,o,l,p){if(o!=0&&p!=C.DontClip)if(p==C.PannableFold){p=l.BR();for(var d=o,m=0;m<o;m++)(n[m].y>p.H||n[m].y<p.G)&&(n[m].Sc(),d--);d!=0&&a.cv(n,o,p.v,p.S())}else{var v=90*(p=l.bf()),_=180*p;for(p*=360,d=o,m=0;m<o;m++)(n[m].y>v||n[m].y<-v)&&(n[m].Sc(),d--);if(d!=0){(d=new c.l).bx(n,o),v=l.Xr();var M=l.kv();m=v.K()==197;var T=new c.l;if(v.A(T),!M||!(T.H<d.G||T.G>d.H))if(M)if(a.cv(n,o,T.hk()-_,p),d=o,m)for(m=0;m<o;m++)T.contains(n[m])||(n[m].Sc(),d--);else for(l=c.ta.Ju(l.tc(),v),m=0;m<o;m++)(_=c.jd.Zd(v,n[m],l)!=0)||(n[m].Sc(),d--);else for(a.cv(n,o,-_,p),d=o,l=c.ta.Ju(l.tc(),v),m=0;m<o;m++)(_=n[m]).isNaN()&&d--,M=a.nE(_.x,T.v,T.C,p),_.x+=M,(_=c.jd.Zd(v,_,l)!=0)&&(n[m].Sc(),d--)}}},a.Jp=function(n,o,l,p,d,m,v,_){var M=n.K(),T=o+l;if(M===33){var I=(p=d?n:n.Pf()).Ng();return(I<o||I>=T||v&&I==T)&&(I+=Math.ceil((o-I)/l)*l,I=c.P.Sk(I,o,T),p.XB(I)),p}if(n.B()||(I=new c.l,n.A(I),I.B()))return n;var O=new c.Oc;I.en(O);var R=new c.Oc;if(R.L(o,T),R.contains(O))return n;if((T=new c.l).L(I),M===550){for(_=(p=d?n:n.Pf()).vb(0),M=2*p.I(),T=!1,o=0;o<M;o+=2)((I=_.read(o))<R.pa||I>=R.wa||v&&I==R.wa)&&(T=!0,I+=Math.ceil((R.pa-I)/l)*l,I=R.Kt(I),_.write(o,I));return T&&p.Qc(1993),p}if(M==197)return l=d?n:n.Pf(),I.Fa(T),l.Yo(I),l;var L=.1*Math.max(I.da(),I.S());for(T.X(0,L),v=n,R=p.Yd(0),n=c.Ih.local(),d=new c.Ed;;){var G=Math.floor((O.pa-o)/l),q=Math.ceil((O.wa-o)/l);if(!(3<q-G))break;G=Math.floor(.5*(q+G)),T.v=I.v-L,T.C=o+l*G;var D=c.ti.clip(v,T,R,m,_);T.v=T.C,T.C=I.C+L;var H=c.ti.clip(v,T,R,m,_);d.gg((G-q)*l,0),H.Pc(d),M==1736?v=n.W(D,H,p,null):(v=D).add(H,!1),v.A(I),I.en(O)}for(T.v=o,T.C=o+l,(o=new c.l).L(T),o.X(R,0),(o=Math.floor((I.v-T.v)/l)*l)!=0?(T.move(o,0),d.gg(-o,0)):d.LB(),o=M==1607?new c.Ua(v.description):new c.Ea(v.description),m=new c.l,O=new c.l;I.C>T.v;)(L=c.ti.clip(v,T,R,0,_)).A(O),(M==1607?!L.B()&&(O.S()>R||O.da()>R):!L.B()&&(M!=1736||O.S()>R))&&(L.Pc(d),L.A(O),o.A(m),m.X(R,R),m.isIntersecting(O)&&M==1736?o=n.W(o,L,p,null):o.add(L,!1)),T.move(l,0),d.shift(-l,0);return o},a.cv=function(n,o,l,p){for(var d=l+p,m=0;m<o;m++){var v=n[m].x;l<=v&&v<d||!(v<l||v>d||v==d)||(v+=Math.ceil((l-v)/p)*p,v=c.P.Sk(v,l,d),n[m].x=v)}},a.Gn=function(n,o,l,p,d,m){if(!o.Xc())throw c.i.ga("fold_into_360_degree_range");if(n.B())return n;if(o.Tb()==2){l=o.rv();var v=o.qv()-l}else{var _=o.bf();v=360*_,l-=180*_}return a.Jp(n,l,v,o,p,d,!0,m)},a.kF=function(n,o,l,p){if(l.Tb()==2)p=l.rv(),l=l.qv()-p;else{var d=l.bf();l=360*d,p-=180*d}a.cv(n,o,p,l)},a.nj=function(n,o){var l=o.Le();if(n.K()==33){var p=n.kh();return l.G<=p&&p<=l.H?n:n.Ja()}p=new c.l,n.A(p);var d=new c.l;return d.L(l),d.v=p.v,d.C=p.C,d.X(.01*d.da(),0),l=c.ta.py(o,p),d.contains(p)?n:c.ti.clip(n,d,l,0,null)},a.kr=function(n,o,l){return n>o.C&&n-o.C<l?o.C:n<o.v&&o.v-n<l?o.v:n},a.xX=function(n,o,l,p){p.x=a.kr(n.x,o,l),p.y=n.y},a.wX=function(n,o,l,p){for(var d=0;d<o;d++)n[d].y<l.G||n[d].y>l.H?n[d].Sc():n[d].x=a.kr(n[d].x,l,p)},a.Lt=function(n,o,l,p){if(!n.B()){var d=n.K();if(!p||d!=1736)if(c.ba.zj(d)){p=n.vb(0),d=0;for(var m=n.I();d<m;d++){var v=p.read(2*d),_=a.kr(v,o,l);_!=v&&p.write(2*d,_)}n.Qc(1993)}else if(d==197)p=new c.l,n.A(p),p.v=a.kr(p.v,o,l),p.C=a.kr(p.C,o,l),n.Yo(p);else{if(d!=33)throw c.i.ga("internal error");n.XB(a.kr(n.Ng(),o,l))}}},a.nS=function(n,o,l,p){var d=new c.hd,m=d.Ib(n);return n=c.ta.Ju(o,n),a.ms(d,m,o,n,l,!0,p),d.Ke(m)},a.ms=function(n,o,l,p,d,m,v){if(!l.Xc())throw c.i.O("invalid call");var _=l.Le(),M=l.tc(),T=M.gh().getDatum().getSpheroid();M=M.Id().ci;var I=T.getFlattening();T=T.getAxis(),I*=2-I;var O=new c.Oc;_.en(O);var R=null,L=[[0,0],[0,0]];if(l.Tb()==2?(R=l.gh(),m?(L[0][0]=a.an(v,O),L[0][1]=_.Lp(),c.gj.projToGeog(R,1,L),_=L[0][0]*M):(L[0][0]=_.hk(),L[0][1]=v,c.gj.projToGeog(R,1,L),_=L[0][1]*M)):_=v*M,!m&&_!=0&&d!=u.GreatElliptic)throw c.i.ga("invalid argument");var G=new c.ha,q=[0],D=new c.h,H=new c.h,ee=new c.h,te=[null,null],Z=new c.h,ce=new c.h,ye=new c.h,Me=new c.h;for(o=n.Ob(o);o!=-1;o=n.Sb(o)){var xe=n.Ya(o);n.D(xe,Z);for(var be=!1,Ce=xe=n.V(xe);Ce!=-1;Ce=n.V(Ce)){if(Ce==xe){if(be)break;be=!0}if(n.D(Ce,ce),m&&(p<v-Z.x&&ce.x-v>p||p<v-ce.x&&Z.x-v>p)||!m&&(v!=0||p<-Z.y&&ce.y>p||p<-ce.y&&Z.y>p))do if(!(Math.abs(Z.x-ce.x)>=.5*O.S())){if(l.Tb()==2?(L[0][0]=a.an(Z.x,O),L[0][1]=Z.y,L[1][0]=a.an(ce.x,O),L[1][1]=ce.y,c.gj.projToGeogCenter(R,2,L,0),ye.x=L[0][0]*M,ye.y=L[0][1]*M,Me.y=L[1][1]*M):(ye.x=Z.x*M,ye.y=Z.y*M,Me.y=ce.y*M),Me.x=2*(ce.x-Z.x)*Math.PI/O.S()+ye.x,m){if(H.x=_,H.y=a.Iz(T,I,ye,Me,_,d),isNaN(H.y))break;te[0]=H;var Ze=1}else if(d==u.GreatElliptic){var Qe=[0,0];if((Ze=c.Nx.Jz(I,ye,Me,_,Qe))==0)break;H.x=Qe[0],H.y=_,te[0]=H,Ze==2&&(ee.x=Qe[1],ee.y=_,te[1]=ee)}else{if(H.x=a.Gz(T,I,ye,Me,d),isNaN(H.x))break;H.y=0,te[0]=H,Ze=1}var _t=-1;for(Qe=0;Qe<Ze;Qe++){c.kb.xd(T,I,ye.x,ye.y,Me.x,Me.y,G,null,null,d);var xt=G.u;c.kb.xd(T,I,ye.x,ye.y,te[Qe].x,te[Qe].y,G,null,null,d);var Ei=G.u;if(l.Tb()==2?(L[0][0]=te[Qe].x/M,L[0][1]=te[Qe].y/M,c.gj.geogToProj(R,1,L),m?(D.y=L[0][1],D.x=v):(D.x=a.qs(L[0][0],Z.x,ce.x,O),D.y=v)):m?(D.x=v,D.y=te[Qe].y/M):(D.x=a.qs(te[Qe].x/M,Z.x,ce.x,O),D.y=v),q[0]=0<xt?c.P.Sk(Ei/xt,0,1):.5,q[0]==0||q[0]==1)break;_t>q[0]||(_t=n.Na(Ce),n.Wl(_t,q,1),n.Db(n.V(_t),D.x,D.y),_t=q[0])}}while(0);Z.N(ce)}}},a.an=function(n,o){var l=o.wa-o.pa;return o.Kt(n-Math.floor((n-o.pa)/l)*l)},a.qs=function(n,o,l,p){var d=new c.Oc;for(d.L(o,l),l=p.S(),n=Math.floor((n-o)/l)*l+n,d=d.tf();Math.abs(n-d)>Math.abs(n+l-d);)n+=l;return n},a.Tn=function(n,o,l){return n=c.sr.Ep(n),o=c.sr.mx(n,c.sr.Ep(o)),(l=c.sr.mx(n,c.sr.Ep(l)))==0||0<o&&0<l&&l<=o||0>o&&0>l&&l>=o},a.Iz=function(n,o,l,p,d,m){if(m==u.GreatElliptic)return c.Nx.KS(o,l,p,d);if(Math.abs(l.x-p.x)>=Math.PI||!a.Tn(l.x,p.x,d))return NaN;if(l.x>p.x)var v=p;else v=l,l=p;p=new c.ha;var _=new c.ha,M=new c.ha;c.kb.xd(n,o,v.x,v.y,l.x,l.y,_,p,null,m);var T=_.u,I=0,O=1,R=new c.h;for(R.N(v);T*(O-I)>1e-12*n;){var L=.5*(I+O);if(c.kb.qj(n,o,v.x,v.y,T*L,p.u,_,M,m),R.x=_.u,R.y=M.u,R.x==d)break;if(a.Tn(v.x,R.x,d))O=L;else{if(!a.Tn(l.x,R.x,d))return NaN;I=L}}return R.y},a.Gz=function(n,o,l,p,d){if(d==u.GreatElliptic)return n=[0,0],c.Nx.Jz(o,l,p,0,n),n[0];if(l.y>p.y)var m=p;else m=l,l=p;if((p=new c.Oc).L(m.y,l.y),!p.contains(0)||Math.abs(m.x-l.x)>=Math.PI)return NaN;if(m.x==l.x)return m.x;var v=new c.ha,_=new c.ha,M=new c.ha;c.kb.xd(n,o,m.x,m.y,l.x,l.y,_,v,null,d);var T=_.u,I=0,O=1,R=new c.h;for(R.N(m);T*(O-I)>1e-12*n;){var L=.5*(I+O);if(c.kb.qj(n,o,m.x,m.y,T*L,v.u,_,M,d),R.x=_.u,R.y=M.u,p.L(m.y,R.y),R.y==0)break;if(p.contains(0))O=L;else{if(p.L(l.y,R.y),!p.contains(0))return NaN;I=L}}return R.x},a.QI=function(n,o,l,p){if(!n.ef.Xc())return!1;var d=new c.de(o.description);if(d.Gd(o,0,-1),p=c.Gx.local().W(d,n,p),d=o.I(),l.Pa(),d!=p.I())return!1;var m=new c.l;o.A(m);var v=new c.l;if(p.A(v),m=m.S(),v=v.S(),m!=0&&v!=0){if(v/=m,n=n.Zf.ih().S()/n.ef.ih().S(),1e-10<Math.abs(v/n-1))return!1}else if(m!=0||v!=0)return!1;for(l.add(o,!1),o=new c.h,n=0;n<d;n++)p.D(n,o),l.Db(n,o);return!0},a.kN=function(n,o){return(n%=360*o)>=180*o&&(n-=360*o),n},a.NI=function(n,o,l,p){if(l==C.Clip){var d=o.ol();d.K()==197?(l=new c.l,d.A(l),d=c.ta.py(o,l),n=c.ti.clip(n,l,d,5e4*o.rm(),p)):c.fj.local().W(1,d,n,o,p)||(n=c.Xk.local().W(n,d,o,p))==d&&(n=c.Wk.ig(n))}else o.Xc()&&(p=new c.l,n.yc(p),o.Le().contains(p)||(a.Lt(n,o.Le(),o.Yd(0),!0),l==C.PannableFold&&(n=a.nj(n,o)),n=a.Gn(n,o,0,!0,1e5*o.rm(),null)));return n},a.RD=function(n,o,l){var p=o.Yr();if(p==null)return n;var d=(o=o.tc()).Le().S(),m=new c.l;n.yc(m);var v=new c.Oc;m.en(v),m=p.Ha(),p=null;for(var _=new c.Ed;m.ab();)for(;m.Ia();){var M=m.ia(),T=M.Vg(0,0),I=new c.Oc;for(I.L(T.pa,T.wa),T=0;I.wa>v.pa;)I.move(-d),--T;for(;I.pa<=v.wa;){if(I.isIntersecting(v)){p==null&&(p=new c.Ua);var O=c.zb.XO(M.ac(),M.xc());T!=0&&(_.gg(T*d,0),O.Pc(_)),p.oc(O,!0)}I.move(d),++T}}return p!=null?(o=c.ta.aO(o,p),o=c.ta.Gr(o),c.bu.fP(n,p,o,l)):n},a.ZN=function(n,o,l,p,d){return n>=l&&o<=p?0:a.nE(.5*(o+n),l,p,d)},a.nE=function(n,o,l,p){return c.mc.round((.5*(l+o)-n)/p)*p},a.PQ=function(n,o,l,p,d,m,v,_){var M=a.fv(p,d),T=M.S(),I=T/360,O=a.jE*I,R=n.vb(0),L=o.Xc(),G=L?T/o.Le().S():0;o=n.Ja();for(var q=0,D=l.ea();q<D;++q){var H=L,ee=new c.Ua(l.description);ee.addPath(l,q,!0);var te=l.ec(q);v!=0&&(te=a.JD(te,ee,M.H-_,M.H,v))&&(H=!1);var Z=-1;te=ee.I();var ce=!1;H&&(Z=n.Ca(q),ce=n.ec(q));var ye=ee.vb(0),Me=0,xe=ye.read(0),be=0,Ce=3*p.Yd(0),Ze=!1,Qe=new c.h;Qe.Sc();var _t=new c.h;_t.Sc();for(var xt=!1,Ei=1;Ei<te;++Ei){var Bt=c.h.construct(ye.Bg(2*Ei),ye.Bg(2*Ei+1)),Ue=Bt.x,Nt=Ue+Me,dt=Nt-xe;if(Bt.x=Nt,Math.abs(dt)>O){if(H){var hi=Z+Ei-1,Qt=Z;(!ce||Ei+1<te)&&(Qt+=Ei),hi=R.read(2*hi),Qt=(R.read(2*Qt)-hi)*G,Math.abs(dt-Qt)>1*I&&(L=!1)}H||(Nt=Ue+(Me-=c.mc.Dn(T,Nt-xe)),++be,xt=Me!=0,Bt.x=Nt)}else Ze||c.ta.uG(Qe,_t,Bt,Ce)&&(Ze=!0);xt&&ye.write(2*Ei,Nt),xe=Nt,Qe.N(_t),_t.N(Bt)}be!=0&&ee.Qc(1993),H=ee.Oa(0),te=ee.Oa(te-1),c.h.ub(H,te),ee=a.qQ(ee,p,isNaN(d)?0:d,m),o.add(ee,!1)}return n=p.Yd(0),l=M.S()/180,a.Lt(o,M,.1*n,!1),c.ti.clip(o,M,n,l,m)},a.qQ=function(n,o,l,p){return a.Gn(n,o,l,!0,0,p)},a.HS=function(n,o,l,p){var d=n.K();if(d==1736)for(o=o!=null?o.Yd(0):0,d=0;d<p;d++)c.jd.Zd(n,l[d],o)!=1&&l[d].Sc();else{if(d!=197)throw c.i.O();for(d=0;d<p;d++)n.YO(l[d])||l[d].Sc()}},a.bl=function(n,o,l,p){if(32>l)for(var d=new c.Ta,m=0;m<l;m++)d.Db(o[m]),n.bl(d,p).D(o[m]);else{var v=new c.de;for(v.se(3),v.BD(o,l),d=v.vb(3),m=0;m<l;m++)d.write(m,m);for(m=n.bl(v,p),n=m.vb(0),d=m.vb(3),p=c.h.construct(NaN,NaN),v=0;v<l;v++)o[v]=p;for(l=m.I(),m=0;m<l;m++)p=d.read(m),n.uc(2*m,o[p])}},a.al=function(n,o,l,p){if(32>l)for(var d=new c.Ta,m=0;m<l;m++)d.Db(o[m]),n.al(d,p).D(o[m]);else{var v=new c.de;for(v.se(3),v.BD(o,l),d=v.vb(3),m=0;m<l;m++)d.write(m,m);for(m=n.al(v,p),n=m.vb(0),d=m.vb(3),p=c.h.construct(NaN,NaN),v=0;v<l;v++)o[v]=p;for(l=m.I(),m=0;m<l;m++)p=d.read(m),n.uc(2*m,o[p])}},a.jE=210,a}()}(W||(W={})),function(c){var C;(C=c.OL||(c.OL={}))[C.rightSide=1]="rightSide";var b=function(){function u(a,n,o){this.Ds=new c.h,a===void 0?this.Jo=-1:(this.Ds.N(a),this.Jo=n,this.La=o,this.pw=0)}return u.prototype.QJ=function(a){this.pw=a?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Jo},u.prototype.az=function(){if(this.B())throw c.i.ga("invalid call");return new c.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw c.i.ga("invalid call");return this.Jo},u.prototype.cz=function(){if(this.B())throw c.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(a,n,o,l){this.Ds.x=a,this.Ds.y=n,this.Jo=o,this.La=l},u}();c.bm=b}(W||(W={})),function(c){var C=function(){function u(){}return u.prototype.Vo=function(a,n){this.vh.resize(0),this.Ki.length=0,this.uk=-1,a.yc(this.Fk),this.Fk.X(n,n),this.Fk.isIntersecting(this.Gb.Da)?((this.xs=c.ba.zd(a.K()))?(this.NH=a.ac(),this.MH=a.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(a,n){this.vh.resize(0),this.Ki.length=0,this.uk=-1,this.Fk.L(a),this.Fk.X(n,n),this.ra=NaN,this.Fk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.uk=this.Ss;var a=null,n=null,o=null,l=null;this.xs&&(a=new c.h,n=new c.h,o=new c.l);for(var p=!1;!p;){for(;this.uk!=-1;){var d=this.Gb.Xy(this.Gb.hv(this.uk));if(d.isIntersecting(this.Fk)){if(!this.xs){p=!0;break}if(a.N(this.NH),n.N(this.MH),o.L(d),o.X(this.ra,this.ra),0<o.uy(a,n)){p=!0;break}}this.uk=this.Gb.pv(this.uk)}if(this.uk==-1){d=this.vh.Gc();var m=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new c.l,l[1]=new c.l,l[2]=new c.l,l[3]=new c.l),b.yJ(m,l),this.vh.Jf(),--this.Ki.length,m=0;4>m;m++){var v=this.Gb.Np(d,m);if(v!=-1&&0<this.Gb.PR(v)&&l[m].isIntersecting(this.Fk))if(this.xs){if(a.N(this.NH),n.N(this.MH),o.L(l[m]),o.X(this.ra,this.ra),0<o.uy(a,n)){var _=new c.l;_.L(l[m]),this.vh.add(v),this.Ki.push(_)}}else(_=new c.l).L(l[m]),this.vh.add(v),this.Ki.push(_)}if(this.vh.size==0)return-1;this.uk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.uk),this.uk},u.WO=function(a,n,o){var l=new u;return l.Gb=a,l.Fk=new c.l,l.vh=new c.ja(0),l.Ki=[],l.Vo(n,o),l},u.VO=function(a,n,o){var l=new u;return l.Gb=a,l.Fk=new c.l,l.vh=new c.ja(0),l.Ki=[],l.Zi(n,o),l},u.UO=function(a){var n=new u;return n.Gb=a,n.Fk=new c.l,n.vh=new c.ja(0),n.Ki=[],n},u}();c.yY=C;var b=function(){function u(a,n){this.jf=new c.ad(11),this.ai=new c.ad(5),this.ys=[],this.iw=new c.ja(0),this.Da=new c.l,this.Ok(a,n)}return u.prototype.reset=function(a,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Ok(a,n)},u.prototype.xj=function(a,n){return this.Bv(a,n,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(a,n,o){o=o==-1?this.kf:this.QF(o);var l=this.da(o),p=this.iR(o);return this.Bv(a,n,l,p,o,!1,-1)},u.prototype.ka=function(a){return this.dR(a)},u.prototype.AF=function(a){return this.Xy(this.hv(a))},u.prototype.da=function(a){return this.lv(a)},u.prototype.iR=function(a){var n=new c.l;n.L(this.Da);var o=this.lv(a);a=this.KF(a);for(var l=0;l<2*o;l+=2){var p=c.P.truncate(3&a>>l);p==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):p==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(p==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},u.prototype.PR=function(a){return this.vz(a)},u.prototype.oR=function(a,n){return C.WO(this,a,n)},u.prototype.GF=function(a,n){return C.VO(this,a,n)},u.prototype.getIterator=function(){return C.UO(this)},u.prototype.Ok=function(a,n){if(0>n||32<2*n)throw c.i.O("invalid height");this.tT=n,this.Da.L(a),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.HJ(this.kf,0),this.EJ(this.kf,0)},u.prototype.Bv=function(a,n,o,l,p,d,m){if(!l.contains(n))return o==0?-1:this.Bv(a,n,0,this.Da,this.kf,d,m);if(!d)for(var v=p;v!=-1;v=this.CR(v))this.jx(v,this.vz(v)+1);(v=new c.l).L(l),l=p;var _=[];for(_[0]=new c.l,_[1]=new c.l,_[2]=new c.l,_[3]=new c.l;o<this.tT&&this.cO(l);o++){u.yJ(v,_);for(var M=!1,T=0;4>T;T++)if(_[T].contains(n)){M=!0;var I=this.Np(l,T);I==-1&&(I=this.lP(l,T)),this.jx(I,this.vz(I)+1),l=I,v.L(_[T]);break}if(!M)break}return this.lS(a,n,o,v,l,d,p,m)},u.prototype.lS=function(a,n,o,l,p,d,m,v){var _=this.HF(p);if(d){if(p==m)return v;this.MP(v),d=v}else d=this.nP(),this.HB(d,a),this.BW(this.hv(d),n);return this.dX(d,p),_!=-1?(this.hx(d,_),this.ex(_,d)):this.AJ(p,d),this.MB(p,d),this.dx(p,this.nv(p)+1),this.bO(p)&&this.GQ(o,l,p),d},u.prototype.MP=function(a){var n=this.QF(a),o=this.HF(n),l=this.HR(a),p=this.pv(a);this.Wr(n)==a?(p!=-1?this.hx(p,-1):this.MB(n,-1),this.AJ(n,p)):o==a?(this.ex(l,-1),this.MB(n,l)):(this.hx(p,l),this.ex(l,p)),this.hx(a,-1),this.ex(a,-1),this.dx(n,this.nv(n)-1)},u.yJ=function(a,n){var o=.5*(a.v+a.C),l=.5*(a.G+a.H);n[0].L(o,l,a.C,a.H),n[1].L(a.v,l,o,a.H),n[2].L(a.v,a.G,o,l),n[3].L(o,a.G,a.C,l)},u.prototype.bO=function(a){return this.nv(a)==8&&!this.aG(a)},u.prototype.GQ=function(a,n,o){var l=this.Wr(o);do{var p=this.hv(l),d=this.ai.U(l,0);p=this.Xy(p),this.Bv(d,p,a,n,o,!0,l),l=d=this.pv(l)}while(l!=-1)},u.prototype.cO=function(a){return 8<=this.nv(a)||this.aG(a)},u.prototype.aG=function(a){return this.Np(a,0)!=-1||this.Np(a,1)!=-1||this.Np(a,2)!=-1||this.Np(a,3)!=-1},u.prototype.lP=function(a,n){var o=this.jf.De();return this.GW(a,n,o),this.jx(o,0),this.dx(o,0),this.Qk(o,a),this.EJ(o,this.lv(a)+1),this.HJ(o,n<<2*this.lv(a)|this.KF(a)),o},u.prototype.nP=function(){var a=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new c.l);return this.DW(a,n),a},u.prototype.Np=function(a,n){return this.jf.U(a,n)},u.prototype.GW=function(a,n,o){this.jf.T(a,n,o)},u.prototype.Wr=function(a){return this.jf.U(a,4)},u.prototype.AJ=function(a,n){this.jf.T(a,4,n)},u.prototype.HF=function(a){return this.jf.U(a,5)},u.prototype.MB=function(a,n){this.jf.T(a,5,n)},u.prototype.KF=function(a){return this.jf.U(a,6)},u.prototype.HJ=function(a,n){this.jf.T(a,6,n)},u.prototype.nv=function(a){return this.jf.U(a,7)},u.prototype.vz=function(a){return this.jf.U(a,8)},u.prototype.dx=function(a,n){this.jf.T(a,7,n)},u.prototype.jx=function(a,n){this.jf.T(a,8,n)},u.prototype.CR=function(a){return this.jf.U(a,9)},u.prototype.Qk=function(a,n){this.jf.T(a,9,n)},u.prototype.lv=function(a){return this.jf.U(a,10)},u.prototype.EJ=function(a,n){this.jf.T(a,10,n)},u.prototype.dR=function(a){return this.ai.U(a,0)},u.prototype.HB=function(a,n){this.ai.T(a,0,n)},u.prototype.HR=function(a){return this.ai.U(a,1)},u.prototype.pv=function(a){return this.ai.U(a,2)},u.prototype.hx=function(a,n){this.ai.T(a,1,n)},u.prototype.ex=function(a,n){this.ai.T(a,2,n)},u.prototype.QF=function(a){return this.ai.U(a,3)},u.prototype.dX=function(a,n){this.ai.T(a,3,n)},u.prototype.hv=function(a){return this.ai.U(a,4)},u.prototype.DW=function(a,n){this.ai.T(a,4,n)},u.prototype.Xy=function(a){return this.ys[a]},u.prototype.BW=function(a,n){this.ys[a].L(n)},u}();c.fu=b}(W||(W={})),function(c){var C;(C=c.VK||(c.VK={}))[C.Outside=0]="Outside",C[C.Inside=1]="Inside",C[C.Border=2]="Border";var b=function(){function a(n,o){this.HT=o,this.Xh=n}return a.prototype.ax=function(n,o){this.cH!=o&&n.flush(),this.cH=o},a.prototype.aF=function(n,o){for(var l=0;l<o;)for(var p=n[l++],d=n[l++],m=n[l++]*this.HT;p<d;p++)this.Xh[m+(p>>4)]|=this.cH<<2*(15&p)},a}();c.zY=b;var u=function(){function a(n,o,l){this.Xh=null,this.MA=this.Jk=this.XH=this.VH=this.Gs=this.kH=this.Hf=this.Wm=0,this.Ti=this.Kk=this.xl=null,this.Az(n,o,l)}return a.create=function(n,o,l){if(!a.tE(n))throw c.i.O();return a.qP(n,o,l)},a.hW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw c.i.ga("Internal Error")}return n},a.tE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},a.prototype.lQ=function(n,o){o=o.Ha();for(var l=new c.h,p=new c.h;o.ab();)for(;o.Ia();){var d=o.ia();if(d.K()!=322)throw c.i.ga("Internal Error");n.Gh(d.ac(),l),n.Gh(d.xc(),p),this.Ti.fy(l.x,l.y,p.x,p.y)}this.Ti.cJ(c.Ox.Bx)},a.prototype.mQ=function(){throw c.i.ga("Internal Error")},a.prototype.My=function(n,o){for(var l=1;4>l;l++)n.fy(o[l-1].x,o[l-1].y,o[l].x,o[l].y);n.fy(o[3].x,o[3].y,o[0].x,o[0].y),this.Ti.cJ(c.Ox.Bx)},a.prototype.lK=function(n,o,l){for(var p=[null,null,null,null],d=0;d<p.length;d++)p[d]=new c.h;o=o.Ha(),l=this.Kk.WX(l)+1.5,d=new c.h;for(var m=new c.h,v=new c.h,_=new c.h,M=new c.h,T=new c.l,I=new c.h;o.ab();){var O=!1,R=!0;for(I.na(0,0);o.Ia();){var L=o.ia();if(_.x=L.sa,_.y=L.oa,M.x=L.qa,M.y=L.ma,T.Pa(),T.$b(_.x,_.y),T.Mk(M.x,M.y),this.xl.BG(T)){this.Kk.Gh(M,M),R?(this.Kk.Gh(_,_),I.N(_),R=!1):_.N(I),d.vc(M,_);var G=.5>(L=d.length());L==0?d.na(1,0):(G||I.N(M),d.scale(l/L),m.na(-d.y,d.x),v.na(d.y,-d.x),_.sub(d),M.add(d),p[0].add(_,m),p[1].add(_,v),p[2].add(M,v),p[3].add(M,m),G?O=!0:this.My(n,p))}else O&&(this.My(n,p),O=!1),R=!0}O&&this.My(n,p)}},a.prototype.mC=function(n){return c.P.truncate(n*this.kH+this.VH)},a.prototype.nC=function(n){return c.P.truncate(n*this.Gs+this.XH)},a.qP=function(n,o,l){return new a(n,o,l)},a.prototype.Az=function(n,o,l){this.Hf=Math.max(c.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=c.P.truncate((2*this.Hf+31)/32),this.xl=new c.l,this.Jk=o,l=0;for(var p=this.Hf,d=this.Wm;8<=p;)l+=p*d,p=c.P.truncate(p/2),d=c.P.truncate((2*p+31)/32);this.Xh=c.P.lg(l,0),this.Ti=new c.Ox,l=new b(this.Xh,this.Wm,this),this.Ti.sX(this.Hf,this.Hf,l),n.A(this.xl),this.xl.X(o,o),p=new c.l;var m=o*(d=c.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(o*=d.da(),p.L(this.xl.tf(),Math.max(m,this.xl.S()),Math.max(o,this.xl.da())),this.MA=this.Jk,this.Kk=new c.Ed,this.Kk.iS(p,d),new c.Ed,n.K()){case 550:l.ax(this.Ti,2),this.mQ();break;case 1607:l.ax(this.Ti,2),this.lK(this.Ti,n,this.MA);break;case 1736:l.ax(this.Ti,1),this.lQ(this.Kk,n),l.ax(this.Ti,2),this.lK(this.Ti,n,this.MA)}this.kH=this.Kk.eb,this.Gs=this.Kk.bb,this.VH=this.Kk.Lb,this.XH=this.Kk.Qb,this.RN()},a.prototype.RN=function(){this.Ti.flush();for(var n=0,o=this.Hf*this.Wm,l=this.Hf,p=c.P.truncate(this.Hf/2),d=this.Wm,m=c.P.truncate((2*p+31)/32);8<l;){for(l=0;l<p;l++)for(var v=2*l,_=2*l+1,M=0;M<p;M++){var T=2*M,I=2*M+1,O=T>>4;T=2*(15&T);var R=I>>4;I=2*(15&I);var L=this.Xh[n+d*v+O]>>T&3;L|=this.Xh[n+d*v+R]>>I&3,L|=this.Xh[n+d*_+O]>>T&3,L|=this.Xh[n+d*_+R]>>I&3,this.Xh[o+m*l+(M>>4)]|=L<<2*(15&M)}l=p,d=m,n=o,p=c.P.truncate(l/2),m=c.P.truncate((2*p+31)/32),o=n+d*l}},a.prototype.To=function(n,o){return this.xl.contains(n,o)?(n=this.mC(n),o=this.nC(o),0>n||n>=this.Hf||0>o||o>=this.Hf||(o=this.Xh[this.Wm*o+(n>>4)]>>2*(15&n)&3)==0?0:o==1?1:2):0},a.prototype.So=function(n){if(!n.Fa(this.xl))return 0;var o=this.mC(n.v),l=this.mC(n.C),p=this.nC(n.G);if(n=this.nC(n.H),0>o&&(o=0),0>p&&(p=0),l>=this.Hf&&(l=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),o>l||p>n)return 0;for(var d=Math.max(l-o,1)*Math.max(n-p,1),m=0,v=this.Wm,_=this.Hf,M=0;;){if(32>d||16>_){for(d=p;d<=n;d++)for(var T=o;T<=l;T++)if(1<(M=this.Xh[m+v*d+(T>>4)]>>2*(15&T)&3))return 2;if(M==0)return 0;if(M==1)return 1}m+=v*_,_=c.P.truncate(_/2),v=c.P.truncate((2*_+31)/32),o=c.P.truncate(o/2),p=c.P.truncate(p/2),l=c.P.truncate(l/2),n=c.P.truncate(n/2),d=Math.max(l-o,1)*Math.max(n-p,1)}},a.prototype.KR=function(){return this.Hf*this.Wm},a}();c.Mx=u}(W||(W={})),function(c){var C;(C=c.PL||(c.PL={}))[C.contains=1]="contains",C[C.within=2]="within",C[C.equals=3]="equals",C[C.disjoint=4]="disjoint",C[C.touches=8]="touches",C[C.crosses=16]="crosses",C[C.overlaps=32]="overlaps",C[C.unknown=0]="unknown",C[C.intersects=1073741824]="intersects";var b=function(){function a(){}return a.construct=function(n,o,l,p,d,m,v,_){var M=new a;return M.rw=n,M.Om=o,M.Mj=l,M.Ui=p,M.vH=d,M.KY=m,M.LY=v,M.MY=_,M},a}();c.Xt=function(){function a(){}return a.wD=function(n,o,l){if(a.ry(n)){var p=c.ta.mj(o,n,!1);o=!1,c.Vk.wE(n)&&(o=o||n.nu(p,l)),(p=n.K())!=1736&&p!=1607||!c.Vk.uE(n)||l==0||(o=o||n.hj(l)),p!=1736&&p!=1607||!c.Vk.vE(n)||l==0||o||n.bM()}},a.ry=function(n){return c.Vk.wE(n)||c.Vk.uE(n)||c.Vk.vE(n)},a}();var u=function(){function a(){this.th=[]}return a.tB=function(n,o,l,p,d){var m=n.K(),v=o.K();if(m==197){if(v==197)return a.lW(n,o,l,p);if(v==33)return p==2?p=1:p==1&&(p=2),a.bJ(o,n,l,p)}else if(m==33){if(v==197)return a.bJ(n,o,l,p);if(v==33)return a.nW(n,o,l,p)}if(n.B()||o.B())return p==4;var _=new c.l;n.A(_);var M=new c.l;o.A(M);var T=new c.l;if(T.L(_),T.$b(M),l=c.ta.Xd(l,T,!1),a.ek(_,M,l))return p==4;switch(_=!1,c.Wk.zd(m)&&((m=new c.Ua(n.description)).oc(n,!0),n=m,m=1607),c.Wk.zd(v)&&((v=new c.Ua(o.description)).oc(o,!0),o=v,v=1607),m!=197&&v!=197?(n.Eb()<o.Eb()||m==33&&v==550)&&(p==2?p=1:p==1&&(p=2)):m!=1736&&v!=197&&(p==2?p=1:p==1&&(p=2)),m){case 1736:switch(v){case 1736:_=a.st(n,o,l,p,d);break;case 1607:_=a.bn(n,o,l,p,d);break;case 33:_=a.rt(n,o,l,p);break;case 550:_=a.qt(n,o,l,p,d);break;case 197:_=a.AI(n,o,l,p,d)}break;case 1607:switch(v){case 1736:_=a.bn(o,n,l,p,d);break;case 1607:_=a.aB(n,o,l,p,d);break;case 33:_=a.ut(n,o,l,p,d);break;case 550:_=a.tt(n,o,l,p,d);break;case 197:_=a.GI(n,o,l,p)}break;case 33:switch(v){case 1736:_=a.rt(o,n,l,p);break;case 1607:_=a.ut(o,n,l,p,d);break;case 550:_=a.mt(o,n,l,p)}break;case 550:switch(v){case 1736:_=a.qt(o,n,l,p,d);break;case 1607:_=a.tt(o,n,l,p,d);break;case 550:_=a.TA(n,o,l,p,d);break;case 33:_=a.mt(n,o,l,p);break;case 197:_=a.bI(n,o,l,p)}break;case 197:switch(v){case 1736:_=a.AI(o,n,l,p,d);break;case 1607:_=a.GI(o,n,l,p);break;case 550:_=a.bI(o,n,l,p)}}return _},a.lW=function(n,o,l,p){if(n.B()||o.B())return p==4;var d=new c.l,m=new c.l,v=new c.l;switch(n.A(d),o.A(m),v.L(d),v.$b(m),n=c.ta.Xd(l,v,!1),p){case 4:return a.ek(d,m,n);case 2:return a.dF(m,d,n);case 1:return a.dF(d,m,n);case 3:return a.fk(d,m,n);case 8:return a.XP(d,m,n);case 32:return a.WP(d,m,n);case 16:return a.VP(d,m,n)}return!1},a.bJ=function(n,o,l,p){if(n.B()||o.B())return p==4;n=n.D();var d=new c.l,m=new c.l;switch(o.A(d),m.L(n),m.$b(d),o=c.ta.Xd(l,m,!1),p){case 4:return a.Tw(n,d,o);case 2:return a.ZA(n,d,o);case 1:return a.JU(n,d,o);case 3:return a.pI(n,d,o);case 8:return a.YA(n,d,o)}return!1},a.nW=function(n,o,l,p){if(n.B()||o.B())return p==4;n=n.D(),o=o.D();var d=new c.l;switch(d.L(n),d.$b(o),l=c.ta.Xd(l,d,!1),p){case 4:return a.KU(n,o,l);case 2:return a.oI(o,n,l);case 1:return a.oI(n,o,l);case 3:return a.qI(n,o,l)}return!1},a.st=function(n,o,l,p,d){switch(p){case 4:return a.cV(n,o,l);case 2:return a.Uw(o,n,l,d);case 1:return a.Uw(n,o,l,d);case 3:return a.fV(n,o,l);case 8:return a.nV(n,o,l);case 32:return a.iV(n,o,l,d)}return!1},a.bn=function(n,o,l,p,d){switch(p){case 4:return a.dV(n,o,l);case 1:return a.$A(n,o,l,d);case 8:return a.oV(n,o,l,d);case 16:return a.ZU(n,o,l)}return!1},a.rt=function(n,o,l,p){switch(p){case 4:return a.bV(n,o,l);case 1:return a.WU(n,o,l);case 8:return a.mV(n,o,l)}return!1},a.qt=function(n,o,l,p){switch(p){case 4:return a.aV(n,o,l);case 1:return a.VU(n,o,l);case 8:return a.lV(n,o,l);case 16:return a.YU(n,o,l)}return!1},a.AI=function(n,o,l,p,d){if(a.$U(n,o,l))return p==4;if(p==4)return!1;switch(p){case 2:return a.pV(n,o,l);case 1:return a.UU(n,o,l);case 3:return a.eV(n,o,l);case 8:return a.kV(n,o,l,d);case 32:return a.hV(n,o,l,d);case 16:return a.XU(n,o,l,d)}return!1},a.aB=function(n,o,l,p){switch(p){case 4:return a.yV(n,o,l);case 2:return a.EI(o,n,l);case 1:return a.EI(n,o,l);case 3:return a.AV(n,o,l);case 8:return a.HI(n,o,l);case 32:return a.EV(n,o,l);case 16:return a.FI(n,o,l)}return!1},a.ut=function(n,o,l,p){switch(p){case 4:return a.xV(n,o,l);case 1:return a.sV(n,o,l);case 8:return a.IV(n,o,l)}return!1},a.tt=function(n,o,l,p){switch(p){case 4:return a.wV(n,o,l);case 1:return a.rV(n,o,l);case 8:return a.HV(n,o,l);case 16:return a.uV(n,o,l)}return!1},a.GI=function(n,o,l,p){if(a.vV(n,o,l))return p==4;if(p==4)return!1;switch(p){case 2:return a.JV(n,o,l);case 1:return a.qV(n,o,l);case 3:return a.zV(n,o,l);case 8:return a.GV(n,o,l);case 32:return a.DV(n,o,l);case 16:return a.tV(n,o,l)}return!1},a.TA=function(n,o,l,p){switch(p){case 4:return a.ZT(n,o,l);case 2:return a.ZH(o,n,l);case 1:return a.ZH(n,o,l);case 3:return a.aU(n,o,l);case 32:return a.gU(n,o,l)}return!1},a.mt=function(n,o,l,p){switch(p){case 4:return a.$H(n,o,l);case 2:return a.kU(n,o,l);case 1:return a.WT(n,o,l);case 3:return a.Pw(n,o,l)}return!1},a.bI=function(n,o,l,p){switch(p){case 4:return a.YT(n,o,l);case 2:return a.jU(n,o,l);case 1:return a.VT(n,o,l);case 3:return a.$T(n,o,l);case 8:return a.iU(n,o,l);case 16:return a.XT(n,o,l)}return!1},a.fV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.fk(p,d,l)&&(p=a.qc(n,o,!1))!=4&&p!=1&&p!=2&&(!!a.YH(n,o,l)||(p=n.Rb(),d=o.Rb(),!(Math.abs(p-d)>4*Math.max(n.I(),o.I())*l)&&a.Rz(n,o,l,!0)))},a.cV=function(n,o,l){var p=a.qc(n,o,!0);return p==4||p!=1&&p!=2&&p!=1073741824&&a.yI(n,o,l)},a.nV=function(n,o,l){var p=a.qc(n,o,!1);return p!=4&&p!=1&&p!=2&&a.CI(n,o,l,null)},a.iV=function(n,o,l,p){var d=a.qc(n,o,!1);return d!=4&&d!=1&&d!=2&&a.zI(n,o,l,p)},a.Uw=function(n,o,l,p){var d=new c.l,m=new c.l;return n.A(d),o.A(m),!!a.Ac(d,m,l)&&(d=a.qc(n,o,!1))!=4&&d!=2&&(d==1||a.vI(n,o,l,p))},a.dV=function(n,o,l){var p=a.qc(n,o,!0);return p==4||p!=1&&p!=1073741824&&a.yI(n,o,l)},a.oV=function(n,o,l,p){var d=a.qc(n,o,!1);return d!=4&&d!=1&&a.DI(n,o,l,p)},a.ZU=function(n,o,l){var p=a.qc(n,o,!1);return p!=4&&p!=1&&a.xI(n,o,l,null)},a.$A=function(n,o,l,p){var d=new c.l,m=new c.l;return n.A(d),o.A(m),!!a.Ac(d,m,l)&&(d=a.qc(n,o,!1))!=4&&(d==1||a.wI(n,o,l,p))},a.bV=function(n,o,l){return c.jd.EG(n,o,l)==0},a.mV=function(n,o,l){return o=o.D(),a.BI(n,o,l)},a.WU=function(n,o,l){return o=o.D(),a.uI(n,o,l)},a.aV=function(n,o,l){var p=a.qc(n,o,!1);if(p==4)return!0;if(p==1)return!1;p=new c.l,n.A(p),p.X(l,l);for(var d=new c.h,m=0;m<o.I();m++)if(o.D(m,d),p.contains(d)){var v=c.jd.Zd(n,d,l);if(v==1||v==2)return!1}return!0},a.lV=function(n,o,l){var p=this.qc(n,o,!1);if(p==4||p==1)return!1;p=new c.l,n.A(p),p.X(l,l);for(var d=!1,m=n,v=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(p.contains(M)){if((M=c.jd.Zd(m,M,l))==2)d=!0;else if(M==1)return!1}v||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?m=n:(m=new c.Ea,n.copyTo(m),m.hj(1)),v=!0)}return!!d},a.YU=function(n,o,l){var p=this.qc(n,o,!1);if(p==4||p==1)return!1;var d=new c.l;p=new c.l;var m=new c.l;n.A(d),o.A(m),p.L(d),p.X(l,l),m=d=!1;for(var v=n,_=!1,M=0;M<o.I();M++){var T=o.Oa(M);if(p.contains(T)?(T=c.jd.Zd(v,T,l))==0?m=!0:T==1&&(d=!0):m=!0,d&&m)return!0;_||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?v=n:(v=new c.Ea,n.copyTo(v),v.hj(1)),_=!0)}return!1},a.VU=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!this.Ac(p,d,l)||(d=this.qc(n,o,!1))==4)return!1;if(d==1)return!0;d=!1;for(var m=n,v=!1,_=0;_<o.I();_++){var M=o.Oa(_);if(!p.contains(M))return!1;if((M=c.jd.Zd(m,M,l))==1)d=!0;else if(M==0)return!1;v||(!c.Fg.Ol(n,o.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?m=n:(m=new c.Ea,n.copyTo(m),m.hj(1)),v=!0)}return d},a.eV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.fk(p,d,l)&&((p=new c.Ea).bd(o,!1),a.Rz(n,p,l,!0))},a.$U=function(n,o,l){var p=a.qc(n,o,!1);if(p==4)return!0;if(p==1||p==2)return!1;var d=new c.l;if(p=new c.l,n.A(d),o.A(p),a.Ac(p,d,l)||(d=new c.h,p.fn(d),(o=c.jd.Zd(n,d,l))!=0)||(p.UI(d),(o=c.jd.Zd(n,d,l))!=0)||(p.gn(d),(o=c.jd.Zd(n,d,l))!=0)||(p.XI(d),(o=c.jd.Zd(n,d,l))!=0))return!1;o=n.vb(0),(d=new c.l).L(p),d.X(l,l);for(var m=0,v=n.I();m<v;m++){var _=o.read(2*m),M=o.read(2*m+1);if(d.contains(_,M))return!1}return!a.MG(n,p,l)},a.kV=function(n,o,l,p){var d=a.qc(n,o,!1);if(d==4||d==1||d==2)return!1;d=new c.l;var m=new c.l;return n.A(d),o.A(m),!a.Ac(m,d,l)&&(m.S()<=l&&m.da()<=l?(o=o.Kp(),a.BI(n,o,l)):m.S()<=l||m.da()<=l?(d=new c.Ua,m=new c.Ta,o.If(0,m),d.nf(m),o.If(2,m),d.lineTo(m),a.DI(n,d,l,p)):((d=new c.Ea).bd(o,!1),a.CI(n,d,l,p)))},a.hV=function(n,o,l,p){var d=a.qc(n,o,!1);if(d==4||d==1||d==2)return!1;d=new c.l;var m=new c.l;return n.A(d),o.A(m),!(a.Ac(m,d,l)||m.S()<=l||m.da()<=l)&&((d=new c.Ea).bd(o,!1),a.zI(n,d,l,p))},a.pV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),a.Ac(d,p,l)},a.UU=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.Ac(p,d,l)&&(p=a.qc(n,o,!1))!=4&&p!=2&&(p==1||(d.S()<=l&&d.da()<=l?(o=o.Kp(),a.uI(n,o,l)):d.S()<=l||d.da()<=l?(d=new c.Ua,p=new c.Ta,o.If(0,p),d.nf(p),o.If(2,p),d.lineTo(p),a.wI(n,d,l,null)):((d=new c.Ea).bd(o,!1),a.vI(n,d,l,null))))},a.XU=function(n,o,l,p){var d=new c.l,m=new c.l;return n.A(d),o.A(m),!(a.Ac(m,d,l)||m.da()>l&&m.S()>l||m.da()<=l&&m.S()<=l)&&(d=new c.Ua,m=new c.Ta,o.If(0,m),d.nf(m),o.If(2,m),d.lineTo(m),a.xI(n,d,l,p))},a.AV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.fk(p,d,l)||a.qc(n,o,!1)==4)&&(!!a.YH(n,o,l)||a.Rz(n,o,l,!1))},a.yV=function(n,o,l){return this.qc(n,o,!1)==4||!!new c.am(n,o,l,!0).next()&&!this.NG(n,o,l)},a.HI=function(n,o,l){if(a.qc(n,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(n,o,l,p)!=0)return!1;for(var d=new c.de,m=0;m<p.size;m+=2){var v=p.read(m),_=p.read(m+1);d.Du(v,_)}return n=n.mg(),o=o.mg(),n.Gd(o,0,o.I()),a.Ow(n,d,l)},a.FI=function(n,o,l){if(a.qc(n,o,!1)==4)return!1;var p=new c.ce(0);if(a.Sz(n,o,l,p)!=0)return!1;for(var d=new c.de,m=0;m<p.size;m+=2){var v=p.read(m),_=p.read(m+1);d.Du(v,_)}return n=n.mg(),o=o.mg(),n.Gd(o,0,o.I()),!a.Ow(n,d,l)},a.EV=function(n,o,l){return a.qc(n,o,!1)!=4&&a.PG(n,o,l)},a.EI=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||a.qc(n,o,!1)==4)&&a.Am(o,n,l,!1)},a.xV=function(n,o,l){return a.qc(n,o,!1)==4||(o=o.D(),!a.Tz(n,o,l))},a.IV=function(n,o,l){return a.qc(n,o,!1)!=4&&(o=o.D(),a.Uz(n,o,l))},a.sV=function(n,o,l){return a.qc(n,o,!1)!=4&&(o=o.D(),a.LG(n,o,l))},a.wV=function(n,o,l){return a.qc(n,o,!1)==4||!a.OG(n,o,l,!1)},a.HV=function(n,o,l){if(this.qc(n,o,!1)==4)return!1;var p=n.Ha(),d=new c.l,m=new c.l,v=new c.l;n.A(d),o.A(m),d.X(l,l),m.X(l,l),v.L(d),v.Fa(m),d=null;var _=n.Cb;if(_!=null){var M=_.Gb;d=_.Ao,M==null&&(M=_=c.ta.lj(n,v))}else M=_=c.ta.lj(n,v);var T=M.getIterator(),I=null;d!=null&&(I=d.getIterator());var O=new c.h,R=new c.h,L=!1,G=l*l;for(d=new c.rn(o.I()),_=0;_<o.I();_++)d.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),v.contains(O)){if(m.L(O.x,O.y,O.x,O.y),I!=null&&(I.Zi(m,l),I.next()==-1))continue;T.Zi(m,l);for(var q=T.next();q!=-1;q=T.next())if(p.Wb(M.ka(q)),(q=p.ia()).ic(q.fe(O,!1),R),c.h.zc(O,R)<=G){d.write(_,1),L=!0;break}}if(!L)return!1;for(n=n.mg(),p=new c.de,m=new c.h,_=0;_<o.I();_++)d.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return this.Ow(n,p,l)},a.uV=function(n,o,l){if(this.qc(n,o,!1)==4)return!1;var p=n.Ha(),d=new c.l,m=new c.l,v=new c.l;n.A(d),o.A(m),d.X(l,l),m.X(l,l),v.L(d),v.Fa(m),d=null;var _=n.Cb;if(_!=null){var M=_.Gb;d=_.Ao,M==null&&(M=_=c.ta.lj(n,v))}else M=_=c.ta.lj(n,v);var T=M.getIterator(),I=null;d!=null&&(I=d.getIterator());var O=new c.h,R=new c.h,L=!1,G=!1,q=l*l;for(d=new c.rn(o.I()),_=0;_<o.I();_++)d.write(_,0);for(_=0;_<o.I();_++)if(o.D(_,O),v.contains(O)){if(m.L(O.x,O.y,O.x,O.y),I!=null&&(I.Zi(m,l),I.next()==-1)){G=!0;continue}T.Zi(m,l);for(var D=!1,H=T.next();H!=-1;H=T.next())if(p.Wb(M.ka(H)),(H=p.ia()).ic(H.fe(O,!1),R),c.h.zc(O,R)<=q){d.write(_,1),D=L=!0;break}D||(G=!0)}else G=!0;if(!L||!G)return!1;for(n=n.mg(),p=new c.de,m=new c.h,_=0;_<o.I();_++)d.read(_)!=0&&(o.D(_,m),p.Du(m.x,m.y));return!this.Ow(n,p,l)},a.rV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||a.qc(n,o,!1)==4||!a.OG(n,o,l,!0))&&(n=n.mg(),!a.aI(n,o,l))},a.zV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(d.da()>l&&d.S()>l)&&a.fk(p,d,l)},a.vV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!a.Ac(d,p,l)&&!a.MG(n,d,l)},a.GV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),d.da()<=l&&d.S()<=l)return d=o.Kp(),a.Uz(n,d,l);if(d.da()<=l||d.S()<=l)return d=new c.Ua,p=new c.Ta,o.If(0,p),d.nf(p),o.If(2,p),d.lineTo(p),a.HI(n,d,l);n=n.Ha(),o=new c.l,p=new c.l,o.L(d),p.L(d),o.X(-l,-l),p.X(l,l),d=!1;for(var m=new c.l,v=new c.l;n.ab();)for(;n.Ia();){if(n.ia().A(m),v.L(o),v.Fa(m),!v.B()&&(v.da()>l||v.S()>l))return!1;v.L(p),v.Fa(m),v.B()||(d=!0)}return d},a.DV=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(a.Ac(p,d,l)||a.Ac(d,p,l)||a.Ac(d,p,l)||d.da()>l&&d.S()>l||d.da()<=l&&d.S()<=l)&&(p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.PG(n,p,l))},a.JV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return a.Ac(d,p,l);n=n.Ha(),(o=new c.l).L(d),o.X(-l,-l),d=!1,p=new c.l;for(var m=new c.l;n.ab();)for(;n.Ia();)n.ia().A(p),o.jm(p)?d=!0:(m.L(o),m.Fa(p),!m.B()&&(m.da()>l||m.S()>l)&&(d=!0));return d},a.qV=function(n,o,l){var p=new c.l,d=new c.l;return o.A(d),n.A(p),!(!a.Ac(p,d,l)||d.da()>l&&d.S()>l)&&(d.da()<=l&&d.S()<=l?(o=o.Kp(),a.LG(n,o,l)):(p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.Am(p,n,l,!1)))},a.tV=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return p=new c.Ua,d=new c.Ta,o.If(0,d),p.nf(d),o.If(2,d),p.lineTo(d),a.FI(n,p,l);n=n.Ha(),o=new c.l,(p=new c.l).L(d),o.L(d),p.X(-l,-l),o.X(l,l);for(var m=d=!1,v=new c.l,_=new c.l;n.ab();)for(;n.Ia();)if(n.ia().A(v),m||o.contains(v)||(m=!0),d||(_.L(p),_.Fa(v),!_.B()&&(_.da()>l||_.S()>l)&&(d=!0)),d&&m)return!0;return!1},a.aU=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.fk(p,d,l)&&(!!a.bU(n,o,l)||a.SA(n,o,l,!1,!0,!1))},a.ZT=function(n,o,l){return!a.aI(n,o,l)},a.gU=function(n,o,l){return a.SA(n,o,l,!1,!1,!0)},a.ZH=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!!a.Ac(p,d,l)&&a.SA(o,n,l,!0,!1,!1)},a.Ow=function(n,o,l){l*=l;for(var p=new c.h,d=new c.h,m=0;m<o.I();m++){o.D(m,d);for(var v=!1,_=0;_<n.I();_++)if(n.D(_,p),c.h.zc(p,d)<=l){v=!0;break}if(!v)return!1}return!0},a.Pw=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),a.fk(p,d,l)},a.$H=function(n,o,l){return o=o.D(),a.lt(n,o,l)},a.kU=function(n,o,l){return a.Pw(n,o,l)},a.WT=function(n,o,l){return!a.$H(n,o,l)},a.$T=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(d.da()>l||d.S()>l)&&a.fk(p,d,l)},a.YT=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l))return!1;for((o=new c.l).L(d),o.X(l,l),l=new c.h,d=0;d<n.I();d++)if(n.D(d,l),o.contains(l))return!1;return!0},a.iU=function(n,o,l){var p=new c.l,d=new c.l,m=new c.l;if(o.A(p),p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l){o=new c.h;var v=!1;d.L(p),m.L(p),d.X(l,l),p.da()>l?m.X(0,-l):m.X(-l,0);for(var _=0;_<n.I();_++)if(n.D(_,o),d.contains(o)){if(p.da()>l){if(o.y>m.G&&o.y<m.H)return!1}else if(o.x>m.v&&o.x<m.C)return!1;v=!0}return v}for(d.L(p),m.L(p),d.X(l,l),m.X(-l,-l),o=new c.h,v=!1,_=0;_<n.I();_++)if(n.D(_,o),d.contains(o)){if(m.jm(o))return!1;v=!0}return v},a.jU=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),!a.Ac(d,p,l))return!1;if(d.da()<=l&&d.S()<=l)return a.fk(p,d,l);if(d.da()<=l||d.S()<=l){o=!1,p=new c.l;var m=new c.l;p.L(d),m.L(d),d.da()>l?p.X(0,-l):p.X(-l,0),m.X(l,l);for(var v=new c.h,_=0;_<n.I();_++){if(n.D(_,v),!m.contains(v))return!1;d.da()>l?v.y>p.G&&v.y<p.H&&(o=!0):v.x>p.v&&v.x<p.C&&(o=!0)}return o}for(o=!1,p=new c.l,m=new c.l,p.L(d),m.L(d),p.X(-l,-l),m.X(l,l),v=new c.h,_=0;_<n.I();_++){if(n.D(_,v),!m.contains(v))return!1;p.jm(v)&&(o=!0)}return o},a.VT=function(n,o,l){var p=new c.l,d=new c.l;return n.A(p),o.A(d),!(!a.Ac(p,d,l)||d.da()>l||d.S()>l)&&(o=o.Kp(),!a.lt(n,o,l))},a.XT=function(n,o,l){var p=new c.l,d=new c.l;if(n.A(p),o.A(d),a.Ac(d,p,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l){o=new c.l,p=new c.l,o.L(d),d.da()>l?o.X(0,-l):o.X(-l,0),p.L(d),p.X(l,l);for(var m=new c.h,v=!1,_=!1,M=0;M<n.I();M++)if(n.D(M,m),v||(d.da()>l?m.y>o.G&&m.y<o.H&&(v=!0):m.x>o.v&&m.x<o.C&&(v=!0)),_||p.contains(m)||(_=!0),v&&_)return!0;return!1}for(o=new c.l,p=new c.l,o.L(d),o.X(-l,-l),p.L(d),p.X(l,l),m=new c.h,_=v=!1,M=0;M<n.I();M++)if(n.D(M,m),!v&&o.jm(m)&&(v=!0),_||p.contains(m)||(_=!0),v&&_)return!0;return!1},a.qI=function(n,o,l){return c.h.zc(n,o)<=l*l},a.KU=function(n,o,l){return c.h.zc(n,o)>l*l},a.oI=function(n,o,l){return a.qI(n,o,l)},a.pI=function(n,o,l){var p=new c.l;return p.L(n),a.fk(p,o,l)},a.Tw=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),!p.contains(n)},a.YA=function(n,o,l){if(o.da()<=l&&o.S()<=l)return!1;var p=new c.l,d=new c.l;if(p.L(o),p.X(l,l),!p.contains(n))return!1;if(o.da()<=l||o.S()<=l){if(d.L(o),o.da()>l?d.X(0,-l):d.X(-l,0),o.da()>l){if(n.y>d.G&&n.y<d.H)return!1}else if(n.x>d.v&&n.x<d.C)return!1;return!0}return d.L(o),d.X(-l,-l),!d.jm(n)},a.ZA=function(n,o,l){if(o.da()<=l&&o.S()<=l)return!0;if(o.da()<=l||o.S()<=l){var p=new c.l;p.L(o),o.da()>l?p.X(0,-l):p.X(-l,0);var d=!1;return o.da()>l?n.y>p.G&&n.y<p.H&&(d=!0):n.x>p.v&&n.x<p.C&&(d=!0),d}return(p=new c.l).L(o),p.X(-l,-l),p.jm(n)},a.JU=function(n,o,l){return a.pI(n,o,l)},a.fk=function(n,o,l){return a.Ac(n,o,l)&&a.Ac(o,n,l)},a.ek=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),!n.isIntersecting(p)},a.XP=function(n,o,l){if(n.da()<=l&&n.S()<=l){var p=n.tf();return a.YA(p,o,l)}if(o.da()<=l&&o.S()<=l)return p=o.tf(),a.YA(p,n,l);if(n.da()>l&&n.S()>l&&(o.da()<=l||o.S()<=l)?p=o:(p=n,n=o),p.da()<=l||p.S()<=l){if(n.da()<=l||n.S()<=l){o=new c.zb;var d=new c.zb,m=[0,0],v=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),n.fn(_),d.Ec(_),n.gn(_),d.Rc(_),o.Fa(d,null,m,v,l),o.Fa(d,null,null,null,l)==1&&(m[0]==0||m[1]==1||v[0]==0||v[1]==1)}return o=new c.l,d=new c.l,o.L(n),o.X(-l,-l),d.L(o),d.Fa(p),!(!d.B()&&(d.da()>l||d.S()>l))}return n.X(l,l),(d=new c.l).L(p),d.Fa(n),!(d.B()||!d.B()&&d.da()>l&&d.S()>l)},a.WP=function(n,o,l){if(a.Ac(n,o,l)||a.Ac(o,n,l)||n.da()<=l&&n.S()<=l||o.da()<=l&&o.S()<=l)return!1;if(n.da()<=l||n.S()<=l){if(o.da()>l&&o.S()>l)return!1;var p=new c.zb,d=new c.zb,m=[0,0],v=[0,0],_=new c.h;return n.fn(_),p.Ec(_),n.gn(_),p.Rc(_),o.fn(_),d.Ec(_),o.gn(_),d.Rc(_),p.Fa(d,null,m,v,l),p.Fa(d,null,null,null,l)==2&&(0<m[0]||1>m[1])&&(0<v[0]||1>v[1])}return!(o.da()<=l||o.S()<=l)&&((p=new c.l).L(n),p.Fa(o),!(p.B()||p.da()<=l||p.S()<=l))},a.dF=function(n,o,l){if(!a.Ac(n,o,l))return!1;if(n.da()<=l&&n.S()<=l)return n=n.tf(),a.ZA(n,o,l);if(o.da()<=l&&o.S()<=l)return o=o.tf(),a.ZA(o,n,l);if(n.da()<=l||n.S()<=l)return a.Ac(n,o,l);if(o.da()<=l||o.S()<=l){var p=new c.l;return p.L(n),p.X(-l,-l),p.jm(o)?!0:((n=new c.l).L(p),n.Fa(o),!(n.B()||n.da()<=l&&n.S()<=l))}return a.Ac(n,o,l)},a.VP=function(n,o,l){if(a.Ac(n,o,l)||a.Ac(o,n,l)||n.da()<=l&&n.S()<=l||o.da()<=l&&o.S()<=l||o.da()>l&&o.S()>l&&n.da()>l&&n.S()>l)return!1;if(n.da()>l&&n.S()>l)var p=o;else p=n,n=o;if(n.da()>l&&n.S()>l){o=new c.l;var d=new c.l;return d.L(n),d.X(-l,-l),o.L(d),o.Fa(p),!(o.B()||o.da()<=l&&o.S()<=l)}o=new c.zb,d=new c.zb;var m=[0,0],v=[0,0],_=new c.h;return p.fn(_),o.Ec(_),p.gn(_),o.Rc(_),n.fn(_),d.Ec(_),n.gn(_),d.Rc(_),o.Fa(d,null,m,v,l),o.Fa(d,null,null,null,l)==1&&0<m[0]&&1>m[1]&&0<v[0]&&1>v[1]},a.yI=function(n,o,l){var p=new c.l,d=new c.l,m=new c.am(n,o,l,!0);if(!m.next())return!0;if(this.NG(n,o,l))return!1;var v=n,_=null;o.K()==1736&&(_=o);var M=!1,T=!1;do{var I=m.pl(),O=m.jl();if(O=o.Oa(o.Ca(O)),p.L(m.oz()),p.X(l,l),p.contains(O)&&(O=c.jd.Zd(v,O,0))!=0||o.K()==1736&&(I=n.Oa(n.Ca(I)),d.L(m.Wy()),d.X(l,l),d.contains(I)&&(O=c.jd.Zd(_,I,0))!=0))return!1;M||(!c.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?v=n:(v=new c.Ea,n.copyTo(v),v.hj(1)),M=!0),o.K()!=1736||T||(T=o,!c.Fg.Ol(T,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(_=new c.Ea,T.copyTo(_),_.hj(1)),T=!0)}while(m.next());return!0},a.Ac=function(n,o,l){var p=new c.l;return p.L(n),p.X(l,l),p.contains(o)},a.ns=function(n,o,l){var p=new c.l;return p.L(o),p.X(l,l),o=new c.h,n.fn(o),!p.contains(o)||(n.UI(o),!p.contains(o)||(n.XI(o),!p.contains(o)||(n.gn(o),!p.contains(o))))},a.YH=function(n,o,l){if(n.ea()!=o.ea()||n.I()!=o.I())return!1;var p=new c.h,d=new c.h,m=!0;l*=l;for(var v=0;v<n.ea();v++){if(n.Wc(v)!=o.Wc(v)){m=!1;break}for(var _=n.Ca(v);_<o.Wc(v);_++)if(n.D(_,p),o.D(_,d),c.h.zc(p,d)>l){m=!1;break}if(!m)break}return!!m},a.bU=function(n,o,l){if(n.I()!=o.I())return!1;var p=new c.h,d=new c.h,m=!0;l*=l;for(var v=0;v<n.I();v++)if(n.D(v,p),o.D(v,d),c.h.zc(p,d)>l){m=!1;break}return!!m},a.SA=function(n,o,l,p,d,m){var v=!1;if(n.I()>o.I()){p&&(p=!1,v=!0);var _=o}else _=n,n=o;if(o=null,d||m||v){o=new c.rn(n.I());for(var M=0;M<n.I();M++)o.write(M,0)}M=new c.l;var T=new c.l,I=new c.l;_.A(M),n.A(T),M.X(l,l),T.X(l,l),I.L(M),I.Fa(T),T=new c.h;for(var O=new c.h,R=!0,L=c.ta.iE(n,I),G=L.getIterator(),q=l*l,D=0;D<_.I();D++)if(_.D(D,T),I.contains(T)){var H=!1;M.L(T.x,T.y,T.x,T.y),G.Zi(M,l);for(var ee=G.next();ee!=-1&&(ee=L.ka(ee),n.D(ee,O),!(c.h.zc(T,O)<=q&&((d||m||v)&&o.write(ee,1),H=!0,p)));ee=G.next());if(!H&&(R=!1,d||p))return!1}else{if(d||p)return!1;R=!1}if(m&&R)return!1;if(p)return!0;for(M=0;M<n.I();M++)if(o.read(M)==1){if(m)return!0}else if(d||v)return!1;return!m},a.aI=function(n,o,l){if(n.I()>o.I())var p=o;else p=n,n=o;o=new c.l;var d=new c.l,m=new c.l;p.A(o),n.A(d),o.X(l,l),d.X(l,l),m.L(o),m.Fa(d),d=new c.h;for(var v=new c.h,_=l*l,M=c.ta.iE(n,m),T=M.getIterator(),I=0;I<p.I();I++)if(p.D(I,d),m.contains(d)){o.L(d.x,d.y,d.x,d.y),T.Zi(o,l);for(var O=T.next();O!=-1;O=T.next())if(n.D(M.ka(O),v),c.h.zc(d,v)<=_)return!0}return!1},a.Rz=function(n,o,l,p){return a.Am(n,o,l,p)&&a.Am(o,n,l,p)},a.Am=function(n,o,l,p){function d(be,Ce){return O.KE(be,Ce)}var m,v=!0,_=[0,0],M=[0,0],T=0,I=new c.ja(0),O=new a,R=new c.l,L=new c.l,G=new c.l;n.A(R),o.A(L),R.X(l,l),L.X(l,l),G.L(R),G.Fa(L),n=n.Ha(),L=o.Ha();var q=null,D=q=null,H=o.Cb;for(H!=null?(q=H.Gb,D=H.Ao,q==null&&(q=c.ta.lj(o,G))):q=c.ta.lj(o,G),o=q.getIterator(),H=null,D!=null&&(H=D.getIterator());n.ab();)for(;n.Ia();){var ee=!1,te=n.ia();if(te.A(R),!R.isIntersecting(G)||H!=null&&(H.Zi(R,l),H.next()==-1))return!1;for(D=te.Rb(),o.Vo(te,l),m=o.next();m!=-1;m=o.next()){L.Wb(q.ka(m)),m=L.ia();var Z=te.Fa(m,null,_,M,l);if(Z==2&&(!p||M[0]<=M[1])){Z=_[0];var ce=_[1],ye=M[0],Me=M[1];if(Z*D<=l&&(1-ce)*D<=l){ee=!0,T=0,I.resize(0),O.th.length=0;var xe=n.xb();for(ye=!0;ye;){if(n.Ia()){if(D=(te=n.ia()).Rb(),(Z=te.Fa(m,null,_,M,l))==2&&(!p||M[0]<=M[1])&&(Z=_[0],ce=_[1],Z*D<=l&&(1-ce)*D<=l)){xe=n.xb();continue}if(L.Ia()&&(m=L.ia(),(Z=te.Fa(m,null,_,M,l))==2&&(!p||M[0]<=M[1])&&(Z=_[0],ce=_[1],Z*D<=l&&(1-ce)*D<=l))){xe=n.xb();continue}}ye=!1}xe!=n.xb()&&(n.Wb(xe),n.ia());break}xe=n.xb(),m=b.construct(xe,n.gb,Z,ce,L.xb(),L.gb,ye,Me),O.th.push(m),I.add(I.size)}}if(!ee){if(T==O.th.length)return!1;for(1<I.size-T&&I.Wd(T,I.size,d),ee=0;T<O.th.length;T++)if(!((m=O.th[I.get(T)]).Mj<ee&&m.Ui<ee)){if(D*(m.Mj-ee)>l)return!1;if(D*(1-(ee=m.Ui))<=l||ee==1)break}if(D*(1-ee)>l)return!1;T=0,I.resize(0),O.th.length=0}}return v},a.PG=function(n,o,l){if(1>a.Sz(n,o,l,null))return!1;var p=new c.l,d=new c.l;n.A(p),o.A(d);var m=a.ns(p,d,l);return p=a.ns(d,p,l),!(!m||!p)||(m&&!p?!a.Am(o,n,l,!1):p&&!m?!a.Am(n,o,l,!1):!a.Am(n,o,l,!1)&&!a.Am(o,n,l,!1))},a.Sz=function(n,o,l,p){function d(_t,xt){return R.KE(_t,xt)}if(n.sz()>o.sz())var m=o,v=n;else m=n,v=o;n=m.Ha(),o=v.Ha();var _=[0,0],M=[0,0],T=-1,I=0,O=new c.ja(0),R=new a,L=new c.l,G=new c.l,q=new c.l;m.A(L),v.A(G),L.X(l,l),G.X(l,l),q.L(L),q.Fa(G),m=null,p!=null&&(m=new c.h);var D=G=G=null,H=v.Cb;for(H!=null?(G=H.Gb,D=H.Ao,G==null&&(G=c.ta.lj(v,q))):G=c.ta.lj(v,q),v=G.getIterator(),H=null,D!=null&&(H=D.getIterator());n.ab();)for(D=0;n.Ia();){var ee=n.ia();if(ee.A(L),L.isIntersecting(q)){if(H!=null&&(H.Zi(L,l),H.next()==-1))continue;var te=ee.Rb();v.Vo(ee,l);for(var Z=v.next();Z!=-1;Z=v.next()){var ce=G.ka(Z);o.Wb(ce);var ye=o.ia(),Me=ye.Rb(),xe=ee.Fa(ye,null,_,M,l);if(0<xe){Z=_[0],T=M[0];var be=xe==2?_[1]:NaN,Ce=xe==2?M[1]:NaN;if(xe==2){if(te*(be-Z)>l)return 1;var Ze=te*(be-Z);if(o.Ia()){if(ye=o.ia(),(xe=ee.Fa(ye,null,_,null,l))==2){xe=_[0];var Qe=_[1];if(Ze+(xe=te*(Qe-xe))>l)return 1}o.Wb(ce),o.ia()}if(!o.xm()){if(o.ni(),ye=o.ni(),(xe=ee.Fa(ye,null,_,null,l))==2&&(xe=_[0],Ze+(xe=te*((Qe=_[1])-xe))>l))return 1;o.Wb(ce),o.ia()}if(n.Ia()){if(ce=n.xb(),(xe=(ee=n.ia()).Fa(ye,null,_,null,l))==2&&(xe=_[0],Ze+(xe=te*((Qe=_[1])-xe))>l))return 1;n.Wb(ce),n.ia()}if(!n.xm()){if(ce=n.xb(),n.ni(),(xe=(ee=n.ni()).Fa(ye,null,_,null,l))==2&&(xe=_[0],Ze+(xe=Me*((Qe=_[1])-xe))>l))return 1;n.Wb(ce),n.ia()}ye=b.construct(n.xb(),n.gb,Z,be,o.xb(),o.gb,T,Ce),R.th.push(ye),O.add(O.size)}T=0,p!=null&&(ee.ic(Z,m),p.add(m.x),p.add(m.y))}}if(I<R.th.length){for(O.Wd(I,O.size,d),ee=0,Z=R.th[O.get(I)].Om;I<R.th.length;I++)if(!((ye=R.th[O.get(I)]).Mj<ee&&ye.Ui<ee))if(te*(ye.Mj-ee)>l)D=te*(ye.Ui-ye.Mj),ee=ye.Ui,Z=ye.Om;else{if(ye.Om!=Z?(D=te*(ye.Ui-ye.Mj),Z=ye.Om):D+=te*(ye.Ui-ye.Mj),D>l)return 1;if((ee=ye.Ui)==1)break}te*(1-ee)>l&&(D=0),I=0,O.resize(0),R.th.length=0}}}return T},a.NG=function(n,o,l){var p=n.Ha(),d=o.Ha();for(n=new c.am(n,o,l,!1);n.next();){o=n.pl();var m=n.jl();if(p.Wb(o),d.Wb(m),o=p.ia(),0<d.ia().Fa(o,null,null,null,l))return!0}return!1},a.OG=function(n,o,l,p){var d=n.Ha(),m=new c.l,v=new c.l,_=new c.l;n.A(m),o.A(v),m.X(l,l),m.contains(v),v.X(l,l),_.L(m),_.Fa(v),(m=n.Cb)!=null?(m=m.Gb)==null&&(m=c.ta.lj(n,_)):m=c.ta.lj(n,_),n=m.getIterator();for(var M=new c.h,T=new c.h,I=l*l,O=0;O<o.I();O++)if(o.D(O,M),_.contains(M)){v.L(M.x,M.y,M.x,M.y),n.Zi(v,l);for(var R=!1,L=n.next();L!=-1;L=n.next())if(d.Wb(m.ka(L)),(L=d.ia()).ic(L.fe(M,!1),T),c.h.zc(T,M)<=I){R=!0;break}if(p){if(!R)return!1}else if(R)return!0}return!!p},a.Tz=function(n,o,l){var p=new c.h,d=l*l,m=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var v=new c.l;for(v.L(o),v=(l=n.GF(v,l)).next();v!=-1;v=l.next())if(m.Wb(n.ka(v)),m.Ia()){var _=(v=m.ia()).fe(o,!1);if(v.ic(_,p),c.h.zc(o,p)<=d)return!0}return!1}for(n=new c.l;m.ab();)for(;m.Ia();)if((v=m.ia()).A(n),n.X(l,l),n.contains(o)&&(_=v.fe(o,!1),v.ic(_,p),c.h.zc(o,p)<=d))return!0;return!1},a.LG=function(n,o,l){return a.Tz(n,o,l)&&!a.Uz(n,o,l)},a.Uz=function(n,o,l){return n=n.mg(),!a.lt(n,o,l)},a.MG=function(n,o,l){if(n.vm()){var p=new c.zb(o.v,o.G,o.v,o.H),d=new c.zb(o.v,o.H,o.C,o.H),m=new c.zb(o.C,o.H,o.C,o.G);for(o=new c.zb(o.C,o.G,o.v,o.G),n=n.Ha();n.ab();)for(;n.Ia();){var v=n.ia();if(v.isIntersecting(p,l)||v.isIntersecting(d,l)||v.isIntersecting(m,l)||v.isIntersecting(o,l))return!0}}else{(p=new c.l).L(o),p.X(l,l),l=n.vb(0),d=new c.h,m=new c.h,o=new c.h,v=new c.h;for(var _=0,M=n.ea();_<M;_++)for(var T=!0,I=n.Ca(_),O=n.Wc(_);I<O;I++)if(T)l.uc(2*I,m),T=!1;else{if(l.uc(2*I,d),o.N(m),v.N(d),p.uy(o,v)!=0)return!0;m.N(d)}}return!1},a.qc=function(n,o,l){var p=n.K(),d=o.K();if(c.ba.zj(p)){var m=n.Cb;if(m!=null&&(m=m.Gk)!=null)if(d==33){var v=o.D();if((v=m.To(v.x,v.y))==1)return 1;if(v==0)return 4}else{if(v=new c.l,o.A(v),(v=m.So(v))==1)return 1;if(v==0)return 4;if(l&&c.ba.zj(d)&&a.BE(o,m))return 1073741824}}if(c.ba.zj(d)&&(m=o.Cb)!=null&&(m=m.Gk)!=null)if(p==33){if(n=n.D(),(v=m.To(n.x,n.y))==1)return 2;if(v==0)return 4}else{if(o=new c.l,n.A(o),(v=m.So(o))==1)return 2;if(v==0)return 4;if(l&&c.ba.zj(p)&&a.BE(n,m))return 1073741824}return 0},a.BE=function(n,o){for(var l=n.I(),p=new c.h,d=0;d<l;d++)if(n.D(d,p),o.To(p.x,p.y)==1)return!0;return!1},a.CI=function(n,o,l,p){for(var d=1<=n.qm(0)&&1<=o.qm(0),m=n.Ha(),v=o.Ha(),_=[0,0],M=[0,0],T=new c.am(n,o,l,!1),I=!1;T.next();){var O=T.pl(),R=T.jl();if(m.Wb(O),v.Wb(R),O=m.ia(),(R=v.ia().Fa(O,null,M,_,l))==2){if(I=_[0],R=_[1],O=O.Rb(),d&&(R-I)*O>l)return!1;I=!0}else if(R!=0){if(I=_[0],O=M[0],0<I&&1>I&&0<O&&1>O)return!1;I=!0}}return!!I&&(m=new c.l,v=new c.l,d=new c.l,n.A(m),o.A(v),m.X(1e3*l,1e3*l),v.X(1e3*l,1e3*l),d.L(m),d.Fa(v),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&c.cm.st(n,o,l,"F********",p))},a.zI=function(n,o,l,p){var d=1<=n.qm(0)&&1<=o.qm(0),m=new c.l,v=new c.l,_=new c.l;n.A(m),o.A(v);for(var M=!1,T=a.ns(m,v,l),I=a.ns(v,m,l),O=n.Ha(),R=o.Ha(),L=[0,0],G=[0,0],q=new c.am(n,o,l,!1);q.next();){var D=q.pl(),H=q.jl();if(O.Wb(D),R.Wb(H),H=O.ia(),(D=R.ia().Fa(H,null,G,L,l))==2){D=L[0];var ee=L[1];if(H=H.Rb(),d&&(ee-D)*H>l&&(M=!0,T&&I))return!0}else if(D!=0&&(D=L[0],H=G[0],0<D&&1>D&&0<H&&1>H))return!0}if(d=new c.l,O=new c.l,d.L(m),d.X(1e3*l,1e3*l),O.L(v),O.X(1e3*l,1e3*l),_.L(d),_.Fa(O),m="",m=M?m+"**":m+"T*",T){if(10<o.I()&&(o=c.Vd.clip(o,_,l,0)).B())return!1;m+="****"}else m+="T***";if(I){if(10<n.I()&&(n=c.Vd.clip(n,_,l,0)).B())return!1;m+="***"}else m+="T**";return c.cm.st(n,o,l,m.toString(),p)},a.vI=function(n,o,l,p){var d=[!1],m=a.tI(n,o,l,d);return d[0]?m:(d=new c.l,o.A(d),d.X(1e3*l,1e3*l),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B()))&&c.cm.Uw(n,o,l,p))},a.tI=function(n,o,l,p){p[0]=!1;for(var d=n.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(n,o,l,!1),T=!1;M.next();){var I=M.pl(),O=M.jl();if(d.Wb(I,-1),m.Wb(O,-1),I=d.ia(),(I=m.ia().Fa(I,null,_,v,l))!=0&&(T=!0,I==1&&(I=v[0],O=_[0],0<I&&1>I&&0<O&&1>O)))return p[0]=!0,!1}if(!T){for(p[0]=!0,v=new c.l,n.A(v),v.X(l,l),M=n,T=!1,_=new c.l,p=0,d=o.ea();p<d;p++)if(0<o.Ka(p)){if(o.Tj(p,_),!v.isIntersecting(_)||(m=o.Oa(o.Ca(p)),(m=c.Fg.ym(M,m,0))==0))return!1;T||(!c.Fg.Ol(n,o.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?M=n:(m=new c.Ea,n.copyTo(m),m.hj(1),M=m),T=!0)}if(n.ea()==1||o.K()==1607)return!0;for(v=new c.l,o.A(v),v.X(l,l),_=o,M=!1,l=new c.l,p=0,d=n.ea();p<d;p++)if(0<n.Ka(p)){if(n.Tj(p,l),v.isIntersecting(l)&&(m=n.Oa(n.Ca(p)),(m=c.Fg.ym(_,m,0))==1))return!1;M||(!c.Fg.Ol(o,n.ea()-1)||o.Cb!=null&&o.Cb.Gb!=null?_=o:(m=new c.Ea,o.copyTo(m),m.hj(1),_=m),M=!0)}return!0}return!1},a.DI=function(n,o,l,p){for(var d=n.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(n,o,l,!1),T=!1;M.next();){var I=M.pl(),O=M.jl();if(d.Wb(I),m.Wb(O),I=d.ia(),(I=m.ia().Fa(I,null,_,v,l))==2)T=!0;else if(I!=0){if(T=v[0],I=_[0],0<T&&1>T&&0<I&&1>I)return!1;T=!0}}return!!T&&(m=new c.l,v=new c.l,d=new c.l,n.A(m),o.A(v),m.X(1e3*l,1e3*l),v.X(1e3*l,1e3*l),d.L(m),d.Fa(v),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&c.cm.bn(n,o,l,"F********",p))},a.xI=function(n,o,l,p){for(var d=n.Ha(),m=o.Ha(),v=[0,0],_=[0,0],M=new c.am(n,o,l,!1),T=!1;M.next();){var I=M.pl(),O=M.jl();if(d.Wb(I),m.Wb(O),I=d.ia(),(I=m.ia().Fa(I,null,_,v,l))==2)T=!0;else if(I!=0){if(T=v[0],I=_[0],0<T&&1>T&&0<I&&1>I)return!0;T=!0}}return!!T&&(m=new c.l,v=new c.l,_=new c.l,M=new c.l,d=new c.l,n.A(m),o.A(v),a.ns(v,m,l)?(_.L(m),_.X(1e3*l,1e3*l),M.L(v),M.X(1e3*l,1e3*l),d.L(_),d.Fa(M),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B())||10<o.I()&&(o=c.Vd.clip(o,d,l,0),o.B()))&&(l=c.cm.bn(n,o,l,"T********",p))):l=c.cm.bn(n,o,l,"T*****T**",p))},a.wI=function(n,o,l,p){var d=[!1],m=a.tI(n,o,l,d);return d[0]?m:(d=new c.l,o.A(d),d.X(1e3*l,1e3*l),!(10<n.I()&&(n=c.Vd.clip(n,d,l,0),n.B()))&&c.cm.$A(n,o,l,p))},a.uI=function(n,o,l){return c.jd.Zd(n,o,l)==1},a.BI=function(n,o,l){return c.jd.Zd(n,o,l)==2},a.lt=function(n,o,l){var p=new c.h;l*=l;for(var d=0;d<n.I();d++)if(n.D(d,p),c.h.zc(p,o)<=l)return!1;return!0},a.prototype.KE=function(n,o){return n=this.th[n],o=this.th[o],n.Om<o.Om||n.Om==o.Om&&(n.rw<o.rw||n.rw==o.rw&&(n.Mj<o.Mj||n.Mj==o.Mj&&(n.Ui<o.Ui||n.Ui==o.Ui&&n.vH<o.vH)))?-1:1},a}();c.vd=u}(W||(W={})),function(c){var C,b,u;(b=C||(C={}))[b.InteriorInterior=0]="InteriorInterior",b[b.InteriorBoundary=1]="InteriorBoundary",b[b.InteriorExterior=2]="InteriorExterior",b[b.BoundaryInterior=3]="BoundaryInterior",b[b.BoundaryBoundary=4]="BoundaryBoundary",b[b.BoundaryExterior=5]="BoundaryExterior",b[b.ExteriorInterior=6]="ExteriorInterior",b[b.ExteriorBoundary=7]="ExteriorBoundary",b[b.ExteriorExterior=8]="ExteriorExterior",function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates",a[a.AreaLinePredicates=1]="AreaLinePredicates",a[a.LineLinePredicates=2]="LineLinePredicates",a[a.AreaPointPredicates=3]="AreaPointPredicates",a[a.LinePointPredicates=4]="LinePointPredicates",a[a.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),C=function(){function a(){this.le=0,this.j=new c.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return a.sB=function(n,o,l,p,d){if(p.length!=9)throw c.i.ga("relation string length has to be 9 characters");for(var m=0;9>m;m++){var v=p.charAt(m);if(v!="*"&&v!="T"&&v!="F"&&v!="0"&&v!="1"&&v!="2")throw c.i.ga("relation string")}if((m=this.FR(p,n.Eb(),o.Eb()))!=0)return c.vd.tB(n,o,l,m,d);m=new c.l,n.A(m),v=new c.l,o.A(v);var _=new c.l;if(_.L(m),_.$b(v),l=c.ta.Xd(l,_,!1),n=this.QE(n,l),o=this.QE(o,l),n.B()||o.B())return this.mW(n,o,p);switch(m=o.K(),v=!1,n.K()){case 1736:switch(m){case 1736:v=this.st(n,o,l,p,d);break;case 1607:v=this.bn(n,o,l,p,d);break;case 33:v=this.rt(n,o,l,p);break;case 550:v=this.qt(n,o,l,p,d)}break;case 1607:switch(m){case 1736:v=this.bn(o,n,l,this.aq(p),d);break;case 1607:v=this.aB(n,o,l,p,d);break;case 33:v=this.ut(n,o,l,p,d);break;case 550:v=this.tt(n,o,l,p,d)}break;case 33:switch(m){case 1736:v=this.rt(o,n,l,this.aq(p));break;case 1607:v=this.ut(o,n,l,this.aq(p),d);break;case 33:v=this.SU(n,o,l,p);break;case 550:v=this.mt(o,n,l,this.aq(p))}break;case 550:switch(m){case 1736:v=this.qt(o,n,l,this.aq(p),d);break;case 1607:v=this.tt(o,n,l,this.aq(p),d);break;case 550:v=this.TA(n,o,l,p,d);break;case 33:v=this.mt(n,o,l,p)}break;default:v=!1}return v},a.st=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.rJ();var v=new c.l,_=new c.l;return n.A(v),o.A(_),p=!1,c.vd.ek(v,_,l)&&(m.Eu(n,o),p=!0),p||((v=c.vd.qc(n,o,!1))==4?(m.Eu(n,o),p=!0):v==1?(m.hy(o),p=!0):v==2&&(m.TD(n),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.Dp(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.Uw=function(n,o,l,p){var d=new a;d.$i(),d.dj("T*****F**"),d.rJ();var m=new c.l,v=new c.l;n.A(m),o.A(v);var _=!1;return c.vd.ek(m,v,l)&&(d.Eu(n,o),_=!0),_||((m=c.vd.qc(n,o,!1))==4?(d.Eu(n,o),_=!0):m==1?(d.hy(o),_=!0):m==2&&(d.TD(n),_=!0)),_?this.fg(d.J,d.Yc):(n=(_=new c.hd).Ib(n),m=_.Ib(o),c.Uk.W(_,l,p,!1),l=_.Ke(m).mg(),_.Ip(0,!0,!0),c.tn.W(_,n,-1,!1,p),_.I(n)!=0&&(c.tn.W(_,m,-1,!1,p),d.gr(_,p),(o=_.I(m)==0)||(d.Dp(n,m),d.j.Wg(),m=this.fg(d.J,d.Yc))?(n=_.Ke(n),n=(_=new c.hd).Ib(n),m=_.Ib(l),d.gr(_,p),d.le=0,d.$i(),d.dj(o?"T*****F**":"******F**"),d.CB(),d.Dp(n,m),d.j.Wg(),this.fg(d.J,d.Yc)):m))},a.bn=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.CB();var v=new c.l,_=new c.l;return n.A(v),o.A(_),p=!1,c.vd.ek(v,_,l)&&(m.Fu(n,o),p=!0),p||((v=c.vd.qc(n,o,!1))==4?(m.Fu(n,o),p=!0):v==1&&(m.UD(o),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.mh=m.j.Fp(),a.Lw(o,m.j,m.mh),m.Dp(n,o),m.j.Gp(m.mh),m.j.Wg()),a.fg(m.J,m.Yc)},a.$A=function(n,o,l,p){var d=new a;d.$i(),d.dj("T*****F**"),d.CB();var m=new c.l,v=new c.l;n.A(m),o.A(v);var _=!1;return c.vd.ek(m,v,l)&&(d.Fu(n,o),_=!0),_||((m=c.vd.qc(n,o,!1))==4?(d.Fu(n,o),_=!0):m==1&&(d.UD(o),_=!0)),_?this.fg(d.J,d.Yc):(n=(_=new c.hd).Ib(n),o=_.Ib(o),d.Xo(_,l,p),_.I(n)!=0&&(d.Dp(n,o),d.j.Wg(),this.fg(d.J,d.Yc)))},a.qt=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.sJ();var v=new c.l,_=new c.l;return n.A(v),o.A(_),p=!1,c.vd.ek(v,_,l)&&(m.Gu(n),p=!0),p||((v=c.vd.qc(n,o,!1))==4?(m.Gu(n),p=!0):v==1&&(m.tN(),p=!0)),p||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.By(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.aB=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.WW(),p=new c.l;var v=new c.l;n.A(p),o.A(v);var _=!1;return c.vd.ek(p,v,l)&&(m.JG(n,o),_=!0),_||c.vd.qc(n,o,!1)!=4||(m.JG(n,o),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.$h=m.j.Fp(),m.mh=m.j.Fp(),a.Lw(n,m.j,m.$h),a.Lw(o,m.j,m.mh),m.Dp(n,o),m.j.Gp(m.$h),m.j.Gp(m.mh),m.j.Wg()),a.fg(m.J,m.Yc)},a.tt=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.GJ(),p=new c.l;var v=new c.l;n.A(p),o.A(v);var _=!1;return c.vd.ek(p,v,l)&&(m.Qz(n),_=!0),_||c.vd.qc(n,o,!1)!=4||(m.Qz(n),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.$h=m.j.Fp(),a.Lw(n,m.j,m.$h),m.By(n,o),m.j.Gp(m.$h),m.j.Wg()),a.fg(m.J,m.Yc)},a.TA=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.LJ(),p=new c.l;var v=new c.l;n.A(p),o.A(v);var _=!1;return c.vd.ek(p,v,l)&&(m.sI(),_=!0),_||(n=(p=new c.hd).Ib(n),o=p.Ib(o),m.Xo(p,l,d),m.By(n,o),m.j.Wg()),a.fg(m.J,m.Yc)},a.rt=function(n,o,l,p){var d=new a;d.$i(),d.dj(p),d.sJ();var m=new c.l;n.A(m),o=o.D();var v=!1;return c.vd.Tw(o,m,l)&&(d.Gu(n),v=!0),v||((l=c.jd.Zd(n,o,l))==1?(d.J[0]=0,d.J[2]=2,d.J[3]=-1,d.J[5]=1,d.J[6]=-1):l==2?(d.J[6]=-1,n.He()!=0?(d.J[0]=-1,d.J[3]=0,d.J[2]=2,d.J[5]=1):(d.J[0]=0,d.J[3]=-1,d.J[5]=-1,l=new c.l,n.A(l),d.J[2]=l.da()==0&&l.S()==0?-1:1)):d.Gu(n)),this.fg(d.J,p)},a.ut=function(n,o,l,p,d){var m=new a;m.$i(),m.dj(p),m.GJ();var v=new c.l;n.A(v),p=o.D();var _=!1;if(c.vd.Tw(p,v,l)&&(m.Qz(n),_=!0),!_){v=null;var M=_=!1;(m.fa[0]||m.fa[6])&&(c.vd.Tz(n,p,l)?(m.fa[0]&&(v=c.si.im(n,d),M=!c.vd.lt(v,p,l),_=!0,m.J[0]=M?-1:0),m.J[6]=-1):(m.J[0]=-1,m.J[6]=0)),m.fa[3]&&(v!=null&&v.B()?m.J[3]=-1:(_||(v==null&&(v=c.si.im(n,d)),M=!c.vd.lt(v,p,l),_=!0),m.J[3]=M?0:-1)),m.fa[5]&&(v!=null&&v.B()?m.J[5]=-1:_&&!M?m.J[5]=0:(v==null&&(v=c.si.im(n,d)),d=c.vd.Pw(v,o,l),m.J[5]=d?-1:0)),m.fa[2]&&(n.Rb()!=0?m.J[2]=1:((d=new c.de(n.description)).Gd(n,0,n.I()),n=c.vd.Pw(d,o,l),m.J[2]=n?-1:0))}return this.fg(m.J,m.Yc)},a.mt=function(n,o,l,p){var d=new a;d.$i(),d.dj(p),d.LJ();var m=new c.l;n.A(m),o=o.D();var v=!1;if(c.vd.Tw(o,m,l)&&(d.sI(),v=!0),!v){m=!1,v=!0,l*=l;for(var _=0;_<n.I();_++){var M=n.Oa(_);if(c.h.zc(M,o)<=l?m=!0:v=!1,m&&!v)break}m?(d.J[0]=0,d.J[2]=v?-1:0,d.J[6]=-1):(d.J[0]=-1,d.J[2]=0,d.J[6]=0)}return a.fg(d.J,p)},a.SU=function(n,o,l,p){n=n.D(),o=o.D();for(var d=[],m=0;9>m;m++)d[m]=-1;return c.h.zc(n,o)<=l*l?d[0]=0:(d[2]=0,d[6]=0),d[8]=2,a.fg(d,p)},a.fg=function(n,o){for(var l=0;9>l;l++)switch(o.charAt(l)){case"T":if(n[l]==-1)return!1;break;case"F":if(n[l]!=-1)return!1;break;case"0":if(n[l]!=0)return!1;break;case"1":if(n[l]!=1)return!1;break;case"2":if(n[l]!=2)return!1}return!0},a.mW=function(n,o,l){var p=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&o.B()){for(var d=0;9>d;d++)p[d]=-1;return this.fg(p,l)}return d=!1,n.B()&&(n=o,d=!0),p[0]=-1,p[1]=-1,p[3]=-1,p[4]=-1,p[6]=-1,p[7]=-1,p[8]=2,o=n.K(),c.ba.Ic(o)?o==1736?n.He()!=0?(p[2]=2,p[5]=1):(p[5]=-1,o=new c.l,n.A(o),p[2]=o.da()==0&&o.S()==0?0:1):(o=n.Rb()!=0,p[2]=o?1:0,p[5]=c.si.cq(n)?0:-1):(p[2]=0,p[5]=-1),d&&this.pK(p),this.fg(p,l)},a.FR=function(n,o,l){return a.YP(n)?3:a.OP(n)?4:a.VX(n,o,l)?8:a.wP(n,o,l)?16:a.ZO(n)?1:a.wU(n,o,l)?32:0},a.YP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.OP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.VX=function(n,o,l){return(o!=0||l!=0)&&((o!=2||l!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||o==1&&l==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||l!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},a.wP=function(n,o,l){return o>l?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":o==1&&l==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},a.ZO=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},a.wU=function(n,o,l){if(o==l){if(o!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},a.Lw=function(n,o,l){n=o.Ma(n);for(var p=o.Oe;p!=-1;p=o.Sf(p))if((o.yd(p)&n)!=0){var d=o.Je(p);if(d==-1)o.pn(p,l,0);else{var m=d,v=0;do(o.fh(m)&n)!=0&&v++,m=o.kc(o.ya(m));while(m!=d);o.pn(p,l,v)}}},a.aq=function(n){var o=""+n.charAt(0);return o+=n.charAt(3),o+=n.charAt(6),o+=n.charAt(1),o+=n.charAt(4),o+=n.charAt(7),o+=n.charAt(2),(o+=n.charAt(5))+n.charAt(8)},a.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},a.pK=function(n){var o=n[1],l=n[2],p=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=o,n[6]=l,n[7]=p},a.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.le++):this.fa[n]=!1},a.prototype.OJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},a.prototype.pc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.le--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.le--,!0):(this.fa[n]=!1,this.le--,!0))},a.prototype.rJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.CB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.WW=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.sJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.GJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.LJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},a.prototype.rN=function(n,o,l){var p=!0;return this.fa[0]&&(this.vS(n,o,l),p=p&&this.pc(0)),this.fa[1]&&(this.mG(n,o,1),p=p&&this.pc(1)),this.fa[2]&&(this.nG(n,o,l,2),p=p&&this.pc(2)),this.fa[3]&&(this.mG(n,l,3),p=p&&this.pc(3)),this.fa[4]&&(this.vN(n,o,l),p=p&&this.pc(4)),this.fa[5]&&(this.ZD(n,l,5),p=p&&this.pc(5)),this.fa[6]&&(this.nG(n,l,o,6),p=p&&this.pc(6)),this.fa[7]&&(this.ZD(n,o,7),p=p&&this.pc(7)),p},a.prototype.Eu=function(n,o){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(o,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},a.prototype.Hr=function(n,o,l,p,d){o==-1&&p==-1||((l!="T"&&l!="F"&&o!=-1||d!="T"&&d!="F"&&p!=-1)&&n.He()==0?(p!=-1&&(this.J[p]=-1),o!=-1&&(l=new c.l,n.A(l),this.J[o]=l.da()==0&&l.S()==0?0:1)):(o!=-1&&(this.J[o]=2),p!=-1&&(this.J[p]=1)))},a.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},a.prototype.TD=function(n){this.hy(n),a.pK(this.J)},a.prototype.Fu=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||o.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.UD=function(n){if(this.fa[0]){var o=this.Yc.charAt(0);o=o=="T"||o=="F"||n.Rb()!=0,this.J[0]=o?1:0}this.fa[1]&&(n=c.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},a.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},a.prototype.tN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},a.prototype.JG=function(n,o){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||n.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(n=c.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||o.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(o=c.si.cq(o),this.J[7]=o?0:-1)},a.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var o=this.Yc.charAt(2);o=o=="T"||o=="F"||n.Rb()!=0,this.J[2]=o?1:0}this.fa[5]&&(n=c.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},a.prototype.sI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},a.prototype.sN=function(n,o,l){var p=!0;return this.fa[0]&&(this.wS(n,o),p=p&&this.pc(0)),this.fa[1]&&(this.sS(n,o,l,this.mh),p=p&&this.pc(1)),this.fa[2]&&(this.tS(n,o),p=p&&this.pc(2)),this.fa[3]&&(this.zN(n,o,l,this.mh),p=p&&this.pc(3)),this.fa[4]&&(this.wN(n,o,l,this.mh),p=p&&this.pc(4)),this.fa[5]&&(this.xN(n,o,l),p=p&&this.pc(5)),this.fa[6]&&(this.fQ(n,o),p=p&&this.pc(6)),this.fa[7]&&(this.eQ(n,o,l,this.mh),p=p&&this.pc(7)),p},a.prototype.eT=function(n,o,l){var p=!0;return this.fa[0]&&(this.zS(n,o,l,this.$h,this.mh),p=p&&this.pc(0)),this.fa[1]&&(this.oG(n,o,l,this.$h,this.mh,1),p=p&&this.pc(1)),this.fa[2]&&(this.pG(n,o,l,2),p=p&&this.pc(2)),this.fa[3]&&(this.oG(n,l,o,this.mh,this.$h,3),p=p&&this.pc(3)),this.fa[4]&&(this.BN(n,o,l,this.$h,this.mh),p=p&&this.pc(4)),this.fa[5]&&(this.$D(n,l,this.$h,5),p=p&&this.pc(5)),this.fa[6]&&(this.pG(n,l,o,6),p=p&&this.pc(6)),this.fa[7]&&(this.$D(n,o,this.mh,7),p=p&&this.pc(7)),p},a.prototype.VD=function(n,o,l){var p=!0;return this.fa[0]&&(this.xS(n,o),p=p&&this.pc(0)),this.fa[2]&&(this.uS(n,o),p=p&&this.pc(2)),this.fa[3]&&(this.AN(n,o,l),p=p&&this.pc(3)),this.fa[5]&&(this.yN(n,o),p=p&&this.pc(5)),this.fa[6]&&(this.gQ(n,o),p=p&&this.pc(6)),p},a.prototype.KG=function(n,o,l){var p=!0;return this.fa[0]&&(this.AS(n,o,l,this.$h),p=p&&this.pc(0)),this.fa[2]&&(this.yS(n,l),p=p&&this.pc(2)),this.fa[3]&&(this.DN(n,o,l,this.$h),p=p&&this.pc(3)),this.fa[5]&&(this.CN(n,o,l,this.$h),p=p&&this.pc(5)),this.fa[6]&&(this.hQ(n,o,l),p=p&&this.pc(6)),p},a.prototype.RU=function(n,o,l){var p=!0;return this.fa[0]&&(this.BS(n,o,l),p=p&&this.pc(0)),this.fa[2]&&(this.qG(n,o,l,2),p=p&&this.pc(2)),this.fa[6]&&(this.qG(n,l,o,6),p=p&&this.pc(6)),p},a.prototype.vS=function(n,o,l){this.J[0]!=2&&((n=this.j.af(n))&o)!=0&&(n&l)!=0&&(this.J[0]=2)},a.prototype.mG=function(n,o,l){if(this.J[l]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(p&o)!=0&&(this.J[l]=1)}},a.prototype.nG=function(n,o,l,p){this.J[p]!=2&&((n=this.j.af(n))&o)!=0&&(n&l)==0&&(this.J[p]=2)},a.prototype.vN=function(n,o,l){if(this.J[4]!=1){var p=this.j.fh(n);(p&o)!=0&&(p&l)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&((n=this.j.yd(this.j.vf(n)))&o)!=0&&(n&l)!=0&&(this.J[4]=0)}},a.prototype.ZD=function(n,o,l){if(this.J[l]!=1){var p=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(p&o)==0&&(this.J[l]=1)}},a.prototype.wS=function(n,o){if(this.J[0]!=1){var l=this.j.af(this.j.ya(n));(this.j.af(n)&o)!=0&&(l&o)!=0&&(this.J[0]=1)}},a.prototype.sS=function(n,o,l,p){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n),m=this.j.yd(d);(m&o)==0&&(this.j.af(n)&o)!=0&&(n=this.j.ng(d,p),(m&l)!=0&&n%2!=0&&(this.J[1]=0))}},a.prototype.tS=function(n,o){this.J[2]!=2&&(this.j.fh(n)&o)!=0&&(this.J[2]=2)},a.prototype.zN=function(n,o,l,p){if(this.J[3]!=1){var d=this.j.fh(n);(d&o)!=0&&(d&l)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(d=this.j.vf(n),((n=this.j.yd(d))&o)!=0&&(o=this.j.ng(d,p),(n&l)!=0&&o%2==0&&(this.J[3]=0)))}},a.prototype.wN=function(n,o,l,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n);((n=this.j.yd(d))&o)!=0&&(o=this.j.ng(d,p),(n&l)!=0&&o%2!=0&&(this.J[4]=0))}},a.prototype.xN=function(n,o,l){this.J[5]!=1&&((n=this.j.fh(n))&o)!=0&&(n&l)==0&&(this.J[5]=1)},a.prototype.fQ=function(n,o){if(this.J[6]!=1){var l=this.j.af(this.j.ya(n));(this.j.af(n)&o)==0&&(l&o)==0&&(this.J[6]=1)}},a.prototype.eQ=function(n,o,l,p){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var d=this.j.vf(n),m=this.j.yd(d);(m&o)==0&&(this.j.af(n)&o)==0&&(n=this.j.ng(d,p),(m&l)!=0&&n%2!=0&&(this.J[7]=0))}},a.prototype.zS=function(n,o,l,p,d){if(this.J[0]!=1){var m=this.j.fh(n);(m&o)!=0&&(m&l)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),((m=this.j.yd(n))&o)!=0&&(m&l)!=0&&(o=this.j.ng(n,p),d=this.j.ng(n,d),o%2==0&&d%2==0&&(this.J[0]=0)))}},a.prototype.oG=function(n,o,l,p,d,m){if(this.J[m]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var v=this.j.yd(n);(v&o)!=0&&(v&l)!=0&&(o=this.j.ng(n,p),d=this.j.ng(n,d),o%2==0&&d%2!=0&&(this.J[m]=0))}},a.prototype.pG=function(n,o,l,p){this.J[p]!=1&&((n=this.j.fh(n))&o)!=0&&(n&l)==0&&(this.J[p]=1)},a.prototype.BN=function(n,o,l,p,d){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var m=this.j.yd(n);(m&o)!=0&&(m&l)!=0&&(o=this.j.ng(n,p),d=this.j.ng(n,d),o%2!=0&&d%2!=0&&(this.J[4]=0))}},a.prototype.$D=function(n,o,l,p){this.J[p]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(this.j.yd(n)&o)==0&&this.j.ng(n,l)%2!=0&&(this.J[p]=0))},a.prototype.xS=function(n,o){this.J[0]!=0&&(this.j.yd(n)&o)==0&&(this.j.ik(this.j.Yy(n))&o)!=0&&(this.J[0]=0)},a.prototype.uS=function(n,o){this.J[2]!=2&&(this.j.yd(n)&o)!=0&&(this.J[2]=2)},a.prototype.AN=function(n,o,l){this.J[3]!=0&&((n=this.j.yd(n))&o)!=0&&(n&l)!=0&&(this.J[3]=0)},a.prototype.yN=function(n,o){this.J[5]!=1&&(this.j.yd(n)&o)!=0&&(this.J[5]=1)},a.prototype.gQ=function(n,o){this.J[6]!=0&&(this.j.yd(n)&o)==0&&(this.j.ik(this.j.Yy(n))&o)==0&&(this.J[6]=0)},a.prototype.AS=function(n,o,l,p){if(this.J[0]!=0){var d=this.j.yd(n);(d&o)!=0&&(d&l)!=0&&this.j.ng(n,p)%2==0&&(this.J[0]=0)}},a.prototype.yS=function(n,o){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(n)&o)==0&&(this.J[2]=0))},a.prototype.DN=function(n,o,l,p){if(this.J[3]!=0){var d=this.j.yd(n);(d&o)!=0&&(d&l)!=0&&this.j.ng(n,p)%2!=0&&(this.J[3]=0)}},a.prototype.CN=function(n,o,l,p){if(this.J[5]!=0){var d=this.j.yd(n);(d&o)!=0&&(d&l)==0&&this.j.ng(n,p)%2!=0&&(this.J[5]=0)}},a.prototype.hQ=function(n,o,l){this.J[6]!=0&&((n=this.j.yd(n))&o)==0&&(n&l)!=0&&(this.J[6]=0)},a.prototype.BS=function(n,o,l){this.J[0]!=0&&((n=this.j.yd(n))&o)!=0&&(n&l)!=0&&(this.J[0]=0)},a.prototype.qG=function(n,o,l,p){this.J[p]!=0&&((n=this.j.yd(n))&o)!=0&&(n&l)==0&&(this.J[p]=0)},a.prototype.Dp=function(n,o){var l=!1;n=this.j.Ma(n),o=this.j.Ma(o),this.Wi=this.j.bh();for(var p=this.j.Oe;p!=-1;p=this.j.Sf(p)){var d=this.j.Je(p);if(d==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.VD(p,n,o);break;case 4:l=this.KG(p,n,o);break;default:throw c.i.ga("internal error")}}else{var m=d;do{var v=m;if(this.j.Bb(v,this.Wi)!=1)do{switch(this.xw){case 0:l=this.rN(v,n,o);break;case 1:l=this.sN(v,n,o);break;case 2:l=this.eT(v,n,o);break;default:throw c.i.ga("internal error")}if(l)break;this.j.Kb(v,this.Wi,1),v=this.j.kc(v)}while(v!=m&&!l);if(l)break;m=this.j.kc(this.j.ya(v))}while(m!=d);if(l)break}}l||this.OJ(),this.j.Lg(this.Wi)},a.prototype.By=function(n,o){var l=!1;n=this.j.Ma(n),o=this.j.Ma(o);for(var p=this.j.Oe;p!=-1;p=this.j.Sf(p)){switch(this.Um){case 3:l=this.VD(p,n,o);break;case 4:l=this.KG(p,n,o);break;case 5:l=this.RU(p,n,o);break;default:throw c.i.Ra()}if(l)break}l||this.OJ()},a.prototype.gr=function(n,o){this.j.fr(n,o)},a.prototype.Xo=function(n,o,l){this.SP(n,o,l),this.gr(n,l)},a.prototype.SP=function(n,o,l){for(c.Uk.W(n,o,l,!1),n.Ip(0,!0,!0),o=n.ld;o!=-1;o=n.ve(o))n.jc(o)==1736&&c.tn.W(n,o,-1,!1,l)},a.QE=function(n,o){var l=n.K();return c.ba.zd(l)?((o=new c.Ua(n.description)).oc(n,!0),o):l==197?(l=new c.l,n.A(l),l.da()<=o&&l.S()<=o?(o=new c.Ta(n.description),n.tf(o),o):l.da()<=o||l.S()<=o?(o=new c.Ua(n.description),l=new c.Ta,n.If(0,l),o.nf(l),n.If(2,l),o.lineTo(l),o):((o=new c.Ea(n.description)).bd(n,!1),o)):n},a}(),c.cm=C}(W||(W={})),function(c){var C=function(){function a(n){this.Gm=new c.ja(0),this.fw=new c.ja(0),this.xt=new c.h,this.yt=new c.h,this.g=n,this.Js=-1}return a.prototype.cc=function(n){return this.g.cc(this.uz(n))},a.prototype.Dv=function(n){var o=this.dz(n);if(n=this.BF(n),this.g.Na(o)==n){var l=o;o=n,n=l}return this.g.Hc(o,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},a.prototype.uz=function(n){var o=this.dz(n);return n=this.BF(n),this.g.V(o)==n?o:n},a.prototype.dz=function(n){return this.Gm.get(n)},a.prototype.BF=function(n){return this.fw.get(n)},a.prototype.lF=function(n){this.Gm.set(n,this.Js),this.Js=n},a.prototype.hI=function(n){if(this.Js!=-1){var o=this.Js;return this.Js=this.Gm.get(o),this.Gm.set(o,n),this.fw.set(o,this.g.V(n)),o}return this.Gm==null&&(this.Gm=new c.ja(0),this.fw=new c.ja(0)),o=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),o},a.prototype.mz=function(n){return this.g.cd(this.dz(n))},a}();c.qY=C;var b=function(){function a(n){this.Ce=n,this.ie=new c.zb,this.Pm=new c.zb,this.wH=0,this.Bo=null,this.sA=-1}return a.prototype.compare=function(n,o,l){l=n.ka(l);var p=this.Ce.hb;if(this.sA==o)var d=this.wH;else this.Bo=p.cc(o),this.Bo==null?((n=p.g).fd(p.uz(o),this.ie),this.Bo=this.ie,d=this.ie.Me(this.Ce.Ah,0)):d=this.Bo.Me(this.Ce.Ah,0),this.wH=d,this.sA=o;if((n=p.cc(l))==null){(n=p.g).fd(p.uz(l),this.Pm),n=this.Pm;var m=this.Pm.Me(this.Ce.Ah,0)}else m=n.Me(this.Ce.Ah,0);return d==m&&(o=p.Dv(o),l=p.Dv(l),(o=.5*((l=Math.min(o?this.Bo.ma:this.Bo.oa,l?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(o=l),d=this.Bo.Me(o,0),m=n.Me(o,0)),d<m?-1:d>m?1:0},a.prototype.reset=function(){this.sA=-1},a}(),u=function(){function a(){this.Ym=this.Il=null,this.fb=new c.Zj,this.fb.LP(),this.ae=new b(this),this.fb.Wo(this.ae)}return a.prototype.BQ=function(){var n=!1;if(this.hw&&(n=this.CQ()),this.g.ea(this.Y)==1){var o=this.g.Ob(this.Y);return n=this.g.qz(o),this.g.JB(o,!0),0>n&&(n=this.g.Ya(o),this.g.jJ(n),this.g.Yg(o,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.xo=this.g.Fy(),o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))this.g.ir(o,this.Gl,0),this.g.ir(o,this.xo,-1);o=new c.ja(0),this.Ah=NaN;var l=new c.h;this.ft=this.g.ea(this.Y),this.so=this.g.Hd(),this.Ts=this.g.Hd();for(var p=this.Il.sc(this.Il.je);p!=-1;p=this.Il.lb(p)){var d=this.Il.getData(p);if(this.g.Hc(d,l),l.y!=this.Ah&&o.size!=0&&(n=this.vt(o)||n,this.ae.reset(),o.clear(!1)),o.add(d),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(o)||n,o.clear(!1)),this.g.Ud(this.so),this.g.Ud(this.Ts),o=this.g.Ob(this.Y);o!=-1;)if(this.g.uj(o,this.Gl)==3){for(this.g.JB(o,!0),l=o,o=this.g.uj(o,this.xo);o!=-1;)p=this.g.uj(o,this.xo),this.g.RT(this.Y,this.g.Sb(l),o),l=o,o=p;o=this.g.Sb(l)}else this.g.JB(o,!1),o=this.g.Sb(o);return this.g.wB(this.Gl),this.g.wB(this.xo),n},a.prototype.vt=function(n){return this.SV(n)},a.prototype.SV=function(n){var o=!1;this.hb==null&&(this.hb=new C(this.g)),this.Ym==null?(this.Ym=new c.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.RV(n);for(var l=0,p=n.size;l<p;l++){var d=n.get(l);d!=-1&&this.iG(d,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(n=this.Ym.get(l),d=this.hb.mz(this.fb.ka(n)),p=-1,this.g.uj(d,this.Gl)==0){d=this.fb.xe(n);for(var m,v=n;d!=-1;){var _=this.fb.ka(d),M=this.hb.mz(_),T=this.g.uj(M,this.Gl);if(T!=0){p=M;break}v=d,d=this.fb.xe(d)}d==-1?(m=!0,d=v):(_=this.fb.ka(d),m=this.hb.Dv(_),d=this.fb.lb(d),m=!m);do{if(_=this.fb.ka(d),M=this.hb.mz(_),(T=this.g.uj(M,this.Gl))==0&&(m!=this.hb.Dv(_)&&(o=this.g.Ya(M),this.g.jJ(o),this.g.Yg(M,this.g.Na(o)),o=!0),this.g.ir(M,this.Gl,m?3:2),m||(v=this.g.uj(p,this.xo),this.g.ir(p,this.xo,M),this.g.ir(M,this.xo,v)),this.ft--,this.ft==0))return o;p=M,v=d,d=this.fb.lb(d),m=!m}while(v!=n)}return o},a.prototype.RV=function(n){for(var o=0,l=n.size;o<l;o++){var p=n.get(o),d=this.g.Qa(p,this.so),m=this.g.Qa(p,this.Ts);if(d!=-1){var v=this.fb.ka(d);this.hb.lF(v),this.g.Sa(p,this.so,-1)}m!=-1&&(v=this.fb.ka(m),this.hb.lF(v),this.g.Sa(p,this.Ts,-1)),v=-1,d!=-1&&m!=-1?(this.fb.wd(d,-1),this.fb.wd(m,-1),n.set(o,-1)):v=d!=-1?d:m,v!=-1&&(this.iG(p,v)||this.fb.wd(v,-1),n.set(o,-1))}},a.prototype.iG=function(n,o){var l=new c.h,p=new c.h;this.g.Hc(n,l);var d=this.g.V(n);this.g.Hc(d,p);var m=!1;if(l.y<p.y){m=!0;var v=this.hb.hI(n);if(o==-1)var _=this.fb.addElement(v,-1);else _=o,this.fb.Uj(_,v);(v=this.g.Qa(d,this.so))==-1?this.g.Sa(d,this.so,_):this.g.Sa(d,this.Ts,_),d=this.g.cd(n),this.g.uj(d,this.Gl)==0&&this.Ym.add(_)}return d=this.g.Na(n),this.g.Hc(d,p),l.y<p.y&&(m=!0,v=this.hb.hI(d),o==-1?_=this.fb.addElement(v,-1):(_=o,this.fb.Uj(_,v)),(v=this.g.Qa(d,this.so))==-1?this.g.Sa(d,this.so,_):this.g.Sa(d,this.Ts,_),d=this.g.cd(n),this.g.uj(d,this.Gl)==0&&this.Ym.add(_)),m},a.W=function(n,o,l,p){var d=new a;return d.g=n,d.Y=o,d.Il=l,d.hw=p,d.BQ()},a.prototype.CQ=function(){var n=new c.ja(0),o=new c.ja(0),l=-1,p=-1,d=new c.h;d.Sc();for(var m=-1,v=-1,_=-1,M=new c.h,T=this.Il.sc(this.Il.je);T!=-1;T=this.Il.lb(T)){var I=this.Il.getData(T);this.g.Hc(I,M);var O=this.g.cd(I);d.rb(M)&&v==O?(p==-1&&(l=this.g.Fy(),p=this.g.Hd()),_==-1&&(_=o.size,this.g.Sa(m,p,_),o.add(1),this.g.uj(O,l)==-1&&(this.g.ir(O,l,m),n.add(O))),this.g.Sa(I,p,_),o.TW(o.Gc()+1)):(_=-1,d.N(M)),m=I,v=O}if(n.size==0)return!1;for(d=new c.ja(0),m=new c.ja(0),v=0,_=n.size;v<_;v++){O=n.get(v);var R=this.g.uj(O,l);for(I=this.g.Qa(R,p),d.clear(!1),m.clear(!1),d.add(R),m.add(I),I=this.g.V(R);I!=R;I=this.g.V(I)){var L=I;if((M=this.g.Qa(L,p))!=-1)if(m.size==0)m.add(M),d.add(L);else if(m.Gc()==M){T=d.Gc();var G=this.g.V(T);R=this.g.V(L),this.g.Cc(T,R),this.g.Dc(R,T),this.g.Cc(L,G),this.g.Dc(G,L),L=[!1],G=this.g.hG(this.Y,G,this.g.Ya(O),L),this.g.Sa(I,p,-1),L[0]&&this.g.Kf(O,R),I=this.g.Ka(O),I-=R=this.g.Ka(G),this.g.Xj(O,I),o.set(M,o.get(M)-1),o.get(M)==1&&(o.set(M,0),m.Jf(),d.Jf()),I=R=T}else d.add(I),m.add(M)}}return this.g.wB(l),this.g.Ud(p),!0},a}();c.QL=u}(W||(W={})),function(c){var C=function(){function b(){}return b.prototype.hg=function(){this.JA=this.tb=null},b.prototype.get=function(){return this.JA},b.prototype.set=function(u){if(this.JA=u,u!=null)throw u.K()==322&&(this.tb=u),c.i.Ra()},b.prototype.create=function(u){if(u!=322)throw c.i.ga("Not Implemented");this.Qr()},b.prototype.Qr=function(){this.tb==null&&(this.tb=new c.zb),this.JA=this.tb},b}();c.hg=C}(W||(W={})),function(c){(c=c.RL||(c.RL={}))[c.enumLineSeg=1]="enumLineSeg",c[c.enumBezierSeg=2]="enumBezierSeg",c[c.enumArcSeg=4]="enumArcSeg",c[c.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",c[c.enumSegmentMask=7]="enumSegmentMask",c[c.enumDensified=8]="enumDensified"}(W||(W={})),function(c){var C=function(u){this.bj=u,this.kC=this.lC=1,this.mB=this.lB=this.nB=0},b=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Ck=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new c.Ta,this.ra=this.Ew=0,this.no=[],this.bt=[],this.Aw=[],this.Kq=[],this.GA=[]}return u.prototype.qB=function(a){if(a!=null){for(var n=0,o=a.length;n<o;n++)this.jW(a[n]);a.length=0}},u.prototype.jW=function(a){a.bj=null,this.Kq.push(a)},u.prototype.Qw=function(a){if(this.Kq.length===0)var n=new C(a);else(n=this.Kq[this.Kq.length-1]).bj=a,--this.Kq.length;return n},u.prototype.LR=function(a,n){return a==0?this.bt[n]:this.Aw[n]},u.prototype.VA=function(){this.Ew>=this.GA.length&&this.GA.push(new c.hg);var a=this.GA[this.Ew];return this.Ew++,a},u.prototype.clear=function(){this.qB(this.no),this.qB(this.bt),this.qB(this.Aw),this.Ew=0},u.prototype.Po=function(a){this.no.push(this.Qw(a))},u.prototype.ql=function(a){return a==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(a,n){return this.LR(a,n).bj},u.prototype.Fa=function(a,n){if(this.no.length!=2)throw c.i.Ra();this.ra=a;var o=c.mc.ox(.01*a),l=!1,p=this.no[0],d=this.no[1];if(n||(5&p.bj.Br(d.bj,a,!0))!=0){if(p.bj.K()==322){var m=p.bj;if(d.bj.K()==322){n=d.bj;var v=c.zb.Yx(m,n,null,this.Hq,this.Ck,a);if(v==0)throw c.zb.Yx(m,n,null,this.Hq,this.Ck,a),c.i.Ra();a=Array(9),c.P.bv(a,null);for(var _=0;_<v;_++){var M=this.Hq[_],T=this.Ck[_],I=p.mB,O=1;M==0?(I=p.nB,O=p.lC):M==1&&(I=p.lB,O=p.kC);var R=d.mB,L=1;T==0?(R=d.nB,L=d.lC):T==1&&(R=d.lB,L=d.kC);var G=new c.h;I==R?(I=new c.h,m.ic(M,I),M=new c.h,n.ic(T,M),L/=T=O+L,c.mc.IG(I,M,L,G),c.h.zc(G,I)+c.h.zc(G,M)>o&&(l=!0)):I>R?(m.ic(M,G),M=new c.h,n.ic(T,M),c.h.zc(G,M)>o&&(l=!0)):(n.ic(T,G),I=new c.h,m.ic(M,I),c.h.zc(G,I)>o&&(l=!0)),a[_]=G}for(p=0,d=-1,_=0;_<=v;_++)(L=_<v?this.Hq[_]:1)!=p&&(o=this.VA(),m.dh(p,L,o),d!=-1&&o.get().Ec(a[d]),_!=v&&o.get().Rc(a[_]),p=L,this.bt.push(this.Qw(o.get()))),d=_;for(m=[0,0,0,0,0,0,0,0,0],_=0;_<v;_++)m[_]=_;for(1<v&&this.Ck[0]>this.Ck[1]&&(L=this.Ck[0],this.Ck[0]=this.Ck[1],this.Ck[1]=L,_=m[0],m[0]=m[1],m[1]=_),p=0,d=-1,_=0;_<=v;_++)(L=_<v?this.Ck[_]:1)!=p&&(o=this.VA(),n.dh(p,L,o),d!=-1&&(p=m[d],o.get().Ec(a[p])),_!=v&&(p=m[_],o.get().Rc(a[p])),p=L,this.Aw.push(this.Qw(o.get()))),d=_;return l}}throw c.i.Ra()}return!1},u.prototype.Fz=function(a,n,o){if(n.copyTo(this.Cf),this.no.length!=1)throw c.i.Ra();this.ra=a;var l=this.no[0];if(o||l.bj.tu(n.D(),a,!0)){if(l.bj.K()!=322)throw c.i.Ra();var p=(a=l.bj).fe(n.D(),!1);this.Hq[0]=p;var d=l.mB;for(o=1,p==0?(d=l.nB,o=l.lC):p==1&&(d=l.lB,o=l.kC),l=new c.h,d==0?(d=new c.h,a.ic(p,d),n=n.D(),c.mc.IG(d,n,1/(o+1),l)):0<d?(l=new c.h,a.ic(p,l)):l=n.D(),o=0,p=-1,d=0;1>=d;d++){if((n=1>d?this.Hq[d]:1)!=o){var m=this.VA();a.dh(o,n,m),p!=-1&&m.get().Ec(l),d!=1&&m.get().Rc(l),o=n,this.bt.push(this.Qw(m.get()))}p=d}this.Cf.Db(l)}},u}();c.NC=b}(W||(W={})),function(c){var C=function(){function b(u){this.Fs=this.sk=this.tb=null,this.bg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.bg=this.Vx(this.El),this.Bm=!1,this.sk=null,this.Fs=new c.h}return b.prototype.tW=function(u){if(this.ib!=u.ib)throw c.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.bg=u.bg,this.Bm=u.Bm,this.sk=null},b.prototype.ia=function(){if(this.Af!=this.Kd&&this.vD(),this.Bm)this.Kd=(this.Kd+1)%this.bg;else{if(this.Kd==this.bg)throw c.i.re();this.Kd++}return this.sk},b.prototype.ni=function(){if(this.Bm)this.Kd=(this.bg+this.Kd-1)%this.bg;else{if(this.Kd==0)throw c.i.re();this.Kd--}return this.Kd!=this.Af&&this.vD(),this.sk},b.prototype.uW=function(){this.Af=-1,this.Kd=0},b.prototype.vW=function(){this.Kd=this.bg,this.Af=-1},b.prototype.Wb=function(u,a){if(a===void 0&&(a=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.CM();if(u>=n&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-n)}a=0<=a&&a<this.ib.ea()&&u>=this.ib.Ca(a)&&u<this.ib.Wc(a)?a:this.ib.nz(u),this.El=a+1,this.gb=a,this.Af=-1,this.Kd=u-this.ib.Ca(a),this.bg=this.Vx(a),this.ib.Ca(this.gb),this.ib.ec(this.gb)},b.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.bg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},b.prototype.aj=function(){this.bg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},b.prototype.Vx=function(u){if(this.ib.Bc())return 0;var a=1;return this.ib.ec(u)&&(a=0),this.ib.Ka(u)-a},b.prototype.Pn=function(){return this.Af==this.bg-1&&this.ib.ec(this.gb)},b.prototype.DB=function(){this.Bm=!0},b.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},b.prototype.CM=function(){return this.ib.Ca(this.gb)},b.prototype.jk=function(){return this.Pn()?this.ib.Ca(this.gb):this.xb()+1},b.prototype.xm=function(){return this.Af==0},b.prototype.Rn=function(){return this.Af==this.bg-1},b.prototype.Ia=function(){return this.Kd<this.bg},b.prototype.zz=function(){return 0<this.Kd},b.prototype.Pf=function(){var u=new b(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.bg=this.bg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},b.prototype.vD=function(){if(0>this.Kd||this.Kd>=this.bg)throw c.i.re();this.Af=this.Kd;var u=this.xb();this.ib.rc();var a=this.ib.Se,n=1;switch(a!=null&&(n=7&a.read(u)),a=this.ib.description,n){case 1:this.tb==null&&(this.tb=new c.zb),this.sk=this.tb;break;case 2:throw c.i.ga("internal error");default:throw c.i.Ra()}this.sk.kg(a),n=this.jk(),this.ib.Hc(u,this.Fs),this.sk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.sk.Rc(this.Fs);for(var o=1,l=a.Ba;o<l;o++)for(var p=a.qd(o),d=c.ua.Wa(p),m=0;m<d;m++){var v=this.ib.Vc(p,u,m);this.sk.SB(p,m,v),v=this.ib.Vc(p,n,m),this.sk.IB(p,m,v)}},b.prototype.SS=function(){return this.gb==this.ib.ea()-1},b.prototype.Qn=function(){var u=this.ib.OR();return u!=null&&(7&u.read(this.Af))!=1},b}();c.SL=C}(W||(W={})),function(c){var C=function(){function b(u){u instanceof c.ba?(this.rH=u,this.za=-1,this.Gi=1):(this.mT=u.slice(0),this.za=-1,this.Gi=u.length)}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.rH!=null?this.rH:this.mT[this.za]):null},b.prototype.qe=function(){},b}();c.$c=C}(W||(W={})),function(c){var C=function(){this.next=null},b=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.eF=!1,this.aK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.sX=function(a,n,o){this.ri=a,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=o,this.jn==null&&(this.jn=c.P.lg(384,0)),this.hK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.aF(this.jn,this.Ql),this.Ql=0)},u.prototype.hK=function(){if(0<this.Vq){for(var a=0;a<this.rl;a++){for(var n=this.Yl[a];n!=null;){var o=n;n=n.next,o.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.cJ=function(a){for(this.eF=a==u.Bx,a=this.Nw;a<=this.Mw;a++)this.mN(),this.fN(a),this.TP();this.hK()},u.prototype.fy=function(a,n,o,l){if(n!=l){var p=1;if(n>l&&(p=a,a=o,o=p,p=n,n=l,l=p,p=-1),!(0>l||n>=this.rl)){0>a&&0>o?o=a=-1:a>=this.ri&&o>=this.ri&&(o=a=this.ri);var d=(o-a)/(l-n);l>this.rl&&(o=d*((l=this.rl)-n)+a),0>n&&(a=d*(0-n)+a,n=0);var m=Math.max(this.ri+1,8388607);-8388607>a?(n=(0-a)/d+n,a=0):a>m&&(n=(this.ri-a)/d+n,a=this.ri),-8388607>o?l=(0-a)/d+n:o>m&&(l=(this.ri-a)/d+n),(n=c.P.truncate(n))!=(l=c.P.truncate(l))&&((o=new C).x=c.P.truncate(4294967296*a),o.y=n,o.H=l,o.QP=c.P.truncate(4294967296*d),o.dir=p,this.Yl==null&&(this.Yl=c.P.lg(this.rl,null)),o.next=this.Yl[o.y],this.Yl[o.y]=o,o.y<this.Nw&&(this.Nw=o.y),o.H>this.Mw&&(this.Mw=o.H),this.Vq++)}}},u.prototype.mN=function(){if(this.Lh!=null){for(var a=!1,n=null,o=this.Lh;o!=null;)if(o.y++,o.y==o.H){var l=o;o=o.next,n!=null?n.next=o:this.Lh=o,l.next=null}else o.x+=o.QP,n!=null&&n.x>o.x&&(a=!0),n=o,o=o.next;a&&(this.Lh=this.$J(this.Lh))}},u.prototype.fN=function(a){if(!(a>=this.rl)){var n=this.Yl[a];if(n!=null){this.Yl[a]=null,n=this.$J(n),this.Vq-=this.aK,a=this.Lh;for(var o=!0,l=n,p=null;a!=null&&l!=null;)a.x>l.x?(o&&(this.Lh=l),o=l.next,l.next=a,p!=null&&(p.next=l),p=l,l=o):(o=a.next,a.next=l,p!=null&&(p.next=a),p=a,a=o),o=!1;this.Lh==null&&(this.Lh=n)}}},u.ZJ=function(a,n){return 0>a?0:a>n?n:a},u.prototype.TP=function(){if(this.Lh!=null){for(var a=0,n=this.Lh,o=c.P.truncate(c.P.QG(n.x)),l=n.next;l!=null;l=l.next)if(a=this.eF?1^a:a+l.dir,l.x>n.x){var p=c.P.truncate(c.P.QG(l.x));a!=0&&(n=u.ZJ(o,this.ri),(o=u.ZJ(p,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=o,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.aF(this.jn,this.Ql),this.Ql=0))),n=l,o=p}}},u.prototype.$J=function(a){for(var n=0,o=a;o!=null;o=o.next)n++;if(this.aK=n,n==1)return a;this.Lf==null?this.Lf=c.P.lg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=c.P.lg(Math.max(n,2*this.Lf.length),null));var l=0;for(o=a;o!=null;o=o.next)this.Lf[l++]=o;for(n==2?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):u.uN(this.Lf,n,function(p,d){return p==d?0:p.x<d.x?-1:p.x>d.x?1:0}),a=this.Lf[0],this.Lf[0]=null,o=a,l=1;l<n;l++)o.next=this.Lf[l],o=this.Lf[l],this.Lf[l]=null;return o.next=null,a},u.uN=function(a,n,o){if(n==a.length)a.sort(o);else{var l=a.slice(0,0),p=a.slice(n);n=a.slice(0,n).sort(o),a.length=0,a.push.apply(a,l.concat(n).concat(p))}},u.Bx=0,u}();c.Ox=b}(W||(W={})),function(c){var C=function(){function b(){}return b.prototype.wi=function(u,a){var n=this.g.Qa(u,this.Rq);if(this.Fl==n&&(this.Fl=this.oe.lb(this.Fl)),this.io==n&&(this.io=this.oe.lb(this.io)),this.oe.kd(this.LA,n),this.ck(u),a&&(a=this.g.cd(u))!=-1&&this.g.Ya(a)==u){var o=this.g.V(u);if(o!=u){if((n=this.g.cd(o))==a)return void this.g.Kf(a,o);if((o=this.g.Na(u))!=u&&(n=this.g.cd(o))==a)return void this.g.Kf(a,o)}this.g.Kf(a,-1),this.g.Yg(a,-1)}},b.prototype.jD=function(){for(var u=!1,a=new c.h;;){this.Yh==null?(this.Yh=new c.ja(0),this.Bs=new c.ja(0),this.ye=new c.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.io,o=0,l=!0;n!=this.Fl;){var p=this.oe.getData(n),d=new c.h;this.g.Hc(p,d),l&&(this.g.Hc(p,a),l=!1),d=this.g.Na(p);var m=this.g.V(p);this.g.Qa(d,this.zg)!=-559038737&&(this.Yh.add(d),this.g.Sa(d,this.zg,-559038737),this.Bs.add(p),this.ye.add(o++)),this.g.Qa(m,this.zg)!=-559038737&&(this.Yh.add(m),this.g.Sa(m,this.zg,-559038737),this.Bs.add(p),this.ye.add(o++)),n=this.oe.lb(n)}if(2>this.Yh.size)break;var v=this;for(this.ye.Wd(0,this.ye.size,function(_,M){return v.jM(_,M)}),n=0,o=this.ye.size;n<o;n++)l=this.ye.get(n),l=this.Yh.get(l),this.g.Sa(l,this.zg,n),d=new c.h,this.g.Hc(l,d);for(d=this.NM(a),n=0,o=this.ye.size;n<o;n++)(l=this.ye.get(n))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.zg,-1));if(!d)break;u=!0}return u},b.prototype.NM=function(u){for(var a=!1,n=!0;n;){n=!1;var o=0;this.ye.get(o)==-1&&(o=this.em(o));for(var l=this.em(o),p=0,d=this.ye.size;p<d&&o!=-1&&l!=-1&&o!=l;p++){var m=this.ye.get(o);l=this.ye.get(l),m=this.Yh.get(m),l=this.Yh.get(l);var v=this.g.V(m);this.g.Fv(v,u)||(v=this.g.Na(m));var _=this.g.V(l);this.g.Fv(_,u)||(_=this.g.Na(l));var M=this.ru(v,m),T=this.ru(_,l),I=M?this.g.Na(v):this.g.V(v),O=T?this.g.Na(_):this.g.V(_),R=!1;(this.tp(v)||this.tp(_)||this.tp(m)||this.tp(l)||this.tp(I)||this.tp(O))&&(R=!0),!R&&this.g.hq(m,l)&&(R=!0,this.nD(M,T,v,m,_,l)),!R&&this.g.hq(I,O)&&(R=!0,this.nD(!M,!T,v,I,_,O)),R&&(a=!0),n=n||R,o=this.em(o),l=this.em(o)}}if(!a)for(o=0,this.ye.get(o)==-1&&(o=this.em(o)),l=this.em(o),p=0,d=this.ye.size;p<d&&o!=-1&&l!=-1&&o!=l;p++)m=this.ye.get(o),l=this.ye.get(l),m=this.Yh.get(m),l=this.Yh.get(l),v=this.g.V(m),this.g.Fv(v,u)||(v=this.g.Na(m)),_=this.g.V(l),this.g.Fv(_,u)||(_=this.g.Na(l)),M=this.ru(v,m),T=this.ru(_,l),I=M?this.g.Na(v):this.g.V(v),O=T?this.g.Na(_):this.g.V(_),this.xM(M,T,m,v,I,l,_,O)&&(a=!0),o=this.em(o),l=this.em(o);return a},b.prototype.RM=function(){this.g.jc(this.Y)==1736&&this.g.Jn(this.Y)==1&&new c.Hg().EU(this.hw,this.g,this.Y,this.nd);var u=!1,a=!0;this.zg=this.Rq=-1;var n=this.g.I(this.Y),o=new c.ja(0);o.Jb(n);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var p=this.g.Ya(l),d=0,m=this.g.Ka(l);d<m;d++)o.add(p),p=this.g.V(p);var v=this.g.ud.o,_=this.g.ud.Mf;this.g.wb.rc();var M=this.g.wb.Aa[0].o;for(o.Wd(0,n,function(I,O){var R=v[_*I],L=v[_*O],G=M[2*R];R=M[2*R+1];var q=M[2*L];return(G=R<(L=M[2*L+1])?-1:R>L?1:G<q?-1:G>q?1:0)==0&&(G=(I=v[_*I+3])<(O=v[_*O+3])?-1:I==O?0:1),G}),this.Rq=this.g.Hd(),this.oe=new c.kp,this.LA=this.oe.Rh(0),this.oe.hn(n),l=0;l<n;l++)p=o.get(l),d=this.oe.addElement(this.LA,p),this.g.Sa(p,this.Rq,d);for(this.zg=this.g.Hd(),this.Fl=-1,this.XC()&&(u=!0);a;){a=!1,n=0,o=!1;do{o=!1,this.io=-1,m=0,l=new c.h,d=new c.h;for(var T=this.oe.sc(this.LA);T!=-1;)p=this.oe.getData(T),this.io!=-1?(this.g.Hc(p,d),l.rb(d)?m++:(l.N(d),this.Fl=T,0<m&&(p=this.jD())&&(o=!0,this.Fl!=-1&&(p=this.oe.getData(this.Fl),this.g.Hc(p,l))),this.io=T=this.Fl,m=0)):(this.io=T,this.g.Hc(this.oe.getData(T),l),m=0),T!=-1&&(T=this.oe.lb(T));if(this.Fl=-1,0<m&&(p=this.jD())&&(o=!0),10<n++)throw c.i.Ra();o&&this.AM(),this.XC()&&(o=!0),a=a||o&&!1,u=u||o}while(o)}return this.g.Ud(this.Rq),this.g.Ud(this.zg),c.QL.W(this.g,this.Y,this.oe,this.hw)||u},b.prototype.ru=function(u,a){return this.g.V(a)!=u},b.prototype.xM=function(u,a,n,o,l,p,d,m){if(o==d)return this.ck(n),this.ck(p),!1;var v=this.g.Qa(n,this.zg),_=this.g.Qa(l,this.zg),M=this.g.Qa(p,this.zg),T=this.g.Qa(m,this.zg),I=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,I[0]=v,n[1]=0,I[1]=_,n[2]=1,I[2]=M,n[3]=1,I[3]=T,v=1;4>v;v++){for(_=I[v],M=n[v],T=v-1;0<=T&&I[T]>_;)I[T+1]=I[T],n[T+1]=n[T],T--;I[T+1]=_,n[T+1]=M}return I=0,n[0]!=0&&(I|=1),n[1]!=0&&(I|=2),n[2]!=0&&(I|=4),n[3]!=0&&(I|=8),(I==5||I==10)&&(u==a?u?(this.g.Cc(m,o),this.g.Dc(o,m),this.g.Cc(l,d),this.g.Dc(d,l)):(this.g.Dc(m,o),this.g.Cc(o,m),this.g.Dc(l,d),this.g.Cc(d,l)):u?(this.g.Dc(o,p),this.g.Cc(p,o),this.g.Dc(d,l),this.g.Cc(l,d)):(this.g.Cc(o,p),this.g.Dc(p,o),this.g.Cc(d,l),this.g.Dc(l,d)),!0)},b.prototype.nD=function(u,a,n,o,l,p){this.EY?this.PM():this.OM(u,a,n,o,l,p)},b.prototype.PM=function(){throw c.i.ga("not implemented.")},b.prototype.OM=function(u,a,n,o,l,p){if(u!=a)u?(this.g.Cc(n,l),this.g.Dc(l,n),this.g.Cc(p,o),this.g.Dc(o,p),this.wn(l,n),this.wi(l,!0),this.g.oi(l,!0),this.ck(n),this.wn(p,o),this.wi(p,!0),this.g.oi(p,!1)):(this.g.Cc(l,n),this.g.Dc(n,l),this.g.Cc(o,p),this.g.Dc(p,o),this.wn(l,n),this.wi(l,!0),this.g.oi(l,!1),this.ck(n),this.wn(p,o),this.wi(p,!0),this.g.oi(p,!0)),this.ck(o);else{var d=u?n:o,m=a?l:p;for(u=u?o:n,a=a?p:l,l=!1,this.g.Cc(d,m),this.g.Cc(m,d),this.g.Dc(u,a),this.g.Dc(a,u),p=a;p!=m;)n=this.g.Na(p),o=this.g.V(p),this.g.Dc(p,o),this.g.Cc(p,n),l=l||p==d,p=o;l||(n=this.g.Na(m),o=this.g.V(m),this.g.Dc(m,o),this.g.Cc(m,n)),this.wn(m,d),this.wi(m,!0),this.g.oi(m,!1),this.ck(d),this.wn(a,u),this.wi(a,!0),this.g.oi(a,!1),this.ck(u)}},b.prototype.XC=function(){for(var u=!1,a=this.g.Ob(this.Y);a!=-1;){for(var n=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l&&1<l;){var p=this.g.Na(n),d=this.g.V(n);this.g.hq(p,d)?(u=!0,this.wi(n,!1),this.g.pd(n,!0),this.wi(d,!1),this.g.pd(d,!0),n=p,o=0,l=this.g.Ka(a)):(n=d,o++)}if(2>this.g.Ka(a)){for(u=this.g.Ya(a),o=0,l=this.g.Ka(a);o<l;o++)this.wi(u,!1),u=this.g.V(u);a=this.g.ar(a),u=!0}else a=this.g.Sb(a)}return u},b.prototype.tp=function(u){for(var a=!1;;){var n=this.g.V(u),o=this.g.Na(u);if(n==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(n,o)||(a=!0,this.ck(o),this.ck(n),this.wi(u,!0),this.g.oi(u,!1),this.wn(n,o),this.wi(n,!0),this.g.oi(n,!0),n==o))break;u=o}return a},b.prototype.AM=function(){for(var u=0,a=this.oe.sc(this.oe.je);a!=-1;a=this.oe.lb(a)){var n=this.oe.getData(a);this.g.cj(n,-1)}for(var o=0,l=this.g.Ob(this.Y);l!=-1;)if((a=this.g.Ya(l))==-1||this.g.cd(a)!=-1)n=l,l=this.g.Sb(l),this.g.br(n);else{this.g.cj(a,l);var p=1;for(n=this.g.V(a);n!=a;n=this.g.V(n))this.g.cj(n,l),p++;this.g.ep(l,!1),this.g.Xj(l,p),this.g.Yg(l,this.g.Na(a)),o+=p,u++,l=this.g.Sb(l)}for(a=this.oe.sc(this.oe.je);a!=-1;a=this.oe.lb(a))n=this.oe.getData(a),this.g.cd(n)==-1&&(l=this.g.hG(this.Y,n,n,null),o+=this.g.Ka(l),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,o),u=0,o=this.g.ld;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.WB(u)},b.prototype.em=function(u){for(var a=0,n=this.ye.size-1;a<n;a++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},b.prototype.wn=function(u,a){var n=this.g.Qa(a,this.Rq),o=this.g.Qa(a,this.zg);this.g.fC(u,a),this.g.Sa(a,this.Rq,n),this.g.Sa(a,this.zg,o)},b.prototype.ck=function(u){var a=this.g.Qa(u,this.zg);a!=-1&&(this.ye.set(a,-1),this.g.Sa(u,this.zg,-1))},b.W=function(u,a,n,o,l){var p=new b;return p.g=u,p.Y=a,p.rA=n,p.hw=o,p.nd=l,p.RM()},b.prototype.jM=function(u,a){var n=this.Yh.get(u),o=new c.h;this.g.Hc(n,o),n=new c.h;var l=this.Yh.get(a);return this.g.Hc(l,n),o.rb(n)?0:(l=this.Bs.get(u),u=new c.h,this.g.Hc(l,u),l=this.Bs.get(a),a=new c.h,this.g.Hc(l,a),(l=new c.h).vc(o,u),(o=new c.h).vc(n,a),c.h.pu(l,o))},b}();c.tn=C}(W||(W={})),function(c){var C;(C=c.UL||(c.UL={}))[C.Local=0]="Local",C[C.Geographic=1]="Geographic",C[C.Projected=2]="Projected",C[C.Image=3]="Image",C[C.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(c.NL||(c.NL={}));var b=function(){function u(){this.qp="",this.uu=null,this.eg=0,this.TH=this.Io=-1,this.yh=null}return u.prototype.Fc=function(){return this.eg},u.prototype.PF=function(){return 1},u.prototype.Yd=function(){var a=.001;return this.eg!=0?a=c.yr.wQ(this.eg):this.yh!=null&&(a=c.RC.xQ(this.yh)),a},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.eg!=0?c.Uc.ah(c.yr.Ny(this.eg)):this.yh!=null?c.RC.yQ(this.yh):void 0},u.Tb=function(a){if(a.eg!=0){if(c.yr.RS(a.eg)===!0)return 1;if(c.yr.TS(a.eg)===!0)return 2}return 4},u.prototype.cs=function(){var a=this.Fc();return this.Io!=-1?this.Io:(this.Io=c.yr.zK(a),this.Io!=-1?this.Io:a)},u.create=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var n=new u;return n.eg=a,n},u.kP=function(a){if(a==null||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var n=new u;return n.yh=a,n},u.prototype.Nb=function(a){return this==a||a!=null&&this.constructor==a.constructor&&this.eg==a.eg&&(this.eg!=0||this.yh===a.yh)},u.prototype.toString=function(){return"[ tol: "+this.Ln()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.qp!=="")return this.qp;var a=this.toString();if(Array.prototype.reduce)return this.qp="S"+a.split("").reduce(function(l,p){return(l=(l<<5)-l+p.charCodeAt(0))&l},0);var n=0;if(a.length===0)return"";for(var o=0;o<a.length;o++)n=(n<<5)-n+a.charCodeAt(o),n&=n;return this.qp="S"+n},u.prototype.Ln=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=c.iu.sP(this)},u.TN=2147483645,u.UN=9007199254740990,u}();c.Gg=b}(W||(W={})),function(c){var C=function(b){function u(){var a=b!==null&&b.apply(this,arguments)||this;return a.Li=null,a.KT=null,a.Jq=new c.TL,a.Fo=null,a.lw=null,a}return Ot(u,b),u.sP=function(a){var n=new u;if(n.eg=a.eg,n.Io=a.Io,n.TH=a.TH,n.yh=a.yh,n.yh!==""&&n.yh!==null){a=u.eM(n.yh);var o=u.cM(n.yh);n.Jq.Wx(a,o,c.ju.Integer64),n.ay(a),n.cy(o),n.eg=a.cs()}else a=u.dM(n.eg),n.ay(a),n.cy(null),n.Jq.Wx(a,null,c.ju.Integer64);return n},u.prototype.Yd=function(a){return this.Jq.Ln(a)},u.cM=function(a){if(0>=a.length)throw c.i.O();var n=null;try{n=c.HC.fromString(a)}catch{n=null}return n==null?null:u.WC(n,!0)},u.prototype.ay=function(a){this.Ld=a,this.Fo=this.Ld.Id()},u.prototype.cy=function(a){this.EH=a,this.KT=this.EH!=null?this.EH.Fo:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.CG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.gk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.lk=function(){return this.Ld.lk()},u.prototype.dS=function(a){return c.IC.Ky(this.Ld,a.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.gk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.ih(a),a},u.prototype.Le=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.to},u.prototype.BR=function(){if(!this.Xc())throw c.i.O("!isPannable()");var a=new c.l;return this.Ld.AR(a),a},u.prototype.rv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw c.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.gk().Zr():this.Ld.Zr()},u.prototype.JQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Fo.getUnitFactor()},u.prototype.pz=function(a){return this.Jq.pz(a)},u.prototype.tc=function(){var a=this.Tb();if(a==1)return this;if(a==3)return this.Li.gk().tc();if(a==0||a===4)throw c.i.ga("invalid call");if(this.lw!==null)return this.lw;if((a=this.gh().getGeogcs())==null)throw c.i.Ra();return this.lw=u.WE(a,this.Jq.PF())},u.WE=function(a,n){if(a==null)throw c.i.O("null pointer.");var o=new u;return a=u.ou(a,!0),o.Jq.Wx(a,null,n),o.ay(a),o.cy(null),o.eg=a.cs(),o},u.prototype.Tb=function(){var a=this.gh();if(a!=null)switch(a.getType()){case c.Tc.PE_TYPE_GEOGCS:return 1;case c.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(a,n){var o=a.getCode();if(0>=o&&0<(o=c.qf.getCode(a))){if((a=c.qf.coordsys(o))==null)throw c.i.O("Text to wkid mapping had failed: "+o);return u.ou(a,n)}if(n&&0<o&&(n=u.qx[o]))return n;n=c.Ab.zv(a,o,!1);var l=u.fK[n];return l||(a=0>=o?a:c.qf.coordsys(o),a=new c.IC(a),u.fK[n]=a,0<o&&(u.qx[o]=a),a)},u.dM=function(a){if(0>=a)throw c.i.O("Invalid or unsupported wkid: "+a);var n=u.qx[a];if(n!=null)return n;if((n=c.qf.coordsys(a))==null)throw c.i.O("Invalid or unsupported wkid: "+a);return(n=u.ou(n,!1)).cs()!=a&&(u.qx[a]=n),n},u.eM=function(a){if(a==null||a===void 0||a.length==0)throw c.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=c.qf.fromString(c.Tc.PE_TYPE_COORDSYS,a)}catch(o){throw c.i.O("Cannot create SpatialReference from text. "+o.message)}if(n===null)throw c.i.O("Cannot create SpatialReference from text. ");return u.ou(n,!0)},u.WC=function(a,n){var o,l=a.getCode();if(0>=l&&0<(l=c.qf.getCode(a))){if((l=c.qf.vertcs(l))===null)throw c.i.O();return u.WC(l,n)}if(n&&0<l&&(n=u.eK[l])||(a=c.Ab.zv(a,l,!1),n=u.gK[a]))return n;if(0>=l||(o=c.qf.vertcs(l)),o===null)throw c.i.O();return o=new c.JL(o),u.gK[a]=o,0<l&&(u.eK[l]=o),o},u.mI=function(a,n){if(n===null||n.B())return null;var o=new c.l;if(n!==null&&a.Tb()!=1){var l=a.tc(),p=l.gh();a=c.xr.Pr(a,l,null,null),(n=c.Gx.local().W(n,a,null)).A(o)}else p=a.gh(),n.A(o);return n=p.getPrimem().getLongitude(),p=p.getUnit().getUnitFactor(),new c.FC(o.v,o.G,o.C,o.H,n,p)},u.fD=function(a){var n={name:"",steps:[],_pt:null,_entry:null},o=0;for(a=a.getEntries();o<a.length;o++){var l=a[o],p={DY:!1,RY:"",QY:-1,geogtran:null};l.getDirection()===0?p.isInverse=!1:p.isInverse=!0;var d=l.getGeogtran().getCode();-1<d?p.wkid=d:p.wkt=l.getGeogtran().toString(),n.steps.push(p)}return n},u.QR=function(a,n,o,l){return o===void 0&&(o=null),o=u.mI(l,o),a=c.mp.getGTlist(a.gh(),n.gh(),2,c.mp.PE_GTLIST_OPTS_COMMON,o,1),n=null,a&&0<a.length&&(n=this.fD(a[0]),c.Lx.destroy(a)),o!==null&&o.destroy(),n},u.RR=function(a,n,o,l){var p;if(o===void 0&&(o=null),l===void 0&&(l=null),p===void 0&&(p=30),o=u.mI(l,o),a=c.mp.getGTlist(a.gh(),n.gh(),2,c.mp.PE_GTLIST_OPTS_COMMON,o,p),n=[],a&&0<a.length){for(p=0;p<a.length;p++)n.push(this.fD(a[p]));c.Lx.destroy(a)}return o!==null&&o.destroy(),n},u.qx={},u.fK={},u.eK={},u.gK={},u}(c.Gg);c.iu=C}(W||(W={})),function(c){var C,b;(b=C=c.ju||(c.ju={}))[b.Integer32=0]="Integer32",b[b.Integer64=1]="Integer64",b[b.FloatingPoint=2]="FloatingPoint";var u=function(){function a(){this.rp()}return a.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.mA=n.mA,this.Go=n.Go,this.lA=n.lA,this.Jk=n.Jk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},a.prototype.PF=function(){return this.Tm},a.prototype.rp=function(){this.Im=this.Hm=0,this.Rj=1,this.mA=0,this.Go=1,this.lA=0,this.Nq=this.Oq=this.Jk=2220446049250313e-29,this.Tm=C.FloatingPoint},a.prototype.Wx=function(n,o,l){if(this.rp(),this.Tm=l,l!=C.FloatingPoint){var p=new c.l;n.bR(p),this.Hm=p.v,this.Im=p.G}else this.Im=this.Hm=-17976931348623157e292;(p=n.Re.getType())==c.Tc.PE_TYPE_GEOGCS?(p=(l==C.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/p):p==c.Tc.PE_TYPE_PROJCS&&(p=(l==C.Integer64?1e-4:.001)*n.rm(),this.Rj=1/p),o!=null?(p=(l==C.Integer32?.001:1e-4)*o.CH,this.Go=1/p):this.Go=1e4,this.SM(),this.Jk=n.uw,this.Oq=o!=null?.001*o.CH:.001,this.Nq=2220446049250313e-29},a.prototype.SM=function(){if(this.Tm!=C.FloatingPoint){var n=this.Tm==C.Integer64?c.Gg.UN:c.Gg.TN,o=n/this.Rj,l=this.Hm+o,p=c.P.truncate((l-this.Hm)*this.Rj);p>n&&(this.Rj=n/(l-this.Hm)),o=this.Im+o,(p=c.P.truncate((o-this.Im)*this.Rj))>n&&(this.Rj=n/(o-this.Im))}},a.prototype.VB=function(n){switch(n){case 0:this.Jk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},a.prototype.Ln=function(n){switch(n){case 0:return this.Jk;case 1:return this.Oq;case 2:return this.Nq}return 0},a.prototype.pz=function(n){if(this.Tm==C.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Go;default:return 0}},a.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Jk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.mA.toString())+";m_unitsZ: "+this.Go.toString())+";m_falseM: "+this.lA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},a}();c.TL=u}(W||(W={})),function(c){function C(l,p){return 89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999),p*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(p))/(1-Math.sin(p)))]}function b(l,p,d){return l=l/6378137*57.29577951308232,d?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function u(l,p,d){var m=l.Pf();if(l.K()===33)p=p(m.Ng(),m.kh()),m.Db(p[0],p[1]);else if(l.K()===197){var v=p(l.gs(),l.js(),d);p=p(l.fs(),l.hs(),d),m.L(v[0],v[1],p[0],p[1])}else for(v=new c.h,l=0;l<m.I();l++){m.D(l,v);var _=p(v.x,v.y,d);v.na(_[0],_[1]),m.Db(l,v)}return m}function a(l){return u(l,b,!0)}function n(l){return u(l,C,!0)}var o=Math.PI/180;c.OK=function(){function l(){}return l.xu=function(p){var d=Math.sqrt(.006694379990197414),m=Math.sin(p.y*o);return c.h.construct(6378137*p.x*o,3.1677196636462314e6*(m/(1-.006694379990197414*m*m)-1/(2*d)*Math.log((1-d*m)/(1+d*m))))},l.Ux=function(p,d,m,v){var _=.0033528106647474805,M=Math.sin(m);m=Math.cos(m);var T=(1-_)*Math.tan(p),I=T*(p=1/Math.sqrt(1+T*T)),O=Math.atan2(T,m),R=(T=p*M)*T,L=1-R,G=27233160610754688e-5*L/4040829998466145e-2,q=1+G/16384*(4096+G*(G*(320-175*G)-768)),D=G/1024*(256+G*(G*(74-47*G)-128));G=v/(635675231424518e-8*q);for(var H,ee,te,Z=2*Math.PI;1e-12<Math.abs(G-Z);)te=Math.cos(2*O+G),Z=G,G=v/(635675231424518e-8*q)+D*(H=Math.sin(G))*(te+D/4*((ee=Math.cos(G))*(2*te*te-1)-D/6*te*(4*H*H-3)*(4*te*te-3)));return v=I*H-p*ee*m,L=_/16*L*(4+_*(4-3*L)),c.h.construct((d+(Math.atan2(H*M,p*ee-I*H*m)-(1-L)*_*T*(G+L*H*(te+L*ee*(2*te*te-1)))))/o,Math.atan2(I*ee+p*H*m,(1-_)*Math.sqrt(R+v*v))/o)},l.GM=function(p,d,m,v){var _=.0033528106647474805,M=v-d,T=Math.atan((1-_)*Math.tan(p)),I=Math.atan((1-_)*Math.tan(m)),O=Math.sin(T);T=Math.cos(T);var R=Math.sin(I);I=Math.cos(I);var L=M,G=1e3;do{var q=Math.sin(L),D=Math.cos(L),H=Math.sqrt(I*q*I*q+(T*R-O*I*D)*(T*R-O*I*D));if(H===0)return 0;D=O*R+T*I*D;var ee=Math.atan2(H,D),te=T*I*q/H,Z=1-te*te;q=D-2*O*R/Z,isNaN(q)&&(q=0);var ce=_/16*Z*(4+_*(4-3*Z)),ye=L;L=M+(1-ce)*_*te*(ee+ce*H*(q+ce*D*(2*q*q-1)))}while(1e-12<Math.abs(L-ye)&&0<--G);return G===0?(O=v-d,{azimuth:Math.atan2(Math.sin(O)*Math.cos(m),Math.cos(p)*Math.sin(m)-Math.sin(p)*Math.cos(m)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos(v-d))}):(d=(p=27233160610754688e-5*Z/4040829998466145e-2)/1024*(256+p*(p*(74-47*p)-128)),{azimuth:Math.atan2(I*Math.sin(L),T*R-O*I*Math.cos(L)),SQ:635675231424518e-8*(1+p/16384*(4096+p*(p*(320-175*p)-768)))*(ee-d*H*(q+d/4*(D*(2*q*q-1)-d/6*q*(4*H*H-3)*(4*q*q-3)))),PY:Math.atan2(T*Math.sin(L),T*R*Math.cos(L)-O*I)})},l.dQ=function(p){var d=p.hasAttribute(1),m=p.hasAttribute(2),v=[],_=p.ea(),M=null,T=null;d&&(M=p.vb(1)),m&&(T=p.vb(2));for(var I=new c.h,O=0;O<_;O++){for(var R=p.Ca(O),L=p.Ka(O),G=0,q=0,D=NaN,H=NaN,ee=NaN,te=NaN,Z=p.ec(O),ce=[],ye=R;ye<R+L;ye++){p.D(ye,I),te=ee=NaN;var Me=[I.x,I.y];d&&(ee=M.get(ye),Me.push(ee)),m&&(_=T.get(ye),Me.push(te)),ye==R&&Z&&(G=I.x,q=I.y,D=ee,H=te),ce.push(Me)}!Z||G==I.x&&q==I.y&&(!d||isNaN(D)&&isNaN(ee)||D==ee)&&(!m||isNaN(H)&&isNaN(te)||H==te)||ce.push(ce[0].slice(0)),v.push(ce)}return v},l.Ry=function(p,d){p=l.dQ(p),637.100877141506>d&&(d=637.100877141506);for(var m,v=[],_=0;_<p.length;_++){var M,T,I=p[_];v.push(m=[]),m.push([I[0][0],I[0][1]]);var O=I[0][0]*o,R=I[0][1]*o;for(M=0;M<I.length-1;M++){var L=I[M+1][0]*o,G=I[M+1][1]*o;if(O!==L||R!==G){L=(G=l.GM(R,O,G,L)).azimuth;var q=(G=G.SQ)/d;if(1<q){for(T=1;T<=q-1;T++){var D=l.Ux(R,O,L,T*d);m.push([D.x,D.y])}T=l.Ux(R,O,L,(G+Math.floor(q-1)*d)/2),m.push([T.x,T.y])}R=l.Ux(R,O,L,G),m.push([R.x,R.y]),O=R.x*o,R=R.y*o}}}return{kJ:v}},l.RQ=function(p){for(var d=[],m=0;m<p.length;m++){var v=p[m];v=l.Ry(v,1e4),d.push(v)}p=[];for(var _=0;_<d.length;_++){v=d[_];var M=0;for(m=0;m<v.kJ.length;m++){var T,I=v.kJ[m],O=l.xu(c.h.construct(I[0][0],I[0][1])),R=l.xu(c.h.construct(I[I.length-1][0],I[I.length-1][1])),L=R.x*O.y-O.x*R.y;for(T=0;T<I.length-1;T++)O=l.xu(c.h.construct(I[T+1][0],I[T+1][1])),L+=(R=l.xu(c.h.construct(I[T][0],I[T][1]))).x*O.y-O.x*R.y;M+=L}M/=1,p.push(M/-2)}return p},l}(),c.cb=function(){function l(){}return l.rB=function(p,d,m,v,_,M,T){l.aD[p.dc()]=d,isNaN(m)==0&&(l.gD[p.dc()]=m),isNaN(v)==0&&(l.tD[p.dc()]=v),isNaN(_)==0&&(l.VC[p.dc()]=_),l.hD[p.dc()]=M,T!==null&&(l.iD[p.dc()]=T)},l.Yw=function(p,d,m){l.mD[p.dc()+"-"+d.dc()]=m},l.tc=function(p){if((p=l.aD[p.dc()])==null)throw c.i.Fe();return p},l.bf=function(p){if((p=l.gD[p.dc()])==null)throw c.i.Fe();return p},l.xv=function(p){if((p=l.tD[p.dc()])==null)throw c.i.Fe();return p},l.gv=function(p){if((p=l.VC[p.dc()])==null)throw c.i.Fe();return p},l.ih=function(p){if((p=l.iD[p.dc()])==null)throw c.i.Fe();return c.l.construct(p[0],p[1],p[2],p[3])},l.Xc=function(p){if((p=l.hD[p.dc()])==null)throw c.i.Fe();return p},l.Bh=function(p,d,m){if(d.Nb(m))return p;var v=l.mD[d.dc()+"-"+m.dc()];if(v!==void 0)return v(p,d,m);throw c.i.Fe()},l.wt=function(){throw c.i.Fe()},l.WQ=function(){throw c.i.Fe()},l.WV=function(){throw c.i.Fe()},l.ol=function(){throw c.i.Fe()},l.kW=function(){var p=c.Gg.create(102100),d=c.Gg.create(3857),m=c.Gg.create(4326);c.cb.rB(p,m,NaN,NaN,NaN,!1,null),c.cb.rB(m,m,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),c.cb.rB(d,m,NaN,NaN,NaN,!1,null),c.cb.Yw(p,m,a),c.cb.Yw(m,p,n),c.cb.Yw(d,m,a),c.cb.Yw(m,d,n)},l.aD=[],l.gD=[],l.tD=[],l.VC=[],l.hD=[],l.iD=[],l.mD=[],l}()}(W||(W={})),W.cb.kW(),function(c){var C=function(){function b(u){this.o=new Int32Array(0),this.jo=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return b.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.jo,this.jo=u):this.Dl--,this.size--},b.prototype.U=function(u,a){return this.o[u*this.Mf+a]},b.prototype.T=function(u,a,n){this.o[u*this.Mf+a]=n},b.prototype.De=function(){var u=this.jo;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw c.i.re();this.yz(u)}u=this.Dl,this.Dl++}else this.jo=this.o[u*this.Mf];this.size++;for(var a=u*this.Mf;a<u*this.Mf+this.Mf;a++)this.o[a]=-1;return u},b.prototype.Nl=function(u){var a=this.jo;if(a==-1){if(this.Dl==this.Jg){if(2147483647<(a=this.Jg!=0?c.P.truncate(3*(this.Jg+1)/2):1)&&(a=2147483647),a==this.Jg)throw c.i.re();this.yz(a)}a=this.Dl,this.Dl++}else this.jo=this.o[a*this.Mf];this.size++;for(var n=a*this.Mf,o=0;o<u.length;o++)this.o[n+o]=u[o];return a},b.prototype.oj=function(u){this.jo=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},b.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},b.prototype.sx=function(u,a){u*=this.Mf,a*=this.Mf;for(var n=0;n<this.Mf;n++){var o=this.o[a+n];this.o[a+n]=this.o[u+n],this.o[u+n]=o}},b.prototype.aC=function(u,a,n){var o=this.o[this.Mf*a+n];this.o[this.Mf*a+n]=this.o[this.Mf*u+n],this.o[this.Mf*u+n]=o},b.FG=function(u){return 0<=u},b.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*u);a.set(this.o,0),this.o=a,this.Jg=u},b}();c.ad=C}(W||(W={})),function(c){var C,b;(b=C||(C={}))[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",b[b.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function n(o){this.Ce=o,this.Ah=NaN,this.ZG=new c.hg,this.$G=new c.hg,this.os=new c.Oc,this.ps=new c.Oc}return n.prototype.compare=function(o,l,p){if(o=o.ka(p),this.Ce.jB(l,this.ZG),this.Ce.jB(o,this.$G),l=this.ZG.get(),o=this.$G.get(),this.os.L(l.sa,l.qa),this.ps.L(o.sa,o.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;p=l.oa==l.ma;var d=o.oa==o.ma;if(p||d){if(p&&d)return 0;if(l.oa==o.oa&&l.sa==o.sa)return p?1:-1;if(l.ma==o.ma&&l.qa==o.qa)return p?-1:1}return(p=l.Me(this.Ah,this.os.pa))==(d=o.Me(this.Ah,this.ps.pa))&&((d=.5*((p=Math.min(l.ma,o.ma))+this.Ah))==this.Ah&&(d=p),p=l.Me(d,this.os.pa),d=o.Me(d,this.ps.pa)),p<d?-1:p>d?1:0},n.prototype.VJ=function(o){this.Ah=o},n}(),a=function(){function n(o){this.ib=o,this.QH=new c.hg,this.Cf=new c.h,this.qA=new c.Oc}return n.prototype.bX=function(o){this.Cf.N(o)},n.prototype.compare=function(o,l){return this.ib.jB(o.ka(l),this.QH),o=this.QH.get(),this.qA.L(o.sa,o.qa),this.Cf.x<this.qA.pa?-1:this.Cf.x>this.qA.wa?1:(o=o.Me(this.Cf.y,this.Cf.x),this.Cf.x<o?-1:this.Cf.x>o?1:0)},n}();C=function(){function n(){this.bH=this.Fi=this.Ii=this.fA=this.Zn=this.ze=this.Lc=this.lh=this.ge=null,this.Ho=this.xg=-1,this.aH=!0,this.jA=!1,this.gA=NaN,this.Pi=new c.Nd,this.WN=2147483647,this.VN=c.P.truncate(-2147483648),this.dg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(o){this.gA=o},n.prototype.$m=function(){this.ge==null&&(this.ge=new c.ad(8));var o=this.ge.De();return this.ge.T(o,1,0),o},n.prototype.nU=function(){this.Lc==null&&(this.Lc=new c.ad(8));var o=this.Lc.De();this.Lc.T(o,2,0),this.Lc.T(o,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.DJ(o,l),this.DJ(l,o),o},n.prototype.gI=function(){this.ze==null&&(this.ze=new c.ad(8));var o=this.ze.De();return this.ze.T(o,2,0),o},n.prototype.LW=function(o,l){this.ge.T(o,7,l)},n.prototype.on=function(o,l){this.ge.T(o,2,l)},n.prototype.KW=function(o,l){this.ge.T(o,1,l)},n.prototype.cX=function(o,l){this.ge.T(o,3,l)},n.prototype.$W=function(o,l){this.ge.T(o,4,l)},n.prototype.er=function(o,l){this.ge.T(o,5,l)},n.prototype.ZQ=function(o){return this.ge.U(o,5)},n.prototype.JW=function(o,l){this.ge.T(o,6,l)},n.prototype.XM=function(o,l){this.JW(l,o)},n.prototype.CJ=function(o,l){this.Lc.T(o,1,l)},n.prototype.DJ=function(o,l){this.Lc.T(o,4,l)},n.prototype.Vl=function(o,l){this.Lc.T(o,5,l)},n.prototype.Ul=function(o,l){this.Lc.T(o,6,l)},n.prototype.RW=function(o,l){this.Lc.T(o,2,l)},n.prototype.cx=function(o,l){this.Lc.T(o,3,l)},n.prototype.FF=function(o){return this.Lc.U(o,3)},n.prototype.Ht=function(o,l){this.Lc.T(o,7,l)},n.prototype.yK=function(o,l){if(this.om(o)!=-1)for(l=l?-1:o,o=this.om(o);o!=-1;o=this.ls(o))this.g.Sa(this.vj(o),this.Eq,l)},n.prototype.xx=function(o,l){o!=-1&&(this.yK(o,l),this.yK(this.ya(o),l))},n.prototype.Et=function(o,l){this.ze.T(o,1,l)},n.prototype.Xg=function(o,l){this.ze.T(o,2,l)},n.prototype.ln=function(o,l){this.ze.T(o,3,l),this.FW(o,this.YQ(l)),this.EW(l,o)},n.prototype.EW=function(o,l){this.ze.T(o,4,l)},n.prototype.FW=function(o,l){this.ze.T(o,5,l)},n.prototype.xJ=function(o,l){this.ze.T(o,6,l)},n.prototype.vJ=function(o,l){this.ze.T(o,7,l)},n.prototype.uJ=function(o,l){this.Zn.write(o,l)},n.prototype.wJ=function(o,l){this.fA.write(o,l)},n.prototype.cY=function(o){var l=0,p=0,d=this.uF(o),m=new c.h,v=new c.h,_=new c.h;this.$r(d,m),v.N(m);var M=d;do this.nm(M,_),p+=c.h.ub(v,_),this.$e(this.ya(M))!=o&&(l+=(_.x-m.x-(v.x-m.x))*(_.y-m.y+(v.y-m.y))*.5),v.N(_),M=this.kc(M);while(M!=d);this.Zn.write(o,l),this.fA.write(o,p)},n.prototype.HU=function(o,l){var p=new u(this),d=new c.Zj;d.Ee(c.P.truncate(this.xa/2)),d.Wo(p);for(var m=new c.ja(0),v=this.bh(),_=null,M=0,T=new c.h,I=this.Oe;I!=-1;I=this.Sf(I)){if((255&++M)==0&&l!=null&&!l.progress(-1,-1))throw c.i.QC();var O=this.Je(I);if(O!=-1){if(m.Dh(0),!this.ZX(d,v,m,O)){this.D(I,T),p.VJ(T.y);var R=O;do{var L=this.Bb(R,v);L!=-1&&(d.wd(L,-1),this.Kb(R,v,-2)),R=this.kc(this.ya(R))}while(O!=R);R=O;do(L=this.Bb(R,v))==-1&&(L=d.addElement(R,-1),m.add(L)),R=this.kc(this.ya(R));while(O!=R)}for(O=m.size-1;0<=O;O--)L=m.get(O),R=d.ka(L),this.Kb(this.ya(R),v,L),this.GU(d,L,o)}else this.Yy(I)==-1&&(_==null&&(_=new a(this)),this.D(I,T),_.bX(T),R=d.zW(_),O=this.Jl,R!=-1&&(L=d.ka(R),this.$e(L)==this.$e(this.ya(L))&&(L=this.IF(d,R)),L!=-1&&(O=this.$e(L))),this.XM(O,I))}this.Lg(v)},n.prototype.GU=function(o,l,p){var d=o.ka(l),m=this.$e(d);if(this.Hn(m)==-1){var v=this.IF(o,l),_=this.ya(d),M=this.$e(_);this.Mp(m),this.Mp(M);var T=this.Hn(m),I=this.Hn(M);if(v==-1&&T==-1&&(M==m?(this.ln(M,this.Jl),T=I=this.Jl):(I==-1&&(this.ln(M,this.Jl),I=this.Jl),this.ln(m,M),T=M)),v!=-1){var O=this.$e(v);I==-1&&(0>=this.Mp(O)?(I=this.Hn(O),this.ln(M,I)):(this.ln(M,O),I=O),M==m&&(T=I))}T==-1&&this.$X(m,M),p==0?this.bW(o,l,d,v,m,M):p==5?this.cW(o,l,d,_,m,M):p==4&&this.aW(d,v,m,M)}},n.prototype.bW=function(o,l,p,d,m,v){var _=this.ik(m);if(d!=-1){var M=this.ik(v),T=this.ik(this.$e(d));d=_&M&T,T^=T&this.fh(p),(T|=d)!=0&&(this.Xg(v,M|T),this.Xg(m,T|_),_=_||T)}for(l=o.lb(l);l!=-1&&(d=o.ka(l),p=this.$e(this.ya(d)),m=this.ik(p),v=this.fh(d),M=this.$e(d),d=m&(T=this.ik(M))&_,_^=_&v,(_|=d)!=0);l=o.lb(l))this.Xg(p,m|_),this.Xg(M,T|_)},n.prototype.cW=function(o,l,p,d,m,v){if(m!=v){p=this.Bb(p,this.dg),p+=this.Bb(d,this.dg),d=0;var _=new c.ja(0),M=new c.ja(0);M.add(0);for(var T=o.sc(-1);T!=l;T=o.lb(T)){var I=o.ka(T),O=this.ya(I),R=this.$e(I),L=this.$e(O);if(R!=L){if(I=this.Bb(I,this.dg),d+=I+=this.Bb(O,this.dg),O=!1,_.size!=0&&_.Gc()==L&&(M.Jf(),_.Jf(),O=!0),this.Hn(L)==-1)throw c.i.Ra();O&&this.Hn(L)==R||(M.add(d),_.add(R))}}d+=p,_.size!=0&&_.Gc()==v&&(M.Jf(),_.Jf()),d!=0?M.Gc()==0&&(o=this.g.ld,o=this.Ma(o),this.Xg(m,o)):M.Gc()!=0&&(o=this.g.ld,o=this.Ma(o),this.Xg(m,o))}},n.prototype.aW=function(o,l,p,d){var m=this.Ma(this.g.ld);if(l==-1)this.Xg(d,this.Ho),(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,m):this.Xg(p,this.Ho);else{var v=this.ik(d);v==0?(v=this.ik(this.$e(l)),this.Xg(d,v),(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,v==m?this.Ho:m):this.Xg(p,v)):(1&(o=this.Bb(o,this.xg)))!=0?this.Xg(p,v==m?this.Ho:m):this.Xg(p,v)}},n.prototype.ZX=function(o,l,p,d){var m=d,v=-1,_=-1,M=0;do{if(M==2)return!1;var T=this.Bb(m,l);if(T!=-1){if(v!=-1)return!1;v=T}else{if(_!=-1)return!1;_=m}M++,m=this.kc(this.ya(m))}while(d!=m);return _!=-1&&v!=-1&&(this.Kb(o.ka(v),l,-2),o.Uj(v,_),p.add(v),!0)},n.prototype.$X=function(o,l){var p=this.Mp(o);if(p!=0){var d=this.Mp(l);0<p&&0>d||0>p&&0<d?this.ln(o,l):(l=this.Hn(l))!=-1&&this.ln(o,l)}},n.prototype.pP=function(o,l){this.Eq=this.g.Hd();for(var p=0,d=l.size;p<d;p++){var m=l.get(p),v=this.g.Qa(m,this.Em),_=this.g.Rf(this.g.cd(m)),M=this.g.jc(_);if(c.ba.Ic(M)){var T=this.g.V(m);if(T!=-1){var I=this.g.Qa(T,this.Em);if(v!=I){var O=this.nU(),R=this.ya(O),L=this.lh.De();this.lh.T(L,0,m),this.lh.T(L,1,-1),this.Ht(O,L),this.CJ(O,v),(L=this.Je(v))==-1?(this.on(v,O),this.Vl(O,R),this.Ul(R,O)):(v=this.ue(L),this.Vl(L,R),this.Ul(R,L),this.Ul(v,O),this.Vl(O,v)),this.CJ(R,I),(v=this.Je(I))==-1?(this.on(I,R),this.Ul(O,R),this.Vl(R,O)):(I=this.ue(v),this.Vl(v,O),this.Ul(O,v),this.Ul(I,R),this.Vl(R,I)),_=this.Ma(_),o==0?(this.Kb(R,this.be,0),this.Kb(O,this.be,M==1736?_:0)):o==5?(I=new c.h,this.g.D(m,I),m=new c.h,this.g.D(T,m),v=T=0,0>I.compare(m)?T=1:v=-1,this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.dg,T),this.Kb(R,this.dg,v)):o==7?(this.Kb(R,this.be,this.Ho),this.Kb(O,this.be,M==1736?_:0)):o==4&&(this.Kb(R,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.xg,1),this.Kb(R,this.xg,1)),M=M==1736?this.VN:0,this.cx(O,_|M),this.cx(R,_|M)}}}}},n.prototype.NT=function(o,l){var p=this.om(l);if(p!=-1){var d=this.om(o);this.lh.T(p,1,d),this.Ht(o,p),this.Ht(l,-1)}o=this.ya(o),l=this.ya(l),(p=this.om(l))!=-1&&(d=this.om(o),this.lh.T(p,1,d),this.Ht(o,p),this.Ht(l,-1))},n.prototype.AX=function(o){function l(ee,te){return d.BO(ee,te)}var p=new c.ja(0);p.Jb(10);for(var d=this,m=this.Oe;m!=-1;m=this.Sf(m)){p.clear(!1);var v=this.Je(m);if(v!=-1){var _=v;do p.add(_),_=this.kc(this.ya(_));while(_!=v);if(1<p.size){if(_=!0,2<p.size)p.Wd(0,p.size,l),p.add(p.get(0));else if(0<this.AO(p.get(0),p.get(1))){var M=p.get(0);p.set(0,p.get(1)),p.set(1,M)}else _=!1;for(var T=M=p.get(0),I=this.vf(T),O=this.ya(T),R=-1,L=1,G=p.size;L<G;L++){var q=p.get(L),D=this.ya(q),H=this.kk(D);if(H==I&&q!=T){if(o==0)R=this.FF(T)|this.FF(q),this.cx(T,R),this.cx(O,R),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(q,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(D,this.be));else if(this.dg!=-1)R=this.Bb(T,this.dg)+this.Bb(q,this.dg),D=this.Bb(O,this.dg)+this.Bb(D,this.dg),this.Kb(T,this.dg,R),this.Kb(O,this.dg,D);else{if(o==7)return void(this.Pi=new c.Nd(5,m,-1));this.xg!=-1&&(R=this.Bb(T,this.xg)+this.Bb(q,this.xg),D=this.Bb(O,this.xg)+this.Bb(D,this.xg),this.Kb(T,this.xg,R),this.Kb(O,this.xg,D))}this.NT(T,q),this.Gy(q),R=T,p.set(L,-1),q==M&&(p.set(0,-1),M=-1)}else this.xx(R,!1),R=-1,T=q,I=H,O=D}if(this.xx(R,!1),R=-1,_){for(M=-1,L=0,G=p.size;L<G;L++)if((q=p.get(L))!=-1){if(M==-1)T=M=q,I=this.vf(T),O=this.ya(T);else if(q!=T&&(D=this.ya(q),H=this.kk(D),this.Ul(O,q),this.Vl(q,O),T=q,I=H,O=D,o==7&&(this.Bb(q,this.be)|this.Bb(this.ue(q),this.be))==(1|this.Ho)))return void(this.Pi=new c.Nd(5,m,-1))}this.on(m,M)}else{for(M=-1,L=0,G=p.size;L<G;L++)if((q=p.get(L))!=-1){M=q;break}v!=M&&this.on(m,M)}}}}},n.prototype.QN=function(){for(var o=-1,l=this.bh(),p=this.Oe;p!=-1;p=this.Sf(p)){var d=this.Je(p);if(d!=-1){var m=d;do{if(this.Bb(m,l)!=1){var v=this.gI();this.Et(v,m),this.vJ(v,o),o!=-1&&this.xJ(o,v),o=v;var _=0,M=m;do _|=this.Bb(M,this.be),this.RW(M,v),this.Kb(M,l,1),M=this.kc(M);while(M!=m);this.Xg(v,_)}m=this.kc(this.ya(m))}while(m!=d)}}v=this.gI(),this.Et(v,-1),this.vJ(v,o),o!=-1&&this.xJ(o,v),this.Jl=v,this.Zn=c.ce.rf(this.ze.size,NaN),this.fA=c.ce.rf(this.ze.size,NaN),this.uJ(this.Jl,1/0),this.wJ(this.Jl,1/0),this.Lg(l)},n.prototype.lR=function(o,l,p){if((l=l!=-1?l:this.Je(o))==-1)return-1;for(o=l;;){if(this.Bb(l,p)!=1)return l;if((l=this.kc(this.ya(l)))==o)return-1}},n.prototype.qW=function(){for(var o=this.bh(),l=this.Oe;l!=-1;l=this.Sf(l))for(var p=-1;;){var d=this.lR(l,p,o);if(d==-1)break;p=this.kc(this.ya(d));for(var m=d;;){var v=this.kc(m),_=this.ue(m),M=this.ya(m);if(_==M){if(this.CP(m),p!=m&&p!=M||(p=-1),m==d||_==d){if(m==(d=v)||_==d)break;m=v;continue}}else this.Kb(m,o,1);if((m=v)==d)break}}this.Lg(o)},n.prototype.GB=function(o,l,p,d,m){this.Wg(),this.aH=m,this.g=o,this.Dq=this.g.VE(),(o=new c.ja(0)).Jb(p!=null?this.g.I(p.get(0)):this.g.gd);var v=0,_=1,M=p!=null?p.get(0):this.g.ld;for(m=1;M!=-1;){this.g.BJ(M,this.Dq,_),_<<=1;for(var T=this.g.Ob(M);T!=-1;T=this.g.Sb(T))for(var I=this.g.Ya(T),O=0,R=this.g.Ka(T);O<R;O++)o.add(I),I=this.g.V(I);c.ba.Sn(this.g.jc(M))||(v+=this.g.ea(M)),p!=null?(M=m<p.size?p.get(m):-1,m++):M=this.g.ve(M)}for(this.Ho=_,this.xa=o.size,this.g.nx(o,this.xa),this.lh==null&&(this.lh=new c.ad(2),this.ge=new c.ad(8),this.Lc=new c.ad(8),this.ze=new c.ad(8)),this.lh.Ee(this.xa),c.np.Bp(d),this.ge.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,v)),this.Em=this.g.Hd(),p=new c.h,m=0,v=new c.h,p.Sc(),_=0;_<=this.xa;_++)if(_<this.xa?(I=o.get(_),this.g.D(I,v)):v.Sc(),!p.rb(v)){if(m<_){for(I=this.$m(),R=O=-1;m<_;m++)R=o.get(m),this.g.Sa(R,this.Em,I),M=this.lh.De(),this.lh.T(M,0,R),this.lh.T(M,1,O),O=M,T=this.g.cd(R),M=this.g.Rf(T),M=this.Ma(M),this.KW(I,this.yd(I)|M);this.LW(I,O),this.er(I,this.g.Va(R)),this.Qs!=-1&&this.$W(this.Qs,I),this.cX(I,this.Qs),this.Qs=I,this.Oe==-1&&(this.Oe=I)}m=_,p.N(v)}c.np.Bp(d),this.be=this.bh(),l==5&&(this.dg=this.bh()),l==4&&(this.xg=this.bh()),this.pP(l,o),this.Pi.Lj==0&&(this.AX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.rO()?(this.QN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.aH&&this.HU(l,d))):this.jA=!0))},n.prototype.Gy=function(o){var l=this.kc(o),p=this.ue(o),d=this.ya(o),m=this.kc(d),v=this.ue(d);l!=d&&(this.Ul(v,l),this.Vl(l,v)),p!=d&&(this.Ul(p,m),this.Vl(m,p)),p=this.kk(o),this.Je(p)==o&&(m!=o?this.on(p,m):this.on(p,-1)),m=this.kk(d),this.Je(m)==d&&(l!=d?this.on(m,l):this.on(m,-1)),this.Lc.kd(o),this.Lc.kd(d)},n.prototype.IF=function(o,l){for(;;){if((l=o.xe(l))==-1)return-1;var p=o.ka(l);if(this.$e(p)!=this.$e(this.ya(p)))return p}},n.prototype.fr=function(o,l){var p;p===void 0&&(p=!0),this.GB(o,0,null,l,p)},n.prototype.pJ=function(o,l,p){var d=new c.ja(0);d.add(l),this.GB(o,4,d,p,o.jc(l)==1736)},n.prototype.qJ=function(o,l,p){var d=new c.ja(0);d.add(l),this.GB(o,5,d,p,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.pW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.dg!=-1&&(this.Lg(this.dg),this.dg=-1),this.xg!=-1&&(this.Lg(this.xg),this.xg=-1),this.g=null,this.ge.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.bH!=null&&(this.bH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.Zn=null)},n.prototype.Je=function(o){return this.ge.U(o,2)},n.prototype.D=function(o,l){this.g.YF(this.ZQ(o),l)},n.prototype.yd=function(o){return this.ge.U(o,1)},n.prototype.Sf=function(o){return this.ge.U(o,4)},n.prototype.Yy=function(o){return this.ge.U(o,6)},n.prototype.mm=function(o){return this.ge.U(o,7)},n.prototype.ls=function(o){return this.lh.U(o,1)},n.prototype.vj=function(o){return this.lh.U(o,0)},n.prototype.ng=function(o,l){return(l=this.Fi[l]).size<=o?-1:l.read(o)},n.prototype.pn=function(o,l,p){(l=this.Fi[l]).size<=o&&l.resize(this.ge.size,-1),l.write(o,p)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var o=c.ja.rf(this.ge.Jg,-1),l=0,p=this.Fi.length;l<p;l++)if(this.Fi[l]==null)return this.Fi[l]=o,l;return this.Fi.push(o),this.Fi.length-1},n.prototype.Gp=function(o){this.Fi[o]=null},n.prototype.kk=function(o){return this.Lc.U(o,1)},n.prototype.vf=function(o){return this.kk(this.ya(o))},n.prototype.ya=function(o){return this.Lc.U(o,4)},n.prototype.ue=function(o){return this.Lc.U(o,5)},n.prototype.kc=function(o){return this.Lc.U(o,6)},n.prototype.$e=function(o){return this.Lc.U(o,2)},n.prototype.af=function(o){return this.ik(this.Lc.U(o,2))},n.prototype.om=function(o){return this.Lc.U(o,7)},n.prototype.$r=function(o,l){this.D(this.kk(o),l)},n.prototype.nm=function(o,l){this.D(this.vf(o),l)},n.prototype.fh=function(o){return this.Lc.U(o,3)&this.WN},n.prototype.Bb=function(o,l){return(l=this.Ii[l]).size<=o?-1:l.read(o)},n.prototype.Kb=function(o,l,p){(l=this.Ii[l]).size<=o&&l.resize(this.Lc.size,-1),l.write(o,p)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var o=c.ja.rf(this.Lc.Jg,-1),l=0,p=this.Ii.length;l<p;l++)if(this.Ii[l]==null)return this.Ii[l]=o,l;return this.Ii.push(o),this.Ii.length-1},n.prototype.Lg=function(o){this.Ii[o]=null},n.prototype.CP=function(o){var l=this.$e(o),p=this.ya(o),d=this.kc(o);d==p&&(d=this.kc(d))==o&&(d=-1);var m=this.uF(l);m!==o&&m!=p||this.Et(l,d),p=this.Zn.read(l),isNaN(p)||(this.uJ(l,NaN),this.wJ(l,NaN)),this.xx(o,!0),this.Gy(o)},n.prototype.DP=function(o){for(var l=0,p=o.size;l<p;l++){var d=o.get(l),m=this.$e(this.ya(d));this.Et(this.$e(d),-1),this.Et(m,-1),this.xx(d,!0),this.Gy(d)}},n.prototype.uF=function(o){return this.ze.U(o,1)},n.prototype.ik=function(o){return this.ze.U(o,2)},n.prototype.Hn=function(o){return this.ze.U(o,3)},n.prototype.YQ=function(o){return this.ze.U(o,4)},n.prototype.Mp=function(o){var l=this.Zn.read(o);return isNaN(l)&&(this.cY(o),l=this.Zn.read(o)),l},n.prototype.Ma=function(o){return this.g.EF(o,this.Dq)},n.prototype.Ie=function(o){return this.g.Qa(o,this.Em)},n.prototype.nR=function(o){return this.g.Qa(o,this.Eq)},n.prototype.mR=function(o,l){var p=this.Je(o);if(p==-1)return-1;var d=p,m=-1,v=-1;do{if(this.vf(d)==l)return d;if(m==-1){if((m=this.Je(l))==-1)break;v=m}if(this.vf(v)==o)return this.ya(v);d=this.kc(this.ya(d)),v=this.kc(this.ya(v))}while(d!=p&&v!=m);return-1},n.prototype.jB=function(o,l){l.Qr(),l=l.get();var p=new c.h;this.$r(o,p),l.Ec(p),this.nm(o,p),l.Rc(p)},n.prototype.BO=function(o,l){if(o==l)return 0;var p=new c.h;this.nm(o,p);var d=new c.h;return this.nm(l,d),p.rb(d)?0:(l=new c.h,this.$r(o,l),(o=new c.h).vc(p,l),(p=new c.h).vc(d,l),c.h.pu(o,p))},n.prototype.AO=function(o,l){if(o==l)return 0;var p=new c.h;this.nm(o,p);var d=new c.h;return this.nm(l,d),p.rb(d)?0:(l=new c.h,this.$r(o,l),(o=new c.h).vc(p,l),(p=new c.h).vc(d,l),0<=p.y&&0<o.y?c.h.pu(o,p):0)},n.prototype.rO=function(){for(var o=c.mc.ox(this.gA),l=new c.h,p=new c.h,d=new c.h,m=new c.h,v=new c.h,_=this.Oe;_!=-1;_=this.Sf(_)){var M=this.Je(_);if(M!=-1){var T=M;this.$r(T,l),this.nm(T,p),v.vc(p,l);var I=v.Tk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,d),m.vc(d,l),O=m.Tk();var R=m.yi(v);if(R*R/(O*I)*Math.min(O,I)<=o)return!1;v.N(m),I=O,p.N(d)}}while(T!=M)}}return!0},n}(),c.ku=C}(W||(W={})),function(c){var C=function(){function b(){this.j=null,this.iH=new c.h,this.jH=new c.h,this.Ij=null,this.Ov=!1,this.vl=-1}return b.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},b.prototype.fl=function(u,a,n,o){var l=c.ba.uf(this.j.g.jc(n));if(c.ba.uf(this.j.g.jc(a))!=2||l!=1)throw c.i.Ra();this.zP(u,a,n,o)},b.prototype.fr=function(u,a){this.j==null&&(this.j=new c.ku),this.j.fr(u,a)},b.prototype.Gt=function(u,a,n){for(c.Uk.W(u,a,n,!0),a=u.ld;a!=-1;a=u.ve(a))u.jc(a)==1736&&c.tn.W(u,a,-1,this.Ov,n);this.fr(u,n)},b.prototype.GE=function(u,a,n,o,l){var p=this.j.g;if(p.jc(u)==1736)for(u=p.Ob(u);u!=-1;u=p.Sb(u)){var d=p.Ya(u);this.j.Ie(d),this.j.Ie(p.V(d));var m=this.j.nR(d);if(m!=-1){var v=this.j.Bb(m,n);if(v!=1&&v!=2)if(this.cf(this.j.af(m))){this.j.Kb(m,n,1),v=p.wf(a,-1);var _=m,M=this.j.Ie(d),T=1;do{var I=this.um(d,l);p.kj(v,I),o!=-1&&this.j.pn(M,o,1),this.j.Kb(_,n,1),_=this.j.kc(_);do var O=(I=T==1?p.V(d):p.Na(d))!=-1?this.j.Ie(I):-1;while(O==M);var R=this.j.kk(_);if(R!=O){do O=(I=T==1?p.Na(d):p.V(d))!=-1?this.j.Ie(I):-1;while(O==M);R!=O?(O=R,I=this.j.vj(this.j.mm(O))):T=-T}M=O,d=I}while(_!=m);p.mn(v,!0)}else this.j.Kb(m,n,2)}}},b.prototype.ZE=function(){for(var u=this.j.bh(),a=new c.ja(0),n=this.j.Oe;n!=-1;n=this.j.Sf(n)){var o=this.j.Je(n),l=o;if(o!=-1)do{if(this.j.Bb(l,u)!=1){var p=this.j.ya(l);this.j.Kb(p,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(p))&&a.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=o)}this.j.Lg(u),this.j.DP(a)},b.prototype.um=function(u,a){return a==-1?u:this.UR(u,a)},b.prototype.UR=function(u,a){var n=this.j.g,o=this.j.mm(this.j.Ie(u));do{var l=this.j.vj(o);if(n.Rf(n.cd(l))==a)return l;o=this.j.ls(o)}while(o!=-1);return u},b.prototype.Qt=function(u,a,n){this.ZE();var o=this.j.g,l=o.Kg(1736),p=this.j.bh();return this.oK(u,a,l,n,p,-1),this.j.Lg(p),c.tn.W(o,l,1,this.Ov,null),l},b.prototype.oK=function(u,a,n,o,l,p){for(this.GE(u,n,l,p,o),a!=-1&&this.GE(a,n,l,p,o),u=this.j.g,a=this.j.Oe;a!=-1;a=this.j.Sf(a)){var d=this.j.Je(a);if(d!=-1){var m=d;do{var v=this.j.Bb(m,l);if(v!=1&&v!=2)if(this.cf(this.j.af(m))){v=u.wf(n,-1);var _=m;do{var M=this.j.om(_);M!=-1?M=this.j.vj(M):(M=this.j.vj(this.j.om(this.j.ya(_))),M=this.j.g.V(M)),M=this.um(M,o),u.kj(v,M),this.j.Kb(_,l,1),p!=-1&&(M=this.j.Ie(M),this.j.pn(M,p,1)),_=this.j.kc(_)}while(_!=m);u.mn(v,!0)}else this.j.Kb(m,l,2);m=this.j.kc(this.j.ya(m))}while(m!=d)}}},b.prototype.TX=function(u,a,n){var o=this.j.g,l=o.Kg(1736),p=o.Kg(1607),d=o.Kg(550);this.ZE();var m=-1,v=this.j.bh(),_=this.j.Fp();for(this.oK(u,a,l,n,v,_),u=this.j.Oe;u!=-1;u=this.j.Sf(u))if((a=this.j.Je(u))!=-1){var M=a;do{var T=this.j.Bb(M,v),I=this.j.Bb(this.j.ya(M),v);if((T|=I)==2)if(T=this.j.fh(M),this.cf(T)){var O=o.wf(p,-1),R=M;T=this.$w(u,o),T=this.um(T,n),o.kj(O,T),this.j.pn(u,_,1);do{if(T=this.j.vf(R),I=this.$w(T,o),I=this.um(I,n),o.kj(O,I),this.j.Kb(R,v,1),this.j.Kb(this.j.ya(R),v,1),this.j.pn(T,_,1),R=this.j.kc(R),T=this.j.Bb(R,v),(T|=I=this.j.Bb(this.j.ya(R),v))!=2)break;if(T=this.j.fh(R),!this.cf(T)){this.j.Kb(R,v,1),this.j.Kb(this.j.ya(R),v,1);break}}while(R!=M)}else this.j.Kb(M,v,1),this.j.Kb(this.j.ya(M),v,1);M=this.j.kc(this.j.ya(M))}while(M!=a)}for(u=this.j.Oe;u!=-1;u=this.j.Sf(u))(T=this.j.ng(u,_))!=1&&(T=this.j.yd(u),this.cf(T)&&(m==-1&&(m=o.wf(d,-1)),(a=this.j.mm(u))!=-1&&(a=this.j.vj(a),T=this.um(a,n),o.kj(m,T))));return this.j.Gp(_),this.j.Lg(v),c.tn.W(o,l,1,this.Ov,null),(n=[])[0]=d,n[1]=p,n[2]=l,n},b.prototype.$w=function(u,a){var n=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var o=this.j.vj(u);n==-1&&(n=o);var l=this.j.Ma(a.Rf(a.cd(o)));if(this.cf(l)){n=o;break}}return n},b.prototype.fB=function(u,a){for(var n=this.ll(a),o=this.j.kk(a),l=this.j.vf(a),p=0,d=0,m=this.j.mm(o);m!=-1;m=this.j.ls(m)){var v=this.j.vj(m),_=u.cd(v),M=this.j.Ma(u.Rf(_));_=u.Ya(_),(M=(M&n)!=0)&&_==v&&(this.vl=a);var T=u.V(v);T!=-1&&this.j.Ie(T)==l?(p++,M&&(this.vl===-1&&_==T&&(v=this.j.kc(a),this.cf(this.ll(v))&&(this.vl=v)),d++)):(v=u.Na(v))!=-1&&this.j.Ie(v)==l&&(p--,M&&(this.vl===-1&&_===v&&(v=this.j.kc(a),this.cf(this.ll(v))&&(this.vl=v)),d--))}return this.j.D(o,this.iH),this.j.D(l,this.jH),(d!=0?d:p)*(u=c.h.ub(this.iH,this.jH))},b.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},b.prototype.rK=function(u){for(var a=this.j.ya(this.j.ue(u)),n=-1;a!=u;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.ue(a))}return n!=-1?this.j.ya(n):-1},b.prototype.sK=function(u){for(var a=this.j.ya(this.j.kc(u)),n=-1;a!=u;){if(this.cf(this.ll(a))){if(n!=-1)return-1;n=a}a=this.j.ya(this.j.kc(a))}return n!=-1?this.j.ya(n):-1},b.prototype.gJ=function(u,a,n,o,l){var p=this.j.g,d=u,m=this.j.ya(d);this.j.Kb(d,n,1),this.j.Kb(m,n,1),this.vl=-1;for(var v=this.fB(p,d),_=d,M=-1,T=!1,I=1;;){var O=this.j.ue(d);if(O==m)break;if(m=this.j.kc(m),this.j.ya(O)!=m){if((d=this.rK(d))==-1){T=!0;break}m=this.j.ya(d)}else d=O;if(d==u){M=u;break}if(O=this.ll(d),!this.cf(O))break;this.j.Kb(d,n,1),this.j.Kb(m,n,1),_=d,v+=this.fB(p,d),I++}if(M==-1)for(d=u,m=this.j.ya(d),M=d;(u=this.j.kc(d))!=m;){if(m=this.j.ue(m),this.j.ya(u)!=m){if((d=this.sK(d))==-1){T=!0;break}m=this.j.ya(d)}else d=u;if(O=this.ll(d),!this.cf(O))break;this.j.Kb(d,n,1),this.j.Kb(m,n,1),M=d,v+=this.fB(p,d),I++}else if(this.vl!=-1&&(_=this.vl,M=this.j.ue(this.vl),this.j.ya(M)!=this.j.kc(this.j.ya(_))&&(M=this.rK(_))==-1))throw c.i.Ra();for(0<=v||(d=M,M=this.j.ya(_),_=this.j.ya(d)),n=p.wf(a,-1),d=_,_=this.j.kk(_),T=this.j.vf(M)==_&&T,v=this.$w(_,p),v=this.um(v,l),p.kj(n,v),o!=-1&&this.j.pn(_,o,1),_=0,I=T?c.P.truncate((I+1)/2):-1;u=this.j.vf(d),v=this.$w(u,p),v=this.um(v,l),p.kj(n,v),_++,o!=-1&&this.j.pn(u,o,1),T&&_==I&&(n=p.wf(a,-1),p.kj(n,v)),d!=M;)if(u=this.j.kc(d),this.j.ue(this.j.ya(d))!=this.j.ya(u)){if((d=this.sK(d))==-1)throw c.i.Ra()}else d=u},b.prototype.Rt=function(u){for(var a=this.j.g.Kg(1607),n=this.j.bh(),o=this.j.Oe;o!=-1;o=this.j.Sf(o)){var l=this.j.Je(o),p=l;do this.j.Bb(p,n)!=1&&this.cf(this.ll(p))&&this.gJ(p,a,n,-1,u),p=this.j.kc(this.j.ya(p));while(p!=l)}return this.j.Lg(n),a},b.prototype.UX=function(u){for(var a=this.j.g,n=a.Kg(1607),o=a.Kg(550),l=this.j.bh(),p=this.j.Fp(),d=-1,m=this.j.Oe;m!=-1;m=this.j.Sf(m)){var v=this.j.Je(m),_=v;do{var M=this.j.Bb(_,l);M!=1&&(M=this.ll(_),this.cf(M)&&this.gJ(_,n,l,p,u)),_=this.j.kc(this.j.ya(_))}while(_!=v)}for(m=this.j.Oe;m!=-1;m=this.j.Sf(m))(M=this.j.ng(m,p))!=1&&(M=this.j.yd(m),this.cf(M)&&(d==-1&&(d=a.wf(o,-1)),(v=this.j.mm(m))!=-1&&(v=this.j.vj(v),v=this.um(v,u),a.kj(d,v))));return this.j.Lg(l),this.j.Gp(p),(u=[])[0]=o,u[1]=n,u},b.prototype.pr=function(){for(var u=this.j.g,a=u.Kg(550),n=u.wf(a,-1),o=this.j.Oe;o!=-1;o=this.j.Sf(o))if(this.cf(this.j.yd(o))){for(var l=-1,p=this.j.mm(o);p!=-1;p=this.j.ls(p)){var d=this.j.vj(p);l==-1&&(l=d);var m=this.j.Ma(u.Rf(u.cd(d)));if(this.cf(m)){l=d;break}}u.kj(n,l)}return a},b.prototype.eq=function(u){this.Ij=[];for(var a=0;a<u;a++)this.Ij[a]=!1},b.TV=function(u,a,n){var o=u.Ja(),l=Array(1e3);c.P.bv(l,null);var p=c.P.lg(1e3,0),d=u.I(),m=!0,v=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();for(var _=0;_<d;){var M=c.P.truncate(u.dW(l,_)-_);v?c.jd.mK(a,l,M,n,p):c.jd.nK(a,l,M,n,p);for(var T=0,I=0;I<M;I++)p[I]==0&&(m&&(m=!1,o.Gd(u,0,_)),T!=I&&o.Gd(u,_+T,_+I),T=I+1);m||T==M||o.Gd(u,_+T,_+M),_+=M}return m?u:o},b.tG=function(u,a,n){return u instanceof c.de?b.TV(u,a,n):a instanceof c.Ta?u.B()||a.B()?u.Ja():c.Uk.rU(n,u,a)?c.Uk.wO(u,a):u.Ja():b.UV(u,a,n)},b.Cv=function(u,a,n,o){var l=new c.l;u.A(l);var p=new c.l;a.A(p);var d=new c.l;if(d.L(l),d.$b(p),n=c.ta.Xd(n,d,!0),(d=new c.l).L(p),p=c.ta.Gr(n),d.X(p,p),!l.isIntersecting(d)){if(u.Eb()<=a.Eb())return b.mi(b.Ue(u.Ja()),u,"&");if(u.Eb()>a.Eb())return b.mi(b.Ue(a.Ja()),u,"&")}return p=new b,d=(l=new c.hd).Ib(b.Ue(u)),a=l.Ib(b.Ue(a)),p.Gt(l,n,o),o=p.Cv(d,a),u=b.mi(l.Ke(o),u,"&"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},b.UV=function(u,a,n){if(u.B()||a.B())return u.Ja();var o=[null],l=[0],p=a.Eb()==2;if(a.Eb()!=1&&a.Eb()!=2)throw c.i.Ra();return o[0]=u.D(),p?c.jd.mK(a,o,1,n,l):c.jd.nK(a,o,1,n,l),l[0]==0?u.Ja():u},b.prototype.DU=function(u,a,n,o,l){if(u.B())return u;var p=new c.hd;return u=p.Ib(u),this.Nk(p,u,a,n,o,l)},b.prototype.FU=function(u,a,n,o,l,p){if(l&&u.jc(a)!=550){var d=new c.LC;d.LX(u,n),d.Pg?(c.Uk.W(u,n,p,!0),l=!1):this.j.ty(n)}else c.Uk.W(u,n,p,!0),l=!1;if(o&&u.jc(a)!=550?this.j.qJ(u,a,p):this.j.pJ(u,a,p),this.j.jA)return this.j.Wg(),this.j=null,this.Nk(u,a,n,o,!1,p);if(this.j.ty(NaN),p=this.j.Ma(a),this.eq(p+1),this.Ij[p]=!0,u.jc(a)==1736||o&&u.jc(a)!=550)return u.Zo(a,0),a=this.Qt(a,-1,-1),(u=u.Ke(a)).Zo(0),l?u.Eh(1,0):(u.Eh(2,n),u.hm()),u;if(u.jc(a)==1607)return a=this.Rt(-1),u=u.Ke(a),l||u.Eh(2,n),u;if(u.jc(a)==550)return a=this.pr(),u=u.Ke(a),l||u.Eh(2,n),u;throw c.i.Ra()},b.prototype.Nk=function(u,a,n,o,l,p){this.j=new c.ku;try{return this.FU(u,a,n,o,l,p)}finally{this.j.Wg()}},b.Nk=function(u,a,n,o,l){return new b().DU(u,a,n,o,l)},b.prototype.EU=function(u,a,n,o){this.Ov=u,this.j=new c.ku,u=a.Jn(n);var l=a.jc(n);if(u!=1||l==550?this.j.pJ(a,n,o):this.j.qJ(a,n,o),!this.j.jA)if(this.j.ty(NaN),o=this.j.Ma(n),this.eq(o+1),this.Ij[o]=!0,a.jc(n)==1736||u==1&&a.jc(n)!=550)a.Zo(n,0),o=this.Qt(n,-1,-1),a.bC(o,n),a.vB(o);else if(a.jc(n)==1607)o=this.Rt(-1),a.bC(o,n),a.vB(o);else{if(a.jc(n)!=550)throw c.i.ga("internal error");o=this.pr(),a.bC(o,n),a.vB(o)}},b.prototype.km=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a));if(n>o)return u;var l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)]=!0,n==2&&o==2)return this.Qt(u,a,-1);if(n==1&&o==2||n==1&&o==1)return this.Rt(-1);if(n==0)return this.pr();throw c.i.Ra()},b.prototype.Cv=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)|this.j.Ma(a)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),n==2&&o==2)return this.Qt(u,a,l);if(n==1&&0<o||o==1&&0<n)return this.Rt(l);if(n==0||o==0)return this.pr();throw c.i.Ra()},b.prototype.Kz=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)|this.j.Ma(a)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),n==2&&o==2)return this.TX(u,a,l);if(n==1&&0<o||o==1&&0<n)return this.UX(l);if(n==0||o==0)return(u=[])[0]=this.pr(),u;throw c.i.Ra()},b.prototype.fp=function(u,a){var n=c.ba.uf(this.j.g.jc(u)),o=c.ba.uf(this.j.g.jc(a)),l=this.j.Ma(u),p=this.j.Ma(a);if(this.eq(1+(l|p)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(a)]=!0,n==2&&o==2)return this.Qt(u,a,-1);if(n==1&&o==1)return this.Rt(-1);if(n==0&&o==0)return this.pr();throw c.i.Ra()},b.Ue=function(u){var a=u.K();return a==197?(a=new c.Ea(u.description),u.B()||a.bd(u,!1),a):a==33?(a=new c.de(u.description),u.B()||a.add(u),a):a==322?(a=new c.Ua(u.description),u.B()||a.oc(u,!0),a):u},b.mi=function(u,a,n){var o=u.K();return o==197?(a=new c.Ea(u.description),u.B()||a.bd(u,!1),a):o!=33||n!="|"&&n!="^"?o==322?(a=new c.Ua(u.description),u.B()||a.oc(u,!0),a):o==33&&n=="-"&&a.K()==33||o==550&&n=="&"&&a.K()==33?(a=new c.Ta(u.description),u.B()||u.we(0,a),a):u:(a=new c.de(u.description),u.B()||a.add(u),a)},b.km=function(u,a,n,o){if(u.B()||a.B()||u.Eb()>a.Eb())return b.mi(b.Ue(u),u,"-");var l=new c.l;u.A(l);var p=new c.l;if(a.A(p),!l.isIntersecting(p))return b.mi(b.Ue(u),u,"-");var d=new c.l;return d.L(l),d.$b(p),n=c.ta.Xd(n,d,!0),p=new b,d=(l=new c.hd).Ib(b.Ue(u)),a=l.Ib(b.Ue(a)),p.Gt(l,n,o),o=p.km(d,a),o=l.Ke(o),u=b.mi(o,u,"-"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},b.PP=function(u,a,n){if(2>u.length)throw c.i.O("not enough geometries to dissolve");for(var o=0,l=0,p=u.length;l<p;l++)o=Math.max(u[l].Eb(),o);var d=new c.l;d.Pa();var m=new c.hd,v=-1,_=0,M=-1;for(l=0,p=u.length;l<p;l++)if(u[l].Eb()==o)if(u[l].B())M==-1&&(M=l);else{M=l,v==-1?v=m.Ib(b.Ue(u[l])):m.oN(v,b.Ue(u[l]));var T=new c.l;u[l].yc(T),d.$b(T),_++}return 2>_?b.Ue(u[M]):(u=o==2,a=c.ta.Xd(o==0?a:null,d,!0),new b().Nk(m,v,a,u,!0,n))},b.Kz=function(u,a,n,o){var l=[null,null,null],p=new c.l;u.A(p);var d=new c.l;a.A(d);var m=new c.l;if(m.L(p),m.$b(d),n=c.ta.Xd(n,m,!0),(m=new c.l).L(d),d=c.ta.Gr(n),m.X(d,d),!p.isIntersecting(m)){if(u.Eb()<=a.Eb())return l[(u=b.mi(b.Ue(u.Ja()),u,"&")).Eb()]=u,l;if(u.Eb()>a.Eb())return l[(u=b.mi(b.Ue(a.Ja()),u,"&")).Eb()]=u,l}for(d=new b,m=(p=new c.hd).Ib(b.Ue(u)),a=p.Ib(b.Ue(a)),d.Gt(p,n,o),o=d.Kz(m,a),a=0;a<o.length;a++)d=b.mi(p.Ke(o[a]),u,"&"),c.ba.Ic(d.K())&&(d.Eh(2,n),d.K()==1736&&d.hm()),l[d.Eb()]=d;return l},b.fp=function(u,a,n,o){if(u.Eb()>a.Eb())return b.mi(b.Ue(u),u,"^");if(u.Eb()<a.Eb()||u.B())return b.mi(b.Ue(a),u,"^");if(a.B())return b.mi(b.Ue(u),u,"^");var l=new c.l;u.A(l);var p=new c.l;a.A(p);var d=new c.l;return d.L(l),d.$b(p),n=c.ta.Xd(n,d,!0),p=new b,d=(l=new c.hd).Ib(b.Ue(u)),a=l.Ib(b.Ue(a)),p.Gt(l,n,o),o=p.fp(d,a),u=b.mi(l.Ke(o),u,"^"),c.ba.Ic(u.K())&&(u.Eh(2,n),u.K()==1736&&u.hm()),u},b.prototype.FQ=function(u,a){var n=this.j.g;u=n.wf(u,-1);for(var o=a.size,l=0;l<o;l++){var p=a.get(l);n.kj(u,p)}n.mn(u,!0)},b.prototype.SW=function(u,a){for(var n=this.j.g,o=n.ld;o!=-1;o=n.ve(o))if(o==a)for(var l=n.Ob(o);l!=-1;l=n.Sb(l)){var p=n.Ya(l);if(p!=-1)for(var d=n.V(p);d!=-1;){p=this.j.Ie(p);var m=this.j.Ie(d);(p=this.j.mR(p,m))!=-1&&(m=this.j.ya(p),this.j.Kb(p,u,1),this.j.Kb(m,u,2)),p=d,d=n.V(p)}}},b.prototype.VV=function(u,a,n,o){n=this.j.Ma(n),o=this.j.Ma(o);var l=new c.ja(0);l.Jb(256);for(var p=this.j.g,d=this.j.bh(),m=this.j.Oe;m!=-1;m=this.j.Sf(m)){var v=this.j.Je(m);if(v!=-1){var _=v;do{if(this.j.Bb(_,d)!=1){var M=_,T=_,I=!1,O=0;do{if(this.j.Kb(M,d,1),!I){var R=this.j.fh(M);(R&o)!=0&&(this.j.af(M)&n)!=0&&(T=M,I=!0)}I&&(l.add(this.j.vj(this.j.mm(this.j.kk(M)))),u!=-1&&((R=this.j.fh(M))&o)!=0&&(O|=R=this.j.Bb(M,u))),M=this.j.kc(M)}while(M!=T);I&&0<this.j.Mp(this.j.$e(T))&&(M=p.Kg(1736),this.FQ(M,l),a!=-1&&p.BJ(M,a,O)),l.clear(!1)}_=this.j.kc(this.j.ya(_))}while(_!=v)}}this.j.Lg(d)},b.prototype.zP=function(u,a,n,o){this.j.qW();var l=-1;u!=-1&&(l=this.j.bh(),this.SW(l,n)),this.VV(l,u,a,n),l!=-1&&(this.j.Lg(l),l=-1);var p=this.j.g;for(u=0,l=p.ld;l!=-1;l=p.ve(l))l!=a&&l!=n&&(o.add(l),u++);o.Wd(0,u,function(d,m){return(d=p.qz(p.Ob(d)))<(m=p.qz(p.Ob(m)))?-1:d==m?0:1})},b.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},b}();c.Hg=C}(W||(W={})),function(c){var C=function(){function b(u){u!==void 0?this.Jt(u):this.LB()}return b.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},b.prototype.Nb=function(u){return this==u||u instanceof b&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},b.prototype.dc=function(){return c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj(),c.P.wj()},b.prototype.Gh=function(u,a){var n=this.qb*u.x+this.bb*u.y+this.Qb;a.x=this.eb*u.x+this.jb*u.y+this.Lb,a.y=n},b.prototype.XX=function(u,a,n){for(var o=0;o<a;o++){var l=u[o].x,p=u[o].y,d=this.eb*l+this.jb*p+this.Lb;l=this.qb*l+this.bb*p+this.Qb,n[o]!=null?n[o].na(d,l):n[o]=c.h.construct(d,l)}},b.prototype.multiply=function(u){b.multiply(this,u,this)},b.multiply=function(u,a,n){var o=u.eb*a.eb+u.qb*a.jb,l=u.jb*a.eb+u.bb*a.jb,p=u.Lb*a.eb+u.Qb*a.jb+a.Lb,d=u.eb*a.qb+u.qb*a.bb,m=u.jb*a.qb+u.bb*a.bb;u=u.Lb*a.qb+u.Qb*a.bb+a.Qb,n.eb=o,n.jb=l,n.Lb=p,n.qb=d,n.bb=m,n.Qb=u},b.prototype.Pf=function(){var u=new b;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},b.prototype.gC=function(u){if(!u.B()){for(var a=[],n=0;4>n;n++)a[n]=new c.h;u.hB(a),this.YX(a,a),u.bx(a,4)}},b.prototype.YX=function(u,a){for(var n=0;n<u.length;n++){var o=new c.h,l=u[n];o.x=this.eb*l.x+this.jb*l.y+this.Lb,o.y=this.qb*l.x+this.bb*l.y+this.Qb,a[n]=o}},b.prototype.iS=function(u,a){u.B()||a.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=a.S()/u.S(),this.bb=a.da()/u.da(),this.Lb=a.v-u.v*this.eb,this.Qb=a.G-u.G*this.bb)},b.prototype.WX=function(u){var a=new c.h,n=new c.h;a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.sub(a);var o=.5*a.Tk();return a.na(this.eb,this.qb),n.na(this.jb,this.bb),a.add(n),u*(o>(a=.5*a.Tk())?Math.sqrt(o):Math.sqrt(a))},b.prototype.LB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},b.prototype.isIdentity=function(u){if(u!==void 0){var a=c.h.construct(0,1);return this.Gh(a,a),a.sub(c.h.construct(0,1)),a.Tk()>u*u?!1:(a.na(0,0),this.Gh(a,a),!(a.Tk()>u*u)&&(a.na(1,0),this.Gh(a,a),a.sub(c.h.construct(1,0)),a.Tk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},b.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},b.prototype.gg=function(u,a){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=a},b.prototype.Jt=function(u,a){a!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(u,u)},b.prototype.UB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},b.prototype.gX=function(u){this.hX(Math.cos(u),Math.sin(u))},b.prototype.hX=function(u,a){this.eb=u,this.jb=-a,this.Lb=0,this.qb=a,this.bb=u,this.Qb=0},b.prototype.shift=function(u,a){this.Lb+=u,this.Qb+=a},b.prototype.scale=function(u,a){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=a,this.bb*=a,this.Qb*=a},b.prototype.flipX=function(u,a){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+a-this.Lb},b.prototype.flipY=function(u,a){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+a-this.Qb},b.prototype.rotate=function(u){var a=new b;a.gX(u),this.multiply(a)},b.prototype.inverse=function(u){if(u!==void 0){var a=this.eb*this.bb-this.jb*this.qb;a==0?u.lx():(a=1/a,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*a,u.eb=this.bb*a,u.jb=-this.jb*a,u.qb=-this.qb*a,u.bb=this.eb*a)}else this.inverse(this)},b}();c.Ed=C}(W||(W={})),function(c){var C=function(){function b(){}return b.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},b.prototype.Jt=function(u,a){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=a,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},b.prototype.translate=function(u,a,n){this.Lb+=u,this.Qb+=a,this.Cg+=n},b.prototype.gC=function(u){if(!u.B()){for(var a=new c.Od[8],n=0;8>n;n++)a[n]=new c.Od;u.hB(a),this.transform(a,8,a),u.bx(a)}},b.prototype.transform=function(u,a,n){for(var o=0;o<a;o++){var l=new c.Od,p=u[o];l.x=this.eb*p.x+this.jb*p.y+this.Ve*p.z+this.Lb,l.y=this.qb*p.x+this.bb*p.y+this.We*p.z+this.Qb,l.z=this.pf*p.x+this.Ye*p.y+this.Ze*p.z+this.Cg,n[o]=l}},b.prototype.gp=function(u){var a=new c.Od;return a.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,a.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,a.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,a},b.prototype.Ag=function(u){b.multiply(this,u,this)},b.multiply=function(u,a,n){var o=u.eb*a.eb+u.qb*a.jb+u.pf*a.Ve,l=u.eb*a.qb+u.qb*a.bb+u.pf*a.We,p=u.eb*a.pf+u.qb*a.Ye+u.pf*a.Ze,d=u.jb*a.eb+u.bb*a.jb+u.Ye*a.Ve,m=u.jb*a.qb+u.bb*a.bb+u.Ye*a.We,v=u.jb*a.pf+u.bb*a.Ye+u.Ye*a.Ze,_=u.Ve*a.eb+u.We*a.jb+u.Ze*a.Ve,M=u.Ve*a.qb+u.We*a.bb+u.Ze*a.We,T=u.Ve*a.pf+u.We*a.Ye+u.Ze*a.Ze,I=u.Lb*a.eb+u.Qb*a.jb+u.Cg*a.Ve+a.Lb,O=u.Lb*a.qb+u.Qb*a.bb+u.Cg*a.We+a.Qb;u=u.Lb*a.pf+u.Qb*a.Ye+u.Cg*a.Ze+a.Cg,n.eb=o,n.qb=l,n.pf=p,n.jb=d,n.bb=m,n.Ye=v,n.Ve=_,n.We=M,n.Ze=T,n.Lb=I,n.Qb=O,n.Cg=u},b.inverse=function(u,a){var n=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(n==0)throw c.i.ga("math singularity");var o=1/n;n=(u.bb*u.Ze-u.Ye*u.We)*o;var l=-(u.jb*u.Ze-u.Ye*u.Ve)*o,p=(u.jb*u.We-u.bb*u.Ve)*o,d=-(u.qb*u.Ze-u.We*u.pf)*o,m=(u.eb*u.Ze-u.pf*u.Ve)*o,v=-(u.eb*u.We-u.qb*u.Ve)*o,_=(u.qb*u.Ye-u.pf*u.bb)*o,M=-(u.eb*u.Ye-u.pf*u.jb)*o;o*=u.eb*u.bb-u.qb*u.jb;var T=-(u.Lb*n+u.Qb*l+u.Cg*p),I=-(u.Lb*d+u.Qb*m+u.Cg*v);u=-(u.Lb*_+u.Qb*M+u.Cg*o),a.eb=n,a.qb=d,a.pf=_,a.jb=l,a.bb=m,a.Ye=M,a.Ve=p,a.We=v,a.Ze=o,a.Lb=T,a.Qb=I,a.Cg=u},b.prototype.Pf=function(){var u=new b;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},b}();c.BY=C}(W||(W={})),function(c){var C=function(u){function a(n){if(n!==void 0)n=u.call(this,n.dc(),n)||this;else{(n=u.call(this)||this).cg=[],n.cg[0]=0,n.Ba=1,n.wh=[];for(var o=0;10>o;o++)n.wh[o]=-1;n.wh[n.cg[0]]=0}return n.lq=!0,n}return Ot(a,u),a.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.dD())},a.prototype.removeAttribute=function(n){if(n==0)throw c.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.dD())},a.prototype.reset=function(){this.cg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.cg[0]]=0,this.lq=!0},a.prototype.yF=function(){return b.fz().add(this)},a.og=function(){return b.fz().TR()},a.prototype.nM=function(){var n=this.dc();return new c.ua(n,this)},a.prototype.dD=function(){for(var n=this.Ba=0,o=0;10>n;n++)0<=this.wh[n]&&(this.cg[o]=n,this.wh[n]=o,o++,this.Ba++);this.lq=!0},a.prototype.dc=function(){return this.lq&&(this.yl=this.Bn(),this.lq=!1),this.yl},a.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof a)||n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.cg[o]!=n.cg[o])return!1;return this.lq==n.lq},a.prototype.AG=function(n){if(n.Ba!=this.Ba)return!1;for(var o=0;o<this.Ba;o++)if(this.cg[o]!=n.cg[o])return!1;return!0},a.Kw=function(n,o){for(var l=[],p=0;p<n.Ba;p++)l[p]=-1;p=0;for(var d=n.Ba;p<d;p++)l[p]=o.Qf(n.qd(p));return l},a.vR=function(n,o){return(n=new a(n)).se(o),n.yF()},a.wR=function(n,o){for(var l=null,p=0;10>p;p++)!n.hasAttribute(p)&&o.hasAttribute(p)&&(l==null&&(l=new a(n)),l.se(p));return l!=null?l.yF():n},a}(c.ua);c.ee=C;var b=function(){function u(){this.map=[];var a=new C;this.add(a),(a=new C).se(1),this.add(a)}return u.fz=function(){return u.WK},u.prototype.TR=function(){return u.gt},u.prototype.add=function(a){var n=a.dc();if(u.gt!=null&&u.gt.dc()==n&&a.AG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==n&&a.AG(u.Fw))return u.Fw;var o=null;return this.map[n]!==void 0&&(o=this.map[n]),o==null&&((o=a.nM()).Ba==1?u.gt=o:o.Ba==2&&o.qd(1)==1?u.Fw=o:this.map[n]=o),o},u.WK=new u,u}()}(W||(W={}));var Wp={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},qh={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},uu=new(function(){function c(){this.LM=50,this.op=new Map,this.ij=[]}return c.prototype.clear=function(){this.ij.length=0,this.op.clear()},c.prototype.delete=function(C){return!!this.op.delete(C)&&(this.ij.splice(this.ij.indexOf(C),1),!0)},c.prototype.get=function(C){var b=this.op.get(C);if(b!==void 0)return this.ij[0]!==C&&(this.ij.splice(this.ij.indexOf(C),1),this.ij.unshift(C)),b},c.prototype.has=function(C){return this.op.has(C)},c.prototype.set=function(C,b){return this.get(C)!==void 0&&this.delete(C),this.ij.unshift(C),this.op.set(C,b),this.iM(),this},c.prototype.iM=function(){for(;this.ij.length&&this.ij.length>this.LM;){var C=this.ij.pop();this.op.delete(C)}},c}()),Pe=((zi={}).convertJSONToGeometry=function(c){return W.bc.$O(c)},zi.hasM=function(c){return c.hasAttribute(W.Kh.M)},zi.hasZ=function(c){return c.hasAttribute(W.Kh.Z)},zi.getPointX=function(c){return c.Ng()},zi.getPointY=function(c){return c.kh()},zi.getPointZ=function(c){return c.VR()},zi.getPointM=function(c){return c.tR()},zi.getXMin=function(c){return c.gs()},zi.getYMin=function(c){return c.js()},zi.getXMax=function(c){return c.fs()},zi.getYMax=function(c){return c.hs()},zi.getZExtent=function(c){return c.Vg(W.Kh.Z,0)},zi.getMExtent=function(c){return c.Vg(W.Kh.M,0)},zi.exportPaths=function(c){var C=[],b=c.ea(),u=null,a=null,n=c.hasAttribute(W.Kh.Z),o=c.hasAttribute(W.Kh.M);n&&(u=c.vb(W.Kh.Z)),o&&(a=c.vb(W.Kh.M));for(var l=new W.h,p=0;p<b;p++){for(var d=c.Ca(p),m=c.Ka(p),v=0,_=0,M=NaN,T=NaN,I=NaN,O=NaN,R=c.ec(p),L=[],G=d;G<d+m;G++){c.D(G,l),O=I=NaN;var q=[l.x,l.y];n&&(I=u.get(G),q.push(I)),o&&(O=a.get(G),q.push(O)),G==d&&R&&(v=l.x,_=l.y,M=I,T=O),L.push(q)}!R||v==l.x&&_==l.y&&(!n||isNaN(M)&&isNaN(I)||M==I)&&(!o||isNaN(T)&&isNaN(O)||T==O)||L.push(L[0].slice(0)),C.push(L)}return C},zi.exportPathsFlat=function(){},zi.exportPoints=function(c){var C=c.hasAttribute(W.Kh.Z),b=c.hasAttribute(W.Kh.M),u=null,a=null;C&&(u=c.vb(W.Kh.Z)),b&&(a=c.vb(W.Kh.M));for(var n=new W.h,o=c.I(),l=[],p=0;p<o;p++){c.D(p,n);var d=[n.x,n.y];C&&d.push(u.get(p)),b&&d.push(a.get(p)),l.push(d)}return l},zi.exportPointsFlat=function(){},zi);return function(){function c(){}return c.buffer=Kt,c.clip=P,c.contains=F,c.convexHull=Ae,c.crosses=V,c.cut=N,c.densify=lu,c.difference=Fe,c.disjoint=ae,c.distance=U,c.equals=X,c.extendedSpatialReferenceInfo=A,c.generalize=au,c.geodesicArea=qp,c.geodesicBuffer=bt,c.geodesicDensify=Gh,c.geodesicLength=jf,c.intersect=Ge,c.intersects=re,c.isSimple=Ee,c.nearestCoordinate=yi,c.nearestVertex=Es,c.nearestVertices=ra,c.offset=ht,c.overlaps=le,c.planarArea=Uh,c.planarLength=Ff,c.relate=Te,c.simplify=Oe,c.symmetricDifference=ze,c.touches=he,c.union=ke,c.within=pe,c.rotate=W.Dx.rotate,c.flipHorizontal=W.Dx.DQ,c.flipVertical=W.Dx.EQ,c.ExtendedParams=W.sC,c._enableProjection=Df,c._project=Gf,c._getTransformation=zf,c._getTransformationBySuitability=Vf,c}()}var r=i();r!==void 0&&(e.exports=r)})(U6);const kt=U6.exports,NH=PH({__proto__:null,default:kt},[U6.exports]),RH=Object.freeze(Object.defineProperty({__proto__:null,G:kt,g:NH},Symbol.toStringTag,{value:"Module"}));function g(e,t,i,r){var s,h=arguments.length,y=h<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,r);else for(var f=e.length-1;f>=0;f--)(s=e[f])&&(y=(h<3?s(y):h>3?s(t,i,y):s(t,i))||y);return h>3&&y&&Object.defineProperty(t,i,y),y}const LH=null;function Y(e){return e!=null}function oe(e){return e==null}function Oa(e,t){return Y(e)?t(e):LH}function A_e(e){return e}function FH(e,t){if(oe(e))throw new Error(t);return e}function Gr(e,t){return Y(e)?e:typeof t=="function"?t():t}function k_e(e,t){return Y(e)?e:t}function Pr(e){return Y(e)&&e.destroy(),null}function C_e(e){return Y(e)&&e.dispose(),null}function Hn(e){return Y(e)&&e.remove(),null}function pp(e){return Y(e)&&e.abort(),null}function O_e(e){return Y(e)&&e.release(),null}function jH(e,t,i){return Y(e)&&Y(t)?Y(i)?i(e,t):e.equals(t):e===t}function DH(e){return null}function P_e(e,t){const i=new Array;for(const r of e)i.push(v1(r,null,t));return i}function N_e(e,t){for(const i of e)Oa(i,t)}function v1(e,t,i){return Y(e)?i(e):t}function R_e(e){return e.filter(t=>Y(t))}function Jb(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function L_e(e){return e}class Do{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Do._m:t}getInt(){return this._seed=(Do._a*this._seed+Do._c)%Do._m,this._seed}getFloat(){return this.getInt()/(Do._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Do._m*r}}Do._m=2147483647,Do._a=48271,Do._c=0;function zH(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):e.filter((i,r,s)=>s.indexOf(i)===r)}function q6(e,t,i){if(oe(e)&&oe(t))return!0;if(oe(e)||oe(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function F_e(e,t){let i=e.length!==t.length;e.length=t.length;for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function j_e(e,t,i){let r,s;return i?(r=t.filter(h=>!e.some(y=>i(y,h))),s=e.filter(h=>!t.some(y=>i(y,h)))):(r=t.filter(h=>!e.includes(h)),s=e.filter(h=>!t.includes(h))),{added:r,removed:s}}function D_e(e){return e&&typeof e.length=="number"}const VH=!!Array.prototype.fill;function z_e(e,t){if(VH)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function V_e(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}function GH(e){return e.reduce((t,i)=>t.concat(i||[]),[])}class TO{constructor(){this.last=0}}const $O=new TO;function IO(e,t,i,r){r=r||$O;const s=Math.max(0,r.last-10);for(let y=s;y<i;++y)if(e[y]===t)return r.last=y,y;const h=Math.min(s,i);for(let y=0;y<h;++y)if(e[y]===t)return r.last=y,y;return-1}function B6(e,t,i,r){const s=i==null?e.length:i,h=IO(e,t,s,r);if(h!==-1)return e[h]=e[s-1],i==null&&e.pop(),t}const ao=new Set;function UH(e,t,i=e.length,r=t.length,s,h){if(r===0||i===0)return i;ao.clear();for(let f=0;f<r;++f)ao.add(t[f]);s=s||$O;const y=Math.max(0,s.last-10);for(let f=y;f<i;++f)if(ao.has(e[f])&&(h&&h.push(e[f]),ao.delete(e[f]),e[f]=e[i-1],--i,--f,ao.size===0||i===0))return ao.clear(),i;for(let f=0;f<y;++f)if(ao.has(e[f])&&(h&&h.push(e[f]),ao.delete(e[f]),e[f]=e[i-1],--i,--f,ao.size===0||i===0))return ao.clear(),i;return ao.clear(),i}new Do;function qH(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}let fh;function we(e){return typeof fh[e]=="function"?fh[e]=fh[e](globalThis):fh[e]}var yO,mO,gO,vO;fh=((yO=globalThis.dojoConfig)==null?void 0:yO.has)||((mO=globalThis.esriConfig)==null?void 0:mO.has)?{...(gO=globalThis.dojoConfig)==null?void 0:gO.has,...(vO=globalThis.esriConfig)==null?void 0:vO.has}:{},we.add=(e,t,i,r)=>((r||fh[e]===void 0)&&(fh[e]=t),i&&we(e)),we.cache=fh,we.add("esri-deprecation-warnings",!0),(()=>{var t;we.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(we.add("host-browser",e),we.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),we.add("dom",e),we("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,h=parseFloat(s);if(we.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),we.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),we.add("khtml",s.includes("Konqueror")?h:void 0),we.add("edge",parseFloat(r.split("Edge/")[1])||void 0),we.add("opr",parseFloat(r.split("OPR/")[1])||void 0),we.add("webkit",!we("wp")&&!we("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),we.add("chrome",!we("edge")&&!we("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),we.add("android",!we("wp")&&parseFloat(r.split("Android ")[1])||void 0),we.add("safari",!s.includes("Safari")||we("wp")||we("chrome")||we("android")||we("edge")||we("opr")?void 0:parseFloat(s.split("Version/")[1])),we.add("mac",s.includes("Macintosh")),!we("wp")&&r.match(/(iPhone|iPod|iPad)/)){const y=RegExp.$1.replace(/P/,"p"),f=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",w=parseFloat(f.replace(/_/,".").replace(/_/g,""));we.add(y,w),we.add("ios",w)}we.add("trident",parseFloat(s.split("Trident/")[1])||void 0),we("webkit")||(!r.includes("Gecko")||we("wp")||we("khtml")||we("trident")||we("edge")||we.add("mozilla",h),we("mozilla")&&we.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&we.add("esri-mobile",t),i&&we.add("esri-iPhone",i),we.add("esri-geolocation",!!navigator.geolocation)}we.add("esri-canvas-svg-support",!we("trident")),we.add("esri-wasm","WebAssembly"in globalThis),we.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),we.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),we.add("esri-atomics","Atomics"in globalThis),we.add("esri-workers","Worker"in globalThis),we.add("web-feat:cache","caches"in globalThis),we.add("esri-workers-arraybuffer-transfer",!we("safari")||Number(we("safari"))>=12),we.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),we.add("featurelayer-simplify-payload-size-factors",[1,1,4]),we.add("featurelayer-snapshot-enabled",!0),we.add("featurelayer-snapshot-point-min-threshold",8e4),we.add("featurelayer-snapshot-point-max-threshold",4e5),we.add("featurelayer-snapshot-point-coverage",.1),we.add("featurelayer-advanced-symbols",!1),we.add("featurelayer-pbf",!0),we.add("featurelayer-pbf-statistics",!1),we.add("feature-layers-workers",!0),we.add("feature-polyline-generalization-factor",1),we.add("mapview-transitions-duration",200),we.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),we.add("mapserver-pbf-enabled",!1),we.add("mapimagelayer-popup-identify-max-tolerance",20),we.add("heatmap-allow-raster-fallback",!0),we.add("heatmap-force-raster",!1),we("host-webworker")||we("host-browser")&&(we.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),we.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{we.add("esri-image-decode",!0,!0,!0)}).catch(()=>{we.add("esri-image-decode",!1,!0,!0)})}return!1}),we.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function G_e(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function BH(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const r=Math.max(0,i-t),s=new e.constructor(r);for(let h=0;h<r;h++)s[h]=e[t+h];return s}function U_e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function HH(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function WH(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function JH(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function KH(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function YH(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function ZH(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function XH(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function QH(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function eW(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function q_e(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[i];return t}function AO(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&AO(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function de(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=PO(e);if(Y(t))return t;if(kO(e))return e.clone();if(CO(e))return e.map(de);if(OO(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=de(e[r]);return i}function Z9(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=PO(e);if(Y(t))return t;if(CO(e)){let i=!0;const r=e.map(s=>{const h=Z9(s);return s!=null&&h==null&&(i=!1),h});return i?r:null}if(kO(e))return e.clone();if(!OO(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],h=Z9(s);if(s!=null&&h==null)return null;i[r]=h}return i}return null}function kO(e){return typeof e.clone=="function"}function CO(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function OO(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function KT(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function PO(e){if(HH(e)||WH(e)||JH(e)||KH(e)||YH(e)||ZH(e)||XH(e)||QH(e)||eW(e))return BH(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,r)=>{t.set(r,de(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(de(i))}),t}return null}function H6(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function tW(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&q6(e,t):e instanceof Set?t instanceof Set&&rW(e,t):e instanceof Map?t instanceof Map&&nW(e,t):!!KT(e)&&KT(t)&&iW(e,t))}function iW(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function rW(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function nW(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function NO(e,t,i=!1){return LO(e,t,i)}function Y0(e,t){if(t!=null)return t[e]||RO(e.split("."),!1,t)}function Ur(e,t,i){const r=e.split("."),s=r.pop(),h=RO(r,!0,i);h&&s&&(h[s]=t)}function RO(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function LO(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let h=r[s],y=t[s];return h===y?r:h===void 0?(r[s]=de(y),r):(Array.isArray(y)||Array.isArray(r)?(h=h?Array.isArray(h)?r[s]=h.concat():r[s]=[h]:r[s]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(f=>{h.includes(f)||h.push(f)}):r[s]=y.concat())):y&&typeof y=="object"?r[s]=LO(h,y,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=y),r)},e||{}):e}const sW=/\{([^\}]+)\}/g;function YT(e){return e==null?"":e}function za(e,t){return e.replace(sW,typeof t=="object"?(i,r)=>YT(Y0(r,t)):(i,r)=>YT(t(r)))}function W6(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function J6(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function B_e(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}var bO;const Lt={apiKey:void 0,applicationUrl:(bO=globalThis.location)==null?void 0:bO.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(NO(Lt,globalThis.esriConfig,!0),delete Lt.has),!Lt.assetsPath){const e="4.24.7";Lt.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Lt.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Lt,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Lt.request.corsEnabledServers=[],Lt.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const ZT={info:0,warn:1,error:2,none:3};class Le{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Le._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Le.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Le._loggers;return Le._loggers=t,i},set throttlingDisabled(t){Le._throttlingDisabled=t}}}static getLogger(t){let i=Le._loggers[t];return i||(i=new Le({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!Le._throttlingDisabled){const s=this._argsToKey(r),h=this._loggedMessages[t].get(s);if(i==="once"&&h!=null||i==="oncePerTick"&&h&&h>=Le._tickCounter)return;this._loggedMessages[t].set(s,Le._tickCounter),Le._scheduleTickCounterIncrement()}for(const s of Lt.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;Y(r);){const s=r[t];if(Y(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=Lt.log.level?Lt.log.level:"warn";return ZT[this._parentWithMember("level",i)]<=ZT[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return J6(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Le._tickCounterScheduled||(Le._tickCounterScheduled=!0,Promise.resolve().then(()=>{Le._tickCounter++,Le._tickCounterScheduled=!1}))}}Le._loggers={},Le._tickCounter=0,Le._tickCounterScheduled=!1,Le._throttlingDisabled=!1;function Em(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function H_e(e,t){for(const[i,r]of e)if(t(r,i))return r;return null}function FO(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const d0=Le.getLogger("esri.core.Accessor");function oW(e){return e==null?e:new Date(e)}function aW(e){return e==null?e:!!e}function Tm(e){return e==null?e:e.toString()}function Bs(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function K6(e){return e==null?e:Math.round(parseFloat(e))}function jO(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Kb(e,t){return t!=null&&e&&!(t instanceof e)}function DO(e){return e&&"isCollection"in e}function XT(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function lW(e,t){if(!t||!t.constructor||!DO(t.constructor))return X9(e,t)?t:new e(t);const i=XT(e.prototype.itemType),r=XT(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(X9(e,t),t):new e(t):t}function X9(e,t){return!!jO(t)&&(d0.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+f2(e)+"'"),!0)}function Y6(e,t){return t==null?t:DO(e)?lW(e,t):Kb(e,t)?X9(e,t)?t:new e(t):t}function f2(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const uW=new WeakMap;function hW(e){switch(e){case Number:return Bs;case li:return K6;case Boolean:return aW;case String:return Tm;case Date:return oW;default:return FO(uW,e,()=>Y6.bind(null,e))}}function ji(e,t){const i=hW(e);return arguments.length===1?i:i(t)}function Hy(e,t,i){return arguments.length===1?Hy.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function cW(e,t){return arguments.length===1?Hy(ji.bind(null,e)):Hy(ji.bind(null,e),t)}function zO(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>zO(e,t-1,r)):e(i)}function Yb(e,t,i){if(arguments.length===2)return Yb.bind(null,e,t);if(!i)return i;let r=t,s=i=zO(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let h=0;h<r;h++)i=[i];return i}function pW(e,t,i){return arguments.length===2?Yb(ji.bind(null,e),t):Yb(ji.bind(null,e),t,i)}function VO(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function Q9(e,t){if(arguments.length===2)return Q9(e).call(null,t);const i=new Set,r=e.filter(f=>typeof f!="function"),s=e.filter(f=>typeof f=="function");for(const f of e)typeof f!="string"&&typeof f!="number"||i.add(f);let h=null,y=null;return(f,w)=>{if(f==null)return f;const S=typeof f,E=S==="string"||S==="number";return E&&(i.has(f)||s.some(A=>S==="string"&&A===String||S==="number"&&A===Number))||S==="object"&&s.some(A=>!Kb(f,A))?f:(E&&r.length?(h||(h=r.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),d0.error("Accessor#set",`'${f}' is not a valid value for this property, only the following values are valid: ${h}`)):typeof f=="object"&&s.length?(y||(y=s.map(A=>f2(A)).join(", ")),d0.error("Accessor#set",`'${f}' is not a valid value for this property, value must be one of ${y}`)):d0.error("Accessor#set",`'${f}' is not a valid value for this property`),w&&(w.valid=!1),null)}}function Va(e,t){if(arguments.length===2)return Va(e).call(null,t);const i={},r=[],s=[];for(const w in e.typeMap){const S=e.typeMap[w];i[w]=ji(S),r.push(f2(S)),s.push(w)}const h=()=>`'${r.join("', '")}'`,y=()=>`'${s.join("', '")}'`,f=typeof e.key=="string"?w=>w[e.key]:e.key;return w=>{if(e.base&&!Kb(e.base,w)||w==null)return w;const S=f(w)||e.defaultKeyValue,E=i[S];if(!E)return d0.error("Accessor#set",`Invalid property value, value needs to be one of ${h()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Kb(e.typeMap[S],w))return w;if(typeof e.key=="string"&&!jO(w)){const A={};for(const P in w)P!==e.key&&(A[P]=w[P]);return E(A)}return E(w)}}class li{}const W_e={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function dW(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function GO(e){switch(e.type){case"native":return ji(e.value);case"array":return Hy(GO(e.value));case"one-of":return fW(e);default:return null}}function fW(e){let t=null;return(i,r)=>t5(i,e)?i:(t==null&&(t=e5(e)),d0.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function e5(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case li:return"integer";case Date:return"date";default:return f2(e.value)}case"array":return`array of ${e5(e.value)}`;case"one-of":{const t=e.values.map(i=>e5(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function t5(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case li:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!t5(i,t.value));case"one-of":return t.values.some(i=>t5(e,i))}}function y2(e){return Nh(()=>e.forEach(t=>Y(t)&&t.remove()))}function Nh(e){return{remove:()=>{e&&(e(),e=void 0)}}}function J_e(e){return Nh(()=>{const t=e();Y(t)&&t.remove()})}function K_e(e){return Nh(Y(e)?()=>e.destroy():void 0)}function nn(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function yW(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Iv(e,t,i){return i?Zb(e,t,{policy:i,path:""}):Zb(e,t,null)}function Zb(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let h=null,y="merge";if(i&&(h=i.path?`${i.path}.${s}`:s,y=i.policy(h)),y==="replace")return r[s]=t[s],r;if(r[s]===void 0)return r[s]=de(t[s]),r;let f=r[s],w=t[s];if(f===w)return r;if(Array.isArray(w)||Array.isArray(r))f=f?Array.isArray(f)?r[s]=f.concat():r[s]=[f]:r[s]=[],w&&(Array.isArray(w)||(w=[w]),w.forEach(S=>{f.includes(S)||f.push(S)}));else if(w&&typeof w=="object")if(i){const S=i.path;i.path=h,r[s]=Zb(f,w,i),i.path=S}else r[s]=Zb(f,w,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=w);return r},e||{}):e}function UO(e){return Array.isArray(e)?e:e.split(".")}function QT(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function mW(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...QT(i));return t}return QT(e)}function qO(e,t,i,r){const s=mW(t);if(s.length!==1){const h=s.map(y=>r(e,y,i));return y2(h)}return r(e,s[0],i)}function BO(e){let t=!1;return()=>{t||(t=!0,e())}}function HO(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=nn(t);return yW(r,i)?r.get(i):t[i]}function WO(e,t,i){if(e==null)return e;const r=HO(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:WO(r,t,i+1)}function $m(e,t,i=0){return typeof t!="string"||t.includes(".")?WO(e,UO(t),i):HO(t,e)}function Xb(e,t){return $m(e,t)}function e$(e,t){return $m(t,e)!==void 0}class t${constructor(t){this.autoDestroy=!1,this.properties=t}}function Im(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const r=Object.create(t.properties),s=t.autoDestroy;for(const h in r)r[h]=de(r[h]);t=new t$(r),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new t$({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function gW(e){return Im(e).properties}function m2(e,t){const i=gW(e);let r=i[t];return r||(r=i[t]={}),r}function vW(e,t){return Iv(e,t,wW)}const bW=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function wW(e){return bW.test(e)?"replace":"merge"}function _W(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=Y0(r,t),h=s==null?"":s;if(h===void 0)throw new Error(`could not find key "${r}" in template`);return h.toString()})}class g2{constructor(t,i,r){this.name=t,this.details=r,this.message=void 0,this instanceof g2&&(this.message=i&&_W(i,r)||"")}toString(){return"["+this.name+"]: "+this.message}}class ne extends g2{constructor(t,i,r){if(super(t,i,r),!(this instanceof ne))return new ne(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return de(i)}catch{return"[object]"}}))}}catch(t){throw Le.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new ne(t.name,t.message,t.details)}}ne.prototype.type="error";function Qb(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))Qb(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),h=s.splice(s.length-1,1)[0];return void Qb(Xb(e,s),h,i)}const r=e.__accessor__;r!=null&&xW(t,r),e[t]=i}}function xW(e,t){if(we("esri-unknown-property-errors")&&!SW(e,t))throw new ne("set:unknown-property",MW(e,t))}function SW(e,t){return t.metadatas[e]!=null}function MW(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Le.getLogger("esri.core.accessorSupport.set");function x(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=m2(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&Le.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const h=e.aliasOf;if(h){const w=typeof h=="string"?h:h.source,S=typeof h=="string"?null:h.overridable===!0;let E;s.dependsOn=[w],s.get=function(){let A=Xb(this,w);if(typeof A=="function"){E||(E=w.split(".").slice(0,-1).join("."));const P=Xb(this,E);P&&(A=A.bind(P))}return A},s.readOnly||(s.set=S?function(A){A!==void 0?this._override(i,A):this._clearOverride(i)}:function(A){Qb(this,w,A)})}const y=e.type,f=e.types;s.cast||(y?s.cast=EW(y):f&&(Array.isArray(f)?s.cast=Hy(Va(f[0])):s.cast=Va(f))),e.range&&(s.cast=TW(s.cast,e.range)),vW(s,e)}}function JO(e,t,i){const r=m2(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function EW(e){let t=0,i=e;if(dW(e))return GO(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(VO(r))return t===0?Q9(r):Yb(Q9(r),t);if(t===1)return cW(r);if(t>1)return pW(r,t);const s=e;return s.from?s.from:ji(s)}function TW(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}var Pa;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Pa||(Pa={}));var Zt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Zt||(Zt={}));let ew,b1=[];const $W=Le.getLogger("esri.core.Accessor");function yt(e){ew!==void 0&&ew.onObservableAccessed(e)}let Av=!1,kv=!1;function Wl(e,t,i){if(Av)return Z6(e,t,i);KO(e);const r=t.call(i);return YO(),r}function IW(e,t){return Wl(void 0,e,t)}function Z6(e,t,i){const r=Av;Av=!0,KO(e);let s=null;try{s=t.call(i)}catch(h){kv&&$W.error(h)}return YO(),Av=r,s}function KO(e){ew=e,b1.push(e)}function YO(){const e=b1.pop();ew=b1.length>0?b1[b1.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function ZO(e,t){if(t.flags&Zt.DepTrackingInitialized)return;const i=kv;kv=!1,t.flags&Zt.AutoTracked?Z6(t,t.metadata.get,e):XO(e,t),kv=i}const AW=[];function XO(e,t){t.flags&Zt.ExplicitlyTracking||(t.flags|=Zt.ExplicitlyTracking,Z6(t,()=>{const i=t.metadata.dependsOn||AW;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=UO(r);for(let h=0,y=e;h<s.length&&y!=null&&typeof y=="object";++h)y=i$(y,s[h],h!==s.length-1)}else i$(e,r,!1)}),t.flags&=~Zt.ExplicitlyTracking)}function i$(e,t,i){var h;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const y=parseInt(r,10);if(!isNaN(y))return Array.isArray(e)?e[y]:e.getItemAt(y)}const s=(h=nn(e))==null?void 0:h.properties.get(r);return s&&(yt(s),ZO(e,s)),i?e[r]:void 0}function kW(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(h=>{t[h]=s}),delete t[r]}}}class _n extends g2{constructor(t,i,r){if(super(t,i,r),!(this instanceof _n))return new _n(t,i,r)}}_n.prototype.type="warning";function QO(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const i5=Le.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function r$(e,t,i){var r,s;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((s=t.read)==null?void 0:s.enabled)===!1||PW(e)&&Ur("read.reader",Z0(e),t))}function Z0(e){var i,r,s;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return OW(e);if(t===1)return n$(e);if("type"in e&&tP(e.type)){const h=(s=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:s.Type,y=n$(typeof h=="function"?{type:h}:{types:h});return(f,w,S)=>{const E=y(f,w,S);return E&&new e.type(E)}}return X6(e)}function X6(e){return"type"in e?CW(e.type):NW(e.types)}function CW(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void i5.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const h=new e;return h.read(t,r),h}:e.fromJSON}function eP(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>eP(e,s,i,r-1)):e(t,void 0,i)}function OW(e){var s;const t=X6(e),i=eP.bind(null,t),r=(s=e.ndimArray)!=null?s:0;return(h,y,f)=>{if(h==null)return h;h=i(h,f,r);let w=r,S=h;for(;w>0&&Array.isArray(S);)w--,S=S[0];if(S!==void 0)for(let E=0;E<w;E++)h=[h];return h}}function n$(e){const t=X6(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const f of i){const w=t(f,void 0,s);w!==void 0&&y.push(w)}return y}const h=t(i,void 0,s);return h!==void 0?[h]:void 0}}function tP(e){if(!QO(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?Q6(t.Type):iP(t.Type))}function PW(e){return"types"in e?iP(e.types):Q6(e.type)}function Q6(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||tP(e))}function iP(e){for(const t in e.typeMap)if(!Q6(e.typeMap[t]))return!1;return!0}function NW(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(s,h,y)=>{if(s==null)return s;const f=typeof s;if(f!=="object")return void i5.error(`Expected JSON value of type 'object' to deserialize, but got '${f}'`);t||(t=RW(e));const w=e.key;if(typeof w!="string")return;const S=s[w],E=S?t[S]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!E){const P=`Type '${S||"unknown"}' is not supported`;return y&&y.messages&&s&&y.messages.push(new _n(`${i}:unsupported`,P,{definition:s,context:y})),void i5.error(P)}const A=new E;return A.read(s,y),A}}function RW(e){var i,r;const t={};for(const s in e.typeMap){const h=e.typeMap[s],y=Im(h.prototype);if(typeof e.key=="function")continue;const f=y.properties[e.key];if(!f)continue;((i=f.json)==null?void 0:i.type)&&Array.isArray(f.json.type)&&f.json.type.length===1&&typeof f.json.type[0]=="string"&&(t[f.json.type[0]]=h);const w=(r=f.json)==null?void 0:r.write;if(!w||!w.writer){t[s]=h;continue}const S=w.target,E=typeof S=="string"?S:e.key,A={};w.writer(s,A,E),A[E]&&(t[A[E]]=h)}return t}function LW(e){if(e.json||(e.json={}),o$(e.json),a$(e.json),s$(e.json),e.json.origins)for(const t in e.json.origins)o$(e.json.origins[t]),a$(e.json.origins[t]),s$(e.json.origins[t]);return!0}function s$(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function o$(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function a$(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const FW=Le.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function l$(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&QO(e.type))?t.write.writer=zW:i>1?t.write.writer=VW(i):t.types?Array.isArray(t.types)?t.write.writer=DW(t.types[0]):t.write.writer=jW(t.types):t.write.writer=Wy}function jW(e){return(t,i,r,s)=>t?rP(t,e,s)?Wy(t,i,r,s):void 0:Wy(t,i,r,s)}function rP(e,t,i){var r,s;for(const h in t.typeMap)if(e instanceof t.typeMap[h])return!0;if(i!=null&&i.messages){const h=(r=t.errorContext)!=null?r:"type",y=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new ne(`${h}:unsupported`,y,{definition:e,context:i})),FW.error(y)}return!1}function DW(e){return(t,i,r,s)=>!t||!Array.isArray(t)?Wy(t,i,r,s):Wy(t.filter(h=>rP(h,e,s)),i,r,s)}function Wy(e,t,i,r){Ur(i,tw(e,r),t)}function tw(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?iw(e):e}function iw(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function zW(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(h=>tw(h,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[tw(e,r)],Ur(i,s,t)}function nP(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>nP(r,t,i-1)):tw(e,t)}function VW(e){return(t,i,r,s)=>{let h;if(t===null)h=null;else{h=nP(t,s,e);let y=e,f=h;for(;y>0&&Array.isArray(f);)y--,f=f[0];if(f!==void 0)for(let w=0;w<y;w++)h=[h]}Ur(r,h,i)}}function r5(e,t){return eM(e,"read",t)}function sP(e,t){return eM(e,"write",t)}function eM(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function GW(e){const t=UW(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?qW(r):t;r$(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),l$(s,r)}r$(t,e.json,!0),l$(t,e.json)}function UW(e){return e.json.types?n5(e.json):e.type?oP(e):n5(e)}function qW(e){return e.type?oP(e):n5(e)}function oP(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!VO(i);)i=i[0],t++;return{type:i,ndimArray:t}}function n5(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function BW(e){LW(e)&&(kW(e),GW(e))}const r_=new Set,n_=new Set;function K(e){return t=>{t.prototype.declaredClass=e,WW(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!r_.has(s.initialize)&&(r_.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!n_.has(s.destroy)&&(n_.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);r_.clear(),n_.clear();class h extends t{constructor(...f){if(super(...f),this.constructor===h&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let w=i.length-1;w>=0;w--)i[w].call(this)}}),r.length){let w=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!w){w=!0;for(let S=0;S<r.length;S++)r[S].call(this)}}})}this.postscript(...f)}}}return h.__accessorMetadata__=Im(t.prototype),h.prototype.declaredClass=e,h}}function HW(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;yt(i);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function WW(e){const t=e.prototype,i=Im(t).properties,r={};for(const s of Object.getOwnPropertyNames(i)){const h=i[s];BW(h),r[s]={enumerable:!0,configurable:!0,get:HW(s,h),set(y){const f=this.__accessor__;if(f!==void 0){if(!Object.isFrozen(this)){if(f.initialized&&h.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(f.lifecycle===Pa.CONSTRUCTED&&h.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);f.set(s,y)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,r)}function Y_e(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function Z_e(e,t){for(const i of e)if(i!=null&&t(i))return i}function s5(e){return e!=null&&typeof e[Symbol.iterator]=="function"}function JW(e){return e&&e.release&&typeof e.release=="function"}function KW(e){return e&&e.acquire&&typeof e.acquire=="function"}class Zo{constructor(t,i,r,s=1,h=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=r,this.allocationSize=s,this._pool=new Array(h),this._initialSize=h,this.ctor)for(let y=0;y<h;y++)this._pool[y]=new this.ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(Zo.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):KW(i)&&i.acquire(...t),i}release(t){t&&!Zo.test.disabled&&(this.releaseFunction?this.releaseFunction(t):JW(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Zo.test={disabled:!1};var It;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(It||(It={}));const o5=It.USER+1;function yh(e){switch(e){case"defaults":return It.DEFAULTS;case"service":return It.SERVICE;case"portal-item":return It.PORTAL_ITEM;case"web-scene":return It.WEB_SCENE;case"web-map":return It.WEB_MAP;case"user":return It.USER}}function rw(e){switch(e){case It.DEFAULTS:return"defaults";case It.SERVICE:return"service";case It.PORTAL_ITEM:return"portal-item";case It.WEB_SCENE:return"web-scene";case It.WEB_MAP:return"web-map";case It.USER:return"user"}return void 0}function YW(e){return rw(e)}class aP{constructor(t,i){this._observers=t,this._observer=i}remove(){qH(this._observers,this._observer)}}class u${constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this._observers=null,this._accessed=null,this._handles=null,this.flags=Zt.Dirty|(r.nonNullable?Zt.NonNullable:0)|(r.hasOwnProperty("value")?Zt.HasDefaultValue:0)|(r.get===void 0?Zt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Zt.AutoTracked:0)}destroy(){if(this.flags&Zt.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){yt(this);const t=this.properties.store,i=this.propertyName,r=this.flags,s=t.get(i);if(r&Zt.Computing||~r&Zt.Dirty&&t.has(i))return s;this.flags|=Zt.Computing;const h=this.properties.host;let y;r&Zt.AutoTracked?y=Wl(this,this.metadata.get,h):(XO(h,this),y=this.metadata.get.call(h)),t.set(i,y,It.COMPUTED);const f=t.get(i);return f===s?this.flags&=~Zt.Dirty:IW(this.commit,this),this.flags&=~Zt.Computing,f}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Zt.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let r=0;r<t.length;++r)i.push(t[r].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new aP(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Zt.Overriden&&(this.flags|=Zt.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~Zt.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class tM{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new tM;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,de(r))}),i}get(t){return this._values.get(t)}originOf(){return It.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function lg(e,t,i){return e!==void 0}function h$(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Zt.NonNullable)||(r.lifecycle,Pa.INITIALIZING,!1))}function ZW(e){return e&&typeof e.destroy=="function"}Le.getLogger("esri.core.accessorSupport.Properties");class XW{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Pa.INITIALIZING,this.store=new tM,this._origin=It.USER;const i=this.host.constructor.__accessorMetadata__,r=i.properties;for(const s in r){const h=new u$(this,s,r[s]);this.properties.set(s,h)}this.metadatas=r,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=Pa.CONSTRUCTING}constructed(){this.lifecycle=Pa.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const r=this.internalGet(t);r&&ZW(r)&&(r.destroy(),~i.flags&Zt.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==Pa.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();yt(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.flags&Zt.HasDefaultValue)return"defaults"}return rw(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(lg(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);lg(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!lg(s))return"";const h=new Set,y=Wl({onObservableAccessed:w=>h.add(w),onTrackingEnd:()=>{}},()=>{var w;return(w=s.metadata.get)==null?void 0:w.call(t)});let f=`${r}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(h.size===0)return f;r+="  ";for(const w of h){if(!(w instanceof u$))continue;const S=w.properties.host,E=w.propertyName,A=nn(S);f+=A?A.getDependsInfo(S,E,r):`${r}${E}: undefined
`}return f}setAtOrigin(t,i,r){const s=this.properties.get(t);if(lg(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&Zt.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&Zt.Overriden&&(i.flags&=~Zt.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!h$(r,t,i,this))return;const s=r.metadata.cast;if(s){const h=this._cast(s,i),{valid:y,value:f}=h;if(s_.release(h),!y)return;i=f}r.flags|=Zt.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!h$(r,t,i,this))return;const s=r.metadata.cast;if(s){const y=this._cast(s,i),{valid:f,value:w}=y;if(s_.release(y),!f)return;i=w}const h=r.metadata.set;h?h.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=yh(t)}getDefaultOrigin(){return rw(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Pa.INITIALIZING?this._origin:It.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,h=t.propertyName;s.has(h,r)&&H6(i,s.get(h))&&~t.flags&Zt.Overriden&&r===s.originOf(h)||(t.invalidate(),s.set(h,i,r),t.commit(),ZO(this.host,t))}_cast(t,i){const r=s_.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class QW{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const s_=new Zo(QW);function eJ(e){e.length=0}class gn{constructor(t=50,i=50){this._pool=new Zo(Array,void 0,eJ,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return o_.acquire()}static release(t){return o_.release(t)}static prune(){o_.prune()}}const o_=new gn(100);class lP extends Zo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=DH(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const ug=[];function nw(e){ug.push(e),ug.length===1&&queueMicrotask(()=>{const t=ug.slice();ug.length=0;for(const i of t)i()})}const tJ=29;class wy{constructor(t,i=tJ){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var a5;(function(e){const t=(h,y,f,w)=>{let S=y,E=y;const A=f>>>1,P=h[S-1];for(;E<=A;){E=S<<1,E<f&&w(h[E-1],h[E])<0&&++E;const N=h[E-1];if(w(N,P)<=0)break;h[S-1]=N,S=E}h[S-1]=P},i=(h,y)=>h<y?-1:h>y?1:0;function r(h,y,f,w){y===void 0&&(y=0),f===void 0&&(f=h.length),w===void 0&&(w=i);for(let E=f>>>1;E>y;E--)t(h,E,f,w);const S=y+1;for(let E=f-1;E>y;E--){const A=h[y];h[y]=h[E],h[E]=A,t(h,S,E,w)}}function*s(h,y,f,w){y===void 0&&(y=0),f===void 0&&(f=h.length),w===void 0&&(w=i);for(let E=f>>>1;E>y;E--)t(h,E,f,w),yield;const S=y+1;for(let E=f-1;E>y;E--){const A=h[y];h[y]=h[E],h[E]=A,t(h,S,E,w),yield}}e.sort=r,e.iterableSort=s})(a5||(a5={}));const c$=a5,iJ=1.5,rJ=1.1;class dp{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new TO,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>p$(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,p$(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=IO(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=B6(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=UH(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){c$.sort(this.data,0,this.length,t)}iterableSort(t){return c$.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const h=this.data[s];t.call(i,h,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=h,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let h=0;h<r;++h)t.call(i,s[h],h,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function p$(e){e.data.length>iJ*e.length&&(e.data.length=Math.floor(e.length*rJ))}function nJ(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const Am=nJ(globalThis),d$=new Set;function sJ(e,t,i=!1){i&&d$.has(t)||(i&&d$.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function oJ(e,t,i={}){if(we("esri-deprecation-warnings")){const{moduleName:r}=i;uP(e,`Property: ${(r?r+"::":"")+t}`,i)}}function uP(e,t,i={}){if(we("esri-deprecation-warnings")){const{replacement:r,version:s,see:h,warnOnce:y}=i;let f=t;r&&(f+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(f+=`
	\u2699\uFE0F Version: ${s}`),h&&(f+=`
	\u{1F517} See ${h} for more details.`),sJ(e,f,y)}}function v2(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function b2(e,t,i){if(!v2(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function hP(e,t,i){if(!v2(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=b2(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}const aJ={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function Vo({key:e}){return aJ[e]||e}function bi(e="Aborted"){return new ne("AbortError",e)}function di(e,t="Aborted"){if(eo(e))throw bi(t)}function w2(e){return Y(e)?"aborted"in e?e:e.signal:e}function eo(e){const t=w2(e);return Y(t)&&t.aborted}function km(e){if(Br(e))throw e}function l5(e){if(!Br(e))throw e}function to(e,t){const i=w2(e);if(!oe(i)){if(!i.aborted)return hP(i,"abort",()=>t());t()}}function iM(e,t){const i=w2(e);if(!oe(i))return di(i),hP(i,"abort",()=>t(bi()))}function cP(e,t){const i=w2(t);return oe(i)?e:new Promise((r,s)=>{let h=to(t,()=>s(bi()));const y=()=>h=Hn(h);e.then(y,y),e.then(r,s)})}function Br(e){return e&&e.name==="AbortError"}async function u5(e){try{return await e}catch(t){if(!Br(t))throw t}}function Jl(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Nr(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(y=>e[y]),s=await Nr(r),h={};return i.map((y,f)=>h[y]=s[f]),h}const t=e;return new Promise(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(h=>{const y={promise:h||Promise.resolve(h)};r.push(y),y.promise.then(f=>{y.value=f}).catch(f=>{y.error=f}).then(()=>{--s,s===0&&i(r)})})})}async function pP(e){return(await Nr(e)).filter(t=>!!t.value).map(t=>t.value)}function rM(e,t,i){const r=new AbortController;return to(i,()=>r.abort()),new Promise((s,h)=>{let y=setTimeout(()=>{y=0,s(t)},e);to(r,()=>{y&&(clearTimeout(y),h(bi()))})})}function ru(e){return e&&typeof e.then=="function"}function h5(e){return ru(e)?e:Promise.resolve(e)}function nM(e,t=-1){let i,r,s,h,y=null;const f=(...w)=>{if(i){r=w,h&&h.reject(bi()),h=Jl();const P=h.promise;if(y){const N=y;y=null,N.abort()}return P}if(s=h||Jl(),h=null,t>0){const P=new AbortController;i=h5(e(...w,P.signal));const N=i;rM(t).then(()=>{i===N&&(h?P.abort():y=P)})}else i=1,i=h5(e(...w));const S=()=>{const P=r;r=s=i=y=null,P!=null&&f(...P)},E=i,A=s;return E.then(S,S),E.then(A.resolve,A.reject),A.promise};return f}function dP(){let e,t;const i=new Promise((s,h)=>{e=s,t=h}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,h)=>Am.setTimeout(()=>r.reject(h),s),r.promise=i,r}function fP(e,t){let i,r=new AbortController;const s=e(r.signal);let h={promise:s,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const y=()=>{h&&(h.finished=!0,h=null),Y(i)&&(i.remove(),i=null),r=null};return s.then(y,y),i=to(t,()=>{Y(h)&&h.abort()}),h}async function f$(e){await Promise.resolve(),di(e)}function X_e(e){return e}function Q_e(e){return .001*e}class lJ{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class uJ{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let c5=0;const Bf={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},p5=["prepare","preRender","render","postRender","update","finish"],d5=[],wp=new dp;class hJ{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const sw={frameTasks:wp,willDispatch:!1,clearFrameTasks:cJ,dispatch:gP,executeFrameTasks:pJ};function X0(e){const t=new uJ(e);return d5.push(t),sw.willDispatch||(sw.willDispatch=!0,nw(gP)),t}function A0(e){const t=new lJ(e);return wp.push(t),ow==null&&(c5=performance.now(),ow=requestAnimationFrame(yP)),new hJ(t)}let ow=null;function cJ(e=!1){wp.forAll(t=>{t.removed=!0}),e&&mP()}function yP(){const e=performance.now();ow=null,ow=wp.length>0?requestAnimationFrame(yP):null,sw.executeFrameTasks(e)}function pJ(e){const t=e-c5;c5=e;const i=1e3/60,r=Math.max(0,t-i);for(let s=0;s<p5.length;s++){const h=performance.now(),y=p5[s];wp.forAll(f=>{var w;f.paused||f.removed||(s===0&&f.ticks++,f.phases[y]&&(Bf.time=e,Bf.deltaTime=f.ticks===0?0:t,Bf.elapsedFrameTime=performance.now()-e,Bf.frameDuration=i-r,(w=f.phases[y])==null||w.call(f,Bf)))}),dJ[s].record(performance.now()-h)}mP(),fJ.record(performance.now()-e)}const hg=new dp;function mP(){wp.forAll(e=>{e.removed&&hg.push(e)}),wp.removeUnorderedMany(hg.data,hg.length),hg.clear()}function gP(){for(;d5.length;){const e=d5.shift();e.isActive&&e.callback()}sw.willDispatch=!1}function e9e(e=1,t){const i=dP(),r=()=>{eo(t)?i.reject(bi()):e===0?i():(--e,nw(()=>r()))};return r(),i.promise}const dJ=p5.map(e=>new wy(e)),fJ=new wy("total");function yJ(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let mJ=0;function _y(){return++mJ}class _2{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let r=0;r<i.length;++r)t.push(i[r].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let f0=!1;const aw=[];function vP(e,t){let i=new _2(h),r=null,s=!1;function h(){if(!i||s)return;if(f0)return void _P(h);const f=r;i.clear(),f0=!0,s=!0,r=Wl(i,e),s=!1,f0=!1,t(r,f),xP()}function y(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Wl(i,e),s=!1,{remove:y}}function bP(e,t){let i=new _2(s),r=null;function s(){t(r,y)}function h(){i&&(i.destroy(),i=null),r=null}function y(){return i?(i.clear(),r=Wl(i,e),r):null}return y(),{remove:h}}function wP(e){let t=new _2(r),i=!1;function r(){t&&!i&&(f0?_P(r):(t.clear(),f0=!0,i=!0,Wl(t,e),i=!1,f0=!1,xP()))}function s(){t&&(t.destroy(),t=null)}return i=!0,Wl(t,e),i=!1,{remove:s}}function _P(e){aw.includes(e)||aw.unshift(e)}function xP(){for(;aw.length;)aw.pop()()}var xy;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(xy||(xy={}));class Jy{constructor(){this.uid=_y(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,h){return this.pool.acquire(xy.Untracked,t,i,r,s,h,H6)}static acquireTracked(t,i,r,s){return this.pool.acquire(xy.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===xy.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,h,y,f){this.uid=_y(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=h,this.path=y,this.equals=f}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=_y(),this.removed=!0}}Jy.pool=new lP(Jy);const Cv=new gn,ql=new Set;let lw;function uw(e){ql.delete(e),ql.add(e),lw||(lw=X0(bJ))}function gJ(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function vJ(e){for(const t of ql.values())t.target===e&&(t.removed=!0)}function bJ(){let e=10;for(;lw&&e--;){lw=null;const t=wJ(),i=Cv.acquire();for(const r of t){const s=r.uid;gJ(r),s===r.uid&&r.removed&&i.push(r)}for(const r of ql)r.removed&&(i.push(r),ql.delete(r));for(const r of i)Jy.pool.release(r);Cv.release(i),Cv.release(t),f5.forEach(r=>r())}}function wJ(){const e=Cv.acquire();e.length=ql.size;let t=0;for(const i of ql)e[t]=i,++t;return ql.clear(),e}const f5=new Set;function _J(e){return f5.add(e),{remove(){f5.delete(e)}}}function xJ(e,t,i){let r=qO(e,t,i,(s,h,y)=>{let f,w,S=bP(()=>$m(s,h),(E,A)=>{s.__accessor__.destroyed||f&&f.uid!==w?r.remove():(f||(f=Jy.acquireUntracked(E,y,A,s,h),w=f.uid),uw(f))});return{remove:BO(()=>{S.remove(),f&&(f.uid!==w||f.removed||(f.removed=!0,uw(f)),f=null),r=S=null})}});return r}function SJ(e,t,i){const r=qO(e,t,i,(s,h,y)=>{let f=!1;return vP(()=>$m(s,h),(w,S)=>{s.__accessor__.destroyed?r.remove():f||(f=!0,H6(S,w)||y.call(s,w,S,h,s),f=!1)})});return r}function MJ(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?SJ(e,t,i):xJ(e,t,i)}function EJ(e,t,i){let r,s,h=bP(e,(y,f)=>{r&&r.uid!==s?h.remove():(r||(r=Jy.acquireTracked(y,t,f,i),s=r.uid),uw(r))});return{remove:BO(()=>{h.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,uw(r)),r=null),h=null})}}function TJ(e,t,i){let r=!1;return vP(e,(s,h)=>{r||(r=!0,i(h,s)||t(s,h),r=!1)})}function $J(e,t,i=!1,r=tW){return i?TJ(e,t,r):EJ(e,t,r)}function y$(e){return yJ(ql,t=>t.oldValue===e)}var SP;function IJ(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const w1=Symbol("Accessor-Handles");class qe{constructor(...t){if(this[SP]=null,this.constructor===qe)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new XW(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const h=this;class y extends h{constructor(...w){super(...w),this.inherited=null,s&&s.apply(this,w)}}Im(y.prototype);for(const f in t){const w=t[f];y.prototype[f]=typeof w=="function"?function(...S){const E=this.inherited;let A;this.inherited=function(...P){if(h.prototype[f])return h.prototype[f].apply(this,P)};try{A=w.apply(this,S)}catch(P){throw this.inherited=E,P}return this.inherited=E,A}:t[f]}for(const f in i){const w=IJ(i[f]);x(w)(y.prototype,f)}return K(r)(y)}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Oa(this[w1],t=>{t.forEach(i=>i.remove())}),this[w1]=null,vJ(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Pa.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Xb(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Qb(this,t,i),this}watch(t,i,r){return MJ(this,t,i,r)}own(t){let i=this[w1];if(oe(i)&&(i=this[w1]=new Set),s5(t))for(const r of t)i.add(r);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}SP=w1;class sM{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new sM;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,de(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:It.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===It.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new AJ(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===It.DEFAULTS?t:It.USER}}class AJ{constructor(t,i){this.value=t,this.origin=i}}function MP(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),It.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),It.DEFAULTS)})}function kJ(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&e$(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&e$(s,i))return!0;return!1}function CJ(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function OJ(e,t,i,r,s){let h=r5(t[i],s);CJ(h)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))h=r5(t[y],s),kJ(h,i,r)&&(e[y]=!0)}function PJ(e,t,i,r){const s=i.metadatas,h=eM(s[t],"any",r),y=h&&h.default;if(y===void 0)return;const f=typeof y=="function"?y.call(e,t,r):y;f!==void 0&&i.set(t,f)}const EP={origin:"service"};function TP(e,t,i=EP){if(!t||typeof t!="object")return;const r=nn(e),s=r.metadatas,h={};for(const y of Object.getOwnPropertyNames(t))OJ(h,s,y,t,i);r.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(h)){const f=r5(s[y],i).read,w=f&&f.source;let S;S=w&&typeof w=="string"?$m(t,w):t[y],f&&f.reader&&(S=f.reader.call(e,S,t,i)),S!==void 0&&r.set(y,S)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(s))h[y]||PJ(e,y,r,i)}r.setDefaultOrigin("user")}function $P(e,t,i,r=EP){var h;const s={...r,messages:[]};i(s),(h=s.messages)==null||h.forEach(y=>{y.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(y):e.loadWarnings.push(y)})}const NJ=Le.getLogger("esri.core.accessorSupport.write");function RJ(e,t,i,r,s){var y,f;const h={};return(f=(y=t.write)==null?void 0:y.writer)==null||f.call(e,r,h,i,s),h}function IP(e,t,i,r,s,h){if(!r||!r.write)return!1;const y=e.get(i);if(!s&&r.write.overridePolicy){const f=r.write.overridePolicy.call(e,y,i,h);f!==void 0&&(s=f)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((y===null&&!s.allowNull&&!s.writerEnsuresNonNull||y===void 0)&&s.isRequired){const f=new ne("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return f&&h&&h.messages?h.messages.push(f):f&&!h&&NJ.error(f.name,f.message),!1}return!(y===void 0||y===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===It.DEFAULTS)&&LJ(e,i,h,r,y)||!s.ignoreOrigin&&h&&h.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<yh(h.origin))}function LJ(e,t,i,r,s){const h=r.default;if(h===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof h=="function"){if(Array.isArray(s)){const y=h.call(e,t,i);return q6(y,s)}return!1}return h===s}function FJ(e,t,i,r){const s=nn(e),h=s.metadatas,y=sP(h[t],r);return!!y&&IP(e,s,t,y,i,r)}function AP(e,t,i){var h,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Iv(t,e.toJSON(i));const r=nn(e),s=r.metadatas;for(const f in s){const w=sP(s[f],i);if(!IP(e,r,f,w,void 0,i))continue;const S=e.get(f),E=RJ(e,w,w.write&&typeof w.write.target=="string"?w.write.target:f,S,i);Object.keys(E).length>0&&(t=Iv(t,E),(y=(h=i==null?void 0:i.resources)==null?void 0:h.pendingOperations)!=null&&y.length&&Promise.all(i.resources.pendingOperations).then(()=>Iv(t,E)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:f,oldOrigin:YW(r.store.originOf(f)),newOrigin:i.origin}))}return t}const Q0=e=>{let t=class extends e{constructor(...i){super(...i);const r=nn(this),s=r.store,h=new sM;r.store=h,MP(r,s,h)}read(i,r){TP(this,i,r)}write(i={},r){return AP(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return jJ.call(this,i,r)}};return t=g([K("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function jJ(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let ve=class extends Q0(qe){};ve=g([K("esri.core.JSONSupport")],ve);function je(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(h,y)=>{const f=h.constructor.prototype;r.forEach(w=>{const S=JO(h,w,s);S.read&&typeof S.read=="object"||(S.read={}),S.read.reader=f[y],i&&(S.read.source=(S.read.source||[]).concat(i))})}}function De(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(h,y)=>{const f=h.constructor.prototype;for(const w of r){const S=JO(h,w,s);S.write&&typeof S.write=="object"||(S.write={}),i&&(S.write.target=i),S.write.writer=f[y]}}}var Ws;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Ws||(Ws={}));let $;const J={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for($=2e3;$<=2045;$++)J[$]=0;for($=2056;$<=2065;$++)J[$]=0;for($=2067;$<=2135;$++)J[$]=0;for($=2137;$<=2154;$++)J[$]=0;for($=2161;$<=2170;$++)J[$]=0;for($=2172;$<=2193;$++)J[$]=0;for($=2195;$<=2198;$++)J[$]=0;for($=2200;$<=2203;$++)J[$]=0;for($=2205;$<=2217;$++)J[$]=0;for($=2222;$<=2224;$++)J[$]=1;for($=2225;$<=2250;$++)J[$]=2;for($=2251;$<=2253;$++)J[$]=1;for($=2257;$<=2264;$++)J[$]=2;for($=2274;$<=2279;$++)J[$]=2;for($=2280;$<=2282;$++)J[$]=1;for($=2283;$<=2289;$++)J[$]=2;for($=2290;$<=2292;$++)J[$]=0;for($=2308;$<=2313;$++)J[$]=0;for($=2315;$<=2491;$++)J[$]=0;for($=2494;$<=2866;$++)J[$]=0;for($=2867;$<=2869;$++)J[$]=1;for($=2870;$<=2888;$++)J[$]=2;for($=2891;$<=2895;$++)J[$]=2;for($=2896;$<=2898;$++)J[$]=1;for($=2902;$<=2908;$++)J[$]=2;for($=2915;$<=2920;$++)J[$]=2;for($=2921;$<=2923;$++)J[$]=1;for($=2924;$<=2930;$++)J[$]=2;for($=2931;$<=2962;$++)J[$]=0;for($=2964;$<=2968;$++)J[$]=2;for($=2969;$<=2973;$++)J[$]=0;for($=2975;$<=2991;$++)J[$]=0;for($=2995;$<=3051;$++)J[$]=0;for($=3054;$<=3079;$++)J[$]=0;for($=3081;$<=3088;$++)J[$]=0;for($=3092;$<=3101;$++)J[$]=0;for($=3106;$<=3138;$++)J[$]=0;for($=3146;$<=3151;$++)J[$]=0;for($=3153;$<=3166;$++)J[$]=0;for($=3168;$<=3172;$++)J[$]=0;for($=3174;$<=3203;$++)J[$]=0;for($=3294;$<=3358;$++)J[$]=0;for($=3367;$<=3403;$++)J[$]=0;for($=3408;$<=3416;$++)J[$]=0;for($=3417;$<=3438;$++)J[$]=2;for($=3441;$<=3446;$++)J[$]=2;for($=3447;$<=3450;$++)J[$]=0;for($=3451;$<=3459;$++)J[$]=2;for($=3460;$<=3478;$++)J[$]=0;for($=3554;$<=3559;$++)J[$]=0;for($=3560;$<=3570;$++)J[$]=2;for($=3571;$<=3581;$++)J[$]=0;for($=3594;$<=3597;$++)J[$]=0;for($=3601;$<=3604;$++)J[$]=0;for($=3637;$<=3639;$++)J[$]=0;for($=3665;$<=3667;$++)J[$]=0;for($=3693;$<=3695;$++)J[$]=0;for($=3701;$<=3727;$++)J[$]=0;for($=3728;$<=3739;$++)J[$]=2;for($=3740;$<=3751;$++)J[$]=0;for($=3753;$<=3760;$++)J[$]=2;for($=3761;$<=3773;$++)J[$]=0;for($=3775;$<=3777;$++)J[$]=0;for($=3779;$<=3781;$++)J[$]=0;for($=3783;$<=3785;$++)J[$]=0;for($=3788;$<=3791;$++)J[$]=0;for($=3797;$<=3802;$++)J[$]=0;for($=3814;$<=3816;$++)J[$]=0;for($=3825;$<=3829;$++)J[$]=0;for($=3832;$<=3841;$++)J[$]=0;for($=3844;$<=3852;$++)J[$]=0;for($=3873;$<=3885;$++)J[$]=0;for($=3890;$<=3893;$++)J[$]=0;for($=3907;$<=3912;$++)J[$]=0;for($=3942;$<=3950;$++)J[$]=0;for($=3968;$<=3970;$++)J[$]=0;for($=3973;$<=3976;$++)J[$]=0;for($=3986;$<=3989;$++)J[$]=0;for($=3994;$<=3997;$++)J[$]=0;for($=4048;$<=4051;$++)J[$]=0;for($=4056;$<=4063;$++)J[$]=0;for($=4093;$<=4096;$++)J[$]=0;for($=4390;$<=4398;$++)J[$]=0;for($=4399;$<=4413;$++)J[$]=2;for($=4418;$<=4433;$++)J[$]=2;for($=4455;$<=4457;$++)J[$]=2;for($=4484;$<=4489;$++)J[$]=0;for($=4491;$<=4554;$++)J[$]=0;for($=4568;$<=4589;$++)J[$]=0;for($=4652;$<=4656;$++)J[$]=0;for($=4766;$<=4800;$++)J[$]=0;for($=5014;$<=5016;$++)J[$]=0;for($=5069;$<=5072;$++)J[$]=0;for($=5105;$<=5130;$++)J[$]=0;for($=5173;$<=5188;$++)J[$]=0;for($=5253;$<=5259;$++)J[$]=0;for($=5269;$<=5275;$++)J[$]=0;for($=5292;$<=5311;$++)J[$]=0;for($=5329;$<=5331;$++)J[$]=0;for($=5343;$<=5349;$++)J[$]=0;for($=5355;$<=5357;$++)J[$]=0;for($=5387;$<=5389;$++)J[$]=0;for($=5459;$<=5463;$++)J[$]=0;for($=5479;$<=5482;$++)J[$]=0;for($=5518;$<=5520;$++)J[$]=0;for($=5530;$<=5539;$++)J[$]=0;for($=5550;$<=5552;$++)J[$]=0;for($=5562;$<=5583;$++)J[$]=0;for($=5623;$<=5625;$++)J[$]=2;for($=5631;$<=5639;$++)J[$]=0;for($=5649;$<=5653;$++)J[$]=0;for($=5663;$<=5680;$++)J[$]=0;for($=5682;$<=5685;$++)J[$]=0;for($=5875;$<=5877;$++)J[$]=0;for($=5896;$<=5899;$++)J[$]=0;for($=5921;$<=5940;$++)J[$]=0;for($=6050;$<=6125;$++)J[$]=0;for($=6244;$<=6275;$++)J[$]=0;for($=6328;$<=6348;$++)J[$]=0;for($=6350;$<=6356;$++)J[$]=0;for($=6366;$<=6372;$++)J[$]=0;for($=6381;$<=6387;$++)J[$]=0;for($=6393;$<=6404;$++)J[$]=0;for($=6480;$<=6483;$++)J[$]=0;for($=6511;$<=6514;$++)J[$]=0;for($=6579;$<=6581;$++)J[$]=0;for($=6619;$<=6624;$++)J[$]=0;for($=6625;$<=6627;$++)J[$]=2;for($=6628;$<=6632;$++)J[$]=0;for($=6634;$<=6637;$++)J[$]=0;for($=6669;$<=6692;$++)J[$]=0;for($=6707;$<=6709;$++)J[$]=0;for($=6720;$<=6723;$++)J[$]=0;for($=6732;$<=6738;$++)J[$]=0;for($=6931;$<=6933;$++)J[$]=0;for($=6956;$<=6959;$++)J[$]=0;for($=7005;$<=7007;$++)J[$]=0;for($=7057;$<=7070;$++)J[$]=2;for($=7074;$<=7082;$++)J[$]=0;for($=7109;$<=7118;$++)J[$]=0;for($=7119;$<=7127;$++)J[$]=1;for($=7374;$<=7376;$++)J[$]=0;for($=7528;$<=7586;$++)J[$]=0;for($=7587;$<=7645;$++)J[$]=2;for($=7692;$<=7696;$++)J[$]=0;for($=7755;$<=7787;$++)J[$]=0;for($=7791;$<=7795;$++)J[$]=0;for($=7799;$<=7801;$++)J[$]=0;for($=7803;$<=7805;$++)J[$]=0;for($=7825;$<=7831;$++)J[$]=0;for($=7845;$<=7859;$++)J[$]=0;for($=8013;$<=8032;$++)J[$]=0;for($=8065;$<=8068;$++)J[$]=1;for($=8518;$<=8529;$++)J[$]=2;for($=8533;$<=8536;$++)J[$]=2;for($=8538;$<=8540;$++)J[$]=2;for($=8677;$<=8679;$++)J[$]=0;for($=8836;$<=8840;$++)J[$]=0;for($=8857;$<=8859;$++)J[$]=0;for($=8908;$<=8910;$++)J[$]=0;for($=9154;$<=9159;$++)J[$]=0;for($=9205;$<=9218;$++)J[$]=0;for($=9271;$<=9273;$++)J[$]=0;for($=9295;$<=9297;$++)J[$]=0;for($=9356;$<=9360;$++)J[$]=0;for($=9404;$<=9407;$++)J[$]=0;for($=9476;$<=9482;$++)J[$]=0;for($=9487;$<=9494;$++)J[$]=0;for($=9697;$<=9699;$++)J[$]=0;for($=20002;$<=20032;$++)J[$]=0;for($=20062;$<=20092;$++)J[$]=0;for($=20135;$<=20138;$++)J[$]=0;for($=20248;$<=20258;$++)J[$]=0;for($=20348;$<=20358;$++)J[$]=0;for($=20436;$<=20440;$++)J[$]=0;for($=20822;$<=20824;$++)J[$]=0;for($=20904;$<=20932;$++)J[$]=0;for($=20934;$<=20936;$++)J[$]=0;for($=21004;$<=21032;$++)J[$]=0;for($=21035;$<=21037;$++)J[$]=0;for($=21095;$<=21097;$++)J[$]=0;for($=21148;$<=21150;$++)J[$]=0;for($=21207;$<=21264;$++)J[$]=0;for($=21307;$<=21364;$++)J[$]=0;for($=21413;$<=21423;$++)J[$]=0;for($=21453;$<=21463;$++)J[$]=0;for($=21473;$<=21483;$++)J[$]=0;for($=21780;$<=21782;$++)J[$]=0;for($=21891;$<=21894;$++)J[$]=0;for($=21896;$<=21899;$++)J[$]=0;for($=22171;$<=22177;$++)J[$]=0;for($=22181;$<=22187;$++)J[$]=0;for($=22191;$<=22197;$++)J[$]=0;for($=22234;$<=22236;$++)J[$]=0;for($=22521;$<=22525;$++)J[$]=0;for($=22991;$<=22994;$++)J[$]=0;for($=23028;$<=23038;$++)J[$]=0;for($=23830;$<=23853;$++)J[$]=0;for($=23866;$<=23872;$++)J[$]=0;for($=23877;$<=23884;$++)J[$]=0;for($=23886;$<=23894;$++)J[$]=0;for($=23946;$<=23948;$++)J[$]=0;for($=24311;$<=24313;$++)J[$]=0;for($=24342;$<=24347;$++)J[$]=0;for($=24370;$<=24374;$++)J[$]=10;for($=24375;$<=24381;$++)J[$]=0;for($=24718;$<=24721;$++)J[$]=0;for($=24817;$<=24821;$++)J[$]=0;for($=24877;$<=24882;$++)J[$]=0;for($=24891;$<=24893;$++)J[$]=0;for($=25391;$<=25395;$++)J[$]=0;for($=25828;$<=25838;$++)J[$]=0;for($=26191;$<=26195;$++)J[$]=0;for($=26391;$<=26393;$++)J[$]=0;for($=26701;$<=26722;$++)J[$]=0;for($=26729;$<=26799;$++)J[$]=2;for($=26801;$<=26803;$++)J[$]=2;for($=26811;$<=26813;$++)J[$]=2;for($=26847;$<=26870;$++)J[$]=2;for($=26891;$<=26899;$++)J[$]=0;for($=26901;$<=26923;$++)J[$]=0;for($=26929;$<=26946;$++)J[$]=0;for($=26948;$<=26998;$++)J[$]=0;for($=27037;$<=27040;$++)J[$]=0;for($=27205;$<=27232;$++)J[$]=0;for($=27258;$<=27260;$++)J[$]=0;for($=27391;$<=27398;$++)J[$]=0;for($=27561;$<=27564;$++)J[$]=0;for($=27571;$<=27574;$++)J[$]=0;for($=27581;$<=27584;$++)J[$]=0;for($=27591;$<=27594;$++)J[$]=0;for($=28191;$<=28193;$++)J[$]=0;for($=28348;$<=28358;$++)J[$]=0;for($=28402;$<=28432;$++)J[$]=0;for($=28462;$<=28492;$++)J[$]=0;for($=29118;$<=29122;$++)J[$]=0;for($=29168;$<=29172;$++)J[$]=0;for($=29177;$<=29185;$++)J[$]=0;for($=29187;$<=29195;$++)J[$]=0;for($=29900;$<=29903;$++)J[$]=0;for($=30161;$<=30179;$++)J[$]=0;for($=30491;$<=30494;$++)J[$]=0;for($=30729;$<=30732;$++)J[$]=0;for($=31251;$<=31259;$++)J[$]=0;for($=31265;$<=31268;$++)J[$]=0;for($=31275;$<=31279;$++)J[$]=0;for($=31281;$<=31297;$++)J[$]=0;for($=31461;$<=31469;$++)J[$]=0;for($=31491;$<=31495;$++)J[$]=0;for($=31917;$<=31922;$++)J[$]=0;for($=31965;$<=32e3;$++)J[$]=0;for($=32001;$<=32003;$++)J[$]=2;for($=32005;$<=32031;$++)J[$]=2;for($=32033;$<=32060;$++)J[$]=2;for($=32064;$<=32067;$++)J[$]=2;for($=32074;$<=32077;$++)J[$]=2;for($=32081;$<=32086;$++)J[$]=0;for($=32107;$<=32130;$++)J[$]=0;for($=32133;$<=32158;$++)J[$]=0;for($=32164;$<=32167;$++)J[$]=2;for($=32180;$<=32199;$++)J[$]=0;for($=32201;$<=32260;$++)J[$]=0;for($=32301;$<=32360;$++)J[$]=0;for($=32601;$<=32662;$++)J[$]=0;for($=32664;$<=32667;$++)J[$]=2;for($=32701;$<=32761;$++)J[$]=0;for($=53001;$<=53004;$++)J[$]=0;for($=53008;$<=53019;$++)J[$]=0;for($=53021;$<=53032;$++)J[$]=0;for($=53034;$<=53037;$++)J[$]=0;for($=53042;$<=53046;$++)J[$]=0;for($=53074;$<=53080;$++)J[$]=0;for($=54001;$<=54004;$++)J[$]=0;for($=54008;$<=54019;$++)J[$]=0;for($=54021;$<=54032;$++)J[$]=0;for($=54034;$<=54037;$++)J[$]=0;for($=54042;$<=54046;$++)J[$]=0;for($=54048;$<=54053;$++)J[$]=0;for($=54074;$<=54080;$++)J[$]=0;for($=54098;$<=54101;$++)J[$]=0;for($=102001;$<=102040;$++)J[$]=0;for($=102042;$<=102063;$++)J[$]=0;for($=102065;$<=102067;$++)J[$]=0;for($=102070;$<=102117;$++)J[$]=0;for($=102122;$<=102216;$++)J[$]=0;for($=102221;$<=102377;$++)J[$]=0;for($=102382;$<=102388;$++)J[$]=0;for($=102389;$<=102398;$++)J[$]=2;for($=102399;$<=102444;$++)J[$]=0;for($=102445;$<=102447;$++)J[$]=2;for($=102448;$<=102458;$++)J[$]=0;for($=102459;$<=102468;$++)J[$]=2;for($=102469;$<=102499;$++)J[$]=0;for($=102500;$<=102519;$++)J[$]=1;for($=102520;$<=102524;$++)J[$]=0;for($=102525;$<=102529;$++)J[$]=2;for($=102530;$<=102588;$++)J[$]=0;for($=102590;$<=102598;$++)J[$]=0;for($=102601;$<=102603;$++)J[$]=0;for($=102605;$<=102628;$++)J[$]=0;for($=102629;$<=102646;$++)J[$]=2;for($=102648;$<=102700;$++)J[$]=2;for($=102701;$<=102703;$++)J[$]=0;for($=102707;$<=102730;$++)J[$]=2;for($=102733;$<=102758;$++)J[$]=2;for($=102767;$<=102900;$++)J[$]=0;for($=102901;$<=102933;$++)J[$]=2;for($=102934;$<=102950;$++)J[$]=13;for($=102951;$<=102955;$++)J[$]=0;for($=102961;$<=102963;$++)J[$]=0;for($=102965;$<=102969;$++)J[$]=0;for($=102971;$<=102973;$++)J[$]=0;for($=102975;$<=102989;$++)J[$]=0;for($=102990;$<=102992;$++)J[$]=1;for($=102997;$<=103002;$++)J[$]=0;for($=103003;$<=103008;$++)J[$]=2;for($=103009;$<=103011;$++)J[$]=0;for($=103012;$<=103014;$++)J[$]=2;for($=103019;$<=103021;$++)J[$]=0;for($=103022;$<=103024;$++)J[$]=2;for($=103029;$<=103031;$++)J[$]=0;for($=103032;$<=103034;$++)J[$]=2;for($=103065;$<=103068;$++)J[$]=0;for($=103074;$<=103076;$++)J[$]=0;for($=103077;$<=103079;$++)J[$]=1;for($=103080;$<=103082;$++)J[$]=0;for($=103083;$<=103085;$++)J[$]=2;for($=103090;$<=103093;$++)J[$]=0;for($=103097;$<=103099;$++)J[$]=0;for($=103100;$<=103102;$++)J[$]=2;for($=103107;$<=103109;$++)J[$]=0;for($=103110;$<=103112;$++)J[$]=2;for($=103113;$<=103116;$++)J[$]=0;for($=103117;$<=103120;$++)J[$]=2;for($=103153;$<=103157;$++)J[$]=0;for($=103158;$<=103162;$++)J[$]=2;for($=103163;$<=103165;$++)J[$]=0;for($=103166;$<=103168;$++)J[$]=1;for($=103169;$<=103171;$++)J[$]=2;for($=103186;$<=103188;$++)J[$]=0;for($=103189;$<=103191;$++)J[$]=2;for($=103192;$<=103195;$++)J[$]=0;for($=103196;$<=103199;$++)J[$]=2;for($=103200;$<=103224;$++)J[$]=0;for($=103225;$<=103227;$++)J[$]=1;for($=103232;$<=103237;$++)J[$]=0;for($=103238;$<=103243;$++)J[$]=2;for($=103244;$<=103246;$++)J[$]=0;for($=103247;$<=103249;$++)J[$]=2;for($=103254;$<=103256;$++)J[$]=0;for($=103257;$<=103259;$++)J[$]=2;for($=103264;$<=103266;$++)J[$]=0;for($=103267;$<=103269;$++)J[$]=2;for($=103300;$<=103375;$++)J[$]=0;for($=103381;$<=103383;$++)J[$]=0;for($=103384;$<=103386;$++)J[$]=1;for($=103387;$<=103389;$++)J[$]=0;for($=103390;$<=103392;$++)J[$]=2;for($=103397;$<=103399;$++)J[$]=0;for($=103400;$<=103471;$++)J[$]=2;for($=103476;$<=103478;$++)J[$]=0;for($=103479;$<=103481;$++)J[$]=2;for($=103486;$<=103488;$++)J[$]=0;for($=103489;$<=103491;$++)J[$]=2;for($=103492;$<=103495;$++)J[$]=0;for($=103496;$<=103499;$++)J[$]=2;for($=103528;$<=103543;$++)J[$]=0;for($=103544;$<=103548;$++)J[$]=2;for($=103549;$<=103551;$++)J[$]=0;for($=103552;$<=103554;$++)J[$]=1;for($=103555;$<=103557;$++)J[$]=2;for($=103558;$<=103560;$++)J[$]=0;for($=103571;$<=103573;$++)J[$]=0;for($=103574;$<=103576;$++)J[$]=2;for($=103577;$<=103580;$++)J[$]=0;for($=103581;$<=103583;$++)J[$]=2;for($=103595;$<=103694;$++)J[$]=0;for($=103696;$<=103699;$++)J[$]=0;for($=103700;$<=103793;$++)J[$]=2;for($=103794;$<=103887;$++)J[$]=0;for($=103900;$<=103971;$++)J[$]=2;const DJ={102113:!0,102100:!0,3857:!0,3785:!0},zJ={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},m$='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',cg=[-20037508342788905e-9,20037508342788905e-9],pg=[-20037508342787e-6,20037508342787e-6],kP={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:cg,origin:pg,dx:1e-5},102100:{wkTemplate:m$,valid:cg,origin:pg,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:cg,origin:pg,dx:1e-5},3857:{wkTemplate:m$,valid:cg,origin:pg,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ki(e,t){return!oe(e)&&!oe(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Ga(e)&&Ga(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function vs(e){return Mr(e)&&e.wkid&&kP[e.wkid]||null}function x2(e){return!!Mr(e)&&(e.wkid?J[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function VJ(e){return!(ef(e)||tf(e))}function Ky(e){return Mr(e)&&e.wkid===4326}function t9e(e){return Mr(e)&&e.wkid===Ws.CGCS2000}function Ga(e){return Mr(e)&&e.wkid!=null&&DJ[e.wkid]===!0}function GJ(e){return Mr(e)&&e.wkid===32662}function oM(e){return e===Ws.GCSMARS2000||e===Ws.GCSMARS2000_SPHERE}function ef(e){return Mr(e)&&e.wkid!=null&&oM(e.wkid)}function aM(e){return e===Ws.GCSMOON2000}function tf(e){return Mr(e)&&e.wkid!=null&&aM(e.wkid)}function UJ(e){return Mr(e)&&e.wkid!=null&&zJ[e.wkid]===!0}function Mr(e){return Y(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const y5={wkid:4326,wkt:za(kP[4326].wkTemplate,{Central_Meridian:"0.0"})},qJ={wkid:102100,latestWkid:3857},BJ={wkid:32662};var la;let ii=la=class extends ve{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return la.WebMercator;if(e.wkid===4326)return la.WGS84}const t=new la;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Ky(this)}get isWebMercator(){return Ga(this)}get isGeographic(){return x2(this)}get isWrappable(){return UJ(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===la.WGS84)return la.WGS84;if(this===la.WebMercator)return la.WebMercator;const e=new la;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=de(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return ki(this,e)}toJSON(e){return this.write(void 0,e)}};ii.GCS_NAD_1927=null,ii.WGS84=null,ii.WebMercator=null,ii.PlateCarree=null,g([x({readOnly:!0})],ii.prototype,"isWGS84",null),g([x({readOnly:!0})],ii.prototype,"isWebMercator",null),g([x({readOnly:!0})],ii.prototype,"isGeographic",null),g([x({readOnly:!0})],ii.prototype,"isWrappable",null),g([x({type:li,json:{write:!0}})],ii.prototype,"latestWkid",void 0),g([x({type:li,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],ii.prototype,"wkid",void 0),g([x({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],ii.prototype,"wkt",void 0),g([De("wkt"),De("web-scene","wkt")],ii.prototype,"writeWkt",null),g([x({type:li,json:{write:!0}})],ii.prototype,"vcsWkid",void 0),g([x({type:li,json:{write:!0}})],ii.prototype,"latestVcsWkid",void 0),g([x()],ii.prototype,"imageCoordinateSystem",void 0),ii=la=g([K("esri.geometry.SpatialReference")],ii),ii.prototype.toJSON.isDefaultToJSON=!0,ii.GCS_NAD_1927=new ii({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ii.WGS84=new ii(y5),ii.WebMercator=new ii(qJ),ii.PlateCarree=new ii(BJ),Object.freeze&&(Object.freeze(ii.GCS_NAD_1927),Object.freeze(ii.WGS84),Object.freeze(ii.WebMercator));const ot=ii;let ua=class extends ve{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ot.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof ot)return e;if(e!=null){const i=new ot;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};g([x()],ua.prototype,"type",void 0),g([x({readOnly:!0})],ua.prototype,"cache",null),g([x({readOnly:!0})],ua.prototype,"extent",null),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ua.prototype,"hasM",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ua.prototype,"hasZ",void 0),g([x({type:ot,json:{write:!0}})],ua.prototype,"spatialReference",void 0),g([je("spatialReference")],ua.prototype,"readSpatialReference",null),ua=g([K("esri.geometry.Geometry")],ua);const Jn=ua,HJ=Object.prototype.toString;function WJ(e){const t="__accessorMetadata__"in e?ji(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return JJ.apply(this,i)}}function JJ(e,t,i,r){m2(e,t).cast=r}function KJ(e){return(t,i)=>{m2(t,e).cast=t[i]}}function Mt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&HJ.call(e[0])==="[object Function]"?WJ(e[0]):e.length===1&&typeof e[0]=="string"?KJ(e[0]):void 0}function YJ(e,t,i,r){var s;return e.x=e.x+t,e.y=e.y+i,r!=null&&(e.z=((s=e.z)!=null?s:0)+r),e}function ZJ(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}class lM{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const fi=new lM(6378137,1/298.257223563,3e5,.006694379990137799),Bl=new lM(3396190,1/169.8944472236118,23e4),Ah=new lM(1737400,0,0),XJ=57.29577951308232,QJ=.017453292519943;function g$(e){return e*XJ}function v$(e){return e*QJ}function b$(e){return e/fi.radius}function w$(e){return Math.PI/2-2*Math.atan(Math.exp(-e/fi.radius))}function m5(e){return e.wkid!=null||e.wkt!=null}const a_=[0,0];function hw(e,t,i,r,s){const h=e,y=s;if(y.spatialReference=i,"x"in h&&"x"in y)[y.x,y.y]=t(h.x,h.y,a_,r);else if("xmin"in h&&"xmin"in y)[y.xmin,y.ymin]=t(h.xmin,h.ymin,a_,r),[y.xmax,y.ymax]=t(h.xmax,h.ymax,a_,r);else if("paths"in h&&"paths"in y||"rings"in h&&"rings"in y){const f="paths"in h?h.paths:h.rings,w=[];let S;for(let E=0;E<f.length;E++){const A=f[E];S=[],w.push(S);for(let P=0;P<A.length;P++)S.push(t(A[P][0],A[P][1],[0,0],r)),A[P].length>2&&S[P].push(A[P][2]),A[P].length>3&&S[P].push(A[P][3])}"paths"in y?y.paths=w:y.rings=w}else if("points"in h&&"points"in y){const f=h.points,w=[];for(let S=0;S<f.length;S++)w[S]=t(f[S][0],f[S][1],[0,0],r),f[S].length>2&&w[S].push(f[S][2]),f[S].length>3&&w[S].push(f[S][3]);y.points=w}return s}function y0(e,t){const i=e&&(m5(e)?e:e.spatialReference),r=t&&(m5(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!ki(r,i)||Ga(r)&&Ky(i)||Ga(i)&&Ky(r))}function S2(e,t){if(oe(e))return null;const i=e.spatialReference,r=t&&(m5(t)?t:t.spatialReference);return y0(i,r)?ki(i,r)?de(e):Ga(r)?hw(e,Zc,ot.WebMercator,!1,de(e)):Ky(r)?hw(e,m0,ot.WGS84,!1,de(e)):null:null}function Zc(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=v$(t);return i[0]=v$(e)*fi.radius,i[1]=fi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function m0(e,t,i=[0,0],r=!1){const s=g$(e/fi.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=g$(Math.PI/2-2*Math.atan(Math.exp(-t/fi.radius))),i}function La(e,t=!1,i=de(e)){return hw(e,Zc,ot.WebMercator,t,i)}function zl(e,t=!1,i=de(e)){return hw(e,m0,ot.WGS84,t,i)}var Ov;const Hf=[0,0];function _$(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const dg=Le.getLogger("esri.geometry.Point");let un=Ov=class extends Jn{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,r,s){let h;if(Array.isArray(e))h=e,s=t,e=h[0],t=h[1],i=h[2],r=h[3];else if(e&&typeof e=="object"){if(h=e,e=h.x!=null?h.x:h.longitude,t=h.y!=null?h.y:h.latitude,i=h.z,r=h.m,(s=h.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new ot(s)),h.longitude!=null||h.latitude!=null){if(h.longitude==null)dg.warn(".longitude=","Latitude was defined without longitude");else if(h.latitude==null)dg.warn(".latitude=","Longitude was defined without latitude");else if(!h.declaredClass&&s&&s.isWebMercator){const f=Zc(h.longitude,h.latitude,Hf);e=f[0],t=f[1]}}}else _$(i)?(s=i,i=null):_$(r)&&(s=r,r=null);const y={x:e,y:t};return y.x==null&&y.y!=null?dg.warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&dg.warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(y.spatialReference=s),i!=null&&(y.z=i),r!=null&&(y.m=r),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return m0(t,i,Hf)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Zc(i,e,Hf)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return m0(e,t,Hf)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Zc(e,t,Hf)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Ov;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Ov.copy(e,this),this}equals(e){if(oe(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:h}=this,{z:y,m:f}=e;let{x:w,y:S,spatialReference:E}=e;if(!h.equals(E))if(h.isWebMercator&&E.isWGS84)[w,S]=Zc(w,S),E=h;else{if(!h.isWGS84||!E.isWebMercator)return!1;[w,S]=m0(w,S),E=h}return t===w&&i===S&&r===y&&s===f&&h.wkid===E.wkid}offset(e,t,i){return YJ(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=vs(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let h;return t>r?(h=Math.ceil(Math.abs(t-r)/s),t-=h*s):t<i&&(h=Math.ceil(Math.abs(t-i)/s),t+=h*s),this._set("x",t),this}distance(e){return ZJ(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};g([x({readOnly:!0})],un.prototype,"cache",null),g([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],un.prototype,"hasM",null),g([x({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],un.prototype,"hasZ",null),g([x({type:Number})],un.prototype,"latitude",null),g([x({type:Number})],un.prototype,"longitude",null),g([x({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Mt(e=>isNaN(e)?e:Bs(e))],un.prototype,"x",void 0),g([De("x")],un.prototype,"writeX",null),g([je("x")],un.prototype,"readX",null),g([x({type:Number,json:{write:!0}})],un.prototype,"y",void 0),g([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],un.prototype,"z",void 0),g([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],un.prototype,"m",void 0),un=Ov=g([K("esri.geometry.Point")],un),un.prototype.toJSON.isDefaultToJSON=!0;const et=un,l_=[0,0];function M2(e,t){return!!Y(t)&&fn(e,t.x,t.y,t.z)}function i9e(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!k0(e,i))return!1;return!0}function eK(e,t){const{xmin:i,ymin:r,zmin:s,xmax:h,ymax:y,zmax:f}=t;return e.hasZ&&t.hasZ?fn(e,i,r,s)&&fn(e,i,y,s)&&fn(e,h,y,s)&&fn(e,h,r,s)&&fn(e,i,r,f)&&fn(e,i,y,f)&&fn(e,h,y,f)&&fn(e,h,r,f):fn(e,i,r)&&fn(e,i,y)&&fn(e,h,y)&&fn(e,h,r)}function k0(e,t){return fn(e,t[0],t[1])}function tK(e,t){return fn(e,t[0],t[1],t[2])}function fn(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function CP(e,t){return l_[1]=t.y,l_[0]=t.x,iK(e,l_)}function iK(e,t){return OP(e.rings,t)}function OP(e,t){if(!e)return!1;if(rK(e))return x$(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=x$(i,e[r],t);return i}function rK(e){return!Array.isArray(e[0][0])}function x$(e,t,i){const[r,s]=i;let h=e,y=0;for(let f=0,w=t.length;f<w;f++){y++,y===w&&(y=0);const[S,E]=t[f],[A,P]=t[y];(E<s&&P>=s||P<s&&E>=s)&&S+(s-E)/(P-E)*(A-S)<r&&(h=!h)}return h}function nK(e,t){return M2(e,t)}function sK(e,t){const i=e.hasZ&&t.hasZ;let r,s,h;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(h=t.zmin,e.zmax<h)return!1}else if(h=e.zmin,t.zmax<h)return!1}return!0}function oK(e,t){const{points:i,hasZ:r}=t,s=r?tK:k0;for(const h of i)if(s(e,h))return!0;return!1}const _p=[0,0],xp=[0,0],Sp=[0,0],Mp=[0,0],aK=[_p,xp,Sp,Mp],PP=[[Sp,_p],[_p,xp],[xp,Mp],[Mp,Sp]];function lK(e,t){return uK(e,t.rings)}function uK(e,t){_p[0]=e.xmin,_p[1]=e.ymax,xp[0]=e.xmax,xp[1]=e.ymax,Sp[0]=e.xmin,Sp[1]=e.ymin,Mp[0]=e.xmax,Mp[1]=e.ymin;for(const i of aK)if(OP(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(k0(e,r))return!0;for(let s=1;s<i.length;s++){const h=i[s];if(k0(e,h)||NP(r,h,PP))return!0;r=h}}return!1}function hK(e,t){_p[0]=e.xmin,_p[1]=e.ymax,xp[0]=e.xmax,xp[1]=e.ymax,Sp[0]=e.xmin,Sp[1]=e.ymin,Mp[0]=e.xmax,Mp[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(k0(e,s))return!0;for(let h=1;h<r.length;h++){const y=r[h];if(k0(e,y)||NP(s,y,PP))return!0;s=y}}return!1}const $r=[0,0];function cK(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const h=i[s],y=i[s+1];for(let f=t+1;f<e.length;f++)for(let w=0;w<e[f].length-1;w++){const S=e[f][w],E=e[f][w+1];if(g5(h,y,S,E,$r)&&!($r[0]===h[0]&&$r[1]===h[1]||$r[0]===S[0]&&$r[1]===S[1]||$r[0]===y[0]&&$r[1]===y[1]||$r[0]===E[0]&&$r[1]===E[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let h=r-1;s===0&&(h=r-2);const y=i[s],f=i[s+1];for(let w=s+2;w<h;w++){const S=i[w],E=i[w+1];if(g5(y,f,S,E,$r)&&!($r[0]===y[0]&&$r[1]===y[1]||$r[0]===S[0]&&$r[1]===S[1]||$r[0]===f[0]&&$r[1]===f[1]||$r[0]===E[0]&&$r[1]===E[1]))return!0}}}return!1}function NP(e,t,i){for(let r=0;r<i.length;r++)if(g5(e,t,i[r][0],i[r][1]))return!0;return!1}function g5(e,t,i,r,s){const[h,y]=e,[f,w]=t,[S,E]=i,[A,P]=r,N=A-S,F=h-S,V=f-h,U=P-E,X=y-E,re=w-y,he=U*V-N*re;if(he===0)return!1;const pe=(N*X-U*F)/he,ae=(V*X-re*F)/he;return pe>=0&&pe<=1&&ae>=0&&ae<=1&&(s&&(s[0]=h+pe*(f-h),s[1]=y+pe*(w-y)),!0)}function pK(e){switch(e){case"esriGeometryEnvelope":case"extent":return sK;case"esriGeometryMultipoint":case"multipoint":return oK;case"esriGeometryPoint":case"point":return nK;case"esriGeometryPolygon":case"polygon":return lK;case"esriGeometryPolyline":case"polyline":return hK}}var Ps;function dK(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function pu(e,t,i){return t==null?i:i==null?t:e(t,i)}let pr=Ps=class extends Jn{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return dK(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ot.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s==null?ot.WGS84:s}}static fromBounds(e,t){return new Ps({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Ps({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new et({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ps;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&y0(t,i)&&(e=t.isWebMercator?La(e):zl(e,!0)),e.type==="point"?M2(this,e):e.type==="extent"&&eK(this,e)}equals(e){if(this===e)return!0;if(oe(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&y0(t,i)&&(e=t.isWebMercator?La(e):zl(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(oe(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&y0(t,i)&&(e=t.isWebMercator?La(e):zl(e,!0)),pK(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=pu(Math.min,this.zmin,e.zmin),this.zmax=pu(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=pu(Math.min,this.mmin,e.mmin),this.mmax=pu(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:oe(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=pu(Math.max,this.zmin,e.zmin),this.zmax=pu(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=pu(Math.max,this.mmin,e.mmin),this.mmax=pu(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=vs(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?zl(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new ot(za(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,h=this.xmax;return s>=i&&s<=r&&h>=i&&h<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;if(!(i=i||vs(r)))return this;const s=this._getParts(i).map(f=>f.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let h=!0,y=!0;return s.forEach(f=>{f.hasZ||(h=!1),f.hasM||(y=!1)}),{rings:s.map(f=>{const w=[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]];if(h){const S=(f.zmax-f.zmin)/2;for(let E=0;E<w.length;E++)w[E].push(S)}if(y){const S=(f.mmax-f.mmin)/2;for(let E=0;E<w.length;E++)w[E].push(S)}return w}),hasZ:h,hasM:y,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:h,spatialReference:y}=this,f=this.width,w=this.xmin,S=this.xmax;let E;e=e||vs(y);const[A,P]=e.valid;E=this._normalizeX(this.xmin,e);const N=E.x,F=E.frameId;E=this._normalizeX(this.xmax,e);const V=E.x,U=E.frameId,X=N===V&&f>0;if(f>2*P){const re=new Ps(w<S?N:V,s,P,h,y),he=new Ps(A,s,w<S?V:N,h,y),pe=new Ps(0,s,P,h,y),ae=new Ps(A,s,0,h,y),le=[],Te=[];re.contains(pe)&&le.push(F),re.contains(ae)&&Te.push(F),he.contains(pe)&&le.push(U),he.contains(ae)&&Te.push(U);for(let Ee=F+1;Ee<U;Ee++)le.push(Ee),Te.push(Ee);t.push({extent:re,frameIds:[F]},{extent:he,frameIds:[U]},{extent:pe,frameIds:le},{extent:ae,frameIds:Te})}else N>V||X?t.push({extent:new Ps(N,s,P,h,y),frameIds:[F]},{extent:new Ps(A,s,V,h,y),frameIds:[U]}):t.push({extent:new Ps(N,s,V,h,y),frameIds:[F]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let h=0;h<t.length;h++)t[h].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let h,y=0;return e>r?(h=Math.ceil(Math.abs(e-r)/s),e-=h*s,y=h):e<i&&(h=Math.ceil(Math.abs(e-i)/s),e+=h*s,y=-h),{x:e,frameId:y}}};g([x({readOnly:!0})],pr.prototype,"cache",null),g([x({readOnly:!0})],pr.prototype,"center",null),g([x({readOnly:!0})],pr.prototype,"extent",null),g([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],pr.prototype,"hasM",null),g([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],pr.prototype,"hasZ",null),g([x({readOnly:!0})],pr.prototype,"height",null),g([x({readOnly:!0})],pr.prototype,"width",null),g([x({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],pr.prototype,"xmin",void 0),g([x({type:Number,json:{write:!0}})],pr.prototype,"ymin",void 0),g([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],pr.prototype,"mmin",void 0),g([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],pr.prototype,"zmin",void 0),g([x({type:Number,json:{write:!0}})],pr.prototype,"xmax",void 0),g([x({type:Number,json:{write:!0}})],pr.prototype,"ymax",void 0),g([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],pr.prototype,"mmax",void 0),g([x({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],pr.prototype,"zmax",void 0),pr=Ps=g([K("esri.geometry.Extent")],pr),pr.prototype.toJSON.isDefaultToJSON=!0;const Ut=pr;function C0(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var v5;function S$(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function fK(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let $u=v5=class extends Jn{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):fK(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ut,i=this.hasZ,r=this.hasM,s=i?3:2,h=e[0],y=S$(Math.min),f=S$(Math.max);let w,S,E,A,[P,N]=h,[F,V]=h;for(let U=0,X=e.length;U<X;U++){const re=e[U],[he,pe]=re;if(P=y(P,he),N=y(N,pe),F=f(F,he),V=f(V,pe),i&&re.length>2){const ae=re[2];w=y(w,ae),E=f(E,ae)}if(r&&re.length>s){const ae=re[s];S=y(S,ae),A=f(A,ae)}}return t.xmin=P,t.ymin=N,t.xmax=F,t.ymax=V,t.spatialReference=this.spatialReference,i?(t.zmin=w,t.zmax=E):(t.zmin=null,t.zmax=null),r?(t.mmin=S,t.mmax=A):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=de(this.points)}addPoint(e){return C0(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:de(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new v5(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new et(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new et(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(C0(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};g([x({readOnly:!0})],$u.prototype,"cache",null),g([x()],$u.prototype,"extent",null),g([x({type:[[Number]],json:{write:{isRequired:!0}}})],$u.prototype,"points",void 0),g([De("points")],$u.prototype,"writePoints",null),$u=v5=g([K("esri.geometry.Multipoint")],$u),$u.prototype.toJSON.isDefaultToJSON=!0;const jp=$u;function M$(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,h=!1;return r.forEach(y=>{y.hasZ&&(s=!0),y.hasM&&(h=!0)}),r.map(y=>{const f=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const w=.5*(y.zmax-y.zmin);for(let S=0;S<f.length;S++)f[S].push(w)}if(h&&y.hasM){const w=.5*(y.mmax-y.mmin);for(let S=0;S<f.length;S++)f[S].push(w)}return f})}return null}function uM(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function RP(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function yK(e,t,i,r){const[s,h]=t,[y,f]=i[r],[w,S]=i[r+1],E=w-y,A=S-f,P=E*E+A*A,N=(s-y)*E+(h-f)*A,F=Math.min(1,Math.max(0,N/P));return e[0]=y+E*F,e[1]=f+A*F,e}function mK(e,t){return RP(e,t,.5)}function r9e(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=uM(e[r],e[r+1]);return i}function n9e(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const h=uM(e[s],e[s+1]);if(t-r<h){const y=(t-r)/h;return RP(e[s],e[s+1],y)}r+=h}return e[i-1]}function hM(e,t,i){const r=e.length;let s=0,h=0,y=0;for(let f=0;f<r;f++){const w=e[f],S=e[(f+1)%r];let E=2;s+=w[0]*S[1]-S[0]*w[1],w.length>2&&S.length>2&&i&&(h+=w[0]*S[2]-S[0]*w[2],E=3),w.length>E&&S.length>E&&t&&(y+=w[0]*S[E]-S[0]*w[E])}return s<=0&&h<=0&&y<=0}function s9e(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!hM(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function o9e(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function a9e(e){return e.type!=="polygon"&&e.type!=="polyline"||gK(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function gK(e,t){const i=vs(t);if(!i)return;const r=i.valid[0],s=i.valid[1],h=s-r;for(const y of e){let f=1/0,w=-1/0;y.forEach(E=>{let A=E[0];for(;A<r;)A+=h;for(;A>s;)A-=h;f=Math.min(f,A),w=Math.max(w,A),E[0]=A});const S=w-f;h-S<S&&y.forEach(E=>{E[0]<0&&(E[0]+=h)})}}function vK(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function LP(e){return e?bK(e.rings,e.hasZ):null}function bK(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,y=e.length;h<y;h++){const f=wK(e[h],t,s);f&&r.push(f)}if(r.sort((h,y)=>{let f=h[2]-y[2];return f===0&&t&&(f=h[4]-y[4]),f}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const h=e[0]&&e[0].length?_K(e[0],t):null;if(!h)return null;i[0]=h[0],i[1]=h[1],t&&h.length>2&&(i[2]=h[2])}return i}function wK(e,t,i){let r=0,s=0,h=0,y=0,f=0;const w=e.length?e[0][0]:0,S=e.length?e[0][1]:0,E=e.length&&t?e[0][2]:0;for(let P=0;P<e.length;P++){const N=e[P],F=e[(P+1)%e.length],[V,U,X]=N,re=V-w,he=U-S,pe=t?X-E:void 0,[ae,le,Te]=F,Ee=ae-w,Oe=le-S,Ae=t?Te-E:void 0,Fe=re*Oe-Ee*he;if(y+=Fe,r+=(re+Ee)*Fe,s+=(he+Oe)*Fe,t&&N.length>2&&F.length>2){const ze=re*Ae-Ee*pe;h+=(pe+Ae)*ze,f+=ze}V<i[0]&&(i[0]=V),V>i[1]&&(i[1]=V),U<i[2]&&(i[2]=U),U>i[3]&&(i[3]=U),t&&(X<i[4]&&(i[4]=X),X>i[5]&&(i[5]=X))}if(y>0&&(y*=-1),f>0&&(f*=-1),!y)return null;y*=.5,f*=.5;const A=[r/(6*y)+w,s/(6*y)+S,y];return t&&(i[4]===i[5]||f===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=h/(6*f)+E,A[4]=f)),A}function _K(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,h=0,y=0,f=0;for(let w=0,S=e.length;w<S-1;w++){const E=e[w],A=e[w+1];if(E&&A){i[0]=E[0],i[1]=E[1],r[0]=A[0],r[1]=A[1],t&&E.length>2&&A.length>2&&(i[2]=E[2],r[2]=A[2]);const P=uM(i,r);if(P){s+=P;const N=mK(E,A);h+=P*N[0],y+=P*N[1],t&&N.length>2&&(f+=P*N[2])}}}return s>0?t?[h/s,y/s,f/s]:[h/s,y/s]:e.length?e[0]:null}function FP(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function jP(e){return e.points!==void 0}function DP(e){return e.x!==void 0&&e.y!==void 0}function zP(e){return e.paths!==void 0}function VP(e){return e.rings!==void 0}function GP(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const mh=GP(Math.min),gh=GP(Math.max);function l9e(e,t){return zP(t)?O0(e,t.paths,!1,!1):VP(t)?O0(e,t.rings,!1,!1):jP(t)?cM(e,t.points,!1,!1,!1,!1):FP(t)?UP(e,t):(DP(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function u9e(e,t){return zP(t)?O0(e,t.paths,!0,!1):VP(t)?O0(e,t.rings,!0,!1):jP(t)?cM(e,t.points,!0,!1,!0,!1):FP(t)?UP(e,t,!0,!1,!0,!1):(DP(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function O0(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let h,y,f,w,[S,E]=t[0][0],[A,P]=t[0][0];for(let N=0;N<t.length;N++){const F=t[N];for(let V=0;V<F.length;V++){const U=F[V],[X,re]=U;if(S=mh(S,X),E=mh(E,re),A=gh(A,X),P=gh(P,re),i&&U.length>2){const he=U[2];h=mh(h,he),y=gh(y,he)}if(r&&U.length>s){const he=U[s];f=mh(h,he),w=gh(y,he)}}}return i?r?(e[0]=S,e[1]=E,e[2]=h,e[3]=f,e[4]=A,e[5]=P,e[6]=y,e[7]=w,e.length=8,e):(e[0]=S,e[1]=E,e[2]=h,e[3]=A,e[4]=P,e[5]=y,e.length=6,e):r?(e[0]=S,e[1]=E,e[2]=f,e[3]=A,e[4]=P,e[5]=w,e.length=6,e):(e[0]=S,e[1]=E,e[2]=A,e[3]=P,e.length=4,e)}function UP(e,t,i,r,s,h){const y=t.xmin,f=t.xmax,w=t.ymin,S=t.ymax;let E=t.zmin,A=t.zmax,P=t.mmin,N=t.mmax;return s?(E=E||0,A=A||0,h?(P=P||0,N=N||0,e[0]=y,e[1]=w,e[2]=E,e[3]=P,e[4]=f,e[5]=S,e[6]=A,e[7]=N,e):(e[0]=y,e[1]=w,e[2]=E,e[3]=f,e[4]=S,e[5]=A,e)):h?(P=P||0,N=N||0,e[0]=y,e[1]=w,e[2]=P,e[3]=f,e[4]=S,e[5]=N,e):(e[0]=y,e[1]=w,e[2]=f,e[3]=S,e)}function cM(e,t,i,r,s,h){const y=i?3:2,f=r&&h,w=i&&s;if(!t.length||!t[0].length)return null;let S,E,A,P,[N,F]=t[0],[V,U]=t[0];for(let X=0;X<t.length;X++){const re=t[X],[he,pe]=re;if(N=mh(N,he),F=mh(F,pe),V=gh(V,he),U=gh(U,pe),w&&re.length>2){const ae=re[2];S=mh(S,ae),E=gh(E,ae)}if(f&&re.length>y){const ae=re[y];A=mh(S,ae),P=gh(E,ae)}}return s?(S=S||0,E=E||0,h?(A=A||0,P=P||0,e[0]=N,e[1]=F,e[2]=S,e[3]=A,e[4]=V,e[5]=U,e[6]=E,e[7]=P,e):(e[0]=N,e[1]=F,e[2]=S,e[3]=V,e[4]=U,e[5]=E,e)):h?(A=A||0,P=P||0,e[0]=N,e[1]=F,e[2]=A,e[3]=V,e[4]=U,e[5]=P,e):(e[0]=N,e[1]=F,e[2]=V,e[3]=U,e)}function xK(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function SK(e){return e.points!==void 0}function MK(e){return e.x!==void 0&&e.y!==void 0}function EK(e){return e.paths!==void 0}function TK(e){return e.rings!==void 0}const pM=[];function qP(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function BP(e,t,i,r,s,h){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:h}}function HP(e,t,i,r,s,h){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:h}}function WP(e,t,i,r,s,h,y,f){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:h,zmax:y,mmax:f}}function dM(e,t=!1,i=!1){return t?i?WP(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):BP(e[0],e[1],e[2],e[3],e[4],e[5]):i?HP(e[0],e[1],e[2],e[3],e[4],e[5]):qP(e[0],e[1],e[2],e[3])}function b5(e){return e?xK(e)?e:MK(e)?IK(e):TK(e)?fM(e):EK(e)?JP(e):SK(e)?$K(e):null:null}function $K(e){const{hasZ:t,hasM:i,points:r}=e;return dM(cM(pM,r,t,i),t,i)}function IK(e){const{x:t,y:i,z:r,m:s}=e,h=s!=null;return r!=null?h?WP(t,i,r,s,t,i,r,s):BP(t,i,r,t,i,r):h?HP(t,i,s,t,i,s):qP(t,i,t,i)}function fM(e){const{hasZ:t,hasM:i,rings:r}=e,s=O0(pM,r,t,i);return s?dM(s,t,i):null}function JP(e){const{hasZ:t,hasM:i,paths:r}=e,s=O0(pM,r,t,i);return s?dM(s,t,i):null}var Pv;function E$(e){return!Array.isArray(e[0])}let ha=Pv=class extends Jn{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const y of t)y.hasZ&&(r=!0),y.hasM&&(s=!0);const h={rings:t.map(y=>{const f=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(r&&y.hasZ){const w=y.zmin+.5*(y.zmax-y.zmin);for(let S=0;S<f.length;S++)f[S].push(w)}if(s&&y.hasM){const w=y.mmin+.5*(y.mmax-y.mmin);for(let S=0;S<f.length;S++)f[S].push(w)}return f}),spatialReference:i};return r&&(h.hasZ=!0),s&&(h.hasM=!0),new Pv(h)}normalizeCtorArgs(e,t){let i,r,s=null,h=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||ot.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),h=s[0]&&s[0][0],h&&(i===void 0&&r===void 0?(i=h.length>2,r=h.length>3):i===void 0?i=r?h.length>3:h.length>2:r===void 0&&(r=i?h.length>3:h.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=LP(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new et;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=fM(this);if(!t)return null;const i=new Ut(t);return i.spatialReference=e,i}get isSelfIntersecting(){return cK(this.rings)}writeRings(e,t){t.rings=de(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(E$(e)){const r=[];for(let s=0,h=e.length;s<h;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Pv;return e.spatialReference=this.spatialReference,e.rings=de(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(oe(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(Y(t)!==Y(i)||Y(t)&&Y(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,h,y,f],[w,S,E,A])=>s===w&&h===S&&(y==null&&E==null||y===E)&&(f==null&&A==null||f===A);for(let s=0;s<this.rings.length;s++){const h=this.rings[s],y=e.rings[s];if(!q6(h,y,r))return!1}return!0}contains(e){if(!e)return!1;const t=S2(e,this.spatialReference);return CP(this,Y(t)?t:e)}isClockwise(e){let t;return t=E$(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,hM(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new et(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new et(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new et(i[0],i[1],i[2],i[3],this.spatialReference):new et(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(C0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new et(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new et(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(C0(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};g([x({readOnly:!0})],ha.prototype,"cache",null),g([x({readOnly:!0})],ha.prototype,"centroid",null),g([x({readOnly:!0})],ha.prototype,"extent",null),g([x({readOnly:!0})],ha.prototype,"isSelfIntersecting",null),g([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],ha.prototype,"rings",void 0),g([De("rings")],ha.prototype,"writeRings",null),ha=Pv=g([K("esri.geometry.Polygon")],ha),ha.prototype.toJSON.isDefaultToJSON=!0;const rn=ha;var w5;function AK(e){return!Array.isArray(e[0])}let Iu=w5=class extends Jn{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,h=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||ot.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),h=s[0]&&s[0][0],h&&(i===void 0&&r===void 0?(i=h.length>2,r=!1):i===void 0?i=!r&&h.length>3:r===void 0&&(r=!i&&h.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=JP(this);if(!t)return null;const i=new Ut(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=de(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(AK(e)){const r=[];for(let s=0,h=e.length;s<h;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new w5;return e.spatialReference=this.spatialReference,e.paths=de(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new et(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new et(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new et(i[0],i[1],i[2],i[3],this.spatialReference):new et(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(C0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new et(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new et(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(C0(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};g([x({readOnly:!0})],Iu.prototype,"cache",null),g([x({readOnly:!0})],Iu.prototype,"extent",null),g([x({type:[[[Number]]],json:{write:{isRequired:!0}}})],Iu.prototype,"paths",void 0),g([De("paths")],Iu.prototype,"writePaths",null),Iu=w5=g([K("esri.geometry.Polyline")],Iu),Iu.prototype.toJSON.isDefaultToJSON=!0;const tn=Iu,qt={convertToGEGeometry:kK,exportPoint:CK,exportPolygon:OK,exportPolyline:PK,exportMultipoint:NK,exportExtent:RK};function kK(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function CK(e,t,i){const r=e.hasZ(t),s=e.hasM(t),h=new et({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(h.z=e.getPointZ(t)),s&&(h.m=e.getPointM(t)),h.cache._geVersion=t,h}function OK(e,t,i){const r=new rn({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function PK(e,t,i){const r=new tn({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function NK(e,t,i){const r=new jp({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function RK(e,t,i){const r=e.hasZ(t),s=e.hasM(t),h=new Ut({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const y=e.getZExtent(t);h.zmin=y.vmin,h.zmax=y.vmax}if(s){const y=e.getMExtent(t);h.mmin=y.vmin,h.mmax=y.vmax}return h.cache._geVersion=t,h}const LK=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:qt},Symbol.toStringTag,{value:"Module"}));function Jt(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function FK(e){return kt.extendedSpatialReferenceInfo(e)}function jK(e,t){return kt.clip(qt,Jt(e),e,t)}function DK(e,t){return kt.cut(qt,Jt(e),e,t)}function zK(e,t){return kt.contains(qt,Jt(e),e,t)}function VK(e,t){return kt.crosses(qt,Jt(e),e,t)}function GK(e,t,i){return kt.distance(qt,Jt(e),e,t,i)}function UK(e,t){return kt.equals(qt,Jt(e),e,t)}function qK(e,t){return kt.intersects(qt,Jt(e),e,t)}function BK(e,t){return kt.touches(qt,Jt(e),e,t)}function HK(e,t){return kt.within(qt,Jt(e),e,t)}function WK(e,t){return kt.disjoint(qt,Jt(e),e,t)}function JK(e,t){return kt.overlaps(qt,Jt(e),e,t)}function KK(e,t,i){return kt.relate(qt,Jt(e),e,t,i)}function YK(e){return kt.isSimple(qt,Jt(e),e)}function ZK(e){return kt.simplify(qt,Jt(e),e)}function XK(e,t=!1){return kt.convexHull(qt,Jt(e),e,t)}function QK(e,t){return kt.difference(qt,Jt(e),e,t)}function eY(e,t){return kt.symmetricDifference(qt,Jt(e),e,t)}function KP(e,t){return kt.intersect(qt,Jt(e),e,t)}function YP(e,t=null){return kt.union(qt,Jt(e),e,t)}function tY(e,t,i,r,s,h){return kt.offset(qt,Jt(e),e,t,i,r,s,h)}function iY(e,t,i,r=!1){return kt.buffer(qt,Jt(e),e,t,i,r)}function E2(e,t,i,r,s,h){return kt.geodesicBuffer(qt,Jt(e),e,t,i,r,s,h)}function rY(e,t,i=!0){return kt.nearestCoordinate(qt,Jt(e),e,t,i)}function nY(e,t){return kt.nearestVertex(qt,Jt(e),e,t)}function sY(e,t,i,r){return kt.nearestVertices(qt,Jt(e),e,t,i,r)}function yM(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function oY(e,t,i){if(e==null)throw new Error("Illegal Argument Exception");const r=e.spatialReference;if((i=i!=null?i:yM(e))==null)throw new Error("Illegal Argument Exception");const s=e.constructor.fromJSON(kt.rotate(e,t,i));return s.spatialReference=r,s}function aY(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:yM(e))==null)throw new Error("Illegal Argument Exception");const r=e.constructor.fromJSON(kt.flipHorizontal(e,t));return r.spatialReference=i,r}function lY(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:yM(e))==null)throw new Error("Illegal Argument Exception");const r=e.constructor.fromJSON(kt.flipVertical(e,t));return r.spatialReference=i,r}function uY(e,t,i,r){return kt.generalize(qt,Jt(e),e,t,i,r)}function hY(e,t,i){return kt.densify(qt,Jt(e),e,t,i)}function cY(e,t,i,r=0){return kt.geodesicDensify(qt,Jt(e),e,t,i,r)}function pY(e,t){return kt.planarArea(qt,Jt(e),e,t)}function dY(e,t){return kt.planarLength(qt,Jt(e),e,t)}function cw(e,t,i){return kt.geodesicArea(qt,Jt(e),e,t,i)}function fY(e,t,i){return kt.geodesicLength(qt,Jt(e),e,t,i)}const h9e=Object.freeze(Object.defineProperty({__proto__:null,buffer:iY,clip:jK,contains:zK,convexHull:XK,crosses:VK,cut:DK,densify:hY,difference:QK,disjoint:WK,distance:GK,equals:UK,extendedSpatialReferenceInfo:FK,flipHorizontal:aY,flipVertical:lY,generalize:uY,geodesicArea:cw,geodesicBuffer:E2,geodesicDensify:cY,geodesicLength:fY,intersect:KP,intersects:qK,isSimple:YK,nearestCoordinate:rY,nearestVertex:nY,nearestVertices:sY,offset:tY,overlaps:JK,planarArea:pY,planarLength:dY,relate:KK,rotate:oY,simplify:ZK,symmetricDifference:eY,touches:BK,union:YP,within:HK},Symbol.toStringTag,{value:"Module"}));class lt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,h)=>{const y=this.toJSON(r);y!==void 0&&Ur(h,y,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function Jr(){return function(e,t){return new lt(e,{ignoreUnknown:!0,...t})}}const yY=Jr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),T$=Jr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function mM(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function T2(e){return e.points!==void 0}function $2(e){return e.x!==void 0&&e.y!==void 0}function I2(e){return e.paths!==void 0}function xh(e){return e.rings!==void 0}function Ua(e){return oe(e)?null:e instanceof Jn?e:$2(e)?et.fromJSON(e):I2(e)?tn.fromJSON(e):xh(e)?rn.fromJSON(e):T2(e)?jp.fromJSON(e):mM(e)?Ut.fromJSON(e):null}function rf(e){return e?$2(e)?"esriGeometryPoint":I2(e)?"esriGeometryPolyline":xh(e)?"esriGeometryPolygon":mM(e)?"esriGeometryEnvelope":T2(e)?"esriGeometryMultipoint":null:null}const mY={esriGeometryPoint:et,esriGeometryPolyline:tn,esriGeometryPolygon:rn,esriGeometryEnvelope:Ut,esriGeometryMultipoint:jp};function ZP(e){return e&&mY[e]||null}const Rh={base:Jn,key:"type",typeMap:{extent:Ut,multipoint:jp,point:et,polyline:tn,polygon:rn}};Va(Rh);class g0{constructor(){this._emitter=new g0.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this.target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,h){const y=this._listenersMap&&this._listenersMap.get(s);if(!y)return!1;const f=this.target||this;return[...y].forEach(w=>{w.call(f,h)}),y.length>0}on(s,h){if(Array.isArray(s)){const f=s.map(w=>this.on(w,h));return y2(f)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(s)||[];return y.push(h),this._listenersMap.set(s,y),{remove:()=>{const f=this._listenersMap&&this._listenersMap.get(s)||[],w=f.indexOf(h);w>=0&&f.splice(w,1)}}}once(s,h){const y=this.on(s,f=>{y.remove(),h.call(null,f)});return y}hasEventListener(s){const h=this._listenersMap&&this._listenersMap.get(s);return h!=null&&h.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(h,y){return this._emitter.emit(h,y)}on(h,y){return this._emitter.on(h,y)}once(h,y){return this._emitter.once(h,y)}hasEventListener(h){return this._emitter.hasEventListener(h)}};return s=g([K("esri.core.Evented")],s),s};let i=class extends qe{constructor(){super(...arguments),this._emitter=new g0.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=g([K("esri.core.Evented")],i),e.EventedAccessor=i})(g0||(g0={}));const ta=g0;var Ht;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ht||(Ht={}));function gM(e){return(t,i)=>{t[i]=e}}class XP{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new aP(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const r=t[i];r.onInvalidated(),r.onCommitted()}}}var Rl;class gY{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Is=new Zo(gY,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),vY=()=>{};function u_(e){return e?e instanceof Vc?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function h_(e){if(e&&e.length)return e[0]}function bY(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let h=0;for(;h<s&&e[i+h]===t[r+h];)h++;return h}function QP(e,t,i,r){t&&t.forEach((s,h,y)=>{e.push(s),QP(e,i.call(r,s,h,y),i,r)})}const du=new Set,fu=new Set,yu=new Set,c_=new Map;let wY=0,Vc=Rl=class extends ta.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new XP,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:wY++})}static isCollection(e){return e!=null&&e instanceof Rl}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Rl?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return yt(this._observable),this._items}set items(e){this._emitBeforeChanges(Ht.ADD)||(this._splice(0,this.length,u_(e)),this._emitAfterChanges(Ht.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=vY,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(yt(this._observable),this._emitBeforeChanges(Ht.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Ht.ADD),this}addMany(e,t=this._items.length){if(yt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ht.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,u_(e)),this._emitAfterChanges(Ht.ADD),this}at(e){if(yt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(yt(this._observable),!this.length||this._emitBeforeChanges(Ht.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ht.REMOVE),e}clone(){return yt(this._observable),this._createNewInstance({items:this._items.map(de)})}concat(...e){yt(this._observable);const t=e.map(u_);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(yt(this._observable),!this.length||this._emitBeforeChanges(Ht.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(Ht.REMOVE)}every(e,t){return yt(this._observable),this._items.every(e,t)}filter(e,t){let i;return yt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return yt(this._observable),this._items.find(e,t)}findIndex(e,t){return yt(this._observable),this._items.findIndex(e,t)}flatten(e,t){yt(this._observable);const i=[];return QP(i,this,e,t),new Rl(i)}forEach(e,t){return yt(this._observable),this._items.forEach(e,t)}getItemAt(e){return yt(this._observable),this._items[e]}getNextIndex(e){yt(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return yt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return yt(this._observable),this._items.indexOf(e,t)}join(e=","){return yt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return yt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){yt(this._observable);const i=this._items.map(e,t);return new Rl({items:i})}reorder(e,t=this.length-1){yt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Ht.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Ht.MOVE)}return e}}pop(){if(yt(this._observable),!this.length||this._emitBeforeChanges(Ht.REMOVE))return;const e=h_(this._splice(this.length-1,1));return this._emitAfterChanges(Ht.REMOVE),e}push(...e){return yt(this._observable),this._emitBeforeChanges(Ht.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ht.ADD)),this.length}reduce(e,t){yt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){yt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return yt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(yt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ht.REMOVE))return;const t=h_(this._splice(e,1));return this._emitAfterChanges(Ht.REMOVE),t}removeMany(e){if(yt(this._observable),!e||!e.length||this._emitBeforeChanges(Ht.REMOVE))return[];const t=e instanceof Rl?e.toArray():e,i=this._items,r=[],s=t.length;for(let h=0;h<s;h++){const y=t[h],f=i.indexOf(y);if(f>-1){const w=1+bY(t,i,h+1,f+1),S=this._splice(f,w);S&&S.length>0&&r.push.apply(r,S),h+=w-1}}return this._emitAfterChanges(Ht.REMOVE),r}reverse(){if(yt(this._observable),this._emitBeforeChanges(Ht.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ht.MOVE),this}shift(){if(yt(this._observable),!this.length||this._emitBeforeChanges(Ht.REMOVE))return;const e=h_(this._splice(0,1));return this._emitAfterChanges(Ht.REMOVE),e}slice(e=0,t=this.length){return yt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return yt(this._observable),this._items.some(e,t)}sort(e){if(yt(this._observable),!this.length||this._emitBeforeChanges(Ht.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ht.MOVE),this}splice(e,t,...i){yt(this._observable);const r=(t?Ht.REMOVE:0)|(i.length?Ht.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return yt(this._observable),this._items.slice()}toJSON(){return yt(this._observable),this.toArray()}toLocaleString(){return yt(this._observable),this._items.toLocaleString()}toString(){return yt(this._observable),this._items.toString()}unshift(...e){return yt(this._observable),!e.length||this._emitBeforeChanges(Ht.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ht.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let h,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=X0(()=>this._dispatchChange())),t){if(y=r.splice(e,t),this.hasEventListener("before-remove")){const f=Is.acquire();f.target=this,f.cancellable=!0;for(let w=0,S=y.length;w<S;w++)h=y[w],f.reset(h),this.emit("before-remove",f),f.defaultPrevented&&(y.splice(w,1),r.splice(e,0,h),e+=1,w-=1,S-=1);Is.release(f)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const f=Is.acquire();f.target=this,f.cancellable=!1;const w=y.length;for(let S=0;S<w;S++)f.reset(y[S]),this.emit("after-remove",f);Is.release(f)}}if(i&&i.length){if(s){const E=[];for(const A of i){const P=s.ensureType(A);P==null&&A!=null||E.push(P)}i=E}const f=this.hasEventListener("before-add"),w=this.hasEventListener("after-add"),S=e===this.length;if(f||w){const E=Is.acquire();E.target=this,E.cancellable=!0;const A=Is.acquire();A.target=this,A.cancellable=!1;for(const P of i)f?(E.reset(P),this.emit("before-add",E),E.defaultPrevented||(S?r.push(P):r.splice(e++,0,P),this._set("length",r.length),w&&(A.reset(P),this.emit("after-add",A)))):(S?r.push(P):r.splice(e++,0,P),this._set("length",r.length),A.reset(P),this.emit("after-add",A));Is.release(A),Is.release(E)}else{if(S)for(const E of i)r.push(E);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Is.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Is.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Is.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Is.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;du.clear(),fu.clear(),yu.clear();for(const{added:w,removed:S}of i){if(w)if(yu.size===0&&fu.size===0)for(const E of w)du.add(E);else for(const E of w)fu.has(E)?(yu.add(E),fu.delete(E)):yu.has(E)||du.add(E);if(S)if(yu.size===0&&du.size===0)for(const E of S)fu.add(E);else for(const E of S)du.has(E)?du.delete(E):(yu.delete(E),fu.add(E))}const r=gn.acquire();du.forEach(w=>{r.push(w)});const s=gn.acquire();fu.forEach(w=>{s.push(w)});const h=this._items,y=t.items,f=gn.acquire();if(yu.forEach(w=>{y.indexOf(w)!==h.indexOf(w)&&f.push(w)}),t.listeners&&(r.length||s.length||f.length)){const w={target:this,added:r,removed:s,moved:f},S=t.listeners.length;for(let E=0;E<S;E++){const A=t.listeners[E];A.removed||A.callback.call(this,w)}}gn.release(r),gn.release(s),gn.release(f)}du.clear(),fu.clear(),yu.clear()}};Vc.ofType=e=>{if(!e)return Rl;if(c_.has(e))return c_.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends Rl{};return g([gM({Type:e,ensureType:typeof e=="function"?ji(e):Va(e)})],i.prototype,"itemType",void 0),i=g([K(`esri.core.Collection<${t}>`)],i),c_.set(e,i),i},g([x()],Vc.prototype,"length",void 0),g([x()],Vc.prototype,"items",null),Vc=Rl=g([K("esri.core.Collection")],Vc);const Je=Vc,_Y="modulepreload",xY=function(e){return"/OZP_buffer_stat/"+e},$$={},ge=function(t,i,r){if(!i||i.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(i.map(h=>{if(h=xY(h),h in $$)return;$$[h]=!0;const y=h.endsWith(".css"),f=y?'[rel="stylesheet"]':"";if(!!r)for(let E=s.length-1;E>=0;E--){const A=s[E];if(A.href===h&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":_Y,y||(S.as="script",S.crossOrigin=""),S.href=h,document.head.appendChild(S),y)return new Promise((E,A)=>{S.addEventListener("load",E),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})})).then(()=>t())};var P0;function SY(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return P0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return P0.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(P0||(P0={}));let p_;function qa(){return p_||(p_=(async()=>{const e=await ge(()=>import("./arcadeUtils.429fddb5.js").then(t=>t.t),[]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),p_}const c9e=(e,t,i)=>Cm.create(e,t,i,null,["$feature"]),p9e=(e,t,i)=>Cm.create(e,t,i,null,["$feature","$view"]),MY=(e,t,i,r)=>Cm.create(e,t,i,r,["$feature","$view"]);class Cm{constructor(t,i,r,s,h,y,f,w){this.script=t,this.evaluate=h;const S=Array.isArray(f)?f:f.fields;this.fields=S,this._syntaxTree=s,this._arcade=i,this._arcadeDictionary=r,this._arcadeFeature=y,this._spatialReference=w,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,h,y){const{arcade:f,Feature:w,Dictionary:S}=await qa(),E=ot.fromJSON(i),A=f.parseScript(t,y),P=h.reduce((ae,le)=>({...ae,[le]:null}),{});let N=null;Y(s)&&(N=new S(s),N.immutable=!0,P.$config=null);const F=f.scriptUsesGeometryEngine(A)&&f.enableGeometrySupport(),V=f.scriptUsesFeatureSet(A)&&f.enableFeatureSetSupport(),U=f.scriptIsAsync(A)&&f.enableAsyncSupport(),X={vars:P,spatialReference:E,useAsync:!!U},re=new S;re.immutable=!1,re.setField("scale",0);const he=f.compileScript(A,X),pe=ae=>("$view"in ae&&ae.$view&&(re.setField("scale",ae.$view.scale),ae.$view=re),N&&(ae.$config=N),he({vars:ae,spatialReference:E}));return await Promise.all([F,V,U]),new Cm(t,f,S,A,pe,new w,r,E)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const EY=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],TY=["field","normalizationField"];function I$(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(A$(EY,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)A$(TY,r,t)}}function A$(e,t,i){if(e)for(const r of e){const s=Y0(r,t),h=s&&typeof s!="function"&&i.get(s);h&&Ur(r,h.name,t)}}function eN(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i&&i.name||null,e.endField=r&&r.name||null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=r&&r.name||null}}const d_=new Set;function tN(e,t){return e&&t?(d_.clear(),Yy(d_,e,t),Array.from(d_).sort()):[]}function Yy(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)Zs(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)e.add(s)}}function Zs(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function d9e(e,t){return oe(t)||oe(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function xn(e,t,i){var h;if(!i)return;const{arcadeUtils:r}=await qa(),s=r.extractFieldNames(i,(h=t==null?void 0:t.fields)==null?void 0:h.map(y=>y.name));for(const y of s)Zs(e,t,y)}async function iN(e,t,i){if(i&&i!=="1=1"){const r=(await ge(()=>Promise.resolve().then(()=>tU),void 0)).WhereClause.create(i,t);if(!r.isStandardized)throw new ne("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Yy(e,t,r.fieldNames)}}function $Y({displayField:e,fields:t}){return e||(t&&t.length?f_(t,"name-or-title")||f_(t,"unique-identifier")||f_(t,"type-or-category")||IY(t):null)}function IY(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function f_(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function f9e(e,t){if(!t)return;const i=Y0("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function AY(e,t,i){i.outStatistic.onStatisticValueExpression?xn(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function y9e(e,t,i){var s,h;if(!t||!i||!("fields"in i))return;const r=[];if((s=i.popupTemplate)!=null&&s.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map(y=>xn(e,t.fieldsIndex,y.expression))),Array.isArray((h=i.popupTemplate)==null?void 0:h.content)){const y=i.popupTemplate.content;for(const f of y)f.type==="expression"&&f.expressionInfo&&r.push(xn(e,t.fieldsIndex,f.expressionInfo.expression))}i.fields&&r.push(...i.fields.map(y=>AY(e,t.fieldsIndex,y))),await Promise.all(r)}async function m9e(e,t,i){t&&(t.timeInfo&&Y(i)&&i.timeExtent&&Yy(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Yy(e,t.fieldsIndex,[t.floorInfo.floorField]),Y(i)&&Y(i.where)&&await iN(e,t.fieldsIndex,i.where))}async function g9e(e,t,i){t&&i&&await Promise.all(i.map(r=>kY(e,t,r)))}async function kY(e,t,i){t&&i&&(i.valueExpression?await xn(e,t.fieldsIndex,i.valueExpression):i.field&&Zs(e,t.fieldsIndex,i.field))}function v9e(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?tN(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function b9e(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>CY(e,r,s)))}async function CY(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await xn(e,t,r.expression);else{const h=r.expression.match(/{[^}]*}/g);h&&h.forEach(y=>{Zs(e,t,y.slice(1,-1))})}await iN(e,t,s)}function OY(e){const t=e.defaultValue;return t!==void 0&&sN(e,t)?t:e.nullable?null:void 0}function rN(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function PY(e){return e===null||rN(e)}const vM="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function NY(e){return e===null||vM(e)}function nN(e){return e!=null&&typeof e=="string"}function RY(e){return e===null||nN(e)}function LY(){return!0}function sN(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?NY:vM;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?PY:rN;break;case"string":case"esriFieldTypeString":i=e.nullable?RY:nN;break;default:i=LY}return arguments.length===1?i:i(t)}const FY=["integer","small-integer","single","double"],jY=new Set([...FY,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function bM(e){return e!=null&&jY.has(e.type)}function k$(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var pw,dw;function w9e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function _9e(e,t){return e.nullable&&t===null?null:bM(e)&&!DY(e.type,Number(t))?pw.OUT_OF_RANGE:sN(e,t)?e.domain?SY(e.domain,t):null:dw.INVALID_TYPE}function DY(e,t){const i=typeof e=="string"?oN(e):e;return!!i&&(i.isInteger?vM(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function oN(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return zY;case"esriFieldTypeInteger":case"integer":return VY;case"esriFieldTypeSingle":case"single":return GY;case"esriFieldTypeDouble":case"double":return UY}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(pw||(pw={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(dw||(dw={}));const zY={min:-32768,max:32767,isInteger:!0},VY={min:-2147483648,max:2147483647,isInteger:!0},GY={min:-34e37,max:12e37,isInteger:!1},UY={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function x9e(e,t,i){switch(e){case P0.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case P0.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case dw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case pw.OUT_OF_RANGE:{const{min:r,max:s}=oN(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function qY(e,t){return!BY(e,t,null)}function BY(e,t,i){if(!t||!t.attributes||!e){if(Y(i))for(const h of e)i.add(h);return!0}const r=t.attributes;let s=!1;for(const h of e)if(!(h in r)){if(s=!0,!Y(i))break;i.add(h)}return s}function aN(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let Nv=class extends ve{constructor(e){super(e),this.type=null}};g([x({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],Nv.prototype,"type",void 0),Nv=g([K("esri.popup.content.Content")],Nv);const Dp=Nv;var _5;let ic=_5=class extends Dp{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new _5({description:this.description,displayType:this.displayType,title:this.title})}};g([x({type:String,json:{write:!0}})],ic.prototype,"description",void 0),g([x({type:["auto","preview","list"],json:{write:!0}})],ic.prototype,"displayType",void 0),g([x({type:String,json:{write:!0}})],ic.prototype,"title",void 0),g([x({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ic.prototype,"type",void 0),ic=_5=g([K("esri.popup.content.AttachmentsContent")],ic);const Zy=ic;var x5;let rc=x5=class extends Dp{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new x5({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?de(this.outFields):null})}};g([x()],rc.prototype,"creator",void 0),g([x()],rc.prototype,"destroyer",void 0),g([x()],rc.prototype,"outFields",void 0),g([x({type:["custom"],readOnly:!0})],rc.prototype,"type",void 0),rc=x5=g([K("esri.popup.content.CustomContent")],rc);const HY=rc;var S5;let ld=S5=class extends ve{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new S5({title:this.title,expression:this.expression})}};g([x({type:String,json:{write:!0}})],ld.prototype,"title",void 0),g([x({type:String,json:{write:!0}})],ld.prototype,"expression",void 0),g([x({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ld.prototype,"returnType",void 0),ld=S5=g([K("esri.popup.ElementExpressionInfo")],ld);const lN=ld;var M5;let _1=M5=class extends Dp{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new M5({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};g([x({type:lN,json:{write:!0}})],_1.prototype,"expressionInfo",void 0),g([x({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],_1.prototype,"type",void 0),_1=M5=g([K("esri.popup.content.ExpressionContent")],_1);const wM=_1;function Xe(e,t={}){var s;const i=e instanceof lt?e:new lt(e,t),r={type:(s=t==null?void 0:t.ignoreUnknown)==null||s?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),x(r)}const Xy=Jr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Xy.toJSON.bind(Xy);Xy.fromJSON.bind(Xy);let Sy;var wO,_O,xO;const y_=(xO=(wO=globalThis.esriConfig)==null?void 0:wO.locale)!=null?xO:(_O=globalThis.dojoConfig)==null?void 0:_O.locale;function uN(){var e,t;return(t=y_!=null?y_:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function bs(){return Sy===void 0&&(Sy=uN()),Sy}const My=[];function WY(e){return My.push(e),{remove(){My.splice(My.indexOf(e),1)}}}const E5=[];function _M(e){return E5.push(e),{remove(){My.splice(E5.indexOf(e),1)}}}function JY(){const e=uN();Sy!==e&&(Sy=e,[...E5].forEach(t=>{t.call(null,e)}),[...My].forEach(t=>{t.call(null,e)}))}var SO;(SO=globalThis.addEventListener)==null||SO.call(globalThis,"languagechange",JY);const sa={year:"numeric",month:"numeric",day:"numeric"},Wf={year:"numeric",month:"long",day:"numeric"},Jf={year:"numeric",month:"short",day:"numeric"},Kf={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ns={hour:"numeric",minute:"numeric"},lo={...Ns,second:"numeric"},xM={"short-date":sa,"short-date-short-time":{...sa,...Ns},"short-date-short-time-24":{...sa,...Ns,hour12:!1},"short-date-long-time":{...sa,...lo},"short-date-long-time-24":{...sa,...lo,hour12:!1},"short-date-le":sa,"short-date-le-short-time":{...sa,...Ns},"short-date-le-short-time-24":{...sa,...Ns,hour12:!1},"short-date-le-long-time":{...sa,...lo},"short-date-le-long-time-24":{...sa,...lo,hour12:!1},"long-month-day-year":Wf,"long-month-day-year-short-time":{...Wf,...Ns},"long-month-day-year-short-time-24":{...Wf,...Ns,hour12:!1},"long-month-day-year-long-time":{...Wf,...lo},"long-month-day-year-long-time-24":{...Wf,...lo,hour12:!1},"day-short-month-year":Jf,"day-short-month-year-short-time":{...Jf,...Ns},"day-short-month-year-short-time-24":{...Jf,...Ns,hour12:!1},"day-short-month-year-long-time":{...Jf,...lo},"day-short-month-year-long-time-24":{...Jf,...lo,hour12:!1},"long-date":Kf,"long-date-short-time":{...Kf,...Ns},"long-date-short-time-24":{...Kf,...Ns,hour12:!1},"long-date-long-time":{...Kf,...lo},"long-date-long-time-24":{...Kf,...lo,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ns,"long-time":lo},Qy=Jr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Qy.apiValues;Qy.toJSON.bind(Qy);Qy.fromJSON.bind(Qy);const KY={ar:"ar-u-nu-latn-ca-gregory"};let Rv=new WeakMap,hN=xM["short-date-short-time"];function YY(e){const t=e||hN;if(!Rv.has(t)){const i=bs(),r=KY[bs()]||i;Rv.set(t,new Intl.DateTimeFormat(r,t))}return Rv.get(t)}function SM(e){return xM[e]||null}function Kl(e,t){return YY(t).format(e)}_M(()=>{Rv=new WeakMap,hN=xM["short-date-short-time"]});const ZY={ar:"ar-u-nu-latn"};let Lv=new WeakMap,cN={};function XY(e){const t=e||cN;if(!Lv.has(t)){const i=bs(),r=ZY[bs()]||i;Lv.set(t,new Intl.NumberFormat(r,e))}return Lv.get(t)}function pN(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function io(e,t){return e===-0&&(e=0),XY(t).format(e)}_M(()=>{Lv=new WeakMap,cN={}});var T5;let nc=T5=class extends ve{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new T5({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Kl(e,{...SM(this.dateFormat),...this.dateTimeFormatOptions}):io(e,pN(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(s=>this.format(Number(s))).join(i):e}};g([Xe(Xy)],nc.prototype,"dateFormat",void 0),g([x({type:Object,json:{read:!1}})],nc.prototype,"dateTimeFormatOptions",void 0),g([x({type:Boolean,json:{write:!0}})],nc.prototype,"digitSeparator",void 0),g([x({type:li,json:{write:!0}})],nc.prototype,"places",void 0),nc=T5=g([K("esri.popup.support.FieldInfoFormat")],nc);const n0=nc;var $5;let yo=$5=class extends ve{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new $5({fieldName:this.fieldName,format:this.format?de(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};g([x({type:String,json:{write:!0}})],yo.prototype,"fieldName",void 0),g([x({type:n0,json:{write:!0}})],yo.prototype,"format",void 0),g([x({type:Boolean,json:{write:!0,default:!1}})],yo.prototype,"isEditable",void 0),g([x({type:String,json:{write:!0}})],yo.prototype,"label",void 0),g([Xe(new lt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],yo.prototype,"stringFieldOption",void 0),g([x({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],yo.prototype,"statisticType",void 0),g([x({type:String,json:{write:!0}})],yo.prototype,"tooltip",void 0),g([x({type:Boolean,json:{write:!0}})],yo.prototype,"visible",void 0),yo=$5=g([K("esri.popup.FieldInfo")],yo);const Om=yo;var I5;let pl=I5=class extends Dp{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new I5(de({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};g([x({type:Object,json:{write:!0}})],pl.prototype,"attributes",void 0),g([x({type:String,json:{write:!0}})],pl.prototype,"description",void 0),g([x({type:[Om]})],pl.prototype,"fieldInfos",void 0),g([De("fieldInfos")],pl.prototype,"writeFieldInfos",null),g([x({type:String,json:{write:!0}})],pl.prototype,"title",void 0),g([x({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],pl.prototype,"type",void 0),pl=I5=g([K("esri.popup.content.FieldsContent")],pl);const N0=pl;let sc=class extends ve{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};g([x({type:String,json:{write:!0}})],sc.prototype,"altText",void 0),g([x({type:String,json:{write:!0}})],sc.prototype,"caption",void 0),g([x({type:String,json:{write:!0}})],sc.prototype,"title",void 0),g([x({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],sc.prototype,"type",void 0),sc=g([K("esri.popup.content.mixins.MediaInfo")],sc);const MM=sc;var A5;let ud=A5=class extends qe{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new A5({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};g([x()],ud.prototype,"fieldName",void 0),g([x()],ud.prototype,"tooltip",void 0),g([x()],ud.prototype,"value",void 0),ud=A5=g([K("esri.popup.content.support.ChartMediaInfoValueSeries")],ud);const dN=ud;var k5;let oc=k5=class extends ve{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new k5({fields:de(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};g([x({type:[String],json:{write:!0}})],oc.prototype,"fields",void 0),g([x({type:String,json:{write:!0}})],oc.prototype,"normalizeField",void 0),g([x({type:[dN],json:{read:!1}})],oc.prototype,"series",void 0),g([x({type:String,json:{write:!0}})],oc.prototype,"tooltipField",void 0),oc=k5=g([K("esri.popup.content.support.ChartMediaInfoValue")],oc);const QY=oc;let x1=class extends MM{constructor(e){super(e),this.type=null,this.value=null}};g([x({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],x1.prototype,"type",void 0),g([x({type:QY,json:{write:!0}})],x1.prototype,"value",void 0),x1=g([K("esri.popup.content.mixins.ChartMediaInfo")],x1);const A2=x1,k2=Jr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var C5;let Fv=C5=class extends A2{constructor(e){super(e),this.type="bar-chart"}clone(){return new C5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([x({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:k2.write}})],Fv.prototype,"type",void 0),Fv=C5=g([K("esri.popup.content.BarChartMediaInfo")],Fv);const fN=Fv;var O5;let jv=O5=class extends A2{constructor(e){super(e),this.type="column-chart"}clone(){return new O5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([x({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:k2.write}})],jv.prototype,"type",void 0),jv=O5=g([K("esri.popup.content.ColumnChartMediaInfo")],jv);const yN=jv;var P5;let S1=P5=class extends ve{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new P5({linkURL:this.linkURL,sourceURL:this.sourceURL})}};g([x({type:String,json:{write:!0}})],S1.prototype,"linkURL",void 0),g([x({type:String,json:{write:!0}})],S1.prototype,"sourceURL",void 0),S1=P5=g([K("esri.popup.content.support.ImageMediaInfoValue")],S1);const eZ=S1;var N5;let hd=N5=class extends MM{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new N5({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};g([x({type:Number,json:{write:!0}})],hd.prototype,"refreshInterval",void 0),g([x({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],hd.prototype,"type",void 0),g([x({type:eZ,json:{write:!0}})],hd.prototype,"value",void 0),hd=N5=g([K("esri.popup.content.ImageMediaInfo")],hd);const mN=hd;var R5;let Dv=R5=class extends A2{constructor(e){super(e),this.type="line-chart"}clone(){return new R5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([x({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:k2.write}})],Dv.prototype,"type",void 0),Dv=R5=g([K("esri.popup.content.LineChartMediaInfo")],Dv);const gN=Dv;var L5;let zv=L5=class extends A2{constructor(e){super(e),this.type="pie-chart"}clone(){return new L5({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};g([x({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:k2.write}})],zv.prototype,"type",void 0),zv=L5=g([K("esri.popup.content.PieChartMediaInfo")],zv);const vN=zv,bN={base:MM,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":fN,"column-chart":yN,"line-chart":gN,"pie-chart":vN,image:mN}};var F5;let mo=F5=class extends Dp{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?mN.fromJSON(t):t.type==="barchart"?fN.fromJSON(t):t.type==="columnchart"?yN.fromJSON(t):t.type==="linechart"?gN.fromJSON(t):t.type==="piechart"?vN.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new F5(de({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};g([x()],mo.prototype,"activeMediaInfoIndex",void 0),g([x({type:Object,json:{write:!0}})],mo.prototype,"attributes",void 0),g([x({type:String,json:{write:!0}})],mo.prototype,"description",void 0),g([x({types:[bN]})],mo.prototype,"mediaInfos",void 0),g([je("mediaInfos")],mo.prototype,"readMediaInfos",null),g([De("mediaInfos")],mo.prototype,"writeMediaInfos",null),g([x({type:String,json:{write:!0}})],mo.prototype,"title",void 0),g([x({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],mo.prototype,"type",void 0),mo=F5=g([K("esri.popup.content.MediaContent")],mo);const em=mo;var j5;let M1=j5=class extends Dp{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new j5({text:this.text})}};g([x({type:String,json:{write:!0}})],M1.prototype,"text",void 0),g([x({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],M1.prototype,"type",void 0),M1=j5=g([K("esri.popup.content.TextContent")],M1);const R0=M1,tZ={base:null,key:"type",typeMap:{attachment:Zy,media:em,text:R0,expression:wM,field:N0}};var D5;let ac=D5=class extends ve{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new D5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([x({type:String,json:{write:!0}})],ac.prototype,"name",void 0),g([x({type:String,json:{write:!0}})],ac.prototype,"title",void 0),g([x({type:String,json:{write:!0}})],ac.prototype,"expression",void 0),g([x({type:["string","number"],json:{write:!0}})],ac.prototype,"returnType",void 0),ac=D5=g([K("esri.popup.ExpressionInfo")],ac);const wN=ac;var z5;let E1=z5=class extends ve{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new z5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};g([x({type:Boolean,json:{write:!0}})],E1.prototype,"returnTopmostRaster",void 0),g([x({type:Boolean,json:{write:!0}})],E1.prototype,"showNoDataRecords",void 0),E1=z5=g([K("esri.popup.LayerOptions")],E1);const iZ=E1;var V5;let T1=V5=class extends ve{constructor(e){super(e),this.field=null,this.order=null}clone(){return new V5({field:this.field,order:this.order})}};g([x({type:String,json:{write:!0}})],T1.prototype,"field",void 0),g([x({type:["asc","desc"],json:{write:!0}})],T1.prototype,"order",void 0),T1=V5=g([K("esri.popup.support.RelatedRecordsInfoFieldOrder")],T1);const _N=T1;var G5;let $1=G5=class extends ve{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new G5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?de(this.orderByFields):null})}};g([x({type:Boolean,json:{write:!0}})],$1.prototype,"showRelatedRecords",void 0),g([x({type:[_N],json:{write:!0}})],$1.prototype,"orderByFields",void 0),$1=G5=g([K("esri.popup.RelatedRecordsInfo")],$1);const rZ=$1;let nZ=0;const C2=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+nZ++})}};return t=g([K("esri.core.Identifiable")],t),t};let C$=class extends C2(class{}){};C$=g([K("esri.core.Identifiable")],C$);var U5;let go=U5=class extends C2(qe){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new U5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};g([x()],go.prototype,"active",void 0),g([x()],go.prototype,"className",void 0),g([x()],go.prototype,"disabled",void 0),g([x()],go.prototype,"id",void 0),g([x()],go.prototype,"indicator",void 0),g([x()],go.prototype,"title",void 0),g([x()],go.prototype,"type",void 0),g([x()],go.prototype,"visible",void 0),go=U5=g([K("esri.support.actions.ActionBase")],go);const O2=go;var q5;let Vv=q5=class extends O2{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new q5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};g([x()],Vv.prototype,"image",void 0),Vv=q5=g([K("esri.support.Action.ActionButton")],Vv);const nf=Vv;var B5;let I1=B5=class extends O2{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new B5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};g([x()],I1.prototype,"image",void 0),g([x()],I1.prototype,"value",void 0),I1=B5=g([K("esri.support.Action.ActionToggle")],I1);const xN=I1;var H5;const sZ=Je.ofType({key:"type",defaultKeyValue:"button",base:O2,typeMap:{button:nf,toggle:xN}}),oZ={base:Dp,key:"type",typeMap:{media:em,custom:HY,text:R0,attachments:Zy,fields:N0,expression:wM}},SN="esri.PopupTemplate",aZ=Le.getLogger(SN),lZ=["attachments","fields","media","text","expression"];let rr=H5=class extends ve{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>Va(oZ,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ru(e)?e:(aZ.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>lZ.includes(s.type)).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"&&this._writeTextContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,h=Array.isArray(s)?s:null;if(e){const y=h?h.filter(w=>w.type==="fields"):[],f=y.length&&y.every(w=>{var S;return(S=w.fieldInfos)==null?void 0:S.length});t.fieldInfos=e.filter(Boolean).map(w=>{const S=w.toJSON(r);return f&&(S.visible=!1),S})}if(h)for(const y of h)y.type==="fields"&&this._writeFieldsContent(y,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?de(e.toArray()):[];return new H5({actions:t,content:Array.isArray(this.content)?de(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?de(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?de(this.fieldInfos):null,layerOptions:this.layerOptions?de(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?de(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?de(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),Yy(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=de(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(h=>h.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=de(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),em.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),R0.fromJSON(s)):s.type==="attachments"?Zy.fromJSON(s):s.type==="fields"?N0.fromJSON(s):s.type==="expression"?wM.fromJSON(s):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const r=[];return e?r.push(new R0({text:e})):r.push(new N0),Array.isArray(t)&&t.length&&r.push(em.fromJSON({mediaInfos:t})),i&&r.push(Zy.fromJSON({displayType:"auto"})),r.length?r:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((r,s)=>[...r,...this._getMediaInfoFields(s)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:h=[],normalizeField:y,tooltipField:f,sourceURL:w,linkURL:S}=s,E=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(w),...this._extractFieldNames(S),...h];return y&&E.push(y),f&&E.push(f),E}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>xn(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(h=>!(h.indexOf("{relationships/")===0||h.indexOf("{expression/")===0)).map(h=>h.replace(r,"{$1}"));return s?s.map(h=>h.slice(1,-1)):[]}};g([x({type:sZ})],rr.prototype,"actions",void 0),g([x()],rr.prototype,"content",void 0),g([Mt("content")],rr.prototype,"castContent",null),g([je("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],rr.prototype,"readContent",null),g([De("content",{popupElements:{type:Je.ofType(tZ)},showAttachments:{type:Boolean},mediaInfos:{type:Je.ofType(bN)},description:{type:String}})],rr.prototype,"writeContent",null),g([x({type:[wN],json:{write:!0}})],rr.prototype,"expressionInfos",void 0),g([x({type:[Om]})],rr.prototype,"fieldInfos",void 0),g([De("fieldInfos")],rr.prototype,"writeFieldInfos",null),g([x({type:iZ})],rr.prototype,"layerOptions",void 0),g([De("layerOptions")],rr.prototype,"writeLayerOptions",null),g([x({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],rr.prototype,"lastEditInfoEnabled",void 0),g([x()],rr.prototype,"outFields",void 0),g([x()],rr.prototype,"overwriteActions",void 0),g([x()],rr.prototype,"returnGeometry",void 0),g([x({json:{type:String}})],rr.prototype,"title",void 0),g([De("title")],rr.prototype,"writeTitle",null),g([x({type:rZ,json:{write:!0}})],rr.prototype,"relatedRecordsInfo",void 0),rr=H5=g([K(SN)],rr);const sf=rr,fw={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function MN(e){return fw[e]||fw[e.toLowerCase()]}function EM(e){var t;return(t=fw[e])!=null?t:fw[e.toLowerCase()]}function uZ(e){return[...EM(e)]}function m_(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function EN(e,t,i,r=1){const s=(e%360+360)%360/360,h=i<=.5?i*(t+1):i+t-i*t,y=2*i-h;return[Math.round(255*m_(y,h,s+1/3)),Math.round(255*m_(y,h,s)),Math.round(255*m_(y,h,s-1/3)),r]}function hZ(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,h=t?e.length===9:e.length===5;let y=Number("0x"+e.substr(1));if(isNaN(y))return null;const f=[0,0,0,1];let w;return h&&(w=y&r,y>>=i,f[3]=s*w/255),w=y&r,y>>=i,f[2]=s*w,w=y&r,y>>=i,f[1]=s*w,w=y&r,y>>=i,f[0]=s*w,f}function Lr(){return[0,0,0]}function cZ(e){return[e[0],e[1],e[2]]}function of(e,t,i){return[e,t,i]}function pZ(e){const t=Lr(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function dZ(e,t){return new Float64Array(e,t,3)}function TN(){return Lr()}function $N(){return of(1,1,1)}function IN(){return of(1,0,0)}function AN(){return of(0,1,0)}function kN(){return of(0,0,1)}const fZ=TN(),CN=$N(),yZ=IN(),mZ=AN(),gZ=kN();Object.freeze(Object.defineProperty({__proto__:null,create:Lr,clone:cZ,fromValues:of,fromArray:pZ,createView:dZ,zeros:TN,ones:$N,unitX:IN,unitY:AN,unitZ:kN,ZEROS:fZ,ONES:CN,UNIT_X:yZ,UNIT_Y:mZ,UNIT_Z:gZ},Symbol.toStringTag,{value:"Module"}));const pt=1e-6,vh=Math.random,vZ=Math.PI/180,bZ=180/Math.PI;function TM(e){return e*vZ}function wZ(e){return e*bZ}function _Z(e,t){return Math.abs(e-t)<=pt*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:pt,RANDOM:vh,toRadian:TM,toDegree:wZ,equals:_Z},Symbol.toStringTag,{value:"Module"}));function $M(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function tm(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function P2(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function ON(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Ey(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function PN(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function NN(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function xZ(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function SZ(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function MZ(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function EZ(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function TZ(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function $Z(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function IZ(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function IM(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function AZ(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function RN(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function LN(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function FN(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function kZ(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function CZ(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function W5(e,t){const i=t[0],r=t[1],s=t[2];let h=i*i+r*r+s*s;return h>0&&(h=1/Math.sqrt(h),e[0]=t[0]*h,e[1]=t[1]*h,e[2]=t[2]*h),e}function yw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function OZ(e,t,i){const r=t[0],s=t[1],h=t[2],y=i[0],f=i[1],w=i[2];return e[0]=s*w-h*f,e[1]=h*y-r*w,e[2]=r*f-s*y,e}function PZ(e,t,i,r){const s=t[0],h=t[1],y=t[2];return e[0]=s+r*(i[0]-s),e[1]=h+r*(i[1]-h),e[2]=y+r*(i[2]-y),e}function NZ(e,t,i,r,s,h){const y=h*h,f=y*(2*h-3)+1,w=y*(h-2)+h,S=y*(h-1),E=y*(3-2*h);return e[0]=t[0]*f+i[0]*w+r[0]*S+s[0]*E,e[1]=t[1]*f+i[1]*w+r[1]*S+s[1]*E,e[2]=t[2]*f+i[2]*w+r[2]*S+s[2]*E,e}function RZ(e,t,i,r,s,h){const y=1-h,f=y*y,w=h*h,S=f*y,E=3*h*f,A=3*w*y,P=w*h;return e[0]=t[0]*S+i[0]*E+r[0]*A+s[0]*P,e[1]=t[1]*S+i[1]*E+r[1]*A+s[1]*P,e[2]=t[2]*S+i[2]*E+r[2]*A+s[2]*P,e}function LZ(e,t){t=t||1;const i=2*vh()*Math.PI,r=2*vh()-1,s=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=r*t,e}function FZ(e,t,i){const r=t[0],s=t[1],h=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*h+i[12],e[1]=i[1]*r+i[5]*s+i[9]*h+i[13],e[2]=i[2]*r+i[6]*s+i[10]*h+i[14],e}function jZ(e,t,i){const r=t[0],s=t[1],h=t[2];return e[0]=r*i[0]+s*i[3]+h*i[6],e[1]=r*i[1]+s*i[4]+h*i[7],e[2]=r*i[2]+s*i[5]+h*i[8],e}function DZ(e,t,i){const r=i[0],s=i[1],h=i[2],y=i[3],f=t[0],w=t[1],S=t[2];let E=s*S-h*w,A=h*f-r*S,P=r*w-s*f,N=s*P-h*A,F=h*E-r*P,V=r*A-s*E;const U=2*y;return E*=U,A*=U,P*=U,N*=2,F*=2,V*=2,e[0]=f+E+N,e[1]=w+A+F,e[2]=S+P+V,e}function zZ(e,t,i,r){const s=[],h=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],h[0]=s[0],h[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),h[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=h[0]+i[0],e[1]=h[1]+i[1],e[2]=h[2]+i[2],e}function VZ(e,t,i,r){const s=[],h=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],h[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),h[1]=s[1],h[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=h[0]+i[0],e[1]=h[1]+i[1],e[2]=h[2]+i[2],e}function GZ(e,t,i,r){const s=[],h=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],h[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),h[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),h[2]=s[2],e[0]=h[0]+i[0],e[1]=h[1]+i[1],e[2]=h[2]+i[2],e}function UZ(e,t){tm(fg,e),tm(yg,t),W5(fg,fg),W5(yg,yg);const i=yw(fg,yg);return i>1?0:i<-1?Math.PI:Math.acos(i)}const fg=Lr(),yg=Lr();function qZ(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function BZ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function HZ(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],h=t[0],y=t[1],f=t[2];return Math.abs(i-h)<=pt*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-y)<=pt*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-f)<=pt*Math.max(1,Math.abs(s),Math.abs(f))}function WZ(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],h=i[2]-t[2];let y=r*r+s*s+h*h;return y>0?(y=1/Math.sqrt(y),e[0]=r*y,e[1]=s*y,e[2]=h*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const JZ=Ey,KZ=PN,YZ=NN,ZZ=RN,XZ=LN,QZ=$M,eX=FN;Object.freeze(Object.defineProperty({__proto__:null,length:$M,copy:tm,set:P2,add:ON,subtract:Ey,multiply:PN,divide:NN,ceil:xZ,floor:SZ,abs:MZ,sign:EZ,min:TZ,max:$Z,round:IZ,scale:IM,scaleAndAdd:AZ,distance:RN,squaredDistance:LN,squaredLength:FN,negate:kZ,inverse:CZ,normalize:W5,dot:yw,cross:OZ,lerp:PZ,hermite:NZ,bezier:RZ,random:LZ,transformMat4:FZ,transformMat3:jZ,transformQuat:DZ,rotateX:zZ,rotateY:VZ,rotateZ:GZ,angle:UZ,str:qZ,exactEquals:BZ,equals:HZ,direction:WZ,sub:JZ,mul:KZ,div:YZ,dist:ZZ,sqrDist:XZ,len:QZ,sqrLen:eX},Symbol.toStringTag,{value:"Module"}));function tX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function iX(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function rX(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function jN(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function DN(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function zN(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function nX(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function sX(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function oX(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function aX(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function lX(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function uX(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function hX(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function VN(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],h=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+h*h)}function GN(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],h=t[3]-e[3];return i*i+r*r+s*s+h*h}function UN(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function qN(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function cX(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function pX(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function dX(e,t){const i=t[0],r=t[1],s=t[2],h=t[3];let y=i*i+r*r+s*s+h*h;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=r*y,e[2]=s*y,e[3]=h*y),e}function fX(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function BN(e,t,i,r){const s=t[0],h=t[1],y=t[2],f=t[3];return e[0]=s+r*(i[0]-s),e[1]=h+r*(i[1]-h),e[2]=y+r*(i[2]-y),e[3]=f+r*(i[3]-f),e}function yX(e,t){let i,r,s,h,y,f;t=t||1;do i=2*vh()-1,r=2*vh()-1,y=i*i+r*r;while(y>=1);do s=2*vh()-1,h=2*vh()-1,f=s*s+h*h;while(f>=1);const w=Math.sqrt((1-y)/f);return e[0]=t*i,e[1]=t*r,e[2]=t*s*w,e[3]=t*h*w,e}function mX(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*h+i[12]*y,e[1]=i[1]*r+i[5]*s+i[9]*h+i[13]*y,e[2]=i[2]*r+i[6]*s+i[10]*h+i[14]*y,e[3]=i[3]*r+i[7]*s+i[11]*h+i[15]*y,e}function gX(e,t,i){const r=t[0],s=t[1],h=t[2],y=i[0],f=i[1],w=i[2],S=i[3],E=S*r+f*h-w*s,A=S*s+w*r-y*h,P=S*h+y*s-f*r,N=-y*r-f*s-w*h;return e[0]=E*S+N*-y+A*-w-P*-f,e[1]=A*S+N*-f+P*-y-E*-w,e[2]=P*S+N*-w+E*-f-A*-y,e[3]=t[3],e}function vX(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function bX(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function wX(e,t){const i=e[0],r=e[1],s=e[2],h=e[3],y=t[0],f=t[1],w=t[2],S=t[3];return Math.abs(i-y)<=pt*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-f)<=pt*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-w)<=pt*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(h-S)<=pt*Math.max(1,Math.abs(h),Math.abs(S))}const _X=jN,xX=DN,SX=zN,MX=VN,EX=GN,TX=UN,$X=qN;Object.freeze(Object.defineProperty({__proto__:null,copy:tX,set:iX,add:rX,subtract:jN,multiply:DN,divide:zN,ceil:nX,floor:sX,min:oX,max:aX,round:lX,scale:uX,scaleAndAdd:hX,distance:VN,squaredDistance:GN,length:UN,squaredLength:qN,negate:cX,inverse:pX,normalize:dX,dot:fX,lerp:BN,random:yX,transformMat4:mX,transformQuat:gX,str:vX,exactEquals:bX,equals:wX,sub:_X,mul:xX,div:SX,dist:MX,sqrDist:EX,len:TX,sqrLen:$X},Symbol.toStringTag,{value:"Module"}));const O$=new Float32Array(1);function S9e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Kn(e,t,i){return Math.min(Math.max(e,t),i)}function M9e(e){return(e&e-1)==0}function E9e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function T9e(e,t,i){return e+(t-e)*i}function A1(e){return e*Math.PI/180}function HN(e){return 180*e/Math.PI}function $9e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function I9e(e){return Math.acos(Kn(e,-1,1))}function WN(e){return Math.asin(Kn(e,-1,1))}function IX(e,t,i=1e-6){if(isNaN(e)||isNaN(t))return!1;if(e===t)return!0;const r=Math.abs(e-t),s=Math.abs(e),h=Math.abs(t);if(e===0||t===0||s<1e-12&&h<1e-12){if(r>.01*i)return!1}else if(r/(s+h)>i)return!1;return!0}function Fa(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function AX(e){return JN(Math.max(-J5,Math.min(e,J5)))}function JN(e){return O$[0]=e,O$[0]}function A9e(e,t){const i=$M(e),r=WN(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return P2(t,i,r,s),t}function k9e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Fa(t,1)&&Fa(i,1)&&Fa(r,1))}const J5=JN(34028234663852886e22);function mg(e){return Kn(K6(e),0,255)}function gg(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class Xi{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,r,s=new Xi){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),h=r[1];if(h==="rgb"&&s.length===3||h==="rgba"&&s.length===4){const y=s[0];if(y.charAt(y.length-1)==="%"){const f=s.map(w=>2.56*parseFloat(w));return s.length===4&&(f[3]=parseFloat(s[3])),Xi.fromArray(f,i)}return Xi.fromArray(s.map(f=>parseFloat(f)),i)}if(h==="hsl"&&s.length===3||h==="hsla"&&s.length===4)return Xi.fromArray(EN(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Xi){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let h=Number("0x"+t.substr(1));return isNaN(h)?null:(["b","g","r"].forEach(y=>{const f=h&s;h>>=r,i[y]=r===4?17*f:f}),i.a=1,i)}static fromArray(t,i=new Xi){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=MN(t)?EM(t):null;return r&&Xi.fromArray(r,i)||Xi.fromRgb(t,i)||Xi.fromHex(t,i)}static fromJSON(t){return t&&new Xi([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return Y(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return Y(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,s,h;return typeof t=="string"?Xi.fromString(t,this):Array.isArray(t)?Xi.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(h=t.a)!=null?h:1),t instanceof Xi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Xi.AlphaMode.ALWAYS){const i=mg(this.r),r=mg(this.g),s=mg(this.b);return t===Xi.AlphaMode.ALWAYS||this.a!==1?[i,r,s,mg(255*this.a)]:[i,r,s]}clone(){return new Xi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return Y(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(gg(this.r,0,255)),this.g=Math.round(gg(this.g,0,255)),this.b=Math.round(gg(this.b,0,255)),this.a=gg(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}Xi.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Xi||(Xi={}));const rt=Xi,P$=new lt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let kX=0,cd=class extends ve{constructor(e){super(e),this.id="sym"+kX++,this.type=null,this.color=new rt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};g([x({type:P$.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:P$.write}}})],cd.prototype,"type",void 0),g([x({type:rt,json:{write:{allowNull:!0}}})],cd.prototype,"color",void 0),g([je("color")],cd.prototype,"readColor",null),cd=g([K("esri.symbols.Symbol")],cd);const En=cd;var K5;let Au=K5=class extends En{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const h=s.valueExpressionInfo;return xn(e,t,h.expression)});await Promise.all(r)}}}clone(){return new K5({data:de(this.data)})}hash(){return J6(JSON.stringify(this.data)).toString()}};g([x({json:{write:!1}})],Au.prototype,"color",void 0),g([x({json:{write:!0}})],Au.prototype,"data",void 0),g([je("data",["symbol"])],Au.prototype,"readData",null),g([De("data",{})],Au.prototype,"writeData",null),g([Xe({CIMSymbolReference:"cim"},{readOnly:!0})],Au.prototype,"type",void 0),Au=K5=g([K("esri.symbols.CIMSymbol")],Au);const Pm=Au;let pd=class extends ve{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};g([x({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],pd.prototype,"enabled",void 0),g([De("enabled")],pd.prototype,"writeEnabled",null),g([x({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],pd.prototype,"type",void 0),pd=g([K("esri.symbols.Symbol3DLayer")],pd);const Xa=pd,CX=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,OX="screenUtils.toPt: input not recognized!",KN=96;function YN(e){return e?e/72*KN:0}function Ba(e){return e?72*e/KN:0}function Dt(e){if(typeof e=="string"){const t=e.match(CX);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",h=r==="px"?Ba(i):i;return s?-h:h}return console.warn(OX),null}return e}function _r(e=0,t=0){return{x:e,y:t}}function PX(e=0,t=0){return[e,t]}function C9e(e=0,t=0,i=0){return[e,t,i]}function O9e(e){return e}function P9e(e){return e}function N9e(e){return e}function R9e(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function N2(e){const t=K6(100*(1-e));return Math.max(0,Math.min(t,100))}function im(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function NX(e,t){const i=t.transparency!=null?im(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new rt([r[0]||0,r[1]||0,r[2]||0,i]):null}function RX(e,t){t.color=e.toJSON().slice(0,3);const i=N2(e.a);i!==0&&(t.transparency=i)}const Lh={type:rt,json:{type:[li],default:null,read:{source:["color","transparency"],reader:NX},write:{target:{color:{type:[li]},transparency:{type:li}},writer:RX}}},Ha={type:Number,cast:Dt,json:{write:!0}};let lc=class extends ve{constructor(e){super(e),this.color=new rt([0,0,0,1]),this.extensionLength=0,this.size=Ba(1)}clone(){}cloneProperties(){return{color:de(this.color),size:this.size,extensionLength:this.extensionLength}}};g([x({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lc.prototype,"type",void 0),g([x(Lh)],lc.prototype,"color",void 0),g([x({...Ha,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],lc.prototype,"extensionLength",void 0),g([x(Ha)],lc.prototype,"size",void 0),lc=g([K("esri.symbols.edges.Edges3D")],lc);const AM=lc;var Y5;let Gv=Y5=class extends AM{constructor(e){super(e),this.type="sketch"}clone(){return new Y5(this.cloneProperties())}};g([Xe({sketch:"sketch"},{readOnly:!0})],Gv.prototype,"type",void 0),Gv=Y5=g([K("esri.symbols.edges.SketchEdges3D")],Gv);const LX=Gv;var Z5;let Uv=Z5=class extends AM{constructor(e){super(e),this.type="solid"}clone(){return new Z5(this.cloneProperties())}};g([Xe({solid:"solid"},{readOnly:!0})],Uv.prototype,"type",void 0),Uv=Z5=g([K("esri.symbols.support.SolidEdges3D")],Uv);const FX=Uv,ZN={types:{key:"type",base:AM,typeMap:{solid:FX,sketch:LX}},json:{write:!0}};var X5;let ws=X5=class extends ve{constructor(e){super(e),this.color=null}clone(){const e={color:Y(this.color)?this.color.clone():null};return new X5(e)}};g([x(Lh)],ws.prototype,"color",void 0),ws=X5=g([K("esri.symbols.support.Symbol3DMaterial")],ws);var Q5;let ku=Q5=class extends Xa{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Q5({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};g([Xe({Extrude:"extrude"},{readOnly:!0})],ku.prototype,"type",void 0),g([x({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ku.prototype,"size",void 0),g([x({type:ws,json:{write:!0}})],ku.prototype,"material",void 0),g([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ku.prototype,"castShadows",void 0),g([x(ZN)],ku.prototype,"edges",void 0),ku=Q5=g([K("esri.symbols.ExtrudeSymbol3DLayer")],ku);const XN=ku;let k1=class extends En{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};g([Xe({esriSLS:"simple-line"},{readOnly:!0})],k1.prototype,"type",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],k1.prototype,"width",void 0),k1=g([K("esri.symbols.LineSymbol")],k1);const jX=k1,DX=["begin","end","begin-end"],QN=["arrow","circle","square","diamond","cross","x"];var ex;let ca=ex=class extends ve{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new ex({color:de(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};g([x({type:["begin","end","begin-end"],json:{write:!0}})],ca.prototype,"placement",void 0),g([Xe({"line-marker":"line-marker"},{readOnly:!0}),x({json:{origins:{"web-map":{write:!1}}}})],ca.prototype,"type",void 0),g([x({type:QN})],ca.prototype,"style",void 0),g([De("style")],ca.prototype,"writeStyle",null),g([x({type:rt,value:null,json:{write:{allowNull:!0}}})],ca.prototype,"color",null),g([je("color")],ca.prototype,"readColor",null),g([De("color")],ca.prototype,"writeColor",null),ca=ex=g([K("esri.symbols.LineSymbolMarker")],ca);const zX=ca;var tx;const g_=new lt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let dl=tx=class extends jX{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,h){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=Dt(i)),r!=null&&(y.cap=r),s!=null&&(y.join=s),h!=null&&(y.miterLimit=Dt(h)),y}clone(){var e;return new tx({color:de(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};g([Xe({esriSLS:"simple-line"},{readOnly:!0})],dl.prototype,"type",void 0),g([x({type:g_.apiValues,json:{read:g_.read,write:g_.write}})],dl.prototype,"style",void 0),g([x({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],dl.prototype,"cap",void 0),g([x({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],dl.prototype,"join",void 0),g([x({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":zX}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],dl.prototype,"marker",void 0),g([x({type:Number,json:{read:!1,write:!1}})],dl.prototype,"miterLimit",void 0),dl=tx=g([K("esri.symbols.SimpleLineSymbol")],dl);const Yn=dl;let C1=class extends En{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};g([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Yn}},json:{default:null,write:!0}})],C1.prototype,"outline",void 0),g([x({type:["simple-fill","picture-fill"],readOnly:!0})],C1.prototype,"type",void 0),C1=g([K("esri.symbols.FillSymbol")],C1);const eR=C1;let qv=class extends ve{constructor(e){super(e)}clone(){}};g([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],qv.prototype,"type",void 0),qv=g([K("esri.symbols.patterns.LinePattern3D")],qv);const tR=qv,VX=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var ix;const GX=Jr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let O1=ix=class extends tR{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new ix(e)}};g([x({type:["style"]})],O1.prototype,"type",void 0),g([Xe(GX),x({type:VX})],O1.prototype,"style",void 0),O1=ix=g([K("esri.symbols.patterns.LineStylePattern3D")],O1);const kM=O1;let Bv=class extends ve{constructor(e){super(e)}clone(){}};g([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Bv.prototype,"type",void 0),Bv=g([K("esri.symbols.patterns.Pattern3D")],Bv);const iR=Bv,UX=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var rx;let P1=rx=class extends iR{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new rx(e)}};g([x({type:["style"]})],P1.prototype,"type",void 0),g([x({type:UX,json:{read:!0,write:!0}})],P1.prototype,"style",void 0),P1=rx=g([K("esri.symbols.patterns.StylePattern3D")],P1);const rR=P1,qX={types:{key:"type",base:iR,typeMap:{style:rR}},json:{write:!0}},nR={types:{key:"type",base:tR,typeMap:{style:kM}},json:{write:!0}},Ty=new rt("white");new rt("black");const BX=new rt([255,255,255,0]);function HX(e){return e.r===0&&e.g===0&&e.b===0}var nx;let $y=nx=class extends ws{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:Y(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new nx(e)}};g([Xe({multiply:"multiply",replace:"replace",tint:"tint"})],$y.prototype,"colorMixMode",void 0),$y=nx=g([K("esri.symbols.support.Symbol3DFillMaterial")],$y);function Ss(e=eQ){return[e[0],e[1],e[2],e[3]]}function L9e(e){return[e[0],e[1],e[2],e[3]]}function CM(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function F9e(e,t,i,r,s=Ss()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function WX(e,t=Ss()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function j9e(e,t){return new Ut({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function D9e(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function z9e(e,t,i){if(oe(t))CM(i,e);else if("length"in t)QX(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function V9e(e,t,i=e){const r=t.length;let s=e[0],h=e[1],y=e[2],f=e[3];for(let w=0;w<r;w++){const S=t[w];s=Math.min(s,S[0]),h=Math.min(h,S[1]),y=Math.max(y,S[0]),f=Math.max(f,S[1])}return i[0]=s,i[1]=h,i[2]=y,i[3]=f,i}function G9e(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function JX(e){return oe(e)||e[0]>=e[2]?0:e[2]-e[0]}function KX(e){return e[1]>=e[3]?0:e[3]-e[1]}function U9e(e){return JX(e)*KX(e)}function q9e(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function YX(e,t){return sR(e,t[0],t[1])}function B9e(e,t){return sR(e,t.x,t.y)}function sR(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function ZX(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function H9e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function XX(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function W9e(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function J9e(e){return e?CM(e,N$):Ss(N$)}function QX(e){return e!=null&&e.length===4}const N$=[1/0,1/0,-1/0,-1/0],eQ=[0,0,0,0];function OM(e=rQ){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function PM(e,t,i,r,s,h,y=OM()){return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=s,y[5]=h,y}function K9e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Ut(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Y9e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Z9e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function X9e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Q9e(e,t,i=0,r=t.length/3){let s=e[0],h=e[1],y=e[2],f=e[3],w=e[4],S=e[5];for(let E=0;E<r;E++)s=Math.min(s,t[i+3*E]),h=Math.min(h,t[i+3*E+1]),y=Math.min(y,t[i+3*E+2]),f=Math.max(f,t[i+3*E]),w=Math.max(w,t[i+3*E+1]),S=Math.max(S,t[i+3*E+2]);e[0]=s,e[1]=h,e[2]=y,e[3]=f,e[4]=w,e[5]=S}function e5e(e,t,i){const r=t.length;let s=e[0],h=e[1],y=e[2],f=e[3],w=e[4],S=e[5];if(i)for(let E=0;E<r;E++){const A=t[E];s=Math.min(s,A[0]),h=Math.min(h,A[1]),y=Math.min(y,A[2]),f=Math.max(f,A[0]),w=Math.max(w,A[1]),S=Math.max(S,A[2])}else for(let E=0;E<r;E++){const A=t[E];s=Math.min(s,A[0]),h=Math.min(h,A[1]),f=Math.max(f,A[0]),w=Math.max(w,A[1])}e[0]=s,e[1]=h,e[2]=y,e[3]=f,e[4]=w,e[5]=S}function t5e(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function af(e){return e[0]>=e[3]?0:e[3]-e[0]}function lf(e){return e[1]>=e[4]?0:e[4]-e[1]}function uf(e){return e[2]>=e[5]?0:e[5]-e[2]}function i5e(e){const t=af(e),i=uf(e),r=lf(e);return Math.sqrt(t*t+i*i+r*r)}function r5e(e,t=[0,0,0]){return t[0]=e[0]+af(e)/2,t[1]=e[1]+lf(e)/2,t[2]=e[2]+uf(e)/2,t}function n5e(e,t=[0,0,0]){return t[0]=af(e),t[1]=lf(e),t[2]=uf(e),t}function s5e(e){return Math.max(af(e),uf(e),lf(e))}function o5e(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function tQ(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function a5e(e,t){return!!oe(t)||tQ(e,t)}function l5e(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function u5e(e,t,i=e){const r=e[0]+af(e)/2,s=e[1]+lf(e)/2,h=e[2]+uf(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=h+(e[2]-h)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=h+(e[5]-h)*t,i}function h5e(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c5e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function p5e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function iQ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function d5e(e){return e?iQ(e,L$):OM(L$)}function f5e(e,t){return t||(t=Ss()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function y5e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function R$(e){return e.length===6}function m5e(e){return af(e)===0&&lf(e)===0&&uf(e)===0}function g5e(e,t,i){if(oe(e)||oe(t))return e===t;if(!R$(e)||!R$(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const L$=[1/0,1/0,1/0,-1/0,-1/0,-1/0],rQ=[0,0,0,0,0,0];OM();function v5e(e,{isPrimitive:t,width:i,depth:r,height:s}){const h=t?10:1;if(i==null&&s==null&&r==null)return[h*e[0],h*e[1],h*e[2]];const y=of(i,r,s);let f;for(let w=0;w<3;w++){const S=y[w];if(S!=null){f=S/e[w];break}}for(let w=0;w<3;w++)y[w]==null&&(y[w]=e[w]*f);return y}const nQ=PM(-.5,-.5,-.5,.5,.5,.5),sQ=PM(-.5,-.5,0,.5,.5,1),oQ=PM(-.5,-.5,0,.5,.5,.5);function b5e(e){switch(e){case"sphere":case"cube":case"diamond":return nQ;case"cylinder":case"cone":case"inverted-cone":return sQ;case"tetrahedron":return oQ;default:return}}const NM=["butt","square","round"],aQ=[...NM,"none"],oR=["miter","bevel","round"];var sx;let uc=sx=class extends ve{constructor(e){super(e),this.color=new rt([0,0,0,1]),this.size=Ba(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:Y(this.color)?this.color.clone():null,size:this.size,pattern:Y(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new sx(e)}};g([x(Lh)],uc.prototype,"color",void 0),g([x(Ha)],uc.prototype,"size",void 0),g([x(nR)],uc.prototype,"pattern",void 0),g([x({type:NM,json:{default:"butt",write:{overridePolicy(){return{enabled:Y(this.pattern)}}}}})],uc.prototype,"patternCap",void 0),uc=sx=g([K("esri.symbols.support.Symbol3DOutline")],uc);var Hv;let fl=Hv=class extends Xa{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:Y(this.edges)?this.edges.clone():null,enabled:this.enabled,material:Y(this.material)?this.material.clone():null,pattern:Y(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:Y(this.outline)?this.outline.clone():null};return new Hv(e)}static fromSimpleFillSymbol(e){var r,s,h,y,f,w;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new kM({style:e.outline.style}):null,i={size:(s=(r=e.outline)==null?void 0:r.width)!=null?s:0,color:((y=(h=e.outline)==null?void 0:h.color)!=null?y:Ty).clone(),pattern:t};return t&&((f=e.outline)==null?void 0:f.cap)&&(i.patternCap=e.outline.cap),new Hv({material:new $y({color:((w=e.color)!=null?w:BX).clone()}),pattern:e.style&&e.style!=="solid"?new rR({style:e.style}):null,outline:i})}};g([Xe({Fill:"fill"},{readOnly:!0})],fl.prototype,"type",void 0),g([x({type:$y,json:{write:!0}})],fl.prototype,"material",void 0),g([x(qX)],fl.prototype,"pattern",void 0),g([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fl.prototype,"castShadows",void 0),g([x({type:uc,json:{write:!0}})],fl.prototype,"outline",void 0),g([x(ZN)],fl.prototype,"edges",void 0),fl=Hv=g([K("esri.symbols.FillSymbol3DLayer")],fl);const R2=fl,lQ=["none","underline","line-through"],uQ=["normal","italic","oblique"],hQ=["normal","lighter","bold","bolder"],aR={type:Number,cast:e=>{const t=Bs(e);return t===0?1:Kn(t,.1,4)},nonNullable:!0},cQ=["left","right","center"],pQ=["baseline","top","middle","bottom"],lR={type:cQ,nonNullable:!0},uR={type:pQ,nonNullable:!0};var ox;let yl=ox=class extends ve{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Dt(e)}clone(){return new ox({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};g([x({type:lQ,json:{default:"none",write:!0}})],yl.prototype,"decoration",void 0),g([x({type:String,json:{write:!0}})],yl.prototype,"family",void 0),g([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],yl.prototype,"size",void 0),g([Mt("size")],yl.prototype,"castSize",null),g([x({type:uQ,json:{default:"normal",write:!0}})],yl.prototype,"style",void 0),g([x({type:hQ,json:{default:"normal",write:!0}})],yl.prototype,"weight",void 0),yl=ox=g([K("esri.symbols.Font")],yl);const L2=yl,dQ=Le.getLogger("esri.core.urlUtils"),hf=Lt.request,F$="esri/config: esriConfig.request.proxyUrl is not set.",hR=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,cR=/^\s*http:/i,fQ=/^\s*https:/i,yQ=/^\s*file:/i,mQ=/:\d+$/,gQ=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,vQ=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),bQ=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Sh{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(vQ);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(bQ),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const vg={},wQ=new Sh(Lt.applicationUrl);let en=wQ;const _Q=xQ();let RM=_Q;const LM=()=>en,w5e=()=>RM;function xQ(){const e=en.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${en.scheme}://${en.host}${en.port!=null?`:${en.port}`:""}`}${t}`}function hr(e){const t={path:null,query:null},i=new Sh(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=pR(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function pR(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let h,y;s<0?(h=decodeURIComponent(r),y=""):(h=decodeURIComponent(r.slice(0,s)),y=decodeURIComponent(r.slice(s+1)));let f=i[h];typeof f=="string"&&(f=i[h]=[f]),Array.isArray(f)?f.push(y):i[h]=y}return i}function j$(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function rm(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",h=t&&t[i];return h?s+encodeURIComponent(h(r)):Array.isArray(r)?r.map(y=>j$(y)?s+encodeURIComponent(JSON.stringify(y)):s+encodeURIComponent(y)).join("&"):j$(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function SQ(e=!1){let t,i=hf.proxyUrl;if(typeof e=="string"){t=AQ(e);const r=F2(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw dQ.warn(F$),new ne("urlutils:proxy-not-set",F$);return t&&ax()&&(i=GM(i)),hr(i)}function _5e(e){const t=F2(e);let i,r;if(t){const s=FM(t.proxyUrl);i=s.path,r=s.query?pR(s.query):null}if(i){const s=hr(e);e=i+"?"+s.path;const h=rm({...r,...s.query});h&&(e=`${e}?${h}`)}return e}const Yf={path:"",query:""};function FM(e){const t=e.indexOf("?");return t!==-1?(Yf.path=e.slice(0,t),Yf.query=e.slice(t+1)):(Yf.path=e,Yf.query=null),Yf}function dR(e){return e=(e=mw(e=RQ(e=FM(e).path),!0)).toLowerCase()}function MQ(e){const t={proxyUrl:e.proxyUrl,urlPrefix:dR(e.urlPrefix)},i=hf.proxyRules,r=t.urlPrefix;let s=i.length;for(let h=0;h<i.length;h++){const y=i[h].urlPrefix;if(r.indexOf(y)===0){if(r.length===y.length)return-1;s=h;break}y.indexOf(r)===0&&(s=h+1)}return i.splice(s,0,t),s}function F2(e){const t=hf.proxyRules,i=dR(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function fR(e,t){return e=D$(e),t=D$(t),mw(e)===mw(t)}function D$(e){const t=(e=Xs(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function yR(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=hf.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function nm(e,t,i=!1){const r=ux(e),s=ux(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function jM(e){if(typeof e=="string"){if(!_s(e))return!0;e=ux(e)}if(nm(e,en))return!0;const t=hf.trustedServers||[];for(let i=0;i<t.length;i++){const r=EQ(t[i]);for(let s=0;s<r.length;s++)if(nm(e,r[s]))return!0}return!1}function EQ(e){return vg[e]||(VM(e)||Wa(e)?vg[e]=[new Sh(gs(e))]:vg[e]=[new Sh(`http://${e}`),new Sh(`https://${e}`)]),vg[e]}function gs(e,t=RM,i){return Wa(e)?i&&i.preserveProtocolRelative?e:en.scheme==="http"&&en.authority===Wo(e).slice(2)?`http:${e}`:`https:${e}`:VM(e)?e:Ep(e[0]==="/"?PQ(t):t,e)}function DM(e,t=RM,i){if(!_s(e))return e;const r=Xs(e),s=r.toLowerCase(),h=Xs(t).toLowerCase().replace(/\/+$/,""),y=i?Xs(i).toLowerCase().replace(/\/+$/,""):null;if(y&&h.indexOf(y)!==0)return e;const f=(A,P,N)=>(N=A.indexOf(P,N))===-1?A.length:N;let w=f(s,"/",s.indexOf("//")+2),S=-1;for(;s.slice(0,w+1)===h.slice(0,w)+"/"&&(S=w+1,w!==s.length);)w=f(s,"/",w+1);if(S===-1||y&&S<y.length)return e;e=r.slice(S);const E=h.slice(S-1).replace(/[^/]+/g,"").length;if(E>0)for(let A=0;A<E;A++)e=`../${e}`;else e=`./${e}`;return e}function Xs(e){return e=jQ(e=FQ(e=LQ(e=gs(e=e.trim()))))}function Ep(...e){const t=e.filter(Y);if(!t||!t.length)return;const i=[];if(_s(t[0])){const s=t[0],h=s.indexOf("//");h!==-1&&(i.push(s.slice(0,h+1)),CQ(t[0])&&(i[0]+="/"),t[0]=s.slice(h+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,h)=>h?s.concat(h.split("/")):s,[]);for(let s=0;s<r.length;s++){const h=r[s];h===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!h&&s===r.length-1||h&&(h!=="."||i.length===0))&&i.push(h)}return i.join("/")}function Wo(e,t=!1){if(j2(e)||Fh(e))return null;let i=e.indexOf("://");if(i===-1&&Wa(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=mw(e,!0)),e}function _s(e){return Wa(e)||VM(e)}function j2(e){return e!=null&&e.slice(0,5)==="blob:"}function Fh(e){return e.slice(0,5)==="data:"}function x5e(e){const t=zM(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function S5e(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const TQ=/^data:(.*?)(;base64)?,(.*)$/;function zM(e){const t=e.match(TQ);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function mR(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function M5e(e,t){$Q(e,t)||IQ(e,t)}function $Q(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function IQ(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function Wa(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function VM(e){return hR.test(e)}function AQ(e){return fQ.test(e)||en.scheme==="https"&&Wa(e)}function kQ(e){return cR.test(e)||en.scheme==="http"&&Wa(e)}function CQ(e){return yQ.test(e)}function GM(e){return Wa(e)?`https:${e}`:e.replace(cR,"https:")}function OQ(){return en.scheme==="http"}function ax(){return en.scheme==="https"}function mw(e,t=!1){return Wa(e)?e.slice(2):(e=e.replace(hR,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function PQ(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function NQ(e){let t=0;if(_s(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function E5e(e,t){if(!e)return"";const i=hr(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function RQ(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function gR(e){return e.replace(/\/+$/,"")}function LQ(e){if(/^https?:\/\//i.test(e)){const t=FM(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function FQ(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function jQ(e){const t=hf.httpsDomains;if(!kQ(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),mQ.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return OQ()&&r===en.authority&&!gQ.test(e)||(ax()&&r===en.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||ax()&&!F2(e))&&(e=GM(e)),e}function lx(e,t,i){if(!(t&&i&&e&&_s(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),h=e.indexOf(":",r+2),y=Math.min(s<0?e.length:s,h<0?e.length:h);return e.slice(r+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(y)}`}function ux(e){return typeof e=="string"?new Sh(gs(e)):(e.scheme||(e.scheme=en.scheme),e)}function T5e(e){return zQ.test(e)}function vR(e,t){const i=hr(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function UM(e,t,i){const r=hr(e),s=r.query||{};return s[t]=String(i),`${r.path}?${rm(s)}`}function v_(e,t){const i=hr(e),r=i.query||{};for(const h in t)r[h]=t[h];const s=rm(r);return s?`${i.path}?${s}`:i.path}function $5e(e){if(oe(e))return null;const t=e.match(DQ);return t?t[1]:null}const DQ=/.*?\.([^\/]*)$/,zQ=/(^data:image\/svg|\.svg$)/i;function cf(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=gs(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=DM(e,t.portalItem.itemUrl);GQ.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return hx(e,t&&t.portal)}function Nm(e,t,i=sm.YES){if(!e)return e;!_s(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=gs(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const h=hx(s,t.portal);r=DM(hx(r,t.portal),h,h),r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=bR(r,t&&t.portal),_s(r)&&(r=Xs(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!_s(r)&&!Fh(r)&&i===sm.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r)}),r}function qM(e,t,i){return cf(e,i)}function Tp(e,t,i,r){const s=Nm(e,r);s!==void 0&&(t[i]=s)}const VQ=/\/items\/([^\/]+)\/resources\//,GQ=/^\.\/resources\//;function UQ(e){const t=Y(e)?e.match(VQ):null;return Y(t)?t[1]:null}function bR(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?lx(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function hx(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=LM();return nm(r,`${r.scheme}://${i}`)?lx(e,t.portalHostname,i):lx(e,i,t.portalHostname)}var sm;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(sm||(sm={}));const I5e=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:cf,toJSON:Nm,read:qM,write:Tp,itemIdFromResourceUrl:UQ,ensureMainOnlineDomain:bR,get MarkKeep(){return sm}},Symbol.toStringTag,{value:"Module"}));var cx;const qQ=Jr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let hc=cx=class extends ve{constructor(e){super(e)}readHref(e,t,i){return e?cf(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Fh(e)?t.dataURI=e:(t.href=Nm(e,r),_s(t.href)&&(t.href=Xs(t.href))))}clone(){return new cx({href:this.href,primitive:this.primitive})}};g([x({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],hc.prototype,"href",void 0),g([je("href")],hc.prototype,"readHref",null),g([De("href",{href:{type:String},dataURI:{type:String}})],hc.prototype,"writeHref",null),g([Xe(qQ)],hc.prototype,"primitive",void 0),hc=cx=g([K("esri.symbols.support.IconSymbol3DLayerResource")],hc);const A5e="circle";var px;let s0=px=class extends qe{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new px({x:this.x,y:this.y})}};g([x({type:Number})],s0.prototype,"x",void 0),g([x({type:Number})],s0.prototype,"y",void 0),s0=px=g([K("esri.symbols.support.Symbol3DAnchorPosition2D")],s0);var dx;let N1=dx=class extends ve{constructor(e){super(e),this.color=new rt([0,0,0,1]),this.size=Ba(1)}clone(){const e={color:Y(this.color)?this.color.clone():null,size:this.size};return new dx(e)}};g([x(Lh)],N1.prototype,"color",void 0),g([x(Ha)],N1.prototype,"size",void 0),N1=dx=g([K("esri.symbols.support.Symbol3DIconOutline")],N1);var dd;const BQ=Le.getLogger("esri.symbols.IconSymbol3DLayer");let pa=dd=class extends Xa{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new dd({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:Y(this.material)?this.material.clone():null,outline:Y(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Ty,i=z$(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Ty).clone()}:null;return new dd({size:e.size,resource:{primitive:WQ(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||HX(e.color)?Ty:e.color,i=z$(e);return new dd({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new dd({resource:{href:mR({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function z$(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=V$(e.xoffset),s=V$(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function V$(e){return isFinite(e)?e:0}g([x({type:ws,json:{write:!0}})],pa.prototype,"material",void 0),g([x({type:hc,json:{write:!0}})],pa.prototype,"resource",void 0),g([Xe({Icon:"icon"},{readOnly:!0})],pa.prototype,"type",void 0),g([x(Ha)],pa.prototype,"size",void 0),g([Xe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),x({json:{default:"center"}})],pa.prototype,"anchor",void 0),g([x({type:s0,json:{type:[Number],read:{reader:e=>new s0({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],pa.prototype,"anchorPosition",void 0),g([x({type:N1,json:{write:!0}})],pa.prototype,"outline",void 0),pa=dd=g([K("esri.symbols.IconSymbol3DLayer")],pa);const HQ={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function WQ(e){return HQ[e]||(BQ.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Xc=pa;function $p(e,t,i=Je){return t||(t=new i),t===e||(t.removeAll(),JQ(e)?t.addMany(e):e&&t.add(e)),t}function wR(e){return e}function JQ(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const _R="20220708",xR="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",BM="4.24",KQ={async request(e,t){var f;const{default:i}=await ge(()=>Promise.resolve().then(()=>pee),void 0),r=e.options,s=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":["blob","json","text"].includes(s)&&((f=yR(e.url))==null?void 0:f.after)?s:"array-buffer";const h=await i(e.url,r),y={data:h.data,ssl:h.ssl};switch(h.requestOptions.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let Fi;function k5e(e){Fi=e}function C5e(e){const t=Fi&&Fi.findCredential(e);return t&&t.token?UM(e,"token",t.token):e}we("host-webworker")||(we("edge")||we("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const YQ=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function SR(e){const t=Wo(e,!0);return t&&t.endsWith(".arcgis.com")&&!YQ.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function ZQ(e,t,i=!1,r){return new Promise((s,h)=>{if(eo(r))return void h(G$());let y=()=>{S(),h(new Error(`Unable to load ${t}`))},f=()=>{const E=e;S(),s(E)},w=()=>{if(!e)return;const E=e;S(),E.src="",h(G$())};const S=()=>{we("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",f)),y=null,f=null,e=null,Y(r)&&r.removeEventListener("abort",w),w=null,i&&URL.revokeObjectURL(t)};Y(r)&&r.addEventListener("abort",w),we("esri-image-decode")?e.decode().then(f,y):(e.addEventListener("error",y),e.addEventListener("load",f))})}function G$(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function XQ(e){Lt.request.crossOriginNoCorsDomains||(Lt.request.crossOriginNoCorsDomains={});const t=Lt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Wo(i)]=0:(t[Wo("http://"+i)]=0,t[Wo("https://"+i)]=0)}function QQ(e){const t=Lt.request.crossOriginNoCorsDomains;if(t){let i=Wo(e);if(i)return i=i.toLowerCase(),!nm(i,LM())&&t[i]<Date.now()-36e5}return!1}async function eee(e){var r;const t=Lt.request.crossOriginNoCorsDomains;t&&(t[Wo(e).toLowerCase()]=Date.now());const i=hr(e);e=i.path,((r=i.query)==null?void 0:r.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function ni(e,t){var S;const i=Fh(e),r=j2(e);r||i||(e=Xs(e));const s={url:e,requestOptions:{...t}};let h=yR(e);if(h){const E=await lee(h,s);if(E!=null)return{data:E,getHeader:HM,requestOptions:s.requestOptions,url:s.url};h.after||h.error||(h=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(we("host-webworker")||we("host-node"))throw Go("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw Go("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw Go("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Go("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await see(),gw)return gw.execute(e,t);const y=new AbortController;to(t,()=>y.abort());const f={controller:y,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:h,params:s,redoRequest:!1,useIdentity:Lo.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},w=await hee(f);return(S=h==null?void 0:h.after)==null||S.call(h,w),w}let gw;const Lo=Lt.request,MR="FormData"in globalThis,tee=[499,498,403,401],iee=["COM_0056","COM_0057","SB_0008"],ree=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],HM=()=>null,fx=Symbol();function nee(e){const t=Wo(e);t&&!ni._corsServers.includes(t)&&ni._corsServers.push(t)}function U$(e){const t=Wo(e);return!t||t.endsWith(".arcgis.com")||ni._corsServers.includes(t)||jM(t)}function Go(e,t,i,r){let s="Error";const h={url:i.url,requestOptions:i.requestOptions,getHeader:HM,ssl:!1};if(t instanceof ne)return t.details?(t.details=de(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=h,t;if(t){const y=r&&(S=>r.headers.get(S)),f=r&&r.status,w=t.message;w&&(s=w),y&&(h.getHeader=y),h.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||f||0,h.subCode=t.subcode,h.messageCode=t.messageCode,typeof t.details=="string"?h.messages=[t.details]:h.messages=t.details,h.raw=fx in t?t[fx]:t}return Br(t)?bi():new ne(e,s,h)}async function see(){we("host-webworker")?gw||(gw=await ge(()=>import("./request.c5e83535.js"),[])):ni._abortableFetch||(ni._abortableFetch=globalThis.fetch.bind(globalThis))}async function yx(){Fi||await ge(()=>import("./IdentityManager.9e277d24.js"),[])}async function oee(e){var f;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let h=null,y=null;if(MR&&"HTMLFormElement"in globalThis&&(s instanceof FormData?h=s:s instanceof HTMLFormElement&&(h=new FormData(s))),typeof s=="string"&&(y=s),e.fetchOptions={cache:i.cacheBust&&!ni._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Lo.priority,redirect:"follow",signal:r},(h||y)&&(e.fetchOptions.body=h||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((f=i.query)==null?void 0:f.token)||(h==null?void 0:h.get("token"))),!e.hasToken&&Lt.apiKey&&SR(t)&&(i.query||(i.query={}),i.query.token=Lt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!ER(t)&&!eo(r)){let w;i.authMode==="immediate"?(await yx(),w=await Fi.getCredential(t,{signal:r}),e.credential=w):i.authMode==="no-prompt"?(await yx(),w=await Fi.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=w):Fi&&(w=Fi.findCredential(t)),w&&(e.credentialToken=w.token,e.useSSL=!!w.ssl)}}function ER(e){return ree.some(t=>t.test(e))}async function aee(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions,s=j2(t)||Fh(t),h=i.responseType||"json",y=s?0:i.timeout!=null?i.timeout:Lo.timeout;let f=!1;if(!s){e.useSSL&&(t=GM(t)),i.cacheBust&&r.cache==="default"&&(t=UM(t,"request.preventCache",Date.now()));let P={...i.query};e.credentialToken&&(P.token=e.credentialToken);let N=rm(P);we("esri-url-encodes-apostrophe")&&(N=N.replace(/'/g,"%27"));const F=t.length+1+N.length;let V;f=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||F>Lo.maxUrlLength;const U=i.useProxy||!!F2(t);if(U){const X=SQ(t);V=X.path,!f&&V.length+1+F>Lo.maxUrlLength&&(f=!0),X.query&&(P={...X.query,...P})}if(r.method==="HEAD"&&(f||U)){if(f)throw F>Lo.maxUrlLength?Go("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Go("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(U)throw Go("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(f?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=v_(t,P):(r.body=rm(P),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=v_(t,P),U&&(e.useProxy=!0,t=`${V}?${t}`),P.token&&MR&&r.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&r.body.set("token",P.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!nm(t,LM())){if(jM(t))e.withCredentials=!0;else if(Fi){const X=Fi.findServerInfo(t);X&&X.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",QQ(t)&&await eee(f?v_(t,P):t))}let w,S,E=0,A=!1;y>0&&(E=setTimeout(()=>{A=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")S=r,S.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||f||uee(i.headers)||!s&&!e.useProxy&&Lo.proxyUrl&&!U$(t)){if(w=await ni._abortableFetch(t,r),e.useProxy||nee(t),i.responseType==="native")S=w;else if(r.method!=="HEAD")if(w.ok){switch(h){case"array-buffer":S=await w.arrayBuffer();break;case"blob":case"image":S=await w.blob();break;default:S=await w.text()}if(E&&(clearTimeout(E),E=0),h==="json"||h==="xml"||h==="document")if(S)switch(h){case"json":S=JSON.parse(S);break;case"xml":S=q$(S,"application/xml");break;case"document":S=q$(S,"text/html")}else S=null;if(S){if(h==="array-buffer"||h==="blob"){const P=w.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(P)&&S[h==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(S).json();N.error&&(S=N)}catch{}}h==="image"&&S instanceof Blob&&(S=await B$(URL.createObjectURL(S),e,!0))}}else S=await w.text()}else S=await B$(t,e)}catch(P){if(P.name==="AbortError")throw A?new Error("Timeout exceeded"):bi("Request canceled");if(!(!w&&P instanceof TypeError&&Lo.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||U$(t))throw P;e.redoRequest=!0,MQ({proxyUrl:Lo.proxyUrl,urlPrefix:Wo(t)})}finally{E&&clearTimeout(E)}return[w,S]}async function lee(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=Go("request:interceptor",s,t)}if((r instanceof Error||r instanceof ne)&&(i=Go("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function uee(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function q$(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function hee(e){var h;let t,i;await oee(e);try{do[t,i]=await aee(e);while(!await cee(e,t,i))}catch(y){const f=Go("request:server",y,e.params,t);throw f.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(f),f}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((h=i.user)==null?void 0:h.username)&&!jM(r)){const y=Wo(r,!0);y&&Lo.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&XQ(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&Fi){const y=Fi.findServerInfo(s.server);let f=y&&y.owningSystemUrl;if(f){f=f.replace(/\/?$/,"/sharing");const w=Fi.findCredential(f,s.userId);w&&Fi._getIdenticalSvcIdx(f,w)===-1&&w.resources.unshift(f)}}return{data:i,getHeader:t?y=>t.headers.get(y):HM,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function cee(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,h,y,f;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[fx]=i,s;i!=null&&i.error&&(s=i.error),s&&(h=Number(s.code),y=s.hasOwnProperty("subcode")?Number(s.subcode):null,f=s.messageCode,f=f&&f.toUpperCase());const w=r.authMode;if(h===403&&(y===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(w!=="no-prompt"||h===498)&&tee.includes(h)&&!ER(e.params.url)&&(h!==403||!iee.includes(f)&&(y==null||y===2&&e.credentialToken))){await yx();try{const S=await Fi.getCredential(e.params.url,{error:Go("request:server",s,e.params),prompt:w!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=S,e.credentialToken=S.token,e.useSSL=e.useSSL||S.ssl,!1}catch(S){if(w==="no-prompt")return e.credential=null,e.credentialToken=null,!1;s=S}}if(s)throw s;return!0}function B$(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Lo.priority,s.src=e,ZQ(s,e,i,r)}ni._abortableFetch=null,ni._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const pee=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"}));var sh;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(sh||(sh={}));class dee{constructor(t){this.instance=t,this._resolver=Jl(),this._status=sh.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=sh.RESOLVED,this._cleanUp()},()=>{this._status=sh.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===sh.RESOLVED}isRejected(){return this._status===sh.REJECTED}isFulfilled(){return this._status!==sh.PENDING}abort(){this._resolver.reject(bi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Jl(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||Br(s)||this._resolver.reject(s)}),t.resolve()}}const pf=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new dee(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,h)=>{this._promiseProps.when(s,h)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=g([K("esri.core.Promise")],t),t};let vw=class extends pf(qe){};vw=g([K("esri.core.Promise")],vw);const fee="not-loaded",yee="loading",mee="failed",H$="loaded",TR=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=h=>{const y=new Promise((f,w)=>{const S=iM(h,w);this.destroyed&&w(new ne("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(f,w).finally(()=>{S&&S.remove()})});if(this.loadStatus===fee){this._set("loadStatus",yee);const f=this._loadController=new AbortController;s({signal:f.signal}),to(f.signal,()=>{this._promiseProps.abort()})}return r(),y}})),this.when(()=>{this._set("loadStatus",H$),this._loadController=null},r=>{this._set("loadStatus",mee),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===H$}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ne("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return g([x({readOnly:!0})],t.prototype,"loaded",null),g([x({readOnly:!0})],t.prototype,"loadError",void 0),g([x({clonable:!1})],t.prototype,"loadStatus",void 0),g([x({type:[_n],readOnly:!0})],t.prototype,"loadWarnings",null),t=g([K("esri.core.Loadable")],t),t};let R1=class extends TR(vw){};R1=g([K("esri.core.Loadable")],R1),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=TR,e.isLoadable=t}(R1||(R1={}));const Sn=R1;var mx;const gee=new lt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Rs=mx=class extends qe{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new mx({categories:this.categories?de(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,r;if(this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y)),this.extent){const y=S2(this.extent,ot.WGS84);Y(y)&&(r=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const h={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(h.sortField=this.sortField.split(",").map(y=>gee.toJSON(y.trim())).join(","),h.sortOrder=this.sortOrder),{query:{...t,...h}}}};g([x()],Rs.prototype,"categories",void 0),g([x()],Rs.prototype,"disableExtraQuery",void 0),g([x({type:Ut})],Rs.prototype,"extent",void 0),g([x()],Rs.prototype,"filter",void 0),g([x()],Rs.prototype,"num",void 0),g([x()],Rs.prototype,"query",void 0),g([x()],Rs.prototype,"sortField",void 0),g([x()],Rs.prototype,"sortOrder",null),g([x()],Rs.prototype,"start",void 0),Rs=mx=g([K("esri.portal.PortalQueryParams")],Rs);const Dl=Rs;let cc=class extends qe{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};g([x()],cc.prototype,"nextQueryParams",void 0),g([x()],cc.prototype,"queryParams",void 0),g([x()],cc.prototype,"results",void 0),g([x()],cc.prototype,"total",void 0),cc=g([K("esri.portal.PortalQueryResult")],cc);const vee=cc;let ml=class extends ve{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ne("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};g([x({type:Date})],ml.prototype,"created",void 0),g([x()],ml.prototype,"id",void 0),g([x()],ml.prototype,"portal",void 0),g([x()],ml.prototype,"title",void 0),g([x({readOnly:!0})],ml.prototype,"url",null),g([x()],ml.prototype,"username",void 0),ml=g([K("esri.portal.PortalFolder")],ml);const bee=ml;let dr=class extends ve{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=ji(Dl,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new Dl,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Dl,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const r=i.contentCategorySetsGroupQuery;if(r){const s=new Dl;return s.disableExtraQuery=!0,s.num=1,s.query=r,this.portal.queryGroups(s,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const r=i.results[0],s=new Dl;return s.num=1,s.query=`typekeywords:"${e}"`,r.queryItems(s,t)}throw new ne("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(r=>{const s=r&&r.categorySchema;return s&&s.length?s:[]}):[])}};g([x()],dr.prototype,"access",void 0),g([x({type:Date})],dr.prototype,"created",void 0),g([x()],dr.prototype,"description",void 0),g([x()],dr.prototype,"id",void 0),g([x()],dr.prototype,"isInvitationOnly",void 0),g([x({type:Date})],dr.prototype,"modified",void 0),g([x()],dr.prototype,"owner",void 0),g([x()],dr.prototype,"portal",void 0),g([x()],dr.prototype,"snippet",void 0),g([x()],dr.prototype,"sortField",void 0),g([x()],dr.prototype,"sortOrder",void 0),g([x()],dr.prototype,"tags",void 0),g([x()],dr.prototype,"thumbnail",void 0),g([x({readOnly:!0})],dr.prototype,"thumbnailUrl",null),g([x()],dr.prototype,"title",void 0),g([x({readOnly:!0})],dr.prototype,"url",null),dr=g([K("esri.portal.PortalGroup")],dr);const gx=dr,wee=Object.freeze(Object.defineProperty({__proto__:null,default:gx},Symbol.toStringTag,{value:"Module"}));var vx;let mi=vx=class extends ve{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let h=this.userContentUrl;return r&&(h+="/"+(typeof r=="string"?r:r.id)),this.portal._request(h+"/addItem",s).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal._request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=bee.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=gx.fromJSON(i);return r.portal=this.portal,r}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),ge(()=>Promise.resolve().then(()=>KR),void 0).then(({default:r})=>{t=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:s})}).then(r=>{let s;return r&&r.items?(s=r.items.map(h=>{const y=t.fromJSON(h);return y.portal=this.portal,y}),Promise.all(s.map(h=>h.load())).catch(h=>h).then(()=>({items:s,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new gx({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ne("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ne("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new vx;return t.sourceJSON=e,t.read(e),t}};g([x()],mi.prototype,"access",void 0),g([x({type:Date})],mi.prototype,"created",void 0),g([x()],mi.prototype,"culture",void 0),g([x()],mi.prototype,"description",void 0),g([x()],mi.prototype,"email",void 0),g([x()],mi.prototype,"favGroupId",void 0),g([x()],mi.prototype,"fullName",void 0),g([x({type:Date})],mi.prototype,"modified",void 0),g([x()],mi.prototype,"orgId",void 0),g([x()],mi.prototype,"portal",void 0),g([x()],mi.prototype,"preferredView",void 0),g([x()],mi.prototype,"privileges",void 0),g([x()],mi.prototype,"region",void 0),g([x()],mi.prototype,"role",void 0),g([x()],mi.prototype,"roleId",void 0),g([x()],mi.prototype,"sourceJSON",void 0),g([x()],mi.prototype,"thumbnail",void 0),g([x({readOnly:!0})],mi.prototype,"thumbnailUrl",null),g([x()],mi.prototype,"units",void 0),g([x({readOnly:!0})],mi.prototype,"userContentUrl",null),g([x({readOnly:!0})],mi.prototype,"url",null),g([x()],mi.prototype,"username",void 0),g([x()],mi.prototype,"userType",void 0),mi=vx=g([K("esri.portal.PortalUser")],mi);const WM=mi,_ee=Object.freeze(Object.defineProperty({__proto__:null,default:WM},Symbol.toStringTag,{value:"Module"}));var is;let b_;const W$={PortalGroup:()=>ge(()=>Promise.resolve().then(()=>wee),void 0),PortalItem:()=>ge(()=>Promise.resolve().then(()=>KR),void 0),PortalUser:()=>ge(()=>Promise.resolve().then(()=>_ee),void 0)};let Ve=is=class extends Q0(Sn){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Lt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Lt.request.trustedServers.includes(t)||Lt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=WM.fromJSON(e),t.portal=this),t}load(e){const t=ge(()=>Promise.resolve().then(()=>pte),void 0).then(({default:i})=>{di(e),b_=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(Fi){const r=Fi;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==is.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ge(()=>import("./ElevationLayer.632df4f9.js"),["assets/ElevationLayer.632df4f9.js","assets/ArcGISCachedService.257d6e30.js","assets/TilemapCache.96052efc.js","assets/WorkerHandle.d222cfbe.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new Dl;return i.query=e||(Lt.apiKey&&SR(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(h=>h.type==="Web Map").map(h=>new b_({portalItem:h})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):eo(e)?Promise.reject(bi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Dl;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return eo(e)?Promise.reject(bi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||bs();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||bs();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return is._default&&!is._default.destroyed||(is._default=new is),is._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new ne("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new is({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ne("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new ne("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:bs().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(r,s)}_queryPortal(e,t,i,r){const s=ji(Dl,t),h=y=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(f=>{const w=s.clone();return w.start=f.nextStart,new vee({nextQueryParams:w,queryParams:s,total:f.total,results:is._resultsToTypedArray(y,{portal:this},f,r)})}).then(f=>Promise.all(f.results.map(w=>typeof w.when=="function"?w.when():f)).then(()=>f,w=>(km(w),f)));return i&&W$[i]?W$[i]().then(({default:y})=>(di(r),h(y))):h()}_signIn(){if(this.authMode===is.AUTH_MODE_ANONYMOUS)return Promise.reject(new ne("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Fi?Fi.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(r=>{const s=is._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(h=>typeof h.when=="function"?h.when():r)).then(()=>s,()=>s)})}_readBasemap(e){if(e){const t=b_.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===is.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:h=!1,method:y="auto",responseType:f="json",signal:w}=t,S={authMode:r,body:s,cacheBust:h,method:y,query:i,responseType:f,timeout:0,signal:w};return ni(this._normalizeSSL(e),S).then(E=>E.data)}static _resultsToTypedArray(e,t,i,r){let s;if(i){const h=Y(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(y=>{const f=Object.assign(e?e.fromJSON(y):y,t);return typeof f.load=="function"&&f.load(h),f}))}else s=[];return s}};Ve.AUTH_MODE_ANONYMOUS="anonymous",Ve.AUTH_MODE_AUTO="auto",Ve.AUTH_MODE_IMMEDIATE="immediate",g([x()],Ve.prototype,"access",void 0),g([x()],Ve.prototype,"allSSL",void 0),g([x()],Ve.prototype,"authMode",void 0),g([x()],Ve.prototype,"authorizedCrossOriginDomains",void 0),g([je("authorizedCrossOriginDomains")],Ve.prototype,"readAuthorizedCrossOriginDomains",null),g([x()],Ve.prototype,"basemapGalleryGroupQuery",void 0),g([x()],Ve.prototype,"bingKey",void 0),g([x()],Ve.prototype,"canListApps",void 0),g([x()],Ve.prototype,"canListData",void 0),g([x()],Ve.prototype,"canListPreProvisionedItems",void 0),g([x()],Ve.prototype,"canProvisionDirectPurchase",void 0),g([x()],Ve.prototype,"canSearchPublic",void 0),g([x()],Ve.prototype,"canShareBingPublic",void 0),g([x()],Ve.prototype,"canSharePublic",void 0),g([x()],Ve.prototype,"canSignInArcGIS",void 0),g([x()],Ve.prototype,"canSignInIDP",void 0),g([x()],Ve.prototype,"colorSetsGroupQuery",void 0),g([x()],Ve.prototype,"commentsEnabled",void 0),g([x({type:Date})],Ve.prototype,"created",void 0),g([x()],Ve.prototype,"credential",void 0),g([x()],Ve.prototype,"culture",void 0),g([x()],Ve.prototype,"currentVersion",void 0),g([x()],Ve.prototype,"customBaseUrl",void 0),g([x()],Ve.prototype,"defaultBasemap",void 0),g([je("defaultBasemap")],Ve.prototype,"readDefaultBasemap",null),g([x()],Ve.prototype,"defaultDevBasemap",void 0),g([je("defaultDevBasemap")],Ve.prototype,"readDefaultDevBasemap",null),g([x({type:Ut})],Ve.prototype,"defaultExtent",void 0),g([x()],Ve.prototype,"defaultVectorBasemap",void 0),g([je("defaultVectorBasemap")],Ve.prototype,"readDefaultVectorBasemap",null),g([x()],Ve.prototype,"description",void 0),g([x()],Ve.prototype,"devBasemapGalleryGroupQuery",void 0),g([x()],Ve.prototype,"eueiEnabled",void 0),g([x({readOnly:!0})],Ve.prototype,"extraQuery",null),g([x()],Ve.prototype,"featuredGroups",void 0),g([x()],Ve.prototype,"featuredItemsGroupQuery",void 0),g([x()],Ve.prototype,"galleryTemplatesGroupQuery",void 0),g([x()],Ve.prototype,"livingAtlasGroupQuery",void 0),g([x()],Ve.prototype,"hasCategorySchema",void 0),g([x()],Ve.prototype,"helpBase",void 0),g([x()],Ve.prototype,"helperServices",void 0),g([x()],Ve.prototype,"helpMap",void 0),g([x()],Ve.prototype,"homePageFeaturedContent",void 0),g([x()],Ve.prototype,"homePageFeaturedContentCount",void 0),g([x()],Ve.prototype,"httpPort",void 0),g([x()],Ve.prototype,"httpsPort",void 0),g([x()],Ve.prototype,"id",void 0),g([x()],Ve.prototype,"ipCntryCode",void 0),g([x({readOnly:!0})],Ve.prototype,"isOrganization",null),g([x()],Ve.prototype,"isPortal",void 0),g([x()],Ve.prototype,"isReadOnly",void 0),g([x()],Ve.prototype,"layerTemplatesGroupQuery",void 0),g([x()],Ve.prototype,"maxTokenExpirationMinutes",void 0),g([x({type:Date})],Ve.prototype,"modified",void 0),g([x()],Ve.prototype,"name",void 0),g([x()],Ve.prototype,"portalHostname",void 0),g([x()],Ve.prototype,"portalMode",void 0),g([x()],Ve.prototype,"portalProperties",void 0),g([x()],Ve.prototype,"region",void 0),g([x({readOnly:!0})],Ve.prototype,"restUrl",null),g([x()],Ve.prototype,"rotatorPanels",void 0),g([x()],Ve.prototype,"showHomePageDescription",void 0),g([x()],Ve.prototype,"sourceJSON",void 0),g([x()],Ve.prototype,"staticImagesUrl",void 0),g([x({json:{name:"2DStylesGroupQuery"}})],Ve.prototype,"stylesGroupQuery2d",void 0),g([x({json:{name:"stylesGroupQuery"}})],Ve.prototype,"stylesGroupQuery3d",void 0),g([x()],Ve.prototype,"supportsHostedServices",void 0),g([x()],Ve.prototype,"symbolSetsGroupQuery",void 0),g([x()],Ve.prototype,"templatesGroupQuery",void 0),g([x()],Ve.prototype,"thumbnail",void 0),g([x({readOnly:!0})],Ve.prototype,"thumbnailUrl",null),g([x()],Ve.prototype,"units",void 0),g([x()],Ve.prototype,"url",void 0),g([x()],Ve.prototype,"urlKey",void 0),g([je("urlKey")],Ve.prototype,"readUrlKey",null),g([x()],Ve.prototype,"user",void 0),g([je("user")],Ve.prototype,"readUser",null),g([x()],Ve.prototype,"useStandardizedQuery",void 0),g([x()],Ve.prototype,"useVectorBasemaps",void 0),g([x()],Ve.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ve=is=g([K("esri.portal.Portal")],Ve);const ur=Ve;Le.getLogger("esri.core.Clonable");const Wi=e=>{let t=class extends e{clone(){var w;const i=FH(nn(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,h={},y=new Map;for(const S in r){const E=r[S],A=s==null?void 0:s.originOf(S),P=E.clonable;if(E.readOnly||P===!1||A!==It.USER&&A!==It.DEFAULTS&&A!==It.WEB_MAP&&A!==It.WEB_SCENE)continue;const N=this[S];let F=null;F=typeof P=="function"?P(N):P==="reference"?N:Z9(N),N!=null&&F==null||(A===It.DEFAULTS?y.set(S,F):h[S]=F)}const f=new(Object.getPrototypeOf(this)).constructor(h);if(y.size){const S=(w=nn(f))==null?void 0:w.store;if(S)for(const[E,A]of y)S.set(E,A,It.DEFAULTS)}return f}};return t=g([K("esri.core.Clonable")],t),t};let J$=class extends Wi(qe){};J$=g([K("esri.core.Clonable")],J$);let pc=class extends Wi(ve){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return Y(e)&&e.placement===this.placement&&e.style===this.style&&(oe(this.color)&&oe(e.color)||Y(this.color)&&Y(e.color)&&this.color.toJSON()===e.color.toJSON())}};g([x({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],pc.prototype,"type",void 0),g([x({type:DX,json:{default:"begin-end",write:!0}})],pc.prototype,"placement",void 0),g([x({type:QN,json:{default:"arrow",write:!0}})],pc.prototype,"style",void 0),g([x({type:rt,json:{type:[li],default:null,write:!0}})],pc.prototype,"color",void 0),pc=g([K("esri.symbols.LineStyleMarker3D")],pc);const bx=pc;var Wv;let da=Wv=class extends Xa{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ba(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:Y(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:Y(this.pattern)?this.pattern.clone():null,marker:Y(this.marker)?this.marker.clone():null};return new Wv(e)}static fromSimpleLineSymbol(e){var i,r,s;const t={enabled:!0,size:(i=e.width)!=null?i:Ba(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new kM({style:e.style}):null,material:new ws({color:(e.color||Ty).clone()}),marker:e.marker?new bx({placement:e.marker.placement,style:e.marker.style,color:(s=(r=e.marker.color)==null?void 0:r.clone())!=null?s:null}):null};return new Wv(t)}};g([x({type:ws,json:{write:!0}})],da.prototype,"material",void 0),g([Xe({Line:"line"},{readOnly:!0})],da.prototype,"type",void 0),g([x({type:oR,json:{write:!0,default:"miter"}})],da.prototype,"join",void 0),g([x({type:NM,json:{write:!0,default:"butt"}})],da.prototype,"cap",void 0),g([x(Ha)],da.prototype,"size",void 0),g([x(nR)],da.prototype,"pattern",void 0),g([x({types:{key:"type",base:bx,typeMap:{style:bx}},json:{write:!0}})],da.prototype,"marker",void 0),da=Wv=g([K("esri.symbols.LineSymbol3DLayer")],da);const Rm=da;var wx;const xee=Jr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let L1=wx=class extends ve{clone(){return new wx({href:this.href,primitive:this.primitive})}};g([x({type:String,json:{read:qM,write:Tp}})],L1.prototype,"href",void 0),g([Xe(xee)],L1.prototype,"primitive",void 0),L1=wx=g([K("esri.symbols.support.ObjectSymbol3DLayerResource")],L1);const O5e="sphere";var _x;let Gc=_x=class extends qe{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new _x({x:this.x,y:this.y,z:this.z})}};g([x({type:Number})],Gc.prototype,"x",void 0),g([x({type:Number})],Gc.prototype,"y",void 0),g([x({type:Number})],Gc.prototype,"z",void 0),Gc=_x=g([K("esri.symbols.support.Symbol3DAnchorPosition3D")],Gc);var xx;let Kr=xx=class extends Xa{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new xx({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};g([x({type:ws,json:{write:!0}})],Kr.prototype,"material",void 0),g([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Kr.prototype,"castShadows",void 0),g([x({type:L1,json:{write:!0}})],Kr.prototype,"resource",void 0),g([Xe({Object:"object"},{readOnly:!0})],Kr.prototype,"type",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"width",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"height",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"depth",void 0),g([Xe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),x({json:{default:"origin"}})],Kr.prototype,"anchor",void 0),g([x({type:Gc,json:{type:[Number],read:{reader:e=>new Gc({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Kr.prototype,"anchorPosition",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"heading",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"tilt",void 0),g([x({type:Number,json:{write:!0}})],Kr.prototype,"roll",void 0),g([x({readOnly:!0})],Kr.prototype,"isPrimitive",null),Kr=xx=g([K("esri.symbols.ObjectSymbol3DLayer")],Kr);const JM=Kr;var Sx;let hn=Sx=class extends Xa{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new Sx({enabled:this.enabled,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};g([x({type:ws,json:{write:!0}})],hn.prototype,"material",void 0),g([x({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hn.prototype,"castShadows",void 0),g([Xe({Path:"path"},{readOnly:!0})],hn.prototype,"type",void 0),g([x({type:["circle","quad"],json:{write:!0,default:"circle"}})],hn.prototype,"profile",void 0),g([x({type:oR,json:{write:!0,default:"miter"}})],hn.prototype,"join",void 0),g([x({type:aQ,json:{write:!0,default:"butt"}})],hn.prototype,"cap",void 0),g([x({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],hn.prototype,"width",void 0),g([je("width",["width","size","height"])],hn.prototype,"readWidth",null),g([x({type:Number,json:{write:!0}})],hn.prototype,"height",void 0),g([je("height",["height","size","width"])],hn.prototype,"readHeight",null),g([x({type:["center","bottom","top"],json:{write:!0,default:"center"}})],hn.prototype,"anchor",void 0),g([x({type:["heading","all"],json:{write:!0,default:"all"}})],hn.prototype,"profileRotation",void 0),hn=Sx=g([K("esri.symbols.PathSymbol3DLayer")],hn);const KM=hn;var Mx;let o0=Mx=class extends ve{constructor(){super(...arguments),this.color=new rt([0,0,0,1]),this.size=0}clone(){const e={color:de(this.color),size:this.size};return new Mx(e)}};g([x(Lh)],o0.prototype,"color",void 0),g([x(Ha)],o0.prototype,"size",void 0),o0=Mx=g([K("esri.symbols.support.Symbol3DHalo")],o0);let Iy=class extends Wi(ve){constructor(e){super(e),this.color=null}};g([x(Lh)],Iy.prototype,"color",void 0),Iy=g([K("esri.symbols.support.Symbol3DTextBackground")],Iy);var Jv;let kn=Jv=class extends Xa{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){Y(e)&&Y(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return Y(this._userSize)?this._userSize:Y(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,Y(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Jv({enabled:this.enabled,font:this.font&&de(this.font),halo:this.halo&&de(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:Y(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:de(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Jv({font:Y(e.font)?e.font.clone():new L2,halo:See(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ws({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Iy({color:e.backgroundColor.clone()}):null})}};function See(e,t){return e&&t>0?new o0({color:de(e),size:t}):null}g([x({type:L2,json:{write:!0}})],kn.prototype,"font",null),g([De("font")],kn.prototype,"writeFont",null),g([x({type:o0,json:{write:!0}})],kn.prototype,"halo",void 0),g([x({...lR,json:{default:"center",write:!0}})],kn.prototype,"horizontalAlignment",void 0),g([x({...aR,json:{default:1,write:!0}})],kn.prototype,"lineHeight",void 0),g([x({type:ws,json:{write:!0}})],kn.prototype,"material",void 0),g([x({type:Iy,json:{write:!0}})],kn.prototype,"background",void 0),g([x(Ha)],kn.prototype,"size",null),g([x({type:String,json:{write:!0}})],kn.prototype,"text",void 0),g([Xe({Text:"text"},{readOnly:!0})],kn.prototype,"type",void 0),g([x({...uR,json:{default:"baseline",write:!0}})],kn.prototype,"verticalAlignment",void 0),kn=Jv=g([K("esri.symbols.TextSymbol3DLayer")],kn);const df=kn;var Ex;let Cu=Ex=class extends Xa{constructor(e){super(e),this.color=Tx.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Ex({color:de(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};g([x({type:rt,nonNullable:!0,json:{type:[li],write:(e,t,i)=>t[i]=e.toArray(rt.AlphaMode.UNLESS_OPAQUE),default:()=>Tx.clone(),defaultEquals:e=>e.toCss(!0)===Tx.toCss(!0)}})],Cu.prototype,"color",void 0),g([Xe({Water:"water"},{readOnly:!0})],Cu.prototype,"type",void 0),g([x({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Cu.prototype,"waterbodySize",void 0),g([x({type:Number,json:{write:!0,default:null}})],Cu.prototype,"waveDirection",void 0),g([x({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Cu.prototype,"waveStrength",void 0),Cu=Ex=g([K("esri.symbols.WaterSymbol3DLayer")],Cu);const Tx=new rt([0,119,190]),$R=Cu;var $x;let dc=$x=class extends qe{constructor(){super(...arguments),this.portal=null}clone(){return new $x({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};g([x({type:String})],dc.prototype,"name",void 0),g([x({type:String})],dc.prototype,"styleUrl",void 0),g([x({type:String})],dc.prototype,"styleName",void 0),g([x({type:ur})],dc.prototype,"portal",void 0),dc=$x=g([K("esri.symbols.support.StyleOrigin")],dc);const Ix=dc;var Ax;let Ay=Ax=class extends qe{clone(){return new Ax({url:this.url})}};g([x({type:String})],Ay.prototype,"url",void 0),Ay=Ax=g([K("esri.symbols.support.Thumbnail")],Ay);const IR={icon:Xc,object:JM,line:Rm,path:KM,fill:R2,extrude:XN,text:df,water:$R},Mee=Je.ofType({base:Xa,key:"type",typeMap:IR,errorContext:"symbol-layer"}),Eee=Le.getLogger("esri.symbols.Symbol3D");let fa=class extends En{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||Je;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&Eee.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){$p(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=cf(e.styleUrl,i);return new Ix({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new Ix({portal:i&&i.portal||ur.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new _n("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=Nm(e.styleUrl,r);_s(s)&&(s=Xs(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!fR(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new _n("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Xa||e&&IR[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};g([x({json:{read:!1,write:!1}})],fa.prototype,"color",null),g([x({type:Mee,nonNullable:!0,json:{write:!0}}),Mt(wR)],fa.prototype,"symbolLayers",null),g([x({type:Ix})],fa.prototype,"styleOrigin",void 0),g([je("styleOrigin")],fa.prototype,"readStyleOrigin",null),g([De("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],fa.prototype,"writeStyleOrigin",null),g([x({type:Ay,json:{read:!1}})],fa.prototype,"thumbnail",void 0),g([x({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],fa.prototype,"type",void 0),fa=g([K("esri.symbols.Symbol3D")],fa);const ff=fa;let F1=class extends ve{constructor(e){super(e),this.visible=!0}clone(){}};g([x({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],F1.prototype,"type",void 0),g([x({readOnly:!0})],F1.prototype,"visible",void 0),F1=g([K("esri.symbols.callouts.Callout3D")],F1);const AR=F1;var kx;let Kv=kx=class extends ve{constructor(){super(...arguments),this.color=new rt("white")}clone(){return new kx({color:de(this.color)})}};g([x(Lh)],Kv.prototype,"color",void 0),Kv=kx=g([K("esri.symbols.callouts.LineCallout3DBorder")],Kv);const kR=Kv;Object.freeze(Object.defineProperty({__proto__:null,default:kR},Symbol.toStringTag,{value:"Module"}));var Cx;let Ou=Cx=class extends AR{constructor(e){super(e),this.type="line",this.color=new rt([0,0,0,1]),this.size=Ba(1),this.border=null}get visible(){return this.size>0&&Y(this.color)&&this.color.a>0}clone(){return new Cx({color:de(this.color),size:this.size,border:de(this.border)})}};g([Xe({line:"line"},{readOnly:!0})],Ou.prototype,"type",void 0),g([x(Lh)],Ou.prototype,"color",void 0),g([x(Ha)],Ou.prototype,"size",void 0),g([x({type:kR,json:{write:!0}})],Ou.prototype,"border",void 0),g([x({readOnly:!0})],Ou.prototype,"visible",null),Ou=Cx=g([K("esri.symbols.callouts.LineCallout3D")],Ou);const Tee=Ou;function YM(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function CR(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!YM(e)}function P5e(e){return e.type==="point-3d"||e.type==="label-3d"}function N5e(e){return e.horizontalAlignment==="center"}const OR={types:{key:"type",base:AR,typeMap:{line:Tee}},json:{write:!0}};var Ox;let Uc=Ox=class extends ve{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new Ox({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};g([x(Ha)],Uc.prototype,"screenLength",void 0),g([x({type:Number,json:{write:!0,default:0}})],Uc.prototype,"minWorldLength",void 0),g([x({type:Number,json:{write:!0}})],Uc.prototype,"maxWorldLength",void 0),Uc=Ox=g([K("esri.symbols.support.Symbol3DVerticalOffset")],Uc);var Yv;const PR=Je.ofType({base:null,key:"type",typeMap:{text:df}});let Pu=Yv=class extends ff{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new PR,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return CR(this)}hasVisibleVerticalOffset(){return YM(this)}clone(){return new Yv({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail),callout:de(this.callout),verticalOffset:de(this.verticalOffset)})}static fromTextSymbol(e){return new Yv({symbolLayers:[df.fromTextSymbol(e)]})}};g([x({type:Uc,json:{write:!0}})],Pu.prototype,"verticalOffset",void 0),g([x(OR)],Pu.prototype,"callout",void 0),g([x({json:{read:!1,write:!1}})],Pu.prototype,"styleOrigin",void 0),g([x({type:PR})],Pu.prototype,"symbolLayers",void 0),g([Xe({LabelSymbol3D:"label-3d"},{readOnly:!0})],Pu.prototype,"type",void 0),Pu=Yv=g([K("esri.symbols.LabelSymbol3D")],Pu);const D2=Pu;var Zv;const NR=Je.ofType({base:null,key:"type",typeMap:{line:Rm,path:KM}}),$ee=Je.ofType({base:null,key:"type",typeMap:{line:Rm,path:KM}});let j1=Zv=class extends ff{constructor(e){super(e),this.symbolLayers=new NR,this.type="line-3d"}clone(){return new Zv({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Zv({symbolLayers:[Rm.fromSimpleLineSymbol(e)]})}};g([x({type:NR,json:{type:$ee}})],j1.prototype,"symbolLayers",void 0),g([Xe({LineSymbol3D:"line-3d"},{readOnly:!0})],j1.prototype,"type",void 0),j1=Zv=g([K("esri.symbols.LineSymbol3D")],j1);const z2=j1;let Nu=class extends En{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};g([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Nu.prototype,"angle",void 0),g([x({type:["simple-marker","picture-marker"],readOnly:!0})],Nu.prototype,"type",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Nu.prototype,"xoffset",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Nu.prototype,"yoffset",void 0),g([x({type:Number,cast:e=>e==="auto"?e:Dt(e),json:{write:!0}})],Nu.prototype,"size",void 0),Nu=g([K("esri.symbols.MarkerSymbol")],Nu);const RR=Nu;var Px;const LR=Je.ofType({base:null,key:"type",typeMap:{fill:R2}});let D1=Px=class extends ff{constructor(e){super(e),this.symbolLayers=new LR,this.type="mesh-3d"}clone(){return new Px({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}};g([x({type:LR})],D1.prototype,"symbolLayers",void 0),g([Xe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],D1.prototype,"type",void 0),D1=Px=g([K("esri.symbols.MeshSymbol3D")],D1);const ZM=D1;function Iee(e,t,i){return t.imageData?mR({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):FR(t.url,i)}function FR(e,t){return kee(t)&&!_s(e)&&t.layer.parsedUrl?Ep(t.layer.parsedUrl.path,"images",e):cf(e,t)}function Aee(e,t,i,r){if(Fh(e)){const s=zM(e);t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&Tp(i.url,t,"url",r)}else Tp(e,t,"url",r)}const jR={json:{read:{source:["imageData","url"],reader:Iee},write:{writer(e,t,i,r){Aee(e,t,this.source,r)}}}},DR={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=FR(t.url,i)),r}}}};function kee(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var Nx;let Ls=Nx=class extends eR{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=Dt(i)),r!=null&&(s.height=Dt(r)),s}clone(){const e=new Nx({color:de(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",de(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};g([Xe({esriPFS:"picture-fill"},{readOnly:!0})],Ls.prototype,"type",void 0),g([x(jR)],Ls.prototype,"url",void 0),g([x({type:Number,json:{write:!0}})],Ls.prototype,"xscale",void 0),g([x({type:Number,json:{write:!0}})],Ls.prototype,"yscale",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Ls.prototype,"width",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Ls.prototype,"height",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Ls.prototype,"xoffset",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Ls.prototype,"yoffset",void 0),g([x(DR)],Ls.prototype,"source",void 0),Ls=Nx=g([K("esri.symbols.PictureFillSymbol")],Ls);const zR=Ls;var Rx;let vo=Rx=class extends RR{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Dt(t)),i!=null&&(r.height=Dt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new Rx({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",de(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};g([x({json:{write:!1}})],vo.prototype,"color",void 0),g([Xe({esriPMS:"picture-marker"},{readOnly:!0})],vo.prototype,"type",void 0),g([x(jR)],vo.prototype,"url",void 0),g([x(DR)],vo.prototype,"source",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],vo.prototype,"height",void 0),g([je("height",["height","size"])],vo.prototype,"readHeight",null),g([x({type:Number,cast:Dt,json:{write:!0}})],vo.prototype,"width",void 0),g([x({json:{write:!1}})],vo.prototype,"size",void 0),vo=Rx=g([K("esri.symbols.PictureMarkerSymbol")],vo);const V2=vo;var Ru;const VR=Je.ofType({base:null,key:"type",typeMap:{icon:Xc,object:JM,text:df}});let fc=Ru=class extends ff{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new VR,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return CR(this)}hasVisibleVerticalOffset(){return YM(this)}clone(){return new Ru({verticalOffset:de(this.verticalOffset),callout:de(this.callout),styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Ru({symbolLayers:[Xc.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Ru({symbolLayers:[Xc.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,r;return((r=(i=e.data)==null?void 0:i.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Ru({symbolLayers:[Xc.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Ru({symbolLayers:[Xc.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Ru({symbolLayers:[df.fromTextSymbol(e)]})}};g([x({type:Uc,json:{write:!0}})],fc.prototype,"verticalOffset",void 0),g([x(OR)],fc.prototype,"callout",void 0),g([x({type:VR,json:{origins:{"web-scene":{write:!0}}}})],fc.prototype,"symbolLayers",void 0),g([Xe({PointSymbol3D:"point-3d"},{readOnly:!0})],fc.prototype,"type",void 0),fc=Ru=g([K("esri.symbols.PointSymbol3D")],fc);const Qc=fc;var z1;const GR=Je.ofType({base:null,key:"type",typeMap:{extrude:XN,fill:R2,icon:Xc,line:Rm,object:JM,text:df,water:$R}});let V1=z1=class extends ff{constructor(e){super(e),this.symbolLayers=new GR,this.type="polygon-3d"}clone(){return new z1({styleOrigin:de(this.styleOrigin),symbolLayers:de(this.symbolLayers),thumbnail:de(this.thumbnail)})}static fromJSON(e){const t=new z1;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:Y(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new z1({symbolLayers:[R2.fromSimpleFillSymbol(e)]})}};g([x({type:GR,json:{write:!0}})],V1.prototype,"symbolLayers",void 0),g([Xe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],V1.prototype,"type",void 0),V1=z1=g([K("esri.symbols.PolygonSymbol3D")],V1);const Lm=V1;var Lx;const w_=new lt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let yc=Lx=class extends eR{constructor(...e){super(...e),this.color=new rt([0,0,0,.25]),this.outline=new Yn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new Lx({color:de(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};g([x()],yc.prototype,"color",void 0),g([x()],yc.prototype,"outline",void 0),g([Xe({esriSFS:"simple-fill"},{readOnly:!0})],yc.prototype,"type",void 0),g([x({type:w_.apiValues,json:{read:w_.read,write:w_.write}})],yc.prototype,"style",void 0),yc=Lx=g([K("esri.symbols.SimpleFillSymbol")],yc);const Ja=yc;var Fx;const __=new lt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ya=Fx=class extends RR{constructor(...e){super(...e),this.color=new rt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Yn}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Dt(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new Fx({angle:this.angle,color:de(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};g([x()],ya.prototype,"color",void 0),g([De("color")],ya.prototype,"writeColor",null),g([Xe({esriSMS:"simple-marker"},{readOnly:!0})],ya.prototype,"type",void 0),g([x()],ya.prototype,"size",void 0),g([x({type:__.apiValues,json:{read:__.read,write:__.write}})],ya.prototype,"style",void 0),g([x({type:String,json:{write:!0}})],ya.prototype,"path",null),g([x({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Yn}},json:{default:null,write:!0}})],ya.prototype,"outline",void 0),ya=Fx=g([K("esri.symbols.SimpleMarkerSymbol")],ya);const Jo=ya;var jx;let Si=jx=class extends En{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new L2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Dt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new jx({angle:this.angle,backgroundColor:de(this.backgroundColor),borderLineColor:de(this.borderLineColor),borderLineSize:this.borderLineSize,color:de(this.color),font:this.font&&this.font.clone(),haloColor:de(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};g([x({type:rt,json:{write:!0}})],Si.prototype,"backgroundColor",void 0),g([x({type:rt,json:{write:!0}})],Si.prototype,"borderLineColor",void 0),g([x({type:Number,json:{write:!0}})],Si.prototype,"borderLineSize",void 0),g([x({type:L2,json:{write:!0}})],Si.prototype,"font",void 0),g([x({...lR,json:{write:!0}})],Si.prototype,"horizontalAlignment",void 0),g([x({type:Boolean,json:{write:!0}})],Si.prototype,"kerning",void 0),g([x({type:rt,json:{write:!0}})],Si.prototype,"haloColor",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Si.prototype,"haloSize",void 0),g([x({type:Boolean,json:{write:!0}})],Si.prototype,"rightToLeft",void 0),g([x({type:Boolean,json:{write:!0}})],Si.prototype,"rotated",void 0),g([x({type:String,json:{write:!0}})],Si.prototype,"text",void 0),g([Xe({esriTS:"text"},{readOnly:!0})],Si.prototype,"type",void 0),g([x({...uR,json:{write:!0}})],Si.prototype,"verticalAlignment",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Si.prototype,"xoffset",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Si.prototype,"yoffset",void 0),g([x({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Si.prototype,"angle",void 0),g([x({type:Number,json:{write:!0}})],Si.prototype,"width",void 0),g([x({type:Number})],Si.prototype,"lineWidth",void 0),g([De("lineWidth")],Si.prototype,"writeLineWidth",null),g([Mt("lineWidth")],Si.prototype,"castLineWidth",null),g([x(aR)],Si.prototype,"lineHeight",void 0),g([De("lineHeight")],Si.prototype,"writeLineHeight",null),Si=jx=g([K("esri.symbols.TextSymbol")],Si);const yf=Si;var Dx;const Cee=Le.getLogger("esri.symbols.WebStyleSymbol");let bo=Dx=class extends En{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=Y(this.portal)?this.portal:ur.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new Dx({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=Y(t)?t.cache:null,r=i?this.fetchCacheKey:null;if(Y(i)){const f=i.get(r);if(f)return f.clone()}const s=await Oee();di(t);const h=s.resolveWebStyleSymbol(this,{portal:this.portal},e,t);h.catch(f=>{Cee.error("#fetchSymbol()","Failed to create symbol from style",f)});const y=await h;return e==="webRef"&&y.type==="point-3d"||e==="cimRef"&&y.type==="cim"?(Y(i)&&i.set(r,y.clone()),y):null}};function Oee(){return ge(()=>import("./webStyleSymbolUtils.3d014d4b.js"),["assets/webStyleSymbolUtils.3d014d4b.js","assets/devEnvironmentUtils.8c6e6b72.js"])}g([x({json:{write:!1}})],bo.prototype,"color",void 0),g([x({type:String,json:{write:!0}})],bo.prototype,"styleName",void 0),g([x({type:ur,json:{write:!1}})],bo.prototype,"portal",void 0),g([x({type:String,json:{read:qM,write:Tp}})],bo.prototype,"styleUrl",void 0),g([x({type:Ay,json:{read:!1}})],bo.prototype,"thumbnail",void 0),g([x({type:String,json:{write:!0}})],bo.prototype,"name",void 0),g([Xe({styleSymbolReference:"web-style"},{readOnly:!0})],bo.prototype,"type",void 0),g([x()],bo.prototype,"fetchCacheKey",null),bo=Dx=g([K("esri.symbols.WebStyleSymbol")],bo);const zp=bo;function G2(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function L0(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const zn={base:En,key:"type",typeMap:{"simple-fill":Ja,"picture-fill":zR,"picture-marker":V2,"simple-line":Yn,"simple-marker":Jo,text:yf,"label-3d":D2,"line-3d":z2,"mesh-3d":ZM,"point-3d":Qc,"polygon-3d":Lm,"web-style":zp,cim:Pm},errorContext:"symbol"},Pee={base:En,key:"type",typeMap:{"picture-marker":V2,"simple-marker":Jo,text:yf,"web-style":zp,cim:Pm},errorContext:"symbol"},Nee=Z0({types:zn}),UR={base:En,key:"type",typeMap:{"simple-fill":Ja,"picture-fill":zR,"picture-marker":V2,"simple-line":Yn,"simple-marker":Jo,text:yf,"line-3d":z2,"mesh-3d":ZM,"point-3d":Qc,"polygon-3d":Lm,"web-style":zp,cim:Pm},errorContext:"symbol"},Ree={base:En,key:"type",typeMap:{text:yf,"label-3d":D2},errorContext:"symbol"},K$={base:En,key:"type",typeMap:{"line-3d":z2,"mesh-3d":ZM,"point-3d":Qc,"polygon-3d":Lm,"web-style":zp,cim:Pm},errorContext:"symbol"},Lee={base:En,key:"type",typeMap:{"label-3d":D2},errorContext:"symbol"},qR=Va(zn);function Fee(e){if(!e)return null;const t={};for(const i in e){const r=Ua(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function jee(e){if(!Y(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Cn=class extends Wi(ve){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:_y(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&Y(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:jee(this.aggregateGeometries),geometry:Y(this.geometry)?this.geometry.toJSON():null,symbol:Y(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){Y(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};g([x({value:null,json:{read:Fee}})],Cn.prototype,"aggregateGeometries",null),g([x({value:null})],Cn.prototype,"attributes",null),g([x({value:null,types:Rh,json:{read:Ua}})],Cn.prototype,"geometry",null),g([x({type:Boolean})],Cn.prototype,"isAggregate",void 0),g([x({clonable:"reference"})],Cn.prototype,"layer",void 0),g([x({type:sf})],Cn.prototype,"popupTemplate",void 0),g([x({clonable:"reference"})],Cn.prototype,"sourceLayer",void 0),g([x({value:null,types:zn})],Cn.prototype,"symbol",null),g([x({type:Boolean,value:!0})],Cn.prototype,"visible",null),Cn=g([K("esri.Graphic")],Cn),function(e){e.generateUID=_y}(Cn||(Cn={}));const Zn=Cn;function Dee(e,t,i){if(e>0){const r=E2(t,e,"meters");i.graphics.length===0?i.add(new Zn({geometry:r,symbol:{type:"simple-fill",color:[151,151,204,.5],style:"solid",outline:{color:"white",width:1}}})):i.graphics.getItemAt(0).geometry=r}else i.removeAll()}Chart.defaults.global.defaultFontColor="#232323";Chart.defaults.global.defaultFontFamily="'Avenir Next', 'Helvetica Neue', Helvetica, Arial, sans-serif";Chart.defaults.global.defaultFontSize=12;const BR=["R(A)","R(B)","R(C)","G/IC","O","C","MRDJ","Others"],zee=["Residential (Group A)","Residential (Group B)","Residential (Group C)","Government, Institution or Community","Open Space","Commercial","Major Road and Junction","Others"],HR=["#a1291f","#c27428","#e6b831","#bee1e6","#7eb827","#eb5b60","#FCE0BD","#cccccc"],bw=[...Array(BR.length)].map(()=>0),Vee=document.getElementById("zoning-number-chart"),WR=new Chart(Vee.getContext("2d"),{type:"horizontalBar",data:{labels:BR,datasets:[{label:"Number of pieces",backgroundColor:HR,stack:"Stack 0",data:bw}]},options:{responsive:!1,legend:{display:!1},title:{display:!0,fontSize:16,text:"Zoning pieces"},scales:{xAxes:[{stacked:!0,gridLines:{display:!1,color:"#FFFFFF33"},ticks:{beginAtZero:!0,precision:0}}],yAxes:[{stacked:!0,gridLines:{display:!1,color:"#232323"}}]}}}),Gee=document.getElementById("zoning-area-chart"),JR=new Chart(Gee.getContext("2d"),{type:"doughnut",data:{labels:zee,datasets:[{label:"Area (sq.m.)",backgroundColor:HR,borderWidth:0,data:bw}]},options:{responsive:!1,legend:{display:!1},title:{display:!0,fontSize:16,text:"Distribution of zoning areas"},tooltips:{callbacks:{label:function(e,t){const i=t.datasets[e.datasetIndex],s=i._meta[Object.keys(i._meta)[0]].total,h=i.data[e.index],y=parseFloat((h/s*100).toFixed(1));return" "+h.toLocaleString()+" sq.m. ("+y+"%)"},title:function(e,t){return t.labels[e[0].index]}}}}});function ww(e,t){e.data.datasets[0].data=t,e.update()}function Uee(){ww(WR,bw),ww(JR,bw)}function qee(e,t,i){return Nr(e.map((r,s)=>t.apply(i,[r,s])))}async function Bee(e,t,i){return(await Nr(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}async function U2(e){if(oe(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function R5e(e){try{return{ok:!0,value:await e}}catch(t){return km(t),{ok:!1,error:t}}}async function XM(e,t){return await e.load(),Hee(e,t)}async function Hee(e,t){const i=[],r=(...h)=>{for(const y of h)oe(y)||(Array.isArray(y)?r(...y):Je.isCollection(y)?y.forEach(f=>r(f)):Sn.isLoadable(y)&&i.push(y))};t(r);let s=null;if(await Bee(i,async h=>{(await U2(Wee(h)?h.loadAll():h.load())).ok!==!1||s||(s=h)}),s)throw s.loadError;return e}function Wee(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Jee=Le.getLogger("esri.assets");function Ft(e){if(!Lt.assetsPath)throw Jee.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne("assets:path-not-set","config.assetsPath is not set");return Ep(Lt.assetsPath,e)}const Kee=Le.getLogger("esri.portal.PortalItemResource");let Lu=class extends qe{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){Y(e)&&_s(e)?Kee.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(oe(i))throw new ne("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:Jb(t,"signal")})}async update(e,t){return(await ge(()=>import("./resourceUtils.0a827cf6.js"),[])).addOrUpdateResource(this,"update",e,t)}hasPath(){return Y(this.path)}_normalizePath(e,t){return oe(e)?e:(e=e.replace(/^\/+/,""),Y(t)&&_s(e)&&(e=DM(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};g([x()],Lu.prototype,"portalItem",void 0),g([x({type:String,value:null})],Lu.prototype,"path",null),g([Mt("path")],Lu.prototype,"_castPath",null),g([x({type:String,readOnly:!0})],Lu.prototype,"url",null),g([x({type:String,readOnly:!0})],Lu.prototype,"itemRelativeUrl",null),Lu=g([K("esri.portal.PortalItemResource")],Lu);const Yee=Lu;let G1=class extends qe{constructor(e){super(e),this.created=null,this.rating=null}};g([x()],G1.prototype,"created",void 0),g([x()],G1.prototype,"rating",void 0),G1=g([K("esri.portal.PortalRating")],G1);const x_=G1;var fd;let vt=fd=class extends Q0(Sn){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Y6(fd,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new Ut(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,h=!1,y=!1,f=!1,w=!1,S=!1,E=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(h=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),f=t.includes("Route Layer"),w=t.includes("Markup"),S=t.includes("Spatiotemporal"),E=t.includes("UtilityNetwork"),s=S&&y?"spatiotemporaltable":y?"table":f?"routelayer":w?"markup":S?"spatiotemporal":h?"featureshosted":E?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?h||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",s?Ft(i+s+r+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=ur.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Y(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof x_&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new x_({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:de(this.applicationProxies),avgRating:this.avgRating,categories:de(this.categories),created:de(this.created),culture:this.culture,description:this.description,extent:de(this.extent),groupCategories:de(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:de(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:de(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:de(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:de(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new fd({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new x_(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},fd)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Fh(t)?r.query={data:t}:r.query={url:gs(t)},Y(i)&&(r.query.filename=i);else{const s=new FormData;Y(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ne("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await ge(()=>import("./resourceUtils.0a827cf6.js"),[])).fetchResources(this,e,t)}async addResource(e,t,i){const r=await ge(()=>import("./resourceUtils.0a827cf6.js"),[]);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await ge(()=>import("./resourceUtils.0a827cf6.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ne("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await ge(()=>import("./resourceUtils.0a827cf6.js"),[])).removeAllResources(this,e)}resourceFromPath(e){return new Yee({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:de(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:de(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:de(this.typeKeywords),url:this.url};return AO(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new fd({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};g([x({type:["private","shared","org","public"]})],vt.prototype,"access",void 0),g([x()],vt.prototype,"accessInformation",void 0),g([x({type:String})],vt.prototype,"apiKey",void 0),g([x({json:{read:{source:"appProxies"}}})],vt.prototype,"applicationProxies",void 0),g([x()],vt.prototype,"avgRating",void 0),g([x()],vt.prototype,"categories",void 0),g([x({type:Date})],vt.prototype,"created",void 0),g([x()],vt.prototype,"culture",void 0),g([x()],vt.prototype,"description",void 0),g([x({readOnly:!0})],vt.prototype,"displayName",null),g([x({type:Ut})],vt.prototype,"extent",void 0),g([je("extent")],vt.prototype,"readExtent",null),g([x()],vt.prototype,"groupCategories",void 0),g([x({readOnly:!0})],vt.prototype,"iconUrl",null),g([x()],vt.prototype,"id",void 0),g([x({readOnly:!0})],vt.prototype,"isLayer",null),g([x()],vt.prototype,"itemControl",void 0),g([x({readOnly:!0})],vt.prototype,"itemUrl",null),g([x()],vt.prototype,"licenseInfo",void 0),g([x({type:Date})],vt.prototype,"modified",void 0),g([x()],vt.prototype,"name",void 0),g([x()],vt.prototype,"numComments",void 0),g([x()],vt.prototype,"numRatings",void 0),g([x()],vt.prototype,"numViews",void 0),g([x()],vt.prototype,"owner",void 0),g([x()],vt.prototype,"ownerFolder",void 0),g([x({type:ur})],vt.prototype,"portal",void 0),g([x()],vt.prototype,"screenshots",void 0),g([x()],vt.prototype,"size",void 0),g([x()],vt.prototype,"snippet",void 0),g([x()],vt.prototype,"sourceJSON",void 0),g([x({type:String})],vt.prototype,"spatialReference",void 0),g([x()],vt.prototype,"tags",void 0),g([x()],vt.prototype,"thumbnail",void 0),g([x({readOnly:!0})],vt.prototype,"thumbnailUrl",null),g([x()],vt.prototype,"title",void 0),g([x()],vt.prototype,"type",void 0),g([x()],vt.prototype,"typeKeywords",void 0),g([x({type:String,json:{read(e,t){var r;if(t.type!=="KML")return e;const i=(r=this.portal)==null?void 0:r.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],vt.prototype,"url",void 0),g([x({readOnly:!0})],vt.prototype,"userItemUrl",null),vt=fd=g([K("esri.portal.PortalItem")],vt);const F0=vt,KR=Object.freeze(Object.defineProperty({__proto__:null,default:F0},Symbol.toStringTag,{value:"Module"})),Y$=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Zee={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Z$(e){var t;return(t=Zee[e])!=null?t:!1}const U1=[],v0=new Map;function X$(e){for(const t of v0.keys())ZR(e.pattern,t)&&v0.delete(t)}function Xee(e){return U1.includes(e)||(X$(e),U1.unshift(e)),{remove(){const t=U1.indexOf(e);t>-1&&(U1.splice(t,1),X$(e))}}}async function YR(e){const t=bs();v0.has(e)||v0.set(e,ete(e,t));const i=v0.get(e);return await tte.add(i),i}function Qee(e){if(!Y$.test(e))return null;const[,t,i]=Y$.exec(e),r=t+(i?"-"+i.toUpperCase():"");return Z$(r)?r:Z$(t)?t:null}async function ete(e,t){const i=[];for(const r of U1)if(ZR(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new ne("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new ne("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function ZR(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}_M(()=>{v0.clear()});const tte=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Jl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function ite(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await YR("esri/t9n/basemaps");return i[e]||i[t]}const zx={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ft("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ft("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ft("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ft("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ft("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ft("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ft("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ft("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ft("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function Q$(e){const t=e==null?void 0:e.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function rte(e){const t=e==null?void 0:e.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}function q2(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function e8(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}function nte(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}const ste=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),ote=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function ate(e){return e.layerContainerType==="basemap"?ste:e.layerContainerType==="operational-layers"?ote:null}function lte(e,t){if(t.restrictedWebMapWriting){const i=ate(t);return!Y(i)||i.has(e.type)&&!q2(e)}return!0}function ute(e,t){if(q2(e)){const i=Y0("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&S_(e,r)}else e.type==="stream"?S_(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&S_(e,t)}function S_(e,t){"maxScale"in e&&(t.maxScale=iw(e.maxScale)),"minScale"in e&&(t.minScale=iw(e.minScale))}function hte(e,t){if(ute(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=iw(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(q2(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function Vx(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(lte(e,i)){const r={};return e.write(r,i)?r:null}return Y(t)&&hte(e,t=de(t)),t}var Xv;let cte=0;const M_=Le.getLogger("esri.Basemap");let Fs=Xv=class extends Q0(Sn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+cte++,this.baseLayers=new Je,this.referenceLayers=new Je;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&M_.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{M_.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",$p(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const h=Vx(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);Y(h)&&r.push(h)}),this.referenceLayers.forEach(s=>{const h=Vx(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);Y(h)&&(h.isReference=!0,r.push(h))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",$p(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XM(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Xv({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=de(i);return r.url&&Wa(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&Wa(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;di(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const h=t.data.id;r.push(ite(h).then(y=>{y&&this.read({title:y},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,h=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:y}=await ge(()=>import("./layersCreator.889eb0ce.js"),["assets/layersCreator.889eb0ce.js","assets/lazyLayerLoader.350d4ca7.js","assets/portalLayers.db2d1714.js","assets/layersLoader.6a08d389.js","assets/jsonContext.742790c7.js"]),f=[];if(di(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const w={context:{origin:h,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},S=y(this.baseLayers,e.baseMapLayers.filter(A=>!A.isReference),w);f.push(S);const E=y(this.referenceLayers,e.baseMapLayers.filter(A=>A.isReference),w);f.push(E)}await Nr(f)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=hr(e.itemUrl);return this._set("resourceInfo",{data:r.baseMap,context:{origin:"web-map",portal:e.portal||ur.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ur.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=zx[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),uP(M_,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Xv.fromJSON(t)}return null}};g([x({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Je}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Fs.prototype,"baseLayers",null),g([x({type:String,json:{origins:{"web-scene":{write:!0}}}})],Fs.prototype,"id",void 0),g([x({type:F0})],Fs.prototype,"portalItem",void 0),g([x()],Fs.prototype,"referenceLayers",null),g([x({readOnly:!0})],Fs.prototype,"resourceInfo",void 0),g([x({type:ot})],Fs.prototype,"spatialReference",void 0),g([x()],Fs.prototype,"thumbnailUrl",void 0),g([x({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Fs.prototype,"title",void 0),g([De("title")],Fs.prototype,"writeTitle",null),Fs=Xv=g([K("esri.Basemap")],Fs);const Ip=Fs,pte=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"}));function L5e(e){}function dte(e){return()=>e}var Gx;let Qv=Gx=class extends ve{constructor(e){super(e),this.type="none"}clone(){return new Gx({type:this.type})}};g([Xe({none:"none",stayAbove:"stay-above"})],Qv.prototype,"type",void 0),Qv=Gx=g([K("esri.ground.NavigationConstraint")],Qv);var Ux;const t8=Le.getLogger("esri.Ground");let gl=Ux=class extends Q0(Sn){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Je;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&t8.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{t8.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",$p(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(h=>{if("write"in h){const y={};dte(h)().write(y,r)&&s.push(y)}else r&&r.messages&&r.messages.push(new ne("layer:unsupported",`Layers (${h.title}, ${h.id}) of type '${h.declaredClass}' cannot be persisted in the ground`,{layer:h}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XM(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await ge(()=>import("./ElevationQuery.2faf5985.js"),[]);di(t);const r=new i,s=this.layers.filter(i8).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await ge(()=>import("./ElevationQuery.2faf5985.js"),[]);di(t);const r=new i,s=this.layers.filter(i8).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:de(this.surfaceColor),navigationConstraint:de(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Ux({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,h=t&&t.url||null;return ge(()=>import("./layersCreator.889eb0ce.js"),["assets/layersCreator.889eb0ce.js","assets/lazyLayerLoader.350d4ca7.js","assets/portalLayers.db2d1714.js","assets/layersLoader.6a08d389.js","assets/jsonContext.742790c7.js"]).then(({populateOperationalLayers:y})=>{di(i);const f=[];if(e.layers&&Array.isArray(e.layers)){const w={context:{origin:r,url:h,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};f.push(y(this.layers,e.layers,w))}return Nr(f)}).then(()=>{})}};function fte(e){return e&&"createElevationSampler"in e}function i8(e){return e.type==="elevation"||fte(e)}g([x({json:{read:!1}})],gl.prototype,"layers",null),g([De("layers")],gl.prototype,"writeLayers",null),g([x({readOnly:!0})],gl.prototype,"resourceInfo",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:li,read:{reader:im,source:"transparency"},write:{writer:(e,t)=>{t.transparency=N2(e)},target:"transparency"}}})],gl.prototype,"opacity",void 0),g([x({type:rt,json:{type:[li],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],gl.prototype,"surfaceColor",void 0),g([x({type:Qv,json:{write:!0}})],gl.prototype,"navigationConstraint",void 0),gl=Ux=g([K("esri.Ground")],gl);const _w=gl;let eb=class extends qe{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!Je.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||Je.isCollection(e)?e.forEach(r=>this._isHandle(r)&&i.push(r)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||Je.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};g([x({readOnly:!0})],eb.prototype,"size",null),eb=g([K("esri.core.Handles")],eb);const er=eb;function $e(e,t,i={}){return QM(e,t,i,XR)}function sn(e,t,i={}){return QM(e,t,i,QR)}function QM(e,t,i={},r){let s=null;const h=i.once?(y,f)=>{r(y)&&(Hn(s),t(y,f))}:(y,f)=>{r(y)&&t(y,f)};if(s=$J(e,h,i.sync,i.equals),i.initial){const y=e();h(y,y)}return s}function ro(e,t,i,r={}){let s=null,h=null,y=null;function f(){var E;s&&h&&(h.remove(),(E=r.onListenerRemove)==null||E.call(r,s),s=null,h=null)}function w(E){r.once&&r.once&&Hn(y),i(E)}const S=$e(e,(E,A)=>{var P;f(),v2(E)&&(s=E,h=b2(E,t,w),(P=r.onListenerAdd)==null||P.call(r,E))},{sync:r.sync,initial:!0});return y=Nh(()=>{S.remove(),f()}),y}function kh(e,t){return yte(e,QR,t)}function yte(e,t,i){if(eo(i))return Promise.reject(bi());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function h(){s=Hn(s)}return new Promise((y,f)=>{s=y2([to(i,()=>{h(),f(bi())}),QM(e,w=>{h(),y(w)},{sync:!1,once:!0},t!=null?t:XR)])})}function XR(e){return!0}function QR(e){return!!e}function mte(e,t,i={}){let r=!1;const s=$e(e,(h,y)=>{r||t(h,y)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const Yl={sync:!0},Wt={initial:!0},ys={sync:!0,initial:!0};let b0=class extends qe{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new er,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,$e)}addWhen(e,t,i={}){return this._installWatch(e,t,i,sn)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const s=++this.handleId;return this.handles.add([ro(e,"after-changes",this._createSyncUpdatingCallback(),Yl),ro(e,"change",t,{onListenerAdd:i?h=>t({added:h.toArray(),removed:[]}):void 0,onListenerRemove:r?h=>t({added:[],removed:h.toArray()}):void 0})],s),{remove:()=>this.handles.remove(s)}}addPromise(e){if(oe(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(bg)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,s);const h=r(e,t,i);return this.handles.add(h,s),{remove:()=>this.handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=$e(e,i,{sync:!0,equals:()=>!1});return this.handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this.handles.remove(bg),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(X0(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(bg))}),bg)}}};g([x({readOnly:!0})],b0.prototype,"updating",void 0),b0=g([K("esri.core.support.WatchUpdatingTracking")],b0);const bg=-42;var r8;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(r8||(r8={}));const nu=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new er}get updatingHandles(){return this._get("updatingHandles")||new b0}};return g([x({readOnly:!0})],t.prototype,"handles",null),g([x({readOnly:!0})],t.prototype,"updatingHandles",null),t=g([K("esri.core.HandleOwner")],t),t};let Ap=class extends nu(qe){};Ap=g([K("esri.core.HandleOwner")],Ap);let yd=class extends nu(Je){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(wP(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=Y(this.getCollections)?this.getCollections():null;if(oe(e))return void this.removeAll();let t=0;for(const i of e)Y(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new Je(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const h of s)e=this._processCollection(e,h);else e=this._processCollection(e,s)}}return e}};g([x()],yd.prototype,"getCollections",void 0),g([x()],yd.prototype,"getChildrenFunction",void 0),g([x()],yd.prototype,"itemFilterFunction",void 0),yd=g([K("esri.core.CollectionFlattener")],yd);const j0=yd;function gte(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const n8=Le.getLogger("esri.support.basemapUtils");function vte(){return{}}function bte(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function wte(e,t){let i;if(typeof e=="string"){if(!(e in zx)){const r=Object.entries(zx).filter(([s,h])=>Lt.apiKey&&!h.classic||!Lt.apiKey&&h.classic&&!h.deprecated).map(([s])=>`"${s}"`).join(", ");return n8.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=Ip.fromId(e),t&&(t[e]=i))}else i=ji(Ip,e);return i!=null&&i.destroyed&&(n8.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function _te(e,t){return e===t?!0:$te(o8(e),o8(t),{mustMatchReferences:!0})==="equal"}function xte(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(eL))}function eL(e){var t;if(s8(e.url))return!0;if(e.type==="vector-tile"){for(const i in e.sourceNameToSource)if(s8((t=e.sourceNameToSource[i])==null?void 0:t.sourceUrl))return!0}return!1}function tL(e,t){var s,h,y;if(oe(t)||oe(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:(y=(h=r.find(f=>e.spatialReference.equals(f)))!=null?h:r[0])!=null?y:null,updating:!1}:{spatialReference:r[0],updating:!1}}const Ste=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function s8(e){if(!e)return!1;const t=new Sh(gs(e));return Ste.test(t.authority)}function o8(e){return e?!e.loaded&&e.resourceInfo?Ete(e.resourceInfo.data):{baseLayers:a8(e.baseLayers),referenceLayers:a8(e.referenceLayers)}:null}function a8(e){return(Je.isCollection(e)?e.toArray():e).map(Mte)}function Mte(e){var t,i;return{type:e.type,url:iL("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||!Y(e.sublayers)||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function Ete(e){return e?{baseLayers:l8(e.baseMapLayers.filter(t=>!t.isReference)),referenceLayers:l8(e.baseMapLayers.filter(t=>t.isReference))}:null}function l8(e){return e.map(t=>Tte(t))}function Tte(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:iL(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function $te(e,t,i){return e!=null!=(t!=null)?"not-equal":e?u8(e.baseLayers,t.baseLayers)?u8(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function u8(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ite(e[i],t[i]))return!1;return!0}function Ite(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(Y(e.activeLayerId)||Y(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(Y(e.sublayers)||Y(t.sublayers)){if(oe(e.sublayers)||oe(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),s=t.sublayers.at(i);if(r.id!==s.id||r.visible!==s.visible)return!1}}return!0}function iL(e){return e?Xs(e).replace(/^\s*https?:/i,"").toLowerCase():""}function Ate(e){return new j0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const kte=Le.getLogger("esri.support.groundUtils"),h8={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Cte(e){let t=null;if(typeof e=="string")if(e in h8){const i=h8[e];t=new _w({resourceInfo:{data:{layers:[i]}}})}else kte.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ji(_w,e);return t}const Ote=Le.getLogger("esri.layers.support.fromPortalItem");async function Pte(e){const t="portalItem"in e?e:{portalItem:e},i=await ge(()=>import("./portalLayers.db2d1714.js"),["assets/portalLayers.db2d1714.js","assets/lazyLayerLoader.350d4ca7.js","assets/layersLoader.6a08d389.js","assets/jsonContext.742790c7.js"]);try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,h=s&&s.id||"unset",y=s&&s.portal&&s.portal.url||Lt.portalUrl;throw Ote.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+h+"')",r),r}}let Nte=0,fr=class extends ta.EventedMixin(C2(Sn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ut(-180,-90,180,90,ot.WGS84),this.id=Date.now().toString(16)+"-layer-"+Nte++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ot.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await ge(()=>import("./arcgisLayers.06558f66.js"),["assets/arcgisLayers.06558f66.js","assets/lazyLayerLoader.350d4ca7.js"])).fromUrl(t)}static fromPortalItem(e){return Pte(e)}initialize(){this.when().catch(e=>{var t,i;Br(e)||Le.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?hr(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ni(e,{query:{f:"json"},responseType:"json"})).data;throw new ne("layer:no-attribution-data","Layer does not have attribution data")}};g([x({type:String})],fr.prototype,"attributionDataUrl",void 0),g([x({type:Ut})],fr.prototype,"fullExtent",void 0),g([x({readOnly:!0})],fr.prototype,"hasAttributionData",null),g([x({type:String,clonable:!1})],fr.prototype,"id",void 0),g([x({type:Boolean,nonNullable:!0})],fr.prototype,"legendEnabled",void 0),g([x({type:["show","hide","hide-children"]})],fr.prototype,"listMode",void 0),g([x({type:Number,range:{min:0,max:1},nonNullable:!0})],fr.prototype,"opacity",void 0),g([x({clonable:!1})],fr.prototype,"parent",void 0),g([x({readOnly:!0})],fr.prototype,"parsedUrl",null),g([x({type:Boolean})],fr.prototype,"popupEnabled",void 0),g([x({type:Boolean})],fr.prototype,"attributionVisible",void 0),g([x({type:ot})],fr.prototype,"spatialReference",void 0),g([x({type:String})],fr.prototype,"title",void 0),g([x({readOnly:!0,json:{read:!1}})],fr.prototype,"type",void 0),g([x()],fr.prototype,"url",void 0),g([x({type:Boolean,nonNullable:!0})],fr.prototype,"visible",void 0),fr=g([K("esri.layers.Layer")],fr);const om=fr;function qx(e,t,i){let r,s;if(e)for(let h=0,y=e.length;h<y;h++){if(r=e.getItemAt(h),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=qx(r.layers,t,i),s))return s}}const c8=Le.getLogger("esri.support.LayersMixin"),Rte=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Je;const r=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},s=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||c8.error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},h=y=>{y.parent=null,this.layerRemoved(y)};this.layers.on("before-add",y=>r(y.item)),this.layers.on("after-add",y=>s(y.item)),this.layers.on("after-remove",y=>h(y.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",$p(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof om){const h=i;h.parent===this?this.reorder(h,r):s.add(h,r)}else ru(i)?i.then(h=>{this.destroyed||this.add(h,r)}):c8.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;r=s.getNextIndex(r),i.slice().forEach(h=>{h.parent!==this?(s.add(h,r),r+=1):this.reorder(h,r)})}findLayerById(i){return qx(this.layers,"id",i)}findLayerByUid(i){return qx(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return g([x()],t.prototype,"layers",null),t=g([K("esri.support.LayersMixin")],t),t},rL="esri.support.TablesMixin",Lte=Le.getLogger(rL);function Bx(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const h=e.getItemAt(r);if(h[t]===i)return h;if((h==null?void 0:h.type)==="group"){const y=Bx(h.tables,t,i);if(y)return y}}}const Fte=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Je,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Lte.error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",$p(i,this._get("tables")))}findTableById(i){return Bx(this.tables,"id",i)}findTableByUid(i){return Bx(this.tables,"uid",i)}};return g([x()],t.prototype,"tables",null),t=g([K(rL)],t),t};let ma=class extends Fte(Rte(ta.EventedMixin(qe))){constructor(e){super(e),this.allLayers=new j0({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Ate(this),this.basemap=null,this.editableLayers=new j0({getCollections:()=>[this.allLayers],itemFilterFunction:gte}),this.ground=new _w,this._basemapCache=vte()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),bte(this._basemapCache),this._basemapCache=null}castBasemap(e){return wte(e,this._basemapCache)}castGround(e){const t=Cte(e);return oe(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};g([x({readOnly:!0,dependsOn:[]})],ma.prototype,"allLayers",void 0),g([x({readOnly:!0})],ma.prototype,"allTables",void 0),g([x({type:Ip})],ma.prototype,"basemap",void 0),g([Mt("basemap")],ma.prototype,"castBasemap",null),g([x({readOnly:!0})],ma.prototype,"editableLayers",void 0),g([x({type:_w,nonNullable:!0})],ma.prototype,"ground",void 0),g([Mt("ground")],ma.prototype,"castGround",null),ma=g([K("esri.Map")],ma);const e7=ma;class t7{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,h=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),h&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return Kn(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function i7(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}i7(new t7(0,2*Math.PI));const F5e=i7(new t7(-Math.PI,Math.PI)),nL=i7(new t7(0,360));let vl=class extends Wi(ve){constructor(...e){super(...e),this.position=new et([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=Bs(e.x||0),s.y=Bs(e.y||0),s.z=e.hasZ?Bs(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new et;return i.read(e,t),i.x=Bs(i.x||0),i.y=Bs(i.y||0),i.z=i.hasZ?Bs(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};g([x({type:et,json:{write:{isRequired:!0}}})],vl.prototype,"position",void 0),g([De("position")],vl.prototype,"writePosition",null),g([je("position")],vl.prototype,"readPosition",null),g([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(e=>nL.normalize(Bs(e)))],vl.prototype,"heading",void 0),g([x({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(e=>Kn(Bs(e),-180,180))],vl.prototype,"tilt",void 0),g([x({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],vl.prototype,"fov",void 0),vl=g([K("esri.Camera")],vl);const jte=vl;var Hx;let Fu=Hx=class extends ve{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Hx({rotation:this.rotation,scale:this.scale,targetGeometry:Y(this.targetGeometry)?this.targetGeometry.clone():null,camera:Y(this.camera)?this.camera.clone():null})}};function E_(){return{enabled:!this.camera}}g([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:E_}}}}})],Fu.prototype,"rotation",void 0),g([Mt("rotation")],Fu.prototype,"castRotation",null),g([x({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:E_}}}}})],Fu.prototype,"scale",void 0),g([x({types:Rh,json:{read:Ua,write:!0,origins:{"web-scene":{read:Ua,write:{overridePolicy:E_}}}}})],Fu.prototype,"targetGeometry",void 0),g([x({type:jte,json:{write:!0}})],Fu.prototype,"camera",void 0),Fu=Hx=g([K("esri.Viewpoint")],Fu);const qr=Fu;class r7{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(o5),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new r7,r=this._originStores[It.DEFAULTS];r&&r.forEach((s,h)=>{i.set(h,de(s),It.DEFAULTS)});for(let s=It.SERVICE;s<o5;s++){const h=this._originStores[s];h&&h.forEach((y,f)=>{t&&t.has(f)||i.set(f,de(y),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=It.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const h=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),h!==i}return!1}delete(t,i=It.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let h=i-1;h>=0;h--){const y=this._originStores[h];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,h);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),h=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),h!==s}originOf(t){return this._propertyOriginMap.get(t)||It.DEFAULTS}forEach(t){this._values.forEach(t)}}const sL=e=>{let t=class extends e{constructor(...i){super(...i);const r=nn(this),s=r.store,h=new r7;r.store=h,MP(r,s,h)}read(i,r){TP(this,i,r)}getAtOrigin(i,r){const s=T_(this),h=yh(r);if(typeof i=="string")return s.get(i,h);const y={};return i.forEach(f=>{y[f]=s.get(f,h)}),y}originOf(i){return rw(this.originIdOf(i))}originIdOf(i){return T_(this).originOf(i)}revert(i,r){const s=T_(this),h=yh(r),y=nn(this);let f;f=typeof i=="string"?i==="*"?s.keys(h):[i]:i,f.forEach(w=>{y.invalidate(w),s.revert(w,h),y.commit(w)})}};return t=g([K("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function T_(e){return nn(e).store}let p8=class extends sL(qe){};p8=g([K("esri.core.ReadOnlyMultiOriginJSONSupport")],p8);const Dte=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return $_(this).delete(i,yh(r))}write(i={},r){return AP(this,i=i||{},r),i}setAtOrigin(i,r,s){nn(this).setAtOrigin(i,r,yh(s))}removeOrigin(i){const r=$_(this),s=yh(i),h=r.keys(s);for(const y of h)r.originOf(y)===s&&r.set(y,r.get(y,s),It.USER)}updateOrigin(i,r){const s=$_(this),h=yh(r),y=this.get(i);for(let f=h+1;f<o5;++f)s.delete(i,f);s.set(i,y,h)}toJSON(i){return this.write({},i)}};return t=g([K("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function $_(e){return nn(e).store}const B2=e=>{let t=class extends Dte(sL(e)){constructor(...i){super(...i)}};return t=g([K("esri.core.MultiOriginJSONSupport")],t),t};let xw=class extends B2(qe){};xw=g([K("esri.core.MultiOriginJSONSupport")],xw);function zte(e){return e&&"getAtOrigin"in e&&"originOf"in e}function Vte(e){e&&e.writtenProperties&&e.writtenProperties.forEach(({target:t,propName:i,newOrigin:r})=>{zte(t)&&r&&t.originOf(i)!==r&&t.updateOrigin(i,r)})}const oL={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},aL=Object.values(oL),lL=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${aL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Gte=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${aL.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Ute=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function j5e(e){return!!lL.test(e)}function Ch(e){if(oe(e))return null;const t=hr(e),i=t.path.match(lL)||t.path.match(Gte);if(!i)return null;const[,r,s,h,y]=i,f=s.indexOf("/");return{title:n7(f!==-1?s.slice(f+1):s),serverType:oL[h.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:r}}}function qte(e){const t=hr(e).path.match(Ute);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function n7(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Bte(e,t){const i=[];if(e){const r=Ch(e);Y(r)&&r.title&&i.push(r.title)}if(t){const r=n7(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function uL(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",h=(e=e.toLowerCase()).includes(t),y=e.includes(i)||e.includes(r)||e.includes(s);return h&&y}function Hte(e,t){return e&&gR(vR(e,t))}function Wte(e){let{url:t}=e;if(!t)return{url:t};t=vR(t,e.logger);const i=hr(t),r=Ch(i.path);let s;if(Y(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const h=qte(i.path);Y(h)&&(t=h.serviceUrl,s=h.sublayerId)}return{url:gR(t),layerId:s}}function Jte(e,t,i,r,s){Tp(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=Ep(r.url,i,e.layerId.toString()))}function D5e(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),h=t.includes("/wmsserver");return i&&(r||s||h)}function Kte(e){if(!e)return!1;const t=new Sh(gs(e)).authority.toLowerCase();return t==="server.arcgisonline.com"||t==="services.arcgisonline.com"}var Wx;let q1=Wx=class extends ve{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new Wx({minValue:this.minValue,maxValue:this.maxValue})}};g([x({type:Number,json:{write:!0}})],q1.prototype,"minValue",void 0),g([x({type:Number,json:{write:!0}})],q1.prototype,"maxValue",void 0),q1=Wx=g([K("esri.renderer.support.AuthoringInfoClassBreakInfo")],q1);var Jx;let oh=Jx=class extends ve{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new Jx({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:de(this.classBreakInfos)})}};g([x({type:String,json:{write:!0}})],oh.prototype,"field",void 0),g([x({type:String,json:{write:!0}})],oh.prototype,"normalizationField",void 0),g([x({type:String,json:{write:!0}})],oh.prototype,"label",void 0),g([x({type:[q1],json:{write:!0}})],oh.prototype,"classBreakInfos",void 0),oh=Jx=g([K("esri.renderers.support.AuthoringInfoFieldInfo")],oh);var Kx;const wg=new lt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),_g=new lt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),d8={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},f8=["high-to-low","above-and-below","centered-on","extremes"],y8=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],m8=["seconds","minutes","hours","days","months","years"];let On=Kx=class extends ve{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new Kx({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};g([x({types:d8,json:{write:!0}})],On.prototype,"endTime",void 0),g([Mt("endTime")],On.prototype,"castEndTime",null),g([x({type:String,json:{write:!0}})],On.prototype,"field",void 0),g([x({type:Number,json:{write:!0}})],On.prototype,"maxSliderValue",void 0),g([x({type:Number,json:{write:!0}})],On.prototype,"minSliderValue",void 0),g([x({types:d8,json:{write:!0}})],On.prototype,"startTime",void 0),g([Mt("startTime")],On.prototype,"castStartTime",null),g([x({type:wg.apiValues,value:null,json:{type:wg.jsonValues,read:wg.read,write:wg.write}})],On.prototype,"style",null),g([x({type:y8,value:null,json:{type:y8,origins:{"web-scene":{type:f8,write:{writer:(e,t)=>{f8.includes(e)&&(t.theme=e)}}}},write:!0}})],On.prototype,"theme",null),g([x({type:_g.apiValues,json:{type:_g.jsonValues,read:_g.read,write:_g.write}})],On.prototype,"type",void 0),g([x({type:m8,json:{type:m8,write:!0}})],On.prototype,"units",void 0),On=Kx=g([K("esri.renderers.support.AuthoringInfoVisualVariable")],On);const Yte=On;let tb=class extends ve{constructor(e){super(e),this.type=null}};g([x({readOnly:!0,json:{read:!1,write:!0}})],tb.prototype,"type",void 0),tb=g([K("esri.rest.support.ColorRamp")],tb);const s7=tb;var Yx;let mc=Yx=class extends s7{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Yx({fromColor:de(this.fromColor),toColor:de(this.toColor),algorithm:this.algorithm})}};g([Xe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],mc.prototype,"algorithm",void 0),g([x({type:rt,json:{type:[li],write:!0}})],mc.prototype,"fromColor",void 0),g([x({type:rt,json:{type:[li],write:!0}})],mc.prototype,"toColor",void 0),g([x({type:["algorithmic"]})],mc.prototype,"type",void 0),mc=Yx=g([K("esri.rest.support.AlgorithmicColorRamp")],mc);const o7=mc;var Zx;let B1=Zx=class extends s7{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new Zx({colorRamps:de(this.colorRamps)})}};g([x({type:[o7],json:{write:!0}})],B1.prototype,"colorRamps",void 0),g([x({type:["multipart"]})],B1.prototype,"type",void 0),B1=Zx=g([K("esri.rest.support.MultipartColorRamp")],B1);const hL=B1,cL={key:"type",base:s7,typeMap:{algorithmic:o7,multipart:hL}};function pL(e){return e&&e.type?e.type==="algorithmic"?o7.fromJSON(e):e.type==="multipart"?hL.fromJSON(e):null:null}var Xx;const Wh=new lt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),xg=new lt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),g8=new lt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),v8=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Zte=["high-to-low","above-and-below","above","below","90-10"],Xte=["flow-line","wave-front"],Qte=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Yi=Xx=class extends ve{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return pL(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new Xx({classificationMethod:this.classificationMethod,colorRamp:de(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:de(this.field1),field2:de(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};g([x({type:Wh.apiValues,value:null,json:{type:Wh.jsonValues,read:Wh.read,write:Wh.write,origins:{"web-document":{default:"manual",type:Wh.jsonValues,read:Wh.read,write:Wh.write}}}})],Yi.prototype,"classificationMethod",null),g([x({types:cL,json:{write:!0}})],Yi.prototype,"colorRamp",void 0),g([je("colorRamp")],Yi.prototype,"readColorRamp",null),g([x({type:[String],value:null,json:{write:!0}})],Yi.prototype,"fields",null),g([x({type:oh,value:null,json:{write:!0}})],Yi.prototype,"field1",null),g([x({type:oh,value:null,json:{write:!0}})],Yi.prototype,"field2",null),g([x({type:Xte,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yi.prototype,"flowTheme",null),g([x({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Yi.prototype,"focus",null),g([x({type:Number,value:null,json:{type:li,write:!0}})],Yi.prototype,"numClasses",null),g([x({type:v8,json:{type:v8,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Yi.prototype,"lengthUnit",void 0),g([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yi.prototype,"maxSliderValue",void 0),g([x({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yi.prototype,"minSliderValue",void 0),g([x({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yi.prototype,"statistics",null),g([x({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Yi.prototype,"standardDeviationInterval",null),g([x({type:xg.apiValues,value:null,json:{type:xg.jsonValues,read:xg.read,write:xg.write,origins:{"web-scene":{type:g8.jsonValues,write:{writer:g8.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Yi.prototype,"type",null),g([x({type:[Yte],json:{write:!0}})],Yi.prototype,"visualVariables",void 0),g([x({type:Qte,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yi.prototype,"univariateSymbolStyle",null),g([x({type:Zte,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yi.prototype,"univariateTheme",null),Yi=Xx=g([K("esri.renderers.support.AuthoringInfo")],Yi);const dL=Yi,I_=new lt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let H1=class extends ve{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};g([x({type:dL,json:{write:!0}})],H1.prototype,"authoringInfo",void 0),g([x({type:I_.apiValues,readOnly:!0,json:{type:I_.jsonValues,read:!1,write:{writer:I_.write,ignoreOrigin:!0}}})],H1.prototype,"type",void 0),H1=g([K("esri.renderers.Renderer")],H1);const su=H1;var Qx;let w0=Qx=class extends ve{constructor(){super(...arguments),this.title=null}clone(){return new Qx({title:this.title})}};g([x({type:String,json:{write:!0}})],w0.prototype,"title",void 0),w0=Qx=g([K("esri.renderers.support.LegendOptions")],w0);var e4;let ib=e4=class extends w0{constructor(){super(...arguments),this.showLegend=null}clone(){return new e4({title:this.title,showLegend:this.showLegend})}};g([x({type:Boolean,json:{write:!0}})],ib.prototype,"showLegend",void 0),ib=e4=g([K("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],ib);const fL=ib,eie=Le.getLogger("esri.renderers.visualVariables.VisualVariable"),A_=new lt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let wo=class extends ve{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(eie.error(".field: field must be a string value"),null):Tm(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};g([x()],wo.prototype,"index",void 0),g([x({type:A_.apiValues,readOnly:!0,json:{read:A_.read,write:A_.write}})],wo.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],wo.prototype,"field",void 0),g([Mt("field")],wo.prototype,"castField",null),g([x({type:String,json:{write:!0}})],wo.prototype,"valueExpression",void 0),g([x({type:String,json:{write:!0}})],wo.prototype,"valueExpressionTitle",void 0),g([x({readOnly:!0})],wo.prototype,"arcadeRequired",null),g([x({type:fL,json:{write:!0}})],wo.prototype,"legendOptions",void 0),wo=g([K("esri.renderers.visualVariables.VisualVariable")],wo);const Fm=wo;var t4;let gc=t4=class extends ve{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new t4({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};g([x({type:rt,json:{type:[li],write:!0}})],gc.prototype,"color",void 0),g([x({type:String,json:{write:!0}})],gc.prototype,"label",void 0),g([x({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],gc.prototype,"value",void 0),g([De("value")],gc.prototype,"writeValue",null),gc=t4=g([K("esri.renderers.visualVariables.support.ColorStop")],gc);const tie=gc;var i4;let vc=i4=class extends Fm{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new i4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([x({readOnly:!0})],vc.prototype,"cache",null),g([x({type:["color"],json:{type:["colorInfo"]}})],vc.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],vc.prototype,"normalizationField",void 0),g([x({type:[tie],json:{write:!0}})],vc.prototype,"stops",null),vc=i4=g([K("esri.renderers.visualVariables.ColorVariable")],vc);const yL=vc;var r4;let ju=r4=class extends ve{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return im(t.transparency)}writeOpacity(e,t,i){t[i]=N2(e)}clone(){return new r4({label:this.label,opacity:this.opacity,value:this.value})}};g([x({type:String,json:{write:!0}})],ju.prototype,"label",void 0),g([x({type:Number,json:{type:li,write:{target:"transparency"}}})],ju.prototype,"opacity",void 0),g([je("opacity",["transparency"])],ju.prototype,"readOpacity",null),g([De("opacity")],ju.prototype,"writeOpacity",null),g([x({type:Number,json:{write:!0}})],ju.prototype,"value",void 0),ju=r4=g([K("esri.renderers.visualVariables.support.OpacityStop")],ju);const iie=ju;var n4;let bc=n4=class extends Fm{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new n4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([x({readOnly:!0})],bc.prototype,"cache",null),g([x({type:["opacity"],json:{type:["transparencyInfo"]}})],bc.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],bc.prototype,"normalizationField",void 0),g([x({type:[iie],json:{write:!0}})],bc.prototype,"stops",null),bc=n4=g([K("esri.renderers.visualVariables.OpacityVariable")],bc);const mL=bc;var s4;let bl=s4=class extends Fm{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new s4({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};g([x({readOnly:!0})],bl.prototype,"cache",null),g([x({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],bl.prototype,"axis",void 0),g([x({type:["rotation"],json:{type:["rotationInfo"]}})],bl.prototype,"type",void 0),g([x({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],bl.prototype,"rotationType",void 0),g([x({type:String,json:{write:!0}})],bl.prototype,"valueExpressionTitle",void 0),g([De("web-scene","valueExpressionTitle")],bl.prototype,"writeValueExpressionTitleWebScene",null),bl=s4=g([K("esri.renderers.visualVariables.RotationVariable")],bl);const gL=bl;var o4;let md=o4=class extends ve{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new o4({label:this.label,size:this.size,value:this.value})}};g([x({type:String,json:{write:!0}})],md.prototype,"label",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],md.prototype,"size",void 0),g([x({type:Number,json:{write:!0}})],md.prototype,"value",void 0),md=o4=g([K("esri.renderers.visualVariables.support.SizeStop")],md);const rie=md;var a4;let rb=a4=class extends fL{constructor(){super(...arguments),this.customValues=null}clone(){return new a4({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};g([x({type:[Number],json:{write:!0}})],rb.prototype,"customValues",void 0),rb=a4=g([K("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],rb);const nie=rb;var Hl,wr;function a0(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function am(e){return e!=null&&!isNaN(e)&&isFinite(e)}function vL(e){return e.valueExpression?Hl.Expression:e.field&&typeof e.field=="string"?Hl.Field:Hl.Unknown}function sie(e,t){const i=t||vL(e),r=e.valueUnit||"unknown";return i===Hl.Unknown?wr.Constant:e.stops?wr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?wr.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?wr.Proportional:wr.Additive:wr.Identity:wr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Hl||(Hl={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(wr||(wr={}));function a7(e){return new ot({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const bL=a7(fi),Sw=a7(Bl),Mw=a7(Ah),oie=new ot({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${fi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function z5e(e){return e&&(ef(e)||e===Sw)?Sw:e&&(tf(e)||e===Mw)?Mw:bL}function l7(e){return e&&(ef(e)||e===Sw)?Bl:e&&(tf(e)||e===Mw)?Ah:fi}function V5e(e){return oM(e)?Bl:aM(e)?Ah:fi}const G5e=39.37,aie=fi.radius*Math.PI/200,wL=/UNIT\[([^\]]+)\]\]$/i,fp=J,_L=/UNIT\[([^\]]+)\]/i,lie=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),uie=Jr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),oa=e=>e*e,mu=e=>e*e*e,lm={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:oa(.001)},"square-centimeters":{inBaseUnits:oa(.01)},"square-decimeters":{inBaseUnits:oa(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:oa(1e3)},"square-inches":{inBaseUnits:oa(.0254)},"square-feet":{inBaseUnits:oa(.3048)},"square-yards":{inBaseUnits:oa(.9144)},"square-miles":{inBaseUnits:oa(1609.344)},"square-us-feet":{inBaseUnits:oa(1200/3937)},acres:{inBaseUnits:.0015625*oa(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*mu(.001)},"cubic-centimeters":{inBaseUnits:1e3*mu(.01)},"cubic-decimeters":{inBaseUnits:1e3*mu(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*mu(1e3)},"cubic-inches":{inBaseUnits:1e3*mu(.0254)},"cubic-feet":{inBaseUnits:1e3*mu(.3048)},"cubic-yards":{inBaseUnits:1e3*mu(.9144)},"cubic-miles":{inBaseUnits:1e3*mu(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},hie=(()=>{const e={};for(const t in lm)for(const i in lm[t].units)e[i]=t;return e})();function cie(e,t,i){return e*lm[i].units[t].inBaseUnits}function pie(e,t,i){return e/lm[i].units[t].inBaseUnits}const xL=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],die=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function l4(e){const t=hie[e];if(!t)throw new Error("unknown type");return t}function b8(e,t=null){return t=t||l4(e),lm[t].baseUnit===e}function Gt(e,t,i){if(t===i)return e;const r=l4(t);if(r!==l4(i))throw new Error("incompatible units");const s=b8(t,r)?e:cie(e,t,r);return b8(i,r)?s:pie(s,i,r)}function SL(e,t){const i=Gt(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function ML(e,t){const i=Gt(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function EL(e,t){const i=Gt(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function TL(e,t){const i=Gt(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function fie(e,t){const i=Gt(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function yie(e,t){const i=Gt(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function $L(e,t,i){return Gt(e,t,"meters")/(i*Math.PI/180)}function IL(e){return uie.fromJSON(e.toLowerCase())||null}function D0(e){if(e&&typeof e=="object"&&!VJ(e))return 1;const t=mf(e);return t>1e5?1:t}function AL(e){return mf(e)>=(e instanceof ot?l7(e).metersPerDegree:1e5)?"meters":jm(e)}function mf(e,t=fi.metersPerDegree){return Gr(mie(e,!0),t)}function mie(e,t=!1){let i,r,s=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,r=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(r=e)),i){if(oM(i))return Bl.metersPerDegree;if(aM(i))return Ah.metersPerDegree;s=fp.values[fp[i]],!s&&t&&lie.has(i)&&(s=aie)}else r&&(OL(r)?s=w8(wL.exec(r),s):CL(r)&&(s=w8(_L.exec(r),s)));return s}function w8(e,t){return e&&e[1]?kL(e[1]):t}function kL(e){return parseFloat(e.split(",")[1])}function jm(e){let t,i,r=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)r=fp.units[fp[t]];else if(i){const s=OL(i)?wL:CL(i)?_L:null;if(s){const h=s.exec(i);h&&h[1]&&(r=vie(h[1]))}}return Y(r)?IL(r):null}function U5e(e){const t=jm(e);return oe(t)||!xL.includes(t)?null:t}function q5e(e){const t=AL(e);return oe(t)||!xL.includes(t)?null:t}function B5e(e){const t=jm(e);return oe(t)?null:die.get(t)}function CL(e){return/^GEOCCS/i.test(e)}function OL(e){return/^PROJCS/i.test(e)}const gie=1e-7;function vie(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!fp.units.includes(i)){const r=kL(e);i=null;const s=fp.values;for(let h=0;h<s.length;++h)if(Math.abs(r-s[h])<gie){i=fp.units[h];break}}return i}function bie(e){const t=jm(e);if(oe(t))return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function H5e(e){var s,h,y;const t="metric";if(oe(e))return t;const i=e.map,r=i&&"portalItem"in i?(s=i.portalItem)==null?void 0:s.portal:null;if(r)switch((y=(h=r==null?void 0:r.user)==null?void 0:h.units)!=null?y:r.units){case t:return t;case"english":return"imperial"}return Gr(bie(e.spatialReference),t)}const PL={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},NL={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},wie=Jr()(PL),_ie=Jr()(NL);Jr()({...PL,...NL});const H2={inches:Gt(1,"meters","inches"),feet:Gt(1,"meters","feet"),"us-feet":Gt(1,"meters","us-feet"),yards:Gt(1,"meters","yards"),miles:Gt(1,"meters","miles"),"nautical-miles":Gt(1,"meters","nautical-miles"),millimeters:Gt(1,"meters","millimeters"),centimeters:Gt(1,"meters","centimeters"),decimeters:Gt(1,"meters","decimeters"),meters:Gt(1,"meters","meters"),kilometers:Gt(1,"meters","kilometers"),"decimal-degrees":1/$L(1,"meters",fi.radius)},Oh=Le.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),_8=new Zn,nb=Math.PI,RL=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function LL(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Oh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",h=s?null:t,y=h&&h.attributes;let f=s?t:null;const w=r.field,{ipData:S,hasExpression:E}=r.cache;let A=r.cache.compiledFunc;if(!w&&!E){const F=r.stops;return F&&F[0]&&F[0].color}if(typeof f!="number")if(E){if(oe(i)||oe(i.arcade))return void Oh.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},V=i.arcade.arcadeUtils,U=V.getViewInfo(F),X=V.createExecContext(h,U);if(!A){const re=V.createSyntaxTree(r.valueExpression);A=V.createFunction(re),r.cache.compiledFunc=A}f=V.executeFunction(A,X)}else y&&(f=y[w]);const P=r.normalizationField,N=y?parseFloat(y[P]):void 0;if(f!=null&&(!P||s||!isNaN(N)&&N!==0)){isNaN(N)||s||(f/=N);const F=u7(f,S);if(F){const V=F[0],U=F[1],X=V===U?r.stops[V].color:rt.blendColors(r.stops[V].color,r.stops[U].color,F[2],Y(i)?i.color:void 0);return new rt(X)}}}function FL(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(F=>F.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Oh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",h=s?null:t,y=h&&h.attributes;let f=s?t:null;const w=r.field,{ipData:S,hasExpression:E}=r.cache;let A=r.cache.compiledFunc;if(!w&&!E){const F=r.stops;return F&&F[0]&&F[0].opacity}if(typeof f!="number")if(E){if(oe(i)||oe(i.arcade))return void Oh.error("Use of arcade expressions requires an arcade context");const F={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},V=i.arcade.arcadeUtils,U=V.getViewInfo(F),X=V.createExecContext(h,U);if(!A){const re=V.createSyntaxTree(r.valueExpression);A=V.createFunction(re),r.cache.compiledFunc=A}f=V.executeFunction(A,X)}else y&&(f=y[w]);const P=r.normalizationField,N=y?parseFloat(y[P]):void 0;if(f!=null&&(!P||s||!isNaN(N)&&N!==0)){isNaN(N)||s||(f/=N);const F=u7(f,S);if(F){const V=F[0],U=F[1];if(V===U)return r.stops[V].opacity;{const X=r.stops[V].opacity;return X+(r.stops[U].opacity-X)*F[2]}}}}function jL(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(N=>N.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Oh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",h=s==="heading"&&r.rotationType==="arithmetic"?90:0,y=s==="heading"&&r.rotationType==="arithmetic"?-1:1,f=typeof t=="number"?null:t,w=f&&f.attributes,S=r.field,{hasExpression:E}=r.cache;let A=r.cache.compiledFunc,P=0;if(!S&&!E)return P;if(E){if(oe(i)||oe(i.arcade))return void Oh.error("Use of arcade expressions requires an arcade context");const N={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},F=i.arcade.arcadeUtils,V=F.getViewInfo(N),U=F.createExecContext(f,V);if(!A){const X=F.createSyntaxTree(r.valueExpression);A=F.createFunction(X),r.cache.compiledFunc=A}P=F.executeFunction(A,U)}else w&&(P=w[S]||0);return P=typeof P!="number"||isNaN(P)?null:h+y*P,P}function xie(e,t,i){const r=typeof t=="number",s=r?null:t,h=s&&s.attributes;let y=r?t:null;const{isScaleDriven:f}=e.cache;let w=e.cache.compiledFunc;if(f){const E=Y(i)?i.scale:void 0,A=Y(i)?i.view:void 0;y=E==null||A==="3d"?Sie(e):E}else if(!r)switch(e.inputValueType){case Hl.Expression:{if(oe(i)||oe(i.arcade))return void Oh.error("Use of arcade expressions requires an arcade context");const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,P=A.getViewInfo(E),N=A.createExecContext(s,P);if(!w){const F=A.createSyntaxTree(e.valueExpression);w=A.createFunction(F),e.cache.compiledFunc=w}y=A.executeFunction(w,N);break}case Hl.Field:h&&(y=h[e.field]);break;case Hl.Unknown:y=null}if(!am(y))return null;if(r||!e.normalizationField)return y;const S=h?parseFloat(h[e.normalizationField]):null;return am(S)&&S!==0?y/S:null}function Sie(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function W2(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(h=>h.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Oh.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=zL(xie(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Wn(e,t,i){return e==null?null:a0(e)?W2(e,t,i):am(e)?e:null}function DL(e,t,i){return am(i)&&e>i?i:am(t)&&e<t?t:e}function Mie(e,t,i,r){return e+(Wn(t.minSize,i,r)||t.minDataValue)}function Eie(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),Wn(s,t,i)}function Tie(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),h=Wn(t.minSize,i,r),y=Wn(t.maxSize,i,r),f=Y(r)?r.shape:void 0;if(e<=t.minDataValue)return h;if(e>=t.maxDataValue)return y;if(t.scaleBy==="area"&&f){const w=f==="circle",S=w?nb*(h/2)**2:h*h,E=S+s*((w?nb*(y/2)**2:y*y)-S);return w?2*Math.sqrt(E/nb):Math.sqrt(E)}return h+s*(y-h)}function $ie(e,t,i,r){const s=Y(r)?r.shape:void 0,h=e/t.minDataValue,y=Wn(t.minSize,i,r),f=Wn(t.maxSize,i,r);let w=null;return w=s==="circle"?2*Math.sqrt(h*(y/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(h*y**2):h*y,DL(w,y,f)}function Iie(e,t,i,r,s){const[h,y,f]=u7(e,s);if(h===y)return Wn(t.stops[h].size,i,r);{const w=Wn(t.stops[h].size,i,r);return w+(Wn(t.stops[y].size,i,r)-w)*f}}function Aie(e,t,i,r){const s=(Y(r)&&r.resolution?r.resolution:1)*H2[t.valueUnit],h=Wn(t.minSize,i,r),y=Wn(t.maxSize,i,r),{valueRepresentation:f}=t;let w=null;return w=f==="area"?2*Math.sqrt(e/nb)/s:f==="radius"||f==="distance"?2*e/s:e/s,DL(w,h,y)}function zL(e,t,i,r,s){switch(t.transformationType){case wr.Additive:return Mie(e,t,i,r);case wr.Constant:return Eie(t,i,r);case wr.ClampedLinear:return Tie(e,t,i,r);case wr.Proportional:return $ie(e,t,i,r);case wr.Stops:return Iie(e,t,i,r,s);case wr.RealWorldSize:return Aie(e,t,i,r);case wr.Identity:return e;case wr.Unknown:return null}}function kie(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let h=Wn(e.minSize,_8,s),y=Wn(e.maxSize,_8,s);if(h!=null||y!=null){if(h>y){const f=y;y=h,h=f}return{minSize:h,maxSize:y}}}function Cie(e,t,i){if(!e.visualVariables)return;const r=[],s=[],h=[],y=[],f=[];for(const w of e.visualVariables)switch(w.type){case"color":s.push(w);break;case"opacity":h.push(w);break;case"rotation":f.push(w);break;case"size":y.push(w)}return s.forEach(w=>{const S=LL(w,t,i);r.push({variable:w,value:S})}),h.forEach(w=>{const S=FL(w,t,i);r.push({variable:w,value:S})}),f.forEach(w=>{const S=jL(w,t,i);r.push({variable:w,value:S})}),y.forEach(w=>{const S=W2(w,t,i);r.push({variable:w,value:S})}),r.filter(w=>w.value!=null)}function u7(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,h)=>e<s?(r=h,!0):(i=h,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function Oie(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const h=s.useSymbolValue?"symbol-value":W2(s,t,i);switch(s.axis){case"width":r[0]=h;break;case"depth":r[1]=h;break;case"height":r[2]=h;break;case"width-and-depth":r[0]=h,r[1]=h;break;case"all":case void 0:case null:r[0]=h,r[1]=h,r[2]=h;break;default:s.axis}}return r}const h7=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Oie,getColor:LL,getOpacity:FL,getRotationAngle:jL,getSize:W2,getSizeForValue:zL,getSizeFromNumberOrVariable:Wn,getSizeRangeAtScale:kie,getVisualVariableValues:Cie,viewScaleRE:RL},Symbol.toStringTag,{value:"Module"}));var u4;const Zp=Le.getLogger("esri.renderers.visualVariables.SizeVariable"),Sg=new lt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),h4=new lt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function x8(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Dt(e):e.type==="size"?a0(e)?e:(delete(e={...e}).type,new zt(e)):void 0}function S8(e,t,i){if(typeof e!="object")return e;const r=new zt;return r.read(e,i),r}let zt=u4=class extends Fm{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:RL.test(this.valueExpression)}}set expression(e){Zp.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){a0(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),a0(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return vL(this)}set maxDataValue(e){e&&this.stops&&(Zp.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Zp.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return x8(e)}readMaxSize(e,t,i){return S8(e,t,i)}set minDataValue(e){e&&this.stops&&(Zp.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Zp.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return x8(e)}readMinSize(e,t,i){return S8(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Zp.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return sie(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,h=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new ne("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:h+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?h4.read(e):null}clone(){return new u4({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:a0(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:a0(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===wr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===wr.Stops){const e=this.stops,t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};g([x({readOnly:!0})],zt.prototype,"cache",null),g([x({type:Sg.apiValues,json:{type:Sg.jsonValues,origins:{"web-map":{read:!1}},read:Sg.read,write:Sg.write}})],zt.prototype,"axis",void 0),g([x({type:String,value:null,json:{read:!1}})],zt.prototype,"expression",null),g([x()],zt.prototype,"index",null),g([x({type:String,readOnly:!0})],zt.prototype,"inputValueType",null),g([x({type:nie,json:{write:!0}})],zt.prototype,"legendOptions",void 0),g([x({type:Number,value:null,json:{write:!0}})],zt.prototype,"maxDataValue",null),g([x({type:Number,value:null,json:{write:!0}})],zt.prototype,"maxSize",null),g([Mt("maxSize")],zt.prototype,"castMaxSize",null),g([je("maxSize")],zt.prototype,"readMaxSize",null),g([x({type:Number,value:null,json:{write:!0}})],zt.prototype,"minDataValue",null),g([x({type:Number,value:null,json:{write:!0}})],zt.prototype,"minSize",null),g([Mt("minSize")],zt.prototype,"castMinSize",null),g([je("minSize")],zt.prototype,"readMinSize",null),g([x({type:String,json:{write:!0}})],zt.prototype,"normalizationField",void 0),g([x({readOnly:!0})],zt.prototype,"arcadeRequired",null),g([x({type:String})],zt.prototype,"scaleBy",void 0),g([x({type:[rie],value:null,json:{write:!0}})],zt.prototype,"stops",null),g([x({type:["outline"],json:{write:!0}})],zt.prototype,"target",void 0),g([x({type:String,readOnly:!0})],zt.prototype,"transformationType",null),g([x({type:["size"],json:{type:["sizeInfo"]}})],zt.prototype,"type",void 0),g([x({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],zt.prototype,"useSymbolValue",void 0),g([x({type:String,json:{write:!0}})],zt.prototype,"valueExpression",void 0),g([je("valueExpression",["valueExpression","expression"])],zt.prototype,"readValueExpression",null),g([De("web-scene","valueExpression")],zt.prototype,"writeValueExpressionWebScene",null),g([x({type:["radius","diameter","area","width","distance"],json:{write:!0}})],zt.prototype,"valueRepresentation",void 0),g([x({type:h4.apiValues,json:{write:h4.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],zt.prototype,"valueUnit",void 0),g([je("valueUnit")],zt.prototype,"readValueUnit",null),zt=u4=g([K("esri.renderers.visualVariables.SizeVariable")],zt);const VL=zt,Pie=Le.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),Nie={color:yL,size:VL,opacity:mL,rotation:gL},Rie=new lt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Lie=/^\[([^\]]+)\]$/i;let sb=class extends qe{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,h=r&&r.match(Lie),y=h&&h[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:y})),e)return e.map(f=>{const w=Rie.read(f.type),S=Nie[w];S||(Pie.warn(`Unknown variable type: ${w}`),i&&i.messages&&i.messages.push(new _n("visual-variable:unsupported",`visualVariable of type '${w}' is not supported`,{definition:f,context:i})));const E=new S;return E.read(f,i),E})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};g([x()],sb.prototype,"visualVariables",null),sb=g([K("esri.renderers.visualVariables.VisualVariableFactory")],sb);const Fie=sb,jie={base:Fm,key:"type",typeMap:{opacity:mL,color:yL,rotation:gL,size:VL}},gf=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Fie}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,h){r[s]=this._vvFactory.writeVariables(i,h)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(h=>h.type===i&&(typeof r=="string"?h.target===r:r!==!1||!h.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const h of s)h&&(h.field&&Zs(i,r,h.field),h.normalizationField&&Zs(i,r,h.normalizationField),h.valueExpression&&await xn(i,r,h.valueExpression))}};return g([x({types:[jie],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),g([je("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),g([De("visualVariables")],t.prototype,"writeVisualVariables",null),t=g([K("esri.renderers.mixins.VisualVariablesMixin")],t),t},Zf={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Die(e,t=Zf){var f,w;if(!e)return{symbol:null};const{retainId:i=Zf.retainId,ignoreDrivers:r=Zf.ignoreDrivers,hasLabelingContext:s=Zf.hasLabelingContext,retainCIM:h=Zf.retainCIM}=t;let y;if(L0(e)||e instanceof zp)y=e.clone();else if(e.type==="cim"){const S=(w=(f=e.data)==null?void 0:f.symbol)==null?void 0:w.type;if(S!=="CIMPointSymbol")return{error:new ne("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${S||"unknown"}' is unsupported in 3D`,{symbol:e})};y=h?e.clone():Qc.fromCIMSymbol(e)}else if(e instanceof Yn)y=z2.fromSimpleLineSymbol(e);else if(e instanceof Jo)y=Qc.fromSimpleMarkerSymbol(e);else if(e instanceof V2)y=Qc.fromPictureMarkerSymbol(e);else if(e instanceof Ja)y=Lm.fromSimpleFillSymbol(e);else{if(!(e instanceof yf))return{error:new ne("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=s?D2.fromTextSymbol(e):Qc.fromTextSymbol(e)}if(i&&y.type!=="cim"&&(y.id=e.id),r&&L0(y))for(let S=0;S<y.symbolLayers.length;++S)y.symbolLayers.getItemAt(S)._ignoreDrivers=!0;return{symbol:y}}const zie=["building-scene","integrated-mesh","point-cloud","scene"];function Ew(e,t,i,r){const s=GL(e,{},{context:r,isLabelSymbol:!1});Y(s)&&(t[i]=s)}function M8(e,t,i,r){const s=GL(e,{},{context:r,isLabelSymbol:!0});Y(s)&&(t[i]=s)}function E8(e){return e instanceof ff||e instanceof zp}function GL(e,t,i){var f;if(oe(e))return null;const{context:r,isLabelSymbol:s}=i,h=r==null?void 0:r.origin,y=r==null?void 0:r.messages;if(h==="web-scene"&&!E8(e)){const w=Die(e,{retainCIM:!0,hasLabelingContext:s});return Y(w.symbol)?w.symbol.write(t,r):(y==null||y.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:w.error})),null)}return(h==="web-map"||h==="portal-item"&&!zie.includes((f=r==null?void 0:r.layer)==null?void 0:f.type))&&E8(e)?(y==null||y.push(new ne("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function W5e(e,t){return Nee(e,null,t)}const Dm={types:UR,json:{write:{writer:Ew},origins:{"web-scene":{types:K$,write:{writer:Ew},read:{reader:Z0({types:K$})}}}}},UL={types:{base:En,key:"type",typeMap:{"simple-fill":zn.typeMap["simple-fill"],"picture-fill":zn.typeMap["picture-fill"],"polygon-3d":zn.typeMap["polygon-3d"]}},json:{write:{writer:Ew},origins:{"web-scene":{type:Lm,write:{writer:Ew}}}}};var c4;let Du=c4=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new c4({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};g([x({type:String,json:{write:!0}})],Du.prototype,"description",void 0),g([x({type:String,json:{write:!0}})],Du.prototype,"label",void 0),g([x({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Du.prototype,"minValue",void 0),g([x({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Du.prototype,"maxValue",void 0),g([x(Dm)],Du.prototype,"symbol",void 0),Du=c4=g([K("esri.renderers.support.ClassBreakInfo")],Du);const Tw=Du;var p4;const Mg=Le.getLogger("esri.renderers.ClassBreaksRenderer"),qL="log",ob="percent-of-total",ab="field",Eg=new lt({esriNormalizeByLog:qL,esriNormalizeByPercentOfTotal:ob,esriNormalizeByField:ab}),Vie=ji(Tw);let nr=p4=class extends gf(su){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const h=new Tw;return h.read(s,i),h.minValue==null&&(h.minValue=r),h.maxValue==null&&(h.maxValue=h.minValue),r=h.maxValue,h})}writeClassBreakInfos(e,t,i,r){const s=e.map(h=>h.write({},r));this._areClassBreaksConsecutive()&&s.forEach(h=>delete h.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Mg.error(".field: field must be a string value"),null):Tm(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&ab||i&&ob||null,t&&i&&Mg.warn("warning: both normalizationField and normalizationTotal are set!")):e!==ab&&e!==ob||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new Tw({minValue:e,maxValue:t,symbol:qR(i)}):Vie(de(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(oe(t)||oe(t.arcade))&&Mg.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(oe(t)||oe(t.arcade))&&(i={...i,arcade:await qa()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(oe(t)||oe(t.arcade)))return void Mg.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(oe(t)||oe(t.arcade))){const s=await qa(),{arcadeUtils:h}=s;h.hasGeometryOperations(this.valueExpression)&&await h.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new p4({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:de(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:de(this.visualVariables),legendOptions:de(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),xn(e,t,this.valueExpression)];Zs(e,t,this.field),Zs(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:h}=Gr(t,{});let y=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const f=h.arcadeUtils;if(!y){const S=f.createSyntaxTree(this.valueExpression);y=f.createFunction(S),this._compiledValueExpression.compiledFunction=y}this._compiledValueExpression.valueExpression=this.valueExpression;const w=f.executeFunction(y,f.createExecContext(e,f.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(w)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const h=this.normalizationTotal,y=parseFloat(i[this.normalizationField]);if(r===qL)s=Math.log(s)*Math.LOG10E;else if(r!==ob||isNaN(h)){if(r===ab&&!isNaN(y)){if(isNaN(s)||isNaN(y))return-1;s/=y}}else s=s/h*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};g([x(UL)],nr.prototype,"backgroundFillSymbol",void 0),g([x({type:[Tw]})],nr.prototype,"classBreakInfos",void 0),g([je("classBreakInfos")],nr.prototype,"readClassBreakInfos",null),g([De("classBreakInfos")],nr.prototype,"writeClassBreakInfos",null),g([x({type:String,json:{write:!0}})],nr.prototype,"defaultLabel",void 0),g([x(Dm)],nr.prototype,"defaultSymbol",void 0),g([x({type:String,json:{write:!0}})],nr.prototype,"field",void 0),g([Mt("field")],nr.prototype,"castField",null),g([x({type:Boolean})],nr.prototype,"isMaxInclusive",void 0),g([x({type:w0,json:{write:!0}})],nr.prototype,"legendOptions",void 0),g([x({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],nr.prototype,"minValue",null),g([x({type:String,json:{write:!0}})],nr.prototype,"normalizationField",void 0),g([x({type:Number,cast:e=>Bs(e),json:{write:!0}})],nr.prototype,"normalizationTotal",void 0),g([x({type:Eg.apiValues,value:null,json:{type:Eg.jsonValues,read:Eg.read,write:Eg.write}})],nr.prototype,"normalizationType",null),g([Xe({classBreaks:"class-breaks"})],nr.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],nr.prototype,"valueExpression",void 0),g([x({type:String,json:{write:!0}})],nr.prototype,"valueExpressionTitle",void 0),nr=p4=g([K("esri.renderers.ClassBreaksRenderer")],nr);const BL=nr,k_=-3;var ah;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(ah||(ah={}));class J5e{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class HL{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new dp,this._users=new dp}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==i&&this._notifyRemove(t,h.entry,ah.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,ah.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const y=1+Math.max(s,k_)-k_;this._db.set(t,{entry:i,size:r,lifetime:y,lives:y}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const h=this._notifyRemove(t,i,ah.SOME);if(!(Y(h)&&h>0))return void this._db.delete(t);r=h}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((y,f)=>{const w=y.lifetime;r[w]=(r[w]||0)+y.size,this._users.forAll(S=>{const E=S.namespace;if(f.startsWith(E)){const A=i[E]||0;i[E]=A+y.size}})});const s={};this._users.forAll(y=>{const f=y.namespace;if(!isNaN(y.hitRate)&&y.hitRate>0){const w=i[f]||0;i[f]=w,s[f]=Math.round(100*y.hitRate)+"%"}else s[f]="0%"});const h=Object.keys(i);h.sort((y,f)=>i[f]-i[y]),h.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+s[y]);for(let y=r.length-1;y>=0;--y){const f=r[y];f&&(t["Priority "+(y+k_-1)]=Math.round(f/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,ah.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,ah.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(h=>{if(t.startsWith(h[0])){const y=h[1](i,r);return typeof y=="number"&&(s=y),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,ah.SOME);Y(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class Gie{constructor(t,i){this._storage=new HL,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const T8=Le.getLogger("esri.renderers.support.DictionaryLoader"),Uie={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class c7{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Gie(100),this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(N){if(Br(N))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const N of this._symbolFields){const F=this.fieldMap[N];if(F&&t.attributes[F]!=null){const V=""+t.attributes[F];s[N]=V}else s[N]=""}const h=r(s,i);if(!h||typeof h!="string")return null;const y=J6(h).toString(),f=this._symbolCache.get(y);if(f)return f.catch(()=>{this._symbolCache.pop(y)}),f;const w=h.split(";"),S=[],E=[];for(const N of w)if(N)if(N.includes("po:")){const F=N.substr(3).split("|");if(F.length===3){const V=F[0],U=F[1];let X=F[2];if(U==="DashTemplate")X=X.split(" ").map(re=>Number(re));else if(U==="Color"){const re=new rt(X).toRgba();X=[re[0],re[1],re[2],255*re[3]]}else X=Number(X);E.push({primitiveName:V,propertyName:U,value:X})}}else if(N.includes("|")){for(const F of N.split("|"))if(this._itemNames.has(F)){S.push(F);break}}else this._itemNames.has(N)&&S.push(N);const A=!Y(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",P=this._cimPartsToCIMSymbol(S,E,A,i);return this._symbolCache.put(y,P,1),P}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void T8.error("no valid URL!");const i=ni(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:Y(t)?t.signal:null}),[{data:r}]=await Promise.all([i,qa()]);if(!r)throw this._dictionaryPromise=null,new ne("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,h=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=h.symbol;const y={};if(this.config){const w=this.config;for(const S in w)y[S]=w[S]}if(h.configuration)for(const w of h.configuration)y.hasOwnProperty(w.name)||(y[w.name]=w.value);const f=[];if(Y(t)&&t.fields&&this.fieldMap)for(const w of this._symbolFields){const S=this.fieldMap[w],E=t.fields.filter(A=>A.name===S);E.length>0&&f.push({...E[0],name:w})}return this._dictionaryPromise=MY(s,Y(t)?t.spatialReference:null,f,y).then(w=>{const S={scale:0};return(E,A)=>{const P=w.repurposeFeature({geometry:null,attributes:E});return S.scale=Y(A)?A.scale:void 0,w.evaluate({$feature:P,$view:S})}}).catch(w=>(T8.error("Creating dictinoary expression failed:",w),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,r,s){const h=new Array(t.length);for(let w=0;w<t.length;w++)h[w]=this._getSymbolPart(t[w],s);const y=await Promise.all(h),f=this.fieldMap;for(const w of y)WL(w,f);return new Pm({data:this._combineSymbolParts(y,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(h=>h.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=ni(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,s);try{return(await s).data}catch(h){throw this._ongoingRequests.delete(t),h}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s={...t[0]};if(t.length>1){s.symbolLayers=[];for(const h of t){const y=h;s.symbolLayers.unshift(...y.symbolLayers)}}return r&&(s.callout=Uie),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function WL(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&qie(s,t)}}function qie(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":WL(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}const K5e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:c7},Symbol.toStringTag,{value:"Module"}));var d4;let _o=d4=class extends gf(su){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new c7(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new d4({config:de(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:de(this.fieldMap),url:de(this.url),visualVariables:de(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await xn(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};g([x({type:c7})],_o.prototype,"_loader",null),g([x({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],_o.prototype,"config",void 0),g([x({type:Object,json:{write:!0}})],_o.prototype,"fieldMap",void 0),g([x({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],_o.prototype,"scaleExpression",void 0),g([De("scaleExpression")],_o.prototype,"writeData",null),g([x({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],_o.prototype,"scaleExpressionTitle",void 0),g([x({type:String,json:{write:!0}})],_o.prototype,"url",void 0),g([De("visualVariables")],_o.prototype,"writeVisualVariables",null),_o=d4=g([K("esri.renderers.DictionaryRenderer")],_o);const Bie=_o;function We(e,t){const i=t?{...t,source:e}:e;return x({aliasOf:i})}var f4;const Hie=Le.getLogger("esri.renderers.support.AttributeColorInfo");let wl=f4=class extends ve{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Hie.error(".field: field must be a string value"),null):Tm(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new f4({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([x({type:rt,json:{type:[Number],write:!0}})],wl.prototype,"color",void 0),g([x({type:String,json:{write:!0}})],wl.prototype,"field",void 0),g([Mt("field")],wl.prototype,"castField",null),g([x({type:String,json:{write:!0}})],wl.prototype,"label",void 0),g([x({type:String,json:{write:!0}})],wl.prototype,"valueExpression",void 0),g([x({type:String,json:{write:!0}})],wl.prototype,"valueExpressionTitle",void 0),wl=f4=g([K("esri.renderers.support.AttributeColorInfo")],wl);const JL=wl;var y4;let lb=y4=class extends ve{constructor(){super(...arguments),this.unit=null}clone(){return new y4({unit:this.unit})}};g([x({type:String,json:{write:!0}})],lb.prototype,"unit",void 0),lb=y4=g([K("esri.renderers.support.DotDensityLegendOptions")],lb);const Wie=lb;var m4;let Yr=m4=class extends gf(su){constructor(e){super(e),this.attributes=null,this.backgroundColor=new rt([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Yn,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Ja({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new m4({attributes:de(this.attributes),backgroundColor:de(this.backgroundColor),dotBlendingEnabled:de(this.dotBlendingEnabled),dotShape:de(this.dotShape),dotSize:de(this.dotSize),dotValue:de(this.dotValue),legendOptions:de(this.legendOptions),outline:de(this.outline),referenceScale:de(this.referenceScale),visualVariables:de(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await xn(e,t,i.valueExpression),i.field&&e.add(i.field)}};g([x({type:[JL],json:{write:!0}})],Yr.prototype,"attributes",void 0),g([x({type:rt,json:{write:!0}})],Yr.prototype,"backgroundColor",void 0),g([x({type:Boolean}),We("dotBlendingEnabled")],Yr.prototype,"blendDots",void 0),g([x({type:Boolean,json:{write:!0}})],Yr.prototype,"dotBlendingEnabled",void 0),g([x({type:String,json:{write:!1}})],Yr.prototype,"dotShape",void 0),g([x({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Yr.prototype,"dotSize",void 0),g([x({type:Wie,json:{write:!0}})],Yr.prototype,"legendOptions",void 0),g([x({type:Yn,json:{default:null,write:!0}})],Yr.prototype,"outline",void 0),g([x({type:Number,json:{write:!0}})],Yr.prototype,"dotValue",void 0),g([x({type:Number}),We("dotValue")],Yr.prototype,"referenceDotValue",void 0),g([x({type:Number,json:{write:!0}})],Yr.prototype,"referenceScale",void 0),g([x({type:Number,json:{write:!0}})],Yr.prototype,"seed",void 0),g([Xe({dotDensity:"dot-density"})],Yr.prototype,"type",void 0),Yr=m4=g([K("esri.renderers.DotDensityRenderer")],Yr);const Jie=Yr;var g4;let W1=g4=class extends ve{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new g4({color:this.color,ratio:this.ratio})}};g([x({type:rt,json:{type:[li],default:null,write:!0}})],W1.prototype,"color",void 0),g([x({type:Number,json:{write:!0}})],W1.prototype,"ratio",void 0),W1=g4=g([K("esri.renderers.support.HeatmapColorStop")],W1);const ky=W1;let gd=class extends Wi(ve){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};g([x({type:String,json:{write:!0}})],gd.prototype,"minLabel",void 0),g([x({type:String,json:{write:!0}})],gd.prototype,"maxLabel",void 0),g([x({type:String,json:{write:!0}})],gd.prototype,"title",void 0),gd=g([K("esri.renderers.support.HeatmapLegendOptions")],gd);function J2(){return[0,0,0,0]}function Kie(e){return[e[0],e[1],e[2],e[3]]}function vf(e,t,i,r){return[e,t,i,r]}function Yie(e){const t=J2(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Zie(e,t){return new Float64Array(e,t,4)}function KL(){return J2()}function YL(){return vf(1,1,1,1)}function ZL(){return vf(1,0,0,0)}function XL(){return vf(0,1,0,0)}function QL(){return vf(0,0,1,0)}function eF(){return vf(0,0,0,1)}const Xie=KL(),Qie=YL(),ere=ZL(),tre=XL(),ire=QL(),rre=eF();Object.freeze(Object.defineProperty({__proto__:null,create:J2,clone:Kie,fromValues:vf,fromArray:Yie,createView:Zie,zeros:KL,ones:YL,unitX:ZL,unitY:XL,unitZ:QL,unitW:eF,ZEROS:Xie,ONES:Qie,UNIT_X:ere,UNIT_Y:tre,UNIT_Z:ire,UNIT_W:rre},Symbol.toStringTag,{value:"Module"}));const p7=2.4;function nre(e){return Ba(e*p7)}function sre(e){return YN(e)/p7}function ore(e,t,i,r){let{color:s,ratio:h}=t,{color:y,ratio:f}=i;f===h&&(f===1?h-=1e-6:f+=1e-6);const w=Kn((r-h)/(f-h),0,1);BN(e,s.toArray(),y.toArray(),w)}function Y5e(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:f})=>f>=0&&f<=1).sort((f,w)=>f.ratio-w.ratio).map(({color:f,ratio:w})=>({color:f,ratio:Math.max(w,.001)})),e.length<1)return i;let r=e[0],s=e[0],h=1;const y=J2();for(let f=0;f<512;f++){const w=(f+.5)/512;for(;w>s.ratio&&h<e.length;)r=s,s=e[h++];ore(y,r,s,w),i.set(y,4*f)}return i}function Z5e(e,t,i,r){const{radius:s,fieldOffset:h,field:y}=t,f=Math.round(YN(s)),w=new Float64Array(i*r);let S,E=Number.NEGATIVE_INFINITY;const A=ure(y,h),P=new Set;for(const N of e){const F=N.getCursor();for(;F.next();){const V=F.getObjectId();if(P.has(V))continue;P.add(V);const U=F.readLegacyPointGeometry(),X=128;if(U.x<-X||U.x>=i+X||U.y<-X||U.y>r+X)continue;const re=+A(F),he=Math.max(0,Math.round(U.x)-f),pe=Math.max(0,Math.round(U.y)-f),ae=Math.min(r,Math.round(U.y)+f),le=Math.min(i,Math.round(U.x)+f);for(let Te=pe;Te<ae;Te++)for(let Ee=he;Ee<le;Ee++){const Oe=Te*i+Ee,Ae=lre(U.x-Ee,U.y-Te,f);S=w[Oe]+=Ae*re,S>E&&(E=S)}}}return{matrix:w.buffer,max:E}}function X5e(e,t,i,r,s,h){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const y=e.getImageData(0,0,t,t);i&&r&&y.data.set(new Uint8ClampedArray(are(t,i,r,s,h))),e.putImageData(y,0,0)}function are(e,t,i,r,s){const h=new Uint32Array(e*e),y="buffer"in t?t:new Float64Array(t),f="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),w=f.length/(s-r);for(let S=0;S<y.length;S++){const E=y[S],A=Math.floor((E-r)*w);h[S]=f[Kn(A,0,f.length-1)]}return h.buffer}function lre(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Q5e(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function ure(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var v4;const hre=Le.getLogger("esri.renderers.HeatmapRenderer");function $8(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:h,minPixelIntensity:y,...f}=e;return f}}return e}let yr=v4=class extends su{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new ky({ratio:0,color:new rt("rgba(255, 140, 0, 0)")}),new ky({ratio:.75,color:new rt("rgba(255, 140, 0, 1)")}),new ky({ratio:.9,color:new rt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return $8(e)}get blurRadius(){return sre(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",nre(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(p7**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||nn(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,X0(()=>{oJ(hre,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=$8(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,Ba(256));return new Jo({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Zs(e,t,i),r&&typeof r=="string"&&await xn(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new v4({colorStops:de(this.colorStops),field:this.field,legendOptions:de(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};g([x({type:dL,json:{write:!1}})],yr.prototype,"authoringInfo",void 0),g([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"blurRadius",null),g([x({type:[ky],json:{write:!0}})],yr.prototype,"colorStops",void 0),g([x({type:String,json:{write:!0}})],yr.prototype,"field",void 0),g([x({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],yr.prototype,"fieldOffset",void 0),g([x({type:gd,json:{write:!0}})],yr.prototype,"legendOptions",void 0),g([x({type:Number,json:{write:!0}})],yr.prototype,"maxDensity",void 0),g([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"maxPixelIntensity",null),g([x({type:Number,json:{write:!0}})],yr.prototype,"minDensity",void 0),g([x({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],yr.prototype,"minPixelIntensity",null),g([x({type:Number,cast:Dt,json:{write:!0}})],yr.prototype,"radius",void 0),g([x({type:Number,range:{min:0},json:{default:0,write:!0}})],yr.prototype,"referenceScale",void 0),g([Xe({heatmap:"heatmap"})],yr.prototype,"type",void 0),g([x({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],yr.prototype,"valueExpression",void 0),g([x({type:String})],yr.prototype,"valueExpressionTitle",void 0),g([x({readOnly:!0})],yr.prototype,"_pixelIntensityToDensity",null),yr=v4=g([K("esri.renderers.HeatmapRenderer")],yr);const tF=yr;let qc=class extends Wi(ve){constructor(){super(...arguments),this.color=new rt([0,0,0,0]),this.label=null,this.threshold=0}};g([x({type:rt,json:{write:!0}})],qc.prototype,"color",void 0),g([x({type:String,json:{write:!0}})],qc.prototype,"label",void 0),g([x({type:Number,range:{min:0,max:1},json:{write:!0}})],qc.prototype,"threshold",void 0),qc=g([K("esri.renderers.support.OthersCategory")],qc);let ub=class extends Wi(ve){constructor(){super(...arguments),this.title=null}};g([x({type:String,json:{write:!0}})],ub.prototype,"title",void 0),ub=g([K("esri.renderers.support.PieChartLegendOptions")],ub);let rs=class extends gf(Wi(su)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new rt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new qc,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Jo({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await xn(e,t,i.valueExpression),i.field&&e.add(i.field)}};g([x({type:[JL],json:{write:!0}})],rs.prototype,"attributes",void 0),g([x({type:Ja,json:{default:null,write:!0}})],rs.prototype,"backgroundFillSymbol",void 0),g([x({type:rt,json:{write:!0}})],rs.prototype,"defaultColor",void 0),g([x({type:String,json:{write:!0}})],rs.prototype,"defaultLabel",void 0),g([x({type:Number,range:{min:0,max:1},json:{write:!0}})],rs.prototype,"holePercentage",void 0),g([x({type:qc,json:{write:!0}})],rs.prototype,"othersCategory",void 0),g([x({type:ub,json:{write:!0}})],rs.prototype,"legendOptions",void 0),g([x({type:Yn,json:{default:null,write:!0}})],rs.prototype,"outline",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],rs.prototype,"size",void 0),g([Xe({pieChart:"pie-chart"})],rs.prototype,"type",void 0),rs=g([K("esri.renderers.PieChartRenderer")],rs);const cre=rs;var b4;let wc=b4=class extends gf(su){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new b4({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:de(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};g([x({type:String,json:{write:!0}})],wc.prototype,"description",void 0),g([x({type:String,json:{write:!0}})],wc.prototype,"label",void 0),g([x(Dm)],wc.prototype,"symbol",void 0),g([Xe({simple:"simple"})],wc.prototype,"type",void 0),wc=b4=g([K("esri.renderers.SimpleRenderer")],wc);const d7=wc,pre=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function w4(e){return e instanceof qe}function I8(e){return e instanceof Je?Object.keys(e.items):w4(e)?nn(e).keys():e?Object.keys(e):[]}function Tg(e,t){return e instanceof Je?e.items[t]:e[t]}function dre(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Cy(e){return e?e.declaredClass:null}function iF(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=I8(e),s=I8(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||dre(e,t))return{type:"complete",oldValue:e,newValue:t};const h=s.filter(A=>!r.includes(A)),y=r.filter(A=>!s.includes(A)),f=r.filter(A=>s.includes(A)&&Tg(e,A)!==Tg(t,A)).concat(h,y).sort(),w=Cy(e);if(w&&pre.includes(w)&&f.length)return{type:"complete",oldValue:e,newValue:t};let S;const E=w4(e)&&w4(t);for(const A of f){const P=Tg(e,A),N=Tg(t,A);let F;if((E||typeof P!="function"&&typeof N!="function")&&P!==N&&(P!=null||N!=null)){if(i&&i[A]&&typeof i[A]=="function")F=i[A](P,N);else if(P instanceof Date&&N instanceof Date){if(P.getTime()===N.getTime())continue;F={type:"complete",oldValue:P,newValue:N}}else F=typeof P=="object"&&typeof N=="object"&&Cy(P)===Cy(N)?iF(P,N):{type:"complete",oldValue:P,newValue:N};Y(F)&&(Y(S)?S.diff[A]=F:S={type:"partial",diff:{[A]:F}})}}return S}function fre(e,t){if(oe(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const h=r.diff[s];if(!h)return!1;r=h}}return!0}function exe(e,t){for(const i of t)if(fre(e,i))return!0;return!1}function yre(e,t){if(!(typeof e=="function"||typeof t=="function"||oe(e)&&oe(t)))return oe(e)||oe(t)||typeof e=="object"&&typeof t=="object"&&Cy(e)!==Cy(t)?{type:"complete",oldValue:e,newValue:t}:iF(e,t)}function $g(e){if(oe(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!$g(i))return!1;for(const i of t.removed)if(!$g(i))return!1;for(const i of t.changed)if(!$g(i))return!1;return!0}case"partial":for(const t in e.diff)if(!$g(e.diff[t]))return!1;return!0}}var _4;let zu=_4=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new _4({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};g([x({type:String,json:{write:!0}})],zu.prototype,"description",void 0),g([x({type:String,json:{write:!0}})],zu.prototype,"label",void 0),g([x(Dm)],zu.prototype,"symbol",void 0),g([x({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],zu.prototype,"value",void 0),g([Mt("value")],zu.prototype,"castValue",null),zu=_4=g([K("esri.renderers.support.UniqueValueInfo")],zu);const $w=zu,mre=()=>!!we("enable-feature:force-wosr"),C_={};async function gre(e,t){try{return{data:(await _re(e,t)).data,baseUrl:NQ(e),styleUrl:e}}catch(i){return km(i),null}}function vre(e,t,i){const r=Y(t.portal)?t.portal:ur.getDefault();let s;const h=`${r.url} - ${r.user&&r.user.username} - ${e}`;return C_[h]||(C_[h]=bre(e,r,i).then(y=>(s=y,y.fetchData())).then(y=>({data:y,baseUrl:s.itemUrl,styleName:e}))),C_[h]}function bre(e,t,i){return t.load(i).then(()=>{const r=new Dl({disableExtraQuery:!0,query:`owner:${A8} AND type:${k8} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let s=null;const h=e.toLowerCase();if(r&&Array.isArray(r)){for(const y of r)if(y.typeKeywords.some(f=>f.toLowerCase()===h)&&y.type===k8&&y.owner===A8){s=y;break}}if(!s)throw new ne("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function wre(e,t,i){return e.styleUrl?gre(e.styleUrl,i):e.styleName?vre(e.styleName,t,i):Promise.reject(new ne("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function txe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ixe(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!mre()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function _re(e,t){const i={responseType:"json",query:{f:"json"},...t};return ni(Xs(e),i)}const A8="esri_en",k8="Style",rxe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var J1;const Jh=Le.getLogger("esri.renderers.UniqueValueRenderer"),xre=ji($w);let Pi=J1=class extends gf(su){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let h=0;h<i.length;h++){const y=t.find(f=>f.value===i[h].value);y?yre(y,i[h])?(s.changed.push({type:"complete",oldValue:y,newValue:i[h]}),r=!0):s.unchanged.push({oldValue:y,newValue:i[h]}):(s.added.push(i[h]),r=!0)}for(let h=0;h<t.length;h++)i.find(y=>y.value===t[h].value)||(s.removed.push(t[h]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Tm(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new ne("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Jh.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||ur.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=cf(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Nm(e.styleUrl,r))}set uniqueValueInfos(e){this.styleOrigin?Jh.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Jh.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?xre(e):new $w({value:e,symbol:qR(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)Jh.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(oe(t)||oe(t.arcade))&&(i={...i,arcade:await qa()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(oe(t)||oe(t.arcade)))return void Jh.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(oe(i)||oe(i.arcade))){const s=await qa(),{arcadeUtils:h}=s;h.hasGeometryOperations(this.valueExpression)&&await h.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new J1({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:de(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:de(this.visualVariables),legendOptions:de(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:de(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=de(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(de(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),xn(e,t,this.valueExpression)];Zs(e,t,this.field),Zs(e,t,this.field2),Zs(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return wre(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new zp({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new $w({value:i.name,symbol:r});t.push(s),this._valueInfoMap[i.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:h}=Gr(t,{});let y=this._cache.compiledFunc;const f=h.arcadeUtils;if(!y){const S=f.createSyntaxTree(this.valueExpression);y=f.createFunction(S),this._cache.compiledFunc=y}const w=f.executeFunction(y,f.createExecContext(e,f.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[w+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,h=this.field3,y=[];t&&y.push(i[t]),s&&y.push(i[s]),h&&y.push(i[h]),r=y.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new J1(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||ur.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Jh.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new J1(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Jh.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};g([x({readOnly:!0})],Pi.prototype,"_cache",null),g([Xe({uniqueValue:"unique-value"})],Pi.prototype,"type",void 0),g([x(UL)],Pi.prototype,"backgroundFillSymbol",void 0),g([x({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Pi.prototype,"field",void 0),g([Mt("field")],Pi.prototype,"castField",null),g([De("field")],Pi.prototype,"writeField",null),g([x({type:String,json:{write:!0}})],Pi.prototype,"field2",void 0),g([x({type:String,json:{write:!0}})],Pi.prototype,"field3",void 0),g([x({type:String,json:{write:!0}})],Pi.prototype,"valueExpression",void 0),g([x({type:String,json:{write:!0}})],Pi.prototype,"valueExpressionTitle",void 0),g([x({type:w0,json:{write:!0}})],Pi.prototype,"legendOptions",void 0),g([x({type:String,json:{write:!0}})],Pi.prototype,"defaultLabel",void 0),g([x(NO({...Dm},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Pi.prototype,"defaultSymbol",null),g([x({type:String,json:{write:!0}})],Pi.prototype,"fieldDelimiter",void 0),g([x({type:ur,readOnly:!0})],Pi.prototype,"portal",void 0),g([je("portal",["styleName"])],Pi.prototype,"readPortal",null),g([x({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Pi.prototype,"styleOrigin",void 0),g([je("styleOrigin",["styleName","styleUrl"])],Pi.prototype,"readStyleOrigin",null),g([De("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Pi.prototype,"writeStyleOrigin",null),g([x({type:[$w],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Pi.prototype,"uniqueValueInfos",null),Pi=J1=g([K("esri.renderers.UniqueValueRenderer")],Pi);const f7=Pi,K2={key:"type",base:su,typeMap:{heatmap:tF,simple:d7,"unique-value":f7,"class-breaks":BL,"dot-density":Jie,dictionary:Bie,"pie-chart":cre},errorContext:"renderer"},Sre={key:"type",base:su,typeMap:{simple:d7,"unique-value":f7,"class-breaks":BL,heatmap:tF},errorContext:"renderer"};function nxe(e,t){return rF(e,null,t)}const Mre=Z0({types:K2});function rF(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new _n("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Mre(e,t,i):null}async function Ere(e,t){const{WhereClause:i}=await ge(()=>Promise.resolve().then(()=>tU),void 0);return i.create(e,t)}function Tre(e,t){return Y(e)?Y(t)?`(${e}) AND (${t})`:e:t}var x4;let _c=x4=class extends ve{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new x4({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};g([x({type:String,json:{write:!0}})],_c.prototype,"expression",void 0),g([x({type:String,json:{write:!0}})],_c.prototype,"name",void 0),g([x({type:["boolean","date","number","string"],json:{write:!0}})],_c.prototype,"returnType",void 0),g([x({type:String,json:{write:!0}})],_c.prototype,"title",void 0),_c=x4=g([K("esri.form.ExpressionInfo")],_c);const $re=_c;let xc=class extends ve{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};g([x({type:String,json:{write:!0}})],xc.prototype,"description",void 0),g([x({type:String,json:{write:!0}})],xc.prototype,"label",void 0),g([x()],xc.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],xc.prototype,"visibilityExpression",void 0),xc=g([K("esri.form.elements.Element")],xc);const z0=xc;var S4;let hb=S4=class extends ve{constructor(e){super(e),this.type=null}clone(){return new S4({type:this.type})}};g([x({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],hb.prototype,"type",void 0),hb=S4=g([K("esri.form.elements.inputs.AttachmentInput")],hb);const Ire=hb;var M4;let Sc=M4=class extends z0{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new M4({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};g([x({type:String,json:{write:!0}})],Sc.prototype,"attachmentKeyword",void 0),g([x({type:Boolean,json:{write:!0}})],Sc.prototype,"editable",void 0),g([x({type:Ire,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Sc.prototype,"input",void 0),g([x({type:["attachment"],json:{read:!1,write:!0}})],Sc.prototype,"type",void 0),Sc=M4=g([K("esri.form.elements.AttachmentElement")],Sc);const C8=Sc;let cb=class extends ve{constructor(e){super(e),this.type=null}};g([x()],cb.prototype,"type",void 0),cb=g([K("esri.form.elements.inputs.Input")],cb);const bf=cb;let K1=class extends bf{constructor(e){super(e),this.maxLength=null,this.minLength=0}};g([x({type:Number,json:{write:!0}})],K1.prototype,"maxLength",void 0),g([x({type:Number,json:{write:!0}})],K1.prototype,"minLength",void 0),K1=g([K("esri.form.elements.inputs.TextInput")],K1);const y7=K1;var E4;let pb=E4=class extends y7{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new E4({maxLength:this.maxLength,minLength:this.minLength})}};g([x({type:["barcode-scanner"],json:{read:!1,write:!0}})],pb.prototype,"type",void 0),pb=E4=g([K("esri.form.elements.inputs.BarcodeScannerInput")],pb);const Are=pb;var T4;let vd=T4=class extends bf{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new T4({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};g([x({type:String,json:{write:!0}})],vd.prototype,"noValueOptionLabel",void 0),g([x({type:Boolean,json:{write:!0}})],vd.prototype,"showNoValueOption",void 0),g([x({type:["combo-box"],json:{read:!1,write:!0}})],vd.prototype,"type",void 0),vd=T4=g([K("esri.form.elements.inputs.ComboBoxInput")],vd);const kre=vd;var $4;function O8(e){return e!=null?new Date(e):null}function P8(e){return e?e.getTime():null}let xo=$4=class extends bf{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return O8(t.max)}writeMax(e,t){t.max=P8(e)}readMin(e,t){return O8(t.min)}writeMin(e,t){t.min=P8(e)}clone(){return new $4({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};g([x({type:Boolean,json:{write:!0}})],xo.prototype,"includeTime",void 0),g([x({type:Date,json:{type:Number,write:!0}})],xo.prototype,"max",void 0),g([je("max")],xo.prototype,"readMax",null),g([De("max")],xo.prototype,"writeMax",null),g([x({type:Date,json:{type:Number,write:!0}})],xo.prototype,"min",void 0),g([je("min")],xo.prototype,"readMin",null),g([De("min")],xo.prototype,"writeMin",null),g([x({type:["datetime-picker"],json:{read:!1,write:!0}})],xo.prototype,"type",void 0),xo=$4=g([K("esri.form.elements.inputs.DateTimePickerInput")],xo);const Cre=xo;var I4;let bd=I4=class extends bf{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new I4({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};g([x({type:String,json:{write:!0}})],bd.prototype,"noValueOptionLabel",void 0),g([x({type:Boolean,json:{write:!0}})],bd.prototype,"showNoValueOption",void 0),g([x({type:["radio-buttons"],json:{read:!1,write:!0}})],bd.prototype,"type",void 0),bd=I4=g([K("esri.form.elements.inputs.RadioButtonsInput")],bd);const Ore=bd;var A4;let wd=A4=class extends bf{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new A4({offValue:this.offValue,onValue:this.onValue})}};g([x({type:[String,Number],json:{write:!0}})],wd.prototype,"offValue",void 0),g([x({type:[String,Number],json:{write:!0}})],wd.prototype,"onValue",void 0),g([x({type:["switch"],json:{read:!1,write:!0}})],wd.prototype,"type",void 0),wd=A4=g([K("esri.form.elements.inputs.SwitchInput")],wd);const Pre=wd;var k4;let db=k4=class extends y7{constructor(e){super(e),this.type="text-area"}clone(){return new k4({maxLength:this.maxLength,minLength:this.minLength})}};g([x({type:["text-area"],json:{read:!1,write:!0}})],db.prototype,"type",void 0),db=k4=g([K("esri.form.elements.inputs.TextAreaInput")],db);const Nre=db;var C4;let fb=C4=class extends y7{constructor(e){super(e),this.type="text-box"}clone(){return new C4({maxLength:this.maxLength,minLength:this.minLength})}};g([x({type:["text-box"],json:{read:!1,write:!0}})],fb.prototype,"type",void 0),fb=C4=g([K("esri.form.elements.inputs.TextBoxInput")],fb);const Rre=fb,Lre={base:bf,key:"type",typeMap:{"barcode-scanner":Are,"combo-box":kre,"datetime-picker":Cre,"radio-buttons":Ore,switch:Pre,"text-area":Nre,"text-box":Rre}};var O4;let Y1=O4=class extends ve{constructor(e){super(e),this.name=null,this.code=null}clone(){return new O4({name:this.name,code:this.code})}};g([x({type:String,json:{write:!0}})],Y1.prototype,"name",void 0),g([x({type:[String,Number],json:{write:!0}})],Y1.prototype,"code",void 0),Y1=O4=g([K("esri.layers.support.CodedValue")],Y1);const Fre=new lt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Z1=class extends ve{constructor(e){super(e),this.name=null,this.type=null}};g([x({type:String,json:{write:!0}})],Z1.prototype,"name",void 0),g([Xe(Fre)],Z1.prototype,"type",void 0),Z1=g([K("esri.layers.support.Domain")],Z1);const Y2=Z1;var P4;let X1=P4=class extends Y2{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new P4({codedValues:de(this.codedValues),name:this.name})}};g([x({type:[Y1],json:{write:!0}})],X1.prototype,"codedValues",void 0),g([Xe({codedValue:"coded-value"})],X1.prototype,"type",void 0),X1=P4=g([K("esri.layers.support.CodedValueDomain")],X1);const nF=X1;var N4;let yb=N4=class extends Y2{constructor(e){super(e),this.type="inherited"}clone(){return new N4}};g([Xe({inherited:"inherited"})],yb.prototype,"type",void 0),yb=N4=g([K("esri.layers.support.InheritedDomain")],yb);const sF=yb;var R4;let _d=R4=class extends Y2{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new R4({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};g([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],_d.prototype,"maxValue",void 0),g([x({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],_d.prototype,"minValue",void 0),g([Xe({range:"range"})],_d.prototype,"type",void 0),_d=R4=g([K("esri.layers.support.RangeDomain")],_d);const oF=_d,aF={key:"type",base:Y2,typeMap:{range:oF,"coded-value":nF,inherited:sF}};function m7(e){if(!e||!e.type)return null;switch(e.type){case"range":return oF.fromJSON(e);case"codedValue":return nF.fromJSON(e);case"inherited":return sF.fromJSON(e)}return null}var L4;let js=L4=class extends z0{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new L4({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};g([x({types:aF,json:{read:{reader:m7},write:!0}})],js.prototype,"domain",void 0),g([x({type:Boolean,json:{write:!0}})],js.prototype,"editable",void 0),g([x({type:String,json:{write:!0}})],js.prototype,"editableExpression",void 0),g([x({type:String,json:{write:!0}})],js.prototype,"fieldName",void 0),g([x({type:String,json:{write:!0}})],js.prototype,"hint",void 0),g([x({types:Lre,json:{read:{source:"inputType"},write:{target:"inputType"}}})],js.prototype,"input",void 0),g([x({type:String,json:{write:!0}})],js.prototype,"requiredExpression",void 0),g([x({type:String,json:{read:!1,write:!0}})],js.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],js.prototype,"valueExpression",void 0),js=L4=g([K("esri.form.elements.FieldElement")],js);const N8=js;var F4;let _l=F4=class extends z0{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new F4({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:de(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};g([x({type:Number,json:{write:!0}})],_l.prototype,"displayCount",void 0),g([x({type:["list"],json:{write:!0}})],_l.prototype,"displayType",void 0),g([x({type:Boolean,json:{write:!0}})],_l.prototype,"editable",void 0),g([x({type:[_N],json:{write:!0}})],_l.prototype,"orderByFields",void 0),g([x({type:Number,json:{write:!0}})],_l.prototype,"relationshipId",void 0),g([x({type:["relationship"],json:{read:!1,write:!0}})],_l.prototype,"type",void 0),_l=F4=g([K("esri.form.elements.RelationshipElement")],_l);const R8=_l;function lF(e){return{typesWithGroup:{base:z0,key:"type",typeMap:{attachment:C8,field:N8,group:e,relationship:R8}},typesWithoutGroup:{base:z0,key:"type",typeMap:{attachment:C8,field:N8,relationship:R8}}}}function uF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function hF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function cF(e,t,i=!0){return e?e.map(r=>Va(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var j4;let Ia=j4=class extends z0{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return cF(e,O_,!1)}readElements(e,t){return uF(t.formElements,O_,!1)}writeElements(e,t){t.formElements=hF(e,O_,!1)}clone(){return new j4({description:this.description,elements:de(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};g([x({json:{write:!0}})],Ia.prototype,"elements",void 0),g([Mt("elements")],Ia.prototype,"castElements",null),g([je("elements",["formElements"])],Ia.prototype,"readElements",null),g([De("elements")],Ia.prototype,"writeElements",null),g([x({type:["collapsed","expanded"],json:{write:!0}})],Ia.prototype,"initialState",void 0),g([x({type:String,json:{read:!1,write:!0}})],Ia.prototype,"type",void 0),Ia=j4=g([K("esri.form.elements.GroupElement")],Ia);const O_=lF(Ia),jre=Ia;var D4;const P_=lF(jre);let ga=D4=class extends ve{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return cF(e,P_)}readElements(e,t){return uF(t.formElements,P_)}writeElements(e,t){t.formElements=hF(e,P_)}clone(){return new D4({description:this.description,expressionInfos:de(this.expressionInfos),elements:de(this.elements),title:this.title})}};g([x({type:String,json:{write:!0}})],ga.prototype,"description",void 0),g([x({json:{write:!0}})],ga.prototype,"elements",void 0),g([Mt("elements")],ga.prototype,"castElements",null),g([je("elements",["formElements"])],ga.prototype,"readElements",null),g([De("elements")],ga.prototype,"writeElements",null),g([x({type:[$re],json:{write:!0}})],ga.prototype,"expressionInfos",void 0),g([x({type:String,json:{write:!0}})],ga.prototype,"title",void 0),ga=D4=g([K("esri.form.FormTemplate")],ga);const Dre=ga;var Q1;const Iw=Jr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),pF=Iw.jsonValues.slice();B6(pF,"orthometric");const Oy=Jr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let So=Q1=class extends ve{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return Iw.write(e,t,i)}readHeightModel(e,t,i){return Iw.read(e)||(i&&i.messages&&i.messages.push(zre(e,{context:i})),null)}readHeightUnit(e,t,i){return Oy.read(e)||(i&&i.messages&&i.messages.push(L8(e,{context:i})),null)}readHeightUnitService(e,t,i){return IL(e)||Oy.read(e)||(i&&i.messages&&i.messages.push(L8(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Q1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=AL(t);return new Q1({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Q1;return t.read(e,{origin:"web-scene"}),t}};function L8(e,t){return new _n("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function zre(e,t){return new _n("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}g([x({type:Iw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:pF,default:"ellipsoidal"}}}})],So.prototype,"heightModel",void 0),g([De("web-scene","heightModel")],So.prototype,"writeHeightModel",null),g([je(["web-scene","service"],"heightModel")],So.prototype,"readHeightModel",null),g([x({type:Oy.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Oy.jsonValues,write:Oy.write}}}})],So.prototype,"heightUnit",void 0),g([je("web-scene","heightUnit")],So.prototype,"readHeightUnit",null),g([je("service","heightUnit")],So.prototype,"readHeightUnitService",null),g([x({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],So.prototype,"vertCRS",void 0),g([je("service","vertCRS",["vertCRS","ellipsoid","geoid"])],So.prototype,"readVertCRS",null),So=Q1=g([K("esri.geometry.HeightModelInfo")],So);const zm=So;class Aw{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var wn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(wn||(wn={}));let Vre=0;function dF(){return Vre++}function Gre(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function kw(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function fF(e,t,i,r){if(t.type===wn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==wn.INVOKE&&t.type!==wn.RESPONSE)return void e.postMessage(t);let s;Gre(i)?(s=F8(i.transferList),t.data=i.result):(s=F8(r),t.data=i),s?e.postMessage(t,s):e.postMessage(t)}function um(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function F8(e){if(!e||!e.length)return null;if(we("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!Ure(i));return t.length?t:null}function Ure(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const qre={statsWorker:()=>ge(()=>import("./statsWorker.deb0a6f1.js"),[]),geometryEngineWorker:()=>ge(()=>import("./geometryEngineWorker.d6c38223.js"),["assets/geometryEngineWorker.d6c38223.js","assets/geometryEngineJSON.16e57e06.js"]),CSVSourceWorker:()=>ge(()=>import("./CSVSourceWorker.9f86754c.js"),["assets/CSVSourceWorker.9f86754c.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/clientSideDefaults.c00f6aa9.js"]),EdgeProcessingWorker:()=>ge(()=>import("./EdgeProcessingWorker.78e21e46.js"),["assets/EdgeProcessingWorker.78e21e46.js","assets/deduplicate.c1f3fafb.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),ElevationSamplerWorker:()=>ge(()=>import("./ElevationSamplerWorker.9caaab77.js"),["assets/ElevationSamplerWorker.9caaab77.js","assets/PooledRBush.84072bba.js","assets/georeference.285b4e0b.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/axisAngleDegrees.16b78055.js","assets/quat.2f83a288.js","assets/BufferView.9de22bcf.js","assets/vec33.3d48e3ad.js","assets/projection.10917aac.js"]),FeatureServiceSnappingSourceWorker:()=>ge(()=>import("./FeatureServiceSnappingSourceWorker.9551487d.js"),["assets/FeatureServiceSnappingSourceWorker.9551487d.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js"]),GeoJSONSourceWorker:()=>ge(()=>import("./GeoJSONSourceWorker.1ae2dcc3.js"),["assets/GeoJSONSourceWorker.1ae2dcc3.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/geojson.043c05e4.js","assets/clientSideDefaults.c00f6aa9.js","assets/sourceUtils.1daba736.js"]),LercWorker:()=>ge(()=>import("./LercWorker.c562a039.js"),[]),MemorySourceWorker:()=>ge(()=>import("./MemorySourceWorker.20bd4f10.js"),["assets/MemorySourceWorker.20bd4f10.js","assets/objectIdUtils.773397d7.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/clientSideDefaults.c00f6aa9.js","assets/sourceUtils.1daba736.js"]),PBFDecoderWorker:()=>ge(()=>import("./PBFDecoderWorker.1603d12d.js"),["assets/PBFDecoderWorker.1603d12d.js","assets/dehydratedFeatures.98692fb8.js"]),Pipeline:()=>ge(()=>import("./Pipeline.a7385c9e.js"),["assets/Pipeline.a7385c9e.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/FeatureStore2D.7ac5731e.js","assets/CircularArray.4337cbba.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/definitions.6dca4f7b.js","assets/visualVariablesUtils.c0539cad.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/visualVariablesUtils.4d2d720c.js","assets/ogcFeatureUtils.f3712e3f.js","assets/geojson.043c05e4.js","assets/clientSideDefaults.c00f6aa9.js"]),PointCloudWorker:()=>ge(()=>import("./PointCloudWorker.f49c8527.js"),["assets/PointCloudWorker.f49c8527.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/vec3f32.0772c8d8.js","assets/PointCloudUniqueValueRenderer.ec37245b.js","assets/VertexAttribute.5551e0d8.js"]),RasterWorker:()=>ge(()=>import("./RasterWorker.a5600b45.js"),["assets/RasterWorker.a5600b45.js","assets/pixelUtils.8ce71a56.js","assets/RasterSymbolizer.2bc486ec.js","assets/colorUtils.9445c15b.js","assets/rasterProjectionHelper.786fac0c.js","assets/dataUtils.ed353a73.js","assets/utils.c2ad47a8.js"]),SceneLayerSnappingSourceWorker:()=>ge(()=>import("./SceneLayerSnappingSourceWorker.a67642ca.js"),["assets/SceneLayerSnappingSourceWorker.a67642ca.js","assets/lineSegment.901d4e43.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/sphere.f1597b20.js","assets/Octree.5f16cd20.js","assets/plane.f3b639d8.js","assets/EdgeProcessingWorker.78e21e46.js","assets/deduplicate.c1f3fafb.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),SceneLayerWorker:()=>ge(()=>import("./SceneLayerWorker.2fb9a344.js"),["assets/SceneLayerWorker.2fb9a344.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js"]),WFSSourceWorker:()=>ge(()=>import("./WFSSourceWorker.64ea096e.js"),["assets/WFSSourceWorker.64ea096e.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/geojson.043c05e4.js","assets/sourceUtils.1daba736.js","assets/wfsUtils.988c9a24.js","assets/xmlUtils.986ddba5.js"]),WorkerTileHandler:()=>ge(()=>import("./WorkerTileHandler.19bf1d32.js"),["assets/WorkerTileHandler.19bf1d32.js","assets/enums.2a1fad7f.js","assets/GeometryUtils.814cb798.js","assets/BidiEngine.ec67919b.js","assets/config.40d47db8.js","assets/StyleDefinition.5774ff26.js","assets/enums.05a6ea95.js","assets/Geometry.b68345ae.js","assets/TileClipper.4cec25ed.js","assets/definitions.6dca4f7b.js","assets/GeometryUtils.8166011b.js","assets/StyleRepository.d0eb5412.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/colorUtils.9445c15b.js","assets/earcut.d30cbec0.js"])},{CLOSE:j8,ABORT:D8,INVOKE:z8,RESPONSE:Xf,OPEN_PORT:V8,ON:Bre}=wn,Hre=2;class Wre{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===wn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class qn{constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Wre(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new qn(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),qn.clients.set(s,r),i.port2}static loadWorker(t){const i=qre[t];return i?i():Promise.resolve(null)}close(){this._post({type:j8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,h=r&&r.transferList;if(!this._port)return Promise.reject(new ne("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=dF();return new Promise((f,w)=>{if(eo(s))return this._processWork(),void w(bi());const S=to(s,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),Hn(A.abortHandle),this._post({type:D8,jobId:y}),w(bi()))}),E={resolve:f,reject:w,abortHandle:S,debugInfo:t};this._outJobs.set(y,E),this._post({type:z8,jobId:y,methodName:t,abortable:s!=null},i,h)})}on(t,i){const r=new MessageChannel;function s(h){i(h.data)}return this._port.postMessage({type:wn.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:wn.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:V8,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=Hre)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:s,deferred:h}=t;this.invoke(i,r,s).then(y=>h.resolve(y)).catch(y=>h.reject(y))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Hn(t.abortHandle),t.reject(bi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){Y(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=um(t);if(i)switch(i.type){case Xf:this._onResponseMessage(i);break;case z8:this._invokeQueue.push(i);break;case D8:this._onAbortMessage(i);break;case j8:this._onCloseMessage();break;case V8:this._onOpenPortMessage(i);break;case Bre:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&qn.clients.get(this)===t&&t.destroy(),qn.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:h}=t,y=h?new AbortController:null,f=this._inJobs;let w,S=this._client,E=S[i];try{if(!E&&i&&i.includes(".")){const A=i.split(".");for(let P=0;P<A.length-1;P++)S=S[A[P]],E=S[A[P+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);w=E.call(S,s,{client:this,signal:y?y.signal:null})}catch(A){return void this._post({type:Xf,jobId:r,error:kw(A)})}ru(w)?(f.set(r,{controller:y,promise:w}),w.then(A=>{f.has(r)&&(f.delete(r),this._post({type:Xf,jobId:r},A))},A=>{f.has(r)&&(f.delete(r),Br(A)||this._post({type:Xf,jobId:r,error:kw(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:Xf,jobId:r},w)}_onOpenPortMessage(t){new qn(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,h=>{i.postMessage(h)}),s=b2(t.port,"message",h=>{um(h).type===wn.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,h=this._outJobs;if(!h.has(i))return;const y=h.get(i);this._processWork(),h.delete(i),Hn(y.abortHandle),r?y.reject(ne.fromJSON(JSON.parse(r))):y.resolve(s)}_post(t,i,r){return fF(this._port,t,i,r)}}qn.kernelInfo={revision:xR,version:BM,buildDate:_R},qn.clients=new Map;const Jre=Le.getLogger("esri.core.workers.Connection");class Kre{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Aw}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let h=!0;const y=f=>{di(i.signal),h&&(h=!1,f())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let f=0;f<t.length;++f){const w=t[f];ru(w)?this._clientPromises[f]=w.then(S=>(this._clients[f]=new qn(S,i,()=>this._ongoingJobsQueue.pop()),y(r),this._clients[f]),()=>(y(s),null)):(this._clients[f]=new qn(w,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[f]=Promise.resolve(this._clients[f]),y(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let h=0;h<this._clientPromises.length;++h){const y=this._clientPromises[h];s[h]=y.then(f=>f.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(bi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let s=null;Array.isArray(r)?(Jre.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const h=Jl();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,deferred:h});for(let y=0;y<this._clientPromises.length;y++){const f=this._clients[y];f?f.jobAdded():this._clientPromises[y].then(w=>w.jobAdded())}return h.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>y2(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(h=>{i[s]=h.openPort(),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const yF=Le.getLogger("esri.intl");function Aa(e,t,i={}){const{format:r={}}=i;return za(e,s=>Yre(s,t,r))}function Yre(e,t,i){let r,s;const h=e.indexOf(":");if(h===-1?r=e.trim():(r=e.slice(0,h).trim(),s=e.slice(h+1).trim()),!r)return"";const y=Y0(r,t);if(y==null)return"";const f=i[s]||i[r];return f?Zre(y,f):s?Xre(y,s):g7(y)}function Zre(e,t){switch(t.type){case"date":return Kl(e,t.intlOptions);case"number":return io(e,t.intlOptions);default:return yF.warn("missing format descriptor for key {key}"),g7(e)}}function Xre(e,t){switch(t.toLowerCase()){case"dateformat":return Kl(e);case"numberformat":return io(e);default:return yF.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Kl(e):/^numberformat/i.test(t)?io(e):g7(e)}}function g7(e){switch(typeof e){case"string":return e;case"number":return io(e);case"boolean":return""+e;default:return e instanceof Date?Kl(e):""}}async function Qre(e,t,i,r){const s=t.exec(i);if(!s)throw new ne("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const h=s[1]?`${s[1]}/`:"",y=s[2],f=Qee(r),w=`${h}${y}.json`,S=f?`${h}${y}_${f}.json`:w;let E;try{E=await G8(e(S))}catch(A){if(S===w)throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{E=await G8(e(w))}catch(P){throw new ne("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return E}async function G8(e){if(Y(U8.fetchBundleAsset))return U8.fetchBundleAsset(e);const t=await ni(e,{responseType:"text"});return JSON.parse(t.data)}class ene{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?h=>new URL(h,new URL(r,window.location.href)).href:r instanceof URL?h=>new URL(h,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return Qre(this.getAssetUrl,this.matcher,t,i)}}function tne(e){return new ene(e)}const U8={};Xee(tne({pattern:"esri/",location:Ft}));const q8={};function ine(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function rne(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=q8.baseUrl),(i=q8.packages)==null||i.forEach(r=>{ine(t.packages,r)}),t}class nne{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class mb{constructor(){this._dispatcher=new nne,this._workerPostMessage({type:wn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){nw(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){nw(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=um(t);if(i&&i.type===wn.OPEN){const{modulePath:r,jobId:s}=i;let h=await qn.loadWorker(r);h||(h=await ge(()=>import(r),[]));const y=qn.connect(h);this._workerPostMessage({type:wn.OPENED,jobId:s,data:y})}}}const z4=Le.getLogger("esri.core.workers"),{HANDSHAKE:sne}=wn,one='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ig,Ag;const B8="Failed to create Worker. Fallback to execute module in main thread";async function ane(){if(!we("esri-workers")||(we("mozilla"),0))return H8(new mb);if(!Ig&&!Ag)try{const t=one.replace('"{CONFIGURATION}"',`'${lne()}'`);Ig=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Ag=t||{}}let e;if(Ig)try{e=new Worker(Ig,{name:"esri-worker-"+une++})}catch{z4.warn(B8,Ag),e=new mb}else z4.warn(B8,Ag),e=new mb;return H8(e)}async function H8(e){return new Promise(t=>{function i(s){const h=um(s);h&&h.type===sne&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),z4.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new mb).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function lne(){let e;if(Lt.default!=null){const s={...Lt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Lt));e.assetsPath=gs(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=bs(),e.has={"esri-csp-restrictions":we("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":we("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":we("esri-2d-query-centroid-enabled"),"featurelayer-pbf":we("featurelayer-pbf"),"featurelayer-simplify-thresholds":we("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":we("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":we("featurelayer-simplify-mobile-factor"),"esri-atomics":we("esri-atomics"),"esri-shared-array-buffer":we("esri-shared-array-buffer"),"esri-tiles-debug":we("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":we("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":we("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=gs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=gs(e.workers.workerPath):e.workers.workerPath=gs(Ft("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Lt.workers.loaderConfig,i=rne({baseUrl:t==null?void 0:t.baseUrl,locale:bs(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:BM,buildDate:_R,revision:xR};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let une=0;const hne=Le.getLogger("esri.core.workers"),{ABORT:W8,INVOKE:cne,OPEN:pne,OPENED:dne,RESPONSE:Qf}=wn;class v7{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),hne.error(r)})}static async create(t){const i=await ane();return new v7(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=dF();return new Promise((h,y)=>{const f={resolve:h,reject:y,abortHandle:iM(r,()=>{this._outJobs.delete(s),this._post({type:W8,jobId:s})})};this._outJobs.set(s,f),this._post({type:pne,jobId:s,modulePath:t})})}_onMessage(t){const i=um(t);if(i)switch(i.type){case dne:this._onOpenedMessage(i);break;case Qf:this._onResponseMessage(i);break;case W8:this._onAbortMessage(i);break;case cne:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:h}=t,y=h?new AbortController:null,f=this._inJobs,w=KQ[i];let S;try{if(typeof w!="function")throw new TypeError(`${i} is not a function`);S=w.call(null,s,{signal:y?y.signal:null})}catch(E){return void this._post({type:Qf,jobId:r,error:kw(E)})}ru(S)?(f.set(r,{controller:y,promise:S}),S.then(E=>{f.has(r)&&(f.delete(r),this._post({type:Qf,jobId:r},E))},E=>{f.has(r)&&(f.delete(r),E||(E={message:"Error encountered at method"+i}),Br(E)||this._post({type:Qf,jobId:r,error:kw(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:Qf,jobId:r},S)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Hn(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,h=this._outJobs.get(i);h&&(this._outJobs.delete(i),Hn(h.abortHandle),r?h.reject(ne.fromJSON(JSON.parse(r))):h.resolve(s))}_post(t,i,r){return fF(this.worker,t,i,r)}}let ep=we("esri-workers-debug")?1:we("host-browser")?navigator.hardwareConcurrency-1:0;ep||(ep=we("safari")&&we("mac")||we("trident")?7:2);let J8=0;const gb=[];function fne(){mF()}async function kg(e,t){const i=new Kre;return await i.open(e,t),i}async function yne(e,t={}){if(typeof e!="string")throw new ne("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(we("host-webworker")&&!we("esri-workers")&&(i="local"),i==="local"){let r=await qn.loadWorker(e);r||(r=await ge(()=>import(e),[])),di(t.signal);const s=t.client||r;return kg([qn.connect(r)],{...t,client:s})}if(await mF(),di(t.signal),i==="dedicated"){const r=J8++%ep;return kg([await gb[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,ep);if(r<ep){const s=new Array(r);for(let h=0;h<r;++h){const y=J8++%ep;s[h]=gb[y].open(e,t)}return kg(s,t)}}return kg(gb.map(r=>r.open(e,t)),t)}let Cg=null;async function mF(){if(Cg)return Cg;new AbortController;const e=[];for(let t=0;t<ep;t++){const i=v7.create(t).then(r=>(gb[t]=r,r));e.push(i)}return Cg=Promise.all(e),Cg}function K8(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function mne(e,t,i){if(!e&&!t||!i)return;const r=D0(i);Y8(e,i,r),Y8(t,i,r)}function Y8(e,t,i){if(e)for(const r of e)gne(r.geometry,t,i)}function gne(e,t,i){if(oe(e)||!e.spatialReference||ki(e.spatialReference,t))return;const r=D0(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)K8(e,e.rings,r);else if("paths"in e)K8(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}function gF(e,t,i){if(oe(t)||oe(i)||i.vcsWkid||ki(t,i))return null;const r=D0(t)/D0(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>vne(s,r);case"polyline":case"esriGeometryPolyline":return s=>wne(s,r);case"polygon":case"esriGeometryPolygon":return s=>bne(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>_ne(s,r);case"extent":case"esriGeometryExtent":return s=>xne(s,r);default:return null}}function vne(e,t){e&&e.z!=null&&(e.z*=t)}function bne(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function wne(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function _ne(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function xne(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function V4(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=gF(i.geometryType,t,e.outSpatialReference);if(!oe(r))for(const s of i.features)r(s.geometry)}const b7=new lt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var G4;const Sne=new lt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let cn=G4=class extends ve{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?Sne.fromJSON(i.fieldValueType):null}clone(){return new G4({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};g([x({type:String,json:{write:!0}})],cn.prototype,"alias",void 0),g([x({type:[String,Number],json:{write:{allowNull:!0}}})],cn.prototype,"defaultValue",void 0),g([x()],cn.prototype,"description",void 0),g([je("description")],cn.prototype,"readDescription",null),g([x({types:aF,json:{read:{reader:m7},write:!0}})],cn.prototype,"domain",void 0),g([x({type:Boolean,json:{write:!0}})],cn.prototype,"editable",void 0),g([x({type:li,json:{write:!0}})],cn.prototype,"length",void 0),g([x({type:String,json:{write:!0}})],cn.prototype,"name",void 0),g([x({type:Boolean,json:{write:!0}})],cn.prototype,"nullable",void 0),g([Xe(b7)],cn.prototype,"type",void 0),g([x()],cn.prototype,"valueType",void 0),g([je("valueType",["description"])],cn.prototype,"readValueType",null),cn=G4=g([K("esri.layers.support.Field")],cn);const Z2=cn;var U4;const q4=new lt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ir=U4=class extends ve{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const i=ot.fromJSON(t.spatialReference),r=[];for(let h=0;h<e.length;h++){const y=e[h],f=Zn.fromJSON(y),w=y.geometry&&y.geometry.spatialReference;Y(f.geometry)&&!w&&(f.geometry.spatialReference=i);const S=y.aggregateGeometries,E=f.aggregateGeometries;if(S&&Y(E))for(const A in E){const P=E[A],N=(s=S[A])==null?void 0:s.spatialReference;Y(P)&&!N&&(P.spatialReference=i)}r.push(f)}return r}writeGeometryType(e,t,i,r){if(e)return void q4.write(e,t,i,r);const{features:s}=this;if(s){for(const h of s)if(h&&Y(h.geometry))return void q4.write(h.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Ua(e);return!i&&t.spatialReference&&(r.spatialReference=ot.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&Y(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new U4(this.cloneProperties())}cloneProperties(){return de({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,h=S=>Math.round((S-r)/t),y=S=>Math.round((s-S)/i),f=this.features,w=this._getQuantizationFunction(this.geometryType,h,y);for(let S=0,E=f.length;S<E;S++)w(f[S].geometry)||(f.splice(S,1),S--,E--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[h,y]}=i,f=E=>E*h+r,w=E=>s-E*y,S=this._getHydrationFunction(e,f,w);for(const{geometry:E}of t)Y(E)&&S(E);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const h=[];for(let y=0,f=e.length;y<f;y++){const w=e[y];if(y>0){const S=t(w[0]),E=i(w[1]);S===r&&E===s||(h.push([S-r,E-s]),r=S,s=E)}else r=t(w[0]),s=i(w[1]),h.push([r,s])}return h.length>0?h:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=xh(r)?r.rings:r.paths,h=[];for(let y=0,f=s.length;y<f;y++){const w=s[y],S=this._quantizePoints(w,t,i);S&&h.push(S)}return h.length>0?(xh(r)?r.rings=h:r.paths=h,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=xh(r)?r.rings:r.paths;let h,y;for(let f=0,w=s.length;f<w;f++){const S=s[f];for(let E=0,A=S.length;E<A;E++){const P=S[E];E>0?(h+=P[0],y+=P[1]):(h=P[0],y=P[1]),P[0]=t(h),P[1]=i(y)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let h,y;for(let f=0,w=s.length;f<w;f++){const S=s[f];f>0?(h+=S[0],y+=S[1]):(h=S[0],y=S[1]),S[0]=t(h),S[1]=i(y)}}:void 0}};g([x({type:String,json:{write:!0}})],Ir.prototype,"displayFieldName",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ir.prototype,"exceededTransferLimit",void 0),g([x({type:[Zn],json:{write:!0}})],Ir.prototype,"features",void 0),g([je("features")],Ir.prototype,"readFeatures",null),g([x({type:[Z2],json:{write:!0}})],Ir.prototype,"fields",void 0),g([x({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:q4.read}}})],Ir.prototype,"geometryType",void 0),g([De("geometryType")],Ir.prototype,"writeGeometryType",null),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ir.prototype,"hasM",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ir.prototype,"hasZ",void 0),g([x({types:Rh,json:{write:!0}})],Ir.prototype,"queryGeometry",void 0),g([je("queryGeometry")],Ir.prototype,"readQueryGeometry",null),g([x({type:ot,json:{write:!0}})],Ir.prototype,"spatialReference",void 0),g([De("spatialReference")],Ir.prototype,"writeSpatialReference",null),g([x({json:{write:!0}})],Ir.prototype,"transform",void 0),Ir=U4=g([K("esri.rest.support.FeatureSet")],Ir),Ir.prototype.toJSON.isDefaultToJSON=!0;const X2=Ir,sxe=Object.freeze(Object.defineProperty({__proto__:null,default:X2},Symbol.toStringTag,{value:"Module"}));let Mne=0;const N_=Le.getLogger("esri.layers.graphics.sources.MemorySource");let Pl=class extends Sn.LoadableMixin(pf(nu(Je))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=Y(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);V4(e,this.layer.spatialReference,i);const r=X2.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const h of r.features){const y=h.attributes[s],f=this._idToClientGraphic.get(y);f&&(h.geometry=f.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new ne("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return V4(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:Ut.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new ne("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const h=S=>"objectId"in S&&S.objectId!=null?S.objectId:"attributes"in S&&S.attributes[t]!=null?S.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const S of e.deleteFeatures){const E=h(S);E!=null&&r.push(E)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const S of e.updateFeatures)if(s.push(this._serializeFeature(S)),y){const E=h(S);E!=null&&y.set(E,S)}}mne(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:f,featureEditResults:w}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=f,i&&i.finish(w.uidToObjectId),this._updateClientGraphicIds(y,w),this._createEditsResult(w)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||oe(e))return;const i=[];for(const{geometry:r}of e)!Y(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new ne("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let h=0;h<e.length;h++){const y=e[h],f=this._serializeFeature(y);!r&&Y(y.geometry)&&(r=y.geometry.type),i[h]=f,t.set(`${f.uid}`,y)}const s=this;return{features:i,inferredGeometryType:r,finish(h){const y=s.sourceJSON.objectIdField;for(const f in h){const w=h[f],S=t.get(f);S&&(S.attributes||(S.attributes={}),w===-1?delete S.attributes[y]:S.attributes[y]=w,s._addIdToClientGraphic(S))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(Mne++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return oe(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?rn.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await yne("MemorySourceWorker",{strategy:we("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:h,timeInfo:y}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const w=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",P=>{N_.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const S={features:w.features,fields:t&&t.map(P=>P.toJSON()),geometryType:T$.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&s,hasZ:this.layerOrSourceGeometryType==="mesh"||h,objectIdField:r,spatialReference:f?null:i&&i.toJSON(),timeInfo:y?y.toJSON():null},E=await this._connection.invoke("load",S,{signal:e});for(const P of E.warnings)N_.warn(P.message,{layer:this.layer,warning:P});E.featureErrors.length&&N_.warn(`Encountered ${E.featureErrors.length} validation errors while loading features`,E.featureErrors);const A=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(w.inferredGeometryType)&&(A.geometryType=T$.toJSON(w.inferredGeometryType)),this.sourceJSON=A,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),w.finish(E.assignedObjectIds)}};g([gM({Type:Zn,ensureType:ji(Zn)})],Pl.prototype,"itemType",void 0),g([x()],Pl.prototype,"type",void 0),g([x({constructOnly:!0})],Pl.prototype,"layer",void 0),g([x({readOnly:!0})],Pl.prototype,"workerGeometryType",null),g([x()],Pl.prototype,"sourceJSON",void 0),Pl=g([K("esri.layers.graphics.sources.MemorySource")],Pl);function Ene(e){return"portalItem"in e}const Tne=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Ene(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return g([x({type:String})],t.prototype,"apiKey",null),t=g([K("esri.layers.mixins.APIKeyMixin")],t),t},$ne=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Ch(this.url);if(Y(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Hte(i,Le.getLogger(this.declaredClass)))}};return g([x()],t.prototype,"title",null),g([x({type:String})],t.prototype,"url",null),t=g([K("esri.layers.mixins.ArcGISService")],t),t};function Q2(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ine(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ane(e,t,i,r,s,h,y,f,w,S,E,A,P,N,F,V){const U=new Float32Array(16);return U[0]=e,U[1]=t,U[2]=i,U[3]=r,U[4]=s,U[5]=h,U[6]=y,U[7]=f,U[8]=w,U[9]=S,U[10]=E,U[11]=A,U[12]=P,U[13]=N,U[14]=F,U[15]=V,U}function kne(e,t){return new Float32Array(e,t,16)}const Cne=Q2();Object.freeze(Object.defineProperty({__proto__:null,create:Q2,clone:Ine,fromValues:Ane,createView:kne,IDENTITY:Cne},Symbol.toStringTag,{value:"Module"}));function One(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function jh(e,t,i,r,s,h,y,f,w,S,E,A,P,N,F,V,U){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=h,e[5]=y,e[6]=f,e[7]=w,e[8]=S,e[9]=E,e[10]=A,e[11]=P,e[12]=N,e[13]=F,e[14]=V,e[15]=U,e}function w7(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ou(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],h=t[6],y=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=h,e[11]=t[14],e[12]=s,e[13]=y,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Pne(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5],w=t[6],S=t[7],E=t[8],A=t[9],P=t[10],N=t[11],F=t[12],V=t[13],U=t[14],X=t[15],re=i*f-r*y,he=i*w-s*y,pe=i*S-h*y,ae=r*w-s*f,le=r*S-h*f,Te=s*S-h*w,Ee=E*V-A*F,Oe=E*U-P*F,Ae=E*X-N*F,Fe=A*U-P*V,ze=A*X-N*V,Ge=P*X-N*U;let ke=re*Ge-he*ze+pe*Fe+ae*Ae-le*Oe+Te*Ee;return ke?(ke=1/ke,e[0]=(f*Ge-w*ze+S*Fe)*ke,e[1]=(s*ze-r*Ge-h*Fe)*ke,e[2]=(V*Te-U*le+X*ae)*ke,e[3]=(P*le-A*Te-N*ae)*ke,e[4]=(w*Ae-y*Ge-S*Oe)*ke,e[5]=(i*Ge-s*Ae+h*Oe)*ke,e[6]=(U*pe-F*Te-X*he)*ke,e[7]=(E*Te-P*pe+N*he)*ke,e[8]=(y*ze-f*Ae+S*Ee)*ke,e[9]=(r*Ae-i*ze-h*Ee)*ke,e[10]=(F*le-V*pe+X*re)*ke,e[11]=(A*pe-E*le-N*re)*ke,e[12]=(f*Oe-y*Fe-w*Ee)*ke,e[13]=(i*Fe-r*Oe+s*Ee)*ke,e[14]=(V*he-F*ae-U*re)*ke,e[15]=(E*ae-A*he+P*re)*ke,e):null}function Nne(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5],w=t[6],S=t[7],E=t[8],A=t[9],P=t[10],N=t[11],F=t[12],V=t[13],U=t[14],X=t[15];return e[0]=f*(P*X-N*U)-A*(w*X-S*U)+V*(w*N-S*P),e[1]=-(r*(P*X-N*U)-A*(s*X-h*U)+V*(s*N-h*P)),e[2]=r*(w*X-S*U)-f*(s*X-h*U)+V*(s*S-h*w),e[3]=-(r*(w*N-S*P)-f*(s*N-h*P)+A*(s*S-h*w)),e[4]=-(y*(P*X-N*U)-E*(w*X-S*U)+F*(w*N-S*P)),e[5]=i*(P*X-N*U)-E*(s*X-h*U)+F*(s*N-h*P),e[6]=-(i*(w*X-S*U)-y*(s*X-h*U)+F*(s*S-h*w)),e[7]=i*(w*N-S*P)-y*(s*N-h*P)+E*(s*S-h*w),e[8]=y*(A*X-N*V)-E*(f*X-S*V)+F*(f*N-S*A),e[9]=-(i*(A*X-N*V)-E*(r*X-h*V)+F*(r*N-h*A)),e[10]=i*(f*X-S*V)-y*(r*X-h*V)+F*(r*S-h*f),e[11]=-(i*(f*N-S*A)-y*(r*N-h*A)+E*(r*S-h*f)),e[12]=-(y*(A*U-P*V)-E*(f*U-w*V)+F*(f*P-w*A)),e[13]=i*(A*U-P*V)-E*(r*U-s*V)+F*(r*P-s*A),e[14]=-(i*(f*U-w*V)-y*(r*U-s*V)+F*(r*w-s*f)),e[15]=i*(f*P-w*A)-y*(r*P-s*A)+E*(r*w-s*f),e}function Rne(e){const t=e[0],i=e[1],r=e[2],s=e[3],h=e[4],y=e[5],f=e[6],w=e[7],S=e[8],E=e[9],A=e[10],P=e[11],N=e[12],F=e[13],V=e[14],U=e[15];return(t*y-i*h)*(A*U-P*V)-(t*f-r*h)*(E*U-P*F)+(t*w-s*h)*(E*V-A*F)+(i*f-r*y)*(S*U-P*N)-(i*w-s*y)*(S*V-A*N)+(r*w-s*f)*(S*F-E*N)}function vF(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=t[6],E=t[7],A=t[8],P=t[9],N=t[10],F=t[11],V=t[12],U=t[13],X=t[14],re=t[15];let he=i[0],pe=i[1],ae=i[2],le=i[3];return e[0]=he*r+pe*f+ae*A+le*V,e[1]=he*s+pe*w+ae*P+le*U,e[2]=he*h+pe*S+ae*N+le*X,e[3]=he*y+pe*E+ae*F+le*re,he=i[4],pe=i[5],ae=i[6],le=i[7],e[4]=he*r+pe*f+ae*A+le*V,e[5]=he*s+pe*w+ae*P+le*U,e[6]=he*h+pe*S+ae*N+le*X,e[7]=he*y+pe*E+ae*F+le*re,he=i[8],pe=i[9],ae=i[10],le=i[11],e[8]=he*r+pe*f+ae*A+le*V,e[9]=he*s+pe*w+ae*P+le*U,e[10]=he*h+pe*S+ae*N+le*X,e[11]=he*y+pe*E+ae*F+le*re,he=i[12],pe=i[13],ae=i[14],le=i[15],e[12]=he*r+pe*f+ae*A+le*V,e[13]=he*s+pe*w+ae*P+le*U,e[14]=he*h+pe*S+ae*N+le*X,e[15]=he*y+pe*E+ae*F+le*re,e}function Lne(e,t,i){const r=i[0],s=i[1],h=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*h+t[12],e[13]=t[1]*r+t[5]*s+t[9]*h+t[13],e[14]=t[2]*r+t[6]*s+t[10]*h+t[14],e[15]=t[3]*r+t[7]*s+t[11]*h+t[15];else{const y=t[0],f=t[1],w=t[2],S=t[3],E=t[4],A=t[5],P=t[6],N=t[7],F=t[8],V=t[9],U=t[10],X=t[11];e[0]=y,e[1]=f,e[2]=w,e[3]=S,e[4]=E,e[5]=A,e[6]=P,e[7]=N,e[8]=F,e[9]=V,e[10]=U,e[11]=X,e[12]=y*r+E*s+F*h+t[12],e[13]=f*r+A*s+V*h+t[13],e[14]=w*r+P*s+U*h+t[14],e[15]=S*r+N*s+X*h+t[15]}return e}function Fne(e,t,i){const r=i[0],s=i[1],h=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*h,e[9]=t[9]*h,e[10]=t[10]*h,e[11]=t[11]*h,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function jne(e,t,i,r){let s,h,y,f,w,S,E,A,P,N,F,V,U,X,re,he,pe,ae,le,Te,Ee,Oe,Ae,Fe,ze=r[0],Ge=r[1],ke=r[2],ht=Math.sqrt(ze*ze+Ge*Ge+ke*ke);return ht<pt?null:(ht=1/ht,ze*=ht,Ge*=ht,ke*=ht,s=Math.sin(i),h=Math.cos(i),y=1-h,f=t[0],w=t[1],S=t[2],E=t[3],A=t[4],P=t[5],N=t[6],F=t[7],V=t[8],U=t[9],X=t[10],re=t[11],he=ze*ze*y+h,pe=Ge*ze*y+ke*s,ae=ke*ze*y-Ge*s,le=ze*Ge*y-ke*s,Te=Ge*Ge*y+h,Ee=ke*Ge*y+ze*s,Oe=ze*ke*y+Ge*s,Ae=Ge*ke*y-ze*s,Fe=ke*ke*y+h,e[0]=f*he+A*pe+V*ae,e[1]=w*he+P*pe+U*ae,e[2]=S*he+N*pe+X*ae,e[3]=E*he+F*pe+re*ae,e[4]=f*le+A*Te+V*Ee,e[5]=w*le+P*Te+U*Ee,e[6]=S*le+N*Te+X*Ee,e[7]=E*le+F*Te+re*Ee,e[8]=f*Oe+A*Ae+V*Fe,e[9]=w*Oe+P*Ae+U*Fe,e[10]=S*Oe+N*Ae+X*Fe,e[11]=E*Oe+F*Ae+re*Fe,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Dne(e,t,i){const r=Math.sin(i),s=Math.cos(i),h=t[4],y=t[5],f=t[6],w=t[7],S=t[8],E=t[9],A=t[10],P=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=h*s+S*r,e[5]=y*s+E*r,e[6]=f*s+A*r,e[7]=w*s+P*r,e[8]=S*s-h*r,e[9]=E*s-y*r,e[10]=A*s-f*r,e[11]=P*s-w*r,e}function zne(e,t,i){const r=Math.sin(i),s=Math.cos(i),h=t[0],y=t[1],f=t[2],w=t[3],S=t[8],E=t[9],A=t[10],P=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*s-S*r,e[1]=y*s-E*r,e[2]=f*s-A*r,e[3]=w*s-P*r,e[8]=h*r+S*s,e[9]=y*r+E*s,e[10]=f*r+A*s,e[11]=w*r+P*s,e}function Vne(e,t,i){const r=Math.sin(i),s=Math.cos(i),h=t[0],y=t[1],f=t[2],w=t[3],S=t[4],E=t[5],A=t[6],P=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*s+S*r,e[1]=y*s+E*r,e[2]=f*s+A*r,e[3]=w*s+P*r,e[4]=S*s-h*r,e[5]=E*s-y*r,e[6]=A*s-f*r,e[7]=P*s-w*r,e}function bF(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Gne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Une(e,t,i){let r,s,h,y=i[0],f=i[1],w=i[2],S=Math.sqrt(y*y+f*f+w*w);return S<pt?null:(S=1/S,y*=S,f*=S,w*=S,r=Math.sin(t),s=Math.cos(t),h=1-s,e[0]=y*y*h+s,e[1]=f*y*h+w*r,e[2]=w*y*h-f*r,e[3]=0,e[4]=y*f*h-w*r,e[5]=f*f*h+s,e[6]=w*f*h+y*r,e[7]=0,e[8]=y*w*h+f*r,e[9]=f*w*h-y*r,e[10]=w*w*h+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function qne(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bne(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Hne(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wF(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=r+r,w=s+s,S=h+h,E=r*f,A=r*w,P=r*S,N=s*w,F=s*S,V=h*S,U=y*f,X=y*w,re=y*S;return e[0]=1-(N+V),e[1]=A+re,e[2]=P-X,e[3]=0,e[4]=A-re,e[5]=1-(E+V),e[6]=F+U,e[7]=0,e[8]=P+X,e[9]=F-U,e[10]=1-(E+N),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Wne(e,t){const i=Jne,r=-t[0],s=-t[1],h=-t[2],y=t[3],f=t[4],w=t[5],S=t[6],E=t[7],A=r*r+s*s+h*h+y*y;return A>0?(i[0]=2*(f*y+E*r+w*h-S*s)/A,i[1]=2*(w*y+E*s+S*r-f*h)/A,i[2]=2*(S*y+E*h+f*s-w*r)/A):(i[0]=2*(f*y+E*r+w*h-S*s),i[1]=2*(w*y+E*s+S*r-f*h),i[2]=2*(S*y+E*h+f*s-w*r)),wF(e,t,i),e}const Jne=Lr();function Kne(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Yne(e,t){const i=t[0],r=t[1],s=t[2],h=t[4],y=t[5],f=t[6],w=t[8],S=t[9],E=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(h*h+y*y+f*f),e[2]=Math.sqrt(w*w+S*S+E*E),e}function Zne(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Xne(e,t,i,r){const s=t[0],h=t[1],y=t[2],f=t[3],w=s+s,S=h+h,E=y+y,A=s*w,P=s*S,N=s*E,F=h*S,V=h*E,U=y*E,X=f*w,re=f*S,he=f*E,pe=r[0],ae=r[1],le=r[2];return e[0]=(1-(F+U))*pe,e[1]=(P+he)*pe,e[2]=(N-re)*pe,e[3]=0,e[4]=(P-he)*ae,e[5]=(1-(A+U))*ae,e[6]=(V+X)*ae,e[7]=0,e[8]=(N+re)*le,e[9]=(V-X)*le,e[10]=(1-(A+F))*le,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Qne(e,t,i,r,s){const h=t[0],y=t[1],f=t[2],w=t[3],S=h+h,E=y+y,A=f+f,P=h*S,N=h*E,F=h*A,V=y*E,U=y*A,X=f*A,re=w*S,he=w*E,pe=w*A,ae=r[0],le=r[1],Te=r[2],Ee=s[0],Oe=s[1],Ae=s[2],Fe=(1-(V+X))*ae,ze=(N+pe)*ae,Ge=(F-he)*ae,ke=(N-pe)*le,ht=(1-(P+X))*le,Kt=(U+re)*le,bt=(F+he)*Te,Ct=(U-re)*Te,yi=(1-(P+V))*Te;return e[0]=Fe,e[1]=ze,e[2]=Ge,e[3]=0,e[4]=ke,e[5]=ht,e[6]=Kt,e[7]=0,e[8]=bt,e[9]=Ct,e[10]=yi,e[11]=0,e[12]=i[0]+Ee-(Fe*Ee+ke*Oe+bt*Ae),e[13]=i[1]+Oe-(ze*Ee+ht*Oe+Ct*Ae),e[14]=i[2]+Ae-(Ge*Ee+Kt*Oe+yi*Ae),e[15]=1,e}function ese(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=i+i,f=r+r,w=s+s,S=i*y,E=r*y,A=r*f,P=s*y,N=s*f,F=s*w,V=h*y,U=h*f,X=h*w;return e[0]=1-A-F,e[1]=E+X,e[2]=P-U,e[3]=0,e[4]=E-X,e[5]=1-S-F,e[6]=N+V,e[7]=0,e[8]=P+U,e[9]=N-V,e[10]=1-S-A,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tse(e,t,i,r,s,h,y){const f=1/(i-t),w=1/(s-r),S=1/(h-y);return e[0]=2*h*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*h*w,e[6]=0,e[7]=0,e[8]=(i+t)*f,e[9]=(s+r)*w,e[10]=(y+h)*S,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*h*2*S,e[15]=0,e}function ise(e,t,i,r,s){const h=1/Math.tan(t/2);let y;return e[0]=h/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(y=1/(r-s),e[10]=(s+r)*y,e[14]=2*s*r*y):(e[10]=-1,e[14]=-2*r),e}function rse(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),w=2/(y+f),S=2/(s+h);return e[0]=w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=S,e[6]=0,e[7]=0,e[8]=-(y-f)*w*.5,e[9]=(s-h)*S*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function nse(e,t,i,r,s,h,y){const f=1/(t-i),w=1/(r-s),S=1/(h-y);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*w,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*S,e[11]=0,e[12]=(t+i)*f,e[13]=(s+r)*w,e[14]=(y+h)*S,e[15]=1,e}function sse(e,t,i,r){let s,h,y,f,w,S,E,A,P,N;const F=t[0],V=t[1],U=t[2],X=r[0],re=r[1],he=r[2],pe=i[0],ae=i[1],le=i[2];return Math.abs(F-pe)<pt&&Math.abs(V-ae)<pt&&Math.abs(U-le)<pt?w7(e):(E=F-pe,A=V-ae,P=U-le,N=1/Math.sqrt(E*E+A*A+P*P),E*=N,A*=N,P*=N,s=re*P-he*A,h=he*E-X*P,y=X*A-re*E,N=Math.sqrt(s*s+h*h+y*y),N?(N=1/N,s*=N,h*=N,y*=N):(s=0,h=0,y=0),f=A*y-P*h,w=P*s-E*y,S=E*h-A*s,N=Math.sqrt(f*f+w*w+S*S),N?(N=1/N,f*=N,w*=N,S*=N):(f=0,w=0,S=0),e[0]=s,e[1]=f,e[2]=E,e[3]=0,e[4]=h,e[5]=w,e[6]=A,e[7]=0,e[8]=y,e[9]=S,e[10]=P,e[11]=0,e[12]=-(s*F+h*V+y*U),e[13]=-(f*F+w*V+S*U),e[14]=-(E*F+A*V+P*U),e[15]=1,e)}function ose(e,t,i,r){const s=t[0],h=t[1],y=t[2],f=r[0],w=r[1],S=r[2];let E=s-i[0],A=h-i[1],P=y-i[2],N=E*E+A*A+P*P;N>0&&(N=1/Math.sqrt(N),E*=N,A*=N,P*=N);let F=w*P-S*A,V=S*E-f*P,U=f*A-w*E;return N=F*F+V*V+U*U,N>0&&(N=1/Math.sqrt(N),F*=N,V*=N,U*=N),e[0]=F,e[1]=V,e[2]=U,e[3]=0,e[4]=A*U-P*V,e[5]=P*F-E*U,e[6]=E*V-A*F,e[7]=0,e[8]=E,e[9]=A,e[10]=P,e[11]=0,e[12]=s,e[13]=h,e[14]=y,e[15]=1,e}function ase(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function lse(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function use(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function _F(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function hse(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function cse(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function pse(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function dse(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],h=e[3],y=e[4],f=e[5],w=e[6],S=e[7],E=e[8],A=e[9],P=e[10],N=e[11],F=e[12],V=e[13],U=e[14],X=e[15],re=t[0],he=t[1],pe=t[2],ae=t[3],le=t[4],Te=t[5],Ee=t[6],Oe=t[7],Ae=t[8],Fe=t[9],ze=t[10],Ge=t[11],ke=t[12],ht=t[13],Kt=t[14],bt=t[15];return Math.abs(i-re)<=pt*Math.max(1,Math.abs(i),Math.abs(re))&&Math.abs(r-he)<=pt*Math.max(1,Math.abs(r),Math.abs(he))&&Math.abs(s-pe)<=pt*Math.max(1,Math.abs(s),Math.abs(pe))&&Math.abs(h-ae)<=pt*Math.max(1,Math.abs(h),Math.abs(ae))&&Math.abs(y-le)<=pt*Math.max(1,Math.abs(y),Math.abs(le))&&Math.abs(f-Te)<=pt*Math.max(1,Math.abs(f),Math.abs(Te))&&Math.abs(w-Ee)<=pt*Math.max(1,Math.abs(w),Math.abs(Ee))&&Math.abs(S-Oe)<=pt*Math.max(1,Math.abs(S),Math.abs(Oe))&&Math.abs(E-Ae)<=pt*Math.max(1,Math.abs(E),Math.abs(Ae))&&Math.abs(A-Fe)<=pt*Math.max(1,Math.abs(A),Math.abs(Fe))&&Math.abs(P-ze)<=pt*Math.max(1,Math.abs(P),Math.abs(ze))&&Math.abs(N-Ge)<=pt*Math.max(1,Math.abs(N),Math.abs(Ge))&&Math.abs(F-ke)<=pt*Math.max(1,Math.abs(F),Math.abs(ke))&&Math.abs(V-ht)<=pt*Math.max(1,Math.abs(V),Math.abs(ht))&&Math.abs(U-Kt)<=pt*Math.max(1,Math.abs(U),Math.abs(Kt))&&Math.abs(X-bt)<=pt*Math.max(1,Math.abs(X),Math.abs(bt))}function fse(e){const t=pt,i=e[0],r=e[1],s=e[2],h=e[4],y=e[5],f=e[6],w=e[8],S=e[9],E=e[10];return Math.abs(1-(i*i+h*h+w*w))<=t&&Math.abs(1-(r*r+y*y+S*S))<=t&&Math.abs(1-(s*s+f*f+E*E))<=t}const yse=vF,mse=_F;Object.freeze(Object.defineProperty({__proto__:null,copy:One,set:jh,identity:w7,transpose:ou,invert:Pne,adjoint:Nne,determinant:Rne,multiply:vF,translate:Lne,scale:Fne,rotate:jne,rotateX:Dne,rotateY:zne,rotateZ:Vne,fromTranslation:bF,fromScaling:Gne,fromRotation:Une,fromXRotation:qne,fromYRotation:Bne,fromZRotation:Hne,fromRotationTranslation:wF,fromQuat2:Wne,getTranslation:Kne,getScaling:Yne,getRotation:Zne,fromRotationTranslationScale:Xne,fromRotationTranslationScaleOrigin:Qne,fromQuat:ese,frustum:tse,perspective:ise,perspectiveFromFieldOfView:rse,ortho:nse,lookAt:sse,targetTo:ose,str:ase,frob:lse,add:use,subtract:_F,multiplyScalar:hse,multiplyScalarAndAdd:cse,exactEquals:pse,equals:dse,isOrthoNormal:fse,mul:yse,sub:mse},Symbol.toStringTag,{value:"Module"}));const gse=(e,t)=>{const i=jh(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return ou(i,i)},vse=(e,t)=>{const i=jh(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return ou(i,i)},bse=(e,t)=>{const i=1-t,r=jh(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return ou(r,r)},wse=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=jh(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return ou(s,s)},_se=(e,t)=>{const i=1-2*t,r=jh(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return ou(r,r)},xse=(e,t)=>{const i=jh(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return ou(i,i)},Sse=(e,t)=>{const i=1-t,r=jh(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return ou(r,r)};class e3{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Vn(t.strength,i.strength,r),this.radius=Vn(t.radius,i.radius,r),this.threshold=Vn(t.threshold,i.threshold,r)}clone(){return new e3(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Py(this.radius),strength:this.strength,threshold:this.threshold}}}class t3{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Vn(t.radius,i.radius,r))}clone(){return new t3(this.radius)}toJSON(){return{type:"blur",radius:Py(this.radius)}}}class hm{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Vn(t.amount,i.amount,r),this._updateMatrix()}clone(){return new hm(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Q2();switch(this.type){case"brightness":this._colorMatrix=gse(t,this.amount);break;case"contrast":this._colorMatrix=vse(t,this.amount);break;case"grayscale":this._colorMatrix=bse(t,this.amount);break;case"invert":this._colorMatrix=_se(t,this.amount);break;case"saturate":this._colorMatrix=xse(t,this.amount);break;case"sepia":this._colorMatrix=Sse(t,this.amount)}}}class i3{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Vn(t.offsetX,i.offsetX,r),this.offsetY=Vn(t.offsetY,i.offsetY,r),this.blurRadius=Vn(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Vn(t.color[0],i.color[0],r)),this.color[1]=Math.round(Vn(t.color[1],i.color[1],r)),this.color[2]=Math.round(Vn(t.color[2],i.color[2],r)),this.color[3]=Vn(t.color[3],i.color[3],r)}clone(){return new i3(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Py(this.offsetX),yoffset:Py(this.offsetY),blurRadius:Py(this.blurRadius),color:t}}}class r3{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Vn(t.angle,i.angle,r),this._updateMatrix()}clone(){return new r3(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Q2();this._colorMatrix=wse(t,this.angle)}}class n3{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Vn(t.amount,i.amount,r)}clone(){return new n3(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Vn(e,t,i){return e+(t-e)*i}function Py(e){return Math.round(1e3*Ba(e))/1e3}function Mse(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new hm(e.type,0);case"saturate":case"brightness":case"contrast":return new hm(e.type,1);case"opacity":return new n3(1);case"hue-rotate":return new r3(0);case"blur":return new t3(0);case"drop-shadow":return new i3(0,0,0,[...EM("transparent")]);case"bloom":return new e3(0,0,1)}}function Ese(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function Tse(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(Mse(i[s]))}function $se(e){const t=e[0];return!!t&&"type"in t}var Z8,X8,xF={exports:{}};function SF(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=Q8(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ne("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Q8(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!Ese(t[i].effects,t[i+1].effects))throw new ne("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});Tse(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function Q8(e){let t;if(!e)return[];try{t=xF.exports.parse(e)}catch(i){throw new ne("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>Ise(i))}function Ise(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Ase(e);case"opacity":return kse(e);case"hue-rotate":return Cse(e);case"blur":return Ose(e);case"drop-shadow":return Pse(e);case"bloom":return Nse(e)}}catch(t){throw t.details.filter=e,t}throw new ne("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Ase(e){let t=1;return wf(e.parameters,1),e.parameters.length===1&&(t=Fo(e.parameters[0])),new hm(e.name,t)}function kse(e){let t=1;return wf(e.parameters,1),e.parameters.length===1&&(t=Fo(e.parameters[0])),new n3(t)}function Cse(e){let t=0;return wf(e.parameters,1),e.parameters.length===1&&(t=zse(e.parameters[0])),new r3(t)}function Ose(e){let t=0;return wf(e.parameters,1),e.parameters.length===1&&(t=S7(e.parameters[0]),Vm(t,e.parameters[0])),new t3(t)}function Pse(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new ne("effect:type-error","Accepts only one color",{});i=Vse(r)}else{const s=S7(r);if(Object.isFrozen(t))throw new ne("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&Vm(s,r)}if(t.length<2||t.length>3)throw new ne("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new i3(t[0],t[1],t[2]||0,i||MF("black"))}function Nse(e){let t=1,i=0,r=0;return wf(e.parameters,3),e.parameters[0]&&(t=Fo(e.parameters[0])),e.parameters[1]&&(i=S7(e.parameters[1]),Vm(i,e.parameters[1])),e.parameters[2]&&(r=Fo(e.parameters[2])),new e3(t,i,r)}function wf(e,t){if(e.length>t)throw new ne("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function s3(e){if(e.type==="color")return"<color>";if(e.unit){if(x7[e.unit])return"<length>";if(_7[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Vm(e,t){if(e<0)throw new ne("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Rse(e){if(e.type!=="quantity"||e.unit!==null)throw new ne("effect:type-error",`Expected <double>, Actual: ${s3(e)}`,{term:e})}function Lse(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ne("effect:type-error",`Expected <double> or <percentage>, Actual: ${s3(e)}`,{term:e})}X8=function(){function e(s,h){function y(){this.constructor=s}y.prototype=h.prototype,s.prototype=new y}function t(s,h,y,f){var w=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(w,t.prototype),w.expected=h,w.found=y,w.location=f,w.name="SyntaxError",w}function i(s,h,y){return y=y||" ",s.length>h?s:(h-=s.length,s+(y+=y.repeat(h)).slice(0,h))}function r(s,h){var y,f={},w=(h=h!==void 0?h:{}).grammarSource,S={start:dt},E=dt,A="none",P=")",N=",",F="(",V="%",U="px",X="cm",re="mm",he="in",pe="pt",ae="pc",le="deg",Te="rad",Ee="grad",Oe="turn",Ae="#",Fe=".",ze="e",Ge=/^[ \t\n\r]/,ke=/^[a-z\-]/,ht=/^[0-9a-fA-F]/,Kt=/^[+\-]/,bt=/^[0-9]/,Ct=xt("none"),yi=Ze("none",!1),Es=Ze(")",!1),ra=Ze(",",!1),au=xt("whitespace"),lu=Qe([" ","	",`
`,"\r"],!1,!1),Gh=xt("function"),Uh=Ze("(",!1),Ff=xt("identifier"),qp=Qe([["a","z"],"-"],!1,!1),jf=xt("percentage"),Df=Ze("%",!1),zf=xt("length"),Vf=Ze("px",!1),Gf=Ze("cm",!1),Bp=Ze("mm",!1),zi=Ze("in",!1),W=Ze("pt",!1),Tr=Ze("pc",!1),Hp=xt("angle"),Ot=Ze("deg",!1),wi=Ze("rad",!1),Xn=Ze("grad",!1),Ts=Ze("turn",!1),$s=xt("number"),oo=xt("color"),Wp=Ze("#",!1),qh=Qe([["0","9"],["a","f"],["A","F"]],!1,!1),uu=Qe(["+","-"],!1,!1),Pe=Qe([["0","9"]],!1,!1),c=Ze(".",!1),C=Ze("e",!1),b=function(){return[]},u=function(ie,Se){return{type:"function",name:ie,parameters:Se||[]}},a=function(ie,Se){return Se.length>0?q3(ie,Se,3):[ie]},n=function(ie){return{type:"quantity",value:ie.value,unit:ie.unit}},o=function(ie){return{type:"color",colorType:ie.type,value:ie.value}},l=function(ie){return ie},p=function(){return Ce()},d=function(ie){return{value:ie,unit:"%"}},m=function(ie){return{value:ie,unit:"px"}},v=function(ie){return{value:ie,unit:"cm"}},_=function(ie){return{value:ie,unit:"mm"}},M=function(ie){return{value:ie,unit:"in"}},T=function(ie){return{value:ie,unit:"pt"}},I=function(ie){return{value:ie,unit:"pc"}},O=function(ie){return{value:ie,unit:"deg"}},R=function(ie){return{value:ie,unit:"rad"}},L=function(ie){return{value:ie,unit:"grad"}},G=function(ie){return{value:ie,unit:"turn"}},q=function(ie){return{value:ie,unit:null}},D=function(){return{type:"hex",value:Ce()}},H=function(ie){return{type:"function",value:ie}},ee=function(){return{type:"named",value:Ce()}},te=function(){return parseFloat(Ce())},Z=0,ce=0,ye=[{line:1,column:1}],Me=0,xe=[],be=0;if("startRule"in h){if(!(h.startRule in S))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');E=S[h.startRule]}function Ce(){return s.substring(ce,Z)}function Ze(ie,Se){return{type:"literal",text:ie,ignoreCase:Se}}function Qe(ie,Se,Ie){return{type:"class",parts:ie,inverted:Se,ignoreCase:Ie}}function _t(){return{type:"end"}}function xt(ie){return{type:"other",description:ie}}function Ei(ie){var Se,Ie=ye[ie];if(Ie)return Ie;for(Se=ie-1;!ye[Se];)Se--;for(Ie={line:(Ie=ye[Se]).line,column:Ie.column};Se<ie;)s.charCodeAt(Se)===10?(Ie.line++,Ie.column=1):Ie.column++,Se++;return ye[ie]=Ie,Ie}function Bt(ie,Se){var Ie=Ei(ie),gt=Ei(Se);return{source:w,start:{offset:ie,line:Ie.line,column:Ie.column},end:{offset:Se,line:gt.line,column:gt.column}}}function Ue(ie){Z<Me||(Z>Me&&(Me=Z,xe=[]),xe.push(ie))}function Nt(ie,Se,Ie){return new t(t.buildMessage(ie,Se),ie,Se,Ie)}function dt(){var ie;return(ie=hi())===f&&(ie=Qt()),ie}function hi(){var ie,Se;return be++,ie=Z,at(),s.substr(Z,4)===A?(Se=A,Z+=4):(Se=f,be===0&&Ue(yi)),Se!==f?(at(),ce=ie,ie=b()):(Z=ie,ie=f),be--,ie===f&&be===0&&Ue(Ct),ie}function Qt(){var ie,Se;if(ie=[],(Se=jr())!==f)for(;Se!==f;)ie.push(Se),Se=jr();else ie=f;return ie}function jr(){var ie,Se,Ie,gt;return ie=Z,at(),(Se=hu())!==f?(at(),(Ie=wt())===f&&(Ie=null),at(),s.charCodeAt(Z)===41?(gt=P,Z++):(gt=f,be===0&&Ue(Es)),gt!==f?(at(),ce=ie,ie=u(Se,Ie)):(Z=ie,ie=f)):(Z=ie,ie=f),ie}function wt(){var ie,Se,Ie,gt,cr,_i,$n,Jp;if(ie=Z,(Se=Ji())!==f){for(Ie=[],gt=Z,cr=at(),s.charCodeAt(Z)===44?(_i=N,Z++):(_i=f,be===0&&Ue(ra)),_i===f&&(_i=null),$n=at(),(Jp=Ji())!==f?gt=cr=[cr,_i,$n,Jp]:(Z=gt,gt=f);gt!==f;)Ie.push(gt),gt=Z,cr=at(),s.charCodeAt(Z)===44?(_i=N,Z++):(_i=f,be===0&&Ue(ra)),_i===f&&(_i=null),$n=at(),(Jp=Ji())!==f?gt=cr=[cr,_i,$n,Jp]:(Z=gt,gt=f);ce=ie,ie=a(Se,Ie)}else Z=ie,ie=f;return ie}function Ji(){var ie,Se;return ie=Z,(Se=cu())===f&&(Se=Bh())===f&&(Se=z3())===f&&(Se=V3()),Se!==f&&(ce=ie,Se=n(Se)),(ie=Se)===f&&(ie=Z,(Se=G3())!==f&&(ce=ie,Se=o(Se)),ie=Se),ie}function at(){var ie,Se;for(be++,ie=[],Ge.test(s.charAt(Z))?(Se=s.charAt(Z),Z++):(Se=f,be===0&&Ue(lu));Se!==f;)ie.push(Se),Ge.test(s.charAt(Z))?(Se=s.charAt(Z),Z++):(Se=f,be===0&&Ue(lu));return be--,Se=f,be===0&&Ue(au),ie}function hu(){var ie,Se,Ie;return be++,ie=Z,(Se=el())!==f?(s.charCodeAt(Z)===40?(Ie=F,Z++):(Ie=f,be===0&&Ue(Uh)),Ie!==f?(ce=ie,ie=l(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),be--,ie===f&&(Se=f,be===0&&Ue(Gh)),ie}function el(){var ie,Se,Ie;if(be++,ie=Z,Se=[],ke.test(s.charAt(Z))?(Ie=s.charAt(Z),Z++):(Ie=f,be===0&&Ue(qp)),Ie!==f)for(;Ie!==f;)Se.push(Ie),ke.test(s.charAt(Z))?(Ie=s.charAt(Z),Z++):(Ie=f,be===0&&Ue(qp));else Se=f;return Se!==f&&(ce=ie,Se=p()),be--,(ie=Se)===f&&(Se=f,be===0&&Ue(Ff)),ie}function cu(){var ie,Se,Ie;return be++,ie=Z,at(),(Se=Tn())!==f?(s.charCodeAt(Z)===37?(Ie=V,Z++):(Ie=f,be===0&&Ue(Df)),Ie!==f?(ce=ie,ie=d(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),be--,ie===f&&be===0&&Ue(jf),ie}function Bh(){var ie,Se,Ie;return be++,ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===U?(Ie=U,Z+=2):(Ie=f,be===0&&Ue(Vf)),Ie!==f?(ce=ie,ie=m(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===X?(Ie=X,Z+=2):(Ie=f,be===0&&Ue(Gf)),Ie!==f?(ce=ie,ie=v(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===re?(Ie=re,Z+=2):(Ie=f,be===0&&Ue(Bp)),Ie!==f?(ce=ie,ie=_(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===he?(Ie=he,Z+=2):(Ie=f,be===0&&Ue(zi)),Ie!==f?(ce=ie,ie=M(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===pe?(Ie=pe,Z+=2):(Ie=f,be===0&&Ue(W)),Ie!==f?(ce=ie,ie=T(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,at(),(Se=Tn())!==f?(s.substr(Z,2)===ae?(Ie=ae,Z+=2):(Ie=f,be===0&&Ue(Tr)),Ie!==f?(ce=ie,ie=I(Se)):(Z=ie,ie=f)):(Z=ie,ie=f)))))),be--,ie===f&&be===0&&Ue(zf),ie}function z3(){var ie,Se,Ie;return be++,ie=Z,(Se=Tn())!==f?(s.substr(Z,3)===le?(Ie=le,Z+=3):(Ie=f,be===0&&Ue(Ot)),Ie!==f?(ce=ie,ie=O(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,(Se=Tn())!==f?(s.substr(Z,3)===Te?(Ie=Te,Z+=3):(Ie=f,be===0&&Ue(wi)),Ie!==f?(ce=ie,ie=R(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,(Se=Tn())!==f?(s.substr(Z,4)===Ee?(Ie=Ee,Z+=4):(Ie=f,be===0&&Ue(Xn)),Ie!==f?(ce=ie,ie=L(Se)):(Z=ie,ie=f)):(Z=ie,ie=f),ie===f&&(ie=Z,(Se=Tn())!==f?(s.substr(Z,4)===Oe?(Ie=Oe,Z+=4):(Ie=f,be===0&&Ue(Ts)),Ie!==f?(ce=ie,ie=G(Se)):(Z=ie,ie=f)):(Z=ie,ie=f)))),be--,ie===f&&(Se=f,be===0&&Ue(Hp)),ie}function V3(){var ie,Se;return be++,ie=Z,at(),(Se=Tn())!==f?(ce=ie,ie=q(Se)):(Z=ie,ie=f),be--,ie===f&&be===0&&Ue($s),ie}function G3(){var ie,Se,Ie,gt;if(be++,ie=Z,s.charCodeAt(Z)===35?(Se=Ae,Z++):(Se=f,be===0&&Ue(Wp)),Se!==f){if(Ie=[],ht.test(s.charAt(Z))?(gt=s.charAt(Z),Z++):(gt=f,be===0&&Ue(qh)),gt!==f)for(;gt!==f;)Ie.push(gt),ht.test(s.charAt(Z))?(gt=s.charAt(Z),Z++):(gt=f,be===0&&Ue(qh));else Ie=f;Ie!==f?(ce=ie,ie=D()):(Z=ie,ie=f)}else Z=ie,ie=f;return ie===f&&(ie=Z,(Se=jr())!==f&&(ce=ie,Se=H(Se)),(ie=Se)===f&&(ie=Z,(Se=el())!==f&&(ce=ie,Se=ee()),ie=Se)),be--,ie===f&&(Se=f,be===0&&Ue(oo)),ie}function Tn(){var ie,Se,Ie,gt,cr,_i,$n;for(ie=Z,Kt.test(s.charAt(Z))?(s.charAt(Z),Z++):be===0&&Ue(uu),Se=Z,Ie=[],bt.test(s.charAt(Z))?(gt=s.charAt(Z),Z++):(gt=f,be===0&&Ue(Pe));gt!==f;)Ie.push(gt),bt.test(s.charAt(Z))?(gt=s.charAt(Z),Z++):(gt=f,be===0&&Ue(Pe));if(s.charCodeAt(Z)===46?(gt=Fe,Z++):(gt=f,be===0&&Ue(c)),gt!==f){if(cr=[],bt.test(s.charAt(Z))?(_i=s.charAt(Z),Z++):(_i=f,be===0&&Ue(Pe)),_i!==f)for(;_i!==f;)cr.push(_i),bt.test(s.charAt(Z))?(_i=s.charAt(Z),Z++):(_i=f,be===0&&Ue(Pe));else cr=f;cr!==f?Se=Ie=[Ie,gt,cr]:(Z=Se,Se=f)}else Z=Se,Se=f;if(Se===f)if(Se=[],bt.test(s.charAt(Z))?(Ie=s.charAt(Z),Z++):(Ie=f,be===0&&Ue(Pe)),Ie!==f)for(;Ie!==f;)Se.push(Ie),bt.test(s.charAt(Z))?(Ie=s.charAt(Z),Z++):(Ie=f,be===0&&Ue(Pe));else Se=f;if(Se!==f){if(Ie=Z,s.charCodeAt(Z)===101?(gt=ze,Z++):(gt=f,be===0&&Ue(C)),gt!==f){if(Kt.test(s.charAt(Z))?(cr=s.charAt(Z),Z++):(cr=f,be===0&&Ue(uu)),cr===f&&(cr=null),_i=[],bt.test(s.charAt(Z))?($n=s.charAt(Z),Z++):($n=f,be===0&&Ue(Pe)),$n!==f)for(;$n!==f;)_i.push($n),bt.test(s.charAt(Z))?($n=s.charAt(Z),Z++):($n=f,be===0&&Ue(Pe));else _i=f;_i!==f?Ie=gt=[gt,cr,_i]:(Z=Ie,Ie=f)}else Z=Ie,Ie=f;Ie===f&&(Ie=null),ce=ie,ie=te()}else Z=ie,ie=f;return ie}function U3(ie,Se){return ie.map(function(Ie){return Ie[Se]})}function q3(ie,Se,Ie){return[ie].concat(U3(Se,Ie))}if((y=E())!==f&&Z===s.length)return y;throw y!==f&&Z<s.length&&Ue(_t()),Nt(xe,Me<s.length?s.charAt(Me):null,Me<s.length?Bt(Me,Me+1):Bt(Me,Me))}return e(t,Error),t.prototype.format=function(s){var h="Error: "+this.message;if(this.location){var y,f=null;for(y=0;y<s.length;y++)if(s[y].source===this.location.source){f=s[y].text.split(/\r\n|\n|\r/g);break}var w=this.location.start,S=this.location.source+":"+w.line+":"+w.column;if(f){var E=this.location.end,A=i("",w.line.toString().length),P=f[w.line-1],N=w.line===E.line?E.column:P.length+1;h+=`
 --> `+S+`
`+A+` |
`+w.line+" | "+P+`
`+A+" | "+i("",w.column-1)+i("",N-w.column,"^")}else h+=`
 at `+S}return h},t.buildMessage=function(s,h){var y={literal:function(N){return'"'+w(N.text)+'"'},class:function(N){var F=N.parts.map(function(V){return Array.isArray(V)?S(V[0])+"-"+S(V[1]):S(V)});return"["+(N.inverted?"^":"")+F+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function f(N){return N.charCodeAt(0).toString(16).toUpperCase()}function w(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+f(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+f(F)})}function S(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+f(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+f(F)})}function E(N){return y[N.type](N)}function A(N){var F,V,U=N.map(E);if(U.sort(),U.length>0){for(F=1,V=1;F<U.length;F++)U[F-1]!==U[F]&&(U[V]=U[F],V++);U.length=V}switch(U.length){case 1:return U[0];case 2:return U[0]+" or "+U[1];default:return U.slice(0,-1).join(", ")+", or "+U[U.length-1]}}function P(N){return N?'"'+w(N)+'"':"end of input"}return"Expected "+A(s)+" but "+P(h)+" found."},{SyntaxError:t,parse:r}},(Z8=xF).exports&&(Z8.exports=X8());const _7={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Fse(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&_7[e.unit]!=null))throw new ne("effect:type-error",`Expected <angle>, Actual: ${s3(e)}`,{term:e})}const x7={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function jse(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&x7[e.unit]!=null))throw new ne("effect:type-error",`Expected <length>, Actual: ${s3(e)}`,{term:e})}function Fo(e){Lse(e);const t=e.value;return Vm(t,e),e.unit==="%"?.01*t:t}function Dse(e){return Rse(e),Vm(e.value,e),e.value}function zse(e){return Fse(e),e.value*_7[e.unit]||0}function S7(e){return jse(e),e.value*x7[e.unit]||0}function Vse(e){switch(e.colorType){case"hex":return hZ(e.value);case"named":return MF(e.value);case"function":return qse(e.value)}}function MF(e){if(!MN(e))throw new ne("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return uZ(e)}const Gse=/^rgba?/i,Use=/^hsla?/i;function qse(e){if(wf(e.parameters,4),Gse.test(e.name))return[Fo(e.parameters[0]),Fo(e.parameters[1]),Fo(e.parameters[2]),e.parameters[3]?Fo(e.parameters[3]):1];if(Use.test(e.name))return EN(Dse(e.parameters[0]),Fo(e.parameters[1]),Fo(e.parameters[2]),e.parameters[3]?Fo(e.parameters[3]):1);throw new ne("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function M7(e,t,i){var r;try{return Hse(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function E7(e,t,i,r){try{const s=Bse(e);Ur(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function Bse(e){const t=SF(e);return t?$se(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function Hse(e){if(!e||e.length===0)return null;if(Wse(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:eI(i.value)});return t}return eI(e)}function Wse(e){const t=e[0];return!!t&&"scale"in t}function eI(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[rl(i,"amount")];break;case"blur":r=[rl(i,"radius","pt")];break;case"hue-rotate":r=[rl(i,"angle","deg")];break;case"drop-shadow":r=[rl(i,"xoffset","pt"),rl(i,"yoffset","pt"),rl(i,"blurRadius","pt"),Jse(i,"color")];break;case"bloom":r=[rl(i,"strength"),rl(i,"radius","pt"),rl(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;SF(s),t.push(s)}return t.join(" ")}function rl(e,t,i){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function Jse(e,t){if(e[t]==null)throw new ne("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const tI={read:{reader:M7},write:{allowNull:!0,writer:E7}},EF=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return g([x({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),g([x({json:{read:!1,write:!1,origins:{"web-map":tI,"portal-item":tI}}})],t.prototype,"effect",void 0),t=g([K("esri.layers.mixins.BlendLayer")],t),t},Kse=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return g([x({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=g([K("esri.layers.mixins.CustomParametersMixin")],t),t},iI={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Yse={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Zse(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function yp(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=Yse[i],{getter:h,setter:y,multiplier:f}=s;if(i==="months"){const w=Zse(r.getFullYear(),r.getMonth()+t);r.getDate()>w&&r.setDate(w)}r[y](r[h]()+t*f)}return r}function rI(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Xse(e,t,i){return e===0?0:e*iI[t]/iI[i]}var Mo;let ps=Mo=class extends ve{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return nI}static get empty(){return Qse}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Mo.allTime)}get isEmpty(){return this.equals(Mo.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Mo({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Y(this.start)?this.start.getTime():this.start,i=Y(this.end)?this.end.getTime():this.end,r=Y(e.start)?e.start.getTime():e.start,s=Y(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Oa(this.start,r=>rI(r,e)),i=Oa(this.end,r=>yp(rI(r,e),1,e));return new Mo({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Mo.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=v1(this.start,-1/0,f=>f.getTime()),i=v1(this.end,1/0,f=>f.getTime()),r=v1(e.start,-1/0,f=>f.getTime()),s=v1(e.end,1/0,f=>f.getTime());let h,y;if(r>=t&&r<=i?h=r:t>=r&&t<=s&&(h=t),i>=r&&i<=s?y=i:s>=t&&s<=i&&(y=s),!isNaN(h)&&!isNaN(y)){const f=new Mo;return f.start=h===-1/0?null:new Date(h),f.end=y===1/0?null:new Date(y),f}return Mo.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Mo,{start:r,end:s}=this;return Y(r)&&(i.start=yp(r,e,t)),Y(s)&&(i.end=yp(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return nI.clone();const t=Y(this.start)&&Y(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=Y(this.end)&&Y(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Mo({start:t,end:i})}};g([x({type:Date,json:{write:{allowNull:!0}}})],ps.prototype,"end",void 0),g([je("end")],ps.prototype,"readEnd",null),g([De("end")],ps.prototype,"writeEnd",null),g([x({readOnly:!0,json:{read:!1}})],ps.prototype,"isAllTime",null),g([x({readOnly:!0,json:{read:!1}})],ps.prototype,"isEmpty",null),g([x({type:Date,json:{write:{allowNull:!0}}})],ps.prototype,"start",void 0),g([je("start")],ps.prototype,"readStart",null),g([De("start")],ps.prototype,"writeStart",null),ps=Mo=g([K("esri.TimeExtent")],ps);const nI=new ps,Qse=new ps({start:void 0,end:void 0}),Mn=ps;var B4;let xd=B4=class extends ve{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new B4({mapLayerId:e,gdbVersion:t})}};g([Xe({mapLayer:"map-layer"})],xd.prototype,"type",void 0),g([x({type:li,json:{write:!0}})],xd.prototype,"mapLayerId",void 0),g([x({type:String,json:{write:!0}})],xd.prototype,"gdbVersion",void 0),xd=B4=g([K("esri.layers.support.source.MapLayerSource")],xd);var H4;let xl=H4=class extends ve{constructor(e){super(e),this.type="query-table"}clone(){var y;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,h={workspaceId:e,query:t,oidFields:i,spatialReference:(y=r==null?void 0:r.clone())!=null?y:void 0,geometryType:s};return new H4(h)}};g([Xe({queryTable:"query-table"})],xl.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],xl.prototype,"workspaceId",void 0),g([x({type:String,json:{write:!0}})],xl.prototype,"query",void 0),g([x({type:String,json:{write:!0}})],xl.prototype,"oidFields",void 0),g([x({type:ot,json:{write:!0}})],xl.prototype,"spatialReference",void 0),g([Xe(yY)],xl.prototype,"geometryType",void 0),xl=H4=g([K("esri.layers.support.source.QueryTableDataSource")],xl);var W4;let Sd=W4=class extends ve{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new W4({workspaceId:e,dataSourceName:t})}};g([Xe({raster:"raster"})],Sd.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],Sd.prototype,"dataSourceName",void 0),g([x({type:String,json:{write:!0}})],Sd.prototype,"workspaceId",void 0),Sd=W4=g([K("esri.layers.support.source.RasterDataSource")],Sd);var J4;let Mc=J4=class extends ve{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new J4({workspaceId:e,gdbVersion:t,dataSourceName:i})}};g([Xe({table:"table"})],Mc.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],Mc.prototype,"workspaceId",void 0),g([x({type:String,json:{write:!0}})],Mc.prototype,"gdbVersion",void 0),g([x({type:String,json:{write:!0}})],Mc.prototype,"dataSourceName",void 0),Mc=J4=g([K("esri.layers.support.source.TableDataSource")],Mc);var K4,Y4;const eoe=Jr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ns=K4=class extends ve{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return sI()(e,t,i)}castLeftTableSource(e){return Va(Z4(),e)}readRightTableSource(e,t,i){return sI()(e,t,i)}castRightTableSource(e){return Va(Z4(),e)}clone(){var y,f;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,h={leftTableKey:e,rightTableKey:t,leftTableSource:(y=i==null?void 0:i.clone())!=null?y:void 0,rightTableSource:(f=r==null?void 0:r.clone())!=null?f:void 0,joinType:s};return new K4(h)}};g([Xe({joinTable:"join-table"})],ns.prototype,"type",void 0),g([x({type:String,json:{write:!0}})],ns.prototype,"leftTableKey",void 0),g([x({type:String,json:{write:!0}})],ns.prototype,"rightTableKey",void 0),g([x({json:{write:!0}})],ns.prototype,"leftTableSource",void 0),g([je("leftTableSource")],ns.prototype,"readLeftTableSource",null),g([Mt("leftTableSource")],ns.prototype,"castLeftTableSource",null),g([x({json:{write:!0}})],ns.prototype,"rightTableSource",void 0),g([je("rightTableSource")],ns.prototype,"readRightTableSource",null),g([Mt("rightTableSource")],ns.prototype,"castRightTableSource",null),g([Xe(eoe)],ns.prototype,"joinType",void 0),ns=K4=g([K("esri.layers.support.source.JoinTableDataSource")],ns);let R_=null;function sI(){return R_||(R_=Z0({types:Z4()})),R_}let L_=null;function Z4(){return L_||(L_={key:"type",base:null,typeMap:{"data-layer":jo,"map-layer":xd}}),L_}const toe={key:"type",base:null,typeMap:{"join-table":ns,"query-table":xl,raster:Sd,table:Mc}};let jo=Y4=class extends ve{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Y4({fields:e,dataSource:t})}};g([Xe({dataLayer:"data-layer"})],jo.prototype,"type",void 0),g([x({type:[Z2],json:{write:!0}})],jo.prototype,"fields",void 0),g([x({types:toe,json:{write:!0}})],jo.prototype,"dataSource",void 0),jo=Y4=g([K("esri.layers.support.source.DataLayerSource")],jo),jo.from=ji(jo);var X4;const oI=new lt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Ec=X4=class extends ve{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new X4(de({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};g([x({type:Ut,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ec.prototype,"extent",void 0),g([x({type:["view","edit"],json:{write:!0}})],Ec.prototype,"mode",void 0),g([x({type:String,json:{read:oI.read,write:oI.write}})],Ec.prototype,"originPosition",void 0),g([x({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ec.prototype,"tolerance",void 0),Ec=X4=g([K("esri.rest.support.QuantizationParameters")],Ec);const TF=Ec;var Q4;const aI=new lt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Eo=Q4=class extends ve{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=de(e))}clone(){return new Q4({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:de(this.statisticParameters)})}};g([x({type:Number,json:{write:!0}})],Eo.prototype,"maxPointCount",void 0),g([x({type:Number,json:{write:!0}})],Eo.prototype,"maxRecordCount",void 0),g([x({type:Number,json:{write:!0}})],Eo.prototype,"maxVertexCount",void 0),g([x({type:String,json:{write:!0}})],Eo.prototype,"onStatisticField",void 0),g([x({type:String,json:{write:!0}})],Eo.prototype,"outStatisticFieldName",void 0),g([x({type:String,json:{read:{source:"statisticType",reader:aI.read},write:{target:"statisticType",writer:aI.write}}})],Eo.prototype,"statisticType",void 0),g([x({type:Object})],Eo.prototype,"statisticParameters",void 0),g([De("statisticParameters")],Eo.prototype,"writeStatisticParameters",null),Eo=Q4=g([K("esri.rest.support.StatisticDefinition")],Eo);const $F=Eo;var _0;const ioe=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),roe=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let nt=_0=class extends ve{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Y6(_0,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(h=>h instanceof Date?h.getTime():h):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new _0(de({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Y(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};nt.MAX_MAX_RECORD_COUNT_FACTOR=5,g([x({json:{write:!0}})],nt.prototype,"aggregateIds",void 0),g([x({type:Boolean,json:{write:!0}})],nt.prototype,"cacheHint",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"compactGeometryEnabled",void 0),g([x({json:{write:!0}})],nt.prototype,"datumTransformation",void 0),g([Mt("datumTransformation")],nt.prototype,"castDatumTransformation",null),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"defaultSpatialReferenceEnabled",void 0),g([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],nt.prototype,"distance",void 0),g([x({type:jo,json:{write:!0}})],nt.prototype,"dynamicDataSource",void 0),g([x({type:String,json:{write:!0}})],nt.prototype,"formatOf3DObjects",void 0),g([x({type:String,json:{write:!0}})],nt.prototype,"gdbVersion",void 0),g([x({types:Rh,json:{read:Ua,write:!0}})],nt.prototype,"geometry",void 0),g([x({type:Number,json:{write:!0}})],nt.prototype,"geometryPrecision",void 0),g([x({type:[String],json:{write:!0}})],nt.prototype,"groupByFieldsForStatistics",void 0),g([x({type:String,json:{write:!0}})],nt.prototype,"having",void 0),g([x({type:Date})],nt.prototype,"historicMoment",void 0),g([De("historicMoment")],nt.prototype,"writeHistoricMoment",null),g([x({type:Number,json:{write:!0}})],nt.prototype,"maxAllowableOffset",void 0),g([x({type:Number,cast:e=>e<1?1:e>_0.MAX_MAX_RECORD_COUNT_FACTOR?_0.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],nt.prototype,"maxRecordCountFactor",void 0),g([x({type:["xyFootprint"],json:{write:!0}})],nt.prototype,"multipatchOption",void 0),g([x({type:Number,json:{read:{source:"resultRecordCount"}}})],nt.prototype,"num",void 0),g([x({json:{write:!0}})],nt.prototype,"objectIds",void 0),g([x({type:[String],json:{write:!0}})],nt.prototype,"orderByFields",void 0),g([x({type:[String],json:{write:!0}})],nt.prototype,"outFields",void 0),g([x({type:ot,json:{name:"outSR",write:!0}})],nt.prototype,"outSpatialReference",void 0),g([x({type:[$F],json:{write:{enabled:!0,overridePolicy(){return{enabled:Y(this.outStatistics)&&this.outStatistics.length>0}}}}})],nt.prototype,"outStatistics",void 0),g([x({json:{write:!0}})],nt.prototype,"parameterValues",void 0),g([De("parameterValues")],nt.prototype,"writeParameterValues",null),g([x({type:et,json:{write:!0}})],nt.prototype,"pixelSize",void 0),g([x({type:TF,json:{write:!0}})],nt.prototype,"quantizationParameters",void 0),g([x({type:[Object],json:{write:!0}})],nt.prototype,"rangeValues",void 0),g([x({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],nt.prototype,"relationParameter",void 0),g([x({type:String,json:{write:!0}})],nt.prototype,"resultType",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnCentroid",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnDistinctValues",void 0),g([x({type:Boolean,json:{default:!0,write:!0}})],nt.prototype,"returnExceededLimitFeatures",void 0),g([x({type:Boolean,json:{write:!0}})],nt.prototype,"returnGeometry",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnQueryGeometry",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"returnM",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],nt.prototype,"returnZ",void 0),g([x({type:ot,json:{write:!0}})],nt.prototype,"sourceSpatialReference",void 0),g([Xe(ioe,{ignoreUnknown:!1,name:"spatialRel"})],nt.prototype,"spatialRelationship",void 0),g([x({type:Number,json:{read:{source:"resultOffset"}}})],nt.prototype,"start",void 0),g([De("start"),De("num")],nt.prototype,"writeStart",null),g([x({type:String,json:{write:!0}})],nt.prototype,"sqlFormat",void 0),g([x({type:String,json:{write:!0}})],nt.prototype,"text",void 0),g([x({type:Mn,json:{write:!0}})],nt.prototype,"timeExtent",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],nt.prototype,"timeReferenceUnknownClient",void 0),g([Xe(roe,{ignoreUnknown:!1}),x({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],nt.prototype,"units",void 0),g([x({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],nt.prototype,"where",void 0),g([De("where")],nt.prototype,"writeWhere",null),nt=_0=g([K("esri.rest.support.Query")],nt);const Js=nt;var eS;const F_=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),j_=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let va=eS=class extends ve{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:h,units:y,distance:f}=this;return new Js({geometry:de(i),objectIds:de(h),spatialRelationship:r,timeExtent:de(s),where:t,units:y,distance:f,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:h,distance:y}=this;return new eS({geometry:de(t),objectIds:de(s),spatialRelationship:i,timeExtent:de(r),where:e,units:h,distance:y})}};g([x({type:String,json:{write:!0}})],va.prototype,"where",void 0),g([x({types:Rh,json:{write:!0}})],va.prototype,"geometry",void 0),g([x({type:F_.apiValues,json:{name:"spatialRel",read:{reader:F_.read},write:{allowNull:!1,writer:F_.write,overridePolicy(){return{enabled:Y(this.geometry)}}}}})],va.prototype,"spatialRelationship",void 0),g([x({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],va.prototype,"distance",void 0),g([x({type:[Number],json:{write:!0}})],va.prototype,"objectIds",void 0),g([x({type:j_.apiValues,json:{read:j_.read,write:{writer:j_.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],va.prototype,"units",void 0),g([x({type:Mn,json:{write:!0}})],va.prototype,"timeExtent",void 0),va=eS=g([K("esri.layers.support.FeatureFilter")],va);const noe=va;var tS;const lI={read:{reader:M7},write:{writer:E7,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},uI={read:{reader:M7},write:{writer:E7,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},hI={name:"showExcludedLabels",default:!0};let Tc=tS=class extends ve{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const h=Object.keys(i.filter);if(h.length>1||h[0]!=="where")return(r=t.messages)==null||r.push(new ne("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new ne("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new tS({filter:Y(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};g([x({type:noe,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?Ur(i,s,t):Ur(i,null,t)}}}})],Tc.prototype,"filter",void 0),g([x({json:{write:!0,origins:{"web-map":lI,"portal-item":lI}}})],Tc.prototype,"includedEffect",void 0),g([x({json:{write:!0,origins:{"web-map":uI,"portal-item":uI}}})],Tc.prototype,"excludedEffect",void 0),g([x({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":hI,"portal-item":hI}}})],Tc.prototype,"excludedLabelsVisible",void 0),Tc=tS=g([K("esri.layers.support.FeatureEffect")],Tc);const soe=Tc,cI={write:{allowNull:!0}},ooe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return g([x({type:soe,json:{origins:{"web-map":cI,"portal-item":cI}}})],t.prototype,"featureEffect",void 0),t=g([K("esri.layers.mixins.FeatureEffectLayer")],t),t},aoe={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function loe(e){if(!e)return e;const{start:t,end:i}=e;return new Mn({start:Y(t)?yp(t,-t.getTimezoneOffset(),"minutes"):t,end:Y(i)?yp(i,-i.getTimezoneOffset(),"minutes"):i})}function uoe(e){if(!e)return e;const{start:t,end:i}=e;return new Mn({start:Y(t)?yp(t,t.getTimezoneOffset(),"minutes"):t,end:Y(i)?yp(i,i.getTimezoneOffset(),"minutes"):i})}var iS;let ey=iS=class extends ve{async collectRequiredFields(e,t){return xn(e,t,this.expression)}clone(){return new iS({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};g([x({type:String,json:{write:!0}})],ey.prototype,"expression",void 0),g([x({type:String,json:{write:!0}})],ey.prototype,"title",void 0),ey=iS=g([K("esri.layers.support.FeatureExpressionInfo")],ey);const pI=ey;function oxe(e){return H2[e]!=null}function hoe(e){return 1/(H2[e]||1)}function coe(){const e=Object.keys(H2);return e.sort(),e}const poe=coe();var rS;const Og=Jr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),dI=new lt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Sl=rS=class extends ve{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):Y(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new rS({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&jH(this.featureExpressionInfo,e.featureExpressionInfo)}};g([x({type:pI,json:{write:!0}})],Sl.prototype,"featureExpressionInfo",void 0),g([je("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Sl.prototype,"readFeatureExpressionInfo",null),g([De("featureExpressionInfo",{featureExpressionInfo:{type:pI},"featureExpression.value":{type:[0]}})],Sl.prototype,"writeFeatureExpressionInfo",null),g([x({type:Og.apiValues,nonNullable:!0,json:{type:Og.jsonValues,read:Og.read,write:{writer:Og.write,isRequired:!0}}})],Sl.prototype,"mode",null),g([x({type:Number,json:{write:!0}})],Sl.prototype,"offset",void 0),g([x({type:poe,json:{type:String,read:dI.read,write:dI.write}})],Sl.prototype,"unit",null),Sl=rS=g([K("esri.layers.support.ElevationInfo")],Sl);const IF=Sl,doe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},T7={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},$7={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},foe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Tp}}},yoe={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},moe={value:null,type:IF,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function axe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const vb={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},goe={...vb,json:{...vb.json,origins:{"web-document":{...vb.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?im(t.layerDefinition.drawingInfo.transparency):void 0:im(t.drawingInfo.transparency)}}},lxe={type:Mn,readOnly:!0,get(){var f,w;if(!((f=this.layer)!=null&&f.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(w=this.view)==null?void 0:w.timeExtent;let s=this.layer.timeExtent;e&&(s=uoe(s));let h=i?r&&s?r.intersection(s):r||s:s;if(!h||h.isEmpty||h.isAllTime)return h;t&&(h=h.offset(-t.value,t.unit)),e&&(h=loe(h));const y=this._get("timeExtent");return h.equals(y)?y:h}},uxe={type:Ut,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Ut.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=ot.fromJSON(t.spatialReference)),i}}}},read:!1}},voe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},boe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},woe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},AF={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},_oe=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,h){(h&&h.layerContainerType==="ground"||i&&FJ(this,s,{},h))&&(r[s]=i)}writeOperationalLayerType(i,r,s,h){!i||h&&h.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i||"Layer"}read(i,r){r&&(r.layer=this),$P(this,i,s=>super.read(i,s),r)}write(i,r){var y,f;if(r!=null&&r.origin){const w=`${r.origin}/${r.layerContainerType||"operational-layers"}`,S=aoe[w];let E=S&&S[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&w==="web-scene/operational-layers"&&(E=!1),!E)return(y=r.messages)==null||y.push(new ne("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${w}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),h=!!r&&!!r.messages&&!!r.messages.filter(w=>w instanceof ne&&w.name==="web-document-write:property-required").length;return j2(s==null?void 0:s.url)?((f=r==null?void 0:r.messages)==null||f.push(new ne("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&h?null:s}beforeSave(){}};return g([x({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),g([x(AF)],t.prototype,"listMode",void 0),g([De("listMode")],t.prototype,"writeListMode",null),g([x({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),g([De("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),g([x(vb)],t.prototype,"opacity",void 0),g([x({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),g([De([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),g([x({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=g([K("esri.layers.mixins.OperationalLayer")],t),t};var nS;const D_=new lt({asc:"ascending",desc:"descending"});let Md=nS=class extends ve{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new nS({field:this.field,valueExpression:this.valueExpression,order:this.order})}};g([x({type:String,json:{write:!0}})],Md.prototype,"field",void 0),g([x({type:String,json:{write:!0}})],Md.prototype,"valueExpression",void 0),g([x({type:D_.apiValues,json:{read:D_.read,write:D_.write}})],Md.prototype,"order",void 0),Md=nS=g([K("esri.layers.support.OrderByInfo")],Md);const kF=Md;function xoe(e,t,i){if(!e)return null;const r=e.find(h=>!!h.field);if(!r)return null;const s=new kF;return s.read(r,i),[s]}function Soe(e,t,i,r){const s=e.find(h=>!!h.field);s&&Ur(i,[s.toJSON()],t)}const Moe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return g([x({type:[kF],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:xoe},write:{target:"layerDefinition.orderBy",writer:Soe}}})],t.prototype,"orderBy",void 0),t=g([K("esri.layers.mixins.OrderedLayer")],t),t},Eoe=Le.getLogger("esri.layers.mixins.PortalLayer"),Toe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new F0({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await ge(()=>import("./layersLoader.6a08d389.js").then(h=>h.l),["assets/layersLoader.6a08d389.js","assets/lazyLayerLoader.350d4ca7.js","assets/jsonContext.742790c7.js"]);return di(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},r)}catch(s){throw Br(s)||Eoe.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(km(r),!0)))}async _fetchUserHasEditingPrivileges(i){const r=this.url?Fi==null?void 0:Fi.findCredential(this.url):null;if(!r)return!0;const s=Pg.credential===r?Pg.user:await this._fetchEditingUser(i);return Pg.credential=r,Pg.user=s,oe(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var E,A;const r=(A=(E=this.portalItem)==null?void 0:E.portal)==null?void 0:A.user;if(r)return r;const s=Fi.findServerInfo(this.url);if(!(s!=null&&s.owningSystemUrl))return null;const h=`${s.owningSystemUrl}/sharing/rest`,y=ur.getDefault();if(y&&y.loaded&&Xs(y.restUrl)===Xs(h))return y.user;const f=`${h}/community/self`,w=Y(i)?i.signal:null,S=await U2(ni(f,{authMode:"no-prompt",query:{f:"json"},signal:w}));return S.ok?WM.fromJSON(S.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,h=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ur.getDefault());return s&&h&&!fR(h.restUrl,s.restUrl)?(r.messages&&r.messages.push(new ne("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return g([x({type:F0})],t.prototype,"portalItem",null),g([je("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),g([De("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),g([x({clonable:!1})],t.prototype,"resourceReferences",void 0),g([x({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=g([K("esri.layers.mixins.PortalLayer")],t),t},Pg={credential:null,user:null},cm=new Je,Ny=new WeakMap;function $oe(e){CF(e)&&cm.push(e)}function Ioe(e){CF(e)&&cm.includes(e)&&cm.remove(e)}function CF(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function OF(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:OF(t,e%t):0}let z_=0,Ng=0;function Aoe(){var t;const e=Date.now();for(const i of cm)i.refreshInterval&&e-((t=Ny.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(Ny.set(i,e),i.refresh(e))}wP(()=>{const e=Date.now();let t=0;for(const i of cm)t=OF(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?Ny.get(i)||Ny.set(i,e):Ny.delete(i);if(t!==Ng){if(Ng=t,clearInterval(z_),Ng===0)return void(z_=0);z_=setInterval(Aoe,Ng)}});const koe=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=nM(()=>this.hasDataChanged()),this.when().then(()=>{$oe(this)},()=>{})}destroy(){Ioe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){u5(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Le.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return g([x({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),g([x({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),g([x()],t.prototype,"refreshParameters",null),t=g([K("esri.layers.mixins.RefreshableLayer")],t),t},PF=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&Coe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return g([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),g([x({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),g([x({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=g([K("esri.layers.mixins.ScaleRangeLayer")],t),t};function Coe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const tp=Jr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var sS;let ty=sS=class extends ve{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Xse(this.value,this.unit,"milliseconds")}clone(){return new sS({value:this.value,unit:this.unit})}};g([x({type:Number,json:{write:!0},nonNullable:!0})],ty.prototype,"value",void 0),g([x({type:tp.apiValues,json:{type:tp.jsonValues,read:tp.read,write:tp.write},nonNullable:!0})],ty.prototype,"unit",void 0),ty=sS=g([K("esri.TimeInterval")],ty);const kp=ty;var oS;let Ed=oS=class extends ve{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new oS({respectsDaylightSaving:e,timezone:t})}};g([x({type:Boolean,json:{write:!0}})],Ed.prototype,"respectsDaylightSaving",void 0),g([je("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],Ed.prototype,"readRespectsDaylightSaving",null),g([x({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],Ed.prototype,"timezone",void 0),Ed=oS=g([K("esri.layers.support.TimeReference")],Ed);const Ooe=Ed;var aS;let Zr=aS=class extends ve{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new Mn({start:i,end:r})}writeFullTimeExtent(e,t){e&&Y(e.start)&&Y(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new kp({value:t.timeInterval,unit:tp.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new kp({value:t.defaultTimeInterval,unit:tp.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:h,fullTimeExtent:y,trackIdField:f,useTime:w}=this;return new aS({cumulative:e,endField:t,hasLiveData:i,interval:r,startField:s,timeReference:de(h),fullTimeExtent:de(y),trackIdField:f,useTime:w})}};g([x({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Zr.prototype,"cumulative",void 0),g([x({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Zr.prototype,"endField",void 0),g([x({type:Mn,json:{write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"fullTimeExtent",void 0),g([je("fullTimeExtent",["timeExtent"])],Zr.prototype,"readFullTimeExtent",null),g([De("fullTimeExtent")],Zr.prototype,"writeFullTimeExtent",null),g([x({type:Boolean,json:{write:!0}})],Zr.prototype,"hasLiveData",void 0),g([x({type:kp,json:{write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"interval",void 0),g([je("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Zr.prototype,"readInterval",null),g([De("interval")],Zr.prototype,"writeInterval",null),g([x({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Zr.prototype,"startField",void 0),g([x({type:Ooe,json:{write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"timeReference",void 0),g([x({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Zr.prototype,"trackIdField",void 0),g([x({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Zr.prototype,"useTime",void 0),Zr=aS=g([K("esri.layers.support.TimeInfo")],Zr);const NF=Zr,Poe=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const h=s.timeOffset,y=tp.fromJSON(s.timeOffsetUnits);return h&&y?new kp({value:h,unit:y}):null}set timeInfo(i){eN(i,this.fieldsIndex),this._set("timeInfo",i)}};return g([x({type:Mn,json:{write:!1}})],t.prototype,"timeExtent",void 0),g([x({type:kp})],t.prototype,"timeOffset",void 0),g([je("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),g([x({value:null,type:NF,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),g([x({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=g([K("esri.layers.mixins.TemporalLayer")],t),t};var lS;let Nl=lS=class extends ve{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:r,description:s}=this;return new lS({name:e,fields:t,isAscending:i,isUnique:r,description:s})}};g([x({constructOnly:!0})],Nl.prototype,"name",void 0),g([x({constructOnly:!0})],Nl.prototype,"fields",void 0),g([x({constructOnly:!0})],Nl.prototype,"isAscending",void 0),g([x({constructOnly:!0})],Nl.prototype,"isUnique",void 0),g([x({constructOnly:!0})],Nl.prototype,"description",void 0),Nl=lS=g([K("esri.layers.support.FeatureIndex")],Nl);let Mh=class extends ve{constructor(){super(...arguments),this.type=null}};g([x({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Mh.prototype,"type",void 0),Mh=g([K("esri.layers.support.FeatureReduction")],Mh);var uS;let Td=uS=class extends ve{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new uS({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};g([x({type:String,json:{write:!0}})],Td.prototype,"statisticType",void 0),g([x({type:String,json:{write:!0}})],Td.prototype,"onStatisticField",void 0),g([x({type:String,json:{write:!0}})],Td.prototype,"onStatisticValueExpression",void 0),Td=uS=g([K("esri.layers.support.OutStatistic")],Td);const Noe=Td;var hS;let iy=hS=class extends ve{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new hS({name:this.name,outStatistic:this.outStatistic.clone()})}};g([x({type:String,json:{write:!0}})],iy.prototype,"name",void 0),g([x({type:Noe,json:{write:!0}})],iy.prototype,"outStatistic",void 0),iy=hS=g([K("esri.layers.support.AggregateField")],iy);const RF=iy,I7="__begin__",A7="__end__",Roe=new RegExp(I7,"ig"),Loe=new RegExp(A7,"ig"),fI=new RegExp("^"+I7,"i"),yI=new RegExp(A7+"$","i"),Cw='"',Foe=Cw+" + ",joe=" + "+Cw;function Doe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function zoe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function k7(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Doe(e.labelExpression),t.type="conventional"),t}function Voe(e){const t=k7(e);if(!t)return null;switch(t.type){case"conventional":return cS(t.expression);case"arcade":return t.expression}return null}function Goe(e){const t=k7(e);if(!t)return null;switch(t.type){case"conventional":return qoe(t.expression);case"arcade":return LF(t.expression)}return null}function cS(e){let t;return e?(t=za(e,i=>I7+'$feature["'+i+'"]'+A7),t=fI.test(t)?t.replace(fI,""):Cw+t,t=yI.test(t)?t.replace(yI,""):t+Cw,t=t.replace(Roe,Foe).replace(Loe,joe)):t='""',t}const Uoe=/^\s*\{([^}]+)\}\s*$/i;function qoe(e){const t=e.match(Uoe);return t&&t[1].trim()||null}const Boe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Hoe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Woe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function LF(e){if(!e)return null;let t=Boe.exec(e)||Hoe.exec(e);return t?t[1]||t[3]:(t=Woe.exec(e),t?t[2]:null)}var pS;let Vu=pS=class extends ve{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?cS(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=cS(this.value)),e!=null&&(t[i]=e)}clone(){return new pS({expression:this.expression,title:this.title,value:this.value})}};g([x({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Vu.prototype,"expression",void 0),g([je("expression",["expression","value"])],Vu.prototype,"readExpression",null),g([De("expression")],Vu.prototype,"writeExpression",null),g([x({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Vu.prototype,"title",void 0),g([x({json:{read:!1,write:!1}})],Vu.prototype,"value",void 0),Vu=pS=g([K("esri.layers.support.LabelExpressionInfo")],Vu);const FF=Vu,jF=[252,146,31,255],hxe=[153,153,153,255],Joe={type:"esriSMS",style:"esriSMSCircle",size:6,color:jF,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Koe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:jF},Yoe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Zoe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Xoe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Qoe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},eae={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},tae=Jo.fromJSON(Joe),iae=Yn.fromJSON(Koe),rae=Ja.fromJSON(Yoe),nae=yf.fromJSON(Zoe);function cxe(e){if(oe(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return tae;case"polyline":return iae;case"polygon":case"extent":return rae}return null}const pxe=Jo.fromJSON(Xoe),dxe=Yn.fromJSON(Qoe),fxe=Ja.fromJSON(eae);var dS;const Rg=new lt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function DF(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function sae(e){return(e==null?void 0:e.type)==="map-image"}function zF(e){var t,i;return!!sae(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function oae(e){return DF(e)||zF(e.layer)}let Gi=dS=class extends ve{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=nae,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(r,s,h)=>{switch(s){case"=":return r==h;case"<>":return r!=h;case">":return r>h;case">=":return r>=h;case"<":return r<h;case"<=":return r<=h}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),h=r[3],y=i(t[r[4]],r[5],r[6]);switch(h){case"AND":return s&&y;case"OR":return s||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=zoe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=LF(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&DF(r))e=new FF({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return k7(this)}getLabelExpressionArcade(){return Voe(this)}getLabelExpressionSingleField(){return Goe(this)}hash(){return JSON.stringify(this)}clone(){return new dS({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:de(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:de(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};g([x({type:String,json:{write:!0}})],Gi.prototype,"name",void 0),g([x({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Gi.prototype,"allowOverrun",void 0),g([x({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Gi.prototype,"deconflictionStrategy",void 0),g([x({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&zF(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Gi.prototype,"labelExpression",void 0),g([je("labelExpression")],Gi.prototype,"readLabelExpression",null),g([De("labelExpression")],Gi.prototype,"writeLabelExpression",null),g([x({type:FF,json:{write:{overridePolicy:(e,t,i)=>oae(i)?{allowNull:!0}:{enabled:!1}}}})],Gi.prototype,"labelExpressionInfo",void 0),g([De("labelExpressionInfo")],Gi.prototype,"writeLabelExpressionInfo",null),g([x({type:Rg.apiValues,json:{type:Rg.jsonValues,read:Rg.read,write:Rg.write}})],Gi.prototype,"labelPlacement",void 0),g([x({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Gi.prototype,"labelPosition",void 0),g([x({type:Number})],Gi.prototype,"maxScale",void 0),g([De("maxScale")],Gi.prototype,"writeMaxScale",null),g([x({type:Number})],Gi.prototype,"minScale",void 0),g([De("minScale")],Gi.prototype,"writeMinScale",null),g([x({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Gi.prototype,"repeatLabel",void 0),g([x({type:Number,cast:Dt,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Gi.prototype,"repeatLabelDistance",void 0),g([x({types:Ree,json:{origins:{"web-scene":{types:Lee,write:M8,default:null}},write:M8,default:null}})],Gi.prototype,"symbol",void 0),g([x({type:Boolean,json:{write:!0}})],Gi.prototype,"useCodedValues",void 0),g([x({type:String,json:{write:!0}})],Gi.prototype,"where",void 0),Gi=dS=g([K("esri.layers.support.LabelClass")],Gi);const o3=Gi;var fS;let To=fS=class extends Mh{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new fS({fields:de(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:de(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:de(this.popupTemplate),renderer:de(this.renderer)})}};g([Xe({binning:"binning"})],To.prototype,"type",void 0),g([x({type:Number,json:{write:!0}})],To.prototype,"fixedBinLevel",void 0),g([x({type:[o3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],To.prototype,"labelingInfo",void 0),g([x($7)],To.prototype,"labelsVisible",void 0),g([x(T7)],To.prototype,"popupEnabled",void 0),g([x({type:sf,json:{name:"popupInfo",write:!0}})],To.prototype,"popupTemplate",void 0),g([x({type:[RF],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],To.prototype,"fields",void 0),g([x({types:K2,json:{write:!0}})],To.prototype,"renderer",void 0),To=fS=g([K("esri.layers.support.FeatureReductionBinning")],To);const aae=To;var yS;let Pn=yS=class extends ve{constructor(e){super(e),this.type="cluster",this.clusterRadius=Dt("80px"),this.clusterMinSize=Dt("12px"),this.clusterMaxSize=Dt("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new yS({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:de(this.labelingInfo),labelsVisible:this.labelsVisible,fields:de(this.fields),renderer:de(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:de(this.popupTemplate)})}};g([x({type:["cluster"],readOnly:!0,json:{write:!0}})],Pn.prototype,"type",void 0),g([x({type:Number,cast:e=>e==="auto"?e:Dt(e),json:{write:!0}})],Pn.prototype,"clusterRadius",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Pn.prototype,"clusterMinSize",void 0),g([x({type:Number,cast:Dt,json:{write:!0}})],Pn.prototype,"clusterMaxSize",void 0),g([x(T7)],Pn.prototype,"popupEnabled",void 0),g([x({type:sf,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Pn.prototype,"popupTemplate",void 0),g([x({types:K2,json:{write:!0}})],Pn.prototype,"renderer",void 0),g([x({types:Pee})],Pn.prototype,"symbol",void 0),g([x({type:[o3],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Pn.prototype,"labelingInfo",void 0),g([x($7)],Pn.prototype,"labelsVisible",void 0),g([x({type:[RF],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Pn.prototype,"fields",void 0),Pn=yS=g([K("esri.layers.support.FeatureReductionCluster")],Pn);const VF=Pn;var mS;let bb=mS=class extends Mh{constructor(e){super(e),this.type="selection"}clone(){return new mS}};g([x({type:["selection"]})],bb.prototype,"type",void 0),bb=mS=g([K("esri.layers.support.FeatureReductionSelection")],bb);const mI=bb,gI={key:"type",base:Mh,typeMap:{selection:VF}},lae={types:{key:"type",base:Mh,typeMap:{selection:mI,cluster:VF,binning:aae}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:gI},"portal-item":{types:gI},"web-scene":{types:{key:"type",base:Mh,typeMap:{selection:mI}}}}}},vI=new lt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Gu=class extends Wi(ve){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};g([x({json:{write:!0}})],Gu.prototype,"name",void 0),g([x({json:{write:!0}})],Gu.prototype,"description",void 0),g([x({json:{read:vI.read,write:vI.write}})],Gu.prototype,"drawingTool",void 0),g([x({json:{write:!0}})],Gu.prototype,"prototype",void 0),g([x({json:{write:!0}})],Gu.prototype,"thumbnail",void 0),Gu=g([K("esri.layers.support.FeatureTemplate")],Gu);const C7=Gu;let Ml=class extends Wi(ve){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=m7(e[i]);return t}writeDomains(e,t){var r;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};g([x({json:{write:!0}})],Ml.prototype,"id",void 0),g([x({json:{write:!0}})],Ml.prototype,"name",void 0),g([x({json:{write:!0}})],Ml.prototype,"domains",void 0),g([je("domains")],Ml.prototype,"readDomains",null),g([De("domains")],Ml.prototype,"writeDomains",null),g([x({type:[C7],json:{write:!0}})],Ml.prototype,"templates",void 0),Ml=g([K("esri.layers.support.FeatureType")],Ml);const GF=Ml;function uae(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function bI(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function wI(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class hae{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const r of t){const s=r&&r.name;if(s){const h=_I(s);this._fieldsMap.set(s,r),this._fieldsMap.set(h,r),i.push(h),uae(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):bM(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),bI(r)||wI(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)bI(t)||wI(t)||t.nullable||OY(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(_I(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function _I(e){return e.toLowerCase().trim()}const cae=Le.getLogger("esri.layers.support.fieldProperties");function pae(){return{fields:{type:[Z2],value:null},fieldsIndex:{readOnly:!0,get(){return new hae(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||cae.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return tN(this.fieldsIndex,e)}}}}let $d=class extends Wi(ve){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};g([x({type:String,json:{read:{source:"shapeAreaFieldName"}}})],$d.prototype,"shapeAreaField",void 0),g([x({type:String,json:{read:{source:"shapeLengthFieldName"}}})],$d.prototype,"shapeLengthField",void 0),g([x({type:String,json:{read:e=>wie.read(e)||_ie.read(e)}})],$d.prototype,"units",void 0),$d=g([K("esri.layers.support.GeometryFieldsInfo")],$d);const dae=$d,fae=/\[([^\[\]]+)\]/gi;function xI(e,t,i){return e?e.map(r=>{const s=new o3;if(s.read(r,i),s.labelExpression){const h=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(fae,(y,f)=>`[${yae(f,h)}]`)}return s}):null}function yae(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}var gS;let Id=gS=class extends ve{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Je}clone(){return new gS({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};g([x({type:String,json:{write:!0}})],Id.prototype,"floorField",void 0),g([x({json:{read:!1,write:!1}})],Id.prototype,"viewAllMode",void 0),g([x({json:{read:!1,write:!1}})],Id.prototype,"viewAllLevelIds",void 0),Id=gS=g([K("esri.layers.support.LayerFloorInfo")],Id);const mae=Id,SI=new lt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),MI=new lt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ds=class extends Wi(ve){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};g([x({json:{read:SI.read,write:SI.write}})],Ds.prototype,"cardinality",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"composite",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"id",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"keyField",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"keyFieldInRelationshipTable",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"name",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"relatedTableId",void 0),g([x({json:{read:!0,write:!0}})],Ds.prototype,"relationshipTableId",void 0),g([x({json:{read:MI.read,write:MI.write}})],Ds.prototype,"role",void 0),Ds=g([K("esri.layers.support.Relationship")],Ds);const gae=Ds,$o=[];function vae(e,t){if(uL(e.url))return!0;const{wkid:i}=t;for(const r of $o){if(e.version>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}$o.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),$o.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),$o.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),$o.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),$o.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),$o.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),$o.push([10.61,()=>new Set([102497])]),$o.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),$o.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),$o.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function bae(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await U2(r.populateFromStyle());if(di(i),s.ok===!1){const h=s.error;t&&t.messages&&t.messages.push(new _n("renderer:style-reference",`Failed to create unique value renderer from style reference: ${h.message}`,{error:h,context:t})),e.clear("renderer",t.origin)}}}var vS;let Ar=vS=class extends ve{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new vS(de({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};g([x({type:[String],json:{write:!0}})],Ar.prototype,"attachmentTypes",void 0),g([x({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ar.prototype,"attachmentsWhere",void 0),g([x({type:Boolean,json:{write:!0}})],Ar.prototype,"cacheHint",void 0),g([x({type:[String],json:{write:!0}})],Ar.prototype,"keywords",void 0),g([x({type:[Number],json:{write:!0}})],Ar.prototype,"globalIds",void 0),g([x({json:{write:!0}})],Ar.prototype,"name",void 0),g([x({type:Number,json:{read:{source:"resultRecordCount"}}})],Ar.prototype,"num",void 0),g([x({type:[Number],json:{write:!0}})],Ar.prototype,"objectIds",void 0),g([x({type:Boolean,json:{default:!1,write:!0}})],Ar.prototype,"returnMetadata",void 0),g([x({type:[Number],json:{write:!0}})],Ar.prototype,"size",void 0),g([x({type:Number,json:{read:{source:"resultOffset"}}})],Ar.prototype,"start",void 0),g([De("start"),De("num")],Ar.prototype,"writeStart",null),g([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ar.prototype,"where",void 0),Ar=vS=g([K("esri.rest.support.AttachmentQuery")],Ar),Ar.from=ji(Ar);const bS=Ar;var wS;let $i=wS=class extends ve{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new wS(de({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};g([x({type:Boolean,json:{write:!0}})],$i.prototype,"cacheHint",void 0),g([x({type:jo,json:{write:!0}})],$i.prototype,"dynamicDataSource",void 0),g([x({type:String,json:{write:!0}})],$i.prototype,"gdbVersion",void 0),g([x({type:Number,json:{write:!0}})],$i.prototype,"geometryPrecision",void 0),g([x({type:Date})],$i.prototype,"historicMoment",void 0),g([De("historicMoment")],$i.prototype,"_writeHistoricMoment",null),g([x({type:Number,json:{write:!0}})],$i.prototype,"maxAllowableOffset",void 0),g([x({type:[Number],json:{write:!0}})],$i.prototype,"objectIds",void 0),g([x({type:[String],json:{write:!0}})],$i.prototype,"orderByFields",void 0),g([x({type:[String],json:{write:!0}})],$i.prototype,"outFields",void 0),g([x({type:ot,json:{read:{source:"outSR"},write:{target:"outSR"}}})],$i.prototype,"outSpatialReference",void 0),g([x({json:{write:!0}})],$i.prototype,"relationshipId",void 0),g([x({type:Number,json:{read:{source:"resultOffset"}}})],$i.prototype,"start",void 0),g([De("start"),De("num")],$i.prototype,"writeStart",null),g([x({type:Number,json:{read:{source:"resultRecordCount"}}})],$i.prototype,"num",void 0),g([x({json:{write:!0}})],$i.prototype,"returnGeometry",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],$i.prototype,"returnM",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],$i.prototype,"returnZ",void 0),g([x({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],$i.prototype,"where",void 0),$i=wS=g([K("esri.rest.support.RelationshipQuery")],$i),$i.from=ji($i);const _S=$i;var xS;let Ad=xS=class extends ve{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new xS({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};g([x({type:[String],json:{write:!0}})],Ad.prototype,"groupByFields",void 0),g([x({type:Number,json:{write:!0}})],Ad.prototype,"topCount",void 0),g([x({type:[String],json:{write:!0}})],Ad.prototype,"orderByFields",void 0),Ad=xS=g([K("esri.rest.support.TopFilter")],Ad);const wae=Ad;var SS;const EI=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),TI=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let gi=SS=class extends ve{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new SS(de({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};g([x({type:Boolean,json:{write:!0}})],gi.prototype,"cacheHint",void 0),g([x({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],gi.prototype,"distance",void 0),g([x({types:Rh,json:{read:Ua,write:!0}})],gi.prototype,"geometry",void 0),g([x({type:Number,json:{write:!0}})],gi.prototype,"geometryPrecision",void 0),g([x({type:Number,json:{write:!0}})],gi.prototype,"maxAllowableOffset",void 0),g([x({type:Number,json:{read:{source:"resultRecordCount"}}})],gi.prototype,"num",void 0),g([x({json:{write:!0}})],gi.prototype,"objectIds",void 0),g([x({type:[String],json:{write:!0}})],gi.prototype,"orderByFields",void 0),g([x({type:[String],json:{write:!0}})],gi.prototype,"outFields",void 0),g([x({type:ot,json:{read:{source:"outSR"},write:{target:"outSR"}}})],gi.prototype,"outSpatialReference",void 0),g([x({type:String,json:{write:!0}})],gi.prototype,"resultType",void 0),g([x({json:{write:!0}})],gi.prototype,"returnGeometry",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],gi.prototype,"returnM",void 0),g([x({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],gi.prototype,"returnZ",void 0),g([x({type:Number,json:{read:{source:"resultOffset"}}})],gi.prototype,"start",void 0),g([De("start"),De("num")],gi.prototype,"writeStart",null),g([x({type:String,json:{read:{source:"spatialRel",reader:EI.read},write:{target:"spatialRel",writer:EI.write}}})],gi.prototype,"spatialRelationship",void 0),g([x({type:Mn,json:{write:!0}})],gi.prototype,"timeExtent",void 0),g([x({type:wae,json:{write:!0}})],gi.prototype,"topFilter",void 0),g([x({type:String,json:{read:TI.read,write:{writer:TI.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],gi.prototype,"units",void 0),g([x({type:String,json:{write:!0}})],gi.prototype,"where",void 0),gi=SS=g([K("esri.rest.support.TopFeaturesQuery")],gi),gi.from=ji(gi);const Lg=gi,_ae=["oid","global-id"],xae=["oid","global-id","guid"];function Sae({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},h){if(!i)return null;const y=Aae({editFieldsInfo:t,fields:i,objectIdField:r},h);if(!y.length)return null;const f=Oae({titleBase:s,fields:i,displayField:e}),w=Cae();return new sf({title:f,content:w,fieldInfos:y})}const Mae=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Eae=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!UF(e.name,t)&&(!i||e.name!==i)&&!_ae.includes(e.type)&&!Mae.some(s=>s.test(e.name));function Tae(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort($ae),e}function $ae(e,t){return e.type==="oid"?-1:t.type==="oid"?1:$I(e)?-1:$I(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function UF(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:h}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),h&&h.toLowerCase()].includes(e.toLowerCase())}function Iae(e,t){return e.editable&&!xae.includes(e.type)&&!UF(e.name,t)}function Aae({editFieldsInfo:e,fields:t,objectIdField:i},r){return Tae(t,(r==null?void 0:r.ignoreFieldTypes)||Pae).map(s=>new Om({fieldName:s.name,isEditable:Iae(s,e),label:s.alias,format:kae(s),visible:Eae(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function kae(e){switch(e.type){case"small-integer":case"integer":case"single":return new n0({digitSeparator:!0,places:0});case"double":return new n0({digitSeparator:!0,places:2});case"date":return new n0({dateFormat:"long-month-day-year"});default:return e.type==="string"&&aN(e.name)?new n0({digitSeparator:!0,places:0}):null}}function Cae(){return[new N0,new Zy]}function Oae(e){const t=$Y(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function $I(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const Pae=["geometry","blob","raster","guid","xml"],V_=new lt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Nae={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Vi="FeatureLayer",II=Le.getLogger("esri.layers.FeatureLayer");function Fg(e,t){return new ne("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function AI(e){return e&&e instanceof Je}function ut(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function jg(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function Rae(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function e1(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const G_=pae();function U_(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Re=class extends ooe(EF(Moe(Poe(PF(koe($ne(_oe(Toe(B2(Kse(Tne(Wi(om))))))))))))){constructor(...e){super(...e),this._handles=new er,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=ot.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Je.ofType(Nl)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Pr(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=Y(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this._initLayerProperties(r)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(km).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new ne("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Ur(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?hr(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Ep(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Ep(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){I$(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const r=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(r){const s=rF(r,t,i)||void 0;return s||II.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),s}if(t.defaultSymbol)return t.types&&t.types.length?new f7({defaultSymbol:q_(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(s=>({id:s.id,symbol:q_(s.symbol,s,i)}))}):new d7({symbol:q_(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(AI(t)&&this._resetMemorySource(t),AI(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Je?new Pl({layer:this,items:e}):e:null}readSource(e,t){const i=X2.fromJSON(t.featureSet);return new Pl({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(h=>C7.fromJSON(h)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const s=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Bte(this.url,i):i;let h=i;if(!h&&this.url){const y=Ch(this.url);Y(y)&&(h=y.title)}return h?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==h&&(h=s+" - "+h),n7(h)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(h=>(h=GF.fromJSON(h),this._fixTemplates(h.templates,r),this._fixTemplates(h.templates,s),h))}set url(e){const t=Wte({layer:this,url:e,nonStandardUrlAllowed:!0,logger:II});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,r){Jte(this,e,null,t,r)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new ne(Vi,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new ne(Vi,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await ge(()=>import("./editingSupport.82ccbcda.js"),[]);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Sae(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await cP(ge(()=>import("./FeatureLayerSource.78fc834c.js"),["assets/FeatureLayerSource.78fc834c.js","assets/clientSideDefaults.c00f6aa9.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/executeForIds.a816008e.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new Js,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const r=Y(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,s=Tre(this.definitionExpression,r);e.where=s||"1=1";const{timeOffset:h,timeExtent:y}=this;return e.timeExtent=h!=null&&y!=null?y.offset(-h.value,h.unit):y||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new ne(Vi,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new ne(Vi,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i.some(h=>{const{id:y}=h;return y!=null&&(y.toString()===r.toString()&&(s=h),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=bS.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new ne(Vi,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:r,globalIds:s,num:h,size:y,start:f,where:w}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const S=r&&r.length>1,E=i&&i.length,A=s&&s.length,P=y&&y.length;if(S||E||A||P||h||f||w)throw new ne(Vi,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||w))throw new ne(Vi,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new ne(Vi,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Js.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Js.from(e)||this.createQuery(),t);throw new ne(Vi,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Js.from(e)||this.createQuery(),t);throw new ne(Vi,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Js.from(e)||this.createQuery(),t);throw new ne(Vi,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(_S.from(e),t);throw new ne(Vi,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(_S.from(e),t);throw new ne(Vi,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Lg.from(e),t).then(i=>{if(i!=null&&i.features)for(const r of i.features)r.layer=r.sourceLayer=this;return i});throw new ne(Vi,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Lg.from(e),t);throw new ne(Vi,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Lg.from(e),t);throw new ne(Vi,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Lg.from(e),t);throw new ne(Vi,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var h;t={...t,writeLayerSchema:(h=t==null?void 0:t.writeLayerSchema)!=null?h:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(Fg(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s==null||s.push(Fg(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(Fg(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s==null||s.push(Fg(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new ne(Vi,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||vae(this,e))}async save(e){return(await ge(()=>import("./featureLayerUtils.0343583d.js"),["assets/featureLayerUtils.0343583d.js","assets/arcgisLayers.06558f66.js","assets/lazyLayerLoader.350d4ca7.js","assets/jsonContext.742790c7.js"])).save(this,e)}async saveAs(e,t){return(await ge(()=>import("./featureLayerUtils.0343583d.js"),["assets/featureLayerUtils.0343583d.js","assets/arcgisLayers.06558f66.js","assets/lazyLayerLoader.350d4ca7.js","assets/jsonContext.742790c7.js"])).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,h;if(!e){const y=(h=(s=this.capabilities)==null?void 0:s.operations)!=null&&h.supportsSync?"Query,Sync":"Query";Ur("layerDefinition.capabilities",y,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=y)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new ne(Vi,`feature is missing the identifying attribute ${i}`)):Promise.reject(new ne(Vi,"'attributes' are required on a feature to query attachments")):Promise.reject(new ne(Vi,"A feature is required to add/delete/update attachments")):Promise.reject(new ne(Vi,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return ni(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),I$(this.renderer,this.fieldsIndex),eN(this.timeInfo,this.fieldsIndex),bae(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await((t=this.source)==null?void 0:t.refresh());if(Y(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await Ere(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ne("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ne("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:e1(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:e1(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:ut(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=Nae[r.name];s&&(i[s]=!!r.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:ut(e,"isDataVersioned",!1),supportsAttachment:ut(e,"hasAttachments",!1),supportsM:ut(e,"hasM",!1),supportsZ:ut(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:ut(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(A=>A.trim()):[],r=this.url?Ch(this.url):null,s=i.includes(Y(r)&&r.serverType==="MapServer"?"data":"query"),h=i.includes("editing")&&!t.datesInUnknownTimezone;let y=h&&i.includes("create"),f=h&&i.includes("delete"),w=h&&i.includes("update");const S=i.includes("changetracking"),E=t.advancedQueryCapabilities;return h&&!(y||f||w)&&(y=f=w=!0),{supportsCalculate:ut(t,"supportsCalculate",!1),supportsTruncate:ut(t,"supportsTruncate",!1),supportsValidateSql:ut(t,"supportsValidateSql",!1),supportsAdd:y,supportsDelete:f,supportsEditing:h,supportsChangeTracking:S,supportsQuery:s,supportsQueryAnalytics:ut(E,"supportsQueryAnalytic",!1),supportsQueryAttachments:ut(E,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ut(E,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ut(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:w,supportsExceedsLimitStatistics:ut(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var w;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,r=e.archivingInfo,s=(w=this.url)==null?void 0:w.includes("MapServer"),h=!we("mapserver-pbf-enabled")&&s&&this.version<10.81,y=uL(this.url),f=(e.supportedQueryFormats||"").split(",").reduce((S,E)=>{const A=E.toLowerCase().trim();return A&&S.add(A),S},new Set);return{supportsStatistics:ut(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:ut(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ut(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Rae(t),supportsCentroid:ut(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ut(t,"supportsQueryWithDistance",!1),supportsDistinct:ut(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ut(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ut(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ut(t,"supportsHavingClause",!1),supportsOrderBy:ut(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ut(t,"supportsPagination",!1),supportsQuantization:ut(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ut(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ut(e,"supportsReturningQueryGeometry",!1),supportsResultType:ut(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ut(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ut(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ut(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ut(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ut(i,"allowOthersToQuery",!0),supportsHistoricMoment:ut(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!h&&f.has("pbf"),supportsDisjointSpatialRelationship:ut(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:ut(t,"supportsQueryWithCacheHint",!1)||e1(t,"query"),supportsDefaultSpatialReference:ut(t,"supportsDefaultSR",!1),supportsCompactGeometry:y,maxRecordCountFactor:jg(e,"maxRecordCountFactor",void 0),maxRecordCount:jg(e,"maxRecordCount",void 0),standardMaxRecordCount:jg(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:jg(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=ut(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ut(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:e1(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:e1(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ut(e,"allowGeometryUpdates",!0),supportsGlobalId:ut(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ut(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ut(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ut(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ut(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ut(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ut(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ut(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ut(t,"allowOthersToUpdate",!0)}}};g([x({readOnly:!0,json:{read:!1}})],Re.prototype,"capabilities",void 0),g([je("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Re.prototype,"readCapabilities",null),g([x({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Re.prototype,"charts",void 0),g([x({readOnly:!0})],Re.prototype,"createQueryVersion",null),g([x({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Re.prototype,"copyright",void 0),g([x({type:Boolean})],Re.prototype,"datesInUnknownTimezone",void 0),g([x({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Re.prototype,"displayField",void 0),g([x({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Re.prototype,"definitionExpression",void 0),g([x({types:zn,readOnly:!0})],Re.prototype,"defaultSymbol",void 0),g([x({type:jo})],Re.prototype,"dynamicDataSource",void 0),g([x({readOnly:!0})],Re.prototype,"editFieldsInfo",void 0),g([x({type:Boolean})],Re.prototype,"editingEnabled",null),g([je(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Re.prototype,"readEditingEnabled",null),g([je("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Re.prototype,"readEditingEnabledFromWebMap",null),g([De(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabled",null),g([De("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabledToWebMap",null),g([x({readOnly:!0})],Re.prototype,"editingInfo",void 0),g([je("editingInfo")],Re.prototype,"readEditingInfo",null),g([x((()=>{const e=de(moe),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],Re.prototype,"elevationInfo",void 0),g([x(lae)],Re.prototype,"featureReduction",void 0),g([x({...G_.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:U_}}}}})],Re.prototype,"fields",void 0),g([x(G_.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),g([x({type:mae,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Re.prototype,"floorInfo",void 0),g([x({type:Dre,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Re.prototype,"formTemplate",void 0),g([x({type:Ut,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Re.prototype,"fullExtent",void 0),g([x()],Re.prototype,"gdbVersion",void 0),g([x({readOnly:!0,type:dae,json:{read:{source:"geometryProperties"}}})],Re.prototype,"geometryFieldsInfo",void 0),g([x({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:V_.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:U_,writer(e,t,i){const r=e?V_.toJSON(e):null;r&&Ur(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:V_.read}}})],Re.prototype,"geometryType",void 0),g([x({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Re.prototype,"hasM",void 0),g([x({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Re.prototype,"hasZ",void 0),g([x({readOnly:!0,type:zm})],Re.prototype,"heightModelInfo",void 0),g([x({type:Date})],Re.prototype,"historicMoment",void 0),g([x(voe)],Re.prototype,"id",void 0),g([x({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Re.prototype,"infoFor3D",void 0),g([x({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Re.prototype,"isTable",void 0),g([je("service","isTable",["type","geometryType"]),je("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Re.prototype,"readIsTable",null),g([De("web-map","isTable")],Re.prototype,"writeIsTable",null),g([x($7)],Re.prototype,"labelsVisible",void 0),g([x({type:[o3],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:xI},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:xI},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Re.prototype,"labelingInfo",void 0),g([x((()=>{const e=de(goe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Ur(r,N2(t),i)}}},e})())],Re.prototype,"opacity",void 0),g([x({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],Re.prototype,"layerId",void 0),g([x(yoe)],Re.prototype,"legendEnabled",void 0),g([x({type:["show","hide"],json:(()=>{const e=de(AF.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Re.prototype,"listMode",void 0),g([x(boe)],Re.prototype,"minScale",void 0),g([je("service","minScale",["minScale","effectiveMinScale"])],Re.prototype,"readMinScale",null),g([x(woe)],Re.prototype,"maxScale",void 0),g([je("service","maxScale",["maxScale","effectiveMaxScale"])],Re.prototype,"readMaxScale",null),g([x({type:String})],Re.prototype,"globalIdField",void 0),g([je("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),je("service","globalIdField",["globalIdField","fields"])],Re.prototype,"readGlobalIdFieldFromService",null),g([x({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:U_}}}}})],Re.prototype,"objectIdField",void 0),g([je("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),je("service","objectIdField",["objectIdField","fields"])],Re.prototype,"readObjectIdFieldFromService",null),g([x({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Re.prototype,"operationalLayerType",void 0),g([x(G_.outFields)],Re.prototype,"outFields",void 0),g([x({readOnly:!0})],Re.prototype,"parsedUrl",null),g([x({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Re.prototype,"path",void 0),g([x(T7)],Re.prototype,"popupEnabled",void 0),g([x({type:sf,json:{name:"popupInfo",write:!0}})],Re.prototype,"popupTemplate",void 0),g([x({readOnly:!0})],Re.prototype,"defaultPopupTemplate",null),g([x({type:[gae],readOnly:!0})],Re.prototype,"relationships",void 0),g([x({types:K2,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Sre,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Re.prototype,"renderer",null),g([je("service","renderer",["drawingInfo.renderer","defaultSymbol"]),je("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Re.prototype,"readRenderer",null),g([x()],Re.prototype,"sourceJSON",void 0),g([x({type:Boolean})],Re.prototype,"returnM",void 0),g([x({type:Boolean})],Re.prototype,"returnZ",void 0),g([x((()=>{const e=de(doe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Re.prototype,"screenSizePerspectiveEnabled",void 0),g([x({clonable:!1})],Re.prototype,"source",null),g([Mt("source")],Re.prototype,"castSource",null),g([je("portal-item","source",["featureSet"]),je("web-map","source",["featureSet"])],Re.prototype,"readSource",null),g([x({readOnly:!0})],Re.prototype,"serviceDefinitionExpression",void 0),g([je("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Re.prototype,"readServiceDefinitionExpression",null),g([x({type:ot,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Re.prototype,"spatialReference",void 0),g([x({type:Number})],Re.prototype,"subtypeCode",void 0),g([x({type:String,json:{origins:{service:{read:!0}}}})],Re.prototype,"subtypeField",void 0),g([x({type:[C7]})],Re.prototype,"templates",void 0),g([je("templates",["editFieldsInfo","creatorField","editorField","templates"])],Re.prototype,"readTemplates",null),g([x({type:NF})],Re.prototype,"timeInfo",void 0),g([x()],Re.prototype,"title",void 0),g([je("service","title",["name"]),je("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Re.prototype,"readTitle",null),g([je("web-map","title",["layerDefinition.name","title"])],Re.prototype,"readTitleFromWebMap",null),g([x({type:String})],Re.prototype,"sublayerTitleMode",void 0),g([x({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Re.prototype,"trackIdField",void 0),g([x({json:{read:!1}})],Re.prototype,"type",void 0),g([x({type:String})],Re.prototype,"typeIdField",void 0),g([je("service","typeIdField"),je("typeIdField",["layerDefinition.typeIdField"])],Re.prototype,"readTypeIdField",null),g([x({type:[GF]})],Re.prototype,"types",void 0),g([je("service","types",["types"]),je("types",["layerDefinition.types"])],Re.prototype,"readTypes",null),g([x({readOnly:!0,json:{write:!1}})],Re.prototype,"serverGens",void 0),g([x({type:Je.ofType(Nl),readOnly:!0})],Re.prototype,"indexes",void 0),g([x(foe)],Re.prototype,"url",null),g([De("url")],Re.prototype,"writeUrl",null),g([x({readOnly:!0})],Re.prototype,"userIsAdmin",void 0),g([x({json:{origins:{service:{read:!0}},read:!1}})],Re.prototype,"version",void 0),g([je("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Re.prototype,"readVersion",null),g([x({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Re.prototype,"visible",void 0),g([je("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Re.prototype,"readVisible",null),Re=g([K("esri.layers.FeatureLayer")],Re);const q_=Z0({types:UR}),Gm=Re,yxe=Object.freeze(Object.defineProperty({__proto__:null,default:Gm},Symbol.toStringTag,{value:"Module"}));async function Lae(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=qF(e));const r=Fae(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let h=null;for(;;){const y=await e.source.queryFeaturesJSON(t,i);if(oe(h)?h=y:h.features=h.features.concat(y.features),h.exceededTransferLimit=y.exceededTransferLimit,!s||!y.exceededTransferLimit)break;t.start+=r}return h}function Fae(e){return qF(e)*jae(e)}function jae(e){return e.capabilities.query.maxRecordCount||2e3}function qF(e){return e.capabilities.query.supportsMaxRecordCountFactor?Js.MAX_MAX_RECORD_COUNT_FACTOR:1}const Dae=Le.getLogger("esri.networks.Network");let kr=class extends B2(Sn){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch(e=>{var t,i;Br(e)||Dae.error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}get datasetName(){var e;return(e=this.dataElement)==null?void 0:e.name}get owner(){var e;return(e=this.dataElement)==null?void 0:e.userIdentity}get schemaGeneration(){var e;return(e=this.dataElement)==null?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?hr(e):null}get featureServiceUrl(){const e=this.parsedUrl&&Ch(this.parsedUrl.path);return Y(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&Ch(this.parsedUrl.path);return Y(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const i of t){for(const r of i.edgeSources?i.edgeSources:[])if(r.sourceId===e)return r.layerId;for(const r of i.junctionSources?i.junctionSources:[])if(r.sourceId===e)return r.layerId}return null}return null}async _fetchLayerMetaData(e,t){const i=await ni(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(e,t,i){if(this.dataElement)return;const r=await ni(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...i}).then(s=>{var h;return(h=s.data.layerDataElements)==null?void 0:h[0]});r&&this.read(r,{origin:"service"})}};g([x({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],kr.prototype,"id",void 0),g([x({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],kr.prototype,"title",void 0),g([x({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],kr.prototype,"layerUrl",void 0),g([x({type:Object,json:{origins:{service:{read:!0}},read:!1}})],kr.prototype,"dataElement",void 0),g([x({type:Ut,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],kr.prototype,"fullExtent",void 0),g([x({type:ot,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],kr.prototype,"spatialReference",void 0),g([x({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],kr.prototype,"type",void 0),g([x({readOnly:!0})],kr.prototype,"datasetName",null),g([x({readOnly:!0})],kr.prototype,"owner",null),g([x({readOnly:!0})],kr.prototype,"schemaGeneration",null),g([x({readOnly:!0})],kr.prototype,"parsedUrl",null),g([x({readOnly:!0})],kr.prototype,"featureServiceUrl",null),g([x({readOnly:!0})],kr.prototype,"networkServiceUrl",null),g([x({readOnly:!0})],kr.prototype,"layerId",null),g([x()],kr.prototype,"sourceJSON",void 0),kr=g([K("esri.networks.Network")],kr);const zae=kr;var ms;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(ms||(ms={}));const B_=new lt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});new lt({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});let $c=class extends Q0(Sn){constructor(e){super(e),this.request=ni}initialize(){}async load(e){const t=this.layer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(t),this}getFeatureSQL(e,t){const i=e.layerId.toString(),r=e.fieldsIndex.normalizeFieldName("assetGroup"),s=e.fieldsIndex.normalizeFieldName("assetType"),h=t.attributes[r],y=t.attributes[s],f=this.rulesHash[i];if(f){const w=f.assetGroupHash[h];if(w)return w.assetTypeHash[y]||null}return null}async _initializeRulesTable(){var r,s,h,y,f,w,S,E,A,P;const e={};let t;(function(N){N[N.from=0]="from",N[N.to=1]="to",N[N.via=2]="via"})(t||(t={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const N of this.rules){if(N.ruleType!==ms.RTJunctionJunctionConnectivity&&N.ruleType!==ms.RTJunctionEdgeConnectivity&&N.ruleType!==ms.RTEdgeJunctionEdgeConnectivity)continue;let F=[[t.from,t.to],[t.to,t.from]];N.ruleType===ms.RTEdgeJunctionEdgeConnectivity&&(F=[[t.from,t.via],[t.via,t.from],[t.to,t.via],[t.via,t.to]]);for(const V of F){const U=V.shift(),X=V.shift();let re=!1;switch(N.ruleType){case ms.RTEdgeJunctionEdgeConnectivity:re=U===t.from||U===t.to;break;case ms.RTJunctionEdgeConnectivity:re=U===t.to}const he=i[U],pe=N[he.networkSourceId].layerId.toString(),ae=(s=(r=N[he.assetGroupId])==null?void 0:r.assetGroupCode)==null?void 0:s.toString(),le=(y=(h=N[he.assetTypeId])==null?void 0:h.assetTypeCode)==null?void 0:y.toString(),Te=i[X],Ee=N[Te.networkSourceId].layerId.toString(),Oe=(w=(f=N[Te.assetGroupId])==null?void 0:f.assetGroupCode)==null?void 0:w.toString(),Ae=N[Te.assetTypeId],Fe=(S=Ae==null?void 0:Ae.assetTypeCode)==null?void 0:S.toString(),ze=e[pe]?e[pe]:{assetGroupHash:{}};if(!(ae&&le&&Oe&&Fe))continue;const Ge=ze.assetGroupHash[ae]?ze.assetGroupHash[ae]:{assetTypeHash:{}},ke=Ge.assetTypeHash[le]?Ge.assetTypeHash[le]:{};if(ke[Ee]=ke[Ee]?ke[Ee]:{},re){ke[pe]=ke[pe]?ke[pe]:{};const Kt=`(assetgroup = ${ae} AND assettype = ${le})`;ke[pe].anyVertex=ke[pe].anyVertex?`${ke[pe].anyVertex}`:`${Kt}`,Ae.connectivityPolicy==="esriNECPEndVertex"&&(ke[pe].endVertex=(E=ke[pe])!=null&&E.endVertex?`${ke[pe].endVertex}`:`${Kt}`)}const ht=`(assetgroup = ${Oe} AND assettype = ${Fe})`;ke[Ee].anyVertex=(A=ke[Ee])!=null&&A.anyVertex?`${ke[Ee].anyVertex} OR ${ht}`:`${ht}`,Ae.connectivityPolicy==="esriNECPEndVertex"&&(ke[Ee].endVertex=(P=ke[Ee])!=null&&P.endVertex?`${ke[Ee].endVertex} OR ${ht}`:`${ht}`),Ge.assetTypeHash[le]=ke,ze.assetGroupHash[ae]=Ge,e[pe]=ze}}this.rulesHash=e}};g([x({constructOnly:!0})],$c.prototype,"layer",void 0),g([x({constructOnly:!0})],$c.prototype,"rules",void 0),g([x()],$c.prototype,"rulesHash",void 0),g([x({constructOnly:!0})],$c.prototype,"request",void 0),$c=g([K("esri.networks.RulesTable")],$c);const Vae=$c;let zs=class extends ve{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};g([x({type:[Object],json:{write:!0}})],zs.prototype,"conditionBarriers",void 0),g([x({type:[Object],json:{write:!0}})],zs.prototype,"outputConditions",void 0),g([x({type:[Object],json:{write:!0}})],zs.prototype,"functions",void 0),g([x({type:[Object],json:{write:!0}})],zs.prototype,"functionBarriers",void 0),g([x({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],zs.prototype,"traversabilityScope",void 0),g([x({type:String,json:{write:!0}})],zs.prototype,"shortestPathNetworkAttributeName",void 0),g([x({type:Boolean,json:{write:!0}})],zs.prototype,"includeBarriers",void 0),g([x({type:Boolean,json:{write:!0}})],zs.prototype,"validateConsistency",void 0),g([x({type:Boolean,json:{write:!0}})],zs.prototype,"ignoreBarriersAtStartingPoints",void 0),zs=g([K("esri.networks.support.TraceConfiguration")],zs);const O7=zs;let Zi=class extends O7{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};g([x({type:[Object],json:{write:!0}})],Zi.prototype,"filterBarriers",void 0),g([x({type:String,json:{write:!0}})],Zi.prototype,"domainNetworkName",void 0),g([x({type:String,json:{write:!0}})],Zi.prototype,"filterBitsetNetworkAttributeName",void 0),g([x({type:[Object],json:{write:!0}})],Zi.prototype,"filterFunctionBarriers",void 0),g([x({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Zi.prototype,"filterScope",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"includeContainers",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"includeContent",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"includeIsolated",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"includeStructures",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"includeUpToFirstSpatialContainer",void 0),g([x({type:Object,json:{write:!0}})],Zi.prototype,"nearestNeighbor",void 0),g([x({type:[Object],json:{write:!0}})],Zi.prototype,"outputFilterCategories",void 0),g([x({type:[Object],json:{write:!0}})],Zi.prototype,"outputFilters",void 0),g([x({type:[Object],json:{write:!0}})],Zi.prototype,"propagators",void 0),g([x({type:String,json:{write:!0}})],Zi.prototype,"subnetworkName",void 0),g([x({type:String,json:{write:!0}})],Zi.prototype,"targetTierName",void 0),g([x({type:String,json:{write:!0}})],Zi.prototype,"tierName",void 0),g([x({type:Boolean,json:{write:!0}})],Zi.prototype,"validateLocatability",void 0),Zi=g([K("esri.networks.support.UNTraceConfiguration")],Zi);const Gae=Zi;let Nn=class extends xw{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return e.tierName!==void 0?Gae.fromJSON(e):O7.fromJSON(e)}};g([x({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],Nn.prototype,"globalId",void 0),g([x({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Nn.prototype,"title",void 0),g([x({type:O7,json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"traceConfiguration",void 0),g([je("service","traceConfiguration")],Nn.prototype,"readTraceConfiguration",null),g([x({type:Date,json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"creationDate",void 0),g([x({type:String,json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"creator",void 0),g([x({type:String,json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"description",void 0),g([x({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],Nn.prototype,"minStartingPoints",void 0),g([x({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"resultTypes",void 0),g([x({type:[String],json:{origins:{service:{read:!0}},read:!1}})],Nn.prototype,"tags",void 0),g([x({type:B_.apiValues,json:{type:B_.jsonValues,origins:{service:{read:B_.read}},read:!1}})],Nn.prototype,"traceType",void 0),Nn=g([K("esri.networks.support.NamedTraceConfiguration")],Nn);const Uae=Nn;let kd=class extends ve{constructor(e){super(e),this.id=null,this.name=null}};g([x({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],kd.prototype,"id",void 0),g([x({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],kd.prototype,"name",void 0),g([x({type:Boolean,json:{write:!0}})],kd.prototype,"isUpstreamTerminal",void 0),kd=g([K("esri.networks.support.Terminal")],kd);const qae=kd,Dg=new lt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Uu=class extends ve{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};g([x({type:String,json:{write:!0}})],Uu.prototype,"defaultConfiguration",void 0),g([x({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Uu.prototype,"id",void 0),g([x({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Uu.prototype,"name",void 0),g([x({type:[qae],json:{write:!0}})],Uu.prototype,"terminals",void 0),g([x({type:Dg.apiValues,json:{type:Dg.jsonValues,read:Dg.read,write:Dg.write}})],Uu.prototype,"traversabilityModel",void 0),Uu=g([K("esri.networks.support.TerminalConfiguration")],Uu);const kI=Uu;let ss=class extends zae{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return(e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId}get systemLayers(){var e,t;return{rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null,subnetworksTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}}get rulesTableId(){var e;return(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get subnetworksTableId(){var e;return(e=this.sourceJSON)==null?void 0:e.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(t=>kI.fromJSON(t)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(t=>t.domainNetworkName))||[]}get _utilityLayerList(){const e=new Set;return this.dataElement.domainNetworks.map(t=>{t.edgeSources.map(i=>{e.add(i.layerId)}),t.junctionSources.map(i=>{e.add(i.layerId)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var w,S,E,A;let t=null,i=null;const r=e.layer;let s=null;if((r==null?void 0:r.type)!=="feature"||(s=r.layerId,s===null))return null;const h=e.attributes;if(h==null)return null;for(const P of Object.keys(h))P.toUpperCase()==="ASSETGROUP"&&(t=e.getAttribute(P)),P.toUpperCase()==="ASSETTYPE"&&(i=e.getAttribute(P));if(!this.dataElement)return null;let y=null;const f=this.dataElement.domainNetworks;for(const P of f){const N=(w=P.junctionSources)==null?void 0:w.find(F=>F.layerId===s);if(N){const F=(S=N.assetGroups)==null?void 0:S.find(V=>V.assetGroupCode===t);if(F){const V=(E=F.assetTypes)==null?void 0:E.find(U=>U.assetTypeCode===i);if(V){y=V.terminalConfigurationId;break}}}}if(y!=null){const P=(A=this.dataElement.terminalConfigurations)==null?void 0:A.find(N=>N.terminalConfigurationId===y);return P?kI.fromJSON(P):null}return null}getTierNames(e){var i;const t=(i=this.dataElement)==null?void 0:i.domainNetworks.find(r=>r.domainNetworkName===e);return(t==null?void 0:t.tiers.map(r=>r.name))||[]}async getRulesTable(){return this._createRulesTable()}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)}async _loadNamedTraceConfigurationsFromNetwork(e){var r;if(((r=this.sharedNamedTraceConfigurations)==null?void 0:r.length)===0)return;const t=this.sharedNamedTraceConfigurations.map(s=>s.globalId),i=await this._fetchTraceConfigData(this.networkServiceUrl,t,e);for(const s of this.sharedNamedTraceConfigurations){const h=i==null?void 0:i.find(y=>y.globalId===s.globalId);h&&s.read(h,{origin:"service"})}}async _createRulesTable(){var s;const e=new Gm({url:this.rulesTableUrl});await e.load();const t=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!t)return null;const i=t.flatMap(h=>[...h.edgeSources,...h.junctionSources]),r=(await this._queryRulesTable(e)).map(h=>this._hydrateRuleInfo(e,i,h));return new Vae({layer:e,rules:r})}async _queryRulesTable(e){const t=new Js({where:"1=1",outFields:["*"]});return(await Lae(e,t)).features}_hydrateRuleInfo(e,t,i){const r=e.fieldsIndex.get("RULETYPE"),s=e.fieldsIndex.get("CREATIONDATE"),h=e.fieldsIndex.get("FROMNETWORKSOURCEID"),y=e.fieldsIndex.get("FROMASSETGROUP"),f=e.fieldsIndex.get("FROMASSETTYPE"),w=e.fieldsIndex.get("FROMTERMINALID"),S=e.fieldsIndex.get("TONETWORKSOURCEID"),E=e.fieldsIndex.get("TOASSETGROUP"),A=e.fieldsIndex.get("TOASSETTYPE"),P=e.fieldsIndex.get("TOTERMINALID"),N=e.fieldsIndex.get("VIANETWORKSOURCEID"),F=e.fieldsIndex.get("VIAASSETGROUP"),V=e.fieldsIndex.get("VIAASSETTYPE"),U=e.fieldsIndex.get("VIATERMINALID"),X=i.attributes[r.name],re=new Date(i.attributes[s.name]),he=[{networkSourceId:i.attributes[h.name],assetGroupId:i.attributes[y.name],assetTypeId:i.attributes[f.name],terminalId:i.attributes[w.name]},{networkSourceId:i.attributes[S.name],assetGroupId:i.attributes[E.name],assetTypeId:i.attributes[A.name],terminalId:i.attributes[P.name]},{networkSourceId:i.attributes[N.name],assetGroupId:i.attributes[F.name],assetTypeId:i.attributes[V.name],terminalId:i.attributes[U.name]}];let pe;(function(le){le[le.from=0]="from",le[le.to=1]="to",le[le.via=2]="via"})(pe||(pe={}));const ae={ruleType:X,creationDate:re};for(const le of[pe.from,pe.to,pe.via]){if(X!==ms.RTEdgeJunctionEdgeConnectivity&&le===pe.via)continue;const Te=he[le],Ee=t.find(Ge=>Ge.sourceId===Te.networkSourceId),Oe=Ee==null?void 0:Ee.assetGroups.find(Ge=>Ge.assetGroupCode===Te.assetGroupId),Ae=Oe==null?void 0:Oe.assetTypes.find(Ge=>Ge.assetTypeCode===Te.assetTypeId);let Fe=this._getTerminal(X,Ae,Te);X!==ms.RTContainment&&X!==ms.RTAttachment||(Fe=null);let ze="";switch(le){case pe.from:ze="from";break;case pe.to:ze="to";break;case pe.via:ze="via"}ae[`${ze}NetworkSource`]=Ee,ae[`${ze}AssetGroup`]=Oe,ae[`${ze}AssetType`]=Ae,ae[`${ze}Terminal`]=Fe}return ae}_getTerminal(e,t,i){var h,y;if(e===ms.RTAttachment||e===ms.RTContainment)return null;const r=t==null?void 0:t.terminalConfigurationId,s=(h=this.terminalConfigurations)==null?void 0:h.find(f=>f.id===r);return(y=s==null?void 0:s.terminals)==null?void 0:y.find(f=>f.id===i.terminalId)}_fetchTraceConfigData(e,t,i){return ni(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...i}).then(r=>r.data.traceConfigurations)}};g([x({type:[Uae],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],ss.prototype,"sharedNamedTraceConfigurations",void 0),g([x({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],ss.prototype,"type",void 0),g([x({readOnly:!0})],ss.prototype,"serviceTerritoryFeatureLayerId",null),g([x({readOnly:!0})],ss.prototype,"systemLayers",null),g([x({readOnly:!0})],ss.prototype,"rulesTableId",null),g([x({readOnly:!0})],ss.prototype,"rulesTableUrl",null),g([x({readOnly:!0})],ss.prototype,"subnetworksTableId",null),g([x({readOnly:!0})],ss.prototype,"subnetworksTableUrl",null),g([x({readOnly:!0})],ss.prototype,"terminalConfigurations",null),g([x({readOnly:!0})],ss.prototype,"domainNetworkNames",null),ss=g([K("esri.networks.UtilityNetwork")],ss);const Bae=ss;let H_,fe=null;function BF(){return!!fe}function Hae(){return!!we("esri-wasm")}function HF(){return H_||(H_=ge(()=>import("./pe-wasm.41ba155b.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ft(`esri/geometry/support/${t}`)})).then(e=>{JF(e)}),H_)}var MS,Mi,ES;(function(e){function t(h,y,f){fe.ensureCache.prepare();const w=Bc(f),S=f===w,E=fe.ensureFloat64(w),A=fe._pe_geog_to_proj(fe.getPointer(h),y,E);return A&&ph(f,y,E,S),A}function i(h,y,f,w){switch(w){case Mi.PE_TRANSFORM_P_TO_G:return r(h,y,f);case Mi.PE_TRANSFORM_G_TO_P:return t(h,y,f)}return 0}function r(h,y,f){return s(h,y,f,0)}function s(h,y,f,w){fe.ensureCache.prepare();const S=Bc(f),E=f===S,A=fe.ensureFloat64(S),P=fe._pe_proj_to_geog_center(fe.getPointer(h),y,A,w);return P&&ph(f,y,A,E),P}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(MS||(MS={})),function(e){function t(){e.PE_BUFFER_MAX=fe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=fe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=fe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=fe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=fe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=fe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=fe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=fe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=fe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=fe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=fe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=fe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=fe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=fe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=fe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=fe.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=fe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=fe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=fe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=fe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=fe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=fe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=fe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=fe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=fe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=fe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=fe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=fe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=fe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=fe.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Mi||(Mi={})),function(e){const t={},i={},r=N=>{if(N){const F=N.getType();switch(F){case Mi.PE_TYPE_GEOGCS:N=fe.castObject(N,fe.PeGeogcs);break;case Mi.PE_TYPE_PROJCS:N=fe.castObject(N,fe.PeProjcs);break;case Mi.PE_TYPE_GEOGTRAN:N=fe.castObject(N,fe.PeGeogtran);break;default:F&Mi.PE_TYPE_UNIT&&(N=fe.castObject(N,fe.PeUnit))}}return N};function s(){fe.PeFactory.prototype.initialize(null)}function h(N){return y(Mi.PE_TYPE_COORDSYS,N)}function y(N,F){let V=null,U=t[N];if(U||(U={},t[N]=U),U.hasOwnProperty(String(F)))V=U[F];else{const X=fe.PeFactory.prototype.factoryByType(N,F);fe.compare(X,fe.NULL)||(V=X,U[F]=V)}return V=r(V),V}function f(N,F){let V=null,U=i[N];if(U||(U={},i[N]=U),U.hasOwnProperty(F))V=U[F];else{const X=fe.PeFactory.prototype.fromString(N,F);fe.compare(X,fe.NULL)||(V=X,U[F]=V)}return V=r(V),V}function w(N){return y(Mi.PE_TYPE_GEOGCS,N)}function S(N){return y(Mi.PE_TYPE_GEOGTRAN,N)}function E(N){return fe.PeFactory.prototype.getCode(N)}function A(N){return y(Mi.PE_TYPE_PROJCS,N)}function P(N){return y(Mi.PE_TYPE_UNIT,N)}e.initialize=s,e.coordsys=h,e.factoryByType=y,e.fromString=f,e.geogcs=w,e.geogtran=S,e.getCode=E,e.projcs=A,e.unit=P}(ES||(ES={}));let WF=null;var Ow,TS,$S,IS,Pw,AS,Nw,Rw,kS;function JF(e){function t(h,y,f){h[y]=f(h[y])}fe=e,Mi.init(),Ow.init(),Pw.init(),Nw.init(),Rw.init(),WF=class extends fe.PeGCSExtent{destroy(){fe.destroy(this)}};const i=[fe.PeDatum,fe.PeGeogcs,fe.PeGeogtran,fe.PeObject,fe.PeParameter,fe.PePrimem,fe.PeProjcs,fe.PeSpheroid,fe.PeUnit];for(const h of i)t(h.prototype,"getName",y=>function(){return y.call(this,new Array(Mi.PE_NAME_MAX))});for(const h of[fe.PeGeogtran,fe.PeProjcs])t(h.prototype,"getParameters",y=>function(){const f=new Array(Mi.PE_PARM_MAX);let w=y.call(this);for(let S=0;S<f.length;S++){const E=fe.getValue(w,"*");f[S]=E?fe.wrapPointer(E,fe.PeParameter):null,w+=Int32Array.BYTES_PER_ELEMENT}return f});t(fe.PeHorizon.prototype,"getCoord",h=>function(){const y=this.getSize();if(!y)return null;const f=[];return ph(f,y,h.call(this)),f}),t(fe.PeGTlistExtendedEntry.prototype,"getEntries",h=>{const y=fe._pe_getPeGTlistExtendedGTsSize();return function(){let f=null;const w=h.call(this);if(!fe.compare(w,fe.NULL)){f=[w];const S=this.getSteps();if(S>1){const E=fe.getPointer(w);for(let A=1;A<S;A++)f.push(fe.wrapPointer(E+y*A,fe.PeGTlistExtendedGTs))}}return f}});const r=fe._pe_getPeHorizonSize(),s=h=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(h))return y.get(h);let f=null;const w=h.call(this);if(!fe.compare(w,fe.NULL)){f=[w];const S=w.getNump();if(S>1){const E=fe.getPointer(w);for(let A=1;A<S;A++)f.push(fe.wrapPointer(E+r*A,fe.PeHorizon))}}return y.set(h,f),f};t(fe.PeProjcs.prototype,"horizonGcsGenerate",s),t(fe.PeProjcs.prototype,"horizonPcsGenerate",s),fe.PeObject.prototype.toString=function(h=Mi.PE_STR_OPTS_NONE){fe.ensureCache.prepare();const y=fe.getPointer(this),f=fe.ensureInt8(new Array(Mi.PE_BUFFER_MAX));return fe.UTF8ToString(fe._pe_object_to_string_ext(y,h,f))}}function nl(e){if(!e)return;const t=fe.getClass(e);if(!t)return;const i=fe.getCache(t);if(!i)return;const r=fe.getPointer(e);r&&delete i[r]}function zg(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(fe.ensureInt8(r));return i}function Bc(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function ph(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=fe.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let h=0;h<t;h++)s&&(e[h]=new Array(2)),e[h][0]=fe.getValue(i,"double"),e[h][1]=fe.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=fe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=fe._pe_getPeGTlistExtendedEntrySize()}function r(s,h,y,f,w,S){let E=null;const A=new fe.PeInteger(S);try{const P=fe.PeGTlistExtended.prototype.getGTlist(s,h,y,f,w,A);if((S=A.val)&&(E=[P],S>1)){const N=fe.getPointer(P);for(let F=1;F<S;F++)E.push(fe.wrapPointer(N+t*F,fe.PeGTlistExtendedEntry))}}finally{fe.destroy(A)}return E}e.init=i,e.getGTlist=r})(Ow||(Ow={})),function(e){function t(i){if(i&&i.length){for(const r of i)nl(r),r.getEntries().forEach(s=>{nl(s);const h=s.getGeogtran();nl(h),h.getParameters().forEach(nl),[h.getGeogcs1(),h.getGeogcs2()].forEach(y=>{nl(y);const f=y.getDatum();nl(f),nl(f.getSpheroid()),nl(y.getPrimem()),nl(y.getUnit())})});fe.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(TS||(TS={})),function(e){function t(i,r,s,h,y){fe.ensureCache.prepare();const f=Bc(s),w=s===f,S=fe.ensureFloat64(f);let E=0;h&&(E=fe.ensureFloat64(h));const A=fe._pe_geog_to_geog(fe.getPointer(i),r,S,E,y);return A&&ph(s,r,S,w),A}e.geogToGeog=t}($S||($S={})),function(e){const t=(S,E,A,P,N,F)=>{let V,U;switch(fe.ensureCache.prepare(),S){case"dd":V=fe._pe_geog_to_dd,U=Mi.PE_DD_MAX;break;case"ddm":V=fe._pe_geog_to_ddm,U=Mi.PE_DDM_MAX;break;case"dms":V=fe._pe_geog_to_dms,U=Mi.PE_DMS_MAX}let X=0;E&&(X=fe.getPointer(E));const re=Bc(P),he=fe.ensureFloat64(re),pe=zg(A,U),ae=V(X,A,he,N,fe.ensureInt32(pe));if(ae)for(let le=0;le<A;le++)F[le]=fe.UTF8ToString(pe[le]);return ae},i=(S,E,A,P,N)=>{let F;switch(fe.ensureCache.prepare(),S){case"dd":F=fe._pe_dd_to_geog;break;case"ddm":F=fe._pe_ddm_to_geog;break;case"dms":F=fe._pe_dms_to_geog}let V=0;E&&(V=fe.getPointer(E));const U=P.map(pe=>fe.ensureString(pe)),X=fe.ensureInt32(U),re=fe.ensureFloat64(new Array(2*A)),he=F(V,A,X,re);return he&&ph(N,A,re),he};function r(S,E,A,P,N){return t("dms",S,E,A,P,N)}function s(S,E,A,P){return i("dms",S,E,A,P)}function h(S,E,A,P,N){return t("ddm",S,E,A,P,N)}function y(S,E,A,P){return i("ddm",S,E,A,P)}function f(S,E,A,P,N){return t("dd",S,E,A,P,N)}function w(S,E,A,P){return i("dd",S,E,A,P)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=h,e.ddmToGeog=y,e.geogToDd=f,e.ddToGeog=w}(IS||(IS={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=fe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=fe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,h,y,f,w,S,E){fe.ensureCache.prepare();let A=0;s&&(A=fe.getPointer(s));const P=Bc(y),N=fe.ensureFloat64(P),F=zg(h,Mi.PE_MGRS_MAX),V=fe.ensureInt32(F),U=fe._pe_geog_to_mgrs_extended(A,h,N,f,w,S,V);if(U)for(let X=0;X<h;X++)E[X]=fe.UTF8ToString(F[X]);return U}function r(s,h,y,f,w){fe.ensureCache.prepare();let S=0;s&&(S=fe.getPointer(s));const E=y.map(F=>fe.ensureString(F)),A=fe.ensureInt32(E),P=fe.ensureFloat64(new Array(2*h)),N=fe._pe_mgrs_to_geog_extended(S,h,A,f,P);return N&&ph(w,h,P),N}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(Pw||(Pw={})),function(e){function t(r,s,h,y,f,w,S){fe.ensureCache.prepare();let E=0;r&&(E=fe.getPointer(r));const A=Bc(h),P=fe.ensureFloat64(A),N=zg(s,Mi.PE_MGRS_MAX),F=fe.ensureInt32(N),V=fe._pe_geog_to_usng(E,s,P,y,f,w,F);if(V)for(let U=0;U<s;U++)S[U]=fe.UTF8ToString(N[U]);return V}function i(r,s,h,y){fe.ensureCache.prepare();let f=0;r&&(f=fe.getPointer(r));const w=h.map(P=>fe.ensureString(P)),S=fe.ensureInt32(w),E=fe.ensureFloat64(new Array(2*s)),A=fe._pe_usng_to_geog(f,s,S,E);return A&&ph(y,s,E),A}e.geogToUsng=t,e.usngToGeog=i}(AS||(AS={})),function(e){function t(){e.PE_UTM_OPTS_NONE=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=fe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,h,y,f,w){fe.ensureCache.prepare();let S=0;s&&(S=fe.getPointer(s));const E=Bc(y),A=fe.ensureFloat64(E),P=zg(h,Mi.PE_UTM_MAX),N=fe.ensureInt32(P),F=fe._pe_geog_to_utm(S,h,A,f,N);if(F)for(let V=0;V<h;V++)w[V]=fe.UTF8ToString(P[V]);return F}function r(s,h,y,f,w){fe.ensureCache.prepare();let S=0;s&&(S=fe.getPointer(s));const E=y.map(F=>fe.ensureString(F)),A=fe.ensureInt32(E),P=fe.ensureFloat64(new Array(2*h)),N=fe._pe_utm_to_geog(S,h,A,f,P);return N&&ph(w,h,P),N}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(Nw||(Nw={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=fe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=fe.PePCSInfo.prototype.PE_POLE_POINT}function r(s,h=e.PE_PCSINFO_OPTION_DOMAIN){let y,f;return t.has(s)&&(f=t.get(s),f[h]&&(y=f[h])),y||(y=fe.PePCSInfo.prototype.generate(s,h),f||(f=[],t.set(s,f)),f[h]=y),y}e.init=i,e.generate=r}(Rw||(Rw={})),function(e){function t(){return fe.PeVersion.prototype.version_string()}e.versionString=t}(kS||(kS={}));const Wae=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return fe},isLoaded:BF,isSupported:Hae,load:HF,get PeCSTransformations(){return MS},get PeDefs(){return Mi},get PeFactory(){return ES},get PeGCSExtent(){return WF},get PeGTlistExtended(){return Ow},get PeGTlistExtendedEntry(){return TS},get PeGTTransformations(){return $S},get PeNotationDms(){return IS},get PeNotationMgrs(){return Pw},get PeNotationUsng(){return AS},get PeNotationUtm(){return Nw},get PePCSInfo(){return Rw},get PeVersion(){return kS},_init:JF},Symbol.toStringTag,{value:"Module"})),Gn=Math.PI/180,Jae=/SPHEROID\[([^\]]+)]/i,gu=fi.radius,uo=fi.eccentricitySquared,Kae={a1:gu*uo,a2:gu*uo*gu*uo,a3:gu*uo*uo/2,a4:gu*uo*gu*uo*2.5,a5:gu*uo+gu*uo*uo/2,a6:1-uo},Yae={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:fi.radius,f:fi.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Ah.radius,f:Ah.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Bl.radius,f:Bl.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Bl.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let Vg=0;class x0{constructor(t=null){this.uid=Vg++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new x0;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Vg++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Vg++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Vg++}getInverse(){const t=new x0;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class bh{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof x0?this.steps.push(i):this.steps.push(new x0({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new bh;let r="";for(const s of t.steps){const h=x0.fromGE(s);i.steps.push(h),r+=h.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=r,i}getInverse(){const t=new bh;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cached_projection[bh.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const h of this.steps)r+=h.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const s=this._cached_projection[bh.cacheKey(t,i)];return s===void 0?null:s}}let Eh=null,Lw=null,W_=null,J_={};const KF=new XP;function Zl(){return!!Eh&&BF()}function Xl(e){return oe(W_)&&(W_=Promise.all([HF(),ge(()=>Promise.resolve().then(()=>RH),void 0).then(t=>t.g),ge(()=>Promise.resolve().then(()=>LK),void 0)])),W_.then(([,t,{hydratedAdapter:i}])=>{di(e),Lw=i,Eh=t.default,Eh._enableProjection(Wae),KF.notify()})}function Dh(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:Fw(Lw,e,e[0].spatialReference,t,i,r):Fw(Lw,[e],e.spatialReference,t,i,r)[0]}function Fw(e,t,i,r,s=null,h=null){if(oe(i)||oe(r))return t;if(Ka(i,r,s))return t.map(y=>Qae(y,i,r));if(oe(s)){const y=bh.cacheKey(i,r);J_[y]!==void 0?s=J_[y]:(s=Zae(i,r,null),oe(s)&&(s=new bh),J_[y]=s)}if(oe(Eh))throw new P7;return Y(h)?Eh._project(e,t,i,r,s,h):Eh._project(e,t,i,r,s)}function mxe(e,t){return oe(e)?{pending:null,geometry:null}:ki(e.spatialReference,t)?{pending:null,geometry:e}:Mr(e.spatialReference)&&Mr(t)?Ka(e.spatialReference,t)||Zl()?{pending:null,geometry:Xae(e,t)}:(yt(KF),{pending:Xl(),geometry:null}):{pending:null,geometry:null}}function Zae(e,t,i=null){if(oe(Eh))throw new P7;if(oe(e)||oe(t))return null;const r=Eh._getTransformation(Lw,e,t,i,i==null?void 0:i.spatialReference);return r!==null?bh.fromGE(r):null}class P7 extends ne{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var se;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(se||(se={}));function Xae(e,t){try{const i=Dh(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=gF(i.type,e.spatialReference,t);return Y(r)&&r(i),i}catch(i){if(!(i instanceof P7))throw i;return null}}function Ka(e,t,i){return!i&&(!!ki(e,t)||Mr(e)&&Mr(t)&&!!tj(e,t,ij))}async function YF(e,t,i,r){if(Zl())return f$(r);if(Array.isArray(e)){for(const{source:s,dest:h,geographicTransformation:y}of e)if(!Ka(s,h,y))return Xl(r)}else if(!Ka(e,t,i))return Xl(r);return f$(r)}function Qae(e,t,i){return e?"x"in e?ZF(e,t,new et,i,0):"xmin"in e?ile(e,t,new Ut,i,0):"rings"in e?XF(e,t,new rn,i,0):"paths"in e?tle(e,t,new tn,i,0):"points"in e?ele(e,t,new jp,i,0):null:null}function gxe(e,t,i=t.spatialReference,r=0){return!oe(i)&&Y(ZF(e,e.spatialReference,t,i,r))}function ZF(e,t,i,r,s){vi[0]=e.x,vi[1]=e.y;const h=e.z;return vi[2]=h!==void 0?h:s,Ql(vi,t,0,vi,r,0,1)?(i.x=vi[0],i.y=vi[1],i.spatialReference=r,h===void 0?(i.z=void 0,i.hasZ=!1):(i.z=vi[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function ele(e,t,i,r,s){const{points:h,hasZ:y,hasM:f}=e,w=[],S=h.length,E=[];for(const A of h)E.push(A[0],A[1],y?A[2]:s);if(!Ql(E,t,0,E,r,0,S))return null;for(let A=0;A<S;++A){const P=3*A,N=E[P],F=E[P+1];y&&f?w.push([N,F,E[P+2],h[A][3]]):y?w.push([N,F,E[P+2]]):f?w.push([N,F,h[A][2]]):w.push([N,F])}return i.points=w,i.spatialReference=r,i.hasZ=y,i.hasM=f,i}function tle(e,t,i,r,s){const{paths:h,hasZ:y,hasM:f}=e,w=[];return QF(h,y,f,t,w,r,s)?(i.paths=w,i.spatialReference=r,i.hasZ=y,i.hasM=f,i):null}function vxe({hasZ:e,spatialReference:t,paths:i},r,s=0){const h=Ph(t,Um),y=Vl[h][se.WGS84_COMPARABLE_LON_LAT];if(oe(y))return!1;const f=e?w=>w:w=>P2(vi,w[0],w[1],s);for(const w of i){const S=[];for(const E of w){const A=[0,0,s];y(f(E),0,A,0),S.push(A)}r.push(S)}return!0}function bxe({hasZ:e,spatialReference:t,rings:i},r,s=0){const h=Ph(t,Um),y=Vl[h][se.WGS84_COMPARABLE_LON_LAT];if(oe(y))return!1;const f=e?w=>w:w=>P2(vi,w[0],w[1],s);for(const w of i){const S=[];for(const E of w){const A=[0,0,s];y(f(E),0,A,0),S.push(A)}r.push(S)}return!0}function wxe(e,t,i=t.spatialReference,r=0){return Y(i)&&Y(XF(e,e.spatialReference,t,i,r))}function XF(e,t,i,r,s){const{rings:h,hasZ:y,hasM:f}=e,w=[];return QF(h,y,f,t,w,r,s)?(i.rings=w,i.spatialReference=r,i.hasZ=y,i.hasM=f,i):null}function ile(e,t,i,r,s){const{xmin:h,ymin:y,xmax:f,ymax:w,hasZ:S,hasM:E}=e;return CI(h,y,S?e.zmin:s,t,vi,r)?(i.xmin=vi[0],i.ymin=vi[1],S&&(i.zmin=vi[2]),CI(f,w,S?e.zmax:s,t,vi,r)?(i.xmax=vi[0],i.ymax=vi[1],S&&(i.zmax=vi[2]),E&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function _xe(e,t,i){return Ql(e,t,0,vi,i.spatialReference,0,1)?(i.x=vi[0],i.y=vi[1],i.z=vi[2],i):null}function xxe(e,t,i,r=0){vi[0]=e.x,vi[1]=e.y;const s=e.z;return vi[2]=s!==void 0?s:r,Ql(vi,e.spatialReference,0,t,i,0,1)}function CI(e,t,i,r,s,h){return pi[0]=e,pi[1]=t,pi[2]=i,Ql(pi,r,0,s,h,0,1)}function Sxe(e,t,i,r){return!(oe(t)||oe(r)||e.length<2)&&(e.length===2&&(pi[0]=e[0],pi[1]=e[1],pi[2]=0,e=pi),Ql(e,t,0,i,r,0,1))}function Mxe(e,t,i){return rle(e,t,i)}function rle(e,t,i){if(oe(t))return!1;const r=Ph(t,Um),s=Vl[r][se.WGS84_COMPARABLE_LON_LAT];return!oe(s)&&(s(e,0,pi,0),i!==pi&&(i[0]=pi[0],i[1]=pi[1],i.length>2&&(i[2]=pi[2])),!0)}function Ql(e,t,i,r,s,h,y=1){const f=tj(t,s,ij);if(oe(f))return!1;if(f===ai){if(e===r&&i===h)return!0;const S=i+3*y;for(let E=i,A=h;E<S;E++,A++)r[A]=e[E];return!0}const w=i+3*y;for(let S=i,E=h;S<w;S+=3,E+=3)f(e,S,r,E);return!0}function QF(e,t,i,r,s,h,y=0){const f=new Array;for(const S of e)for(const E of S)f.push(E[0],E[1],t?E[2]:y);if(!Ql(f,r,0,f,h,0,f.length/3))return!1;let w=0;s.length=0;for(const S of e){const E=new Array;for(const A of S)t&&i?E.push([f[w++],f[w++],f[w++],A[3]]):t?E.push([f[w++],f[w++],f[w++]]):i?(E.push([f[w++],f[w++],A[2]]),w++):(E.push([f[w++],f[w++]]),w++);s.push(E)}return!0}function Exe(e,t,i,r){return e!=null&&(ki(t,r)?(CM(i,e),!0):(pi[0]=e[0],pi[1]=e[1],pi[2]=0,!!Ql(pi,t,0,pi,r,0,1)&&(i[0]=pi[0],i[1]=pi[1],pi[0]=e[2],pi[1]=e[3],pi[2]=0,!!Ql(pi,t,0,pi,r,0,1)&&(i[2]=pi[0],i[3]=pi[1],!0))))}function Txe(e,t,i,r){if(oe(e)||oe(r))return!1;const s=Ph(e,Um),h=Ph(r,wle);if(s===h&&!OI(h)&&(s!==se.UNKNOWN||ki(e,r)))return bF(i,t),!0;if(OI(h)){const y=Vl[s][se.LON_LAT],f=Vl[se.LON_LAT][h];return!oe(y)&&!oe(f)&&(y(t,0,vu,0),f(vu,0,bu,0),ej(Na*vu[0],Na*vu[1],i),i[12]=bu[0],i[13]=bu[1],i[14]=bu[2],!0)}if((h===se.WEB_MERCATOR||h===se.PLATE_CARREE)&&(s===se.WGS84||s===se.CGCS2000&&h===se.PLATE_CARREE||s===se.SPHERICAL_ECEF||s===se.WEB_MERCATOR)){const y=Vl[s][se.LON_LAT],f=Vl[se.LON_LAT][h];return!oe(y)&&!oe(f)&&(y(t,0,vu,0),f(vu,0,bu,0),s===se.SPHERICAL_ECEF?nle(Na*vu[0],Na*vu[1],i):w7(i),i[12]=bu[0],i[13]=bu[1],i[14]=bu[2],!0)}return!1}function OI(e){return e===se.SPHERICAL_ECEF||e===se.SPHERICAL_MARS_PCPF||e===se.SPHERICAL_MOON_PCPF}function ej(e,t,i){const r=Math.sin(e),s=Math.cos(e),h=Math.sin(t),y=Math.cos(t),f=i;return f[0]=-r,f[4]=-h*s,f[8]=y*s,f[12]=0,f[1]=s,f[5]=-h*r,f[9]=y*r,f[13]=0,f[2]=0,f[6]=y,f[10]=h,f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,f}function nle(e,t,i){return ej(e,t,i),ou(i,i),i}function Ph(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=mf(e,1)),e.wkt===bL.wkt?t.spatialReferenceId=se.SPHERICAL_ECEF:Ky(e)?t.spatialReferenceId=se.WGS84:Ga(e)?t.spatialReferenceId=se.WEB_MERCATOR:GJ(e)?t.spatialReferenceId=se.PLATE_CARREE:e.wkt===oie.wkt?t.spatialReferenceId=se.WGS84_ECEF:e.wkid===Ws.CGCS2000?t.spatialReferenceId=se.CGCS2000:e.wkt===Sw.wkt?t.spatialReferenceId=se.SPHERICAL_MARS_PCPF:e.wkt===Mw.wkt?t.spatialReferenceId=se.SPHERICAL_MOON_PCPF:ef(e)?t.spatialReferenceId=se.GCSMARS2000:tf(e)?t.spatialReferenceId=se.GCSMOON2000:t.spatialReferenceId=se.UNKNOWN)}function ai(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function S0(e,t,i,r){i[r++]=V0*(e[t++]/fi.radius),i[r++]=V0*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/fi.radius))),i[r]=e[t]}function sle(e,t,i,r){S0(e,t,i,r),np(i,r,i,r)}function ole(e,t,i,r){S0(e,t,i,r),op(i,r,i,r)}function ale(e,t,i,r,s){const h=.4999999*Math.PI,y=Kn(Na*e[t+1],-h,h),f=Math.sin(y);i[r++]=Na*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+f)/(1-f)),i[r]=e[t+2]}function pm(e,t,i,r){ale(e,t,i,r,fi)}const PI=fi.radius*Math.PI/180,NI=180/(fi.radius*Math.PI);function ip(e,t,i,r){i[r]=e[t]*PI,i[r+1]=e[t+1]*PI,i[r+2]=e[t+2]}function rp(e,t,i,r){i[r]=e[t]*NI,i[r+1]=e[t+1]*NI,i[r+2]=e[t+2]}function lle(e,t,i,r){S0(e,t,i,r),ip(i,r,i,r)}function ule(e,t,i,r){ap(e,t,i,r),ip(i,r,i,r)}function hle(e,t,i,r){sp(e,t,i,r),ip(i,r,i,r)}function cle(e,t,i,r){rp(e,t,i,r),np(i,r,i,r)}function ple(e,t,i,r){rp(e,t,i,r),pm(i,r,i,r)}function dle(e,t,i,r){rp(e,t,i,r),op(i,r,i,r)}function N7(e){if(oe(e))return!1;const t=Ph(e,Um);return!!Vl[t][se.WGS84_COMPARABLE_LON_LAT]}function R7(e,t,i,r,s){const h=s+e[t+2],y=Na*e[t+1],f=Na*e[t],w=Math.cos(y);i[r++]=Math.cos(f)*w*h,i[r++]=Math.sin(f)*w*h,i[r]=Math.sin(y)*h}function RI(e,t,i,r){R7(e,t,i,r,Ah.radius)}function LI(e,t,i,r){R7(e,t,i,r,Bl.radius)}function np(e,t,i,r){R7(e,t,i,r,fi.radius)}function L7(e,t,i,r,s){const h=e[t],y=e[t+1],f=e[t+2],w=Math.sqrt(h*h+y*y+f*f),S=WN(f/(w===0?1:w)),E=Math.atan2(y,h);i[r++]=V0*E,i[r++]=V0*S,i[r]=w-s}function FI(e,t,i,r){L7(e,t,i,r,Ah.radius)}function jI(e,t,i,r){L7(e,t,i,r,Bl.radius)}function sp(e,t,i,r){L7(e,t,i,r,fi.radius)}function fle(e,t,i,r){sp(e,t,i,r),pm(i,r,i,r)}function yle(e,t,i,r){sp(e,t,i,r),op(i,r,i,r)}function mle(e,t,i,r,s){const h=Na*e[t],y=Na*e[t+1],f=e[t+2],w=Math.sin(y),S=Math.cos(y),E=s.radius/Math.sqrt(1-s.eccentricitySquared*w*w);i[r++]=(E+f)*S*Math.cos(h),i[r++]=(E+f)*S*Math.sin(h),i[r++]=(E*(1-s.eccentricitySquared)+f)*w}function op(e,t,i,r){mle(e,t,i,r,fi)}function ap(e,t,i,r){const s=Kae,h=e[t],y=e[t+1],f=e[t+2];let w,S,E,A,P,N,F,V,U,X,re,he,pe,ae,le,Te,Ee,Oe,Ae,Fe,ze;w=Math.abs(f),S=h*h+y*y,E=Math.sqrt(S),A=S+f*f,P=Math.sqrt(A),Fe=Math.atan2(y,h),N=f*f/A,F=S/A,ae=s.a2/P,le=s.a3-s.a4/P,F>.3?(V=w/P*(1+F*(s.a1+ae+N*le)/P),Ae=Math.asin(V),X=V*V,U=Math.sqrt(1-X)):(U=E/P*(1-N*(s.a5-ae-F*le)/P),Ae=Math.acos(U),X=1-U*U,V=Math.sqrt(X)),re=1-fi.eccentricitySquared*X,he=fi.radius/Math.sqrt(re),pe=s.a6*he,ae=E-he*U,le=w-pe*V,Ee=U*ae+V*le,Te=U*le-V*ae,Oe=Te/(pe/re+Ee),Ae+=Oe,ze=Ee+Te*Oe/2,f<0&&(Ae=-Ae),i[r++]=V0*Fe,i[r++]=V0*Ae,i[r]=ze}function gle(e,t,i,r){ap(e,t,i,r),np(i,r,i,r)}function vle(e,t,i,r){ap(e,t,i,r),pm(i,r,i,r)}const Vl={[se.WGS84]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:ai,[se.SPHERICAL_ECEF]:np,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:pm,[se.PLATE_CARREE]:ip,[se.WGS84]:ai,[se.WGS84_ECEF]:op},[se.CGCS2000]:{[se.CGCS2000]:ai,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:ai,[se.SPHERICAL_ECEF]:np,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:ip,[se.WGS84]:null,[se.WGS84_ECEF]:op},[se.GCSMARS2000]:{[se.CGCS2000]:null,[se.GCSMARS2000]:ai,[se.GCSMOON2000]:null,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:LI,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.GCSMOON2000]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:ai,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:RI,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.WEB_MERCATOR]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:S0,[se.WGS84_COMPARABLE_LON_LAT]:S0,[se.SPHERICAL_ECEF]:sle,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:ai,[se.PLATE_CARREE]:lle,[se.WGS84]:S0,[se.WGS84_ECEF]:ole},[se.WGS84_ECEF]:{[se.CGCS2000]:ap,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:ap,[se.WGS84_COMPARABLE_LON_LAT]:ap,[se.SPHERICAL_ECEF]:gle,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:vle,[se.PLATE_CARREE]:ule,[se.WGS84]:ap,[se.WGS84_ECEF]:ai},[se.SPHERICAL_ECEF]:{[se.CGCS2000]:sp,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:sp,[se.WGS84_COMPARABLE_LON_LAT]:sp,[se.SPHERICAL_ECEF]:ai,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:fle,[se.PLATE_CARREE]:hle,[se.WGS84]:sp,[se.WGS84_ECEF]:yle},[se.SPHERICAL_MARS_PCPF]:{[se.CGCS2000]:null,[se.GCSMARS2000]:jI,[se.GCSMOON2000]:null,[se.LON_LAT]:jI,[se.WGS84_COMPARABLE_LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:ai,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.SPHERICAL_MOON_PCPF]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:FI,[se.LON_LAT]:FI,[se.WGS84_COMPARABLE_LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:ai,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.UNKNOWN]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:null,[se.WGS84_COMPARABLE_LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:ai,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.LON_LAT]:{[se.CGCS2000]:ai,[se.GCSMARS2000]:ai,[se.GCSMOON2000]:ai,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:ai,[se.SPHERICAL_ECEF]:np,[se.SPHERICAL_MARS_PCPF]:LI,[se.SPHERICAL_MOON_PCPF]:RI,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:pm,[se.PLATE_CARREE]:ip,[se.WGS84]:ai,[se.WGS84_ECEF]:op},[se.WGS84_COMPARABLE_LON_LAT]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:ai,[se.WGS84_COMPARABLE_LON_LAT]:ai,[se.SPHERICAL_ECEF]:np,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:ip,[se.WGS84]:ai,[se.WGS84_ECEF]:op},[se.PLATE_CARREE]:{[se.CGCS2000]:rp,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:rp,[se.WGS84_COMPARABLE_LON_LAT]:rp,[se.SPHERICAL_ECEF]:cle,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:ple,[se.PLATE_CARREE]:ai,[se.WGS84]:rp,[se.WGS84_ECEF]:dle}};function tj(e,t,i=F7()){return oe(e)||oe(t)?null:ble(e,t,i).projector}function ble(e,t,i){if(oe(e)||oe(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Ph(e,i.source),s=Ph(t,i.dest);return r===se.UNKNOWN&&s===se.UNKNOWN?ki(e,t)?i.projector=ai:i.projector=null:i.projector=Vl[r][s],i}function F7(){return{source:{spatialReference:null,spatialReferenceId:se.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:se.UNKNOWN,metersPerUnit:1},projector:ai}}const Um={spatialReference:null,spatialReferenceId:se.UNKNOWN},wle={spatialReference:null,spatialReferenceId:se.UNKNOWN},ij=F7();F7();const Na=A1(1),V0=HN(1),pi=Lr(),vu=Lr(),bu=Lr(),vi=Lr();async function _le(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return zl(e);const i=ot.WGS84;return await YF(t,i),Dh(e,i)}function t1(e,t){if(!Cd(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Cd(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function As(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}async function $xe(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return _le(i)}const j7={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function xle(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function rj(e){return typeof e=="string"?hr(e):de(e)}function Sle(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const h=e[s];if(h!=null&&typeof h!="function")if(Array.isArray(h)){r[s]=[];for(let y=0;y<h.length;y++)r[s][y]=Sle(h[y])}else if(typeof h=="object")if(h.toJSON){const y=h.toJSON(i&&i[s]);r[s]=t?y:JSON.stringify(y)}else r[s]=t?h:JSON.stringify(h);else r[s]=h}return r}function Mle(e,t,i){const r=ZP(t);return e.map(s=>{const h=r.fromJSON(s);return h.spatialReference=i,h})}let Ic=class extends ve{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:rf(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};g([x()],Ic.prototype,"geometries",void 0),g([x({json:{read:{source:"outSR"}}})],Ic.prototype,"outSpatialReference",void 0),g([x()],Ic.prototype,"transformation",void 0),g([x()],Ic.prototype,"transformForward",void 0),Ic=g([K("esri.rest.support.ProjectParameters")],Ic);const CS=Ic,Ele=ji(CS);async function DI(e,t,i){t=Ele(t);const r=rj(e),s={...r.query,f:"json",...t.toJSON()},h=t.outSpatialReference,y=rf(t.geometries[0]),f=xle(s,i);return ni(r.path+"/project",f).then(({data:{geometries:w}})=>Mle(w,y,h))}let qu=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};g([x({type:String,json:{write:!0}})],qu.prototype,"facilityIdField",void 0),g([x({type:String,json:{write:!0}})],qu.prototype,"layerId",void 0),g([x({type:String,json:{write:!0}})],qu.prototype,"nameField",void 0),g([x({type:String,json:{write:!0}})],qu.prototype,"siteIdField",void 0),g([x({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],qu.prototype,"sublayerId",void 0),qu=g([K("esri.layers.support.FacilityLayerInfo")],qu);const Tle=qu;let Io=class extends ve{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};g([x({type:String,json:{write:!0}})],Io.prototype,"facilityIdField",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"layerId",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"levelIdField",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"levelNumberField",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"longNameField",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"shortNameField",void 0),g([x({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Io.prototype,"sublayerId",void 0),g([x({type:String,json:{write:!0}})],Io.prototype,"verticalOrderField",void 0),Io=g([K("esri.layers.support.LevelLayerInfo")],Io);const $le=Io;let Ac=class extends ve{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};g([x({type:String,json:{write:!0}})],Ac.prototype,"layerId",void 0),g([x({type:String,json:{write:!0}})],Ac.prototype,"nameField",void 0),g([x({type:String,json:{write:!0}})],Ac.prototype,"siteIdField",void 0),g([x({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ac.prototype,"sublayerId",void 0),Ac=g([K("esri.layers.support.SiteLayerInfo")],Ac);const Ile=Ac;let Od=class extends ve{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};g([x({type:$le,json:{write:!0}})],Od.prototype,"levelLayer",void 0),g([x({type:Tle,json:{write:!0}})],Od.prototype,"facilityLayer",void 0),g([x({type:Ile,json:{write:!0}})],Od.prototype,"siteLayer",void 0),Od=g([K("esri.support.MapFloorInfo")],Od);const Ale=Od;let Pd=class extends Wi(ve){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};g([x({type:String,json:{write:{isRequired:!0}}})],Pd.prototype,"expression",void 0),g([x({type:["number","string"],json:{write:!0}})],Pd.prototype,"returnType",void 0),g([x({type:String,json:{write:!0}})],Pd.prototype,"title",void 0),Pd=g([K("esri.webdoc.geotriggersInfo.ExpressionInfo")],Pd);const nj=Pd,Gg=new lt({deviceLocation:"device-location"});let ry=class extends Wi(ve){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};g([x({type:nj,json:{write:!0}})],ry.prototype,"filterExpression",void 0),g([x({type:Gg.apiValues,readOnly:!0,json:{type:Gg.jsonValues,read:Gg.read,write:Gg.write}})],ry.prototype,"type",void 0),ry=g([K("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],ry);const kle=ry;let ny=class extends Wi(ve){constructor(e){super(e),this.geometry=null,this.where=null}};g([x({types:Rh,json:{read:Ua,write:!0}})],ny.prototype,"geometry",void 0),g([x({type:String,json:{write:!0}})],ny.prototype,"where",void 0),ny=g([K("esri.webdoc.geotriggersInfo.FeatureFilter")],ny);const Cle=ny;let Nd=class extends Wi(ve){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};g([x({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Nd.prototype,"layerId",void 0),g([x({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Nd.prototype,"layerUrl",void 0),g([Xe({featureLayer:"feature-layer"},{readOnly:!0})],Nd.prototype,"type",void 0),Nd=g([K("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Nd);const Ole=Nd;let kc=class extends Wi(ve){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};g([x({type:Ole,json:{write:{isRequired:!0}}})],kc.prototype,"fenceSource",void 0),g([x({type:Cle,json:{write:!0}})],kc.prototype,"filter",void 0),g([x({type:Number,json:{write:!0}})],kc.prototype,"bufferDistance",void 0),g([Xe({features:"features"},{readOnly:!0})],kc.prototype,"type",void 0),kc=g([K("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],kc);const Ple=kc;let wb=class extends Wi(ve){constructor(e){super(e),this.type="fence"}};g([Xe({fence:"fence"},{readOnly:!0})],wb.prototype,"type",void 0),wb=g([K("esri.webdoc.geotriggersInfo.Geotrigger")],wb);const sj=wb;let sy=class extends Wi(ve){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};g([x({type:nj,json:{write:!0}})],sy.prototype,"expressionInfo",void 0),g([x({type:[String],json:{write:!0}})],sy.prototype,"requestedActions",void 0),sy=g([K("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],sy);const Nle=sy,Rle=new lt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),Lle=new lt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Ug=new lt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Ao=class extends sj{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};g([Xe(Rle)],Ao.prototype,"enterExitRule",void 0),g([x({type:kle,json:{write:{isRequired:!0}}})],Ao.prototype,"feed",void 0),g([Xe(Lle)],Ao.prototype,"feedAccuracyMode",void 0),g([x({type:Ug.apiValues,json:{type:Ug.jsonValues,read:Ug.read,write:{writer:Ug.write,isRequired:!0}}})],Ao.prototype,"fenceNotificationRule",void 0),g([x({type:Ple,json:{write:{isRequired:!0}}})],Ao.prototype,"fenceParameters",void 0),g([x({type:String,json:{write:!0}})],Ao.prototype,"name",void 0),g([x({type:Nle,json:{write:!0}})],Ao.prototype,"notificationOptions",void 0),g([Xe({fence:"fence"},{readOnly:!0})],Ao.prototype,"type",void 0),Ao=g([K("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Ao);const Fle=Ao,jle={base:sj,key:"type",typeMap:{fence:Fle}};let _b=class extends Wi(ve){constructor(e){super(e),this.geotriggers=null}};g([x({types:[jle],json:{write:{isRequired:!0}}})],_b.prototype,"geotriggers",void 0),_b=g([K("esri.webdoc.GeotriggersInfo")],_b);const Dle=_b;var OS;let Rd=OS=class extends ve{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new OS(de({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};g([x({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Rd.prototype,"activeRange",void 0),g([x({type:[Number],json:{write:!0}})],Rd.prototype,"currentRangeExtent",void 0),g([x({type:[Number],json:{write:!0}})],Rd.prototype,"fullRangeExtent",void 0),Rd=OS=g([K("esri.webdoc.RangeInfo")],Rd);const D7=Rd;var PS;let ba=PS=class extends ve{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new PS(de({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};g([x({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ba.prototype,"enabled",void 0),g([x({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ba.prototype,"longNames",void 0),g([x({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ba.prototype,"minimized",void 0),g([x({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ba.prototype,"pinnedLevels",void 0),g([x({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ba.prototype,"site",void 0),g([x({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ba.prototype,"facility",void 0),g([x({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ba.prototype,"level",void 0),ba=PS=g([K("esri.webdoc.widgets.FloorFilter")],ba);const zle=ba;var NS;const qg=new lt({slider:"slider",picker:"picker"});let Ld=NS=class extends ve{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new NS({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};g([x({type:qg.apiValues,nonNullable:!0,json:{type:qg.jsonValues,default:null,read:{reader:qg.read},write:{isRequired:!0,writer:qg.write}}})],Ld.prototype,"interactionMode",void 0),g([x({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],Ld.prototype,"numStops",void 0),g([x({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Ld.prototype,"stopInterval",void 0),Ld=NS=g([K("esri.webdoc.widgets.Range")],Ld);const Vle=Ld;var RS;let mr=RS=class extends ve{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=e[0]!=null?new Date(e[0]):null,i=e[1]!=null?new Date(e[1]):null;return new Mn({start:t,end:i})}writeCurrentTimeExtent(e,t,i){e&&Ur(i,[Y(e.start)?e.start.getTime():null,Y(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,s=i.startTime!=null?new Date(i.startTime):null;return new Mn({start:s,end:r})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},r=e.end,s=e.start;r&&(i.endTime=Y(r)?r.getTime():null),s&&(i.startTime=Y(s)?s.getTime():null)}readStopInterval(e,t,i){return e?kp.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,r){if(!e)return;const s=e.toJSON(r);Ur(i,{interval:s.value,units:s.unit},t)}readStops(e){return e&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,i){e&&e.length&&Ur(i,e.map(r=>r.getTime()),t)}clone(){return new RS(de({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};g([x({type:Mn,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],mr.prototype,"currentTimeExtent",void 0),g([je("currentTimeExtent")],mr.prototype,"readCurrentTimeExtent",null),g([De("currentTimeExtent")],mr.prototype,"writeCurrentTimeExtent",null),g([x({type:Mn,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],mr.prototype,"fullTimeExtent",void 0),g([je("fullTimeExtent")],mr.prototype,"readFullTimeExtent",null),g([De("fullTimeExtent")],mr.prototype,"writeFullTimeExtent",null),g([x({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],mr.prototype,"loop",void 0),g([x({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const e=!!this.stopInterval,t=!!((r=this.stops)!=null&&r.length),i=!(e||t);return{enabled:i,isRequired:i}}}}})],mr.prototype,"numStops",void 0),g([x({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],mr.prototype,"numThumbs",void 0),g([x({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],mr.prototype,"stopDelay",void 0),g([x({type:kp,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var i;const e=this.numStops!=null,t=!!((i=this.stops)!=null&&i.length);return{enabled:!t,isRequired:!(e||t)}}}}})],mr.prototype,"stopInterval",void 0),g([je("stopInterval")],mr.prototype,"readStopInterval",null),g([De("stopInterval")],mr.prototype,"writeStopInterval",null),g([x({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],mr.prototype,"stops",void 0),g([je("stops")],mr.prototype,"readStops",null),g([De("stops")],mr.prototype,"writeStops",null),mr=RS=g([K("esri.webdoc.widgets.TimeSlider")],mr);const Gle=mr;var LS;let Fd=LS=class extends ve{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new LS(de({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};g([x({type:Vle,json:{write:!0}})],Fd.prototype,"range",void 0),g([x({type:Gle,json:{write:!0}})],Fd.prototype,"timeSlider",void 0),g([x({type:zle,json:{write:!0}})],Fd.prototype,"floorFilter",void 0),Fd=LS=g([K("esri.webdoc.Widgets")],Fd);const Ule=Fd,qle={width:600,height:400},Bg=1.5;function Ble(e,t){t=t||qle;let{width:i,height:r}=t;const s=i/r;return s<Bg?r=i/Bg:s>Bg&&(i=r*Bg),i>e.width&&(r*=e.width/i,i=e.width),r>e.height&&(i*=e.height/r,r=e.height),{width:Math.round(i),height:Math.round(r)}}function zI(e){return{enabled:!!(e!=null&&e.length)}}var FS;let jd=FS=class extends ve{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new FS({exactMatch:this.exactMatch,type:this.type,name:this.name})}};g([x({type:Boolean,json:{write:!0}})],jd.prototype,"exactMatch",void 0),g([x({type:String,json:{write:!0}})],jd.prototype,"name",void 0),g([Xe(b7)],jd.prototype,"type",void 0),jd=FS=g([K("esri.webdoc.applicationProperties.SearchLayerField")],jd);const Hle=jd;var jS;let Dd=jS=class extends ve{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new jS(de({field:this.field,id:this.id,subLayer:this.subLayer}))}};g([x({type:Hle,json:{write:{isRequired:!0}}})],Dd.prototype,"field",void 0),g([x({type:String,json:{write:{isRequired:!0}}})],Dd.prototype,"id",void 0),g([x({type:li,json:{write:!0}})],Dd.prototype,"subLayer",void 0),Dd=jS=g([K("esri.webdoc.applicationProperties.SearchLayer")],Dd);const Wle=Dd;var DS;let zd=DS=class extends ve{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new DS({exactMatch:this.exactMatch,type:this.type,name:this.name})}};g([x({type:Boolean,json:{write:!0}})],zd.prototype,"exactMatch",void 0),g([x({type:String,json:{write:!0}})],zd.prototype,"name",void 0),g([Xe(b7)],zd.prototype,"type",void 0),zd=DS=g([K("esri.webdoc.applicationProperties.SearchTableField")],zd);const Jle=zd;var zS;let oy=zS=class extends ve{constructor(e){super(e),this.field=null,this.id=null}clone(){return new zS(de({field:this.field,id:this.id}))}};g([x({type:Jle,json:{write:{isRequired:!0}}})],oy.prototype,"field",void 0),g([x({type:String,json:{write:{isRequired:!0}}})],oy.prototype,"id",void 0),oy=zS=g([K("esri.webdoc.applicationProperties.SearchTable")],oy);const Kle=oy;var VS;const oj=Je.ofType(Wle),aj=Je.ofType(Kle);let wa=VS=class extends ve{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new oj,this.tables=new aj}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new VS(de({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};g([x({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],wa.prototype,"addressSearchEnabled",void 0),g([je("addressSearchEnabled")],wa.prototype,"readAddressSearchEnabled",null),g([De("addressSearchEnabled")],wa.prototype,"writeAddressSearchEnabled",null),g([x({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],wa.prototype,"enabled",void 0),g([x({type:String,json:{write:!0}})],wa.prototype,"hintText",void 0),g([x({type:oj,json:{write:{overridePolicy:zI},origins:{"web-scene":{write:{isRequired:!0}}}}})],wa.prototype,"layers",void 0),g([x({type:aj,json:{read:!0,write:{overridePolicy:zI}}})],wa.prototype,"tables",void 0),wa=VS=g([K("esri.webdoc.applicationProperties.Search")],wa);const Yle=wa;var GS;let xb=GS=class extends ve{constructor(e){super(e),this.search=null}clone(){return new GS(de({search:this.search}))}};g([x({type:Yle,json:{write:!0}})],xb.prototype,"search",void 0),xb=GS=g([K("esri.webdoc.applicationProperties.Viewing")],xb);const Zle=xb;var US;let Vd=US=class extends ve{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new US(de({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};g([x({json:{write:!0}})],Vd.prototype,"editing",void 0),g([x({json:{write:!0}})],Vd.prototype,"offline",void 0),g([x({type:Zle,json:{write:!0}})],Vd.prototype,"viewing",void 0),Vd=US=g([K("esri.webmap.ApplicationProperties")],Vd);const Xle=Vd;var qS;let mp=qS=class extends ve{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new qS({url:this.url})}};g([x({type:String,json:{write:{isRequired:!0}}})],mp.prototype,"url",void 0),mp=qS=g([K("esri.webdoc.support.SlideThumbnail")],mp);var BS;const lj="esri.webmap.Bookmark",VI=Le.getLogger(lj);let _a=BS=class extends C2(ve){constructor(e){super(e),this.name=null,this.thumbnail=new mp,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new mp({url:e}):ji(mp,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;Y(t)&&t.type==="point"&&oe(i)&&VI.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:r}=t;return qr.fromJSON(r||{targetGeometry:i})}writeViewpoint(e,t,i,r){if(!e)return;const{targetGeometry:s}=e;if(Y(s)&&s.type!=="extent"){const h="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new ne("property:unsupported",h)):VI.error(h)}else Y(s)&&(t.extent=s.toJSON()),t[i]=e.toJSON()}clone(){return new BS(de({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};g([x({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],_a.prototype,"name",void 0),g([x({type:mp,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],_a.prototype,"thumbnail",void 0),g([Mt("thumbnail")],_a.prototype,"castThumbnail",null),g([x({type:Mn,json:{write:!0}})],_a.prototype,"timeExtent",void 0),g([x({type:qr,nonNullable:!0,json:{write:!0}})],_a.prototype,"viewpoint",null),g([je("viewpoint",["extent","viewpoint"])],_a.prototype,"readViewpoint",null),g([De("viewpoint")],_a.prototype,"writeViewpoint",null),_a=BS=g([K(lj)],_a);const Qle=_a;var HS;let Sb=HS=class extends ve{constructor(e){super(e),this.color=new rt([0,0,0,1])}clone(){return new HS(de({color:this.color}))}};g([x({type:rt,json:{write:!0}})],Sb.prototype,"color",void 0),Sb=HS=g([K("esri.webmap.background.ColorBackground")],Sb);const a3=Sb;var WS;let Cc=WS=class extends qe{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new WS(de({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};g([x({type:a3})],Cc.prototype,"background",void 0),g([x({type:D7})],Cc.prototype,"rangeInfo",void 0),g([x({type:ot})],Cc.prototype,"spatialReference",void 0),g([x({type:qr})],Cc.prototype,"viewpoint",void 0),Cc=WS=g([K("esri.webmap.InitialViewProperties")],Cc);const Mb=Cc;class jw{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ne(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new jw(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),h=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(h))throw new ne((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(h))throw new ne((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(r,10),f=parseInt(s,10);return new jw(y,f,i)}}class Ry extends jw{constructor(t,i){super(t,i,"webmap")}}const Eb=new Ry(2,25),K_="Web Map",uj=Je.ofType(Qle),eue=Je.ofType(Bae),Hg=Le.getLogger("esri.WebMap"),ay=new Map;ay.set("image/jpeg","jpeg"),ay.set("image/jpg","jpg"),ay.set("image/png","png"),ay.set("image/gif","gif");const tue="ArcGIS Pro",GI=j7.JSAPI,UI="CollectorDisabled",qI="Collector",BI="Data Editing",HI="OfflineDisabled",WI="Offline",JI="Workforce Project",KI="Workforce Worker",YI="Workforce Dispatcher",iue="Offline Map Areas",rue="FieldMapsDisabled",ZI=j7.DEVELOPER_BASEMAP,nue=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map(e=>e.toLowerCase());let ui=class extends B2(Sn.LoadableMixin(pf(e7))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new uj,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new Mb,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,e==null||e.destroy()}initialize(){if(this.when().catch(e=>{Hg.error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=GI}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=BM}readInitialViewProperties(e,t){var s;const i=new Mb;t.background&&(i.background=a3.fromJSON(t.background));const r=(s=t.initialState)==null?void 0:s.viewpoint;return r&&(r.rotation&&Ry.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===tue&&(r.rotation*=-1),i.viewpoint=qr.fromJSON(r)),t.mapRangeInfo&&(i.rangeInfo=D7.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=ot.fromJSON(t.spatialReference)),i}writeInitialViewProperties(e,t,i,r){if(!e)return;const s=e.background;s&&s.color&&(t.background=s.write({},r)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},r)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},r))}writeLayers(e,t,i,r){t[i]=this._writeLayers(e,r,"operational-layers")}readSourceVersion(e,t){const[i,r]=t.version.split(".");return new Ry(parseInt(i,10),parseInt(r,10))}writeSourceVersion(e,t,i){t[i]=`${Eb.major}.${Eb.minor}`}writeTables(e,t,i,r){const s=this._writeLayers(e,r,"tables");s.length&&(t[i]=s)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return XM(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,t){t={...t,origin:"web-map"};const i=this._getAuthoringPropsState();$P(this,e,r=>super.read(e,r),t),this._restoreAuthoringPropsFromState(i)}write(e,t){if(this.loadStatus!=="loaded"){const i=new ne("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Hg.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),i}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const t=this.portalItem,i={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&hr(t.itemUrl),portal:t.portal||ur.getDefault()},r=this.write({},i);return this._validateJSONForWriting(i,e),await this._updateItemProperties(t),await this._updateItem(t,r,i),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const i=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const r={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:i.portal},s=this.write({},r);this._validateJSONForWriting(r,t),await this._updateItemPropertiesForSaveAs(i);const h=this._getThumbnailState();return await this._createItem(i,s,r,t),this._restoreThumbnailFromState(h),await this._updateItemThumbnail(),i}async updateFrom(e,t){const i=this._updateFromInternal(e,t);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var i,r,s,h;const t=this.resourceInfo;return this._collectAllLayersJSON(GH([(i=t==null?void 0:t.baseMap)==null?void 0:i.baseMapLayers,t==null?void 0:t.operationalLayers,(h=(s=(r=this.basemap)==null?void 0:r.resourceInfo)==null?void 0:s.data)==null?void 0:h.baseMapLayers])).find(y=>y.id===e.id)}_collectAllLayersJSON(e){return e.reduce((t,i)=>(t.push(i),i.layerType==="GroupLayer"&&(t=t.concat(this._collectAllLayersJSON(i.layers||[]))),t),[])}_writeLayers(e,t,i){return t={...t,layerContainerType:i},e.map(r=>Vx(r,i==="tables"?null:this.getLayerJSONFromResourceInfo(r),t)).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch(t=>{throw new ne("webmap:load-portal-item","Failed to load portal item",{error:t})}).then(()=>{if(e.type!=="Web Map")throw new ne("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})}).then(()=>e.fetchData()).then(t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||ur.getDefault()}))).then(()=>this._computeInitialViewpoint())}_readAndLoadFromJSON(e,t){const i=this._validateJSON(e);return this.read(i,t),this._loadFromJSON(i,t)}_validateJSON(e){const t=Ry.parse(e.version||"","webmap");return Eb.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||ur.getDefault()),ge(()=>import("./layersCreator.889eb0ce.js"),["assets/layersCreator.889eb0ce.js","assets/lazyLayerLoader.350d4ca7.js","assets/portalLayers.db2d1714.js","assets/layersLoader.6a08d389.js","assets/jsonContext.742790c7.js"]).then(({populateOperationalLayers:r})=>{const s=[],h=e.operationalLayers;h&&h.length&&s.push(r(this.layers,h,i));const y={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},f=e.tables;return f&&f.length&&s.push(r(this.tables,f,y)),Nr(s).then(()=>{})})}async _computeInitialViewpoint(){var r;let e=this.initialViewProperties;if((r=e==null?void 0:e.viewpoint)==null?void 0:r.targetGeometry)return;const i=await this._getExtentFromItem();i&&(e=e?e.clone():new Mb,e.viewpoint=new qr,e.viewpoint.targetGeometry=i,this.initialViewProperties=e)}async _getExtentFromItem(){var i,r;const e=(i=this.initialViewProperties)==null?void 0:i.spatialReference,t=(r=this.portalItem)==null?void 0:r.extent;return e&&t?e.isWGS84?t.clone():e.isWebMercator?La(t):(await ge(()=>import("./geometryServiceUtils.c5056942.js"),[])).getGeometryServiceURL(this.portalItem).then(s=>{const h=new CS;return h.geometries=[t],h.outSpatialReference=e,DI(s,h)}).then(s=>s[0]).catch(s=>(Hg.error("Error projecting item's extent:",s),null)):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,i=h=>this.allLayers.some(y=>y.id===h);t&&t.layers&&(t.layers=t.layers.filter(h=>i(h.id))),t&&t.tables&&(t.tables=t.tables.filter(h=>this.tables.some(y=>y.id===h.id)));const r=e&&e.editing&&e.editing.locationTracking;r&&r.info&&!i(r.info.layerId)&&(e.editing=null);const s=this.presentation&&this.presentation.slides;s&&s.forEach(h=>{h.visibleLayers&&(h.visibleLayers=h.visibleLayers.filter(y=>i(y.id)))})}async _validateMap(){var t;if(!((t=this.basemap)!=null&&t.baseLayers.length))throw new ne("webmap:save","Map does not have a valid basemap with a base layer.");let e=null;if(await kh(()=>{const i=tL(this.initialViewProperties,this.basemap);return e=i.spatialReference,!i.updating}),!ki(e,this.initialViewProperties.spatialReference))throw new ne("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:e})}_validateItem(){if(!this.portalItem)throw Hg.error("save: requires the portalItem property to be set"),new ne("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==K_)throw new ne("webmap:portal-item-wrong-type",`Portal item needs to have type "${K_}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Nr(e).then(()=>{})}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&typeof t.beforeSave=="function"){const i=t.beforeSave();i&&e.push(i)}await Nr(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map(t=>t.load());return Nr(e).then(()=>{})}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let i=e.messages.filter(r=>r.type==="error").map(r=>new ne(r.name,r.message,r.details));if(t.ignoreUnsupported&&(i=i.filter(r=>r.name!=="layer:unsupported"&&r.name!=="symbol:unsupported"&&r.name!=="symbol-layer:unsupported"&&r.name!=="property:unsupported"&&r.name!=="url:unsupported")),i.length>0)throw new ne("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){As(e,UI),As(e,rue),As(e,j7.METADATA),As(e,HI),As(e,iue),As(e,YI),As(e,JI),As(e,KI),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return this._projectToWGS84(i)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return zl(e);const i=await ge(()=>import("./geometryServiceUtils.c5056942.js"),[]),r=await i.getGeometryServiceURL(this.portalItem),s=new CS;return s.geometries=[e],s.outSpatialReference=ot.WGS84,(await DI(r,s))[0]}async _updateTypeKeywords(e){t1(e,GI),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((t,i,r)=>r.indexOf(t)===i))}_evalCollectorKeyword(e){Cd(e,UI)||Cd(e,JI)||Cd(e,KI)||Cd(e,YI)||!this._hasEditableFeatureLayer()?As(e,qI):t1(e,qI)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?t1(e,BI):As(e,BI)}_evalOfflineKeyword(e){!Cd(e,HI)&&this._isOfflineCapableMap()?t1(e,WI):As(e,WI)}_evalDeveloperBasemapKeyword(e){xte(this.basemap)?t1(e,ZI):As(e,ZI)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some(e=>e.loaded&&e8(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter(e=>e.type!=="group").every(e=>e.loaded&&this._isOfflineCapableLayer(e))}_isFeatureCollectionLike(e){return q2(e)||e.type==="map-notes"||e.type==="route"}_isOfflineCapableLayer(e){return e8(e)&&e.capabilities.operations.supportsSync||this._isFeatureCollectionLike(e)&&!e.portalItem||(e.type==="tile"||e.type==="vector-tile")&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||eL(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return e.type==="tile"&&Kte(e.url)&&nue.some(t=>e.url.toLowerCase().includes("/"+t+"/"))}async _updateItem(e,t,i){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,i)}async _createItem(e,t,i,r){const s=this.portalItem,h=!!(s&&s.id&&s.portal.user),y=e.portal;if(await y._signIn(),!await this._canCopyItem(s,h,y))throw new ne("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await y.user.addItem({item:e,folder:r.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,i)}async _canCopyItem(e,t,i){return!(Y(e)&&e.id&&e.typeKeywords&&e.typeKeywords.includes("useOnly"))||e.portal.portalHostname===i.portalHostname&&(t||await e.reload(),e.itemControl==="admin"||e.itemControl==="update")}_syncUpInstanceWithItem(e,t,i){xw.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&hr(e.itemUrl)}),Vte(i),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=F0.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=K_),t.portal||(t.portal=ur.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await kh(()=>e.ready),this._updateInitialViewProperties(e,t),e.map===this)for(const i of e.allLayerViews)for(const r of["visible","featureEffect"])r in i&&r in i.layer&&i._isOverridden(r)&&(i.layer[r]=i[r]);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var i;if(t.backgroundExcluded||(this.initialViewProperties.background=(i=e.background)==null?void 0:i.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new qr({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),i=e.extent.clone(),r=i.width/2;return i.xmin=t.x-r,i.xmax=t.x+r,i}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const i=Ble(e,t.thumbnailSize),r=await e.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(r.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Fh(e)){const t=zM(e),i=t&&t.mediaType,r=i&&ay.get(i.toLowerCase())||null,s=`thumbnail${Date.now()}`;return r?`${s}.${r}`:s}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:UM(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new ne("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};ui.VERSION=Eb,g([x({type:Xle,json:{write:!0}})],ui.prototype,"applicationProperties",void 0),g([x({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ui.prototype,"authoringApp",null),g([De("authoringApp")],ui.prototype,"writeAuthoringApp",null),g([x({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ui.prototype,"authoringAppVersion",null),g([De("authoringAppVersion")],ui.prototype,"writeAuthoringAppVersion",null),g([x({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],ui.prototype,"basemap",void 0),g([x({type:uj,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],ui.prototype,"bookmarks",void 0),g([x({type:Ale,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],ui.prototype,"floorInfo",void 0),g([x({type:Dle,json:{write:!0}})],ui.prototype,"geotriggersInfo",void 0),g([x({type:Mb,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:a3},"initialState.viewpoint":{type:qr},mapRangeInfo:{type:D7},spatialReference:{type:ot}}}}})],ui.prototype,"initialViewProperties",void 0),g([je("initialViewProperties")],ui.prototype,"readInitialViewProperties",null),g([De("initialViewProperties")],ui.prototype,"writeInitialViewProperties",null),g([x({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],ui.prototype,"layers",void 0),g([De("layers")],ui.prototype,"writeLayers",null),g([x({type:F0})],ui.prototype,"portalItem",void 0),g([x({json:{write:!0}})],ui.prototype,"presentation",void 0),g([x()],ui.prototype,"resourceInfo",void 0),g([x({readOnly:!0,type:Ry,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],ui.prototype,"sourceVersion",void 0),g([je("sourceVersion")],ui.prototype,"readSourceVersion",null),g([De("sourceVersion")],ui.prototype,"writeSourceVersion",null),g([x({json:{read:!1,write:{ignoreOrigin:!0}}})],ui.prototype,"tables",void 0),g([De("tables")],ui.prototype,"writeTables",null),g([x()],ui.prototype,"thumbnailUrl",null),g([x({type:Ule,json:{write:!0}})],ui.prototype,"widgets",void 0),g([x({type:eue,json:{read:!0,write:!0}})],ui.prototype,"utilityNetworks",void 0),ui=g([K("esri.WebMap")],ui);var JS;let xa=JS=class extends ve{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new JS({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};g([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xa.prototype,"cols",void 0),g([x({type:li,json:{write:!0}})],xa.prototype,"level",void 0),g([x({type:String,json:{write:!0}})],xa.prototype,"levelValue",void 0),g([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xa.prototype,"origin",void 0),g([x({type:Number,json:{write:!0}})],xa.prototype,"resolution",void 0),g([x({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],xa.prototype,"rows",void 0),g([x({type:Number,json:{write:!0}})],xa.prototype,"scale",void 0),xa=JS=g([K("esri.layers.support.LOD")],xa);const z7=xa;var Bu;const XI=new lt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let gr=Bu=class extends ve{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=ot.WebMercator,numLODs:h=24}=e;if(!Mr(s)){const A=[];if(i)for(let P=0;P<i.length;P++){const N=i[P];A.push({level:P,scale:N,resolution:N})}else{let P=5e-4;for(let N=h-1;N>=0;N--)A.unshift({level:N,scale:P,resolution:P}),P*=2}return new Bu({dpi:96,lods:A,origin:new et(0,0,s),size:[r,r],spatialReference:s})}const y=vs(s),f=e.origin?new et({x:e.origin.x,y:e.origin.y,spatialReference:s}):new et(y?{x:y.origin[0],y:y.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),w=96,S=1/(mf(s)*39.37*w),E=[];if(i)for(let A=0;A<i.length;A++){const P=i[A],N=P*S;E.push({level:A,scale:P,resolution:N})}else{let A=x2(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const P=Math.ceil(h/t);E.push({level:0,scale:A,resolution:A*S});for(let N=1;N<P;N++){const F=A/2**t,V=F*S;E.push({level:N,scale:F,resolution:V}),A=F}}return new Bu({dpi:w,lods:E,origin:f,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=vs(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return et.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,i=s.scale<i?s.scale:i,this._levelToLOD[s.level]=s})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],h=t[r+1];if(s<=e)return r;if(h===e)return r+1;if(s>e&&h<e)return r+Math.log(s/e)/Math.log(s/h)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let h,y;if(typeof t=="number")h=t,y=i;else if(ki(t.spatialReference,this.spatialReference))h=t.x,y=t.y,r=i;else{const S=S2(t,this.spatialReference);if(oe(S))return null;h=S.x,y=S.y,r=i}const f=s.resolution*this.size[0],w=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Ss()}),r.level=e,r.row=Math.floor((this.origin.y-y)/w+.001),r.col=Math.floor((h-this.origin.x)/f+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Bu.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Bu.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,h=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Ss()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*h,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+h}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Bu.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const h=this.lods[s],y=h.resolution*t;i.push(new z7({level:h.level,scale:h.scale,resolution:y}))}return new Bu({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};g([x({type:Number,json:{write:!0}})],gr.prototype,"compressionQuality",void 0),g([x({type:Number,json:{write:!0}})],gr.prototype,"dpi",void 0),g([x({type:String,json:{read:XI.read,write:XI.write,origins:{"web-scene":{read:!1,write:!1}}}})],gr.prototype,"format",void 0),g([x({readOnly:!0})],gr.prototype,"isWrappable",null),g([x({type:et,json:{write:!0}})],gr.prototype,"origin",void 0),g([je("origin")],gr.prototype,"readOrigin",null),g([x({type:[z7],value:null,json:{write:!0}})],gr.prototype,"lods",null),g([x({readOnly:!0})],gr.prototype,"minScale",void 0),g([x({readOnly:!0})],gr.prototype,"maxScale",void 0),g([x({readOnly:!0})],gr.prototype,"scales",void 0),g([x({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],gr.prototype,"size",void 0),g([je("size",["rows","cols"])],gr.prototype,"readSize",null),g([De("size",{cols:{type:li},rows:{type:li}})],gr.prototype,"writeSize",null),g([x({type:ot,json:{write:!0}})],gr.prototype,"spatialReference",void 0),gr=Bu=g([K("esri.layers.support.TileInfo")],gr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(gr||(gr={}));const Ly=gr,Tb={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Y_={xsmall:544,small:768,medium:992,large:1200};function sue(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Z_(e,t){return t?Tb[e].valueToClassName[t].split(" "):[]}const oue=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new er,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Y_}initialize(){this._breakpointsHandles.add($e(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Wt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Pr(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=sue(i);if(!r){const s=JSON.stringify(Y_,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:Y_,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=gn.acquire(),r=gn.acquire();let s,h=!1;for(s in Tb){const y=this[s],f=Tb[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==f&&(h=!0,this[s]=f,Z_(s,y).forEach(w=>r.push(w)),Z_(s,f).forEach(w=>i.push(w)))}h&&(this._applyClassNameChanges(i,r),gn.release(i),gn.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(h=>s.classList.remove(h)),i.forEach(h=>s.classList.add(h)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Tb)Z_(r,this[r]).forEach(s=>i.classList.remove(s))}};return g([x()],t.prototype,"breakpoints",null),g([x()],t.prototype,"orientation",void 0),g([x()],t.prototype,"widthBreakpoint",void 0),g([x()],t.prototype,"heightBreakpoint",void 0),t=g([K("esri.views.BreakpointsOwner")],t),t};function V7(e){return typeof e=="string"?document.getElementById(e):e}function hj(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function QI(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function eA(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var aue="[object Object]";function lue(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function uue(e,t){return function(i){return e(t(i))}}var hue=Function.prototype,cj=Object.prototype,pj=hue.toString,cue=cj.hasOwnProperty,pue=pj.call(Object),due=cj.toString,fue=uue(Object.getPrototypeOf,Object);function yue(e){return!!e&&typeof e=="object"}function mue(e){if(!yue(e)||due.call(e)!=aue||lue(e))return!1;var t=fue(e);if(t===null)return!0;var i=cue.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&pj.call(i)==pue}var gue=mue,Hc={exports:{}},Di={},dm={exports:{}},Vp={};function dj(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function vue(e,t,i){}function bue(e,t,i){}var wue=/javascript\s*\:/img;function _ue(e,t){return wue.test(t)?"":t}Vp.whiteList=dj();Vp.getDefaultWhiteList=dj;Vp.onAttr=vue;Vp.onIgnoreAttr=bue;Vp.safeAttrValue=_ue;var xue={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},i1=xue;function Sue(e,t){e=i1.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,h=0,y="";function f(){if(!r){var E=i1.trim(e.slice(s,h)),A=E.indexOf(":");if(A!==-1){var P=i1.trim(E.slice(0,A)),N=i1.trim(E.slice(A+1));if(P){var F=t(s,y.length,P,N,E);F&&(y+=F+"; ")}}}s=h+1}for(;h<i;h++){var w=e[h];if(w==="/"&&e[h+1]==="*"){var S=e.indexOf("*/",h+2);if(S===-1)break;h=S+1,s=h+1,r=!1}else w==="("?r=!0:w===")"?r=!1:w===";"?r||f():w===`
`&&f()}return i1.trim(y)}var Mue=Sue,Wg=Vp,Eue=Mue;function tA(e){return e==null}function Tue(e){var t={};for(var i in e)t[i]=e[i];return t}function fj(e){e=Tue(e||{}),e.whiteList=e.whiteList||Wg.whiteList,e.onAttr=e.onAttr||Wg.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Wg.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Wg.safeAttrValue,this.options=e}fj.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,h=i.onIgnoreAttr,y=i.safeAttrValue,f=Eue(e,function(w,S,E,A,P){var N=r[E],F=!1;if(N===!0?F=N:typeof N=="function"?F=N(A):N instanceof RegExp&&(F=N.test(A)),F!==!0&&(F=!1),A=y(E,A),!!A){var V={position:S,sourcePosition:w,source:P,isWhite:F};if(F){var U=s(E,A,V);return tA(U)?E+":"+A:U}else{var U=h(E,A,V);if(!tA(U))return U}}});return f};var $ue=fj;(function(e,t){var i=Vp,r=$ue;function s(y,f){var w=new r(f);return w.process(y)}t=e.exports=s,t.FilterCSS=r;for(var h in i)t[h]=i[h]})(dm,dm.exports);var G7={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},Iue=dm.exports.FilterCSS,Aue=dm.exports.getDefaultWhiteList,Dw=G7;function yj(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var mj=new Iue;function kue(e,t,i){}function Cue(e,t,i){}function Oue(e,t,i){}function Pue(e,t,i){}function gj(e){return e.replace(Rue,"&lt;").replace(Lue,"&gt;")}function Nue(e,t,i,r){if(i=Sj(i),t==="href"||t==="src"){if(i=Dw.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(Jg.lastIndex=0,Jg.test(i))return""}else if(t==="style"){if(iA.lastIndex=0,iA.test(i)||(rA.lastIndex=0,rA.test(i)&&(Jg.lastIndex=0,Jg.test(i))))return"";r!==!1&&(r=r||mj,i=r.process(i))}return i=Mj(i),i}var Rue=/</g,Lue=/>/g,Fue=/"/g,jue=/&quot;/g,Due=/&#([a-zA-Z0-9]*);?/gim,zue=/&colon;?/gim,Vue=/&newline;?/gim,Jg=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,iA=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,rA=/u\s*r\s*l\s*\(.*/gi;function vj(e){return e.replace(Fue,"&quot;")}function bj(e){return e.replace(jue,'"')}function wj(e){return e.replace(Due,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function _j(e){return e.replace(zue,":").replace(Vue," ")}function xj(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Dw.trim(t)}function Sj(e){return e=bj(e),e=wj(e),e=_j(e),e=xj(e),e}function Mj(e){return e=vj(e),e=gj(e),e}function Gue(){return""}function Uue(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(y){return i?!0:Dw.indexOf(e,y)!==-1}var s=[],h=!1;return{onIgnoreTag:function(y,f,w){if(r(y))if(w.isClosing){var S="[/removed]",E=w.position+S.length;return s.push([h!==!1?h:w.position,E]),h=!1,S}else return h||(h=w.position),"[removed]";else return t(y,f,w)},remove:function(y){var f="",w=0;return Dw.forEach(s,function(S){f+=y.slice(w,S[0]),w=S[1]}),f+=y.slice(w),f}}}function que(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function Bue(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Di.whiteList=yj();Di.getDefaultWhiteList=yj;Di.onTag=kue;Di.onIgnoreTag=Cue;Di.onTagAttr=Oue;Di.onIgnoreTagAttr=Pue;Di.safeAttrValue=Nue;Di.escapeHtml=gj;Di.escapeQuote=vj;Di.unescapeQuote=bj;Di.escapeHtmlEntities=wj;Di.escapeDangerHtml5Entities=_j;Di.clearNonPrintableCharacter=xj;Di.friendlyAttrValue=Sj;Di.escapeAttrValue=Mj;Di.onIgnoreTagStripAll=Gue;Di.StripTagBody=Uue;Di.stripCommentTag=que;Di.stripBlankChar=Bue;Di.cssFilter=mj;Di.getDefaultCSSWhiteList=Aue;var l3={},lh=G7;function Hue(e){var t=lh.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=lh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Wue(e){return e.slice(0,2)==="</"}function Jue(e,t,i){var r="",s=0,h=!1,y=!1,f=0,w=e.length,S="",E="";e:for(f=0;f<w;f++){var A=e.charAt(f);if(h===!1){if(A==="<"){h=f;continue}}else if(y===!1){if(A==="<"){r+=i(e.slice(s,f)),h=f,s=f;continue}if(A===">"){r+=i(e.slice(s,h)),E=e.slice(h,f+1),S=Hue(E),r+=t(h,r.length,S,E,Wue(E)),s=f+1,h=!1;continue}if(A==='"'||A==="'")for(var P=1,N=e.charAt(f-P);N.trim()===""||N==="=";){if(N==="="){y=A;continue e}N=e.charAt(f-++P)}}else if(A===y){y=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var Kue=/[^a-zA-Z0-9_:\.\-]/gim;function Yue(e,t){var i=0,r=[],s=!1,h=e.length;function y(A,P){if(A=lh.trim(A),A=A.replace(Kue,"").toLowerCase(),!(A.length<1)){var N=t(A,P||"");N&&r.push(N)}}for(var f=0;f<h;f++){var w=e.charAt(f),S,E;if(s===!1&&w==="="){s=e.slice(i,f),i=f+1;continue}if(s!==!1&&f===i&&(w==='"'||w==="'")&&e.charAt(f-1)==="="){if(E=e.indexOf(w,f+1),E===-1)break;S=lh.trim(e.slice(i+1,E)),y(s,S),s=!1,f=E,i=f+1;continue}if(/\s|\n|\t/.test(w))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(E=Zue(e,f),E===-1){S=lh.trim(e.slice(i,f)),y(S),s=!1,i=f+1;continue}else{f=E-1;continue}else if(E=Xue(e,f-1),E===-1){S=lh.trim(e.slice(i,f)),S=nA(S),y(s,S),s=!1,i=f+1;continue}else continue}return i<e.length&&(s===!1?y(e.slice(i)):y(s,nA(lh.trim(e.slice(i))))),lh.trim(r.join(" "))}function Zue(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Xue(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Que(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function nA(e){return Que(e)?e.substr(1,e.length-2):e}l3.parseTag=Jue;l3.parseAttr=Yue;var ehe=dm.exports.FilterCSS,Ro=Di,Ej=l3,the=Ej.parseTag,ihe=Ej.parseAttr,$b=G7;function Kg(e){return e==null}function rhe(e){var t=$b.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=$b.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=$b.trim(e.slice(0,-1))),{html:e,closing:i}}function nhe(e){var t={};for(var i in e)t[i]=e[i];return t}function Tj(e){e=nhe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ro.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||Ro.whiteList,e.onTag=e.onTag||Ro.onTag,e.onTagAttr=e.onTagAttr||Ro.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ro.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ro.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ro.safeAttrValue,e.escapeHtml=e.escapeHtml||Ro.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new ehe(e.css))}Tj.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,h=i.onIgnoreTag,y=i.onTagAttr,f=i.onIgnoreTagAttr,w=i.safeAttrValue,S=i.escapeHtml,E=t.cssFilter;i.stripBlankChar&&(e=Ro.stripBlankChar(e)),i.allowCommentTag||(e=Ro.stripCommentTag(e));var A=!1;if(i.stripIgnoreTagBody){var A=Ro.StripTagBody(i.stripIgnoreTagBody,h);h=A.onIgnoreTag}var P=the(e,function(N,F,V,U,X){var re={sourcePosition:N,position:F,isClosing:X,isWhite:r.hasOwnProperty(V)},he=s(V,U,re);if(!Kg(he))return he;if(re.isWhite){if(re.isClosing)return"</"+V+">";var pe=rhe(U),ae=r[V],le=ihe(pe.html,function(Ee,Oe){var Ae=$b.indexOf(ae,Ee)!==-1,Fe=y(V,Ee,Oe,Ae);if(!Kg(Fe))return Fe;if(Ae)return Oe=w(V,Ee,Oe,E),Oe?Ee+'="'+Oe+'"':Ee;var Fe=f(V,Ee,Oe,Ae);return Kg(Fe)?void 0:Fe}),U="<"+V;return le&&(U+=" "+le),pe.closing&&(U+=" /"),U+=">",U}else{var he=h(V,U,re);return Kg(he)?S(U):he}},S);return A&&(P=A.remove(P)),P};var she=Tj;(function(e,t){var i=Di,r=l3,s=she;function h(w,S){var E=new s(S);return E.process(w)}t=e.exports=h,t.filterXSS=h,t.FilterXSS=s;for(var y in i)t[y]=i[y];for(var y in r)t[y]=r[y];function f(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}f()&&(self.filterXSS=e.exports)})(Hc,Hc.exports);var ohe=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(h,y,f,w){return h==="a"&&y==="href"||(h==="img"||h==="source")&&y==="src"?r.sanitizeUrl(f):Hc.exports.safeAttrValue(h,y,f,w)}};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(h){h==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[h]=t[h]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new Hc.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,s=r===void 0?!0:r,h=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",f=/^#/.test(t),w=h&&this.allowedProtocols.indexOf(h.toLowerCase())>-1;return y||f||w?Hc.exports.escapeAttrValue(t):!h&&!s?Hc.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):Hc.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,h=void 0;if(Array.isArray(t))h=t.reduce(function(f,w){var S=r.validate(w,i);return S.isValid?f.concat([w]):(s=!0,f.concat([S.sanitized]))},[]);else if(gue(t)){var y=Object.keys(t);h=y.reduce(function(f,w){var S=t[w],E=r.validate(S,i);return E.isValid?f[w]=S:(s=!0,f[w]=E.sanitized),f},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return s?h:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const u3=new Map;function $j(){u3.clear()}function ahe(e){return u3.get(e)}function lhe(e,t){u3.set(e,t)}function X_(e){u3.delete(e)}var Cp,G0,uhe=function(e){if("WebkitTransition"in e.style)Cp="webkitTransitionEnd",G0="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Cp="transitionend",G0="animationend"}},Ij=function(e){Cp||uhe(e)},hhe=function(e,t){return t===void 0&&(t=e+"-active"),function(i){Ij(i);var r=!1,s=function(h){r||(r=!0,i.removeEventListener(Cp,s),i.removeEventListener(G0,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Cp,s),i.addEventListener(G0,s),requestAnimationFrame(function(){i.classList.add(t)})}},che=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){Ij(i);var s=!1,h=function(y){s||(s=!0,i.removeEventListener(Cp,h),i.removeEventListener(G0,h),r())};i.classList.add(e),i.addEventListener(Cp,h),i.addEventListener(G0,h),requestAnimationFrame(function(){i.classList.add(t)})}};const phe=Le.getLogger("esri.widgets.support.widgetUtils");function Aj(e){const t=gn.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],h=typeof s;if(h==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(h==="object")for(const y in s)s[y]&&t.push(y)}const i=t.join(" ");return gn.release(t),i}const dhe=(()=>{const e=new Map,t=new ResizeObserver(i=>{$j();for(const r of i)e.get(r.target)(r)});return(i,r,s)=>(e.has(i)&&phe.error("Already observing element",i),e.set(i,r),t.observe(i,s),Nh(()=>{t.unobserve(i),e.delete(i)}))})();function wh(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function sA(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function KS(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function fhe(e,t){return(e==="enter"?hhe:che)(t)}const yhe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],mhe=yhe.reduce((e,t)=>(e[t]=[],e),{}),ghe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],kj=new ohe({whiteList:mhe,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(ghe.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function vhe(e){return e==="Enter"||e===" "}const Cj="http://www.w3.org/",h3=`${Cj}2000/svg`,Oj=`${Cj}1999/xlink`;let zw,oA=[],U7=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},q7=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Pj=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},bhe=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(q7(e[r],t))return r}return-1},Q_=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let h=s.properties;if(!(h&&(h.key===void 0?h.bind:h.key))){for(let y=0;y<e.length;y++)if(y!==t){let f=e[y];if(q7(f,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},whe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},YS=[],ZS=!1,Nj=e=>{(e.children||[]).forEach(Nj),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},aA=()=>{ZS=!1,YS.forEach(Nj),YS.length=0},lA=e=>{YS.push(e),ZS||(ZS=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(aA,{timeout:16}):setTimeout(aA,16))},uA=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),lA(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),lA(e))},_he=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),h=s.length;for(let y=0;y<h;y++){let f=s[y],w=t[f];if(f==="className")throw new Error('Property "className" is not supported, use "class".');if(f==="class")XS(e,w,!0);else if(f==="classes"){let S=Object.keys(w),E=S.length;for(let A=0;A<E;A++){let P=S[A];w[P]&&e.classList.add(P)}}else if(f==="styles"){let S=Object.keys(w),E=S.length;for(let A=0;A<E;A++){let P=S[A],N=w[P];N&&(Pj(N),i.styleApplyer(e,P,N))}}else if(f!=="key"&&w!=null){let S=typeof w;S==="function"?(f.lastIndexOf("on",0)===0&&(r&&(w=r(f,w,e,t)),f==="oninput"&&function(){let E=w;w=function(A){E.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),e[f]=w):i.namespace===h3?f==="href"?e.setAttributeNS(Oj,f,w):e.setAttribute(f,w):S==="string"&&f!=="value"?f==="innerHTML"?e[f]=kj.sanitize(w):e.setAttribute(f,w):e[f]=w}}},xhe=(e,t,i)=>{if(t)for(let r of t)l0(r,e,void 0,i)},Rj=(e,t,i)=>{xhe(e,t.children,i),t.text&&(e.textContent=t.text),_he(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},l0=(e,t,i,r)=>{let s,h=0,y=e.vnodeSelector,f=t.ownerDocument;if(y==="")s=e.domNode=f.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let w=0;w<=y.length;++w){let S=y.charAt(w);if(w===y.length||S==="."||S==="#"){let E=y.charAt(h-1),A=y.slice(h,w);E==="."?s.classList.add(A):E==="#"?s.id=A:(A==="svg"&&(r=U7(r,{namespace:h3})),r.namespace!==void 0?s=e.domNode=f.createElementNS(r.namespace,A):(s=e.domNode=e.domNode||f.createElement(A),A==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),h=w+1}}Rj(s,e,r)}},XS=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},She=(e,t,i,r)=>{if(!i)return;let s=!1,h=Object.keys(i),y=h.length;for(let f=0;f<y;f++){let w=h[f],S=i[w],E=t[w];if(w==="class")E!==S&&(XS(e,E,!1),XS(e,S,!0));else if(w==="classes"){let A=e.classList,P=Object.keys(S),N=P.length;for(let F=0;F<N;F++){let V=P[F],U=!!S[V];U!==!!E[V]&&(s=!0,U?A.add(V):A.remove(V))}}else if(w==="styles"){let A=Object.keys(S),P=A.length;for(let N=0;N<P;N++){let F=A[N],V=S[F];V!==E[F]&&(s=!0,V?(Pj(V),r.styleApplyer(e,F,V)):r.styleApplyer(e,F,""))}}else if(S||typeof E!="string"||(S=""),w==="value"){let A=e[w];A!==S&&(e["oninput-value"]?A===e["oninput-value"]:S!==E)&&(e[w]=S,e["oninput-value"]=void 0),S!==E&&(s=!0)}else if(S!==E){let A=typeof S;A==="function"&&r.eventHandlerInterceptor||(r.namespace===h3?w==="href"?e.setAttributeNS(Oj,w,S):e.setAttribute(w,S):A==="string"?w==="innerHTML"?e[w]=kj.sanitize(S):w==="role"&&S===""?e.removeAttribute(w):e.setAttribute(w,S):e[w]!==S&&(e[w]=S),s=!0)}}return s},Mhe=(e,t,i,r,s)=>{if(i===r)return!1;r=r||oA;let h,y=(i=i||oA).length,f=r.length,w=0,S=0,E=!1;for(;S<f;){let A=w<y?i[w]:void 0,P=r[S];if(A!==void 0&&q7(A,P))E=zw(A,P,s)||E,w++;else{let N=bhe(i,P,w+1);if(N>=0){for(h=w;h<N;h++)uA(i[h]),Q_(i,h,e,"removed");E=zw(i[N],P,s)||E,w=N+1}else l0(P,t,w<y?i[w].domNode:void 0,s),whe(P),Q_(r,S,e,"added")}S++}if(y>w)for(h=w;h<y;h++)uA(i[h]),Q_(i,h,e,"removed");return E};zw=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let h=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(y,r),t.domNode=y,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=U7(i,{namespace:h3})),e.text!==t.text&&(h=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,h=Mhe(t,r,e.children,t.children,i)||h,h=She(r,e.properties,t.properties,i)||h,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return h&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let r1=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,zw(r,i,t)},domNode:e.domNode});const Ehe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let Gd=e=>U7(Ehe,e),_h={create:(e,t)=>(t=Gd(t),l0(e,document.createElement("div"),void 0,t),r1(e,t)),append:(e,t,i)=>(i=Gd(i),l0(t,e,void 0,i),r1(t,i)),insertBefore:(e,t,i)=>(i=Gd(i),l0(t,e.parentNode,e,i),r1(t,i)),merge:(e,t,i)=>(i=Gd(i),t.domNode=e,Rj(e,t,i),r1(t,i)),replace:(e,t,i)=>(i=Gd(i),l0(t,e.parentNode,e,i),e.parentNode.removeChild(e),r1(t,i))},Lj,The=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};Lj=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let $he=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?Lj(i.children,s=>s.domNode===r):void 0}),i},Ihe=(e,t,i)=>{let r=function(s){i("domEvent",s);let h=t(),y=The(s.currentTarget,h.domNode);y.reverse();let f,w=$he(h.getLastRender(),y);return e.scheduleRender(),w&&(f=w.properties[`on${s.type}`].apply(w.properties.bind||this,arguments)),i("domEventProcessed",s),f};return(s,h,y,f)=>r},QS=e=>{let t,i,r=Gd(e),s=r.performanceLogger,h=!0,y=!1,f=[],w=[],S=(A,P,N)=>{let F,V=()=>F;r.eventHandlerInterceptor=Ihe(t,V,s),F=A(P,N(),r),f.push(F),w.push(N)},E=()=>{if(i=void 0,h){h=!1,s("renderStart",void 0);for(let A=0;A<f.length;A++){let P=w[A]();s("rendered",void 0),f[A].update(P),s("patched",void 0)}s("renderDone",void 0),h=!0}};return t={renderNow:E,scheduleRender:()=>{i||y||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,h=!0,t.scheduleRender()},append:(A,P)=>{S(_h.append,A,P)},insertBefore:(A,P)=>{S(_h.insertBefore,A,P)},merge:(A,P)=>{S(_h.merge,A,P)},replace:(A,P)=>{S(_h.replace,A,P)},detach:A=>{for(let P=0;P<w.length;P++)if(w[P]===A)return w.splice(P,1),f.splice(P,1)[0];throw new Error("renderFunction was not found")}},t},Hu=class extends qe{constructor(){super(...arguments),this.items=new Je,this._watchUpdatingTracking=new b0,this._callbacks=new Map,this._projector=QS(),this._hiddenProjector=QS()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r=null;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const h={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const y=r.domNode.getBoundingClientRect();h.left=y.left,h.top=y.top,h.right=y.right,h.bottom=y.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return h}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};g([x({readOnly:!0})],Hu.prototype,"surface",void 0),g([x({readOnly:!0})],Hu.prototype,"items",void 0),g([x({readOnly:!0})],Hu.prototype,"needsRender",null),g([x({readOnly:!0})],Hu.prototype,"_watchUpdatingTracking",void 0),g([x({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Hu.prototype,"updating",void 0),Hu=g([K("esri.views.overlay.ViewOverlay")],Hu);const hA=Hu;function B7(e,t,i,r){let s=null,h=1e3;typeof t=="number"?(h=t,r=i):(s=t!=null?t:null,h=i);let y,f=0;const w=()=>{f=0,e.apply(r,y)},S=(...E)=>{s&&s.apply(r,E),y=E,h?f||(f=setTimeout(w,h)):w()};return S.remove=()=>{f&&(clearTimeout(f),f=0)},S.forceUpdate=()=>{f&&(clearTimeout(f),w())},S.hasPendingUpdates=()=>!!f,S}const Ahe="randomUUID"in crypto;function khe(){if(Ahe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const Che={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},Ohe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},Phe=e=>({...Ohe,...e}),Nhe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Rhe=(e,t)=>e.find(t),cA=(e,t,i=!1)=>{let r=e;return t.forEach((s,h)=>{const y=r!=null&&r.children?Rhe(r.children,f=>f.domNode===s):void 0;i&&!y&&h!==t.length-1||(r=y)}),r},Lhe=e=>{let t;const i={...Che,...e},r=Phe(i),s=r.performanceLogger;let h,y=!0,f=!1;const w=[],S=[],E=(P,N,F)=>{var X;let V;r.eventHandlerInterceptor=(re,he,pe,ae)=>function(le){let Te;s("domEvent",le);const Ee=Nhe(le.currentTarget,V.domNode),Oe=Ee.some(Fe=>{var ze;return customElements.get((ze=Fe==null?void 0:Fe.tagName)==null?void 0:ze.toLowerCase())});if(le.eventPhase===Event.CAPTURING_PHASE||!Oe)Ee.reverse(),Te=cA(V.getLastRender(),Ee);else{const Fe=le.composedPath(),ze=Fe.slice(Fe.indexOf(le.currentTarget),Fe.indexOf(V.domNode)).filter(Ge=>Ge.getRootNode()===Ge.ownerDocument).reverse();Te=cA(V.getLastRender(),ze,!0)}let Ae;return Te&&(Ae=i.handleInterceptedEvent(t,Te,this,le)),s("domEventProcessed",le),Ae},(X=i.postProcessProjectionOptions)==null||X.call(i,r);const U=F();V=P(N,U,r),w.push(V),S.push(F),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(V,U)};let A=()=>{if(h=void 0,y){y=!1,s("renderStart",void 0);for(let P=0;P<w.length;P++){const N=S[P]();s("rendered",void 0),w[P].update(N),s("patched",void 0)}s("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,w,S)),t={renderNow:A,scheduleRender:()=>{h||f||(h=requestAnimationFrame(A))},stop:()=>{h&&(cancelAnimationFrame(h),h=void 0),f=!0},resume:()=>{f=!1,y=!0,t.scheduleRender()},append:(P,N)=>{E(_h.append,P,N)},insertBefore:(P,N)=>{E(_h.insertBefore,P,N)},merge:(P,N)=>{E(_h.merge,P,N)},replace:(P,N)=>{E(_h.replace,P,N)},detach:P=>{for(let N=0;N<S.length;N++)if(S[N]===P)return S.splice(N,1),w.splice(N,1)[0];throw new Error("renderFunction was not found")}},t},$t={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Ud,Fj,c3,jj=!1,Vw=!1,H7=!1,ds=!1,pA=null,e6=!1;const _f=typeof window<"u"?window:{};$t.cssVarShim&&_f.CSS;const Ko=_f.document||{head:{}},Ixe=_f.HTMLElement||class{},Hr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},Gw=$t.shadowDomShim&&$t.shadowDom?(()=>(Ko.head.attachShadow+"").indexOf("[native")>-1)():!0,Fhe=(()=>{let e=!1;try{Ko.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),jhe=e=>Promise.resolve(e),Dhe=$t.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,Dj=(e,t,i,r)=>{i&&i.map(([s,h,y])=>{const f=Vhe(e,s),w=zhe(t,y),S=Ghe(s);Hr.ael(f,h,w,S),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Hr.rel(f,h,w,S))})},zhe=(e,t)=>i=>{try{$t.lazyLoad||e.$hostElement$[t](i)}catch(r){qm(r)}},Vhe=(e,t)=>t&4?Ko:t&8?_f:t&16?Ko.body:e,Ghe=e=>Fhe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,dA="http://www.w3.org/1999/xlink",Op=(e,t="")=>()=>{},fA=new WeakMap,Uhe=(e,t,i)=>{let r=Bw.get(e);Dhe&&i?(r=r||new CSSStyleSheet,r.replace(t)):r=t,Bw.set(e,r)},qhe=(e,t,i,r)=>{let s=zj(t,i),h=Bw.get(s);if(e=e.nodeType===11?e:Ko,h)if(typeof h=="string"){e=e.head||e;let y=fA.get(e),f;y||fA.set(e,y=new Set),y.has(s)||(f=Ko.createElement("style"),f.innerHTML=h,e.insertBefore(f,e.querySelector("link")),y&&y.add(s))}else e.adoptedStyleSheets.includes(h)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,h]);return s},Bhe=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=Op("attachStyles",t.$tagName$),h=qhe(Gw&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=h,i.classList.add(h+"-h"),r&2&&i.classList.add(h+"-s")),s()},zj=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Hhe=e=>xce.map(t=>t(e)).find(t=>!!t),yA={},Whe="http://www.w3.org/2000/svg",Jhe="http://www.w3.org/1999/xhtml",Khe=e=>e!=null,W7=e=>(e=typeof e,e==="object"||e==="function"),Vj=(e,t,...i)=>{let r=null,s=null,h=null,y=!1,f=!1,w=[];const S=A=>{for(let P=0;P<A.length;P++)r=A[P],Array.isArray(r)?S(r):r!=null&&typeof r!="boolean"&&((y=typeof e!="function"&&!W7(r))&&(r=String(r)),y&&f?w[w.length-1].$text$+=r:w.push(y?Uw(null,r):r),f=y)};if(S(i),t&&($t.isDev&&e==="input"&&Qhe(t),$t.vdomKey&&t.key&&(s=t.key),$t.slotRelocation&&t.name&&(h=t.name),$t.vdomClass)){const A=t.className||t.class;A&&(t.class=typeof A!="object"?A:Object.keys(A).filter(P=>A[P]).join(" "))}if($t.isDev&&w.some(Gj)&&_ce(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),$t.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,w,Zhe);const E=Uw(e,null);return E.$attrs$=t,w.length>0&&(E.$children$=w),$t.vdomKey&&(E.$key$=s),$t.slotRelocation&&(E.$name$=h),E},Uw=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return $t.vdomAttribute&&(i.$attrs$=null),$t.vdomKey&&(i.$key$=null),$t.slotRelocation&&(i.$name$=null),i},Yhe={},Gj=e=>e&&e.$tag$===Yhe,Zhe={forEach:(e,t)=>e.map(mA).forEach(t),map:(e,t)=>e.map(mA).map(t).map(Xhe)},mA=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Xhe=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),Vj(e.vtag,i,...e.vchildren||[])}const t=Uw(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Qhe=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),h=t.indexOf("max"),y=t.indexOf("step");(i<r||i<s||i<h||i<y)&&Xj('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},gA=(e,t,i,r,s,h)=>{if(i!==r){let y=_A(e,t),f=t.toLowerCase();if(t==="class"){const w=e.classList,S=vA(i),E=vA(r);w.remove(...S.filter(A=>A&&!E.includes(A))),w.add(...E.filter(A=>A&&!S.includes(A)))}else if(t==="style"){for(const w in i)(!r||r[w]==null)&&(w.includes("-")?e.style.removeProperty(w):e.style[w]="");for(const w in r)(!i||r[w]!==i[w])&&(w.includes("-")?e.style.setProperty(w,r[w]):e.style[w]=r[w])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):_A(_f,f)?t=f.slice(2):t=f[2]+t.slice(3),i&&Hr.rel(e,t,i,!1),r&&Hr.ael(e,t,r,!1);else{const w=W7(r);if((y||w&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{let E=r==null?"":r;t==="list"?y=!1:(i==null||e[t]!=E)&&(e[t]=E)}}catch{}let S=!1;f!==(f=f.replace(/^xlink\:?/,""))&&(t=f,S=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(S?e.removeAttributeNS(dA,t):e.removeAttribute(t)):(!y||h&4||s)&&!w&&(r=r===!0?"":r,S?e.setAttributeNS(dA,t,r):e.setAttribute(t,r))}}},ece=/\s/,vA=e=>e?e.split(ece):[],Uj=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,h=e&&e.$attrs$||yA,y=t.$attrs$||yA;for(r in h)r in y||gA(s,r,h[r],void 0,i,t.$flags$);for(r in y)gA(s,r,h[r],y[r],i,t.$flags$)},qw=(e,t,i,r)=>{let s=t.$children$[i],h=0,y,f,w;if(jj||(H7=!0,s.$tag$==="slot"&&(Ud&&r.classList.add(Ud+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)y=s.$elm$=Ko.createTextNode(s.$text$);else if(s.$flags$&1)y=s.$elm$=Ko.createTextNode("");else{if(ds||(ds=s.$tag$==="svg"),y=s.$elm$=Ko.createElementNS(ds?Whe:Jhe,s.$flags$&2?"slot-fb":s.$tag$),ds&&s.$tag$==="foreignObject"&&(ds=!1),Uj(null,s,ds),Khe(Ud)&&y["s-si"]!==Ud&&y.classList.add(y["s-si"]=Ud),s.$children$)for(h=0;h<s.$children$.length;++h)f=qw(e,s,h,y),f&&y.appendChild(f);s.$tag$==="svg"?ds=!1:y.tagName==="foreignObject"&&(ds=!0)}return y["s-hn"]=c3,s.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=Fj,y["s-sn"]=s.$name$||"",w=e&&e.$children$&&e.$children$[i],w&&w.$tag$===s.$tag$&&e.$elm$&&fm(e.$elm$,!1)),y},fm=(e,t)=>{Hr.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==c3&&s["s-ol"]&&(Hj(s).insertBefore(s,J7(s)),s["s-ol"].remove(),s["s-ol"]=void 0,H7=!0),t&&fm(s,t)}Hr.$flags$&=-2},qj=(e,t,i,r,s,h)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,f;for(y.shadowRoot&&y.tagName===c3&&(y=y.shadowRoot);s<=h;++s)r[s]&&(f=qw(null,i,s,e),f&&(r[s].$elm$=f,y.insertBefore(f,J7(t))))},Bj=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,Kj(r),Vw=!0,s["s-ol"]?s["s-ol"].remove():fm(s,!0),s.remove())},tce=(e,t,i,r)=>{let s=0,h=0,y=0,f=0,w=t.length-1,S=t[0],E=t[w],A=r.length-1,P=r[0],N=r[A],F,V;for(;s<=w&&h<=A;)if(S==null)S=t[++s];else if(E==null)E=t[--w];else if(P==null)P=r[++h];else if(N==null)N=r[--A];else if(Yg(S,P))qd(S,P),S=t[++s],P=r[++h];else if(Yg(E,N))qd(E,N),E=t[--w],N=r[--A];else if(Yg(S,N))(S.$tag$==="slot"||N.$tag$==="slot")&&fm(S.$elm$.parentNode,!1),qd(S,N),e.insertBefore(S.$elm$,E.$elm$.nextSibling),S=t[++s],N=r[--A];else if(Yg(E,P))(S.$tag$==="slot"||N.$tag$==="slot")&&fm(E.$elm$.parentNode,!1),qd(E,P),e.insertBefore(E.$elm$,S.$elm$),E=t[--w],P=r[++h];else{for(y=-1,f=s;f<=w;++f)if(t[f]&&t[f].$key$!==null&&t[f].$key$===P.$key$){y=f;break}y>=0?(V=t[y],V.$tag$!==P.$tag$?F=qw(t&&t[h],i,y,e):(qd(V,P),t[y]=void 0,F=V.$elm$),P=r[++h]):(F=qw(t&&t[h],i,h,e),P=r[++h]),F&&Hj(S.$elm$).insertBefore(F,J7(S.$elm$))}s>w?qj(e,r[A+1]==null?null:r[A+1].$elm$,i,r,h,A):h>A&&Bj(t,s,w)},Yg=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,J7=e=>e&&e["s-ol"]||e,Hj=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,qd=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,h=t.$tag$,y=t.$text$;let f;y===null?(ds=h==="svg"?!0:h==="foreignObject"?!1:ds,h==="slot"||Uj(e,t,ds),r!==null&&s!==null?tce(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),qj(i,null,t,s,0,s.length-1)):r!==null&&Bj(r,0,r.length-1),ds&&h==="svg"&&(ds=!1)):(f=i["s-cr"])?f.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},Wj=e=>{let t=e.childNodes,i,r,s,h,y,f;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,h=0;h<s;h++)if(f=t[h].nodeType,t[h]["s-hn"]!==i["s-hn"]||y!==""){if(f===1&&y===t[h].getAttribute("slot")){i.hidden=!0;break}}else if(f===1||f===3&&t[h].textContent.trim()!==""){i.hidden=!0;break}}Wj(i)}},zo=[],Jj=e=>{let t,i,r,s,h,y,f=0,w=e.childNodes,S=w.length;for(;f<S;f++){if(t=w[f],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],y=r.length-1;y>=0;y--)i=r[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(bA(i,s)?(h=zo.find(E=>E.$nodeToRelocate$===i),Vw=!0,i["s-sn"]=i["s-sn"]||s,h?h.$slotRefNode$=t:zo.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&zo.map(E=>{bA(E.$nodeToRelocate$,i["s-sn"])&&(h=zo.find(A=>A.$nodeToRelocate$===i),h&&!E.$slotRefNode$&&(E.$slotRefNode$=h.$slotRefNode$))})):zo.some(E=>E.$nodeToRelocate$===i)||zo.push({$nodeToRelocate$:i}));t.nodeType===1&&Jj(t)}},bA=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Kj=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Kj)},ice=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||Uw(null,null),h=Gj(t)?t:Vj(null,null,t);c3=i.tagName,r.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},r.$attrsToReflect$.map(([y,f])=>h.$attrs$[f]=i[y])),h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=s.$elm$=i.shadowRoot||i,Ud=i["s-sc"],Fj=i["s-cr"],jj=Gw&&(r.$flags$&1)!==0,Vw=!1,qd(s,h);{if(Hr.$flags$|=1,H7){Jj(h.$elm$);let y,f,w,S,E,A,P=0;for(;P<zo.length;P++)y=zo[P],f=y.$nodeToRelocate$,f["s-ol"]||(w=Ko.createTextNode(""),w["s-nr"]=f,f.parentNode.insertBefore(f["s-ol"]=w,f));for(P=0;P<zo.length;P++)if(y=zo[P],f=y.$nodeToRelocate$,y.$slotRefNode$){for(S=y.$slotRefNode$.parentNode,E=y.$slotRefNode$.nextSibling,w=f["s-ol"];w=w.previousSibling;)if(A=w["s-nr"],A&&A["s-sn"]===f["s-sn"]&&S===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){E=A;break}(!E&&S!==f.parentNode||f.nextSibling!==E)&&f!==E&&(!f["s-hn"]&&f["s-ol"]&&(f["s-hn"]=f["s-ol"].parentNode.nodeName),S.insertBefore(f,E))}else f.nodeType===1&&(f.hidden=!0)}Vw&&Wj(h.$elm$),Hr.$flags$&=-2,zo.length=0}},rce=e=>$t.lazyLoad?xf(e).$hostElement$:e,Axe=(e,t,i)=>{const r=rce(e);return{emit:s=>($t.isDev&&!r.isConnected&&Xj(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),nce(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},nce=(e,t,i)=>{const r=Hr.ce(t,i);return e.dispatchEvent(r),r},sce=(e,t)=>{},K7=(e,t)=>(e.$flags$|=16,sce(e,e.$ancestorComponent$),Ece(()=>oce(e,t))),oce=(e,t)=>{const i=e.$hostElement$,r=Op("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let h;return t?h=M0(s,"componentWillLoad"):h=M0(s,"componentWillUpdate"),h=wA(h,()=>M0(s,"componentWillRender")),r(),wA(h,()=>ace(e,s,t))},ace=async(e,t,i)=>{const r=e.$hostElement$,s=Op("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&Bhe(e);const h=Op("render",e.$cmpMeta$.$tagName$);lce(e,t,r),h(),s(),uce(e)},lce=(e,t,i)=>{try{pA=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,($t.hasRenderFn||$t.reflect)&&($t.vdomRender||$t.reflect)&&($t.hydrateServerSide||ice(e,t))}catch(f){qm(f,e.$hostElement$)}return pA=null,null},uce=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=Op("postUpdate",t),s=i;e.$ancestorComponent$,M0(s,"componentDidRender"),e.$flags$&64?(M0(s,"componentDidUpdate"),r()):(e.$flags$|=64,M0(s,"componentDidLoad"),r())},kxe=e=>{if($t.updatable){const t=xf(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&K7(t,!1),i}return!1},M0=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){qm(r)}},wA=(e,t)=>e&&e.then?e.then(t):t(),hce=(e,t)=>e!=null&&!W7(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,cce=(e,t)=>xf(e).$instanceValues$.get(t),pce=(e,t,i,r)=>{const s=xf(e),h=e,y=s.$instanceValues$.get(t),f=s.$flags$,w=h;i=hce(i,r.$members$[t][0]);const S=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!S){s.$instanceValues$.set(t,i);{if(r.$watchers$&&f&128){const A=r.$watchers$[t];A&&A.map(P=>{try{w[P](i,y,t)}catch(N){qm(N,h)}})}if((f&18)===2){if(w.componentShouldUpdate&&w.componentShouldUpdate(i,y,t)===!1)return;K7(s,!1)}}}},dce=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([h,[y]])=>{(y&31||y&32)&&Object.defineProperty(s,h,{get(){return cce(this,h)},set(f){pce(this,h,f,t)},configurable:!0,enumerable:!0})});{const h=new Map;s.attributeChangedCallback=function(y,f,w){Hr.jmp(()=>{const S=h.get(y);if(this.hasOwnProperty(S))w=this[S],delete this[S];else if(s.hasOwnProperty(S)&&typeof this[S]=="number"&&this[S]==w)return;this[S]=w===null&&typeof this[S]=="boolean"?!1:w})},e.observedAttributes=r.filter(([y,f])=>f[0]&15).map(([y,f])=>{const w=f[1]||y;return h.set(w,y),f[0]&512&&t.$attrsToReflect$.push([y,w]),w})}}return e},fce=async(e,t,i,r,s)=>{if((t.$flags$&32)===0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let y=s.style;typeof y!="string"&&(y=y[t.$modeName$=Hhe(e)]);const f=zj(i,t.$modeName$);if(!Bw.has(f)){const w=Op("registerStyles",i.$tagName$);Uhe(f,y,!!(i.$flags$&1)),w()}}t.$ancestorComponent$,(()=>K7(t,!0))()},yce=e=>{},mce=e=>{if((Hr.$flags$&1)===0){const t=xf(e),i=t.$cmpMeta$,r=Op("connectedCallback",i.$tagName$);t.$flags$&1?(Dj(e,t,i.$listeners$),yce(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&gce(e),i.$members$&&Object.entries(i.$members$).map(([s,[h]])=>{if(h&31&&e.hasOwnProperty(s)){const y=e[s];delete e[s],e[s]=y}}),fce(e,t,i)),r()}},gce=e=>{const t=e["s-cr"]=Ko.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},vce=e=>{if((Hr.$flags$&1)===0){const t=xf(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Cxe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};$t.member&&(i.$members$=t[2]),$t.hostListener&&(i.$listeners$=t[3]),$t.watchCallback&&(i.$watchers$=e.$watchers$),$t.reflect&&(i.$attrsToReflect$=[]),$t.shadowDom&&!Gw&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){wce(this,i)},connectedCallback(){mce(this),$t.connectedCallback&&r&&r.call(this)},disconnectedCallback(){vce(this),$t.disconnectedCallback&&s&&s.call(this)},__attachShadow(){Gw?$t.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,dce(e,i)},Oxe=e=>{const t=new URL(e,Hr.$resourcesUrl$);return t.origin!==_f.location.origin?t.href:t.pathname},bce=e=>Hr.$resourcesUrl$=e,Yj=new WeakMap,xf=e=>Yj.get(e),wce=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return $t.isDev&&(i.$renderCount$=0),$t.method&&$t.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),$t.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),Dj(e,i,t.$listeners$),Yj.set(e,i)},_A=(e,t)=>t in e,qm=(e,t)=>(0,console.error)(e,t),Zj=$t.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],_ce=(...e)=>console.error(...Zj,...e),Xj=(...e)=>console.warn(...Zj,...e),Bw=new Map,xce=[],xA=[],Qj=[],Sce=(e,t)=>i=>{e.push(i),e6||(e6=!0,t&&Hr.$flags$&4?Mce(t6):Hr.raf(t6))},SA=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){qm(i)}e.length=0},t6=()=>{SA(xA),SA(Qj),(e6=xA.length>0)&&Hr.raf(t6)},Mce=e=>jhe().then(e),Ece=Sce(Qj,!0),Pxe={isDev:!!$t.isDev,isBrowser:!0,isServer:!1,isTesting:!!$t.isTesting};let eD;function Tce(){bce(gs(Ft(eD)))}eD="components/assets";const tD=Symbol("widget"),$ce=[],Ice={},Hw=new WeakMap;function iD(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=iD(e,i[s]);else i=$ce;const r=t.vnodeSelector;if(Y7(r)){const s=t.properties||Ice,h=s.key||r;return{vnodeSelector:"div",properties:{key:h,afterCreate:Ace,afterUpdate:kce,afterRemoved:rD,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:h,children:i}},children:void 0,text:void 0,domNode:null}}return t}function Ace(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:h}){var f;const y=new s(h);y.container=e,Hw.set(e,y),(f=y.afterCreate)==null||f.call(y,y,e),r._internalHandles.add(Nh(()=>rD(e)))}function kce(e,t,i,{widgetProperties:r}){var h;const s=Hw.get(e);s&&(s.set(r),(h=s.afterUpdate)==null||h.call(s,s,e))}function rD(e){const t=Hw.get(e);t&&(t.destroy(),Hw.delete(e))}function Y7(e){return typeof e=="function"&&e[tD]}const MA=new Set;function Cce(e){MA.add(e),e.finally(()=>MA.delete(e))}const nD="esri.widgets.Widget",Oce=Le.getLogger(nD);let Pce=0;const Nce={widgetIcon:"esri-icon-checkbox-unchecked"};function sD(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?sD(e[i],t[i]):e[i]=t[i]);return e}const Rce=Lhe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,h,y)=>{const f=t(r,s,h,y),w=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in h)||w){const S=r[2].toLowerCase()+r.slice(3),E=N=>f.call(h,N);h.addEventListener(S,E,w);const A=()=>h.removeEventListener(S,E,w),P=y.afterRemoved;y.afterRemoved=N=>{P==null||P(N),A()}}return f}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:h}=r,y=s===Event.CAPTURING_PHASE;let f=`on${h}${y?"capture":""}`;const w=t.properties;(f in w||(f=`on${h[0].toUpperCase()}${h.slice(1)}${y?"Capture":""}`,f in w))&&($j(),e.scheduleRender(),w[f].call(w.bind||i,r))}});let e9=!1,sr=class extends pf(ta.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new er,this._projector=Rce,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=Nce.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=nM(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const h=await Nr(this._messageBundleProps.map(async({bundlePath:y,propertyName:f})=>{let w=await YR(y);this.uiStrings&&Object.keys(this.uiStrings)&&(w=sD(de(w),this.uiStrings)),this[f]=w}));for(const y of h)y.error&&Oce.error("widget-intl:locale-error",this.declaredClass,y.error)}await this.loadLocale()}),Tce();const i="esri-widget-uid-"+khe(),r=this.render.bind(this);this._trackingTarget=new _2(()=>this.scheduleRender());const s=()=>{var E;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const h=r();let{properties:y}=h;y||(h.properties=y={});let{key:f,styles:w}=y;f||(y.key=i),w||(y.styles=w={}),w.display||(w.display="");let S=0;return(E=h.children)==null||E.forEach(A=>{if(Y7(A.vnodeSelector))return;let{properties:P}=A;P||(A.properties=P={}),P.key||(P.key=`${this.id}--${S++}`)}),iD(this,h)};this.render=()=>{if(e9)return s();let h=ahe(this);if(h)return h;this._trackingTarget.clear(),e9=!0;try{h=Wl(this._trackingTarget,s)}catch(y){throw console.error(y),y}finally{e9=!1}return lhe(this,h),h},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Cce(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(l5)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Pr(this._trackingTarget),Pr(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,X_(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return V7(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Pce++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(X_(this),this._projector.scheduleRender())}classes(...e){return Aj.apply(this,e)}renderNow(){X_(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add($e(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&v2(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>b2(i,s,h=>{this.emit(s,h)})),"delegated-events")},Wt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(l5),this.scheduleRender()};this._internalHandles.add([WY(e),$e(()=>this.uiStrings,e),sn(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};sr[tD]=!0,g([x()],sr.prototype,"_readyForTrueRender",void 0),g([x({value:null})],sr.prototype,"container",null),g([Mt("container")],sr.prototype,"castContainer",null),g([x({aliasOf:"container"})],sr.prototype,"domNode",void 0),g([x()],sr.prototype,"iconClass",void 0),g([x()],sr.prototype,"id",null),g([x()],sr.prototype,"label",void 0),g([x()],sr.prototype,"renderable",null),g([x()],sr.prototype,"uiStrings",void 0),g([x()],sr.prototype,"viewModel",void 0),g([x()],sr.prototype,"visible",void 0),g([x()],sr.prototype,"key",void 0),g([x()],sr.prototype,"children",void 0),g([x()],sr.prototype,"afterCreate",void 0),g([x()],sr.prototype,"afterUpdate",void 0),g([x()],sr.prototype,"afterRemoved",void 0),sr=g([K(nD)],sr);const Er=sr;function Lce(e){return 32+e.length}function Fce(){return 16}function Nxe(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=Lce(r);break;case"number":t+=Fce();break;case"boolean":t+=4}}return t}function Rxe(e,t){return 32+e.length*t}var Ww;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Ww||(Ww={}));function oD(e,t,i){return e.units[t][i]}function Sf(e,t,i,r=2,s="abbr"){return`${io(t,{minimumFractionDigits:r,maximumFractionDigits:r})} ${oD(e,i,s)}`}function p3(e,t,i,r=2,s="abbr"){return`${io(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${oD(e,i,s)}`}function Lxe(e,t,i,r=2,s="abbr"){const h=SL(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Fxe(e,t,i,r=2,s="abbr"){const h=SL(t,i);return p3(e,Gt(t,i,h),h,r,s)}function jxe(e,t,i,r=2,s="abbr"){const h=ML(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Dxe(e,t,i,r=2,s="abbr"){const h=ML(t,i);return p3(e,Gt(t,i,h),h,r,s)}function zxe(e,t,i,r=2,s="abbr"){const h=EL(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Vxe(e,t,i,r=2,s="abbr"){const h=EL(t,i);return p3(e,Gt(t,i,h),h,r,s)}function Gxe(e,t,i,r=2,s="abbr"){const h=TL(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Uxe(e,t,i,r=2,s="abbr"){const h=TL(t,i);return p3(e,Gt(t,i,h),h,r,s)}function qxe(e,t,i,r=2,s="abbr"){const h=fie(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Bxe(e,t,i,r=2,s="abbr"){const h=yie(t,i);return Sf(e,Gt(t,i,h),h,r,s)}function Hxe(e,t,i,r,s){const h=nL.normalize(jce(Gt(e,t,"degrees"),i,r),0,!0);return s=Gr(s,2),io(h,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s})}function jce(e,t,i){if(t===i)return e;switch(i){case"arithmetic":return Dce(e);case"geographic":return zce(e)}}function Dce(e){return 90-e}function zce(e){return-e-90}function Wxe(e,t,i,r,s){i!==r&&(e=-e);const h=Gt(e,t,"degrees")%360;return s=Gr(s,2),io(h,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:"exceptZero"})}const EA=["B","kB","MB","GB","TB"];function Vce(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(Ww.KILOBYTES));i=Kn(i,0,EA.length-1);const r=io(t/Ww.KILOBYTES**i,{maximumFractionDigits:2});return za(e.units.bytes[EA[i]],{fileSize:r})}function Gce(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(h=>h.name===i);return s?Uce({tagName:r,tags:s.tags}):null}function Uce(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var i6;const qce={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Rn=i6=class extends ve{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=Gce({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return qce[t]||null}clone(){return new i6({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};g([x({type:String})],Rn.prototype,"contentType",void 0),g([x()],Rn.prototype,"exifInfo",void 0),g([x({readOnly:!0})],Rn.prototype,"orientationInfo",null),g([x({type:li})],Rn.prototype,"id",void 0),g([x({type:String})],Rn.prototype,"globalId",void 0),g([x({type:String})],Rn.prototype,"keywords",void 0),g([x({type:String})],Rn.prototype,"name",void 0),g([x({json:{read:!1}})],Rn.prototype,"parentGlobalId",void 0),g([x({json:{read:!1}})],Rn.prototype,"parentObjectId",void 0),g([x({type:li})],Rn.prototype,"size",void 0),g([x({json:{read:!1}})],Rn.prototype,"url",void 0),Rn=i6=g([K("esri.layers.support.AttachmentInfo")],Rn);const Bce=Rn,Hce="esri.widgets.Feature.support.featureUtils",TA=Le.getLogger(Hce),Wce=/href=(""|'')/gi,Jce=/(\{([^\{\r\n]+)\})/g,Kce=/\'/g,aD=/^\s*expression\//i,Yce=/(\n)/gi,Zce=/[\u00A0-\u9999<>\&]/gim,Xce=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Qce=/^(?:mailto:|tel:)/,lD="relationships/",r6=SM("short-date-short-time");function uD(e){if(!oe(e))return e.get("sourceLayer")||e.get("layer")}async function Jw(e,t){return typeof e=="function"?e.call(null,t):e}function hD(e=""){if(e)return!Qce.test(e.trim().toLowerCase())}function cD(e){return!!e&&aD.test(e)}function epe(e,t){if(!cD(t)||!e)return null;const i=t.replace(aD,"").toLowerCase();let r;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function pD(e,t){const i=epe(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function tpe(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function ipe(e){return e.replace(Wce,"")}function Kw(e,t){const i=Z7(t,e);return i?i.name:e}function rpe(e,t){return e&&e.map(i=>Kw(i,t))}function Z7(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function dD(e){return`${e}`.trim()}function lp({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:h}){return r?n6({formattedAttributes:t,template:ape(r,{...t,...s,...e},i),fieldInfoMap:h}):""}function n6({formattedAttributes:e,template:t,fieldInfoMap:i}){return dD(ipe(za(za(t,r=>tpe(r,i)),e)))}function npe(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",h=(i?encodeURIComponent(r):r).replace(Kce,s);t[e]=h}}function spe(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>npe(r,i,t)),i}function ope(e,t,i){const r=(t=dD(t))&&t[0]!=="{";return za(e,spe(i,r))}function s6(e,t){return e.replace(Jce,(i,r,s)=>{const h=Z7(t,s);return h?`{${h.name}}`:r})}function ape(e,t,i){const r=s6(e,i);return r&&r.replace(Xce,(s,h,y)=>ope(s,h||y,t))}function lpe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function upe(e){return(e==null?void 0:e.type)==="feature"}function $A(e){return!!(e!=null&&e.layer)}function hpe(e){return(e==null?void 0:e.type)==="map-image"}function cpe(e,t){var S;const i=t.fieldInfos,r=t.fieldName,s=(S=fD(i,r))==null?void 0:S.clone(),h=t.preventPlacesFormatting,y=t.layer,f=Z7(y,r);if(s&&(f==null?void 0:f.type)==="date"){const E=s.format||new n0;E.dateFormat=E.dateFormat||"short-date-short-time",E.dateTimeFormatOptions=!$A(y)&&upe(y)&&y.datesInUnknownTimezone||$A(y)&&hpe(y.layer)&&y.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=E}const w=s&&s.format;return typeof e=="string"&&aN(r)&&w?w.formatRasterPixelValue(e):typeof(e=lpe(e,w))=="string"||e==null||w==null?Bm(e):h?io(e,{...pN(w),minimumFractionDigits:0,maximumFractionDigits:20}):w.format(e)}function fD(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function ppe({fieldName:e,graphic:t,layer:i}){if(Gl(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function dpe({fieldName:e,value:t,graphic:i,layer:r}){if(Gl(e)||!r||typeof r.getFieldDomain!="function")return null;const s=r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function fpe(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:h}=e;if(!t)return;const y=t[h];if(typeof y=="number"){const w=t[s];return{type:"edit",date:Kl(y,r6),user:w}}const f=t[r];if(typeof f=="number"){const w=t[i];return{type:"create",date:Kl(f,r6),user:w}}return null}function ype(e,t){const i=new Map;return e&&e.forEach(r=>{const s=Kw(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function IA(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const h=s&&s.fieldInfos;h&&t.push(...h)}}),t}function X7(e){return e.replace(Zce,t=>`&#${t.charCodeAt(0)};`)}function Bm(e){return typeof e=="string"?e.replace(Yce,'<br class="esri-text-new-line" />'):e}function yD(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:h,graphic:y}=e;if(t==null)return"";const f=dpe({fieldName:i,value:t,graphic:y,layer:h});if(f)return f;const w=ppe({fieldName:i,graphic:y,layer:h});if(w)return w;if(s.get(i.toLowerCase()))return cpe(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:h});const S=h&&h.fieldsIndex;return S&&S.isDateField(i)?Kl(t,r6):Bm(t)}function t9({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:h}){const y={};return h==null||h.forEach(f=>wpe({attributes:y,relatedInfo:f,fieldInfoMap:s,fieldInfos:e,layer:i})),Object.keys(t).forEach(f=>{const w=t[f];y[f]=yD({fieldName:f,fieldInfos:e,fieldInfoMap:s,layer:i,value:w,graphic:r})}),y}async function mpe(e,t){var E,A;const{layer:i,graphic:r,outFields:s,objectIds:h,returnGeometry:y,spatialReference:f}=e,w=h[0];if(typeof w!="number"&&typeof w!="string"){const P="Could not query required fields for the specified feature. The feature's ID is invalid.",N={layer:i,graphic:r,objectId:w,requiredFields:s};return TA.warn(P,N),null}if(!((A=(E=i.capabilities)==null?void 0:E.operations)!=null&&A.supportsQuery)){const P="The specified layer cannot be queried. The following fields will not be available.",N={layer:i,graphic:r,requiredFields:s,returnGeometry:y};return TA.warn(P,N),null}const S=i.createQuery();return S.objectIds=h,S.outFields=s!=null&&s.length?s:[i.objectIdField],S.returnGeometry=!!y,S.returnZ=!!y,S.returnM=!!y,S.outSpatialReference=f,(await i.queryFeatures(S,t)).features[0]}async function gpe(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await qa(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function vpe({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const h=e.attributes[i.objectIdField];if(h==null)return;const y=[h],f=await t.getRequiredFields(i.fieldsIndex),w=qY(f,e),S=w?[]:f,E=t.returnGeometry||await gpe(t);if(w&&!E)return;const A=await mpe({layer:i,graphic:e,outFields:S,objectIds:y,returnGeometry:E,spatialReference:r},s);A&&(A.geometry&&(e.geometry=A.geometry),A.attributes&&(e.attributes={...e.attributes,...A.attributes}))}function Gl(e=""){return!!e&&e.includes(lD)}function bpe(e){return e?`${lD}${e.layerId}/${e.fieldName}`:""}function AA({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:h}){e&&t&&i&&Object.keys(t.attributes).forEach(y=>{const f=bpe({layerId:i.relation.id.toString(),fieldName:y}),w=t.attributes[y];e[f]=yD({fieldName:f,fieldInfos:r,fieldInfoMap:s,layer:h,value:w,graphic:t})})}function wpe({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(h=>AA({attributes:e,graphic:h,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(h=>AA({attributes:e,graphic:h,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})))}const kA=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},mD=({layer:e,method:t,query:i,definitionExpression:r})=>{var y,f;if(!((f=(y=e.capabilities)==null?void 0:y.query)!=null&&f.supportsCacheHint)||t==="attachments")return;const s=Y(i.where)&&i.where,h=Y(i.geometry)&&i.geometry;kA(r)||kA(s)||(h==null?void 0:h.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},_pe=({query:e,layer:t,method:i})=>{mD({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},xpe=({queryPayload:e,layer:t,method:i})=>{mD({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},CA={editing:!1,operations:{add:!0,update:!0,delete:!0}},gD=Je.ofType(Bce),Spe="graphic.layer.capabilities.operations.supportsResizeAttachments";let ko=class extends qe{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...CA},this.activeAttachmentInfo=null,this.attachmentInfos=new gD,this.graphic=null,this.mode="view",this.own($e(()=>this.graphic,()=>this._graphicChanged(),Wt))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...CA,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(Spe)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new ne("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),r=new bS({objectIds:[i],returnMetadata:!0}),s=[],h=e.queryAttachments(r).then(f=>f[i]||s).catch(()=>s);this._getAttachmentsPromise=h,this.notifyChange("state");const y=await h;return t.removeAll(),y.length&&t.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new ne("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!s.operations.add)throw new ne("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new ne("invalid-layer","addAttachment(): A valid layer is required.");const h=t.addAttachment(r,e).then(f=>this._queryAttachment(f.objectId)),y=await h;return i.add(y),y}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new ne("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.delete)throw new ne("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new ne("invalid-layer","deleteAttachment(): A valid layer is required.");const h=t.deleteAttachments(r,[e.id]).then(()=>e),y=await h;return i.remove(y),y}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:h}=this;if(!e)throw new ne("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new ne("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!h.operations.update)throw new ne("invalid-abilities","updateAttachment(): Update abilities are required.");const y=r.findIndex(S=>S===t);if(!i||typeof i.updateAttachment!="function")throw new ne("invalid-layer","updateAttachment(): A valid layer is required.");const f=i.updateAttachment(s,t.id,e).then(S=>this._queryAttachment(S.objectId)),w=await f;return r.splice(y,1,w),w}async _queryAttachment(e){if(!e)throw new ne("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),r=new bS({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(r).then(s=>s[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:r}=t;return r&&r[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=uD(e);this._attachmentLayer=t?t.type==="scene"&&Y(t.associatedLayer)?t.associatedLayer:t:null}};g([x()],ko.prototype,"abilities",void 0),g([Mt("abilities")],ko.prototype,"castAbilities",null),g([x()],ko.prototype,"activeAttachmentInfo",void 0),g([x({readOnly:!0,type:gD})],ko.prototype,"attachmentInfos",void 0),g([x({type:Zn})],ko.prototype,"graphic",void 0),g([x()],ko.prototype,"mode",void 0),g([x({readOnly:!0})],ko.prototype,"state",null),g([x({readOnly:!0})],ko.prototype,"supportsResizeAttachments",null),ko=g([K("esri.widgets.Attachments.AttachmentsViewModel")],ko);const Q7=ko;function Mpe(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function Epe(e){const t=Ft("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Sr(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var Tpe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},vD=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?vD(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=Tpe(s)),t.push(s))}},$pe=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return vD(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function ue(e,t,...i){return typeof e!="function"||Y7(e)?$pe(e,t,...i):e(t,...i)}const OA={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ye={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},i9=window.CSS;let Xr=class extends Er{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new Q7,this.visibleElements={...OA},this._supportsImageOrientation=i9&&i9.supports&&i9.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([ro(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),$e(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),Wt)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...OA,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new ne("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return ue("div",{class:this.classes(Ye.base,Ye.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?ue("div",{key:"error-message",class:Ye.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return ue("div",{class:Ye.loaderContainer,key:"loader"},ue("div",{class:Ye.loader}))}renderProgressBar(){return this.visibleElements.progressBar?ue("div",{class:Ye.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?ue("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ye.esriButton,Ye.esriButtonTertiary,Ye.esriButtonSmall,Ye.esriButtonHalf,e&&Ye.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?ue("button",{type:"submit",disabled:i,class:this.classes(Ye.esriButton,Ye.esriButtonSecondary,Ye.esriButtonSmall,Ye.esriButtonHalf,{[Ye.buttonDisabled]:i})},this.messages.add):null,h=t?ue("span",{key:"file-name",class:Ye.fileName},t.name):null,y=ue("form",{bind:this,afterCreate:KS,afterRemoved:sA,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},ue("fieldset",{class:Ye.fileFieldset},h,ue("label",{class:this.classes(Ye.fileLabel,Ye.esriButton,Ye.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,ue("input",{class:Ye.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return ue("div",{key:"add-form-container",class:Ye.formNode},y)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{contentType:h,size:y,url:f}=e,{abilities:w}=i,S=s||!r,E=w.editing&&w.operations.delete&&t.deleteButton?ue("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:re=>this._submitDeleteAttachment(re,e),class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonTertiary,Ye.deleteButton,{[Ye.buttonDisabled]:s})},this.messages.delete):null,A=w.editing&&w.operations.update&&t.updateButton?ue("button",{disabled:S,key:"update-button",type:"submit",class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonThird,{[Ye.buttonDisabled]:S})},this.messages.update):null,P=this.visibleElements.cancelUpdateButton?ue("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonTertiary,Ye.esriButtonThird,{[Ye.buttonDisabled]:s})},this.messages.cancel):null,N=r?ue("span",{key:"file-name",class:Ye.fileName},r.name):null,F=w.editing&&w.operations.update?ue("fieldset",{key:"file",class:Ye.fileFieldset},N,ue("label",{class:this.classes(Ye.fileLabel,Ye.esriButton,Ye.esriButtonSecondary)},this.messages.changeFile,ue("input",{class:Ye.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,V=ue("fieldset",{key:"size",class:Ye.metadataFieldset},ue("label",null,Vce(this.messagesUnits,y))),U=ue("fieldset",{key:"content-type",class:Ye.metadataFieldset},ue("label",null,h)),X=ue("form",{bind:this,afterCreate:KS,afterRemoved:sA,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},ue("div",{class:Ye.metadata},V,U),F,ue("div",{class:Ye.actions},E,P,A));return ue("div",{key:"edit-form-container",class:Ye.formNode},ue("a",{class:Ye.itemLink,href:f,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),ue("div",{class:Ye.itemLinkOverlay},ue("span",{class:Ye.itemLinkOverlayIcon},ue("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},ue("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),ue("path",{fill:"none",d:"M0 0h32v32H0z"}))))),X)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:r,name:s,url:h}=e,y=i&&Mpe(r),f=this._getCSSTransform(e,y),w=f?{transform:f,"image-orientation":"none"}:{},S=h.includes("?")?"&":"?",E=y?`${h}${S}w=${t}`:Epe(r),A={[Ye.itemMaskIcon]:!y},P={[Ye.itemImageResizable]:i};return ue("div",{class:this.classes(A,Ye.itemMask)},ue("img",{styles:w,alt:s,src:E,class:this.classes(P,Ye.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:r}=i,{name:s,url:h}=e,y=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),f=r.editing?ue("span",{"aria-hidden":"true",class:this.classes(Ye.itemChevronIcon,wh(this.container)?Ye.iconLeft:Ye.iconRight)}):null,w=[y,ue("label",{class:Ye.itemLabel},ue("span",{class:Ye.itemFilename},s||this.messages.noTitle),f)],S=r.editing?ue("button",{key:"details-button",bind:this,class:Ye.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},w):ue("a",{key:"details-link",class:Ye.itemButton,href:h,target:"_blank"},w);return ue("li",{class:Ye.item,key:e},S)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s}=t,h=r&&r.length,y={[Ye.containerList]:e!=="preview",[Ye.containerPreview]:e==="preview"},f=s.editing&&s.operations.add&&i.addButton?ue("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Ye.esriButton,Ye.esriButtonTertiary,Ye.addAttachmentButton),type:"button"},ue("span",{"aria-hidden":"true",class:this.classes(Ye.itemAddIcon,Ye.iconPlus)}),this.messages.add):null,w=h?ue("ul",{class:Ye.items},r.toArray().map(S=>this.renderAttachmentInfo({attachmentInfo:S,displayType:e}))):ue("div",{class:Ye.empty},this.messages.noAttachments);return ue("div",{key:"attachments-container",class:this.classes(Ye.container,y)},w,f)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};g([We("viewModel.abilities")],Xr.prototype,"abilities",void 0),g([x()],Xr.prototype,"displayType",void 0),g([x({readOnly:!0})],Xr.prototype,"effectiveDisplayType",null),g([We("viewModel.graphic")],Xr.prototype,"graphic",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Xr.prototype,"label",void 0),g([x(),Sr("esri/widgets/Attachments/t9n/Attachments")],Xr.prototype,"messages",void 0),g([x(),Sr("esri/core/t9n/Units")],Xr.prototype,"messagesUnits",void 0),g([x({readOnly:!0})],Xr.prototype,"selectedFile",void 0),g([x({readOnly:!0})],Xr.prototype,"submitting",void 0),g([x({readOnly:!0})],Xr.prototype,"error",void 0),g([x({type:Q7})],Xr.prototype,"viewModel",void 0),g([x()],Xr.prototype,"visibleElements",void 0),g([Mt("visibleElements")],Xr.prototype,"castVisibleElements",null),Xr=g([K("esri.widgets.Attachments")],Xr);const Ipe=Xr;let ly=class extends Q7{constructor(e){super(e),this.description=null,this.title=null}};g([x()],ly.prototype,"description",void 0),g([x()],ly.prototype,"title",void 0),ly=g([K("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],ly);const eE=ly,Ape={heading:"esri-widget__heading"};function d3(e,t){const i=kpe(e.level),r=`h${i}`;return delete e.level,ue(r,{...e,class:Aj(Ape.heading,e.class),role:"heading","aria-level":String(i)},t)}function kpe(e){return Kn(Math.ceil(e),1,6)}const r9={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let Bd=class extends Er{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return ue("div",{class:r9.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?ue(d3,{level:this.headingLevel,class:r9.title},e):null}renderDescription(){const{description:e}=this;return e?ue("div",{key:"description",class:r9.description},e):null}};g([x()],Bd.prototype,"description",void 0),g([x()],Bd.prototype,"headingLevel",void 0),g([x()],Bd.prototype,"title",void 0),Bd=g([K("esri.widgets.Feature.support.FeatureElementInfo")],Bd);const tE=Bd,Cpe={base:"esri-feature-attachments"};let Sa=class extends Er{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new Ipe,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new eE}initialize(){this._featureElementInfo=new tE,this.own([$e(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Wt),$e(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,Wt)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return ue("div",{class:Cpe.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};g([x({readOnly:!0})],Sa.prototype,"attachmentsWidget",void 0),g([We("viewModel.description")],Sa.prototype,"description",void 0),g([We("attachmentsWidget.displayType")],Sa.prototype,"displayType",void 0),g([We("viewModel.graphic")],Sa.prototype,"graphic",void 0),g([x()],Sa.prototype,"headingLevel",void 0),g([We("viewModel.title")],Sa.prototype,"title",void 0),g([x({type:eE})],Sa.prototype,"viewModel",void 0),Sa=g([K("esri.widgets.Feature.FeatureAttachments")],Sa);const Ope=Sa;let Wu=class extends nu(qe){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add($e(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},Wt))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(Jw(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=Jw(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};g([x({readOnly:!0})],Wu.prototype,"created",void 0),g([x()],Wu.prototype,"creator",void 0),g([x()],Wu.prototype,"destroyer",void 0),g([x({type:Zn})],Wu.prototype,"graphic",void 0),g([x({readOnly:!0})],Wu.prototype,"state",null),Wu=g([K("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Wu);const Yw=Wu;function jn(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:Npe(e[t])}}}function Ppe(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Npe(e){return function(t,...i){Ppe(t)?vhe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function Rpe(e){return e.split(",").map(t=>t.trim())}function Lpe(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:Rpe(e);i.push(...r)}}const bD="calcite-theme-";function Fpe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function wD(){return Fpe().startsWith("dark")}function jpe(){return`${bD}${wD()?"dark":"light"}`}function Dpe(e){zpe(e),e.classList.add(jpe())}function zpe(e){Array.from(e.classList).forEach(t=>{t.startsWith(bD)&&e.classList.remove(t)})}function Zw(e){return e&&typeof e.render=="function"}function _D(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const n9={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Hd=class extends Er{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{hD(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}renderLoading(){return ue("div",{class:n9.loaderContainer,key:"loader"},ue("div",{class:n9.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?ue("div",{key:e,bind:e,afterCreate:this._attachToNode}):Zw(e)?ue("div",{key:e},!e.destroyed&&e.render()):ue("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return ue("div",{class:n9.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};g([We("viewModel.creator")],Hd.prototype,"creator",void 0),g([We("viewModel.graphic")],Hd.prototype,"graphic",void 0),g([x({type:Yw})],Hd.prototype,"viewModel",void 0),Hd=g([K("esri.widgets.Feature.FeatureContent")],Hd);const Ib=Hd;let El=class extends qe{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=pD(s,e),i.push(s)}),i}};g([x()],El.prototype,"attributes",void 0),g([x({type:[wN]})],El.prototype,"expressionInfos",void 0),g([x()],El.prototype,"description",void 0),g([x({type:[Om]})],El.prototype,"fieldInfos",void 0),g([x({readOnly:!0})],El.prototype,"formattedFieldInfos",null),g([x()],El.prototype,"title",void 0),El=g([K("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],El);const f3=El,Vpe=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Gpe(e){let t=null;return Vpe.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function Upe(e,t){if(typeof t!="string"||!t)return t;const i=Gpe(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],h=za(za(i.label,{messages:e,hierPart:s}),{appName:i.appName}),y=i.target?` target="${i.target}"`:"",f=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${y} href="$1"${f}>${h}</a>`)}const n1={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let Co=class extends Er{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new f3,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new tE,this.own($e(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Wt))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,h=i?i[r]==null?"":i[r]:"",y=!(!e.format||!e.format.dateFormat),f=typeof h=="number"&&!y?this._forceLTR(h):Upe(this.messagesURIUtils,h),w={[n1.fieldDataDate]:y};return ue("tr",{key:`fields-element-info-row-${r}-${t}`},ue("th",{key:`fields-element-info-row-header-${r}-${t}`,class:n1.fieldHeader,innerHTML:s}),ue("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(n1.fieldData,w),innerHTML:f}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?ue("table",{class:n1.esriTable,summary:this.messages.fieldsSummary},ue("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return ue("div",{class:n1.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};g([We("viewModel.attributes")],Co.prototype,"attributes",void 0),g([We("viewModel.description")],Co.prototype,"description",void 0),g([We("viewModel.expressionInfos")],Co.prototype,"expressionInfos",void 0),g([We("viewModel.fieldInfos")],Co.prototype,"fieldInfos",void 0),g([We("viewModel.title")],Co.prototype,"title",void 0),g([x({type:f3})],Co.prototype,"viewModel",void 0),g([x(),Sr("esri/widgets/Feature/t9n/Feature")],Co.prototype,"messages",void 0),g([x(),Sr("esri/widgets/support/t9n/uriUtils")],Co.prototype,"messagesURIUtils",void 0),Co=g([K("esri.widgets.Feature.FeatureFields")],Co);const xD=Co,qpe={maximumFractionDigits:20};function Bpe(e){return io(e,qpe)}class o6{constructor(t,i){this._storage=new HL,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new o6(1e3);new rt([128,128,128]);const PA=/\/resource\/(.*?)\.svg$/,Hpe=new rt("white");function Jxe(e){if(oe(e)||!("symbolLayers"in e)||oe(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function Kxe(e,t){const i=t.resource.href;return!we("esri-canvas-svg-support")&&e.styleOrigin&&PA.test(i)?i.replace(PA,"/resource/png/$1.png"):i}function Xp(e,t){if(!e)return null;let i=null;return L0(e)?i=Wpe(e):G2(e)&&(i=e.color?new rt(e.color):null),i?ym(i,t):null}function Wpe(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource.href!=null||(i=r.type==="water"?r.color:Y(r.material)?r.material.color:null)}),i?new rt(i):null}function ym(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new rt(i)}function Jpe(e,t,i){const r=e.symbolLayers;if(!r)return;const s=h=>{const y=Y(h)?h:null;return ym(t=t||y||i!=null&&Hpe,i)};r.forEach(h=>{if(h.type!=="object"||h.resource.href==null||t)if(h.type==="water")h.color=s(h.color);else{const y=Y(h.material)?h.material.color:null,f=s(y);oe(h.material)?h.material=new ws({color:f}):h.material.color=f,i!=null&&"outline"in h&&Y(h.outline)&&Y(h.outline.color)&&(h.outline.color=ym(h.outline.color,i))}})}function Kpe(e,t,i){(t=t||e.color)&&(e.color=ym(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=ym(e.outline.color,i))}function s9(e,t,i){e&&(t||i!=null)&&(t&&(t=new rt(t)),L0(e)?Jpe(e,t,i):G2(e)&&Kpe(e,t,i))}async function Ype(e,t){const i=e.symbolLayers;i&&await qee(i,async r=>Zpe(r,t))}async function Zpe(e,t){switch(e.type){case"extrude":Qpe(e,t);break;case"icon":case"line":case"text":Xpe(e,t);break;case"path":tde(e,t);break;case"object":await ede(e,t)}}function Xpe(e,t){const i=SD(t);Y(i)&&(e.size=i)}function SD(e){for(const t of e)if(typeof t=="number")return t;return null}function Qpe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function ede(e,t){const{resourceSize:i,symbolSize:r}=await ide(e),s=MD(t,i,r);e.width=Fy(t[0],r[0],i[0],s),e.depth=Fy(t[1],r[1],i[1],s),e.height=Fy(t[2],r[2],i[2],s)}function tde(e,t){const i=MD(t,CN,[e.width,void 0,e.height]);e.width=Fy(t[0],e.width,1,i),e.height=Fy(t[2],e.height,1,i)}function MD(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":return i[r]!=null?i[r]/t[r]:1;case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function ide(e){const t=await ge(()=>import("./symbolLayerUtils.8e6ff405.js"),[]),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:h}=e,y=[r,h,s];let f=1;for(let w=0;w<3;w++)if(y[w]!=null){f=y[w]/i[w];break}for(let w=0;w<3;w++)y[w]==null&&(y[w]=i[w]*f);return{resourceSize:i,symbolSize:y}}function Fy(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function rde(e,t){const i=SD(t);if(!oe(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function nde(e,t){if(e&&t)return L0(e)?Ype(e,t):void(G2(e)&&rde(e,t))}function sde(e,t,i){if(e&&t!=null)if(L0(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else G2(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}const ode="<",ade=">",lde=SM("short-date");function ude(e,t,i,r){let s="";t===0?s=`${ode} `:t===i&&(s=`${ade} `);let h=null;return h=r?Kl(e,lde):Bpe(e),s+h}const hde=new rt([64,64,64]);function cde(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,h)=>i.includes(h)?ude(s,h,r,t):null)}async function pde(e,t,i){let r=!1,s=[],h=[];if(e.stops){const S=e.stops;s=S.map(E=>E.value),r=S.some(E=>!!E.label),r&&(h=S.map(E=>E.label))}const y=s[0],f=s[s.length-1];if(y==null&&f==null)return null;const w=r?null:cde(s,i);return(await Promise.all(s.map(async(S,E)=>({value:S,color:e.type==="opacity"?await dde(S,e,t):(await ge(()=>Promise.resolve().then(()=>h7),void 0)).getColor(e,S),label:r?h[E]:w[E]})))).reverse()}async function dde(e,t,i=hde){const r=new rt(i),s=(await ge(()=>Promise.resolve().then(()=>h7),void 0)).getOpacity(t,e);return s!=null&&(r.a=s),r}function fde(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new ky({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var y,f;let h="";return s===0?h=((y=e.legendOptions)==null?void 0:y.minLabel)||"low":s===i&&(h=((f=e.legendOptions)==null?void 0:f.maxLabel)||"high"),{color:r.color,label:h,ratio:r.ratio}}).reverse()}Le.getLogger("esri.renderers.support.utils");function Qn(e,t,i){FO(e,t,()=>[]).push(...i)}async function yde(e){var i,r;const t=new Map;if("visualVariables"in e&&e.visualVariables){const s=e.visualVariables.filter(h=>h.type==="color");for(const h of s){const y=h.field||h.valueExpression,f=(await pde(h)).map(w=>w.color);Qn(t,y,f)}}if(e.type==="heatmap"){const s=fde(e).map(h=>h.color);Qn(t,e.field,s)}else if(e.type==="pie-chart"){for(const s of e.attributes)Qn(t,s.field,[s.color]);Qn(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,Xp(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const s of e.attributes)Qn(t,s.field,[s.color]);Qn(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((r=e.authoringInfo)==null?void 0:r.type)==="predominance")for(const s of e.uniqueValueInfos)Qn(t,s.value.toString(),[Xp(s.symbol,null)]);else{const s=e.uniqueValueInfos.map(S=>Xp(S.symbol,null)),{field:h,field2:y,field3:f,valueExpression:w}=e;(h||w)&&Qn(t,h||w,s),y&&Qn(t,y,s),f&&Qn(t,f,s)}else if(e.type==="class-breaks"){const s=e.classBreakInfos.map(h=>Xp(h.symbol,null));Qn(t,e.field||e.valueExpression,s)}else e.type==="simple"&&Qn(t,null,[Xp(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&Qn(t,null,[Xp(e.defaultSymbol,null)]),t.forEach((s,h)=>{const y=zH(s.filter(Boolean),(f,w)=>JSON.stringify(f)===JSON.stringify(w));t.set(h,y)}),t}const Zg={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new tn({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ot.WebMercator}),minus180Line:new tn({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ot.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new tn({paths:[[[180,-180],[180,180]]],spatialReference:ot.WGS84}),minus180Line:new tn({paths:[[[-180,-180],[-180,180]]],spatialReference:ot.WGS84})}};function up(e,t){return Math.ceil((e-t)/(2*t))}function ED(e,t){const i=jy(e);for(const r of i)for(const s of r)s[0]+=t;return e}function jy(e){return xh(e)?e.rings:e.paths}async function mde(e,t,i,r){const s=typeof e=="string"?hr(e):e,h=t[0].spatialReference,y={...r,query:{...s.query,f:"json",sr:JSON.stringify(h),target:JSON.stringify({geometryType:rf(t[0]),geometries:t}),cutter:JSON.stringify(i)}},f=await ni(s.path+"/cut",y),{cutIndexes:w,geometries:S=[]}=f.data;return{cutIndexes:w,geometries:S.map(E=>{const A=Ua(E);return A.spatialReference=h,A})}}async function gde(e,t,i){const r=typeof e=="string"?hr(e):e,s=t[0].spatialReference,h=rf(t[0]),y={...i,query:{...r.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(vde(t))}};return bde((await ni(r.path+"/simplify",y)).data,h,s)}function vde(e){return{geometryType:rf(e[0]),geometries:e.map(t=>t.toJSON())}}function bde(e,t,i){const r=ZP(t);return e.map(s=>{const h=r.fromJSON(s);return h.spatialReference=i,h})}const TD=Le.getLogger("esri.geometry.support.normalizeUtils");function wde(e){return e.type==="polygon"}function _de(e){return e[0].type==="polygon"}function xde(e){return e[0].type==="polyline"}function $D(e,t){if(!(e instanceof tn||e instanceof rn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw TD.error(s),new ne(s)}const i=jy(e),r=[];for(const s of i){const h=[];r.push(h),h.push([s[0][0],s[0][1]]);for(let y=0;y<s.length-1;y++){const f=s[y][0],w=s[y][1],S=s[y+1][0],E=s[y+1][1],A=Math.sqrt((S-f)*(S-f)+(E-w)*(E-w)),P=(E-w)/A,N=(S-f)/A,F=A/t;if(F>1){for(let re=1;re<=F-1;re++){const he=re*t,pe=N*he+f,ae=P*he+w;h.push([pe,ae])}const V=(A+Math.floor(F-1)*t)/2,U=N*V+f,X=P*V+w;h.push([U,X])}h.push([S,E])}}return wde(e)?new rn({rings:r,spatialReference:e.spatialReference}):new tn({paths:r,spatialReference:e.spatialReference})}function NA(e,t,i){if(t){const r=$D(e,1e6);e=zl(r,!0)}return i&&(e=ED(e,i)),e}function RA(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=up(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=up(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=up(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=up(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function Sde(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],h=t.geometries[r],y=jy(h);for(let f=0;f<y.length;f++){const w=y[f];w.some(S=>{if(S[0]<180)return!0;{let E=0;for(let P=0;P<w.length;P++){const N=w[P][0];E=N>E?N:E}E=Number(E.toFixed(9));const A=-360*up(E,180);for(let P=0;P<w.length;P++){const N=h.getPoint(f,P);h.setPoint(f,P,N.clone().offset(A,0))}return!0}})}if(s===i){if(_de(e))for(const f of jy(h))e[s]=e[s].addRing(f);else if(xde(e))for(const f of jy(h))e[s]=e[s].addPath(f)}else i=s,e[s]=h}return e}async function iE(e,t,i){var pe;if(!Array.isArray(e))return iE([e],t);t&&typeof t!="string"&&TD.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(pe=t==null?void 0:t.url)!=null?pe:Lt.geometryServiceUrl;let s,h,y,f,w,S,E,A,P=0;const N=[],F=[];for(const ae of e)if(oe(ae))F.push(ae);else if(s||(s=ae.spatialReference,h=vs(s),y=s.isWebMercator,S=y?102100:4326,f=Zg[S].maxX,w=Zg[S].minX,E=Zg[S].plus180Line,A=Zg[S].minus180Line),h)if(ae.type==="mesh")F.push(ae);else if(ae.type==="point")F.push(RA(ae.clone(),f,w));else if(ae.type==="multipoint"){const le=ae.clone();le.points=le.points.map(Te=>RA(Te,f,w)),F.push(le)}else if(ae.type==="extent"){const le=ae.clone()._normalize(!1,!1,h);F.push(le.rings?new rn(le):le)}else if(ae.extent){const le=ae.extent,Te=up(le.xmin,w)*(2*f);let Ee=Te===0?ae.clone():ED(ae.clone(),Te);le.offset(Te,0),le.intersects(E)&&le.xmax!==f?(P=le.xmax>P?le.xmax:P,Ee=NA(Ee,y),N.push(Ee),F.push("cut")):le.intersects(A)&&le.xmin!==w?(P=le.xmax*(2*f)>P?le.xmax*(2*f):P,Ee=NA(Ee,y,360),N.push(Ee),F.push("cut")):F.push(Ee)}else F.push(ae.clone());else F.push(ae);let V=up(P,f),U=-90;const X=V,re=new tn;for(;V>0;){const ae=360*V-180;re.addPath([[ae,U],[ae,-1*U]]),U*=-1,V--}if(N.length>0&&X>0){const ae=Sde(N,await mde(r,N,re,i)),le=[],Te=[];for(let Ae=0;Ae<F.length;Ae++){const Fe=F[Ae];if(Fe!=="cut")Te.push(Fe);else{const ze=ae.shift(),Ge=e[Ae];Y(Ge)&&Ge.type==="polygon"&&Ge.rings&&Ge.rings.length>1&&ze.rings.length>=Ge.rings.length?(le.push(ze),Te.push("simplify")):Te.push(y?La(ze):ze)}}if(!le.length)return Te;const Ee=await gde(r,le,i),Oe=[];for(let Ae=0;Ae<Te.length;Ae++){const Fe=Te[Ae];Fe!=="simplify"?Oe.push(Fe):Oe.push(y?La(Ee.shift()):Ee.shift())}return Oe}const he=[];for(let ae=0;ae<F.length;ae++){const le=F[ae];if(le!=="cut")he.push(le);else{const Te=N.shift();he.push(y===!0?La(Te):Te)}}return he}function Yxe(e,t){const i=vs(t);if(i){const[r,s]=i.valid,h=s-r;if(e<r)for(;e<r;)e+=h;if(e>s)for(;e>s;)e-=h}return e}function ID(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=ID(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var uh;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(uh||(uh={}));const LA=4294967296,Mde=new TextDecoder("utf-8"),Ede=we("safari")||we("ios")?6:we("ff")?12:32;class gp{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=uh.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}clone(){return new gp(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*LA;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*LA;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const h=this.getMessage(),y=t(h,i,r,s);return h.release(),y}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=gp.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){gp.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case uh.varint:this._decodeVarint();break;case uh.fixed64:this._skip(8);break;case uh.delimited:this._skip(this._getLength());break;case uh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,r=this._pos,s=0;if(this._end-r>=10)do{if(i=t[r++],s|=127&i,(128&i)==0||(i=t[r++],s|=(127&i)<<7,(128&i)==0)||(i=t[r++],s|=(127&i)<<14,(128&i)==0)||(i=t[r++],s|=(127&i)<<21,(128&i)==0)||(i=t[r++],s+=268435456*(127&i),(128&i)==0)||(i=t[r++],s+=34359738368*(127&i),(128&i)==0)||(i=t[r++],s+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],s+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],s+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],s+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let h=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,s+=(127&i)*h,h*=128;if(r===this._end)throw new Error("Varint overrun!");++r,s+=i*h}return this._pos=r,s}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==uh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>Ede){const y=t.subarray(i,r);return Mde.decode(y)}let s="",h="";for(let y=i;y<r;++y){const f=t[y];128&f?h+="%"+f.toString(16):(s+=decodeURIComponent(h)+String.fromCharCode(f),h="")}return h.length&&(s+=decodeURIComponent(h)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}gp.pool=new Zo(gp,null,e=>{e._data=null,e._dataView=null});class Rr{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,s,h]=t,y=s-i,f=h-r;return new Rr([5],[i,r,y,0,0,f,-y,0,0,-f])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let h=0;h<s;h++)t(this.coords[2*(h+i)],this.coords[2*(h+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new Rr(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Rr(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Ya{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Ya(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function Tde(e){return!(oe(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Zxe extends Ya{}class y3{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new y3;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const AD=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Xxe{constructor(t){this.options=t,this.geometryTypes=AD,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new y3}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||ki(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=D0(this.options.sourceSpatialReference)/D0(t.spatialReference);if(i!==1)for(const r of t.features){if(!Tde(r))continue;const s=r.geometry.coords;for(let h=2;h<s.length;h+=3)s[h]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new Ya}createSpatialReference(){return{wkid:0}}createGeometry(){return new Rr}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Rr}}const FA=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],jA=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],DA=["upperLeft","lowerLeft"];function zA(e){return e>=FA.length?null:FA[e]}function $de(e){return e>=jA.length?null:jA[e]}function VA(e){return e>=DA.length?null:DA[e]}function GA(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Ide(e,t,i){const s=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const h=e.getUInt32(),y=e.pos()+h;let f=0;for(;e.pos()<y;)t.addCoordinatePoint(s,e.getSInt64(),f++);break}default:e.skip()}return s}function Ade(e,t,i){const h=t.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const f=e.getUInt32(),w=e.pos()+f;let S=0;for(;e.pos()<w;)t.addLength(h,e.getUInt32(),S++);break}case 3:{const f=e.getUInt32(),w=e.pos()+f;let S=0;for(t.allocateCoordinates(h);e.pos()<w;)t.addCoordinate(h,e.getSInt64(),S),S++,S===y&&(S=0);break}default:e.skip()}return h}function kde(e){const s=new Rr;let h="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const y=e.getUInt32(),f=e.pos()+y;for(;e.pos()<f;)s.lengths.push(e.getUInt32());break}case 3:{const y=e.getUInt32(),f=e.pos()+y;for(;e.pos()<f;)s.coords.push(e.getSInt64());break}case 1:h=AD[e.getEnum()];break;default:e.skip()}return{queryGeometry:s,queryGeometryType:h}}function Cde(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function Ode(e){const f={type:zA(0)};for(;e.next();)switch(e.tag()){case 1:f.name=e.getString();break;case 2:f.type=zA(e.getEnum());break;case 3:f.alias=e.getString();break;case 4:f.sqlType=$de(e.getEnum());break;case 5:e.skip();break;case 6:f.defaultValue=e.getString();break;default:e.skip()}return f}function Pde(e){const r={};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.isSystemMaintained=e.getBool();break;default:e.skip()}return r}function Nde(e,t,i,r){const f=t.createFeature(i);let w=0;for(;e.next();)switch(e.tag()){case 1:{const S=r[w++].name;f.attributes[S]=e.processMessage(Cde);break}case 2:f.geometry=e.processMessageWithArgs(Ade,t,i);break;case 4:f.centroid=e.processMessageWithArgs(Ide,t,i);break;default:e.skip()}return f}function Rde(e){const h=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:h[0]=e.getDouble();break;case 2:h[1]=e.getDouble();break;case 4:h[2]=e.getDouble();break;case 3:h[3]=e.getDouble();break;default:e.skip()}return h}function Lde(e){const h=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:h[0]=e.getDouble();break;case 2:h[1]=e.getDouble();break;case 4:h[2]=e.getDouble();break;case 3:h[3]=e.getDouble();break;default:e.skip()}return h}function Fde(e){const s={originPosition:VA(0)};for(;e.next();)switch(e.tag()){case 1:s.originPosition=VA(e.getEnum());break;case 2:s.scale=e.processMessage(Rde);break;case 3:s.translate=e.processMessage(Lde);break;default:e.skip()}return s}function jde(e){const s={};for(;e.next();)switch(e.tag()){case 1:s.shapeAreaFieldName=e.getString();break;case 2:s.shapeLengthFieldName=e.getString();break;case 3:s.units=e.getString();break;default:e.skip()}return s}function Dde(e,t){const f=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:f.wkid=e.getUInt32();break;case 5:f.wkt=e.getString();break;case 2:f.latestWkid=e.getUInt32();break;case 3:f.vcsWkid=e.getUInt32();break;case 4:f.latestVcsWkid=e.getUInt32();break;default:e.skip()}return f}function zde(e,t){const V=t.createFeatureResult();V.geometryType=GA(t,0);let U=!1;for(;e.next();)switch(e.tag()){case 1:V.objectIdFieldName=e.getString();break;case 3:V.globalIdFieldName=e.getString();break;case 4:V.geohashFieldName=e.getString();break;case 5:V.geometryProperties=e.processMessage(jde);break;case 7:V.geometryType=GA(t,e.getEnum());break;case 8:V.spatialReference=e.processMessageWithArgs(Dde,t);break;case 10:V.hasZ=e.getBool();break;case 11:V.hasM=e.getBool();break;case 12:V.transform=e.processMessage(Fde);break;case 9:{const X=e.getBool();V.exceededTransferLimit=X;break}case 13:t.addField(V,e.processMessage(Ode));break;case 15:U||(t.prepareFeatures(V),U=!0),t.addFeature(V,e.processMessageWithArgs(Nde,t,V,V.fields));break;case 2:V.uniqueIdField=e.processMessage(Pde);break;default:e.skip()}return t.finishFeatureResult(V),V}function Vde(e,t){const s={};let h=null;for(;e.next();)switch(e.tag()){case 4:h=e.processMessageWithArgs(kde);break;case 1:s.featureResult=e.processMessageWithArgs(zde,t);break;default:e.skip()}return Y(h)&&s.featureResult&&t.addQueryGeometry(s,h),s}function Gde(e,t){try{const r=new gp(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(Vde,t):r.skip();return s}catch(i){throw new ne("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Ude(e,t){const i=Gde(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,h=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const y=r.objectIdFieldName;for(const f of r.features)f.attributes&&(f.objectId=f.attributes[y])}return r&&(r.queryGeometry=s,r.queryGeometryType=h),r}const UA="Layer does not support extent calculation.";function kD(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function CD(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let h,y,f;if(Y(i)&&(y=i.spatialReference,f=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=rf(i),s.geometry=kD(i,e.compactGeometryEnabled),s.inSR=f),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),h=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,h=y),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&Y(y)&&Y(e.quantizationParameters)&&Y(e.quantizationParameters.extent)&&y.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const w=r.timeExtent,{start:S,end:E}=w;S==null&&E==null||(s.time=S===E?S:`${S==null?"null":S},${E==null?"null":E}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&Y(y)&&Y(h)&&y.equals(h)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function OD(e,t,i,r){const s=Y(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Mf(e,t,"json",r);return V4(t,i,s.data),s}async function qde(e,t,i,r){if(Y(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await PD(e,t,r),h=s;return h.data=Ude(s.data,i),h}function PD(e,t,i){return Mf(e,t,"pbf",i)}function Bde(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Mf(e,t,"json",i,{returnIdsOnly:!0})}function Hde(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Mf(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function Wde(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Mf(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(UA);if(s.hasOwnProperty("count"))throw new Error(UA);return r})}function Mf(e,t,i,r={},s={}){const h=typeof e=="string"?hr(e):e,y=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",iE(y,null,r).then(f=>{const w=f&&f[0];Y(w)&&((t=t.clone()).geometry=w);const S=ID({...h.query,f:i,...s,...CD(t,s)});return ni(Ep(h.path,"query"),{...r,query:{...S,...r.query}})})}const Qxe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:kD,executeQuery:OD,executeQueryForCount:Hde,executeQueryForExtent:Wde,executeQueryForIds:Bde,executeQueryPBF:qde,executeQueryPBFBuffer:PD,queryToQueryStringParameters:CD,runQuery:Mf},Symbol.toStringTag,{value:"Module"}));async function o9(e,t,i){const r=await Jde(e,t,i);return X2.fromJSON(r)}async function Jde(e,t,i){const r=rj(e),s={...i},h=Js.from(t),{data:y}=await OD(r,h,h.sourceSpatialReference,s);return y}function Wr(e,t){return e?t?4:3:t?3:2}const Ef=Le.getLogger("esri.layers.graphics.featureConversionUtils"),ND={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},RD=(e,t,i,r,s,h)=>{e[i]=s,e[i+1]=h},Xw=(e,t,i,r,s,h)=>{e[i]=s,e[i+1]=h,e[i+2]=t[r+2]},Kde=(e,t,i,r,s,h)=>{e[i]=s,e[i+1]=h,e[i+2]=t[r+3]},LD=(e,t,i,r,s,h)=>{e[i]=s,e[i+1]=h,e[i+2]=t[r+2],e[i+3]=t[r+3]};function rE(e,t,i,r){if(e){if(i)return t&&r?LD:Xw;if(t&&r)return Kde}else if(t&&r)return Xw;return RD}function a9({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function l9({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function qA({scale:e,translate:t},i){return i*e[0]+t[0]}function BA({scale:e,translate:t},i){return t[1]-i*e[1]}function a6(e,t,i){return e?t?i?oE(e):nE(e):i?sE(e):m3(e):null}function m3(e){const t=e.coords;return{x:t[0],y:t[1]}}function FD(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function nE(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Yde(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function sE(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Zde(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function oE(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Xde(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Qde(e,t,i,r){let s=m3;i&&r?s=oE:i?s=nE:r&&(s=sE);for(const h of t){const{geometry:y,attributes:f}=h,w=Y(y)?s(y):null;e.push({attributes:f,geometry:w})}return e}function jD(e,t){return e&&t?Xde:e?Yde:t?Zde:FD}function DD(e,t,i,r,s){const h=jD(i,r);for(const y of t){const{geometry:f,attributes:w}=y;let S;f&&(S=h(new Rr,f)),e.push(new Ya(S,w,null,w[s]))}return e}function e0e(e,t,i,r){for(const s of t){const{geometry:h,attributes:y}=s;let f;h&&(f=aE(h,i,r)),e.push({attributes:y,geometry:f})}return e}function aE(e,t,i){if(oe(e))return null;const r=Wr(t,i),s=[];for(let h=0;h<e.coords.length;h+=r){const y=[];for(let f=0;f<r;f++)y.push(e.coords[h+f]);s.push(y)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function zD(e,t,i,r,s){const h=Wr(i,r);for(const y of t){const f=y.geometry,w=y.attributes;let S;f&&(S=VD(new Rr,f,h)),e.push(new Ya(S,w,null,w[s]))}return e}function VD(e,t,i=Wr(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const h of t.points)for(let y=0;y<i;y++)r[s++]=h[y];return e}function t0e(e,t,i,r){for(const s of t){const{geometry:h,attributes:y}=s;let f;Y(h)&&(f=lE(h,i,r)),e.push({attributes:y,geometry:f})}return e}function lE(e,t,i){if(!e)return null;const r=Wr(t,i),{coords:s,lengths:h}=e,y=[];let f=0;for(const w of h){const S=[];for(let E=0;E<w;E++){const A=[];for(let P=0;P<r;P++)A.push(s[f++]);S.push(A)}y.push(S)}return t?i?{paths:y,hasZ:t,hasM:i}:{paths:y,hasZ:t}:i?{paths:y,hasM:i}:{paths:y}}function GD(e,t,i,r,s){const h=Wr(i,r);for(const y of t){const f=y.geometry,w=y.attributes;let S;f&&(S=UD(new Rr,f,h)),e.push(new Ya(S,w,null,w[s]))}return e}function UD(e,t,i=Wr(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let h=0;for(const y of t.paths){for(const f of y)for(let w=0;w<i;w++)s[h++]=f[w];r.push(y.length)}return e}function i0e(e,t,i,r){for(const s of t){const{geometry:h,attributes:y,centroid:f}=s;let w;if(Y(h)&&(w=uE(h,i,r)),Y(f)){const S=m3(f);e.push({attributes:y,centroid:S,geometry:w})}else e.push({attributes:y,geometry:w})}return e}function uE(e,t,i){if(!e)return null;const r=Wr(t,i),{coords:s,lengths:h}=e,y=[];let f=0;for(const w of h){const S=[];for(let E=0;E<w;E++){const A=[];for(let P=0;P<r;P++)A.push(s[f++]);S.push(A)}y.push(S)}return t?i?{rings:y,hasZ:t,hasM:i}:{rings:y,hasZ:t}:i?{rings:y,hasM:i}:{rings:y}}function qD(e,t,i,r,s){for(const h of t){const y=h.geometry,f=h.centroid,w=h.attributes;let S;y&&(S=BD(new Rr,y,i,r)),Y(f)?e.push(new Ya(S,w,FD(new Rr,f),w[s])):e.push(new Ya(S,w,null,w[s]))}return e}function BD(e,t,i=t.hasZ,r=t.hasM){return r0e(e,t.rings,i,r),e}function r0e(e,t,i,r){const s=Wr(i,r),{lengths:h,coords:y}=e;let f=0;h.length=y.length=0;for(const w of t){for(const S of w)for(let E=0;E<s;E++)y[f++]=S[E];h.push(w.length)}return e}const E0=[],Dy=[];function e4e(e,t,i,r,s){E0[0]=e;const[h]=HD(Dy,E0,t,i,r,s);return E0.length=Dy.length=0,h}function HD(e,t,i,r,s,h){if(e.length=0,!i){for(const y of t){const f=y.attributes[h];e.push(new Ya(null,y.attributes,null,f))}return e}switch(i){case"esriGeometryPoint":return DD(e,t,r,s,h);case"esriGeometryMultipoint":return zD(e,t,r,s,h);case"esriGeometryPolyline":return GD(e,t,r,s,h);case"esriGeometryPolygon":return qD(e,t,r,s,h);default:Ef.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function t4e(e,t,i,r,s,h){const y=e.length;switch(i){case"esriGeometryPoint":DD(e,t,r,s,h);break;case"esriGeometryMultipoint":zD(e,t,r,s,h);break;case"esriGeometryPolyline":GD(e,t,r,s,h);break;case"esriGeometryPolygon":qD(e,t,r,s,h);break;default:Ef.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}for(let f=0;f<t.length;f++)e[f+y].geometryType=i,e[f+y].insertAfter=t[f].insertAfter,e[f+y].groupId=t[f].groupId;return e}function i4e(e,t,i,r){Dy[0]=e,WD(E0,Dy,t,i,r);const s=E0[0];return E0.length=Dy.length=0,s}function r4e(e,t,i){if(oe(e))return null;const r=new Rr;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),$2(e)?jD(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):xh(e)?BD(r,e,t,i):I2(e)?UD(r,e,Wr(t,i)):T2(e)?VD(r,e,Wr(t,i)):void Ef.error("convertFromGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${e}'`))}function n0e(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(oe(s))return null;switch(t){case"esriGeometryPoint":{let h=m3;return i&&r?h=oE:i?h=nE:r&&(h=sE),h(s)}case"esriGeometryMultipoint":return aE(s,i,r);case"esriGeometryPolyline":return lE(s,i,r);case"esriGeometryPolygon":return uE(s,i,r);default:return void Ef.error("convertToGeometry:unknown-geometry",new ne(`Unable to parse unknown geometry type '${t}'`))}}function s0e(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function WD(e,t,i,r,s){if(e.length=0,oe(i))return s0e(e,t);switch(i){case"esriGeometryPoint":return Qde(e,t,r,s);case"esriGeometryMultipoint":return e0e(e,t,r,s);case"esriGeometryPolyline":return t0e(e,t,r,s);case"esriGeometryPolygon":return i0e(e,t,r,s);default:Ef.error("convertToFeatureSet:unknown-geometry",new ne(`Unable to parse unknown geometry type '${i}'`))}return e}function n4e(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:h,hasZ:y,features:f,geometryType:w,exceededTransferLimit:S,uniqueIdField:E,queryGeometry:A,queryGeometryType:P}=e,N={features:WD([],f,w,y,h),fields:s,geometryType:w,objectIdFieldName:t,spatialReference:i,uniqueIdField:E,queryGeometry:n0e(A,P,!1,!1)};return r&&(N.transform=r),S&&(N.exceededTransferLimit=S),h&&(N.hasM=h),y&&(N.hasZ=y),N}function s4e(e,t){const i=new y3,{hasM:r,hasZ:s,features:h,objectIdFieldName:y,spatialReference:f,geometryType:w,exceededTransferLimit:S,transform:E,fields:A}=e;return A&&(i.fields=A),i.geometryType=w,i.objectIdFieldName=y||t,i.spatialReference=f,i.objectIdFieldName?(h&&HD(i.features,h,w,s,r,i.objectIdFieldName),S&&(i.exceededTransferLimit=S),r&&(i.hasM=r),s&&(i.hasZ=s),E&&(i.transform=E),i):(Ef.error(new ne("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function o4e(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const h of i)Y(h.geometry)&&HA(h.geometry,h.geometry,r,s,t),Y(h.centroid)&&HA(h.centroid,h.centroid,r,s,t);return e.transform=null,e}function a4e(e,t){const{geometryType:i,features:r,hasM:s,hasZ:h}=t;if(!e)return t;for(let y=0;y<r.length;y++){const f=r[y],w=f.weakClone();w.geometry=new Rr,mm(w.geometry,f.geometry,s,h,i,e),f.centroid&&(w.centroid=new Rr,mm(w.centroid,f.centroid,s,h,"esriGeometryPoint",e)),r[y]=w}return t.transform=e,t}function mm(e,t,i,r,s,h,y=i,f=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),oe(t)||!t.coords.length)return null;const w=ND[s],{coords:S,lengths:E}=t,A=Wr(i,r),P=Wr(i&&y,r&&f),N=rE(i,r,y,f);if(!E.length)return N(e.coords,S,0,0,a9(h,S[0]),l9(h,S[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=A,e;let F,V,U,X,re=0,he=0,pe=he;for(const ae of E){if(ae<w)continue;let le=0;he=pe,U=F=a9(h,S[re]),X=V=l9(h,S[re+1]),N(e.coords,S,he,re,U,X),le++,re+=A,he+=P;for(let Te=1;Te<ae;Te++,re+=A)U=a9(h,S[re]),X=l9(h,S[re+1]),U===F&&X===V||(N(e.coords,S,he,re,U-F,X-V),he+=P,le++,F=U,V=X);le>=w&&(e.lengths.push(le),pe=he)}return e.coords.length=pe,e.coords.length?e:null}function o0e(e,t,i,r,s,h,y=i,f=r){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const w=ND[s],{coords:S,lengths:E}=t,A=Wr(i,r),P=Wr(i&&y,r&&f),N=rE(i,r,y,f);if(!E.length)return N(e.coords,S,0,0,S[0],S[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=A,e;let F=0;const V=h*h;for(const U of E){if(U<w){F+=U*A;continue}const X=e.coords.length/P,re=F,he=F+(U-1)*A;N(e.coords,S,e.coords.length,re,S[re],S[re+1]),l6(e.coords,S,A,V,N,re,he),N(e.coords,S,e.coords.length,he,S[he],S[he+1]);const pe=e.coords.length/P-X;pe>=w?e.lengths.push(pe):e.coords.length=X*P,F+=U*A}return e.coords.length?e:null}function a0e(e,t,i,r){const s=e[t],h=e[t+1],y=e[i],f=e[i+1],w=e[r],S=e[r+1];let E=y,A=f,P=w-E,N=S-A;if(P!==0||N!==0){const F=((s-E)*P+(h-A)*N)/(P*P+N*N);F>1?(E=w,A=S):F>0&&(E+=P*F,A+=N*F)}return P=s-E,N=h-A,P*P+N*N}function l6(e,t,i,r,s,h,y){let f,w=r,S=0;for(let E=h+i;E<y;E+=i)f=a0e(t,E,h,y),f>w&&(S=E,w=f);w>r&&(S-h>i&&l6(e,t,i,r,s,h,S),s(e,t,e.length,S,t[S],t[S+1]),y-S>i&&l6(e,t,i,r,s,S,y))}function l4e(e,t,i,r){if(oe(t)||!t.coords||!t.coords.length)return null;const s=Wr(i,r);let h=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(t&&t.coords){const S=t.coords;for(let E=0;E<S.length;E+=s){const A=S[E],P=S[E+1];h=Math.min(h,A),f=Math.max(f,A),y=Math.min(y,P),w=Math.max(w,P)}}return e[0]=h,e[1]=y,e[2]=f,e[3]=w,e}function HA(e,t,i,r,s){const{coords:h,lengths:y}=t,f=i?r?LD:Xw:r?Xw:RD,w=Wr(i,r);if(!h.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!y.length)return f(e.coords,h,0,0,qA(s,h[0]),BA(s,h[1])),e!==t&&(e.lengths.length=0,e.coords.length=w),e;const[S,E]=s.scale;let A=0;for(let P=0;P<y.length;P++){const N=y[P];e.lengths[P]=N;let F=qA(s,h[A]),V=BA(s,h[A+1]);f(e.coords,h,A,A,F,V),A+=w;for(let U=1;U<N;U++,A+=w)F+=h[A]*S,V-=h[A+1]*E,f(e.coords,h,A,A,F,V)}return e!==t&&(e.lengths.length=y.length,e.coords.length=h.length),e}function l0e(e,t,i,r,s,h){const y=Wr(i,r),f=rE(i,r,s,h),w=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let S=0;S<w.length;S+=y)f(e.coords,w,e.coords.length,S,w[S],w[S+1]);return e}function u0e(e,t,i,r){let s=0,h=e[r*t],y=e[r*(t+1)];for(let f=1;f<i;f++){const w=h+e[r*(t+f)],S=y+e[r*(t+f)+1],E=(w-h)*(S+y);h=w,y=S,s+=E}return .5*s}function u4e(e,t){const{coords:i,lengths:r}=e;let s=0,h=0;for(let y=0;y<r.length;y++)h+=u0e(i,s,r[y],t),s+=y;return Math.abs(h)}function h4e(e,t){if(oe(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let h=0;for(let y=0;y<s.length;y++){const f=s[y];let w=r[t*h],S=r[t*h+1];for(let E=1;E<f;E++){const A=w+r[t*(h+E)],P=S+r[t*(h+E)+1];i.coords[t*(h+E)]=A,i.coords[t*(h+E)+1]=P,w=A,S=P}h+=f}return i}const h0e="esri.widgets.Feature.support.relatedFeatureUtils",WA=Le.getLogger(h0e),JA=new Map;function u6(e){if(!Gl(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function c0e(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function p0e({originRelationship:e,relationships:t,layerId:i}){let r;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===e.id&&(r=s),!!r)),r}function d0e(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function f0e(e,t){const i=c0e(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function y0e(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const h=r&&r.value;t.relatedStatsFeatures=h?h.features:[]}function m0e(e,t,i,r){const s=new _S;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(s,r)}function g0e(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function v0e(e,t,i,r){const s=i.layerId.toString(),{layerInfo:h,relation:y,relatedFields:f,outStatistics:w,url:S,sourceSpatialReference:E}=t,A=p0e({originRelationship:y,relationships:h.relationships,layerId:s});if(A.relationshipTableId&&A.keyFieldInRelationshipTable){const N=(await m0e(e,A,i,r))[e.attributes[i.objectIdField]];if(!N)return null;const F=N.features.map(V=>V.attributes[h.objectIdField]);if((w==null?void 0:w.length)>0&&h.supportsStatistics){const V=new Js;V.where=g0e(h.objectIdField,F,1e3),V.outFields=f,V.outStatistics=w,V.sourceSpatialReference=E;const U={features:Promise.resolve(N),statsFeatures:o9(S,V)};return Nr(U)}}const P=A==null?void 0:A.keyField;if(P){const N=bM(S0e(h.fields,P)),F=d0e(e.attributes,y.keyField),V=N?`${P}=${F}`:`${P}='${F}'`,U=o9(S,new Js({where:V,outFields:t.relatedFields,sourceSpatialReference:E}),r),X=t.outStatistics&&t.outStatistics.length>0&&h.supportsStatistics?o9(S,new Js({where:V,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:E}),r):null,re={features:U};return X&&(re.statsFeatures=X),Nr(re)}return null}function b0e(e,t){return ni(e,{query:{f:"json"},signal:t&&t.signal})}function w0e({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,h)=>{const{relation:y}=s;if(!y){const A=new ne("relation-required","A relation is required on a layer to retrieve related records.");throw WA.error(A),A}const{relatedTableId:f}=y;if(typeof f!="number"){const A=new ne("A related table ID is required on a layer to retrieve related records.");throw WA.error(A),A}const w=`${t.url}/${f}`,S=JA.get(w),E=S||b0e(w,i);S||JA.set(w,E),r[h]=E}),Nr(r)}function _0e({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((h,y)=>{h.layerInfo&&(s[y]=v0e(e,h,i,r))}),Nr(s)}function x0e({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const r=new $F({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(r)}}function S0e(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const KA={chartAnimation:!0};let vr=class extends qe{constructor(e){super(e),this.abilities={...KA},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...KA,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:r,fieldInfoMap:s,layer:h}=this;return t==null?void 0:t.map(y=>{const f=y==null?void 0:y.clone();if(!f)return null;if(f.title=lp({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:h,text:f.title}),f.caption=lp({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:h,text:f.caption}),f.altText=lp({attributes:e,fieldInfoMap:s,globalAttributes:i,expressionAttributes:r,layer:h,text:f.altText}),f.type==="image"){const{value:w}=f;return this._setImageValue({value:w,formattedAttributes:i,layer:h}),f.value.sourceURL?f:void 0}if(f.type==="pie-chart"||f.type==="line-chart"||f.type==="column-chart"||f.type==="bar-chart"){const{value:w}=f;return this._setChartValue({value:w,chartType:f.type,attributes:e,formattedAttributes:i,layer:h}),f}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:h,sourceURL:y}=i;if(y){const f=s6(y,s);i.sourceURL=n6({formattedAttributes:r,template:f,fieldInfoMap:t})}if(h){const f=s6(h,s);i.linkURL=n6({formattedAttributes:r,template:f,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:h}=e,{popupTemplate:y,relatedInfos:f}=this,{fields:w,normalizeField:S}=t;if(t.fields=rpe(w,h),S&&(t.normalizeField=Kw(S,h)),!w.some(A=>!!(r[A]!=null||Gl(A)&&f.size)))return;const E=y==null?void 0:y.fieldInfos;w.forEach(A=>{if(Gl(A))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:E,fieldName:A,formattedAttributes:r,chartType:s,value:t})]);const P=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,fieldName:A,fieldInfos:E});t.series.push(P)})}_getRelatedChartInfos(e){var F;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:s,value:h}=e,y=[],f=u6(i),{layerId:w,fieldName:S}=f,E=(F=this.relatedInfos)==null?void 0:F.get(w.toString());if(!E)return y;const{relatedFeatures:A,relation:P}=E;if(!P||!A)return y;const{cardinality:N}=P;return A.forEach(V=>{const{attributes:U}=V;U&&Object.keys(U).forEach(X=>{X===S&&y.push(this._getChartOption({value:h,attributes:U,formattedAttributes:r,fieldName:i,chartType:s,relatedFieldName:X,fieldInfos:t}))})}),N==="one-to-many"||N==="many-to-many"?y:[y[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var he,pe,ae,le,Te,Ee;const{value:t,attributes:i,formattedAttributes:r,fieldName:s,relatedFieldName:h,fieldInfos:y,chartType:f}=e,{layer:w,fieldInfoMap:S}=this,{normalizeField:E,tooltipField:A}=t,P=E?Gl(E)?i[u6(E).fieldName]:i[E]:null,N=h&&i[h]!==void 0?i[h]:i[s]!==void 0?i[s]:r[s],F=new dN({fieldName:s,value:N===void 0?null:N&&P?N/P:N});if(Gl(s)){const Oe=S.get(s.toLowerCase()),Ae=S.get(A.toLowerCase()),Fe=(he=Oe==null?void 0:Oe.fieldName)!=null?he:s,ze=(Te=(le=(ae=r[(pe=Ae==null?void 0:Ae.fieldName)!=null?pe:A])!=null?ae:Oe==null?void 0:Oe.label)!=null?le:Oe==null?void 0:Oe.fieldName)!=null?Te:h,Ge=r[Fe];return F.tooltip=this._getTooltip({label:ze,value:Ge,chartType:f}),F}const V=fD(y,s),U=Kw(s,w),X=A&&r[A]!==void 0?r[A]:pD(V||new Om({fieldName:U}),(Ee=this.popupTemplate)==null?void 0:Ee.expressionInfos),re=r[U];return F.tooltip=this._getTooltip({label:X,value:re,chartType:f}),F}};g([x()],vr.prototype,"abilities",void 0),g([Mt("abilities")],vr.prototype,"castAbilities",null),g([x()],vr.prototype,"activeMediaInfoIndex",void 0),g([x({readOnly:!0})],vr.prototype,"activeMediaInfo",null),g([x()],vr.prototype,"attributes",void 0),g([x()],vr.prototype,"description",void 0),g([x()],vr.prototype,"fieldInfoMap",void 0),g([x()],vr.prototype,"formattedAttributes",void 0),g([x()],vr.prototype,"expressionAttributes",void 0),g([x({readOnly:!0})],vr.prototype,"formattedMediaInfos",null),g([x()],vr.prototype,"layer",void 0),g([x({readOnly:!0})],vr.prototype,"formattedMediaInfoCount",null),g([x()],vr.prototype,"mediaInfos",void 0),g([x()],vr.prototype,"popupTemplate",void 0),g([x()],vr.prototype,"relatedInfos",void 0),g([x()],vr.prototype,"title",void 0),vr=g([K("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],vr);const hp=vr;var YA=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],M0e=[].concat(YA.slice(30,39),YA.slice(28,30).reverse()),E0e=[{name:"default",colors:M0e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const ZA="en-us",hE=new Map([["ar",()=>ge(()=>import("./ar.5d7bdca7.js"),["assets/ar.5d7bdca7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.a)],["bg-bg",()=>ge(()=>import("./bg_BG.e6ba29c2.js"),["assets/bg_BG.e6ba29c2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["bs-ba",()=>ge(()=>import("./bs_BA.14911a00.js"),["assets/bs_BA.14911a00.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["ca-es",()=>ge(()=>import("./ca_ES.1a938920.js"),["assets/ca_ES.1a938920.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["cs-cz",()=>ge(()=>import("./cs_CZ.8624de8a.js"),["assets/cs_CZ.8624de8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["da-dk",()=>ge(()=>import("./da_DK.aef5a9c8.js"),["assets/da_DK.aef5a9c8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-de",()=>ge(()=>import("./de_DE.b08b4cf1.js"),["assets/de_DE.b08b4cf1.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-ch",()=>ge(()=>import("./de_CH.0b6cd702.js"),["assets/de_CH.0b6cd702.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["el-gr",()=>ge(()=>import("./el_GR.8e618bc9.js"),["assets/el_GR.8e618bc9.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-us",()=>ge(()=>import("./en_US.41c717af.js"),["assets/en_US.41c717af.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-ca",()=>ge(()=>import("./en_CA.f60d00bf.js"),["assets/en_CA.f60d00bf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["es-es",()=>ge(()=>import("./es_ES.1f0f76f4.js"),["assets/es_ES.1f0f76f4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["et-ee",()=>ge(()=>import("./et_EE.a7babafb.js"),["assets/et_EE.a7babafb.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["fi-fi",()=>ge(()=>import("./fi_FI.fdc0a8b3.js"),["assets/fi_FI.fdc0a8b3.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["fr-fr",()=>ge(()=>import("./fr_FR.9fb72c1a.js"),["assets/fr_FR.9fb72c1a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["he-il",()=>ge(()=>import("./he_IL.3941bb8a.js"),["assets/he_IL.3941bb8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hr-hr",()=>ge(()=>import("./hr_HR.0f5af0f2.js"),["assets/hr_HR.0f5af0f2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hu-hu",()=>ge(()=>import("./hu_HU.b4dae139.js"),["assets/hu_HU.b4dae139.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["id-id",()=>ge(()=>import("./id_ID.f5b918ea.js"),["assets/id_ID.f5b918ea.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["it-it",()=>ge(()=>import("./it_IT.94769a92.js"),["assets/it_IT.94769a92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["ja-jp",()=>ge(()=>import("./ja_JP.8eb86db8.js"),["assets/ja_JP.8eb86db8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.j)],["ko-kr",()=>ge(()=>import("./ko_KR.8ba7fd29.js"),["assets/ko_KR.8ba7fd29.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.k)],["lt-lt",()=>ge(()=>import("./lt_LT.d8c1cc92.js"),["assets/lt_LT.d8c1cc92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["lv-lv",()=>ge(()=>import("./lv_LV.ceb923a4.js"),["assets/lv_LV.ceb923a4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["nb-no",()=>ge(()=>import("./nb_NO.d0457d8e.js"),["assets/nb_NO.d0457d8e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["nl-nl",()=>ge(()=>import("./nl_NL.fbf1ad03.js"),["assets/nl_NL.fbf1ad03.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["pl-pl",()=>ge(()=>import("./pl_PL.44d49398.js"),["assets/pl_PL.44d49398.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-br",()=>ge(()=>import("./pt_BR.89b1d3a7.js"),["assets/pt_BR.89b1d3a7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-pt",()=>ge(()=>import("./pt_PT.2abd4e91.js"),["assets/pt_PT.2abd4e91.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["ro-ro",()=>ge(()=>import("./ro_RO.fb4fff60.js"),["assets/ro_RO.fb4fff60.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["ru-ru",()=>ge(()=>import("./ru_RU.684f53ee.js"),["assets/ru_RU.684f53ee.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["sk-sk",()=>ge(()=>import("./sk_SK.eaca904e.js"),["assets/sk_SK.eaca904e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sl-sl",()=>ge(()=>import("./sl_SL.cff9b92a.js"),["assets/sl_SL.cff9b92a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sr-rs",()=>ge(()=>import("./sr_RS.44ddc4cf.js"),["assets/sr_RS.44ddc4cf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sv-se",()=>ge(()=>import("./sv_SE.16043ad0.js"),["assets/sv_SE.16043ad0.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["th-th",()=>ge(()=>import("./th_TH.99f2a35e.js"),["assets/th_TH.99f2a35e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["tr-tr",()=>ge(()=>import("./tr_TR.ab1c9f2f.js"),["assets/tr_TR.ab1c9f2f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["uk-ua",()=>ge(()=>import("./uk_UA.ae3608ad.js"),["assets/uk_UA.ae3608ad.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.u)],["vi-vn",()=>ge(()=>import("./vi_VN.7d19f32e.js"),["assets/vi_VN.7d19f32e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.v)],["zh-cn",()=>ge(()=>import("./zh_Hans.0f482448.js"),["assets/zh_Hans.0f482448.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-hk",()=>ge(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-tw",()=>ge(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)]]);function T0e(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of hE.keys())if(r.startsWith(t)){i=r;break}return i}function $0e(e){return e?hE.has(e.toLowerCase())?e.toLowerCase():T0e(e)||ZA:ZA}let Qp,s1;async function I0e(e=bs()){if(e=$0e(e),Qp&&e===s1)return Qp;Qp=ge(()=>import("./index.7ba26017.js"),["assets/index.7ba26017.js","assets/_commonjsHelpers.01f5fe30.js"]).then(t=>t.i),s1=e;try{const[t,i]=await Promise.all([Qp,hE.get(s1)()]);s1===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Qp=null,s1=null,null}return Qp}function A0e(e,t="default"){const i=E0e.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const Ci={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},u9=.05,h9=.95,c9=15,sl="color",wu="tooltip",o1="value",XA="default-line-value";let Ln=class extends Er{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new hp,this.messages=null,this._getChartDependencies=async i=>{const r=await I0e(),{destroyed:s,viewModel:h}=this;if(s||!h||!i)return;const{activeMediaInfo:y}=h,f=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:y,chartsModule:r,colorMap:f})}}initialize(){this._featureElementInfo=new tE,this.own([$e(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Wt),$e(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Wt)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return ue("div",{bind:this,class:Ci.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?ue("div",{key:"media-element-container",class:Ci.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:h,altText:y,title:f,type:w}=e,{sourceURL:S,linkURL:E}=s,A=hD(E)?"_blank":"_self",P=A==="_blank"?"noreferrer":"",N=h?t:null,F=N?N.timestamp:0,V=N?N.sourceURL:S,U=ue("img",{alt:y||f,key:`media-${w}-${i}-${r}-${F}`,src:V});return(E?ue("a",{title:f,href:E,rel:P,target:A},U):null)||U}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return ue("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:Ci.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?ue("div",{key:"media-title",class:Ci.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?ue("div",{key:"media-caption",class:Ci.mediaItemCaption,innerHTML:e.caption}):null;return ue("div",{key:"media-container",class:Ci.mediaItemContainer},ue("div",{key:"media-item-container",class:Ci.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(Ci.mediaButton,Ci.mediaPrevious):this.classes(Ci.mediaButton,Ci.mediaNext),s=t?this.classes(Ci.mediaIcon,Ci.mediaPreviousIconLTR,Ci.iconLeftTriangleArrow):this.classes(Ci.mediaIcon,Ci.mediaNextIconLTR,Ci.iconRightTriangleArrow),h=t?this.classes(Ci.mediaIcon,Ci.mediaPreviousIconRTL,Ci.iconRightTriangleArrow):this.classes(Ci.mediaIcon,Ci.mediaNextIconRTL,Ci.iconLeftTriangleArrow),y=t?"media-previous":"media-next",f=t?this._previous:this._next;return ue("button",{type:"button",key:y,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:f},ue("span",{"aria-hidden":"true",class:s}),ue("span",{"aria-hidden":"true",class:h}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var h;const{am4core:t}=e,i=(h=this.viewModel)==null?void 0:h.layer,r=new Map;if(!i)return r;const s=await yde(i.renderer);return s.delete(null),Array.from(s.values()).every(y=>(y==null?void 0:y.length)===1)&&(r.set(XA,t.color({r:50,g:50,b:50,a:1})),Array.from(s.keys()).forEach(y=>{y&&r.set(y,t.color(s.get(y)[0].toCss(!0)))})),r}_handleMediaKeyup(e){const t=Vo(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:h}=e,{value:y,type:f}=s,{am4core:w}=i,S=A0e(w);function E(N){N instanceof w.ColorSet&&S&&(N.list=S)}wD()&&w.useTheme(i.am4themes_dark);const A=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!A.matches?w.useTheme(i.am4themes_animated):w.unuseTheme(i.am4themes_animated),w.useTheme(E);const P=f==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),P.data=y.series.map(N=>({[wu]:N.tooltip,[o1]:N.value,[sl]:h.get(N.fieldName)})).filter(N=>f!=="pie-chart"||N.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,h=r.create(t,s.PieChart);h.rtl=wh(this.container);const y=h.series.push(new s.PieSeries);return y.labels.template.disabled=!0,y.ticks.template.disabled=!0,y.dataFields.value=o1,y.dataFields.category=wu,this._customizeChartTooltip(y.tooltip,r),y.slices.template.tooltipText=h.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",y.slices.template.propertyFields.fill=sl,y.slices.template.propertyFields.stroke=sl,h}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:h,am4charts:y}=i,f=e.xAxes.push(new y.CategoryAxis);f.dataFields.category=wu,f.renderer.labels.template.disabled=!0,this._customizeChartTooltip(f.tooltip,h),f.tooltip.events.on("sizechanged",()=>{f.tooltip.dy=-f.tooltip.contentHeight});const w=e.yAxes.push(new y.ValueAxis),S=w.renderer.labels.template;w.renderer.minLabelPosition=u9,w.renderer.maxLabelPosition=h9,w.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(w.tooltip,h),S.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueY=o1,E.dataFields.categoryX=wu,E.columns.template.propertyFields.fill=sl,E.columns.template.propertyFields.stroke=sl,e.cursor=new y.XYCursor,s.series.length>c9&&(e.scrollbarX=new h.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:h,am4charts:y}=i,f=e.yAxes.push(new y.CategoryAxis);f.dataFields.category=wu,f.renderer.inversed=!0,f.renderer.labels.template.disabled=!0,this._customizeChartTooltip(f.tooltip,h),f.tooltip.events.on("sizechanged",()=>{f.tooltip.dx=f.tooltip.contentWidth});const w=e.xAxes.push(new y.ValueAxis),S=w.renderer.labels.template;w.renderer.minLabelPosition=u9,w.renderer.maxLabelPosition=h9,w.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(w.tooltip,h),S.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueX=o1,E.dataFields.categoryY=wu,E.columns.template.propertyFields.fill=sl,E.columns.template.propertyFields.stroke=sl,e.cursor=new y.XYCursor,s.series.length>c9&&(e.scrollbarY=new h.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:h}=r,{am4core:y,am4charts:f}=i,w=e.xAxes.push(new f.CategoryAxis);w.dataFields.category=wu,w.renderer.labels.template.disabled=!0,this._customizeChartTooltip(w.tooltip,y),w.tooltip.events.on("sizechanged",()=>{w.tooltip.dy=-w.tooltip.contentHeight});const S=e.yAxes.push(new f.ValueAxis),E=S.renderer.labels.template;S.renderer.minLabelPosition=u9,S.renderer.maxLabelPosition=h9,S.min=this._getMinSeriesValue(h.series),this._customizeChartTooltip(S.tooltip,y),E.wrap=!0;const A=e.series.push(new f.LineSeries);A.dataFields.categoryX=wu,A.dataFields.valueY=o1,A.strokeWidth=1;const P=s.get(XA);P&&(A.stroke=P);const N=A.bullets.push(new f.CircleBullet);N.propertyFields.fill=sl,N.propertyFields.stroke=sl,e.cursor=new f.XYCursor,h.series.length>c9&&(e.scrollbarX=new y.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:h,am4charts:y}=i,f=h.create(t,y.XYChart);return f.rtl=wh(this.container),s==="column-chart"&&this._createColumnChart(f,e),s==="bar-chart"&&this._createBarChart(f,e),s==="line-chart"&&this._createLineChart(f,e),f}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};g([We("viewModel.attributes")],Ln.prototype,"attributes",void 0),g([We("viewModel.activeMediaInfoIndex")],Ln.prototype,"activeMediaInfoIndex",void 0),g([We("viewModel.description")],Ln.prototype,"description",void 0),g([We("viewModel.fieldInfoMap")],Ln.prototype,"fieldInfoMap",void 0),g([We("viewModel.layer")],Ln.prototype,"layer",void 0),g([We("viewModel.mediaInfos")],Ln.prototype,"mediaInfos",void 0),g([We("viewModel.popupTemplate")],Ln.prototype,"popupTemplate",void 0),g([We("viewModel.relatedInfos")],Ln.prototype,"relatedInfos",void 0),g([We("viewModel.title")],Ln.prototype,"title",void 0),g([x({type:hp})],Ln.prototype,"viewModel",void 0),g([x(),Sr("esri/widgets/Feature/t9n/Feature")],Ln.prototype,"messages",void 0),Ln=g([K("esri.widgets.Feature.FeatureMedia")],Ln);const JD=Ln;class k0e{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class Qa{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class Gp extends Qa{constructor(t,i,r,s,h,y){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=r,this._hasM=s,this._cacheId=h,this._partId=y}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const r=this._hasZ,s=this._hasM;let h=null;h=r&&!s?new et(i[0],i[1],i[2],void 0,this._spRef):s&&!r?new et(i[0],i[1],void 0,i[2],this._spRef):r&&s?new et(i[0],i[1],i[2],i[3],this._spRef):new et(i[0],i[1],this._spRef),h.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=h}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Gp&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class cE extends Qa{constructor(t,i,r,s,h){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=r,this._hasM=s,this._spRef=i,this._cacheId=h}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new Gp(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof cE&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Up extends Error{}class C0e extends Up{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class O0e extends Up{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class P0e extends Up{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class uy extends Up{}class KD extends Up{constructor(t){super(`Invalid unit ${t}`)}}class Hs extends Up{}class _u extends Up{constructor(){super("Zone is an abstract class")}}const Ke="numeric",Xo="short",xs="long",h6={year:Ke,month:Ke,day:Ke},YD={year:Ke,month:Xo,day:Ke},N0e={year:Ke,month:Xo,day:Ke,weekday:Xo},ZD={year:Ke,month:xs,day:Ke},XD={year:Ke,month:xs,day:Ke,weekday:xs},QD={hour:Ke,minute:Ke},ez={hour:Ke,minute:Ke,second:Ke},tz={hour:Ke,minute:Ke,second:Ke,timeZoneName:Xo},iz={hour:Ke,minute:Ke,second:Ke,timeZoneName:xs},rz={hour:Ke,minute:Ke,hourCycle:"h23"},nz={hour:Ke,minute:Ke,second:Ke,hourCycle:"h23"},sz={hour:Ke,minute:Ke,second:Ke,hourCycle:"h23",timeZoneName:Xo},oz={hour:Ke,minute:Ke,second:Ke,hourCycle:"h23",timeZoneName:xs},az={year:Ke,month:Ke,day:Ke,hour:Ke,minute:Ke},lz={year:Ke,month:Ke,day:Ke,hour:Ke,minute:Ke,second:Ke},uz={year:Ke,month:Xo,day:Ke,hour:Ke,minute:Ke},hz={year:Ke,month:Xo,day:Ke,hour:Ke,minute:Ke,second:Ke},R0e={year:Ke,month:Xo,day:Ke,weekday:Xo,hour:Ke,minute:Ke},cz={year:Ke,month:xs,day:Ke,hour:Ke,minute:Ke,timeZoneName:Xo},pz={year:Ke,month:xs,day:Ke,hour:Ke,minute:Ke,second:Ke,timeZoneName:Xo},dz={year:Ke,month:xs,day:Ke,weekday:xs,hour:Ke,minute:Ke,timeZoneName:xs},fz={year:Ke,month:xs,day:Ke,weekday:xs,hour:Ke,minute:Ke,second:Ke,timeZoneName:xs};function jt(e){return typeof e>"u"}function vp(e){return typeof e=="number"}function g3(e){return typeof e=="number"&&e%1===0}function L0e(e){return typeof e=="string"}function F0e(e){return Object.prototype.toString.call(e)==="[object Date]"}function yz(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function j0e(e){return Array.isArray(e)?e:[e]}function QA(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const h=[t(s),s];return r&&i(r[0],h[0])===r[0]?r:h},null)[1]}function D0e(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function U0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ul(e,t,i){return g3(e)&&e>=t&&e<=i}function z0e(e,t){return e-t*Math.floor(e/t)}function ar(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function hh(e){if(!(jt(e)||e===null||e===""))return parseInt(e,10)}function Kh(e){if(!(jt(e)||e===null||e===""))return parseFloat(e)}function pE(e){if(!(jt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function dE(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function Hm(e){return e%4===0&&(e%100!==0||e%400===0)}function zy(e){return Hm(e)?366:365}function Qw(e,t){const i=z0e(t-1,12)+1,r=e+(t-i)/12;return i===2?Hm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function fE(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function e2(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function c6(e){return e>99?e:e>60?1900+e:2e3+e}function mz(e,t,i,r=null){const s=new Date(e),h={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(h.timeZone=r);const y={timeZoneName:t,...h},f=new Intl.DateTimeFormat(i,y).formatToParts(s).find(w=>w.type.toLowerCase()==="timezonename");return f?f.value:null}function v3(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function gz(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Hs(`Invalid unit value ${e}`);return t}function t2(e,t){const i={};for(const r in e)if(U0(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=gz(s)}return i}function Vy(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${ar(i,2)}:${ar(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${ar(i,2)}${ar(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function b3(e){return D0e(e,["hour","minute","second","millisecond"])}const vz=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,V0e=["January","February","March","April","May","June","July","August","September","October","November","December"],bz=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G0e=["J","F","M","A","M","J","J","A","S","O","N","D"];function wz(e){switch(e){case"narrow":return[...G0e];case"short":return[...bz];case"long":return[...V0e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const _z=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xz=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],U0e=["M","T","W","T","F","S","S"];function Sz(e){switch(e){case"narrow":return[...U0e];case"short":return[...xz];case"long":return[..._z];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Mz=["AM","PM"],q0e=["Before Christ","Anno Domini"],B0e=["BC","AD"],H0e=["B","A"];function Ez(e){switch(e){case"narrow":return[...H0e];case"short":return[...B0e];case"long":return[...q0e];default:return null}}function W0e(e){return Mz[e.hour<12?0:1]}function J0e(e,t){return Sz(t)[e.weekday-1]}function K0e(e,t){return wz(t)[e.month-1]}function Y0e(e,t){return Ez(t)[e.year<0?0:1]}function Z0e(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},h=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&h){const A=e==="days";switch(t){case 1:return A?"tomorrow":`next ${s[e][0]}`;case-1:return A?"yesterday":`last ${s[e][0]}`;case 0:return A?"today":`this ${s[e][0]}`}}const y=Object.is(t,-0)||t<0,f=Math.abs(t),w=f===1,S=s[e],E=r?w?S[1]:S[2]||S[1]:w?s[e][0]:e;return y?`${f} ${E} ago`:`in ${f} ${E}`}function ek(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const X0e={D:h6,DD:YD,DDD:ZD,DDDD:XD,t:QD,tt:ez,ttt:tz,tttt:iz,T:rz,TT:nz,TTT:sz,TTTT:oz,f:az,ff:uz,fff:cz,ffff:dz,F:lz,FF:hz,FFF:pz,FFFF:fz};class Bn{static create(t,i={}){return new Bn(t,i)}static parseFormat(t){let i=null,r="",s=!1;const h=[];for(let y=0;y<t.length;y++){const f=t.charAt(y);f==="'"?(r.length>0&&h.push({literal:s,val:r}),i=null,r="",s=!s):s||f===i?r+=f:(r.length>0&&h.push({literal:!1,val:r}),r=f,i=f)}return r.length>0&&h.push({literal:s,val:r}),h}static macroTokenToFormatOpts(t){return X0e[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return ar(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",h=(N,F)=>this.loc.extract(t,N,F),y=N=>t.isOffsetFixed&&t.offset===0&&N.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,N.format):"",f=()=>r?W0e(t):h({hour:"numeric",hourCycle:"h12"},"dayperiod"),w=(N,F)=>r?K0e(t,N):h(F?{month:N}:{month:N,day:"numeric"},"month"),S=(N,F)=>r?J0e(t,N):h(F?{weekday:N}:{weekday:N,month:"long",day:"numeric"},"weekday"),E=N=>{const F=Bn.macroTokenToFormatOpts(N);return F?this.formatWithSystemDefault(t,F):N},A=N=>r?Y0e(t,N):h({era:N},"era"),P=N=>{switch(N){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return f();case"d":return s?h({day:"numeric"},"day"):this.num(t.day);case"dd":return s?h({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return S("short",!0);case"cccc":return S("long",!0);case"ccccc":return S("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return S("short",!1);case"EEEE":return S("long",!1);case"EEEEE":return S("narrow",!1);case"L":return s?h({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?h({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return w("short",!0);case"LLLL":return w("long",!0);case"LLLLL":return w("narrow",!0);case"M":return s?h({month:"numeric"},"month"):this.num(t.month);case"MM":return s?h({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return w("short",!1);case"MMMM":return w("long",!1);case"MMMMM":return w("narrow",!1);case"y":return s?h({year:"numeric"},"year"):this.num(t.year);case"yy":return s?h({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?h({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?h({year:"numeric"},"year"):this.num(t.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return E(N)}};return ek(Bn.parseFormat(i),P)}formatDurationFromString(t,i){const r=w=>{switch(w[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=w=>S=>{const E=r(S);return E?this.num(w.get(E),S.length):S},h=Bn.parseFormat(i),y=h.reduce((w,{literal:S,val:E})=>S?w:w.concat(E),[]),f=t.shiftTo(...y.map(r).filter(w=>w));return ek(h,s(f))}}class Uo{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Wm{get type(){throw new _u}get name(){throw new _u}get ianaName(){return this.name}get isUniversal(){throw new _u}offsetName(t,i){throw new _u}formatOffset(t,i){throw new _u}offset(t){throw new _u}equals(t){throw new _u}get isValid(){throw new _u}}let p9=null;class yE extends Wm{static get instance(){return p9===null&&(p9=new yE),p9}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return mz(t,i,r)}formatOffset(t,i){return Vy(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Ab={};function Q0e(e){return Ab[e]||(Ab[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ab[e]}const efe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tfe(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,h,y,f,w,S,E]=r;return[y,s,h,f,w,S,E]}function ife(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:h,value:y}=i[s],f=efe[h];h==="era"?r[f]=y:jt(f)||(r[f]=parseInt(y,10))}return r}let Xg={};class eu extends Wm{static create(t){return Xg[t]||(Xg[t]=new eu(t)),Xg[t]}static resetCache(){Xg={},Ab={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=eu.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return mz(t,i,r,this.name)}formatOffset(t,i){return Vy(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Q0e(this.name);let[s,h,y,f,w,S,E]=r.formatToParts?ife(r,i):tfe(r,i);f==="BC"&&(s=-Math.abs(s)+1);const P=fE({year:s,month:h,day:y,hour:w===24?0:w,minute:S,second:E,millisecond:0});let N=+i;const F=N%1e3;return N-=F>=0?F:1e3+F,(P-N)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let d9=null;class bn extends Wm{static get utcInstance(){return d9===null&&(d9=new bn(0)),d9}static instance(t){return t===0?bn.utcInstance:new bn(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new bn(v3(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Vy(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Vy(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return Vy(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class rfe extends Wm{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function dh(e,t){if(jt(e)||e===null)return t;if(e instanceof Wm)return e;if(L0e(e)){const i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?bn.utcInstance:bn.parseSpecifier(i)||eu.create(e)}else return vp(e)?bn.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new rfe(e)}let tk=()=>Date.now(),ik="system",rk=null,nk=null,sk=null,ok;class br{static get now(){return tk}static set now(t){tk=t}static set defaultZone(t){ik=t}static get defaultZone(){return dh(ik,yE.instance)}static get defaultLocale(){return rk}static set defaultLocale(t){rk=t}static get defaultNumberingSystem(){return nk}static set defaultNumberingSystem(t){nk=t}static get defaultOutputCalendar(){return sk}static set defaultOutputCalendar(t){sk=t}static get throwOnInvalid(){return ok}static set throwOnInvalid(t){ok=t}static resetCaches(){Li.resetCache(),eu.resetCache()}}let ak={};function nfe(e,t={}){const i=JSON.stringify([e,t]);let r=ak[i];return r||(r=new Intl.ListFormat(e,t),ak[i]=r),r}let p6={};function d6(e,t={}){const i=JSON.stringify([e,t]);let r=p6[i];return r||(r=new Intl.DateTimeFormat(e,t),p6[i]=r),r}let f6={};function sfe(e,t={}){const i=JSON.stringify([e,t]);let r=f6[i];return r||(r=new Intl.NumberFormat(e,t),f6[i]=r),r}let y6={};function ofe(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let h=y6[s];return h||(h=new Intl.RelativeTimeFormat(e,t),y6[s]=h),h}let hy=null;function afe(){return hy||(hy=new Intl.DateTimeFormat().resolvedOptions().locale,hy)}function lfe(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let i;const r=e.substring(0,t);try{i=d6(e).resolvedOptions()}catch{i=d6(r).resolvedOptions()}const{numberingSystem:s,calendar:h}=i;return[r,s,h]}}function ufe(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function hfe(e){const t=[];for(let i=1;i<=12;i++){const r=mt.utc(2016,i,1);t.push(e(r))}return t}function cfe(e){const t=[];for(let i=1;i<=7;i++){const r=mt.utc(2016,11,13+i);t.push(e(r))}return t}function Qg(e,t,i,r,s){const h=e.listingMode(i);return h==="error"?null:h==="en"?r(t):s(t)}function pfe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class dfe{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:h,...y}=r;if(!i||Object.keys(y).length>0){const f={useGrouping:!1,...r};r.padTo>0&&(f.minimumIntegerDigits=r.padTo),this.inf=sfe(t,f)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):dE(t,3);return ar(i,this.padTo)}}}class ffe{constructor(t,i,r){this.opts=r;let s;if(t.zone.isUniversal){const y=-1*(t.offset/60),f=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&eu.create(f).valid?(s=f,this.dt=t):(s="UTC",r.timeZoneName?this.dt=t:this.dt=t.offset===0?t:mt.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,s=t.zone.name);const h={...this.opts};s&&(h.timeZone=s),this.dtf=d6(i,h)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class yfe{constructor(t,i,r){this.opts={style:"long",...r},!i&&yz()&&(this.rtf=ofe(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):Z0e(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class Li{static fromOpts(t){return Li.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,s=!1){const h=t||br.defaultLocale,y=h||(s?"en-US":afe()),f=i||br.defaultNumberingSystem,w=r||br.defaultOutputCalendar;return new Li(y,f,w,h)}static resetCache(){hy=null,p6={},f6={},y6={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return Li.create(t,i,r)}constructor(t,i,r,s){const[h,y,f]=lfe(t);this.locale=h,this.numberingSystem=i||y||null,this.outputCalendar=r||f||null,this.intl=ufe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=pfe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Li.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,r=!0){return Qg(this,t,r,wz,()=>{const s=i?{month:t,day:"numeric"}:{month:t},h=i?"format":"standalone";return this.monthsCache[h][t]||(this.monthsCache[h][t]=hfe(y=>this.extract(y,s,"month"))),this.monthsCache[h][t]})}weekdays(t,i=!1,r=!0){return Qg(this,t,r,Sz,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},h=i?"format":"standalone";return this.weekdaysCache[h][t]||(this.weekdaysCache[h][t]=cfe(y=>this.extract(y,s,"weekday"))),this.weekdaysCache[h][t]})}meridiems(t=!0){return Qg(this,void 0,t,()=>Mz,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[mt.utc(2016,11,13,9),mt.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Qg(this,t,i,Ez,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[mt.utc(-40,1,1),mt.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),h=s.formatToParts(),y=h.find(f=>f.type.toLowerCase()===r);return y?y.value:null}numberFormatter(t={}){return new dfe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new ffe(t,this.intl,i)}relFormatter(t={}){return new yfe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return nfe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function Tf(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function $f(...e){return t=>e.reduce(([i,r,s],h)=>{const[y,f,w]=h(t,s);return[{...i,...y},f||r,w]},[{},null,1]).slice(0,2)}function If(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function Tz(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=hh(t[i+s]);return[r,null,i+s]}}const $z=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,mfe=`(?:${$z.source}?(?:\\[(${vz.source})\\])?)?`,mE=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Iz=RegExp(`${mE.source}${mfe}`),gE=RegExp(`(?:T${Iz.source})?`),gfe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vfe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,bfe=/(\d{4})-?(\d{3})/,wfe=Tz("weekYear","weekNumber","weekDay"),_fe=Tz("year","ordinal"),xfe=/(\d{4})-(\d\d)-(\d\d)/,Az=RegExp(`${mE.source} ?(?:${$z.source}|(${vz.source}))?`),Sfe=RegExp(`(?: ${Az.source})?`);function T0(e,t,i){const r=e[t];return jt(r)?i:hh(r)}function Mfe(e,t){return[{year:T0(e,t),month:T0(e,t+1,1),day:T0(e,t+2,1)},null,t+3]}function Af(e,t){return[{hours:T0(e,t,0),minutes:T0(e,t+1,0),seconds:T0(e,t+2,0),milliseconds:pE(e[t+3])},null,t+4]}function Jm(e,t){const i=!e[t]&&!e[t+1],r=v3(e[t+1],e[t+2]),s=i?null:bn.instance(r);return[{},s,t+3]}function Km(e,t){const i=e[t]?eu.create(e[t]):null;return[{},i,t+1]}const Efe=RegExp(`^T?${mE.source}$`),Tfe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function $fe(e){const[t,i,r,s,h,y,f,w,S]=e,E=t[0]==="-",A=w&&w[0]==="-",P=(N,F=!1)=>N!==void 0&&(F||N&&E)?-N:N;return[{years:P(Kh(i)),months:P(Kh(r)),weeks:P(Kh(s)),days:P(Kh(h)),hours:P(Kh(y)),minutes:P(Kh(f)),seconds:P(Kh(w),w==="-0"),milliseconds:P(pE(S),A)}]}const Ife={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function vE(e,t,i,r,s,h,y){const f={year:t.length===2?c6(hh(t)):hh(t),month:bz.indexOf(i)+1,day:hh(r),hour:hh(s),minute:hh(h)};return y&&(f.second=hh(y)),e&&(f.weekday=e.length>3?_z.indexOf(e)+1:xz.indexOf(e)+1),f}const Afe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function kfe(e){const[,t,i,r,s,h,y,f,w,S,E,A]=e,P=vE(t,s,r,i,h,y,f);let N;return w?N=Ife[w]:S?N=0:N=v3(E,A),[P,new bn(N)]}function Cfe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Ofe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Pfe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Nfe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function lk(e){const[,t,i,r,s,h,y,f]=e;return[vE(t,s,r,i,h,y,f),bn.utcInstance]}function Rfe(e){const[,t,i,r,s,h,y,f]=e;return[vE(t,f,i,r,s,h,y),bn.utcInstance]}const Lfe=Tf(gfe,gE),Ffe=Tf(vfe,gE),jfe=Tf(bfe,gE),Dfe=Tf(Iz),kz=$f(Mfe,Af,Jm,Km),zfe=$f(wfe,Af,Jm,Km),Vfe=$f(_fe,Af,Jm,Km),Gfe=$f(Af,Jm,Km);function Ufe(e){return If(e,[Lfe,kz],[Ffe,zfe],[jfe,Vfe],[Dfe,Gfe])}function qfe(e){return If(Cfe(e),[Afe,kfe])}function Bfe(e){return If(e,[Ofe,lk],[Pfe,lk],[Nfe,Rfe])}function Hfe(e){return If(e,[Tfe,$fe])}const Wfe=$f(Af);function Jfe(e){return If(e,[Efe,Wfe])}const Kfe=Tf(xfe,Sfe),Yfe=Tf(Az),Zfe=$f(Af,Jm,Km);function Xfe(e){return If(e,[Kfe,kz],[Yfe,Zfe])}const Qfe="Invalid Duration",Cz={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},e1e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Cz},ks=146097/400,ed=146097/4800,t1e={years:{quarters:4,months:12,weeks:ks/7,days:ks,hours:ks*24,minutes:ks*24*60,seconds:ks*24*60*60,milliseconds:ks*24*60*60*1e3},quarters:{months:3,weeks:ks/28,days:ks/4,hours:ks*24/4,minutes:ks*24*60/4,seconds:ks*24*60*60/4,milliseconds:ks*24*60*60*1e3/4},months:{weeks:ed/7,days:ed,hours:ed*24,minutes:ed*24*60,seconds:ed*24*60*60,milliseconds:ed*24*60*60*1e3},...Cz},Oc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],i1e=Oc.slice(0).reverse();function Yh(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new Vt(r)}function r1e(e){return e<0?Math.floor(e):Math.ceil(e)}function Oz(e,t,i,r,s){const h=e[s][i],y=t[i]/h,f=Math.sign(y)===Math.sign(r[s]),w=!f&&r[s]!==0&&Math.abs(y)<=1?r1e(y):Math.trunc(y);r[s]+=w,t[i]-=w*h}function n1e(e,t){i1e.reduce((i,r)=>jt(t[r])?i:(i&&Oz(e,t,i,t,r),r),null)}class Vt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||Li.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i?t1e:e1e,this.isLuxonDuration=!0}static fromMillis(t,i){return Vt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new Hs(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Vt({values:t2(t,Vt.normalizeUnit),loc:Li.fromObject(i),conversionAccuracy:i.conversionAccuracy})}static fromDurationLike(t){if(vp(t))return Vt.fromMillis(t);if(Vt.isDuration(t))return t;if(typeof t=="object")return Vt.fromObject(t);throw new Hs(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=Hfe(t);return r?Vt.fromObject(r,i):Vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=Jfe(t);return r?Vt.fromObject(r,i):Vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new Hs("need to specify a reason the Duration is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(br.throwOnInvalid)throw new P0e(r);return new Vt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new KD(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Bn.create(this.loc,r).formatDurationFromString(this,t):Qfe}toHuman(t={}){const i=Oc.map(r=>{const s=this.values[r];return jt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=dE(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let h=r.toFormat(s);return t.includePrefix&&(h="T"+h),h}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Vt.fromDurationLike(t),r={};for(const s of Oc)(U0(i.values,s)||U0(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Yh(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Vt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=gz(t(this.values[r],r));return Yh(this,{values:i},!0)}get(t){return this[Vt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...t2(t,Vt.normalizeUnit)};return Yh(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i}),h={loc:s};return r&&(h.conversionAccuracy=r),Yh(this,h)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return n1e(this.matrix,t),Yh(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>Vt.normalizeUnit(y));const i={},r={},s=this.toObject();let h;for(const y of Oc)if(t.indexOf(y)>=0){h=y;let f=0;for(const S in r)f+=this.matrix[S][y]*r[S],r[S]=0;vp(s[y])&&(f+=s[y]);const w=Math.trunc(f);i[y]=w,r[y]=(f*1e3-w*1e3)/1e3;for(const S in s)Oc.indexOf(S)>Oc.indexOf(y)&&Oz(this.matrix,s,S,i,y)}else vp(s[y])&&(r[y]=s[y]);for(const y in r)r[y]!==0&&(i[h]+=y===h?r[y]:r[y]/this.matrix[h][y]);return Yh(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Yh(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Oc)if(!i(this.values[r],t.values[r]))return!1;return!0}}const a1="Invalid Interval";function s1e(e,t){return!e||!e.isValid?Bi.invalid("missing or invalid start"):!t||!t.isValid?Bi.invalid("missing or invalid end"):t<e?Bi.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Bi{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new Hs("need to specify a reason the Interval is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(br.throwOnInvalid)throw new O0e(r);return new Bi({invalid:r})}static fromDateTimes(t,i){const r=h1(t),s=h1(i),h=s1e(r,s);return h==null?new Bi({start:r,end:s}):h}static after(t,i){const r=Vt.fromDurationLike(i),s=h1(t);return Bi.fromDateTimes(s,s.plus(r))}static before(t,i){const r=Vt.fromDurationLike(i),s=h1(t);return Bi.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let h,y;try{h=mt.fromISO(r,i),y=h.isValid}catch{y=!1}let f,w;try{f=mt.fromISO(s,i),w=f.isValid}catch{w=!1}if(y&&w)return Bi.fromDateTimes(h,f);if(y){const S=Vt.fromISO(s,i);if(S.isValid)return Bi.after(h,S)}else if(w){const S=Vt.fromISO(r,i);if(S.isValid)return Bi.before(f,S)}}return Bi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Bi.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(h1).filter(y=>this.contains(y)).sort(),r=[];let{s}=this,h=0;for(;s<this.e;){const y=i[h]||this.e,f=+y>+this.e?this.e:y;r.push(Bi.fromDateTimes(s,f)),s=f,h+=1}return r}splitBy(t){const i=Vt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,h;const y=[];for(;r<this.e;){const f=this.start.plus(i.mapUnits(w=>w*s));h=+f>+this.e?this.e:f,y.push(Bi.fromDateTimes(r,h)),r=h,s+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:Bi.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Bi.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,h)=>s.s-h.s).reduce(([s,h],y)=>h?h.overlaps(y)||h.abutsStart(y)?[s,h.union(y)]:[s.concat([h]),y]:[s,y],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],h=t.map(w=>[{time:w.s,type:"s"},{time:w.e,type:"e"}]),y=Array.prototype.concat(...h),f=y.sort((w,S)=>w.time-S.time);for(const w of f)r+=w.type==="s"?1:-1,r===1?i=w.time:(i&&+i!=+w.time&&s.push(Bi.fromDateTimes(i,w.time)),i=null);return Bi.merge(s)}difference(...t){return Bi.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:a1}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:a1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:a1}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:a1}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:a1}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Vt.invalid(this.invalidReason)}mapEndpoints(t){return Bi.fromDateTimes(t(this.s),t(this.e))}}class ev{static hasDST(t=br.defaultZone){const i=mt.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return eu.isValidZone(t)}static normalizeZone(t){return dh(t,br.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Li.create(i,r,h)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:h="gregory"}={}){return(s||Li.create(i,r,h)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Li.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Li.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Li.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return Li.create(i,null,"gregory").eras(t)}static features(){return{relative:yz()}}}function uk(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Vt.fromMillis(r).as("days"))}function o1e(e,t,i){const r=[["years",(f,w)=>w.year-f.year],["quarters",(f,w)=>w.quarter-f.quarter],["months",(f,w)=>w.month-f.month+(w.year-f.year)*12],["weeks",(f,w)=>{const S=uk(f,w);return(S-S%7)/7}],["days",uk]],s={};let h,y;for(const[f,w]of r)if(i.indexOf(f)>=0){h=f;let S=w(e,t);y=e.plus({[f]:S}),y>t?(e=e.plus({[f]:S-1}),S-=1):e=y,s[f]=S}return[e,s,y,h]}function a1e(e,t,i,r){let[s,h,y,f]=o1e(e,t,i);const w=t-s,S=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);S.length===0&&(y<t&&(y=s.plus({[f]:1})),y!==s&&(h[f]=(h[f]||0)+w/(y-s)));const E=Vt.fromObject(h,r);return S.length>0?Vt.fromMillis(w,r).shiftTo(...S).plus(E):E}const bE={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},hk={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},l1e=bE.hanidec.replace(/[\[|\]]/g,"").split("");function u1e(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(bE.hanidec)!==-1)t+=l1e.indexOf(e[i]);else for(const s in hk){const[h,y]=hk[s];r>=h&&r<=y&&(t+=r-h)}}return parseInt(t,10)}else return t}function ho({numberingSystem:e},t=""){return new RegExp(`${bE[e||"latn"]}${t}`)}const h1e="missing Intl.DateTimeFormat.formatToParts support";function Yt(e,t=i=>i){return{regex:e,deser:([i])=>t(u1e(i))}}const c1e=String.fromCharCode(160),Pz=`[ ${c1e}]`,Nz=new RegExp(Pz,"g");function p1e(e){return e.replace(/\./g,"\\.?").replace(Nz,Pz)}function ck(e){return e.replace(/\./g,"").replace(Nz," ").toLowerCase()}function co(e,t){return e===null?null:{regex:RegExp(e.map(p1e).join("|")),deser:([i])=>e.findIndex(r=>ck(i)===ck(r))+t}}function pk(e,t){return{regex:e,deser:([,i,r])=>v3(i,r),groups:t}}function f9(e){return{regex:e,deser:([t])=>t}}function d1e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f1e(e,t){const i=ho(t),r=ho(t,"{2}"),s=ho(t,"{3}"),h=ho(t,"{4}"),y=ho(t,"{6}"),f=ho(t,"{1,2}"),w=ho(t,"{1,3}"),S=ho(t,"{1,6}"),E=ho(t,"{1,9}"),A=ho(t,"{2,4}"),P=ho(t,"{4,6}"),N=U=>({regex:RegExp(d1e(U.val)),deser:([X])=>X,literal:!0}),V=(U=>{if(e.literal)return N(U);switch(U.val){case"G":return co(t.eras("short",!1),0);case"GG":return co(t.eras("long",!1),0);case"y":return Yt(S);case"yy":return Yt(A,c6);case"yyyy":return Yt(h);case"yyyyy":return Yt(P);case"yyyyyy":return Yt(y);case"M":return Yt(f);case"MM":return Yt(r);case"MMM":return co(t.months("short",!0,!1),1);case"MMMM":return co(t.months("long",!0,!1),1);case"L":return Yt(f);case"LL":return Yt(r);case"LLL":return co(t.months("short",!1,!1),1);case"LLLL":return co(t.months("long",!1,!1),1);case"d":return Yt(f);case"dd":return Yt(r);case"o":return Yt(w);case"ooo":return Yt(s);case"HH":return Yt(r);case"H":return Yt(f);case"hh":return Yt(r);case"h":return Yt(f);case"mm":return Yt(r);case"m":return Yt(f);case"q":return Yt(f);case"qq":return Yt(r);case"s":return Yt(f);case"ss":return Yt(r);case"S":return Yt(w);case"SSS":return Yt(s);case"u":return f9(E);case"uu":return f9(f);case"uuu":return Yt(i);case"a":return co(t.meridiems(),0);case"kkkk":return Yt(h);case"kk":return Yt(A,c6);case"W":return Yt(f);case"WW":return Yt(r);case"E":case"c":return Yt(i);case"EEE":return co(t.weekdays("short",!1,!1),1);case"EEEE":return co(t.weekdays("long",!1,!1),1);case"ccc":return co(t.weekdays("short",!0,!1),1);case"cccc":return co(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return pk(new RegExp(`([+-]${f.source})(?::(${r.source}))?`),2);case"ZZZ":return pk(new RegExp(`([+-]${f.source})(${r.source})?`),2);case"z":return f9(/[a-z_+-/]{1,256}?/i);default:return N(U)}})(e)||{invalidReason:h1e};return V.token=e,V}const y1e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function m1e(e,t,i){const{type:r,value:s}=e;if(r==="literal")return{literal:!0,val:s};const h=i[r];let y=y1e[r];if(typeof y=="object"&&(y=y[h]),y)return{literal:!1,val:y}}function g1e(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function v1e(e,t,i){const r=e.match(t);if(r){const s={};let h=1;for(const y in i)if(U0(i,y)){const f=i[y],w=f.groups?f.groups+1:1;!f.literal&&f.token&&(s[f.token.val[0]]=f.deser(r.slice(h,h+w))),h+=w}return[r,s]}else return[r,{}]}function b1e(e){const t=h=>{switch(h){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return jt(e.z)||(i=eu.create(e.z)),jt(e.Z)||(i||(i=new bn(e.Z)),r=e.Z),jt(e.q)||(e.M=(e.q-1)*3+1),jt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),jt(e.u)||(e.S=pE(e.u)),[Object.keys(e).reduce((h,y)=>{const f=t(y);return f&&(h[f]=e[y]),h},{}),i,r]}let y9=null;function w1e(){return y9||(y9=mt.fromMillis(1555555555555)),y9}function _1e(e,t){if(e.literal)return e;const i=Bn.macroTokenToFormatOpts(e.val);if(!i)return e;const h=Bn.create(t,i).formatDateTimeParts(w1e()).map(y=>m1e(y,t,i));return h.includes(void 0)?e:h}function x1e(e,t){return Array.prototype.concat(...e.map(i=>_1e(i,t)))}function Rz(e,t,i){const r=x1e(Bn.parseFormat(i),e),s=r.map(y=>f1e(y,e)),h=s.find(y=>y.invalidReason);if(h)return{input:t,tokens:r,invalidReason:h.invalidReason};{const[y,f]=g1e(s),w=RegExp(y,"i"),[S,E]=v1e(t,w,f),[A,P,N]=E?b1e(E):[null,null,void 0];if(U0(E,"a")&&U0(E,"H"))throw new uy("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:w,rawMatches:S,matches:E,result:A,zone:P,specificOffset:N}}}function S1e(e,t,i){const{result:r,zone:s,specificOffset:h,invalidReason:y}=Rz(e,t,i);return[r,s,h,y]}const Lz=[0,31,59,90,120,151,181,212,243,273,304,334],Fz=[0,31,60,91,121,152,182,213,244,274,305,335];function Ks(e,t){return new Uo("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function jz(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function Dz(e,t,i){return i+(Hm(e)?Fz:Lz)[t-1]}function zz(e,t){const i=Hm(e)?Fz:Lz,r=i.findIndex(h=>h<t),s=t-i[r];return{month:r+1,day:s}}function m6(e){const{year:t,month:i,day:r}=e,s=Dz(t,i,r),h=jz(t,i,r);let y=Math.floor((s-h+10)/7),f;return y<1?(f=t-1,y=e2(f)):y>e2(t)?(f=t+1,y=1):f=t,{weekYear:f,weekNumber:y,weekday:h,...b3(e)}}function dk(e){const{weekYear:t,weekNumber:i,weekday:r}=e,s=jz(t,1,4),h=zy(t);let y=i*7+r-s-3,f;y<1?(f=t-1,y+=zy(f)):y>h?(f=t+1,y-=zy(t)):f=t;const{month:w,day:S}=zz(f,y);return{year:f,month:w,day:S,...b3(e)}}function m9(e){const{year:t,month:i,day:r}=e,s=Dz(t,i,r);return{year:t,ordinal:s,...b3(e)}}function fk(e){const{year:t,ordinal:i}=e,{month:r,day:s}=zz(t,i);return{year:t,month:r,day:s,...b3(e)}}function M1e(e){const t=g3(e.weekYear),i=Ul(e.weekNumber,1,e2(e.weekYear)),r=Ul(e.weekday,1,7);return t?i?r?!1:Ks("weekday",e.weekday):Ks("week",e.week):Ks("weekYear",e.weekYear)}function E1e(e){const t=g3(e.year),i=Ul(e.ordinal,1,zy(e.year));return t?i?!1:Ks("ordinal",e.ordinal):Ks("year",e.year)}function Vz(e){const t=g3(e.year),i=Ul(e.month,1,12),r=Ul(e.day,1,Qw(e.year,e.month));return t?i?r?!1:Ks("day",e.day):Ks("month",e.month):Ks("year",e.year)}function Gz(e){const{hour:t,minute:i,second:r,millisecond:s}=e,h=Ul(t,0,23)||t===24&&i===0&&r===0&&s===0,y=Ul(i,0,59),f=Ul(r,0,59),w=Ul(s,0,999);return h?y?f?w?!1:Ks("millisecond",s):Ks("second",r):Ks("minute",i):Ks("hour",t)}const g9="Invalid DateTime",yk=864e13;function tv(e){return new Uo("unsupported zone",`the zone "${e.name}" is not supported`)}function v9(e){return e.weekData===null&&(e.weekData=m6(e.c)),e.weekData}function l1(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new mt({...i,...t,old:i})}function Uz(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const h=i.offset(r);return s===h?[r,s]:[e-Math.min(s,h)*60*1e3,Math.max(s,h)]}function mk(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function kb(e,t,i){return Uz(fE(e),t,i)}function gk(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,h={...e.c,year:r,month:s,day:Math.min(e.c.day,Qw(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},y=Vt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),f=fE(h);let[w,S]=Uz(f,i,e.zone);return y!==0&&(w+=y,S=e.zone.offset(w)),{ts:w,o:S}}function u1(e,t,i,r,s,h){const{setZone:y,zone:f}=i;if(e&&Object.keys(e).length!==0){const w=t||f,S=mt.fromObject(e,{...i,zone:w,specificOffset:h});return y?S:S.setZone(f)}else return mt.invalid(new Uo("unparsable",`the input "${s}" can't be parsed as ${r}`))}function iv(e,t,i=!0){return e.isValid?Bn.create(Li.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function b9(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=ar(e.c.year,i?6:4),t?(r+="-",r+=ar(e.c.month),r+="-",r+=ar(e.c.day)):(r+=ar(e.c.month),r+=ar(e.c.day)),r}function vk(e,t,i,r,s,h){let y=ar(e.c.hour);return t?(y+=":",y+=ar(e.c.minute),(e.c.second!==0||!i)&&(y+=":")):y+=ar(e.c.minute),(e.c.second!==0||!i)&&(y+=ar(e.c.second),(e.c.millisecond!==0||!r)&&(y+=".",y+=ar(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!h?y+="Z":e.o<0?(y+="-",y+=ar(Math.trunc(-e.o/60)),y+=":",y+=ar(Math.trunc(-e.o%60))):(y+="+",y+=ar(Math.trunc(e.o/60)),y+=":",y+=ar(Math.trunc(e.o%60)))),h&&(y+="["+e.zone.ianaName+"]"),y}const qz={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},T1e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},$1e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Bz=["year","month","day","hour","minute","second","millisecond"],I1e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],A1e=["year","ordinal","hour","minute","second","millisecond"];function bk(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new KD(e);return t}function wk(e,t){const i=dh(t.zone,br.defaultZone),r=Li.fromObject(t),s=br.now();let h,y;if(jt(e.year))h=s;else{for(const S of Bz)jt(e[S])&&(e[S]=qz[S]);const f=Vz(e)||Gz(e);if(f)return mt.invalid(f);const w=i.offset(s);[h,y]=kb(e,w,i)}return new mt({ts:h,zone:i,loc:r,o:y})}function _k(e,t,i){const r=jt(i.round)?!0:i.round,s=(y,f)=>(y=dE(y,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,f)),h=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return s(h(i.unit),i.unit);for(const y of i.units){const f=h(y);if(Math.abs(f)>=1)return s(f,y)}return s(e>t?-0:0,i.units[i.units.length-1])}function xk(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class mt{constructor(t){const i=t.zone||br.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new Uo("invalid input"):null)||(i.isValid?null:tv(i));this.ts=jt(t.ts)?br.now():t.ts;let s=null,h=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,h]=[t.old.c,t.old.o];else{const f=i.offset(this.ts);s=mk(this.ts,f),r=Number.isNaN(s.year)?new Uo("invalid input"):null,s=r?null:s,h=r?null:f}this._zone=i,this.loc=t.loc||Li.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=h,this.isLuxonDateTime=!0}static now(){return new mt({})}static local(){const[t,i]=xk(arguments),[r,s,h,y,f,w,S]=i;return wk({year:r,month:s,day:h,hour:y,minute:f,second:w,millisecond:S},t)}static utc(){const[t,i]=xk(arguments),[r,s,h,y,f,w,S]=i;return t.zone=bn.utcInstance,wk({year:r,month:s,day:h,hour:y,minute:f,second:w,millisecond:S},t)}static fromJSDate(t,i={}){const r=F0e(t)?t.valueOf():NaN;if(Number.isNaN(r))return mt.invalid("invalid input");const s=dh(i.zone,br.defaultZone);return s.isValid?new mt({ts:r,zone:s,loc:Li.fromObject(i)}):mt.invalid(tv(s))}static fromMillis(t,i={}){if(vp(t))return t<-yk||t>yk?mt.invalid("Timestamp out of range"):new mt({ts:t,zone:dh(i.zone,br.defaultZone),loc:Li.fromObject(i)});throw new Hs(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(vp(t))return new mt({ts:t*1e3,zone:dh(i.zone,br.defaultZone),loc:Li.fromObject(i)});throw new Hs("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=dh(i.zone,br.defaultZone);if(!r.isValid)return mt.invalid(tv(r));const s=br.now(),h=jt(i.specificOffset)?r.offset(s):i.specificOffset,y=t2(t,bk),f=!jt(y.ordinal),w=!jt(y.year),S=!jt(y.month)||!jt(y.day),E=w||S,A=y.weekYear||y.weekNumber,P=Li.fromObject(i);if((E||f)&&A)throw new uy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&f)throw new uy("Can't mix ordinal dates with month/day");const N=A||y.weekday&&!E;let F,V,U=mk(s,h);N?(F=I1e,V=T1e,U=m6(U)):f?(F=A1e,V=$1e,U=m9(U)):(F=Bz,V=qz);let X=!1;for(const Ee of F){const Oe=y[Ee];jt(Oe)?X?y[Ee]=V[Ee]:y[Ee]=U[Ee]:X=!0}const re=N?M1e(y):f?E1e(y):Vz(y),he=re||Gz(y);if(he)return mt.invalid(he);const pe=N?dk(y):f?fk(y):y,[ae,le]=kb(pe,h,r),Te=new mt({ts:ae,zone:r,o:le,loc:P});return y.weekday&&E&&t.weekday!==Te.weekday?mt.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${Te.toISO()}`):Te}static fromISO(t,i={}){const[r,s]=Ufe(t);return u1(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=qfe(t);return u1(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=Bfe(t);return u1(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(jt(t)||jt(i))throw new Hs("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:h=null}=r,y=Li.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0}),[f,w,S,E]=S1e(y,t,i);return E?mt.invalid(E):u1(f,w,r,`format ${i}`,t,S)}static fromString(t,i,r={}){return mt.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=Xfe(t);return u1(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new Hs("need to specify a reason the DateTime is invalid");const r=t instanceof Uo?t:new Uo(t,i);if(br.throwOnInvalid)throw new C0e(r);return new mt({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?v9(this).weekYear:NaN}get weekNumber(){return this.isValid?v9(this).weekNumber:NaN}get weekday(){return this.isValid?v9(this).weekday:NaN}get ordinal(){return this.isValid?m9(this.c).ordinal:NaN}get monthShort(){return this.isValid?ev.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ev.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ev.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ev.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Hm(this.year)}get daysInMonth(){return Qw(this.year,this.month)}get daysInYear(){return this.isValid?zy(this.year):NaN}get weeksInWeekYear(){return this.isValid?e2(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=Bn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(bn.instance(t),i)}toLocal(){return this.setZone(br.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=dh(t,br.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const h=t.offset(this.ts),y=this.toObject();[s]=kb(y,h,t)}return l1(this,{ts:s,zone:t})}else return mt.invalid(tv(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return l1(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=t2(t,bk),r=!jt(i.weekYear)||!jt(i.weekNumber)||!jt(i.weekday),s=!jt(i.ordinal),h=!jt(i.year),y=!jt(i.month)||!jt(i.day),f=h||y,w=i.weekYear||i.weekNumber;if((f||s)&&w)throw new uy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&s)throw new uy("Can't mix ordinal dates with month/day");let S;r?S=dk({...m6(this.c),...i}):jt(i.ordinal)?(S={...this.toObject(),...i},jt(i.day)&&(S.day=Math.min(Qw(S.year,S.month),S.day))):S=fk({...m9(this.c),...i});const[E,A]=kb(S,this.o,this.zone);return l1(this,{ts:E,o:A})}plus(t){if(!this.isValid)return this;const i=Vt.fromDurationLike(t);return l1(this,gk(this,i))}minus(t){if(!this.isValid)return this;const i=Vt.fromDurationLike(t).negate();return l1(this,gk(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=Vt.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Bn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):g9}toLocaleString(t=h6,i={}){return this.isValid?Bn.create(this.loc.clone(i),t).formatDateTime(this):g9}toLocaleParts(t={}){return this.isValid?Bn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:h=!1}={}){if(!this.isValid)return null;const y=t==="extended";let f=b9(this,y);return f+="T",f+=vk(this,y,i,r,s,h),f}toISODate({format:t="extended"}={}){return this.isValid?b9(this,t==="extended"):null}toISOWeekDate(){return iv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:h=!1,format:y="extended"}={}){return this.isValid?(s?"T":"")+vk(this,y==="extended",i,t,r,h):null}toRFC2822(){return iv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return iv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?b9(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),iv(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():g9}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Vt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},h=j0e(i).map(Vt.normalizeUnit),y=t.valueOf()>this.valueOf(),f=y?this:t,w=y?t:this,S=a1e(f,w,h,s);return y?S.negate():S}diffNow(t="milliseconds",i={}){return this.diff(mt.now(),t,i)}until(t){return this.isValid?Bi.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||mt.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],h=t.unit;return Array.isArray(t.unit)&&(s=t.unit,h=void 0),_k(i,this.plus(r),{...t,numeric:"always",units:s,unit:h})}toRelativeCalendar(t={}){return this.isValid?_k(t.base||mt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(mt.isDateTime))throw new Hs("min requires all arguments be DateTimes");return QA(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(mt.isDateTime))throw new Hs("max requires all arguments be DateTimes");return QA(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:h=null}=r,y=Li.fromOpts({locale:s,numberingSystem:h,defaultToEN:!0});return Rz(y,t,i)}static fromStringExplain(t,i,r={}){return mt.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return h6}static get DATE_MED(){return YD}static get DATE_MED_WITH_WEEKDAY(){return N0e}static get DATE_FULL(){return ZD}static get DATE_HUGE(){return XD}static get TIME_SIMPLE(){return QD}static get TIME_WITH_SECONDS(){return ez}static get TIME_WITH_SHORT_OFFSET(){return tz}static get TIME_WITH_LONG_OFFSET(){return iz}static get TIME_24_SIMPLE(){return rz}static get TIME_24_WITH_SECONDS(){return nz}static get TIME_24_WITH_SHORT_OFFSET(){return sz}static get TIME_24_WITH_LONG_OFFSET(){return oz}static get DATETIME_SHORT(){return az}static get DATETIME_SHORT_WITH_SECONDS(){return lz}static get DATETIME_MED(){return uz}static get DATETIME_MED_WITH_SECONDS(){return hz}static get DATETIME_MED_WITH_WEEKDAY(){return R0e}static get DATETIME_FULL(){return cz}static get DATETIME_FULL_WITH_SECONDS(){return pz}static get DATETIME_HUGE(){return dz}static get DATETIME_HUGE_WITH_SECONDS(){return fz}}function h1(e){if(mt.isDateTime(e))return e;if(e&&e.valueOf&&vp(e.valueOf()))return mt.fromJSDate(e);if(e&&typeof e=="object")return mt.fromObject(e);throw new Hs(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const w9={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function Hz(e){e||(e=bs());let t=e in w9;if(!t){const h=e.split("-");h.length>1&&h[0]in w9&&(e=h[0],t=!0),t||(e="en")}const[i,r,s="#,##0.###"]=w9[e];return{decimal:i,group:r,pattern:s}}function k1e(e,t){const i=Hz((t={...t}).locale);t.customs=i;const r=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:C1e(e,r,t)}const Wz=/[#0,]*[#0](?:\.0*#*)?/;function C1e(e,t,i){const r=(i=i||{}).customs.group,s=i.customs.decimal,h=t.split(";"),y=h[0];if((t=h[e<0?1:0]||"-"+y).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const f=Wz,w=y.match(f);if(!w)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(f,O1e(e,w[0],{decimal:s,group:r,places:i.places,round:i.round}))}function O1e(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const r=t.split("."),s=typeof i.places=="string"&&i.places.indexOf(",");let h=i.places;s?h=i.places.substring(s+1):h>=0||(h=(r[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(h))));const y=String(Math.abs(e)).split("."),f=y[1]||"";if(r[1]||i.places){s&&(i.places=i.places.substring(0,s));const F=i.places!==void 0?i.places:r[1]&&r[1].lastIndexOf("0")+1;F>f.length&&(y[1]=f.padEnd(Number(F),"0")),h<f.length&&(y[1]=f.substr(0,Number(h)))}else y[1]&&y.pop();const w=r[0].replace(",","");let S=w.indexOf("0");S!==-1&&(S=w.length-S,S>y[0].length&&(y[0]=y[0].padStart(S,"0")),w.includes("#")||(y[0]=y[0].substr(y[0].length-S)));let E,A,P=r[0].lastIndexOf(",");if(P!==-1){E=r[0].length-P-1;const F=r[0].substr(0,P);P=F.lastIndexOf(","),P!==-1&&(A=F.length-P-1)}const N=[];for(let F=y[0];F;){const V=F.length-E;N.push(V>0?F.substr(V):F),F=V>0?F.slice(0,V):"",A&&(E=A,A=void 0)}return y[0]=N.reverse().join(i.group||","),y.join(i.decimal||".")}function P1e(e){const t=Hz((e=e||{}).locale),i=e.pattern||t.pattern,r=t.group,s=t.decimal;let h=1;if(i.includes("%"))h/=100;else if(i.includes("\u2030"))h/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const y=i.split(";");return y.length===1&&y.push("-"+y[0]),{regexp:gm(y,w=>(w="(?:"+W6(w,".")+")").replace(Wz,S=>{const E={signed:!1,separator:e.strict?r:[r,""],fractional:e.fractional,decimal:s,exponent:!1},A=S.split(".");let P=e.places;A.length===1&&h!==1&&(A[1]="###"),A.length===1||P===0?E.fractional=!1:(P===void 0&&(P=e.pattern?A[1].lastIndexOf("0")+1:1/0),P&&e.fractional==null&&(E.fractional=!0),!e.places&&P<A[1].length&&(P+=","+A[1].length),E.places=P);const N=A[0].split(",");return N.length>1&&(E.groupSize=N.pop().length,N.length>1&&(E.groupSize2=N.pop().length)),"("+R1e(E)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:s,factor:h}}function N1e(e,t){const i=P1e(t),r=new RegExp("^"+i.regexp+"$").exec(e);if(!r)return NaN;let s=r[1];if(!r[1]){if(!r[2])return NaN;s=r[2],i.factor*=-1}return s=s.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(s)*i.factor}function R1e(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=Sk(e),i=gm(e.fractional,s=>{let h="";return s&&e.places!==0&&(h="\\"+e.decimal,e.places===1/0?h="(?:"+h+"\\d+)?":h+="\\d{"+e.places+"}"),h},!0);let r=t+i;return i&&(r="(?:(?:"+r+")|(?:"+i+"))"),r+gm(e.exponent,s=>s?"([eE]"+Sk({signed:e.eSigned})+")":"")}function Sk(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",gm(e.signed,t=>t?"[-+]":"",!0)+gm(e.separator,t=>{if(!t)return"(?:\\d+)";(t=W6(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,r=e.groupSize2;if(r){const s="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+i+"})";return i-r>0?"(?:"+s+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":s}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const gm=(e,t,i)=>{if(!(e instanceof Array))return t(e);const r=[];for(let s=0;s<e.length;s++)r.push(t(e[s]));return L1e(r.join("|"),i)},L1e=(e,t)=>"("+(t?"?:":"")+e+")";var Mk,Ek;function c4e(e){return Z2.fromJSON(e.toJSON())}function F1e(e){return e.toJSON?e.toJSON():e}function p4e(e){return typeof e=="string"||e instanceof String}function d4e(e){return typeof e=="number"}function Tk(e){return e instanceof Date}function f4e(e,t){return e===t||!(!Tk(e)||!Tk(t))&&e.getTime()===t.getTime()}function y4e(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function m4e(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Ut({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function g4e(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(Mk||(Mk={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(Ek||(Ek={}));const v4e=1e3,b4e={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},$k={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},w4e={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function _4e(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function x4e(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(y){return function(f,w){const S={key:f,value:y[f]},E={key:w,value:y[w]};return s(S,E)}});var s;const h=[];return function y(f){if(f&&f.toJSON&&typeof f.toJSON=="function"&&(f=f.toJSON()),f===void 0)return;if(typeof f=="number")return isFinite(f)?""+f:"null";if(typeof f!="object")return JSON.stringify(f);let w,S;if(Array.isArray(f)){for(S="[",w=0;w<f.length;w++)w&&(S+=","),S+=y(f[w])||"null";return S+"]"}if(f===null)return"null";if(h.includes(f)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=h.push(f)-1,A=Object.keys(f).sort(r&&r(f));for(S="",w=0;w<A.length;w++){const P=A[w],N=y(f[P]);N&&(S&&(S+=","),S+=JSON.stringify(P)+":"+N)}return h.splice(E,1),"{"+S+"}"}(e)}class Jz{constructor(t){this.value=t}}class Kz{constructor(t){this.value=t}}class wE{constructor(t){this.fn=t}}class _E{constructor(t,i){this.paramCount=i,this.fn=t}}const j1e=wE,D1e=Kz,z1e=Jz,V1e=_E,fs={type:"VOID"},G1e={type:"BREAK"},U1e={type:"CONTINUE"};function vm(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function xE(e){return e instanceof wE||e instanceof k0e||e instanceof _E}function i2(e){return!!Vr(e)||!!mn(e)||!!Qr(e)||!!yn(e)||e===null||e===fs||typeof e=="number"}function q1e(e,t){return e===void 0?t:e}function Vr(e){return typeof e=="string"||e instanceof String}function yn(e){return typeof e=="boolean"}function mn(e){return typeof e=="number"}function B1e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function no(e){return e instanceof Array}function H1e(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function W1e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function J1e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function Pp(e){return e instanceof Qa}function Qr(e){return e instanceof Date}function K1e(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function Y1e(e){return e<0?-Math.round(-e):Math.round(e)}function Z1e(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function SE(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=vm(t,"\u2030",""),t=vm(t,"\xA4",""),k1e(e,{pattern:t})):e.toString()}function w3(e,t){const i=mt.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(Yz(t),{locale:bs(),numberingSystem:"latn"})}function Yz(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of e.match(i))switch(r){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=r;break;default:r.length>=2&&r.slice(0,1)==="["&&r.slice(-1)==="]"?t+=`'${r.slice(1,-1)}'`:t+=`'${r}'`}return t}function ei(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function X1e(e,t,i){if(e===null){if(t===null||t===fs)return ei(null,null,i);if(mn(t))return ei(0,t,i);if(Vr(t)||yn(t))return ei(0,Ri(t),i);if(Qr(t))return ei(0,t.getTime(),i)}if(e===fs){if(t===null||t===fs)return ei(null,null,i);if(mn(t))return ei(0,t,i);if(Vr(t)||yn(t))return ei(0,Ri(t),i);if(Qr(t))return ei(0,t.getTime(),i)}else if(mn(e)){if(mn(t))return ei(e,t,i);if(yn(t))return ei(e,Ri(t),i);if(t===null||t===fs)return ei(e,0,i);if(Vr(t))return ei(e,Ri(t),i);if(Qr(t))return ei(e,t.getTime(),i)}else if(Vr(e)){if(Vr(t))return ei(Th(e),Th(t),i);if(Qr(t))return ei(Ri(e),t.getTime(),i);if(mn(t))return ei(Ri(e),t,i);if(t===null||t===fs)return ei(Ri(e),0,i);if(yn(t))return ei(Ri(e),Ri(t),i)}else if(Qr(e)){if(Qr(t))return ei(e,t,i);if(t===null||t===fs)return ei(e.getTime(),0,i);if(mn(t))return ei(e.getTime(),t,i);if(yn(t)||Vr(t))return ei(e.getTime(),Ri(t),i)}else if(yn(e)){if(yn(t))return ei(e,t,i);if(mn(t))return ei(Ri(e),Ri(t),i);if(Qr(t))return ei(Ri(e),t.getTime(),i);if(t===null||t===fs)return ei(Ri(e),0,i);if(Vr(t))return ei(Ri(e),Ri(t),i)}return!!Zz(e,t)&&(i==="<="||i===">=")}function Zz(e,t){if(e===t||e===null&&t===fs||t===null&&e===fs)return!0;if(Qr(e)&&Qr(t))return e.getTime()===t.getTime();if(e instanceof cE||e instanceof Gp)return e.equalityTest(t);if(e instanceof et&&t instanceof et){const i=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(i!=null)return i===r}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Th(e,t){if(Vr(e))return e;if(e===null)return"";if(mn(e))return SE(e,t);if(yn(e))return e.toString();if(Qr(e))return w3(e,t);if(e instanceof Jn)return JSON.stringify(e.toJSON());if(no(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=r2(e[r]);return"["+i.join(",")+"]"}if(e instanceof Qa){const i=[];for(let r=0;r<e.length();r++)i[r]=r2(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():xE(e)?"object, Function":""}function Q1e(e){const t=[];if(no(e)===!1)return null;if(e instanceof Qa){for(let i=0;i<e.length();i++)t[i]=Ri(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=Ri(e[i]);return t}function Cb(e,t){if(Vr(e))return e;if(e===null)return"";if(mn(e))return SE(e,t);if(yn(e))return e.toString();if(Qr(e))return w3(e,t);if(e instanceof Jn)return e instanceof Ut?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+g6(e.spatialReference)+"}":g6(e.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(no(e)){const i=[];for(let r=0;r<e.length;r++)i[r]=r2(e[r]);return"["+i.join(",")+"]"}if(e instanceof Qa){const i=[];for(let r=0;r<e.length();r++)i[r]=r2(e.get(r));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():xE(e)?"object, Function":""}function r2(e){if(e===null)return"null";if(yn(e)||mn(e)||Vr(e))return JSON.stringify(e);if(e instanceof Jn||e instanceof Qa||e instanceof Array)return Cb(e);if(e instanceof Date)return JSON.stringify(w3(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===fs)return"null";return"null"}function Ri(e,t){return mn(e)?e:e===null||e===""?0:Qr(e)?NaN:yn(e)?e?1:0:no(e)||e===""||e===void 0?NaN:t!==void 0&&Vr(e)?(t=vm(t,"\u2030",""),t=vm(t,"\xA4",""),N1e(e,{pattern:t})):e===fs?0:Number(e)}function eye(e){if(Qr(e))return e;if(Vr(e)){const t=Xz(e);if(t)return t.toJSDate()}return null}function tye(e){return Qr(e)?mt.fromJSDate(e):Vr(e)?Xz(e):null}function Xz(e){const t=/ (\d\d)/;let i=mt.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=mt.fromISO(e),i.isValid)?i:null}function iye(e){return yn(e)?e:Vr(e)?(e=e.toLowerCase())==="true":!!mn(e)&&e!==0&&!isNaN(e)}function rye(e,t){return oe(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function nye(e){if(e===null)return null;if(e instanceof et)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof rn){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof tn){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof jp?e.points.length===0?null:e:e instanceof Ut?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function Qz(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Th(t);else{if(t==null)return null;if(t==="")return t;t=Ri(t)}for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.code===t&&(i=s)}return i===null?t:i.name}function eV(e,t){if(!e||!e.domain)return t;let i=null;t=Th(t);for(let r=0;r<e.domain.codedValues.length;r++){const s=e.domain.codedValues[r];s.name===t&&(i=s)}return i===null?t:i.code}function _3(e,t,i=null,r=null){if(!t||!t.fields)return null;let s,h,y=null;for(let f=0;f<t.fields.length;f++){const w=t.fields[f];w.name.toLowerCase()===e.toString().toLowerCase()&&(y=w)}if(y===null)throw new Error("Field not found");return r===null&&i&&t.typeIdField&&(r=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),r!=null&&t.types.some(function(f){return f.id===r&&(s=f.domains&&f.domains[y.name],s&&s.type==="inherited"&&(s=Ik(y.name,t),h=!0),!0)}),h||s||(s=Ik(e,t)),{field:y,domain:s}}function Ik(e,t){let i;return t.fields.some(function(r){return r.name.toLowerCase()===e.toLowerCase()&&(i=r.domain),!!i}),i}function g6(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,r=t.cmp&&(s=t.cmp,function(y){return function(f,w){const S={key:f,value:y[f]},E={key:w,value:y[w]};return s(S,E)}});var s;const h=[];return function y(f){if(f&&f.toJSON&&typeof f.toJSON=="function"&&(f=f.toJSON()),f===void 0)return;if(typeof f=="number")return isFinite(f)?""+f:"null";if(typeof f!="object")return JSON.stringify(f);let w,S;if(Array.isArray(f)){for(S="[",w=0;w<f.length;w++)w&&(S+=","),S+=y(f[w])||"null";return S+"]"}if(f===null)return"null";if(h.includes(f)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=h.push(f)-1,A=Object.keys(f).sort(r&&r(f));for(S="",w=0;w<A.length;w++){const P=A[w],N=y(f[P]);N&&(S&&(S+=","),S+=JSON.stringify(P)+":"+N)}return h.splice(E,1),"{"+S+"}"}(e)}function sye(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function q0(e,t){if(!(t instanceof et))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function oye(e,t){if(no(e)||Pp(e)){let i=!1,r=!1,s=[],h=t;if(no(e)){for(const y of e)q0(s,y);s.length>0&&(h=e[0].spatialReference,i=e[0].hasZ,r=e[0].hasM)}else if(e instanceof Gp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,h=e.get(0).spatialReference);else{if(!Pp(e))throw new Error("Invalid Argument");for(const y of e.toArray())q0(s,y);s.length>0&&(h=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:(hM(s,r,i)===!1&&(s=s.slice(0).reverse()),new rn({rings:[s],spatialReference:h,hasZ:i,hasM:r}))}return e}function aye(e,t){if(no(e)||Pp(e)){let i=!1,r=!1,s=[],h=t;if(no(e)){for(const y of e)q0(s,y);s.length>0&&(h=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Gp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,h=e.get(0).spatialReference);else if(Pp(e)){for(const y of e.toArray())q0(s,y);s.length>0&&(h=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new tn({paths:[s],spatialReference:h,hasZ:i,hasM:r})}return e}function lye(e,t){if(no(e)||Pp(e)){let i=!1,r=!1,s=[],h=t;if(no(e)){for(const y of e)q0(s,y);s.length>0&&(h=e[0].spatialReference,i=e[0].hasZ===!0,r=e[0].hasM===!0)}else if(e instanceof Gp)s=e._elements,s.length>0&&(i=e._hasZ,r=e._hasM,h=e.get(0).spatialReference);else if(Pp(e)){for(const y of e.toArray())q0(s,y);s.length>0&&(h=e.get(0).spatialReference,i=e.get(0).hasZ===!0,r=e.get(0).hasM===!0)}return s.length===0?null:new jp({points:s,spatialReference:h,hasZ:i,hasM:r})}return e}function uye(e,t=!1){const i=[];if(e===null)return i;if(no(e)===!0){for(let r=0;r<e.length;r++){const s=Th(e[r]);s===""&&t!==!0||i.push(s)}return i}if(e instanceof Qa){for(let r=0;r<e.length();r++){const s=Th(e.get(r));s===""&&t!==!0||i.push(s)}return i}if(i2(e)){const r=Th(e);return r===""&&t!==!0||i.push(r),i}return[]}let _9=0;function hye(e){return _9++,_9%100==0?(_9=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function cye(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function bm(e,t=null){return e==null?null:yn(e)||mn(e)||Vr(e)?e:e instanceof Jn?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof Qa?e.toArray().map(i=>bm(i,t)):e instanceof Array?e.map(i=>bm(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function pye(e,t,i,r,s){const h=await ME(e,t,i);s[r]=h}async function ME(e,t=null,i=null){if(e instanceof Qa&&(e=e.toArray()),e==null)return null;if(i2(e)||e instanceof Jn||e instanceof Date)return bm(e,i);if(e instanceof Array){const r=[],s=[];for(const h of e)h===null||i2(h)||h instanceof Jn||h instanceof Date?s.push(bm(h,i)):(s.push(null),r.push(pye(h,t,i,s.length-1,s)));return r.length>0&&await Promise.all(r),s}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function dye(e,t,i){const r=e.fullSchema();return r===null||!r.fields?null:_3(t,r,e,i)}function fye(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function yye(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;const h=_3(t,s,e,r);if(i===void 0)try{i=e.field(t)}catch{return null}return Qz(h,i)}function mye(e,t,i,r){const s=e.fullSchema();if(s===null||!s.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return eV(_3(t,s,e,r),i)}function gye(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const r of t.fields)i.push(F1e(r));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:$k[t.geometryType]===void 0?"":$k[t.geometryType],fields:i}}const S4e=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Jz,ImplicitResultE:Kz,NativeFunctionE:wE,SizzleFunctionE:_E,NativeFunction:j1e,ImplicitResult:D1e,ReturnResult:z1e,SizzleFunction:V1e,voidOperation:fs,breakResult:G1e,continueResult:U1e,multiReplace:vm,isFunctionParameter:xE,isSimpleType:i2,defaultUndefined:q1e,isString:Vr,isBoolean:yn,isNumber:mn,isInteger:B1e,isArray:no,isFeature:H1e,isFeatureSet:W1e,isFeatureSetCollection:J1e,isImmutableArray:Pp,isDate:Qr,pcCheck:K1e,absRound:Y1e,generateUUID:Z1e,formatNumber:SE,formatDate:w3,standardiseDateFormat:Yz,greaterThanLessThan:X1e,equalityTest:Zz,toString:Th,toNumberArray:Q1e,toStringExplicit:Cb,toNumber:Ri,toDate:eye,toDateTime:tye,toBoolean:iye,fixSpatialReference:rye,fixNullGeometry:nye,getDomainValue:Qz,getDomainCode:eV,getDomain:_3,stableStringify:g6,autoCastFeatureToGeometry:sye,autoCastArrayOfPointsToPolygon:oye,autoCastArrayOfPointsToPolyline:aye,autoCastArrayOfPointsToMultiPoint:lye,toStringArray:uye,tick:hye,binaryOperator:cye,castAsJson:bm,castAsJsonAsync:ME,featureFullDomain:dye,featureSubtypes:fye,featureDomainValueLookup:yye,featureDomainCodeLookup:mye,featureSchema:gye},Symbol.toStringTag,{value:"Module"})),vye=["$datastore","$map","$layer","$aggregatedfeatures"],bye="esri.widgets.Feature.support.arcadeFeatureUtils",wye=Le.getLogger(bye);function _ye(e){return typeof e=="string"?Bm(X7(e)):Array.isArray(e)?xye(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?Sye(e):e}function xye(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Bm(X7(t)):t}</li>`).join("")}</ul>`}function Sye(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Bm(X7(i)):i}</td></tr>`}).join("")}</table>`}function Mye({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:h,graphic:y,interceptor:f}){i.forEach(w=>{const S=w.toLowerCase(),E={map:h,spatialReference:s.sr,interceptor:f};if(S==="$map"&&(r.vars[S]=t.convertMapToFeatureSetCollection(E)),S==="$layer"&&(r.vars[S]=t.convertFeatureLayerToFeatureSet({layer:y.sourceLayer,spatialReference:s.sr,interceptor:f})),S==="$datastore"&&(r.vars[S]=t.convertServiceUrlToWorkspace({url:y.sourceLayer.url,spatialReference:s.sr,interceptor:f})),S==="$aggregatedfeatures"){const A=y.layer,{fields:P,objectIdField:N,geometryType:F,spatialReference:V,displayField:U}=A,X=new Gm({fields:P,objectIdField:N,geometryType:F,spatialReference:V,displayField:U,...A.type==="feature"?{templates:A.templates,typeIdField:A.typeIdField,types:A.types}:null,source:e});r.vars[S]=t.convertFeatureLayerToFeatureSet({layer:X,spatialReference:s.sr,interceptor:f})}})}function tV(){return ge(()=>import("./arcadeUtils.429fddb5.js").then(e=>e.t),[])}async function Eye({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!s.createQuery||!s.queryFeatures)return[];const h=s.createQuery();h.aggregateIds=[e.getObjectId()];const{features:y}=await s.queryFeatures(h);return y}async function iV({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:h,view:y}){if(!e||!e.expression)return null;const f=t.createSyntaxTree(e.expression),w=vye.filter(N=>t.hasVariable(f,N)),[S]=await Promise.all([Eye({graphic:h,view:y}),t.loadScriptDependencies(f,!0,w)]),E=t.getViewInfo({spatialReference:r}),A=t.createExecContext(h,E);A.interceptor=i,A.useAsync=!0,Mye({aggregatedFeatures:S,arcadeUtils:t,featureSetVars:w,context:A,viewInfo:E,map:s,graphic:h,interceptor:i});const P=t.createFunction(f,A);return t.executeAsyncFunction(P,A).catch(N=>wye.error("arcade-execution-error",{error:N,graphic:h,expressionInfo:e}))}async function Tye({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:h}){if(!e||!e.length)return{};const y=await tV(),f={};for(const E of e)f[`expression/${E.name}`]=iV({expressionInfo:E,arcadeUtils:y,interceptor:r,spatialReference:t,map:s,graphic:i,view:h});const w=await Nr(f),S={};for(const E in w)S[E]=_ye(w[E].value);return S}const $ye=1;let os=class extends nu(qe){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,s;const t=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const i=t==="fields"?new f3:t==="media"?new hp:t==="text"?new Yw:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=B7(this._compile,$ye,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:h,view:y,_abortController:f}=this;if(!(t&&i&&s&&h))return void this._set("contentElement",null);const w=await tV();if(f!==this._abortController)return;const S=await iV({arcadeUtils:w,expressionInfo:t,graphic:i,interceptor:r,map:h,spatialReference:s,view:y});if(!S||S.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const E=await ME(S,f.signal),A=E==null?void 0:E.type,P=A==="media"?em.fromJSON(E):A==="text"?R0.fromJSON(E):A==="fields"?N0.fromJSON(E):null;this._set("contentElement",P)},this.handles.add([$e(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Wt),$e(()=>[this.contentElement],()=>this._createVM(),Wt)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};g([x()],os.prototype,"_abortController",void 0),g([x({type:lN})],os.prototype,"expressionInfo",void 0),g([x({type:Zn})],os.prototype,"graphic",void 0),g([x({readOnly:!0})],os.prototype,"contentElement",void 0),g([x({readOnly:!0})],os.prototype,"contentElementViewModel",void 0),g([x()],os.prototype,"interceptor",void 0),g([x()],os.prototype,"spatialReference",null),g([x({readOnly:!0})],os.prototype,"state",null),g([x()],os.prototype,"map",null),g([x()],os.prototype,"view",void 0),os=g([K("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],os);const EE=os,rv={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Ob=class extends Er{constructor(e,t){super(e,t),this.viewModel=new EE}initialize(){this.own($e(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),Wt))}destroy(){this._destroyContentWidget()}renderLoading(){return ue("div",{key:"loading-container",class:rv.loadingSpinnerContainer},ue("span",{class:this.classes(rv.iconLoading,rv.spinner)}))}render(){var t;const{state:e}=this.viewModel;return ue("div",{class:rv.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new xD({viewModel:e}):i==="media"?new JD({viewModel:e}):i==="text"?new Ib({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};g([x({type:EE})],Ob.prototype,"viewModel",void 0),Ob=g([K("esri.widgets.Feature.FeatureExpression")],Ob);const Iye=Ob;class Aye{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var Pb;const kye=1,Ak="content-view-models",rV="esri.widgets.FeatureViewModel",Cye=Le.getLogger(rV),kk={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Ii=Pb=class extends qe{constructor(e){super(e),this._handles=new er,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=B7(this._graphicChanged,kye,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...kk},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add($e(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),Wt))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return Y(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return ype(IA(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return uD(this.graphic)}castAbilities(e){return{...kk,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof hp&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof hp&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof hp&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){Br(i)||(this._error=i,Cye.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new R0({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(Ak),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:r,contentElementViewModel:s}=e,h=r==null?void 0:r.type;s&&h&&(h==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),h==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),h==="text"&&s.set(this._createTextVMParams(r)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:h,view:y}=this,f=new EE({expressionInfo:i,graphic:r,interceptor:Pb.interceptor,map:s,spatialReference:h,view:y});return this.contentViewModels[t]=f,this._handles.add($e(()=>f.contentElementViewModel,()=>this._setExpressionContentVM(f,t),Wt),Ak),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new eE({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new Yw({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:h,_expressionAttributes:y}=this,{attributes:f}=s,w=h.global;return{title:lp({attributes:f,fieldInfoMap:i,globalAttributes:w,expressionAttributes:y,layer:r,text:e}),description:lp({attributes:f,fieldInfoMap:i,globalAttributes:w,expressionAttributes:y,layer:r,text:t})}}_createFieldsVMParams(e,t){var S;const{_effectivePopupTemplate:i,formattedAttributes:r}=this,s={...r.global,...r.content[t]},h=(S=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:S.filter(({fieldName:E})=>cD(E)||Gl(E)||s.hasOwnProperty(E)),y=i==null?void 0:i.expressionInfos,{description:f,title:w}=e;return{attributes:s,expressionInfos:y,fieldInfos:h,...this._compileTitleAndDesc({title:w,description:f})}}_compileFields(e,t){const i=e.clone(),r=new f3(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:r,_fieldInfoMap:s,formattedAttributes:h,_effectivePopupTemplate:y,relatedInfos:f,_sourceLayer:w,_expressionAttributes:S}=this,{attributes:E}=r,{description:A,mediaInfos:P,title:N}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:E,layer:w,fieldInfoMap:s,formattedAttributes:{...h.global,...h.content[t]},expressionAttributes:S,mediaInfos:P,popupTemplate:y,relatedInfos:f,...this._compileTitleAndDesc({title:N,description:A})}}_compileMedia(e,t){const i=e.clone(),r=new hp(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const{attributes:h}=t,y=this.formattedAttributes.global;e.text=lp({attributes:h,fieldInfoMap:i,globalAttributes:y,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new Yw(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?fpe(s,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,{attributes:h}=r,y=this.formattedAttributes.global;return lp({attributes:h,fieldInfoMap:t,globalAttributes:y,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return Jw(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return Jw(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s,spatialReference:h,map:y,view:f}=this,{content:{value:w},title:{value:S}}=await Nr({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!r)return;await vpe({graphic:r,popupTemplate:s,layer:i,spatialReference:h},e);const{expressionAttributes:{value:E}}=await Nr({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:Tye({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:h,graphic:r,map:y,interceptor:Pb.interceptor,view:f})});t===this._featureAbortController&&r&&(this._expressionAttributes=E,this._graphicExpressionAttributes={...r.attributes,...E},this._set("formattedAttributes",this._createFormattedAttributes(w)),this._set("title",this._compileTitle(S)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(w)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:h,_sourceLayer:y,_fieldInfoMap:f,_graphicExpressionAttributes:w}=this;i.content[t]=t9({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...w,...e.attributes},layer:y,fieldInfoMap:f,relatedInfos:h})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:h,_fieldInfoMap:y,_graphicExpressionAttributes:f}=this;i.content[t]=t9({fieldInfos:e.fieldInfos,graphic:r,attributes:{...f,...e.attributes},layer:h,fieldInfoMap:y,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:h,_graphicExpressionAttributes:y}=this,f=t==null?void 0:t.fieldInfos,w={global:t9({fieldInfos:f,graphic:i,attributes:y,layer:s,fieldInfoMap:h,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((S,E)=>{S.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:S,contentElementIndex:E,formattedAttributes:w}),S.type==="media"&&this._createMediaFormattedAttributes({contentElement:S,contentElementIndex:E,formattedAttributes:w})}),w}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,IA(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const h=Y(s.associatedLayer)?await s.associatedLayer.load(i):s;if(!h)return;const y=t.filter(S=>S&&Gl(S.fieldName));if(!y||!y.length)return;t.forEach(S=>this._configureRelatedInfo(S,h));const f=await w0e({relatedInfos:r,layer:h},i);Object.keys(f).forEach(S=>{var P;const E=r.get(S.toString()),A=(P=f[S])==null?void 0:P.value;E&&A&&(E.layerInfo=A.data)});const w=await _0e({graphic:e,relatedInfos:r,layer:h},i);Object.keys(w).forEach(S=>{var E;y0e((E=w[S])==null?void 0:E.value,r.get(S.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=u6(e.fieldName);if(!r)return;const{layerId:s,fieldName:h}=r;if(!s)return;const y=i.get(s.toString())||f0e(s,t);y&&(x0e({relatedInfo:y,fieldName:h,fieldInfo:e}),this.relatedInfos.set(s,y))}};Ii.interceptor=new Aye(_pe,xpe),g([x()],Ii.prototype,"_error",void 0),g([x()],Ii.prototype,"_featureAbortController",void 0),g([x({readOnly:!0})],Ii.prototype,"_effectivePopupTemplate",null),g([x({readOnly:!0})],Ii.prototype,"_fieldInfoMap",null),g([x({readOnly:!0})],Ii.prototype,"_sourceLayer",null),g([x()],Ii.prototype,"abilities",void 0),g([Mt("abilities")],Ii.prototype,"castAbilities",null),g([x({readOnly:!0})],Ii.prototype,"content",void 0),g([x({readOnly:!0})],Ii.prototype,"contentViewModels",void 0),g([x({type:Boolean})],Ii.prototype,"defaultPopupTemplateEnabled",void 0),g([x({readOnly:!0})],Ii.prototype,"state",null),g([x({readOnly:!0})],Ii.prototype,"formattedAttributes",void 0),g([x({type:Zn,value:null})],Ii.prototype,"graphic",null),g([x({readOnly:!0})],Ii.prototype,"lastEditInfo",void 0),g([x({readOnly:!0})],Ii.prototype,"relatedInfos",void 0),g([x()],Ii.prototype,"spatialReference",null),g([x({readOnly:!0})],Ii.prototype,"title",void 0),g([x()],Ii.prototype,"map",null),g([x({readOnly:!0})],Ii.prototype,"waitingForContent",null),g([x()],Ii.prototype,"view",void 0),Ii=Pb=g([K(rV)],Ii);const TE=Ii,nV=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>Zw(i)&&!i.destroyed?ue("div",{key:i},i.render()):i instanceof HTMLElement?ue("div",{key:i,bind:i,afterCreate:this._attachToNode}):_D(i)?ue("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=g([K("esri.widgets.Feature.ContentMixin")],t),t},Dr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},Ck={title:!0,content:!0,lastEditedInfo:!0};let zr=class extends nV(Er){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...Ck},this.map=null,this.view=null,this.viewModel=new TE}initialize(){this.own($e(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),Wt))}loadDependencies(){return ge(()=>import("./calcite-notice.c26255eb.js"),[])}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...Ck,...e}}render(){const{state:e}=this.viewModel,t=ue("div",{class:Dr.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return ue("div",{class:this.classes(Dr.base,Dr.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return ue("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?ue("div",{key:"error-title",slot:"title"},e.errorMessage):null,ue("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return ue("div",{key:"loading-container",class:Dr.loadingSpinnerContainer},ue("span",{class:this.classes(Dr.iconLoading,Dr.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?ue("div",{class:Dr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?ue(d3,{level:this.headingLevel,class:Dr.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?ue("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:ue("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?ue("div",{key:this._buildKey("attachments-element",e),class:this.classes(Dr.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ue("div",{key:this._buildKey("expression-element",e),class:Dr.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ue("div",{key:this._buildKey("custom-element",t),class:Dr.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ue("div",{key:this._buildKey("fields-element",e),class:Dr.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:ue("div",{key:this._buildKey("media-element",e),class:Dr.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,h=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,y=Aa(h,{date:r,user:s});return ue("div",{key:"edit-info-element",class:this.classes(Dr.lastEditedInfo,Dr.contentElement)},y)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?ue("div",{key:this._buildKey("text-element",t),class:this.classes(Dr.contentElement,Dr.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,h)=>{s.type==="attachments"&&(this._contentWidgets[h]=new Ope({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[h]})),s.type==="fields"&&(this._contentWidgets[h]=new xD({viewModel:r[h]})),s.type==="media"&&(this._contentWidgets[h]=new JD({viewModel:r[h]})),s.type==="text"&&(this._contentWidgets[h]=new Ib({viewModel:r[h]})),s.type==="custom"&&(this._contentWidgets[h]=new Ib({viewModel:r[h]})),s.type==="expression"&&(this._contentWidgets[h]=new Iye({viewModel:r[h]}))},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new Ib({viewModel:s}))}this.scheduleRender()}};g([We("viewModel.graphic")],zr.prototype,"graphic",void 0),g([We("viewModel.defaultPopupTemplateEnabled")],zr.prototype,"defaultPopupTemplateEnabled",void 0),g([x()],zr.prototype,"headingLevel",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],zr.prototype,"label",void 0),g([x(),Sr("esri/widgets/Feature/t9n/Feature")],zr.prototype,"messages",void 0),g([x(),Sr("esri/t9n/common")],zr.prototype,"messagesCommon",void 0),g([x(),Sr("esri/widgets/support/t9n/uriUtils")],zr.prototype,"messagesURIUtils",void 0),g([We("viewModel.spatialReference")],zr.prototype,"spatialReference",void 0),g([We("viewModel.title")],zr.prototype,"title",void 0),g([x()],zr.prototype,"visibleElements",void 0),g([Mt("visibleElements")],zr.prototype,"castVisibleElements",null),g([We("viewModel.map")],zr.prototype,"map",void 0),g([We("viewModel.view")],zr.prototype,"view",void 0),g([x({type:TE})],zr.prototype,"viewModel",void 0),zr=g([K("esri.widgets.Feature")],zr);const Oye=zr;var sV;const Nb=Symbol("anchorHandles");let Pc=class extends ta.EventedAccessor{constructor(e){super(e),this[sV]=new er,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Nb].add([sn(()=>Oa(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),$e(()=>this.screenLocation,(t,i)=>{Y(t)&&Y(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[Nb]=Pr(this[Nb])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&Y(e)&&Y(t)&&t.ready?t.toScreen(e):null}};sV=Nb,g([x()],Pc.prototype,"location",void 0),g([x()],Pc.prototype,"screenLocation",null),g([x()],Pc.prototype,"screenLocationEnabled",void 0),g([x()],Pc.prototype,"view",void 0),Pc=g([K("esri.widgets.support.AnchorElementViewModel")],Pc);const oV=Pc,Pye="esri.widgets.CompassViewModel";let Rb=class extends oV{constructor(e){super(e),this.visible=!1}};g([x()],Rb.prototype,"visible",void 0),Rb=g([K(Pye)],Rb);const aV=Rb,x9={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Nc=class extends Er{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new aV,this.visible=!1}initialize(){this.own([$e(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,h={[x9.spinnerStart]:r,[x9.spinnerFinish]:s},y=this._getPositionStyles();return ue("div",{class:this.classes(x9.base,h),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=rM(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(oe(t)||oe(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};g([We("viewModel.location")],Nc.prototype,"location",void 0),g([We("viewModel.view")],Nc.prototype,"view",void 0),g([x({type:aV})],Nc.prototype,"viewModel",void 0),g([We("viewModel.visible")],Nc.prototype,"visible",void 0),Nc=g([K("esri.widgets.Spinner")],Nc);const Nye=Nc;var Ok;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Ok||(Ok={}));function lV(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Rye(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Lye(e,t,i,r,s,h){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=s,y[5]=h,y}function Fye(e,t){return new Float32Array(e,t,6)}function uV(e,t,i,r){const s=t[r],h=t[r+1];e[r]=i[0]*s+i[2]*h+i[4],e[r+1]=i[1]*s+i[3]*h+i[5]}function jye(e,t,i,r=0,s=0,h=2){const y=s||t.length/h;for(let f=r;f<y;f++)uV(e,t,i,f*h)}Object.freeze(Object.defineProperty({__proto__:null,create:lV,clone:Rye,fromValues:Lye,createView:Fye,transform:uV,transformMany:jye},Symbol.toStringTag,{value:"Module"}));function Dye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function zye(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Vye(e,t,i,r,s,h,y){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=h,e[5]=y,e}function $E(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5];let w=i*h-r*s;return w?(w=1/w,e[0]=h*w,e[1]=-r*w,e[2]=-s*w,e[3]=i*w,e[4]=(s*f-h*y)*w,e[5]=(r*y-i*f)*w,e):null}function Gye(e){return e[0]*e[3]-e[1]*e[2]}function hV(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=i[0],E=i[1],A=i[2],P=i[3],N=i[4],F=i[5];return e[0]=r*S+h*E,e[1]=s*S+y*E,e[2]=r*A+h*P,e[3]=s*A+y*P,e[4]=r*N+h*F+f,e[5]=s*N+y*F+w,e}function x3(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=Math.sin(i),E=Math.cos(i);return e[0]=r*E+h*S,e[1]=s*E+y*S,e[2]=r*-S+h*E,e[3]=s*-S+y*E,e[4]=f,e[5]=w,e}function IE(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=i[0],E=i[1];return e[0]=r*S,e[1]=s*S,e[2]=h*E,e[3]=y*E,e[4]=f,e[5]=w,e}function wm(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=i[0],E=i[1];return e[0]=r,e[1]=s,e[2]=h,e[3]=y,e[4]=r*S+h*E+f,e[5]=s*S+y*E+w,e}function cV(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function pV(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function AE(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Uye(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function qye(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Bye(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function dV(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function Hye(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function Wye(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function Jye(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Kye(e,t){const i=e[0],r=e[1],s=e[2],h=e[3],y=e[4],f=e[5],w=t[0],S=t[1],E=t[2],A=t[3],P=t[4],N=t[5];return Math.abs(i-w)<=pt*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(r-S)<=pt*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(s-E)<=pt*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-A)<=pt*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(y-P)<=pt*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(f-N)<=pt*Math.max(1,Math.abs(f),Math.abs(N))}const Yye=hV,Zye=dV;Object.freeze(Object.defineProperty({__proto__:null,copy:Dye,identity:zye,set:Vye,invert:$E,determinant:Gye,multiply:hV,rotate:x3,scale:IE,translate:wm,fromRotation:cV,fromScaling:pV,fromTranslation:AE,str:Uye,frob:qye,add:Bye,subtract:dV,multiplyScalar:Hye,multiplyScalarAndAdd:Wye,exactEquals:Jye,equals:Kye,mul:Yye,sub:Zye},Symbol.toStringTag,{value:"Module"}));const Pk=we("android");we("chrome")||Pk&&Pk>=4;QS();function fV(e){return e&&"opacity"in e?e.opacity*fV(e.parent):1}async function Xye(e,t){var U;if(!e)return;const i=e.sourceLayer,r=(U=Y(t)&&t.useSourceLayer?i:e.layer)!=null?U:i,s=fV(r);if(Y(e.symbol)&&(!Y(t)||t.ignoreGraphicSymbol!==!0)){const X=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:Y(t)?t.webStyleCache:null}):e.symbol.clone();return s9(X,null,s),X}const h=Y(t)&&t.renderer||r&&"renderer"in r&&r.renderer;let y=h&&"getSymbolAsync"in h?await h.getSymbolAsync(e,t):null;if(!y)return;if(y=y.type==="web-style"?await y.fetchSymbol({...t,cache:Y(t)?t.webStyleCache:null}):y.clone(),!("visualVariables"in h)||!h.visualVariables||!h.visualVariables.length)return s9(y,null,s),y;if("arcadeRequiredForVisualVariables"in h&&h.arcadeRequiredForVisualVariables&&(oe(t)||oe(t.arcade))){const X={...t};X.arcade=await qa(),t=X}const f=await ge(()=>Promise.resolve().then(()=>h7),void 0),w=[],S=[],E=[],A=[];for(const X of h.visualVariables)switch(X.type){case"color":w.push(X);break;case"opacity":S.push(X);break;case"rotation":A.push(X);break;case"size":X.target||E.push(X)}const P=!!w.length&&w[w.length-1],N=P?f.getColor(P,e,t):null,F=!!S.length&&S[S.length-1];let V=F?f.getOpacity(F,e,t):null;if(s!=null&&(V=V!=null?V*s:s),s9(y,N,V),E.length){const X=f.getAllSizes(E,e,t);await nde(y,X)}for(const X of A)sde(y,f.getRotationAngle(X,e,t),X.axis);return y}class Qye{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const r in t){const s=t[r],h=new lP(s,null,null,2,2);this.properties[r]={pool:h,acquired:[]}}this.afterDispatchHandle=_J(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const r of i.acquired)y$(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),r=this.properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this.properties){const i=this.properties[t];let r=0;for(const s of i.acquired)y$(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}}const eme=we("mac")?"Meta":"Ctrl",S3={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)S3[e]=String.fromCharCode(e);for(let e=1;e<25;e++)S3[111+e]=`F${e}`;for(let e=65;e<91;e++)S3[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function tme(e){if(e.key!==void 0)return Vo(e);const t=S3[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function ime(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class rme{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const Nk=Le.getLogger("esri.views.input.InputHandler");class Fr{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?Nk.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const h=typeof t=="string"?new rme(t,s):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},f=E=>{const A=this._incoming[E.match.eventType];if(A){const P=A.indexOf(E);A.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},w=new nme(h,r,{onPause:f,onRemove:f,onResume:E=>{const A=this._incoming[E.match.eventType];A&&!A.includes(E)&&(A.push(E),y(),this._manager&&this._manager.updateDependencies())}});let S=this._incoming[h.eventType];return S||(S=[],this._incoming[h.eventType]=S),S.push(w),y(),this._manager&&this._manager.updateDependencies(),w}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new sme(t,{onEmit:(r,s,h,y)=>{this._manager.emit(r.eventType,s,h,y)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Nk.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback(t),t.shouldStopPropagation()))break}}}class nme{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class sme{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class ome extends Fr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const r=i.data.native.pointerType==="touch";this._setValue(r?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,r){t===this._value&&this._x===i&&this._y===r||(this._value=t,this._x=i,this._y=r,this._onChange(t,i,r))}}const S9=Le.getLogger("esri.views.input.InputManager");let Ju=class extends qe{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=eme,this.latestPointerType="mouse",this._propertiesPool=new Qye({latestPointerLocation:lme},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=ri.INTERNAL){if(this._nameToGroup[e])return void S9.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void S9.error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const h=r.handlers[s];this._handlers.push(h),h.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,f,w,S,E)=>{this._emitInputEvent(h.priorityIndex+1,y,f,w,E,S)},setPointerCapture:(y,f)=>{this._setPointerCapture(r,h,y,f)},setEventCallback:y=>{h.eventCallback=y},setUninstallCallback:y=>{h.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):S9.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const h of r.handler.outgoingEventTypes)if(e.has(h)){s=!0;break}}if(s)for(const h of r.handler.incomingEventMatches){e.add(h.eventType);for(const y of h.keyModifiers)ime(y)||t.add(y)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const r=this._get("latestPointerLocation");if(oe(r)||r.x!==t||r.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=t,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const y=new Set;this._activeKeyModifiers.forEach(f=>{y.add(f)}),this._activeKeyModifiers=y,i=!0}},s=(y,f)=>{f&&!this._activeKeyModifiers.has(y)?(r(),this._activeKeyModifiers.add(y)):!f&&this._activeKeyModifiers.has(y)&&(r(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=t.key;this._keyModifiers.has(y)&&s(y,e==="key-down")}const h=t.native;s("Alt",!(!h||!h.altKey)),s("Ctrl",!(!h||!h.ctrlKey)),s("Shift",!(!h||!h.shiftKey)),s("Meta",!(!h||!h.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ome((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],ri.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ri.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,h=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,h),r?(h.add(s),h.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):h.has(s)&&(h.delete(s),h.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,h){const y=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),f=s!==void 0&&s,w={event:new ame(t,i,y,h||this._activeKeyModifiers,f),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(w):this._doNewPropagation(w)}_doNewPropagation(e){this._currentPropagation={events:new Aw,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),r=t.data&&t.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new Aw;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(h=>r.keyModifiers.includes(h));if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};g([x({readOnly:!0})],Ju.prototype,"hasPendingInputs",null),g([x()],Ju.prototype,"eventSource",void 0),g([x()],Ju.prototype,"recognizers",void 0),g([x({readOnly:!0})],Ju.prototype,"latestPointerType",void 0),g([x({readOnly:!0})],Ju.prototype,"latestPointerLocation",void 0),Ju=g([K("esri.views.input.InputManager")],Ju);class ame{constructor(t,i,r,s,h){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=h,this._propagationState=ch.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=ch.STOPPED}shouldStopPropagation(){return(this._propagationState&ch.STOPPED)!=0}async(t){this._propagationState|=ch.PAUSED;const i=(r,s)=>{this._propagationState&=~ch.PAUSED;const h=this._resumeCallback;if(this._resumeCallback=null,h&&h(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&ch.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var ch;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(ch||(ch={}));const ri={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class lme{}function Rk(e){return e&&typeof e.highlight=="function"}function M4e(e,t,i){return oe(e)||e>i&&(t===0||e<t)}const M3={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},cp=new nf({id:"zoom-to-feature",title:"{messages.zoom}",className:M3.iconZoom}),Lk=new nf({id:"remove-selected-feature",title:"{messages.remove}",className:M3.iconTrash}),u0=new nf({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:M3.iconZoom}),h0=new nf({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:M3.iconBrowseClusteredFeatures}),ume="esri.widgets.Popup.PopupViewModel",n2=Le.getLogger(ume),hme=e=>{const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new ne("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new ne("trigger-action:missing-arguments","view.popup is missing"));const{disabled:h,id:y}=r;if(!y)return Promise.reject(new ne("trigger-action:invalid-action","action.id is missing"));if(h)return Promise.reject(new ne("trigger-action:invalid-action","Action is disabled"));if(y===cp.id)return pme(s.viewModel).catch(l5);if(y===u0.id)return dme(s.viewModel);if(y===h0.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,y===Lk.id){s.close();const{selectedFeature:f}=s;if(!f)return Promise.reject(new ne(`trigger-action:${Lk.id}`,"selectedFeature is required",{selectedFeature:f}));const{sourceLayer:w}=f;return w?w.remove(f):i.graphics.remove(f),Promise.resolve()}return Promise.resolve()};function yV(e){const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function Wc(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function cme(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(s=>{r=!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}).catch(()=>{const s=new ne("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});n2.error(s)}),r}return!0}async function pme(e){const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,h=yV(e);if(!h){const S=new ne("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:h,view:r});throw n2.error(S),S}const y=r.scale/s,f=e.get("selectedFeature.geometry")||t,w=f&&f.type==="point"&&cme(i,r);cp.active=!0,cp.disabled=!0;try{await e.view.goTo({target:h,scale:w?y:void 0})}finally{cp.active=!1,cp.disabled=!1,e.zoomToLocation=null,w&&(e.location=f)}}async function dme(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const f=new ne("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw n2.error(f),f}if(!Wc(t)){const f=new ne("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw n2.error(f),f}const r=t.sourceLayer,s=await i.whenLayerView(r),h=s.createQuery();h.aggregateIds=[t.getObjectId()],u0.active=!0,u0.disabled=!0;const{extent:y}=await s.queryExtent(h);await i.goTo({target:y}),u0.active=!1,u0.disabled=!1}async function fme(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),h=s.createQuery();h.aggregateIds=[t.getObjectId()];const{extent:y}=await s.queryExtent(h);e.selectedClusterBoundaryFeature.geometry=y,i.graphics.add(e.selectedClusterBoundaryFeature)}async function yme(e){const{selectedFeature:t,view:i}=e,r=t.sourceLayer,s=await i.whenLayerView(r),h=s.createQuery();h.aggregateIds=[t.getObjectId()],h0.active=!0,h0.disabled=!0;const{features:y}=await s.queryFeatures(h);h0.active=!1,h0.disabled=!1,i.popup.open({features:[t].concat(y),featureMenuOpen:!0})}function mme(e){const t=e.features.filter(i=>Wc(i));t.length&&(e.features=t)}const mV=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return g([x()],t.prototype,"goToOverride",void 0),g([x()],t.prototype,"view",void 0),t=g([K("esri.widgets.support.GoTo")],t),t},Gy=Je.ofType({key:"type",defaultKeyValue:"button",base:O2,typeMap:{button:nf,toggle:xN}}),gme=()=>[cp.clone()],vme=()=>[u0.clone(),h0.clone()],gV="esri.widgets.Popup.PopupViewModel",nv=Le.getLogger(gV);let Et=class extends mV(oV){constructor(e){super(e),this._handles=new er,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Gy,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Zn({symbol:new Ja({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([$e(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),$e(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),$e(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),$e(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),$e(()=>this.location,e=>this._locationChange(e)),$e(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),$e(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),$e(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),$e(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>hme({event:e,view:this.view})),sn(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Yl),$e(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),$e(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),sn(()=>!this.visible,()=>this.browseClusterEnabled=!1),$e(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Gy;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:h}=this,y=s?i.concat(t):t,f=h&&(typeof h.getEffectivePopupTemplate=="function"&&h.getEffectivePopupTemplate(r)||h.popupTemplate),w=f&&f.actions,S=f&&f.overwriteActions?w:w?w.concat(y):y;return S&&S.filter(Boolean).forEach(E=>e.add(E)),e}get defaultActions(){const e=this._get("defaultActions")||new Gy;return e.removeAll(),e.addMany(Wc(this.selectedFeature)?vme():gme()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,h=r&&t.length;h&&i&&s===-1?this.selectedFeatureIndex=0:h&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=La(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=yV(this);if(!t){const i=new ne("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return nv.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const r=new ne("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return nv.error(r),Promise.reject(r)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){mme(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Wc(t)?(await fme(this),await yme(this)):nv.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):nv.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(cp.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Wc(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const h=((i-1)*r+t)%t,y=h+r;s.slice(h,y).forEach((f,w)=>{f&&!f.graphic&&(f.graphic=e[h+w])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:r}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Wc(e)?void 0:(e.symbol=await Xye(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=r.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),h=r.map(y=>y.promise);this.promises=[s,...h]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(Wc(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((h,y)=>{var w,S;if(!h)return;let f=null;if(r.some((E,A)=>(E&&E.graphic===h&&(f=E,r.splice(A,1)),!!f)),f)s[y]=f;else{const E=new TE({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(w=this.view)==null?void 0:w.spatialReference,graphic:h===e?h:null,map:(S=this.view)==null?void 0:S.map,view:this.view});s[y]=E}}),r.forEach(h=>h&&!h.destroyed&&h.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},ri.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{const{clientOnlyGraphics:h,promisesPerLayerView:y,location:f}=s,w=[Promise.resolve(h),...y.map(S=>S.promise)];return r.popup.open({location:f||i,promises:w}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return oe(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:s}=this;if(!(r&&i&&t&&s))return;const h=this._getHighlightLayer(r);if(!(h&&h instanceof om))return;const y=this._getLayerView(i,h);this._highlightActiveFeaturePromise=y;const f=await y;if(!(f&&Rk(f)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const w=f.highlight(this._getHighlightTarget(r,h));this._handles.add(w,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;const h=this._getHighlightLayer(t);if(!(h&&h instanceof om))return;const y=this._getLayerView(r,h);this._highlightSelectedFeaturePromise=y;const f=await y;if(!(f&&Rk(f)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const w=f.highlight(this._getHighlightTarget(t,h));this._handles.add(w,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};g([x()],Et.prototype,"featurePage",void 0),g([x()],Et.prototype,"isLoadingFeature",null),g([x({type:Gy})],Et.prototype,"actions",void 0),g([x({readOnly:!0})],Et.prototype,"active",null),g([x()],Et.prototype,"activeFeature",void 0),g([x({readOnly:!0})],Et.prototype,"allActions",null),g([x({type:Boolean})],Et.prototype,"defaultPopupTemplateEnabled",void 0),g([x()],Et.prototype,"autoCloseEnabled",void 0),g([x()],Et.prototype,"autoOpenEnabled",void 0),g([x()],Et.prototype,"browseClusterEnabled",void 0),g([x()],Et.prototype,"content",void 0),g([x({type:Gy,readOnly:!0})],Et.prototype,"defaultActions",null),g([x({readOnly:!0})],Et.prototype,"featureCount",null),g([x()],Et.prototype,"features",null),g([x()],Et.prototype,"featuresPerPage",void 0),g([x()],Et.prototype,"featureViewModelAbilities",void 0),g([x({readOnly:!0})],Et.prototype,"featureViewModels",void 0),g([x()],Et.prototype,"highlightEnabled",void 0),g([x()],Et.prototype,"includeDefaultActions",void 0),g([x({type:et})],Et.prototype,"location",null),g([x({readOnly:!0})],Et.prototype,"pendingPromisesCount",null),g([x({readOnly:!0})],Et.prototype,"selectedClusterBoundaryFeature",void 0),g([x({readOnly:!0})],Et.prototype,"waitingForResult",null),g([x({readOnly:!0})],Et.prototype,"promiseCount",null),g([x()],Et.prototype,"promises",null),g([x({value:null,readOnly:!0})],Et.prototype,"selectedFeature",null),g([x({value:-1})],Et.prototype,"selectedFeatureIndex",null),g([x({readOnly:!0})],Et.prototype,"selectedFeatureViewModel",null),g([x({readOnly:!0})],Et.prototype,"state",null),g([x()],Et.prototype,"title",void 0),g([x()],Et.prototype,"updateLocationEnabled",void 0),g([x()],Et.prototype,"view",void 0),g([x()],Et.prototype,"visible",void 0),g([x()],Et.prototype,"zoomFactor",void 0),g([x()],Et.prototype,"zoomToLocation",void 0),g([x()],Et.prototype,"centerAtLocation",null),Et=g([K(gV)],Et);const vV=Et,Fk="selected-index",bme=0,jk="popup-spinner",Ne={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},Dk={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},zk="esri-popup";function ol(e,t){return t===void 0?`${zk}__${e}`:`${zk}__${e}-${t}`}const bV="esri.widgets.Popup",Vk=Le.getLogger(bV),Gk={closeButton:!0,featureNavigation:!0};let tt=class extends nV(Er){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new er,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=B7(()=>this._displaySpinner(),bme),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new vV,this.visible=null,this.visibleElements={...Gk},this._addSelectedFeatureIndexHandle(),this.own([$e(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),$e(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),$e(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),$e(()=>{var i,r,s,h,y,f;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(h=(s=this.viewModel)==null?void 0:s.view)==null?void 0:h.size,(y=this.viewModel)==null?void 0:y.active,(f=this.viewModel)==null?void 0:f.location,this.alignment]},()=>this.reposition()),$e(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),$e(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),$e(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),$e(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i,r)),$e(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),$e(()=>{var i,r,s,h;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(h=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:h.state]},()=>this._setTitleFromFeatureWidget()),$e(()=>{var i,r,s,h;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(h=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:h.state]},()=>this._setContentFromFeatureWidget()),sn(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),ro(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),$e(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),Wt),$e(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,r,s,h,y;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.state)==="error"||((h=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:h.content):(y=this.viewModel)==null?void 0:y.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Dk}set dockOptions(e){const t={...Dk},i=this.get("viewModel.view.breakpoints"),r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s={...t,...e},h={...t.breakpoint,...r},{breakpoint:y}=s;y===!0?s.breakpoint=h:typeof y=="object"&&(s.breakpoint={...h,...y}),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:r}=this.viewModel,s={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=s):this._feature=new Oye({headingLevel:i+1,viewModel:r,visibleElements:s}),this._feature):null}castVisibleElements(e){return{...Gk,...e}}blur(){const{active:e}=this.viewModel;e||Vk.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Vk.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,h;this._handles.remove(Fk);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((h=(s=this.viewModel)==null?void 0:s.view)==null?void 0:h.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var F,V,U,X;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:s,currentDockPosition:h}=this,{active:y}=this.viewModel,{menuActions:f}=r,w=y&&f.length>1&&e,S=y&&t,E=y&&!t,A=(V=(F=this.selectedFeature)==null?void 0:F.layer)==null?void 0:V.title,P=(X=(U=this.selectedFeature)==null?void 0:U.layer)==null?void 0:X.id,N={[Ne.alignTopCenter]:s==="top-center",[Ne.alignBottomCenter]:s==="bottom-center",[Ne.alignTopLeft]:s==="top-left",[Ne.alignBottomLeft]:s==="bottom-left",[Ne.alignTopRight]:s==="top-right",[Ne.alignBottomRight]:s==="bottom-right",[Ne.isDocked]:S,[Ne.shadow]:E,[Ne.isDockedTopLeft]:h==="top-left",[Ne.isDockedTopCenter]:h==="top-center",[Ne.isDockedTopRight]:h==="top-right",[Ne.isDockedBottomLeft]:h==="bottom-left",[Ne.isDockedBottomCenter]:h==="bottom-center",[Ne.isDockedBottomRight]:h==="bottom-right",[Ne.isFeatureMenuOpen]:i,[Ne.isActionsMenuOpen]:w};return ue("div",{class:this.classes(Ne.base,N),role:"presentation","data-layer-title":A,"data-layer-id":P,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},y?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return ue("span",{"aria-hidden":"true",class:this.classes(Ne.icon,Ne.iconLoading,Ne.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?ue("div",{key:ol("loading-container"),role:"presentation",class:Ne.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=wh(this.container),t={[Ne.iconRightTriangleArrow]:e,[Ne.paginationPreviousIconRTL]:e,[Ne.iconLeftTriangleArrow]:!e,[Ne.paginationPreviousIconLTR]:!e};return ue("span",{"aria-hidden":"true",class:this.classes(Ne.icon,t)})}renderPreviousButton(){const{messages:e}=this;return ue("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(Ne.button,Ne.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=wh(this.container),t={[Ne.iconLeftTriangleArrow]:e,[Ne.paginationNextIconRTL]:e,[Ne.iconRightTriangleArrow]:!e,[Ne.paginationNextIconLTR]:!e};return ue("span",{"aria-hidden":"true",class:this.classes(Ne.icon,t)})}renderNextButton(){const{messages:e}=this;return ue("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(Ne.button,Ne.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return ue("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(Ne.button,Ne.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[Ne.iconUndock]:e,[Ne.iconDock]:!e,[Ne.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[Ne.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[Ne.iconDockToTop]:!e&&t==="top-center",[Ne.iconDockToBottom]:!e&&t==="bottom-center"};return ue("span",{"aria-hidden":"true",class:this.classes(i,Ne.icon)})}renderDockButton(){var s,h,y;const{dockEnabled:e,messages:t}=this,i=(h=(s=this.viewModel)==null?void 0:s.view)==null?void 0:h.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((y=this.dockOptions)==null?void 0:y.buttonEnabled)?ue("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(Ne.button,Ne.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,h={[Ne.headerContainerButton]:i},y=ue(d3,{level:this.headingLevel,class:Ne.headerTitle,innerHTML:e}),f=i?ue("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Ne.headerContainer,h),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},y):ue("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(Ne.headerContainer,h)},y);return e?f:null}renderCloseIcon(){return ue("span",{"aria-hidden":"true",class:this.classes(Ne.icon,Ne.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?ue("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:Ne.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return ue("header",{class:Ne.header},this.renderTitle(),ue("div",{class:Ne.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:r}=this.viewModel;return t&&!i?ue("article",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:Ne.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,h=i?s.close:s.open,{menuActions:y}=r;return y.length?ue("div",{key:ol("actions-menu-button"),class:this.classes(Ne.button,Ne.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":h,title:h},ue("span",{"aria-hidden":"true",class:Ne.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?ue("ul",{id:e,role:"menu","aria-labelledby":t,key:ol("actions"),class:Ne.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(h=>this.renderAction({action:h,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?ue("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:Ne.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?ue("section",{key:ol("navigation"),class:this.classes(Ne.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,h=!!r.length,y={[Ne.footerHasPagination]:e,[Ne.footerHasActions]:s,[Ne.footerHasActionsMenu]:h};return e||s?ue("div",{key:ol("feature-buttons"),class:this.classes(Ne.footer,y)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=Aa(e.selectedFeatures,{total:t.length});return ue("section",{key:ol("menu"),class:Ne.featureMenu},ue("strong",{class:Ne.featureMenuHeader},r),ue("nav",{bind:this,class:Ne.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:KS},this.renderFeatureMenu(),ue("div",{class:Ne.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?ue("div",{class:Ne.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:ue("div",{key:ol("pointer"),class:Ne.pointer,role:"presentation"},ue("div",{class:this.classes(Ne.pointerDirection,Ne.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:h,hasContent:y,contentCollapsed:f,visibleElements:w}=this,{title:S}=this.viewModel,E=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",A=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",P={[Ne.shadow]:e,[Ne.isCollapsible]:h,[Ne.isCollapsed]:f};return ue("div",{class:this.classes(Ne.main,Ne.widget,P),tabIndex:w.closeButton?null:-1,role:"dialog","aria-labelledby":S?r:"","aria-describedby":y&&!f?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),A?this.renderFooter():null,A?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?ue("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return ue("span",{key:"text",class:Ne.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[Ne.iconLoading]:e.active,[Ne.rotating]:e.active,[Ne.icon]:!!t,[Ne.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),ue("span",{key:"icon","aria-hidden":"true",class:this.classes(Ne.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[Ne.action]:t.type!=="toggle",[Ne.actionToggle]:t.type==="toggle",[Ne.actionToggleOn]:t.type==="toggle"&&t.value,[Ne.buttonDisabled]:t.disabled},h=[this.renderActionIcon(t),this.renderActionText(r)],y=i==="menu-item"?ue("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(Ne.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},h):ue("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(Ne.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},h);return t.visible?y:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:h}=this.viewModel,y=e===h,f={[Ne.featureMenuSelected]:y},w=y?ue("span",{key:ol(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:Ne.iconCheckMark}):null,S=ue("span",{innerHTML:e.title||r.untitled});return ue("li",{role:"menuitem",tabIndex:-1,key:ol(`feature-menu-feature-${s}`),class:this.classes(f,Ne.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},ue("span",{class:Ne.featureMenuTitle},S,w))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?ue("ol",{class:Ne.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,h=i==null?void 0:i.attributes,y=s==="zoom-to-feature"?Aa(e.title,{messages:t}):s==="remove-selected-feature"?Aa(e.title,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?Aa(e.title,{messages:t}):e.title;return y&&h?Aa(y,h):y}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,h=s||r?r:Ne.iconDefaultAction;return h&&i?Aa(h,i):h}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?Aa(r,i):r}_createFeatureUpdatedAnimation(){return fhe("enter",Ne.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add($e(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(h=>h.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new Je:t.slice(0,i),menuActions:r?new Je:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Vo(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Vo(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=Vo(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),h=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+h)%h].focus()):(e.stopPropagation(),s[(r-1+h)%h].focus())}_handleActionMenuItemKeyup(e){const t=Vo(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,h=s.findIndex(w=>w.uid===r);if(!i)return;const y=i.querySelectorAll("li"),f=y.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),y[y.length-1].focus()):(e.stopPropagation(),y[0].focus()):(e.stopPropagation(),y[(h+1+f)%f].focus()):(e.stopPropagation(),y[(h-1+f)%f].focus())}_handleMainKeyup(e){const t=Vo(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await kh(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=$e(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,Fk)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:h}=e;if(isNaN(i)||isNaN(t)||!h||!r)return!1;const y=h.padding;return s==="right"&&r.x+i/2>h.width-y.right||s==="left"&&r.x-i/2<y.left||s==="top"&&r.y-t<y.top||s==="bottom"&&r.y+t>h.height-y.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:h,view:y}=s;if(oe(h)||!y||!i)return"top-center";if(!this._isScreenLocationWithinView(h,y))return this._get("currentAlignment")||"top-center";function f(he){return parseInt(he.replace(/[^-\d\.]/g,""),10)}const w=r?window.getComputedStyle(r,null):null,S=w?f(w.getPropertyValue("max-height")):0,E=w?f(w.getPropertyValue("height")):0,{height:A,width:P}=i.getBoundingClientRect(),N=P+t,F=Math.max(A,S,E)+t,V=this._isOutsideView({popupHeight:F,popupWidth:N,screenLocation:h,side:"right",view:y}),U=this._isOutsideView({popupHeight:F,popupWidth:N,screenLocation:h,side:"left",view:y}),X=this._isOutsideView({popupHeight:F,popupWidth:N,screenLocation:h,side:"top",view:y}),re=this._isOutsideView({popupHeight:F,popupWidth:N,screenLocation:h,side:"bottom",view:y});return U?X?"bottom-right":"top-right":V?X?"bottom-left":"top-left":X?re?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return wh(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var y;if(e!=="auto")return e;const t=(y=this.viewModel)==null?void 0:y.view,i=wh(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-r.left-r.right,{breakpoints:h}=t;return h&&s<=h.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&(e.style.top=r.top,e.style.left=r.left,e.style.bottom=r.bottom,e.style.right=r.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:h}=this,y=r/2,f=i.height-t,w=i.width-e,{padding:S}=this.view;return s==="bottom-center"?{top:t+h-S.top,left:e-y-S.left}:s==="top-left"?{bottom:f+h-S.bottom,right:w+h-S.right}:s==="bottom-left"?{top:t+h-S.top,right:w+h-S.right}:s==="top-right"?{bottom:f+h-S.bottom,left:e+h-S.left}:s==="bottom-right"?{top:t+h-S.top,left:e+h-S.left}:s==="top-center"?{bottom:f+h-S.bottom,left:e-y-S.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(oe(e)||!t)return;const s=this._calculateFullWidth(t),h=this._calculateAlignmentPosition(e.x,e.y,r,s);return h?{top:h.top!==void 0?`${h.top}px`:"auto",left:h.left!==void 0?`${h.left}px`:"auto",bottom:h.bottom!==void 0?`${h.bottom}px`:"auto",right:h.right!==void 0?`${h.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[h,y]=t,{width:f,height:w}=i;return r<=f&&h>f||r>f&&h<=f||s<=w&&y>w||s>w&&y<=w}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,h=[],y=[];h[0]=e[0]-r,h[1]=e[1]-s,y[0]=t[0]-r,y[1]=t[1]-s;const{dockOptions:f}=this,w=f.breakpoint;this._dockingThresholdCrossed(h,y,w)&&this._setDockEnabledForViewSize(f),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var f,w;const t=e.breakpoint,i=(w=(f=this.viewModel)==null?void 0:f.view)==null?void 0:w.ui;if(!i)return!1;const{width:r,height:s}=i;if(isNaN(r)||isNaN(s))return!1;const h=t.hasOwnProperty("width")&&r<=t.width,y=t.hasOwnProperty("height")&&s<=t.height;return h||y}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Aa(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,jk),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new Nye({view:e}),e.ui.add(this._spinner,{key:jk,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(h=>h.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};g([x({readOnly:!0})],tt.prototype,"actionsMenuId",null),g([x({readOnly:!0})],tt.prototype,"actionsMenuButtonId",null),g([x({readOnly:!0})],tt.prototype,"featureMenuId",null),g([x({readOnly:!0})],tt.prototype,"titleId",null),g([x({readOnly:!0})],tt.prototype,"contentId",null),g([x({readOnly:!0})],tt.prototype,"hasContent",null),g([x({readOnly:!0})],tt.prototype,"featureNavigationVisible",null),g([x({readOnly:!0})],tt.prototype,"collapsible",null),g([x({readOnly:!0})],tt.prototype,"featureMenuVisible",null),g([x({readOnly:!0})],tt.prototype,"contentCollapsed",null),g([x({readOnly:!0})],tt.prototype,"dividedActions",null),g([We("viewModel.actions")],tt.prototype,"actions",void 0),g([x()],tt.prototype,"actionsMenuOpen",null),g([x()],tt.prototype,"alignment",void 0),g([We("viewModel.autoCloseEnabled")],tt.prototype,"autoCloseEnabled",void 0),g([We("viewModel.autoOpenEnabled")],tt.prototype,"autoOpenEnabled",void 0),g([We("viewModel.defaultPopupTemplateEnabled")],tt.prototype,"defaultPopupTemplateEnabled",void 0),g([We("viewModel.content")],tt.prototype,"content",void 0),g([x()],tt.prototype,"collapsed",void 0),g([x()],tt.prototype,"collapseEnabled",void 0),g([x({readOnly:!0})],tt.prototype,"currentAlignment",null),g([x({readOnly:!0})],tt.prototype,"currentDockPosition",null),g([x()],tt.prototype,"dockOptions",null),g([x()],tt.prototype,"dockEnabled",void 0),g([We("viewModel.featureCount")],tt.prototype,"featureCount",void 0),g([x()],tt.prototype,"featureMenuOpen",void 0),g([We("viewModel.features")],tt.prototype,"features",void 0),g([We("viewModel.goToOverride")],tt.prototype,"goToOverride",void 0),g([x()],tt.prototype,"headingLevel",void 0),g([We("viewModel.highlightEnabled")],tt.prototype,"highlightEnabled",void 0),g([We("viewModel.location")],tt.prototype,"location",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],tt.prototype,"label",void 0),g([x()],tt.prototype,"maxInlineActions",void 0),g([x(),Sr("esri/widgets/Popup/t9n/Popup")],tt.prototype,"messages",void 0),g([x(),Sr("esri/t9n/common")],tt.prototype,"messagesCommon",void 0),g([We("viewModel.promises")],tt.prototype,"promises",void 0),g([We("viewModel.selectedFeature")],tt.prototype,"selectedFeature",void 0),g([We("viewModel.selectedFeatureIndex")],tt.prototype,"selectedFeatureIndex",void 0),g([x({readOnly:!0})],tt.prototype,"selectedFeatureWidget",null),g([x()],tt.prototype,"spinnerEnabled",void 0),g([We("viewModel.title")],tt.prototype,"title",void 0),g([We("viewModel.updateLocationEnabled")],tt.prototype,"updateLocationEnabled",void 0),g([We("viewModel.view")],tt.prototype,"view",void 0),g([x({type:vV}),Lpe(["triggerAction","trigger-action"])],tt.prototype,"viewModel",void 0),g([We("viewModel.visible")],tt.prototype,"visible",void 0),g([x()],tt.prototype,"visibleElements",void 0),g([Mt("visibleElements")],tt.prototype,"castVisibleElements",null),g([jn()],tt.prototype,"_close",null),g([jn()],tt.prototype,"_toggleDockEnabled",null),g([jn()],tt.prototype,"_toggleFeatureMenu",null),g([jn()],tt.prototype,"_toggleActionsMenu",null),g([jn()],tt.prototype,"_triggerAction",null),g([jn()],tt.prototype,"_selectFeature",null),g([jn()],tt.prototype,"_next",null),g([jn()],tt.prototype,"_previous",null),tt=g([K(bV)],tt);const Uk=tt,M9=[0,0];function wme(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return M9[0]=i.left+t.pageXOffset,M9[1]=i.top+t.pageYOffset,M9}function qk(e){e&&(hj(e),e.parentNode&&e.parentNode.removeChild(e))}function _me(e){const t=document.createElement("div");return e.appendChild(t),t}const c1=16,sv=750,xme=512,Sme=2,Mme=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:c1,time:sv},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([$e(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),$e(()=>this.interacting,r=>{const{surface:s}=this;s&&s.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add($e(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const r=this._get("container");if(r===i)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),qk(this.root),this._set("root",null),eA(this.userContent,r),qk(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const h=document.createElement("div");h.className="esri-view-user-storage",eA(i,h),i.appendChild(h),this._set("userContent",h);const y=document.createElement("div");y.className="esri-view-root",i.insertBefore(y,i.firstChild),this._set("root",y);const f=document.createElement("div");f.className="esri-view-surface",f.setAttribute("role","application"),f.tabIndex=0,y.appendChild(f),this._set("surface",f);const w=new hA;y.appendChild(w.surface),this._set("overlay",w),$e(()=>w.needsRender,S=>{S&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=A0({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add($e(()=>this.size,S=>{const[E,A]=S,P="esri-view-surface--inset-outline";E>=document.body.clientWidth||A>=document.body.clientHeight?f.classList.add(P):f.classList.remove(P)},Wt),s),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new Uk({view:this})}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const h=this.position;return i-=h[0],r-=h[1],s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const h=this.position;return i+=h[0],r+=h[1],s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([$e(()=>this.root,r=>{i.container=r?_me(r):null},Wt),$e(()=>this.popup,(r,s)=>{const h="popup",y="manual";s&&i.remove(s,h),r&&(r.view=i.view,i.add(r,{key:h,position:y}))},Wt)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=c1,i.time=sv,this.handles.add([(()=>{const r=()=>{i.freq=c1,i.time=sv};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),A0({prepare:r=>{const s=this._measure(),h=this._freqInfo;if(h.time+=r.deltaTime,s&&(h.freq=c1,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const y=this._position();h.freq=y||s?c1:Math.min(sv,h.freq*Sme),!s&&h.freq>=xme&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const h=this.width,y=this.height;return r===h&&s===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:h,oldHeight:y,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=wme(i);return(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return g([x({value:null,cast:i=>V7(i)})],t.prototype,"container",null),g([x({readOnly:!0})],t.prototype,"focused",null),g([x({readOnly:!0})],t.prototype,"height",void 0),g([x({type:Uk})],t.prototype,"popup",null),g([x({type:hA})],t.prototype,"overlay",void 0),g([x({readOnly:!0})],t.prototype,"position",void 0),g([x({readOnly:!0})],t.prototype,"resizing",void 0),g([x({readOnly:!0})],t.prototype,"root",void 0),g([x({value:null,readOnly:!0})],t.prototype,"size",null),g([x({readOnly:!0})],t.prototype,"surface",void 0),g([x({readOnly:!0})],t.prototype,"suspended",void 0),g([x()],t.prototype,"ui",void 0),g([x({readOnly:!0})],t.prototype,"userContent",void 0),g([x({readOnly:!0})],t.prototype,"width",void 0),g([x()],t.prototype,"widthBreakpoint",void 0),t=g([K("esri.views.DOMContainer")],t),t};function Eme(e){return e&&"focus"in e}const Tme=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:h,layerViewsAndGraphics:y,clientOnlyGraphics:f}=await this._prepareFetchPopupFeatures(i,r),w=Promise.resolve(f),S=this._queryLayerPopupFeatures(h,y,r),E=S.map(A=>A.promise);return{location:s,clientOnlyGraphics:f,allGraphicsPromise:pP([w,...E]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:S}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:h,graphics:y})=>{const f={clientGraphics:y,event:Y(s)?s.event:null,signal:Y(s)?s.signal:null,defaultPopupTemplateEnabled:!!Y(s)&&!!s.defaultPopupTemplateEnabled},w=h.fetchPopupFeatures(i,f);return{layerView:h,promise:w}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(Y(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:h,location:y}=await this._popupHitTestGraphics(i,r),f=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:w,clientOnlyGraphics:S}=this._graphicsPerFetchPopupLayerView(s,f);return{clientOnlyGraphics:S,layerViewsAndGraphics:w,queryArea:h,location:y}}async _popupHitTestGraphics(i,r){const{results:s,mapPoint:h}=await this.popupHitTest(i),y=s.filter(w=>w.type==="graphic"&&this._isValidPopupGraphic(w.graphic,r)),f=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(w=>w.graphic),queryArea:h,location:h||f}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),Y(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return Y(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],h=new Map,y=r.map(f=>{const w=[];return"layer"in f?h.set(f.layer,w):h.set(f.graphics,w),{layerView:f,graphics:w}});for(const f of i){const w=h.get(f.layer)||h.get(f.sourceLayer)||null;w?w.push(f):s.push(f)}return{layerViewsAndGraphics:y,clientOnlyGraphics:s}}};return t=g([K("esri.views.PopupView")],t),t};Le.getLogger("esri.core.support.OwningCollection");let Uy=class extends nu(Je){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{oe(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Je.ofType(this.itemType.Type))(e):new Je(e)}};function v6(e,t){return{type:e,cast:wR,set(i){const r=$p(i,this._get(t),e);r.owner=this,this._set(t,r)}}}g([x()],Uy.prototype,"owner",null),Uy=g([K("esri.core.support.OwningCollection")],Uy);const $me=Le.getLogger("esri.support.AnalysesCollection");let s2=class extends Uy{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{oe(t.item)||t.item.parent===this.owner&&($me.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};s2=g([K("esri.support.AnalysesCollection")],s2);let bp=class extends Uy{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};g([gM({Type:Zn,ensureType:ji(Zn)})],bp.prototype,"itemType",void 0),bp=g([K("esri.support.GraphicsCollection")],bp);let Ku=class extends qe{constructor(e){super(e),this.view=null,this.baseLayerViews=new Je,this.referenceLayerViews=new Je,this._loadingHandle=$e(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},Wt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};g([x({constructOnly:!0})],Ku.prototype,"view",void 0),g([x({readOnly:!0})],Ku.prototype,"baseLayerViews",void 0),g([x({readOnly:!0})],Ku.prototype,"referenceLayerViews",void 0),g([x({readOnly:!0})],Ku.prototype,"suspended",null),g([x({type:Boolean,readOnly:!0})],Ku.prototype,"updating",null),Ku=g([K("esri.views.BasemapView")],Ku);const Ime=Le.getLogger("esri.views.LayerViewManager");class Ame{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Jl(),this._started=!1,this.done=!1,to(this._controller.signal,()=>{const s=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,h;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let y,f;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)y=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ne("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);di(t),y="default"in E?new E.default({layer:i,view:r}):new E({layer:i,view:r})}const w=()=>{f=Hn(f),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};f=to(t,w),di(t);try{await y.when()}catch(E){throw w(),E}if(!((h=(s=this._map)==null?void 0:s.allLayers)==null?void 0:h.includes(i)))return w(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:r,layerView:y}),r.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:r,error:y}),r.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}}let Vs=class extends Ap{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new b0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(oe(this._workPromise)&&(this._workPromise=Jl()),this.handles.remove("reschedule"),this.handles.add(X0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var h,y,f;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),oe(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new j0({getCollections:()=>this._rootCollectionNames.map(w=>this.get(w)),getChildrenFunction:w=>w&&"layers"in w?w.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const w of i)this._createLayerView(w);this._refreshCollections();for(const[w,S]of this._layerLayerViewInfoMap)i.includes(w)||(this._layerLayerViewInfoMap.delete(S.layer),S.destroy());const r=i.filter(w=>w.type==="group").map(w=>w.layers),s=[(h=t==null?void 0:t.ground)==null?void 0:h.layers,(y=t==null?void 0:t.basemap)==null?void 0:y.baseLayers,(f=t==null?void 0:t.basemap)==null?void 0:f.referenceLayers,t==null?void 0:t.layers,...r].filter(w=>!!w);this.handles.add(s.map(w=>this._watchUpdatingTracking.addOnCollectionChange(()=>w,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([ro(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),$e(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),ys)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return Y(this._workPromise)||this._watchUpdatingTracking.updating||Em(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const h=this._layerLayerViewInfoMap.get(s);if(!h||!h.layerView)continue;const y=h.layerView;y.layer=s,y.parent=i,t.getItemAt(r)!==y&&t.splice(r,0,y),s.layers&&this._populateLayerViewsOwners(s.layers,y.layerViews,y),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Ame(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(Br(i)||i.name==="cancelled:layerview-create")||Ime.error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};g([x()],Vs.prototype,"_workPromise",void 0),g([x({readOnly:!0})],Vs.prototype,"_watchUpdatingTracking",void 0),g([x({readOnly:!0})],Vs.prototype,"_layersToLayerViews",null),g([x({readOnly:!0})],Vs.prototype,"_rootCollectionNames",null),g([x()],Vs.prototype,"layerViewImporter",void 0),g([x()],Vs.prototype,"supportsGround",void 0),g([x({readOnly:!0})],Vs.prototype,"updating",null),g([x({readOnly:!0})],Vs.prototype,"updatingRemaining",null),g([x({constructOnly:!0})],Vs.prototype,"view",void 0),Vs=g([K("esri.views.LayerViewManager")],Vs);const kme=Vs;let as=class extends qe{constructor(e){super(e),this.factor=1.5,this.offset=_r(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};g([x({type:Number})],as.prototype,"factor",void 0),g([x({nonNullable:!0})],as.prototype,"offset",void 0),g([x()],as.prototype,"position",void 0),g([x({type:Number,range:{min:0}})],as.prototype,"size",void 0),g([x()],as.prototype,"maskUrl",void 0),g([x()],as.prototype,"maskEnabled",void 0),g([x()],as.prototype,"overlayUrl",void 0),g([x()],as.prototype,"overlayEnabled",void 0),g([x({readOnly:!0})],as.prototype,"version",null),g([x({type:Boolean})],as.prototype,"visible",void 0),as=g([K("esri.views.Magnifier")],as);const wV=as;let Lb=class extends qe{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.push(new Bk(r,s,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((r,s)=>this._tasks.unshift(new Bk(r,s,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=eo(t.signal);if(i&&!t.abortCallback)t.reject(bi());else{const r=i?t.abortCallback(bi()):t.callback(e);ru(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=bi();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};g([x()],Lb.prototype,"running",void 0),Lb=g([K("esri.layers.support.PromiseQueue")],Lb);class Bk{constructor(t,i,r,s,h){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=h}}let cy=class extends qe{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};g([x()],cy.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),g([x()],cy.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),cy=g([K("esri.views.support.DebugFlags")],cy);const Cme=new cy,Ome=Le.getLogger("esri.views.support.Scheduler");var Tt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Tt||(Tt={}));const ka=0,Hk=new Map([[Tt.RESOURCE_CONTROLLER,ka],[Tt.SLIDE,ka],[Tt.STREAM_DATA_LOADER,ka],[Tt.ELEVATION_QUERY,ka],[Tt.TERRAIN_SURFACE,1],[Tt.SURFACE_GEOMETRY_UPDATES,1],[Tt.GRAPHICS_CORE,2],[Tt.I3S_CONTROLLER,2],[Tt.POINT_CLOUD_LAYER,2],[Tt.FEATURE_TILE_FETCHER,2],[Tt.OVERLAY,4],[Tt.STAGE,4],[Tt.GRAPHICS_DECONFLICTOR,4],[Tt.FILTER_VISIBILITY,4],[Tt.SCALE_VISIBILITY,4],[Tt.FRUSTUM_VISIBILITY,4],[Tt.POINT_OF_INTEREST_FREQUENT,6],[Tt.POINT_OF_INTEREST_INFREQUENT,30],[Tt.LABELER,8],[Tt.FEATURE_QUERY_ENGINE,8],[Tt.FEATURE_TILE_TREE,16],[Tt.FEATURE_TILE_TREE_ACTIVE,ka],[Tt.ELEVATION_ALIGNMENT,12],[Tt.TEXT_TEXTURE_ATLAS,12],[Tt.CLOUDS_GENERATOR,12],[Tt.TEXTURE_UNLOAD,12],[Tt.LINE_OF_SIGHT_TOOL,16],[Tt.LINE_OF_SIGHT_TOOL_INTERACTIVE,ka],[Tt.SNAPPING,ka],[Tt.SHADOW_ACCUMULATOR,30]]);function Wk(e){return Hk.has(e)?Hk.get(e):typeof e=="number"?e:1}var hs;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(hs||(hs={}));const Jk=6.5,Kk=1,Pme=30,Yk=1e3/30,Zk=100,Xk=.9;var b6,Zh;(function(e){let t=class extends qe{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new wy("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=hs.INTERACTING,this._tasks=new dp,this._runQueue=new dp,this._load=0,this._idleStateCallbacks=new dp,this._idleUpdatesStartFired=!1,this._maxReschedule=ov,this._forceTask=!1,this._debug=!1,this._debugHandle=$e(()=>Cme.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,Wt);for(const y of Object.keys(Tt))this.performanceInfo.tasks.set(Tt[y],new wy(Tt[y]));let s;const h=this;this._test={get state(){return Gr(s,h._state)},set state(y){s=y},FRAME_SAFETY_BUDGET:Jk,INTERACTING_BUDGET:Yk,IDLE_BUDGET:Zk,get availableBudget(){return h._budget.budget},usedBudget:0,getBudget:()=>h._budget,setBudget:y=>h._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),Hn(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=ov,this._schedule(),this.frame()))}))}registerTask(s,h){const y=Wk(s),f=new i(this,s,h,y);return this._tasks.push(f),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new wy(s)),f}registerIdleStateCallbacks(s,h){const y={idleBegin:s,idleEnd:h};this._idleStateCallbacks.push(y),this.state===hs.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const f=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(w){f._idleUpdatesStartFired&&(y.idleEnd(),f._state===hs.IDLE&&w()),y.idleBegin=w},set idleEnd(w){y.idleEnd=w}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==hs.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(h=>h.idleEnd())))}get state(){return oe(this._test.state)?this._state:this._test.state}updateBudget(s){this._test.usedBudget=0;let h=Jk,y=s.frameDuration,f=Kk;switch(this.state){case hs.IDLE:h=0,y=Math.max(Zk,s.frameDuration),f=Pme;break;case hs.INTERACTING:y=Math.max(Yk,s.frameDuration);case hs.ANIMATING:}return y=y-s.elapsedFrameTime-h,this.state!==hs.IDLE&&y<Kk&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,f),this._budget.reset(y,this.state),this._maxReschedule=ov,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case hs.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case hs.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s)}_updateTask(s){this._tasks.forAll(h=>{h.name===s&&h.setPriority(s)})}_getState(s){if(this._runQueue.some(y=>y.name===s))return Zh.SCHEDULED;let h=Zh.IDLE;return this._tasks.forAll(y=>{y.name===s&&y.needsUpdate&&(y.schedulePriority<=1?h=Zh.READY:h!==Zh.READY&&(h=Zh.WAITING))}),h}_getRuntime(s){let h=0;return this._tasks.forAll(y=>{y.name===s&&(h+=y.runtime)}),h}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&s.set(y.name,(s.get(y.name)||0)+1)}),s.size===0)return null;let h="";return s.forEach((y,f)=>{h+=y>1?` ${y}x ${f}`:` ${f}`}),h}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((h,y)=>y.needsUpdate?++h:h,0);this._load=this._load*Xk+s*(1-Xk)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===ka&&s.needsUpdate&&!this._runQueue.includes(s)&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,h=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==ka&&(s=!0,h=Math.max(h,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!s)return this.updating=!1,!1;this._maxReschedule===ov&&(this._maxReschedule=h),--this._maxReschedule}return this.updating=!0,!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const h=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)}catch(w){Ome.error(`Exception in task "${y.name}"`,w)}y.schedulePriority=y.basePriority;const f=this._budget.now()-h;if(y.runtime+=f,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+f),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",y.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(w=>w.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this.updating=this._tasks.some(h=>h.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(Tt))this._frameTaskTimes.set(Tt[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((h,y)=>this.performanceInfo.tasks.get(y).record(h)),this.performanceInfo.total.record(s)}get test(){return this._test}};g([x()],t.prototype,"updating",void 0),t=g([K("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends qe{constructor(s,h,y,f){super({}),this._scheduler=s,this.name=h,this._basePriority=f,this.runtime=0,this._queue=new Lb,this._handles=new er,this.schedulePriority=this._basePriority,this.task=Y(y)?y:this._queue,this._handles.add(sn(()=>this.task.running,()=>s.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(_V),this._scheduler.removeTask(this),this.schedule=w6.schedule,this.reschedule=w6.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const h=Wk(s);this._basePriority!==ka&&this.schedulePriority===0||(this.schedulePriority=h),this._basePriority=h}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,h,y){return this._queue.push(s,h,y)}reschedule(s,h,y){return this._queue.unshift(s,h,y)}processQueue(s){this._queue.runTask(s)}};g([x({constructOnly:!0})],i.prototype,"task",void 0),g([x({readOnly:!0})],i.prototype,"updating",null),i=g([K("esri.views.support.SchedulerTask")],i);class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=hs.IDLE,this._didWork=!1,this._enabled=!0}run(h){return!this.done&&(h()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(h){this._enabled=h}reset(h,y){this._begin=this.now(),this._budget=h,this._state=y,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r})(b6||(b6={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Zh||(Zh={}));const _V=(()=>{const e=new b6.Budget;return e.enabled=!1,e})();class Nme{remove(){}processQueue(){}schedule(t,i,r){try{if(eo(i)){const s=bi();return r?Promise.resolve(r(s)):Promise.reject(s)}return h5(t(_V))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const w6=new Nme,ov=Number.MAX_SAFE_INTEGER;let py=class extends qe{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Tt.TEXTURE_UNLOAD))!=null?i:w6}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(s.texture),this._stage.loadImmediate(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return Y(t)?`${e}.${t}px`:e}};g([x()],py.prototype,"_frameTask",void 0),g([x()],py.prototype,"updating",null),py=g([K("esri.views.3d.support.TextureCollection")],py);var Qk;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(Qk||(Qk={}));const xV=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],SV={};function MV(e){return!!SV[e]}function Rme(e){for(const t of e)if(!MV(t))return!1;return!0}xV.forEach(e=>{SV[e]=!0});class Lme{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:r},s)=>this.inputManager.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,r,s){const h=Array.isArray(t)?t:t.split(",");if(!Rme(h))return h.some(MV)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,f;Array.isArray(i)?f=i:(y=i,f=[]),typeof r=="function"?y=r:s=r,s=s!=null?s:ri.DEFAULT;const w=this._createUniqueGroupName(),S=new Fme(this.view,h,f,y);this.handlers.set(w,{handler:S,priority:s});for(const E of h){const A=this.handlerCounts.get(E)||0;this.handlerCounts.set(E,A+1)}return this.inputManager&&this.inputManager.installHandlers(w,[S],s),{remove:()=>this._removeHandler(w,h)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const r of i){const s=this.handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this.handlerCounts.delete(r):this.handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Fme extends Fr{constructor(t,i,r,s){super(!0),this.view=t;for(const h of i)switch(h){case"click":this.registerIncoming("click",r,y=>s(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",r,y=>s(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",r,y=>s(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,y=>s(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",r,y=>s(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",r,y=>{const f=this._wrapDrag(y);f&&s(f)});break;case"key-down":this.registerIncoming("key-down",r,y=>s(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",r,y=>s(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",r,y=>s(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,y=>s(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,y=>s(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,y=>s(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,y=>s(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,y=>s(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,y=>s(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,y=>{s(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",r,y=>{s(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",r,y=>{s(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:h,y,native:f,eventId:w}=t.data,{cancelable:S,timestamp:E}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:h,y,native:f,timestamp:E,screenPoint:_r(h,y),mapPoint:this._getMapPoint(h,y),eventId:w,cancelable:S,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:h,y,native:f,eventId:w}=t.data,{cancelable:S,timestamp:E}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:h,y,native:f,timestamp:E,mapPoint:this._getMapPoint(h,y),eventId:w,cancelable:S,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:h,y,native:f,eventId:w}=t.data,S=f.pointerId,{cancelable:E,timestamp:A}=t;return{type:"immediate-click",pointerId:S,pointerType:i,button:r,buttons:s,x:h,y,native:f,timestamp:A,mapPoint:this._getMapPoint(h,y),eventId:w,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:h,y,native:f,eventId:w}=t.data,S=f.pointerId,{cancelable:E,timestamp:A}=t;return{type:"immediate-double-click",pointerId:S,pointerType:i,button:r,buttons:s,x:h,y,native:f,timestamp:A,mapPoint:this._getMapPoint(h,y),eventId:w,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:h,y,native:f}=t.data,{cancelable:w,timestamp:S}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:h,y,native:f,timestamp:S,mapPoint:this._getMapPoint(h,y),cancelable:w,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(_r(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:h,pointerType:y,button:f}=i;if(h==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const w=i.pointer.native,S=i.buttons,{cancelable:E,timestamp:A}=t,P={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return h==="end"&&(this.latestDragStart=void 0),{type:"drag",action:h,x:r,y:s,origin:P,pointerType:y,button:f,buttons:S,radius:i.radius,angle:HN(i.angle),native:w,timestamp:A,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:N=>t.async(N),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:h,timestamp:y}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:y,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:h}=t;return{type:"key-up",key:i,native:r,timestamp:h,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:h,buttons:y,native:f,eventId:w}=t.data,S=f.pointerId,E=f.pointerType,{cancelable:A,timestamp:P}=t;return{type:i,x:r,y:s,pointerId:S,pointerType:E,button:h,buttons:y,native:f,timestamp:P,eventId:w,cancelable:A,stopPropagation:()=>t.stopPropagation(),async:N=>t.async(N),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:h,eventId:y}=t.data.currentEvent,{button:f}=t.data.startEvent,w=t.data.startEvent.native.pointerId,S=t.data.startEvent.native.pointerType,E=t.data.action,A={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:P,timestamp:N}=t;return{type:"pointer-drag",x:i,y:r,pointerId:w,pointerType:S,button:f,buttons:s,action:E,origin:A,native:h,timestamp:N,eventId:y,cancelable:P,stopPropagation:()=>t.stopPropagation(),async:F=>t.async(F),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:h,y,deltaY:f,native:w}=r;return{type:"mouse-wheel",x:h,y,deltaY:f,native:w,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:S=>t.async(S),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:h,timestamp:y}=t,{buttons:f,axes:w}=r;return{type:"gamepad",device:s,timestamp:y,action:i,buttons:f,axes:w,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:S=>t.async(S),preventDefault:()=>t.preventDefault()}}}var _m,eC,tC;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(_m||(_m={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(eC||(eC={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(tC||(tC={}));const jme=Le.getLogger("esri.views.interactive.interactiveToolUtils");function Dme(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return jme.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function o2(e){return e.visible&&e.getEditableFlag(_m.USER)&&e.getEditableFlag(_m.MANAGER)}function Gs(e){return _r(e.x,e.y)}function EV(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return _r(t.clientX-i.left,t.clientY-i.top)}function iC(e,t){return t instanceof Event?EV(e,t):Gs(t)}function rC(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class zme{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":nC(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!sC(t))break;const s=Gs(t),h=this._intersect(s,t.pointerType,i.forEachTool);if(oe(h))break;const y=this._findToolAndManipulatorByKey(h,i.forEachTool,av),f=Oa(y,S=>S.manipulator),w=Oa(y,S=>S.tool);!(Y(f)&&Y(w)&&f.interactive)||f.grabbable&&f.grabbableForEvent(t)||!f.grabbing||f.dragging||this._ungrabManipulatorBeforeDragging(f,w,t),Y(f)&&f.interactive&&f.grabbable&&f.grabbableForEvent(t)&&!f.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:h,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==h.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(h.tool)),f.grabbing=!0,f.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!sC(t))break;const s=this._grabbedManipulators.get(t.pointerId),h=this._draggedManipulators.get(t.pointerId),y=Oa(s||h,({key:E})=>E),f=this._findManipulatorByKey(y,i.forEachTool);if(oe(f))break;const w=Gs(t);w.x=Kn(w.x,0,i.view.width),w.y=Kn(w.y,0,i.view.height);const S=(s||h).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(f.dragging=!0,h?f.events.emit("drag",{action:"update",start:S,screenPoint:w}):f.events.emit("drag",{action:"start",start:S,screenPoint:w,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:y,start:S}));break;case"end":f.dragging=!1,h&&f.events.emit("drag",{action:"end",start:S,screenPoint:w}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Gs(t),h=this._intersect(s,t.pointerType,i.forEachTool),y=this._findToolAndManipulatorByKey(h,i.forEachTool,av);if(Vme(t)||i.forEachTool(E=>{if((!Y(y)||y.tool!==E||E.automaticManipulatorSelection)&&E.manipulators){let A=!1;E.manipulators.forEach(({manipulator:P})=>{P.selected&&(P.selected=!1,A=!0)}),A&&E.manipulatorSelectionChanged&&E.manipulatorSelectionChanged()}}),oe(y))break;const{manipulator:f,tool:w}=y;if(!f.interactive)break;f.selectable&&w.automaticManipulatorSelection&&(f.selected=!f.selected,w.manipulatorSelectionChanged&&w.manipulatorSelectionChanged());const S=t.native.shiftKey;f.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:S,stopPropagation:r});break}case"click":{const s=Gs(t),h=this._intersect(s,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(h,i.forEachTool);if(oe(y)||!y.interactive)break;const f=t.native.shiftKey;y.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:f}),r();break}case"double-click":{const s=Gs(t),h=this._intersect(s,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(h,i.forEachTool);if(oe(y)||!y.interactive)break;const f=t.native.shiftKey;y.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:f,stopPropagation:r});break}case"immediate-double-click":{const s=Gs(t),h=this._intersect(s,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(h,i.forEachTool);if(oe(y)||!y.interactive)break;const f=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:f,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Gs(r)}),this._grabbedManipulators.forEach(({key:s},h)=>{s.tool===i&&i.manipulators.findById(s.manipulatorId)===t&&this._grabbedManipulators.delete(h)})}_handlePointerEnd(t,i){const r=Oa(this._grabbedManipulators.get(t.pointerId),({key:h})=>h),s=this._findManipulatorByKey(r,i.forEachTool);Y(s)&&!s.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Gs(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let r=null;return Em(t,({key:s})=>{const h=this._findManipulatorByKey(s,i);return!!(Y(h)&&h.interactive&&"cursor"in h&&h.cursor)&&(r=h.cursor,!0)}),r}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),this._hoveredManipulators.forEach(({key:{tool:r}})=>{i.add(r)}),t(r=>{r.hasFocusedManipulators=i.has(r)})}clearPointers(t,i,r=!0,s){const h=y=>y.tool===t&&(oe(s)||y.manipulatorId===s);this._grabbedManipulators.forEach(({key:y,pointerType:f},w)=>{if(h(y)){this._grabbedManipulators.delete(w);const S=this._findManipulatorByKey(y,i);Y(S)&&(S.grabbing=!1,S.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:f}))}}),this._draggedManipulators.forEach(({key:y},f)=>{if(h(y)){this._draggedManipulators.delete(f);const w=this._findManipulatorByKey(y,i);Y(w)&&(w.dragging=!1,w.events.emit("drag",{action:"cancel"}))}}),r&&this._hoveredManipulators.forEach(({key:y},f)=>{if(h(y)){this._hoveredManipulators.delete(f);const w=this._findManipulatorByKey(y,i);Y(w)&&(w.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,r){let s=null;return r(h=>{if(h.manipulators==null||!o2(h))return!1;const y=h.manipulators.intersect(t,i);return!oe(y)&&(s={manipulatorId:y.id,tool:h},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(_r(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!nC(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Gs(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){const h=this._intersect(t,r,s);let y=this._findManipulatorByKey(h,s);const f=Oa(this._hoveredManipulators.get(i),({key:S})=>S),w=this._findManipulatorByKey(f,s);Y(y)&&!y.interactive&&(y=null),w!==y&&(Y(w)&&(w.hovering=!1),Y(y)?(y.hovering=!0,this._hoveredManipulators.set(i,{key:h})):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,av)?av.manipulator:null}_findToolAndManipulatorByKey(t,i,r){return oe(t)?null:(r.tool=null,r.manipulator=null,i(s=>{if(s!==t.tool||s.manipulators==null||!o2(s))return!1;const h=s.manipulators.findById(t.manipulatorId);return!!Y(h)&&(r.manipulator=h,r.tool=s,!0)}),r.manipulator?r:null)}}function nC(e){return e==="mouse"}function sC(e){return e.pointerType!=="mouse"||e.button===0}function Vme(e){return!!e.native.shiftKey}const av={manipulator:null,tool:null},Gme=Le.getLogger("esri.views.ToolViewManager"),oC="attached",E9="tools";let Tl=class extends Ap{constructor(e){super(e),this._manipulatorState=new zme,this.tools=new Je,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(xV,e=>{this._handleInputEvent(e)},ri.TOOL),...Dme(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(Y(e)&&!this.view.ready)return void Gme.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),Y(t)&&t.deactivate(),Y(e)&&e.activate(),this._removeIncompleteTools(e);const i=oe(this.activeTool);for(const r of this.tools){r.setEditableFlag(_m.MANAGER,i||r===this.activeTool);const s=o2(r);!i&&s||this._manipulatorState.clearPointers(r,this._forEachTool,!s)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new py(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([$e(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),Nh(()=>this._set("textures",Pr(this.textures)))],oC)):this.handles.add($e(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){Y(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(oC)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};Y(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:r=>{this.activeTool=r},view:this.view}),!t&&Y(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(E9),this._forEachTool(e=>{if(e instanceof qe){const t=$e(()=>[e.cursor,e.visible,e.editable],()=>{o2(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,E9)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),E9)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!Y(i.cursor)||!i.visible||!oe(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(oe(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};g([x({constructOnly:!0,nonNullable:!0})],Tl.prototype,"view",void 0),g([x({readOnly:!0,nonNullable:!0})],Tl.prototype,"textures",void 0),g([x({value:null})],Tl.prototype,"activeTool",null),g([x({readOnly:!0,type:Je})],Tl.prototype,"tools",void 0),g([x({readOnly:!0})],Tl.prototype,"cursor",void 0),g([x({readOnly:!0})],Tl.prototype,"updating",null),Tl=g([K("esri.views.ToolViewManager")],Tl);const Ume=Tl;let Wd=class extends qe{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":qme.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Bme[this.deviceType]}};g([x({nonNullable:!0,readOnly:!0})],Wd.prototype,"nativeIndex",void 0),g([x({type:String,readOnly:!0})],Wd.prototype,"deviceType",null),g([x({type:Number,readOnly:!0})],Wd.prototype,"axisThreshold",null),Wd=g([K("esri.views.input.gamepad.GamepadInputDevice")],Wd);const qme=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Bme={standard:.15,spacemouse:.025,unknown:0},kE=Wd;let dy=class extends qe{constructor(...e){super(...e),this.devices=new Je,this.enabledFocusMode="document"}};g([x({type:Je.ofType(kE),readOnly:!0})],dy.prototype,"devices",void 0),g([x({type:["document","view","none"]})],dy.prototype,"enabledFocusMode",void 0),dy=g([K("esri.views.input.gamepad.GamepadSettings")],dy);const Hme=dy;let Fb=class extends qe{constructor(){super(...arguments),this.gamepad=new Hme}};g([x({readOnly:!0})],Fb.prototype,"gamepad",void 0),Fb=g([K("esri.views.input.Input")],Fb);const Wme=Fb;let Yu=class extends qe{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};g([x({type:Boolean,nonNullable:!0})],Yu.prototype,"enabled",void 0),g([x({type:kE})],Yu.prototype,"device",void 0),g([x({type:["pan","zoom"],nonNullable:!0})],Yu.prototype,"mode",void 0),g([x({type:["forward-down","forward-up"],nonNullable:!0})],Yu.prototype,"tiltDirection",void 0),g([x({type:Number,nonNullable:!0})],Yu.prototype,"velocityFactor",void 0),Yu=g([K("esri.views.navigation.gamepad.GamepadSettings")],Yu);const TV=Yu;let Rc=class extends qe{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new TV,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};g([x({type:Boolean})],Rc.prototype,"browserTouchPanEnabled",void 0),g([x({type:TV,nonNullable:!0})],Rc.prototype,"gamepad",void 0),g([x({type:Boolean})],Rc.prototype,"momentumEnabled",void 0),g([x({type:Boolean})],Rc.prototype,"mouseWheelZoomEnabled",void 0),Rc=g([K("esri.views.navigation.Navigation")],Rc);const $V=Rc;function E4e(e,t,i){const r=IV(e),s=t,h=Jme(r,s,i);if(r){const y=zm.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&y!==r.heightUnit){const f=new ne("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${y})`,{horizontalUnit:y});return new ne("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:f})}}if(!Kme(e)||h===Dn.Unsupported)return new ne("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(h){case Dn.Units:{const y=r.heightUnit||"unknown",f=s.heightUnit||"unknown",w=new ne("layerview:incompatible-height-unit",`The vertical units of the layer (${y}) must match the vertical units of the scene (${f})`,{layerUnit:y,sceneUnit:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:w})}case Dn.HeightModel:{const y=r.heightModel||"unknown",f=s.heightModel||"unknown",w=new ne("layerview:incompatible-height-model",`The height model of the layer (${y}) must match the height model of the scene (${f})`,{layerHeightModel:y,sceneHeightModel:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:w})}case Dn.CRS:{const y=r.vertCRS||"unknown",f=s.vertCRS||"unknown",w=new ne("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${y}) must match the vertical datum of the scene (${f})`,{layerDatum:y,sceneDatum:f});return new ne("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:w})}}return null}function Jme(e,t,i){if(!aC(e)||!aC(t))return Dn.Unsupported;if(e==null||t==null)return Dn.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Dn.Units;if(e.heightModel!==t.heightModel)return Dn.HeightModel;switch(e.heightModel){case"gravity-related-height":return Dn.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Dn.Ok:Dn.CRS;default:return Dn.Unsupported}}var Dn;function aC(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function Kme(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!CV(e)}function IV(e){const t=e.url&&Ch(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&Y(t)&&t.serverType==="ImageServer")&&AV(e)&&e.heightModelInfo?e.heightModelInfo:CV(e)?zm.deriveUnitFromSR(Zme,e.spatialReference):null}function AV(e){return"heightModelInfo"in e}function kV(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function CV(e){return kV(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):OV(e)}function Yme(e){return e.layers!=null||OV(e)||kV(e)||AV(e)}function OV(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Dn||(Dn={}));const Zme=new zm({heightModel:"gravity-related-height"});var tu;function lC(e){return e===tu.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(tu||(tu={}));let _6,T9=null;async function Xme(e){T9||(T9=ge(()=>import("./geometryServiceUtils.c5056942.js"),[]).then(t=>_6=t)),await T9,di(e)}async function PV(e,t,i,r){if(!e)return null;const s=e.spatialReference;return Zl()||Ka(s,t)?Dh(e,t):_6?_6.projectGeometry(e,t,i,r):(await Promise.race([Xme(r),Xl(r)]),PV(e,t,i,r))}let si=class extends qe{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=pp(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return Y(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return oe(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,s,h;const e=(i=this.map)==null?void 0:i.call(this),t=[];return Y(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(h=e==null?void 0:e.basemap)==null?void 0:h.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var s;if(this.suspended)return(s=this._get("_spatialReferenceTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const h of e){const y=this._getSupportedSpatialReferences(h);if(y.length>0){const f=this._narrowDownSpatialReferenceCandidates(i,y);Y(f)&&(i=f)}if(Y(i)&&i.length===1)break}if(t&&(oe(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:Y(r)?r.spatialReference:null,viewingMode:Y(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,s,h,y,f,w,S;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(f=(y=(h=this.map)==null?void 0:h.call(this))==null?void 0:y.basemap)==null?void 0:f.baseLayers},{layers:(S=(w=this.map)==null?void 0:w.call(this))==null?void 0:S.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const E=e[0].tileInfo;return{tileInfo:E&&E.spatialReference.equals(this.spatialReference)?E:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,s,h;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const y of e)if(Yme(y)){const f=IV(y);if(f)return{heightModelInfo:f,vcsWkid:(s=y.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(h=y.spatialReference)==null?void 0:h.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,s;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const h of e.layers){const y="fullExtents"in h&&h.fullExtents||(Y(h.fullExtent)?[h.fullExtent]:[]),f=this.requiresExtentInSpatialReference?null:y[0],w=(s=y.find(S=>S.spatialReference.equals(this.spatialReference)))!=null?s:f;if(w)return{candidates:[{extent:w,layer:h}],updating:!1};if(this._getSupportedSpatialReferences(h).length>0)for(const S of y)i.push({extent:S,layer:h})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(oe(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:Y(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(Y(this._projectExtentTask.task)&&(this._projectExtentTask.task=pp(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:fP(async s=>{try{const h=await PV(i.extent,r,i.layer.portalItem,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:h}}catch{if(eo(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(oe(e))return t;const i=[],r=(s,h)=>Y(s)?Y(h)?s===h&&s:s:h;for(const s of e)for(const h of t){if(!s.spatialReference.equals(h.spatialReference))continue;const y=r(s.viewingMode,h.viewingMode);if(y!==!1){i.push({spatialReference:s.spatialReference,viewingMode:y});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return oe(e)||e.length<1?Y(t)?{spatialReference:t,viewingMode:null}:null:(Y(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==tu.Local)&&(e=e.filter(({viewingMode:i})=>i!==tu.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(Y(s)){const h=Y(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:y,viewingMode:f}of h)(!this.requiresExtentInSpatialReference||oe(this.userSpatialReference)||y.equals(this.userSpatialReference))&&i.push({spatialReference:y,viewingMode:f})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};g([x()],si.prototype,"required",void 0),g([x({constructOnly:!0})],si.prototype,"map",void 0),g([x({constructOnly:!0})],si.prototype,"getSpatialReferenceSupport",void 0),g([x()],si.prototype,"defaultSpatialReference",void 0),g([x()],si.prototype,"userSpatialReference",void 0),g([x()],si.prototype,"sourcePreloadCount",void 0),g([x()],si.prototype,"priorityCollection",void 0),g([x()],si.prototype,"requiresExtentInSpatialReference",void 0),g([x()],si.prototype,"suspended",void 0),g([x({readOnly:!0})],si.prototype,"ready",null),g([x({readOnly:!0})],si.prototype,"heightModelInfoReady",null),g([x({readOnly:!0})],si.prototype,"spatialReference",null),g([x({readOnly:!0})],si.prototype,"extent",null),g([x({readOnly:!0})],si.prototype,"heightModelInfo",null),g([x({readOnly:!0})],si.prototype,"vcsWkid",null),g([x({readOnly:!0})],si.prototype,"latestVcsWkid",null),g([x({readOnly:!0})],si.prototype,"viewingMode",null),g([x({readOnly:!0})],si.prototype,"tileInfo",null),g([x({readOnly:!0})],si.prototype,"mapCollections",null),g([x({readOnly:!0})],si.prototype,"_allLayers",null),g([x({readOnly:!0})],si.prototype,"_spatialReferenceTask",null),g([x({readOnly:!0})],si.prototype,"_tileInfoTask",null),g([x({readOnly:!0})],si.prototype,"_heightModelInfoTask",null),g([x({readOnly:!0})],si.prototype,"_extentCandidatesTask",null),g([x()],si.prototype,"_extentTask",null),g([x()],si.prototype,"_projectExtentTask",void 0),si=g([K("esri.views.support.DefaultsFromMap")],si);var jb;const lv=Le.getLogger("esri.views.View");let st=jb=class extends nu(ta.EventedMixin(pf(qe))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new j0({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new bp,this.analyses=new s2,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Je,this.magnifier=new wV,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Wme,this.navigation=new $V,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Lme(this),this.persistableViewModels=new Je,this._isValid=!1,this._readyCycleForced=!1,this.handles.add($e(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,jb.views.add(this)):(this._currentSpatialReference=null,jb.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(r=this.toolViewManager)==null||r.detach(),Y(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),Y(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Yl))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,kh(()=>this.ready)))),this.basemapView=new Ku({view:this}),this.layerViewManager=new kme({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ume({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([$e(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),$e(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),$e(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([$e(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(Y(e))return;const s=Nh(()=>e=pp(e));e=fP(async h=>{try{await rM(this.spatialReferenceWarningDelay,null,h)}catch{return}finally{e=null}lv.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Pr(this.graphics),this.analyses=Pr(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Pr(this.analysisViewManager),this.toolViewManager=Pr(this.toolViewManager),this.layerViewManager=Pr(this.layerViewManager),this.basemapView=Pr(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return lv.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new si({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Sn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(lv.warn("#map","The provided map is already destroyed",{map:e}),e=null),Sn.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!ki(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return Y(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new ne("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return Y(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&lv.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(sn(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};st.views=new Je,g([x()],st.prototype,"_userSpatialReference",void 0),g([We("toolViewManager.activeTool")],st.prototype,"activeTool",void 0),g([x({readOnly:!0})],st.prototype,"allLayerViews",void 0),g([x()],st.prototype,"groundView",void 0),g([x()],st.prototype,"animation",void 0),g([x()],st.prototype,"basemapView",void 0),g([x({readOnly:!0})],st.prototype,"_defaultsFromMapSettings",null),g([x()],st.prototype,"defaultsFromMap",null),g([x()],st.prototype,"fatalError",void 0),g([x({type:Ut})],st.prototype,"extent",void 0),g([x(v6(bp,"graphics"))],st.prototype,"graphics",void 0),g([x(v6(s2,"analyses"))],st.prototype,"analyses",void 0),g([x({readOnly:!0,type:zm})],st.prototype,"heightModelInfo",null),g([x({readOnly:!0})],st.prototype,"interacting",null),g([x({readOnly:!0})],st.prototype,"navigating",void 0),g([x({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],st.prototype,"preconditionsReady",null),g([x({readOnly:!0})],st.prototype,"typeSpecificPreconditionsReady",void 0),g([x({type:Je,readOnly:!0})],st.prototype,"layerViews",void 0),g([x({type:wV})],st.prototype,"magnifier",void 0),g([x({value:null,type:e7})],st.prototype,"map",null),g([x()],st.prototype,"padding",void 0),g([x({readOnly:!0})],st.prototype,"ready",void 0),g([x({type:ot})],st.prototype,"spatialReference",null),g([x()],st.prototype,"spatialReferenceWarningDelay",void 0),g([x()],st.prototype,"stationary",null),g([x({readOnly:!0})],st.prototype,"supportsGround",void 0),g([x({type:Mn})],st.prototype,"timeExtent",void 0),g([We("toolViewManager.tools")],st.prototype,"tools",void 0),g([x()],st.prototype,"toolViewManager",void 0),g([x({readOnly:!0})],st.prototype,"type",void 0),g([x({type:Number})],st.prototype,"scale",void 0),g([x({readOnly:!0})],st.prototype,"updating",void 0),g([x({readOnly:!0})],st.prototype,"initialExtentRequired",void 0),g([x({readOnly:!0})],st.prototype,"initialExtent",null),g([x()],st.prototype,"cursor",null),g([x({readOnly:!0})],st.prototype,"input",void 0),g([x({type:$V,nonNullable:!0})],st.prototype,"navigation",void 0),g([x()],st.prototype,"layerViewManager",void 0),g([x()],st.prototype,"analysisViewManager",void 0),g([x()],st.prototype,"width",void 0),g([x()],st.prototype,"height",void 0),g([x({readOnly:!0})],st.prototype,"resizing",void 0),g([x({value:null,readOnly:!0})],st.prototype,"size",null),g([x({readOnly:!0})],st.prototype,"suspended",void 0),g([x({readOnly:!0})],st.prototype,"viewEvents",void 0),g([x({readOnly:!0})],st.prototype,"persistableViewModels",void 0),g([x()],st.prototype,"_isValid",void 0),g([x()],st.prototype,"_readyCycleForced",void 0),g([x()],st.prototype,"_currentSpatialReference",void 0),st=jb=g([K("esri.views.View")],st);const Qme=st;let Zu=class extends vw{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new ne("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=ru(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};g([x({readOnly:!0})],Zu.prototype,"done",null),g([x({readOnly:!0,type:String})],Zu.prototype,"state",void 0),g([x()],Zu.prototype,"target",void 0),Zu=g([K("esri.views.ViewAnimation")],Zu),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Zu||(Zu={}));const x6=Zu;function Jc(e,t,i,r){const s=3*e,h=3*(i-e)-s,y=1-s-h,f=3*t,w=3*(r-t)-f,S=1-f-w;function E(F){return((y*F+h)*F+s)*F}function A(F){return((S*F+w)*F+f)*F}function P(F){return(3*y*F+2*h)*F+s}function N(F,V){let U,X,re,he,pe,ae;for(re=F,ae=0;ae<8;ae++){if(he=E(re)-F,Math.abs(he)<V)return re;if(pe=P(re),Math.abs(pe)<1e-6)break;re-=he/pe}if(U=0,X=1,re=F,re<U)return U;if(re>X)return X;for(;U<X;){if(he=E(re),Math.abs(he-F)<V)return re;F>he?U=re:X=re,re=.5*(X-U)+U}return re}return function(F,V=1e-6){return A(N(F,V))}}const ege=/^cubic-bezier\((.*)\)/,qs={};function tge(e){let t=qs[e]||null;if(!t){const i=ege.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=Jc.apply(Jc,r))}}return t}qs.ease=Jc(.25,.1,.25,1),qs.linear=Jc(0,0,1,1),qs.easeIn=qs["ease-in"]=Jc(.42,0,1,1),qs.easeOut=qs["ease-out"]=Jc(0,0,.58,1),qs.easeInOut=qs["ease-in-out"]=Jc(.42,0,.58,1);function $h(){return[1,0,0,1,0,0]}function ige(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function rge(e,t,i,r,s,h){return[e,t,i,r,s,h]}function nge(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:$h,clone:ige,fromValues:rge,createView:nge},Symbol.toStringTag,{value:"Module"}));function Np(e,t){return e[0]=t[0],e[1]=t[1],e}function Or(e,t,i){return e[0]=t,e[1]=i,e}function E3(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Hi(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function NV(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function RV(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function sge(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function oge(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function age(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function lge(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function uge(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function kf(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function ja(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function zh(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function Za(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function xm(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function Rp(e){const t=e[0],i=e[1];return t*t+i*i}function LV(e,t){return e[0]=-t[0],e[1]=-t[1],e}function hge(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function S6(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function Vh(e,t){return e[0]*t[0]+e[1]*t[1]}function FV(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function CE(e,t,i,r){const s=t[0],h=t[1];return e[0]=s+r*(i[0]-s),e[1]=h+r*(i[1]-h),e}function cge(e,t){t=t||1;const i=2*vh()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function pge(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Ca(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function dge(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function fge(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function yge(e,t,i,r){const s=t[0]-i[0],h=t[1]-i[1],y=Math.sin(r),f=Math.cos(r);return e[0]=s*f-h*y+i[0],e[1]=s*y+h*f+i[1],e}function mge(e,t){const i=e[0],r=e[1],s=t[0],h=t[1];let y=i*i+r*r;y>0&&(y=1/Math.sqrt(y));let f=s*s+h*h;f>0&&(f=1/Math.sqrt(f));const w=(i*s+r*h)*y*f;return w>1?0:w<-1?Math.PI:Math.acos(w)}function gge(e){return"vec2("+e[0]+", "+e[1]+")"}function vge(e,t){return e[0]===t[0]&&e[1]===t[1]}function bge(e,t){const i=e[0],r=e[1],s=t[0],h=t[1];return Math.abs(i-s)<=pt*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-h)<=pt*Math.max(1,Math.abs(r),Math.abs(h))}function wge(e,t,i,r,s){let h=t[0]-i[0],y=t[1]-i[1];const f=(r[0]*h+r[1]*y)*(s-1);return h=r[0]*f,y=r[1]*f,e[0]=t[0]+h,e[1]=t[1]+y,e}const _ge=xm,OE=Hi,xge=NV,Sge=RV,Mge=zh,Ege=Za,Tge=Rp;Object.freeze(Object.defineProperty({__proto__:null,copy:Np,set:Or,add:E3,subtract:Hi,multiply:NV,divide:RV,ceil:sge,floor:oge,min:age,max:lge,round:uge,scale:kf,scaleAndAdd:ja,distance:zh,squaredDistance:Za,length:xm,squaredLength:Rp,negate:LV,inverse:hge,normalize:S6,dot:Vh,cross:FV,lerp:CE,random:cge,transformMat2:pge,transformMat2d:Ca,transformMat3:dge,transformMat4:fge,rotate:yge,angle:mge,str:gge,exactEquals:vge,equals:bge,projectAndScale:wge,len:_ge,sub:OE,mul:xge,div:Sge,dist:Mge,sqrDist:Ege,sqrLen:Tge},Symbol.toStringTag,{value:"Module"}));function At(){return[0,0]}function PE(e){return[e[0],e[1]]}function Cf(e,t){return[e,t]}function $ge(e){const t=At(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Ige(e,t){return new Float64Array(e,t,2)}function jV(){return At()}function DV(){return Cf(1,1)}function zV(){return Cf(1,0)}function VV(){return Cf(0,1)}const Age=jV(),kge=DV(),Cge=zV(),Oge=VV();Object.freeze(Object.defineProperty({__proto__:null,create:At,clone:PE,fromValues:Cf,fromArray:$ge,createView:Ige,zeros:jV,ones:DV,unitX:zV,unitY:VV,ZEROS:Age,ONES:kge,UNIT_X:Cge,UNIT_Y:Oge},Symbol.toStringTag,{value:"Module"}));const GV=96,UV=39.37,Pge=180/Math.PI;function qV(e){return e.wkid?e:e.spatialReference||ot.WGS84}function NE(e,t){return t.type?Or(e,t.x,t.y):Np(e,t)}function BV(e){return mf(e)}function qy(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*Gge(e.spatialReference)}async function fy(e,t,i,r){let s,h;if(!e||Array.isArray(e)&&!e.length)return null;if(Je.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const f=e.every(E=>"attributes"in E),w=e.some(E=>!E.geometry);let S=e;if(f&&w&&t&&t.allLayerViews){const E=new Map;for(const F of e){const V=F.layer,U=E.get(V)||[],X=F.attributes[V.objectIdField];X!=null&&U.push(X),E.set(V,U)}const A=[];E.forEach((F,V)=>{const U=t.allLayerViews.find(X=>X.layer.id===V.id);if("queryFeatures"in U){const X=V.createQuery();X.objectIds=F,X.returnGeometry=!0,A.push(U.queryFeatures(X))}});const P=await Promise.all(A),N=[];for(const F of P)if(F&&F.features&&F.features.length)for(const V of F.features)Y(V.geometry)&&N.push(V.geometry);S=N}for(const E of S)r=await fy(E,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new et(e);else if(e instanceof Jn)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const f=e.layer,w=t.allLayerViews.find(S=>S.layer.id===f.id);if("queryFeatures"in w){const S=f.createQuery();S.objectIds=[e.attributes[f.objectIdField]],S.returnGeometry=!0;const E=await w.queryFeatures(S);s=Jb(E,"features",0,"geometry")}}}if(oe(s)||(h=s.type==="point"?new Ut({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!h))return null;Zl()||Ka(h.spatialReference,i)||await Xl();const y=Dh(h,i);return y?r=r?r.union(y):y:null}function Nge(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function $9(e,t){return ki(qV(e),t)?e:Dh(e,t)}async function Rge(e,t){if(!e||!t)return new qr({targetGeometry:new et,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:h,size:y}=t,f=[s?y[0]-s.left-s.right:y[0],s?y[1]-s.top-s.bottom:y[1]];let w=null;e instanceof qr?w=e:e.viewpoint?w=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(w=e.target);let S=null;w&&w.targetGeometry?S=w.targetGeometry:e instanceof Ut?S=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(S=await fy(e.center,t,i)||await fy(e.extent,t,i)||await fy(e.target,t,i)||await fy(e,t,i)),!S&&h&&h.targetGeometry?S=h.targetGeometry:!S&&t.extent&&(S=t.extent),i||(i=qV(t.spatialReference||t.extent||S)),Zl()||ki(S.spatialReference,i)||Ka(S,i)||await Xl();const E=$9(S.center?S.center:S,i);let A=null;if(w&&Y(w.targetGeometry)&&w.targetGeometry.type==="point")A=w.scale;else if("scale"in e&&e.scale)A=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)A=r.zoomToScale(e.zoom);else if(Array.isArray(S)||S.type==="point"||S.type==="extent"&&S.width===0&&S.height===0){const V=$9(t.extent,i);A=Y(V)?qy(V,f):t.extent?qy(t.extent,f):h.scale}else A=qy($9(S.extent,i),f);const P=Nge(e);P&&(P.min&&P.min>A?A=P.min:P.max&&P.max<A&&(A=P.max));let N=0;w?N=w.rotation:e.hasOwnProperty("rotation")?N=e.rotation:h&&(N=h.rotation);let F=new qr({targetGeometry:E,scale:A,rotation:N});return r&&(F=r.fit(F),r.constrainByGeometry(F),r.rotationEnabled||(F.rotation=N)),F}function ia(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Lge(e,t,i){return i?Or(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):kf(e,t,.5)}const Fge=function(){const e=At();return function(t,i,r){const s=i.targetGeometry;NE(e,s);const h=.5*Of(i);return t.xmin=e[0]-h*r[0],t.ymin=e[1]-h*r[1],t.xmax=e[0]+h*r[0],t.ymax=e[1]+h*r[1],t.spatialReference=s.spatialReference,t}}();function jge(e,t,i,r,s){return M6(e,t,i.center),e.scale=qy(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function Dge(e,t,i,r){return FE(e,t,i,r),$E(e,e)}const HV=function(){const e=At();return function(t,i,r){return OE(t,Uge(t,i),Lge(e,i,r))}}(),zge=function(){const e=$h(),t=At();return function(i,r,s,h){const y=Of(r),f=RE(r);return Or(t,y,y),pV(e,t),x3(e,e,f),wm(e,e,HV(t,s,h)),wm(e,e,[0,h.top-h.bottom]),Or(i,e[4],e[5])}}();function Of(e){return e.scale*Vge(e.targetGeometry)}function Vge(e){return Y(e)&&Mr(e.spatialReference)?1/(BV(e.spatialReference)*UV*GV):1}function RE(e){return TM(e.rotation)||0}function Gge(e){return Mr(e)?BV(e)*UV*GV:1}function Uge(e,t){return kf(e,t,.5)}const LE=function(){const e=At(),t=At(),i=At();return function(r,s,h,y,f,w){return LV(e,s),kf(t,h,.5*w),Or(i,1/y*w,-1/y*w),AE(r,t),f&&x3(r,r,f),IE(r,r,i),wm(r,r,e),r}}(),FE=function(){const e=At();return function(t,i,r,s){const h=Of(i),y=RE(i);return NE(e,i.targetGeometry),LE(t,e,r,h,y,s)}}(),qge=function(){const e=At();return function(t,i,r,s){const h=Of(i);return NE(e,i.targetGeometry),LE(t,e,r,h,0,s)}}();function Bge(e){const t=vs(e);return t?t.valid[1]-t.valid[0]:0}function Hge(e,t){return Math.round(Bge(e)/t)}const Wge=function(){const e=At(),t=At(),i=[0,0,0];return function(r,s,h){Hi(e,r,s),S6(e,e),Hi(t,r,h),S6(t,t),FV(i,e,t);let y=Math.acos(Vh(e,t)/(xm(e)*xm(t)))*Pge;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),Jge=function(){const e=At();return function(t,i,r,s){const h=t.targetGeometry;return ia(t,i),zge(e,i,r,s),h.x+=e[0],h.y+=e[1],t}}(),M6=function(e,t,i){ia(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},Kge=function(){const e=At();return function(t,i,r,s,h){h||(h="center"),OE(e,r,s),kf(e,e,.5);const y=e[0],f=e[1];switch(h){case"center":Or(e,0,0);break;case"left":Or(e,-y,0);break;case"top":Or(e,0,f);break;case"right":Or(e,y,0);break;case"bottom":Or(e,0,-f);break;case"top-left":Or(e,-y,f);break;case"bottom-left":Or(e,-y,-f);break;case"top-right":Or(e,y,f);break;case"bottom-right":Or(e,y,-f)}return T3(t,i,e),t}}();function T4e(e,t,i){return ia(e,t),e.rotation+=i,e}function Yge(e,t,i){return ia(e,t),e.rotation=i,e}const Zge=function(){const e=At();return function(t,i,r,s,h){return ia(t,i),isNaN(r)||r===0||(JV(e,s,i,h),t.scale=i.scale*r,KV(e,e,t,h),T3(t,t,Or(e,e[0]-s[0],s[1]-e[1]))),t}}();function uC(e,t,i){return ia(e,t),e.scale=i,e}const WV=function(){const e=At();return function(t,i,r,s,h,y){return ia(t,i),isNaN(r)||r===0||(JV(e,h,i,y),t.scale=i.scale*r,t.rotation+=s,KV(e,e,t,y),T3(t,t,Or(e,e[0]-h[0],h[1]-e[1]))),t}}(),$4e=function(){const e=At(),t=At();return function(i,r,s,h,y,f,w){return HV(t,f,w),E3(e,y,t),h?WV(i,r,s,h,e,f):Zge(i,r,s,e,f)}}(),JV=function(){const e=$h();return function(t,i,r,s){return Ca(t,i,Dge(e,r,s,1))}}(),KV=function(){const e=$h();return function(t,i,r,s){return Ca(t,i,FE(e,r,s,1))}}(),T3=function(){const e=At(),t=$h();return function(i,r,s){ia(i,r);const h=Of(r),y=i.targetGeometry;return cV(t,RE(r)),IE(t,t,Cf(h,h)),Ca(e,s,t),y.x+=e[0],y.y+=e[1],i}}();class Xge{constructor(t,i,r,s){const h=t.targetGeometry,y=i.targetGeometry;s?typeof s=="string"&&(s=tge(s)||qs.ease):s=qs.ease,this.easing=s,this.duration=r,this.sCenterX=h.x,this.sCenterY=h.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,h,y,f;i>=1?(s=this.tCenterX,h=this.tCenterY,y=this.tRotation,f=this.tScale):(s=this.sCenterX+r*this.dCenterX,h=this.sCenterY+r*this.dCenterY,y=this.sRotation+r*this.dRotation,f=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=h,t.scale=f,t.rotation=y}}let $l=class extends qe{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=qs.ease,this.view=null,this.viewpoint=null,this.viewpoint=new qr({targetGeometry:new et,scale:0,rotation:0}),this._updateTask=A0({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const r=this.viewpoint;ia(r,t),this.transition=new Xge(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new x6({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==x6.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,r=i>=1;this.transition.applyRatio(this.viewpoint,i),r&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};g([x()],$l.prototype,"animation",void 0),g([x()],$l.prototype,"duration",void 0),g([x()],$l.prototype,"transition",void 0),g([x()],$l.prototype,"easing",void 0),g([x()],$l.prototype,"view",void 0),g([x()],$l.prototype,"viewpoint",void 0),$l=g([K("esri.views.2d.AnimationManager")],$l);const Qge=$l;class eve{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:h,state:{id:y}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),h.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),Y(s)&&(s.lastUpdateId!==y&&(s.viewChange(),s.lastUpdateId=y),s.updateRequested&&s.processUpdate(this._updateParameters)),Y(r)&&(r.lastUpdateId!==y&&(r.viewChange(),r.lastUpdateId=y),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=$e(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=A0(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function or(){return Promise.all([ge(()=>import("./webglDeps.7591c3bf.js"),["assets/webglDeps.7591c3bf.js","assets/VertexArrayObject.4198c73f.js","assets/Texture.599541db.js","assets/enums.de935fa5.js","assets/ProgramTemplate.cd2cb0c8.js","assets/programUtils.4a05d623.js","assets/NestedMap.21c7ee53.js"]),ge(()=>import("./mapViewDeps.82805282.js"),["assets/mapViewDeps.82805282.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.4a05d623.js","assets/NestedMap.21c7ee53.js","assets/Rasterizer.ce9fe5b3.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.06083eb8.js","assets/Matcher.6ee47eb7.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.4337cbba.js","assets/requestImageUtils.4ea1aefd.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/BaseGraphicContainer.521caa59.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/vec3f32.0772c8d8.js","assets/GraphicContainer.4afce0c1.js"])])}const p1=()=>or().then(()=>ge(()=>import("./TileLayerView2D.300d4e53.js"),["assets/TileLayerView2D.300d4e53.js","assets/imageUtils.07c8c249.js","assets/BitmapTileContainer.93c6da49.js","assets/Bitmap.d120e485.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/TileContainer.ab2e04f2.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js","assets/drapedUtils.765e9a9c.js"])),uv=()=>or().then(()=>ge(()=>import("./FeatureLayerView2D.b9366867.js"),["assets/FeatureLayerView2D.b9366867.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.d2766962.js","assets/schemaUtils.9bfbe60e.js","assets/visualVariablesUtils.4d2d720c.js","assets/createSymbolSchema.43b2f77c.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),hC={"base-dynamic":()=>or().then(()=>ge(()=>import("./BaseDynamicLayerView2D.15813685.js"),["assets/BaseDynamicLayerView2D.15813685.js","assets/BitmapContainer.a84436c5.js","assets/WGLContainer.53f843cd.js","assets/enums.de935fa5.js","assets/pixelUtils.8ce71a56.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/ExportStrategy.975dffde.js","assets/Bitmap.d120e485.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"base-tile":p1,"bing-maps":p1,csv:uv,"geo-rss":()=>or().then(()=>ge(()=>import("./GeoRSSLayerView2D.385a0fca.js"),["assets/GeoRSSLayerView2D.385a0fca.js","assets/LayerView2D.d2766962.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.4afce0c1.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/VertexArrayObject.4198c73f.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/LayerView.cbd5bd2c.js"])),feature:uv,geojson:uv,graphics:()=>or().then(()=>ge(()=>import("./GraphicsLayerView2D.90bea1c2.js"),["assets/GraphicsLayerView2D.90bea1c2.js","assets/LayerView2D.d2766962.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.4afce0c1.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/VertexArrayObject.4198c73f.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/LayerView.cbd5bd2c.js"])),group:()=>or().then(()=>ge(()=>import("./GroupLayerView2D.1ca05d1b.js"),["assets/GroupLayerView2D.1ca05d1b.js","assets/GroupContainer.a8e5b067.js","assets/WGLContainer.53f843cd.js","assets/enums.de935fa5.js","assets/pixelUtils.8ce71a56.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/LayerView.cbd5bd2c.js"])),imagery:()=>or().then(()=>ge(()=>import("./ImageryLayerView2D.53d20de5.js"),["assets/ImageryLayerView2D.53d20de5.js","assets/RasterVFDisplayObject.c2c41807.js","assets/VertexArrayObject.4198c73f.js","assets/Texture.599541db.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.ed353a73.js","assets/pixelUtils.8ce71a56.js","assets/WGLContainer.53f843cd.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/HighlightGraphicContainer.84502fea.js","assets/BitmapContainer.a84436c5.js","assets/Bitmap.d120e485.js","assets/ExportStrategy.975dffde.js","assets/rasterProjectionHelper.786fac0c.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"imagery-tile":()=>or().then(()=>ge(()=>import("./ImageryTileLayerView2D.e960b2e2.js"),["assets/ImageryTileLayerView2D.e960b2e2.js","assets/RasterVFDisplayObject.c2c41807.js","assets/VertexArrayObject.4198c73f.js","assets/Texture.599541db.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.ed353a73.js","assets/pixelUtils.8ce71a56.js","assets/WGLContainer.53f843cd.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/TileContainer.ab2e04f2.js","assets/RawBlockCache.086e1de5.js","assets/rasterProjectionHelper.786fac0c.js","assets/util.7dacde44.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),kml:()=>or().then(()=>ge(()=>import("./KMLLayerView2D.b7959975.js"),["assets/KMLLayerView2D.b7959975.js","assets/kmlUtils.96d2713f.js","assets/Bitmap.d120e485.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/BitmapContainer.a84436c5.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/GraphicContainer.4afce0c1.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/LayerView.cbd5bd2c.js"])),"map-image":()=>or().then(()=>ge(()=>import("./MapImageLayerView2D.905f5cea.js"),["assets/MapImageLayerView2D.905f5cea.js","assets/BitmapContainer.a84436c5.js","assets/WGLContainer.53f843cd.js","assets/enums.de935fa5.js","assets/pixelUtils.8ce71a56.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/HighlightGraphicContainer.84502fea.js","assets/ExportStrategy.975dffde.js","assets/Bitmap.d120e485.js","assets/LayerView.cbd5bd2c.js","assets/scaleUtils.241b5379.js","assets/ExportImageParameters.2ad7cb2c.js","assets/floorFilterUtils.69500d62.js","assets/sublayerUtils.ac96d1d7.js","assets/drapedUtils.765e9a9c.js","assets/popupUtils.9ec9f855.js","assets/RefreshableLayerView.8af61449.js"])),"map-notes":()=>or().then(()=>ge(()=>import("./MapNotesLayerView2D.18184ef8.js"),["assets/MapNotesLayerView2D.18184ef8.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GroupContainer.a8e5b067.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/GraphicContainer.4afce0c1.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/LayerView.cbd5bd2c.js"])),media:()=>or().then(()=>ge(()=>import("./MediaLayerView2D.3548bcde.js"),["assets/MediaLayerView2D.3548bcde.js","assets/normalizeUtilsSync.49c44a3e.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/LayerView.cbd5bd2c.js"])),"ogc-feature":()=>or().then(()=>ge(()=>import("./OGCFeatureLayerView2D.918c823c.js"),["assets/OGCFeatureLayerView2D.918c823c.js","assets/FeatureLayerView2D.b9366867.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.d2766962.js","assets/schemaUtils.9bfbe60e.js","assets/visualVariablesUtils.4d2d720c.js","assets/createSymbolSchema.43b2f77c.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"open-street-map":p1,route:()=>or().then(()=>ge(()=>import("./RouteLayerView2D.360ef4ba.js"),["assets/RouteLayerView2D.360ef4ba.js","assets/Stop.61515ba9.js","assets/LayerView2D.d2766962.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.4afce0c1.js","assets/BaseGraphicContainer.521caa59.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.49c44a3e.js","assets/VertexArrayObject.4198c73f.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/Matcher.6ee47eb7.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/vec3f32.0772c8d8.js","assets/LayerView.cbd5bd2c.js"])),stream:()=>or().then(()=>ge(()=>import("./StreamLayerView2D.736ff105.js"),["assets/StreamLayerView2D.736ff105.js","assets/FeatureLayerView2D.b9366867.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.d2766962.js","assets/schemaUtils.9bfbe60e.js","assets/visualVariablesUtils.4d2d720c.js","assets/createSymbolSchema.43b2f77c.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"subtype-group":()=>or().then(()=>ge(()=>import("./SubtypeGroupLayerView2D.0cd4716a.js"),["assets/SubtypeGroupLayerView2D.0cd4716a.js","assets/FeatureLayerView2D.b9366867.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.d2766962.js","assets/schemaUtils.9bfbe60e.js","assets/visualVariablesUtils.4d2d720c.js","assets/createSymbolSchema.43b2f77c.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/ExpandedCIM.b9a0041e.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),tile:p1,"vector-tile":()=>or().then(()=>ge(()=>import("./VectorTileLayerView2D.86a961c5.js"),["assets/VectorTileLayerView2D.86a961c5.js","assets/enums.2a1fad7f.js","assets/BidiEngine.ec67919b.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/CIMSymbolHelper.e0e771f8.js","assets/floatRGBA.b2358e75.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/VertexArrayObject.4198c73f.js","assets/config.40d47db8.js","assets/TileContainer.ab2e04f2.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/StyleRepository.d0eb5412.js","assets/colorUtils.9445c15b.js","assets/Geometry.b68345ae.js","assets/LayerView2D.d2766962.js","assets/Bitmap.d120e485.js","assets/BitmapContainer.a84436c5.js","assets/LayerView.cbd5bd2c.js"])),wcs:()=>or().then(()=>ge(()=>import("./ImageryTileLayerView2D.e960b2e2.js"),["assets/ImageryTileLayerView2D.e960b2e2.js","assets/RasterVFDisplayObject.c2c41807.js","assets/VertexArrayObject.4198c73f.js","assets/Texture.599541db.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.ed353a73.js","assets/pixelUtils.8ce71a56.js","assets/WGLContainer.53f843cd.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/TileContainer.ab2e04f2.js","assets/RawBlockCache.086e1de5.js","assets/rasterProjectionHelper.786fac0c.js","assets/util.7dacde44.js","assets/popupUtils.9ec9f855.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"web-tile":p1,wfs:uv,wms:()=>or().then(()=>ge(()=>import("./WMSLayerView2D.cd611be4.js"),["assets/WMSLayerView2D.cd611be4.js","assets/BitmapContainer.a84436c5.js","assets/WGLContainer.53f843cd.js","assets/enums.de935fa5.js","assets/pixelUtils.8ce71a56.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/ExportStrategy.975dffde.js","assets/Bitmap.d120e485.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js","assets/ExportWMSImageParameters.eaacc06d.js"])),wmts:()=>or().then(()=>ge(()=>import("./WMTSLayerView2D.506bad05.js"),["assets/WMTSLayerView2D.506bad05.js","assets/imageUtils.07c8c249.js","assets/BitmapTileContainer.93c6da49.js","assets/Bitmap.d120e485.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/TileContainer.ab2e04f2.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.d2766962.js","assets/LayerView.cbd5bd2c.js","assets/RefreshableLayerView.8af61449.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function tve(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const cC={hasLayerViewModule:e=>Y(hC[e.type]),importLayerView:e=>{const t=hC[e.type];if(oe(t))throw tve(e);return t(e)}};function ive(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,h=0,y=0;const f=[0,0],w=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const S of w)for(let E=0;E<S.length-1;E++){yK(f,r,S,E);const A=zh(r,f);A<s&&(s=A,h=f[0],y=f[1])}return{coordinate:new et({x:h,y,spatialReference:i}),distance:s}}var E6;const rve=Le.getLogger("esri.views.MapView");let Kc=E6=class extends qe{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(oe(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Dh(this.geometry,this.spatialReference)}catch(e){return rve.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(oe(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?M2(this.normalizedGeometry,i):CP(this.normalizedGeometry,i))return e;const{coordinate:r}=ive(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new E6({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};g([x({constructOnly:!0})],Kc.prototype,"geometry",void 0),g([x({readOnly:!0})],Kc.prototype,"normalizedGeometry",null),g([x({constructOnly:!0})],Kc.prototype,"spatialReference",void 0),Kc=E6=g([K("esri.views.2d.constraints.GeometryConstraint")],Kc);var T6;let yy=T6=class extends qe{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new T6({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};g([x()],yy.prototype,"enabled",void 0),g([x()],yy.prototype,"rotationEnabled",void 0),yy=T6=g([K("esri.views.2d.constraints.RotationConstraint")],yy);const YV=yy;var $6;let Fn=$6=class extends qe{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:h}=this,y=-1,f=-1,w=!1,S=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(E=>E.clone()),t.sort((E,A)=>A.scale-E.scale),t.forEach((E,A)=>E.level=A);for(const E of t)!w&&i>0&&i>=E.scale&&(y=E.level,w=!0),!S&&r>0&&r>=E.scale&&(f=e?e.level:-1,S=!0),e=E;s===-1&&(s=i===0?0:y),h===-1&&(h=r===0?t.length-1:f),s=Math.max(s,0),s=Math.min(s,t.length-1),h=Math.max(h,0),h=Math.min(h,t.length-1),s>h&&([s,h]=[h,s]),i=t[s].scale,r=t[h].scale,t.splice(0,s),t.splice(h-s+1,t.length),t.forEach((E,A)=>{this._lodByScale[E.scale]=E,this._scales[A]=E.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",h),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,h=t&&t.targetGeometry,y=r!==0&&e.scale<r,f=i!==0&&e.scale>i;if(y||f){const w=f?i:r;if(h){const S=(w-t.scale)/(e.scale-t.scale);s.x=h.x+(s.x-h.x)*S,s.y=h.y+(s.y-h.y)*S}e.scale=w}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new $6({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};g([x({readOnly:!0})],Fn.prototype,"effectiveLODs",void 0),g([x({readOnly:!0})],Fn.prototype,"effectiveMinZoom",void 0),g([x({readOnly:!0})],Fn.prototype,"effectiveMaxZoom",void 0),g([x({readOnly:!0})],Fn.prototype,"effectiveMinScale",void 0),g([x({readOnly:!0})],Fn.prototype,"effectiveMaxScale",void 0),g([x()],Fn.prototype,"lods",void 0),g([x()],Fn.prototype,"minZoom",void 0),g([x()],Fn.prototype,"maxZoom",void 0),g([x()],Fn.prototype,"minScale",void 0),g([x()],Fn.prototype,"maxScale",void 0),g([x()],Fn.prototype,"snapToZoom",void 0),Fn=$6=g([K("esri.views.2d.constraints.ZoomConstraint")],Fn);const ZV=Fn,nve={base:null,key:"type",typeMap:{extent:Ut,polygon:rn}};let Ui=class extends qe{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(s=this.view)==null?void 0:s.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new Kc({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new YV({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,h=this.maxScale,y=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===h&&e.snapToZoom===y?e:new ZV({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:h,snapToZoom:y})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};g([x({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Ui.prototype,"effectiveLODs",void 0),g([x({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Ui.prototype,"effectiveMinScale",void 0),g([x({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Ui.prototype,"effectiveMaxScale",void 0),g([x({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Ui.prototype,"effectiveMinZoom",void 0),g([x({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Ui.prototype,"effectiveMaxZoom",void 0),g([x({types:nve,value:null})],Ui.prototype,"geometry",null),g([x({type:[z7]})],Ui.prototype,"lods",void 0),g([x()],Ui.prototype,"minScale",void 0),g([x()],Ui.prototype,"maxScale",void 0),g([x()],Ui.prototype,"minZoom",void 0),g([x()],Ui.prototype,"maxZoom",void 0),g([x()],Ui.prototype,"rotationEnabled",void 0),g([x()],Ui.prototype,"snapToZoom",void 0),g([x()],Ui.prototype,"view",void 0),g([x({readOnly:!0})],Ui.prototype,"version",null),g([x()],Ui.prototype,"_defaultLODs",null),g([x({type:Kc})],Ui.prototype,"_geometry",null),g([x({type:YV})],Ui.prototype,"_rotation",null),g([x({readOnly:!0,type:ZV})],Ui.prototype,"_zoom",null),Ui=g([K("esri.views.2d.MapViewConstraints")],Ui);const XV=Ui;function sve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ove(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function QV(e,t,i,r,s,h,y,f,w,S){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=h,e[5]=y,e[6]=f,e[7]=w,e[8]=S,e}function eG(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ave(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function lve(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5],w=t[6],S=t[7],E=t[8],A=E*y-f*S,P=-E*h+f*w,N=S*h-y*w;let F=i*A+r*P+s*N;return F?(F=1/F,e[0]=A*F,e[1]=(-E*r+s*S)*F,e[2]=(f*r-s*y)*F,e[3]=P*F,e[4]=(E*i-s*w)*F,e[5]=(-f*i+s*h)*F,e[6]=N*F,e[7]=(-S*i+r*w)*F,e[8]=(y*i-r*h)*F,e):null}function uve(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5],w=t[6],S=t[7],E=t[8];return e[0]=y*E-f*S,e[1]=s*S-r*E,e[2]=r*f-s*y,e[3]=f*w-h*E,e[4]=i*E-s*w,e[5]=s*h-i*f,e[6]=h*S-y*w,e[7]=r*w-i*S,e[8]=i*y-r*h,e}function hve(e){const t=e[0],i=e[1],r=e[2],s=e[3],h=e[4],y=e[5],f=e[6],w=e[7],S=e[8];return t*(S*h-y*w)+i*(-S*s+y*f)+r*(w*s-h*f)}function jE(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=t[6],E=t[7],A=t[8],P=i[0],N=i[1],F=i[2],V=i[3],U=i[4],X=i[5],re=i[6],he=i[7],pe=i[8];return e[0]=P*r+N*y+F*S,e[1]=P*s+N*f+F*E,e[2]=P*h+N*w+F*A,e[3]=V*r+U*y+X*S,e[4]=V*s+U*f+X*E,e[5]=V*h+U*w+X*A,e[6]=re*r+he*y+pe*S,e[7]=re*s+he*f+pe*E,e[8]=re*h+he*w+pe*A,e}function I6(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=t[6],E=t[7],A=t[8],P=i[0],N=i[1];return e[0]=r,e[1]=s,e[2]=h,e[3]=y,e[4]=f,e[5]=w,e[6]=P*r+N*y+S,e[7]=P*s+N*f+E,e[8]=P*h+N*w+A,e}function tG(e,t,i){const r=t[0],s=t[1],h=t[2],y=t[3],f=t[4],w=t[5],S=t[6],E=t[7],A=t[8],P=Math.sin(i),N=Math.cos(i);return e[0]=N*r+P*y,e[1]=N*s+P*f,e[2]=N*h+P*w,e[3]=N*y-P*r,e[4]=N*f-P*s,e[5]=N*w-P*h,e[6]=S,e[7]=E,e[8]=A,e}function cve(e,t,i){const r=i[0],s=i[1],h=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=h*t[6],e[7]=h*t[7],e[8]=h*t[8],e}function pve(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function dve(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function fve(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function yve(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function mve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function gve(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=i+i,f=r+r,w=s+s,S=i*y,E=r*y,A=r*f,P=s*y,N=s*f,F=s*w,V=h*y,U=h*f,X=h*w;return e[0]=1-A-F,e[3]=E-X,e[6]=P+U,e[1]=E+X,e[4]=1-S-F,e[7]=N-V,e[2]=P-U,e[5]=N+V,e[8]=1-S-A,e}function vve(e,t){const i=t[0],r=t[1],s=t[2],h=t[4],y=t[5],f=t[6],w=t[8],S=t[9],E=t[10],A=E*y-f*S,P=-E*h+f*w,N=S*h-y*w,F=i*A+r*P+s*N;if(!F)return null;const V=1/F;return e[0]=A*V,e[1]=(-E*r+s*S)*V,e[2]=(f*r-s*y)*V,e[3]=P*V,e[4]=(E*i-s*w)*V,e[5]=(-f*i+s*h)*V,e[6]=N*V,e[7]=(-S*i+r*w)*V,e[8]=(y*i-r*h)*V,e}function bve(e,t){const i=t[0],r=t[1],s=t[2],h=t[3],y=t[4],f=t[5],w=t[6],S=t[7],E=t[8],A=t[9],P=t[10],N=t[11],F=t[12],V=t[13],U=t[14],X=t[15],re=i*f-r*y,he=i*w-s*y,pe=i*S-h*y,ae=r*w-s*f,le=r*S-h*f,Te=s*S-h*w,Ee=E*V-A*F,Oe=E*U-P*F,Ae=E*X-N*F,Fe=A*U-P*V,ze=A*X-N*V,Ge=P*X-N*U;let ke=re*Ge-he*ze+pe*Fe+ae*Ae-le*Oe+Te*Ee;return ke?(ke=1/ke,e[0]=(f*Ge-w*ze+S*Fe)*ke,e[1]=(w*Ae-y*Ge-S*Oe)*ke,e[2]=(y*ze-f*Ae+S*Ee)*ke,e[3]=(s*ze-r*Ge-h*Fe)*ke,e[4]=(i*Ge-s*Ae+h*Oe)*ke,e[5]=(r*Ae-i*ze-h*Ee)*ke,e[6]=(V*Te-U*le+X*ae)*ke,e[7]=(U*pe-F*Te-X*he)*ke,e[8]=(F*le-V*pe+X*re)*ke,e):null}function wve(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function _ve(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function xve(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Sve(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function iG(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Mve(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Eve(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function Tve(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function $ve(e,t){const i=e[0],r=e[1],s=e[2],h=e[3],y=e[4],f=e[5],w=e[6],S=e[7],E=e[8],A=t[0],P=t[1],N=t[2],F=t[3],V=t[4],U=t[5],X=t[6],re=t[7],he=t[8];return Math.abs(i-A)<=pt*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-P)<=pt*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(s-N)<=pt*Math.max(1,Math.abs(s),Math.abs(N))&&Math.abs(h-F)<=pt*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(y-V)<=pt*Math.max(1,Math.abs(y),Math.abs(V))&&Math.abs(f-U)<=pt*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(w-X)<=pt*Math.max(1,Math.abs(w),Math.abs(X))&&Math.abs(S-re)<=pt*Math.max(1,Math.abs(S),Math.abs(re))&&Math.abs(E-he)<=pt*Math.max(1,Math.abs(E),Math.abs(he))}function Ive(e){const t=pt,i=e[0],r=e[1],s=e[2],h=e[3],y=e[4],f=e[5],w=e[6],S=e[7],E=e[8];return Math.abs(1-(i*i+h*h+w*w))<=t&&Math.abs(1-(r*r+y*y+S*S))<=t&&Math.abs(1-(s*s+f*f+E*E))<=t}const Ave=jE,kve=iG;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:sve,copy:ove,set:QV,identity:eG,transpose:ave,invert:lve,adjoint:uve,determinant:hve,multiply:jE,translate:I6,rotate:tG,scale:cve,scaleByVec2:pve,fromTranslation:dve,fromRotation:fve,fromScaling:yve,fromMat2d:mve,fromQuat:gve,normalFromMat4Legacy:vve,normalFromMat4:bve,projection:wve,str:_ve,frob:xve,add:Sve,subtract:iG,multiplyScalar:Mve,multiplyScalarAndAdd:Eve,exactEquals:Tve,equals:$ve,isOrthoNormal:Ive,mul:Ave,sub:kve},Symbol.toStringTag,{value:"Module"}));function Db(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Cve(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ove(e,t,i,r,s,h,y,f,w){const S=new Float32Array(9);return S[0]=e,S[1]=t,S[2]=i,S[3]=r,S[4]=s,S[5]=h,S[6]=y,S[7]=f,S[8]=w,S}function Pve(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:Db,clone:Cve,fromValues:Ove,createView:Pve},Symbol.toStringTag,{value:"Module"}));function rG(){return new Float32Array(2)}function Nve(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function B0(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Rve(e,t){return new Float32Array(e,t,2)}function nG(){return rG()}function sG(){return B0(1,1)}function oG(){return B0(1,0)}function aG(){return B0(0,1)}const Lve=nG(),Fve=sG(),jve=oG(),Dve=aG();Object.freeze(Object.defineProperty({__proto__:null,create:rG,clone:Nve,fromValues:B0,createView:Rve,zeros:nG,ones:sG,unitX:oG,unitY:aG,ZEROS:Lve,ONES:Fve,UNIT_X:jve,UNIT_Y:Dve},Symbol.toStringTag,{value:"Module"}));function zve(e){return e instanceof Float32Array&&e.length>=2}function Vve(e){return Array.isArray(e)&&e.length>=2}function I9(e){return zve(e)||Vve(e)}var A6;const al=[0,0];let Xu=A6=class extends ve{constructor(e){super(e),this._viewpoint2D={center:At(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Ut,this.id=0,this.inverseTransform=$h(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=$h(),this.transformNoRotation=$h(),this.displayMat3=Db(),this.displayViewMat3=Db(),this.viewMat3=Db(),this.viewMat2d=lV(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=ia(i,e.viewpoint),this._set("size",Np(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new A6({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return I9(t)?Ca(e,t,this.inverseTransform):(al[0]=t,al[1]=i,Ca(e,al,this.inverseTransform))}toScreen(e,t,i){return I9(t)?Ca(e,t,this.transform):(al[0]=t,al[1]=i,Ca(e,al,this.transform))}toScreenNoRotation(e,t,i){return I9(t)?Ca(e,t,this.transformNoRotation):(al[0]=t,al[1]=i,Ca(e,al,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return LE(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,h=this._get("size"),y=new qr({targetGeometry:new et(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",y),!h||!t||!i)return;this.resolution=Of(y),this.rotation=r,this.scale=i,this.spatialReference=t,Np(this.center,e);const f=h[0]!==0?2/h[0]:0,w=h[1]!==0?-2/h[1]:0;QV(this.displayMat3,f,0,0,0,w,0,-1,1,1);const S=eG(this.viewMat3),E=B0(h[0]/2,h[1]/2),A=B0(-h[0]/2,-h[1]/2),P=TM(r);I6(S,S,E),tG(S,S,P),I6(S,S,A),jE(this.displayViewMat3,this.displayMat3,S);const N=AE(this.viewMat2d,E);return x3(N,N,P),wm(N,N,A),Fge(this.extent,y,h),FE(this.transform,y,h,s),$E(this.inverseTransform,this.transform),qge(this.transformNoRotation,y,h,s),this.worldScreenWidth=Hge(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};g([x({readOnly:!0})],Xu.prototype,"id",void 0),g([x({value:1,json:{write:!0}})],Xu.prototype,"pixelRatio",null),g([x({json:{write:!0}})],Xu.prototype,"size",null),g([x()],Xu.prototype,"spatialReference",void 0),g([x({type:qr,json:{write:!0}})],Xu.prototype,"viewpoint",null),Xu=A6=g([K("esri.views.2d.ViewState")],Xu);const pC=Xu;var k6,C6;let Ll=k6=class extends qe{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new k6({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};g([x()],Ll.prototype,"left",void 0),g([x()],Ll.prototype,"top",void 0),g([x()],Ll.prototype,"right",void 0),g([x()],Ll.prototype,"bottom",void 0),Ll=k6=g([K("esri.views.2d.PaddedViewState.Padding")],Ll);let Jd=C6=class extends pC{constructor(...e){super(...e),this.paddedViewState=new pC,this._updateContent=(()=>{const t=At();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;Or(t,r.left+r.right,r.top+r.bottom),Hi(t,i,t),Np(s.size,t);const h=s.viewpoint;h&&(this.viewpoint=h)}})(),this.own($e(()=>[this.size,this.padding],()=>this._updateContent(),Yl)),this.padding=new Ll,this.size=[0,0]}set padding(e){this._set("padding",e||new Ll)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Jge(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new C6({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};g([x()],Jd.prototype,"paddedViewState",void 0),g([x({type:Ll})],Jd.prototype,"padding",null),g([x()],Jd.prototype,"viewpoint",null),Jd=C6=g([K("esri.views.2d.PaddedViewState")],Jd);const Gve=Jd;class Uve{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class lG{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Aw(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&Y(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let h=null;i&&(h=to(i,()=>s.abort()));const y=()=>{const E=this._processingItems.get(t);E&&E.controller.abort(),f(),S.reject(bi())},f=()=>{w.remove(),Y(h)&&h.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},w=iM(s.signal,y),S=Jl();return this._deferreds.set(t,S),this._controllers.set(t,s),S.promise.then(f,f),this._queue.push(t),this._scheduleNext(),S.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=X0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(oe(t))return;let i;const r=new AbortController,s=new Uve(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(h){this._processError(s,h)}ru(i)?(s.promise=i,i.then(h=>this._processResult(s,h),h=>this._processError(s,h))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function qve(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const A9=new Set,hv=[],td=new Map,dC=[0,0];let xu=class extends qe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new lG({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(S=>{const E=this._keyToItem.get(S),A=this.tileInfoView.getTileScale(E.key);td.has(A)||(td.set(A,[]),i=Math.max(A,i),r=Math.min(A,r)),td.get(A).push(E.key),A9.add(A)});let s=this.state.scale;td.has(s)||(qve(hv,A9),hv.sort((S,E)=>S-E),s=hv.reduce((S,E)=>Math.abs(E-s)<Math.abs(S-s)?E:S,hv[0])),s=Math.min(s,i),s=Math.max(s,r);const h=td.get(s),y=t.getClosestInfoForScale(s),f=y.getColumnForX(this.state.center[0]),w=y.getRowForY(this.state.center[1]);return h.sort((S,E)=>{const A=y.denormalizeCol(S.col,S.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((f-A)*(f-A)+(w-S.row)*(w-S.row))-Math.sqrt((f-P)*(f-P)+(w-E.row)*(w-E.row))}),A9.clear(),td.clear(),h[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(h=>{const y=this._keyToItem.get(h);t.getTileCoords(dC,y.key);const f=zh(dC,i);f<r&&(r=f,s=y.key)}),s.id}};g([x({constructOnly:!0})],xu.prototype,"concurrency",void 0),g([x({constructOnly:!0})],xu.prototype,"process",void 0),g([x()],xu.prototype,"state",void 0),g([x({constructOnly:!0})],xu.prototype,"strategy",void 0),g([x({constructOnly:!0})],xu.prototype,"tileInfoView",void 0),g([x({readOnly:!0})],xu.prototype,"updating",null),xu=g([K("esri.views.2d.tiling.PagedTileQueue")],xu);class Un{constructor(t,i,r,s){this.set(t,i,r,s)}static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Un(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[h,y,f,w]=t.split("/");this.level=parseFloat(h),this.row=parseFloat(y),this.col=parseFloat(f),this.world=parseFloat(w)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Un(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Un(t,i,r,s),new Un(t,i,r+1,s),new Un(t,i+1,r,s),new Un(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Un.pool=new Zo(Un,null,null,25,50);function Su(e,t){return[e,t]}function Xh(e,t,i){return e[0]=t,e[1]=i,e}function Bve(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const po=new Un("0/0/0/0");class DE{constructor(t,i,r,s,h,y,f,w,S,E,A,P){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=h,this.last=y,this.size=f,this.norm=w,this.worldStart=S,this.worldEnd=E,this.worldSize=A,this.wrap=P}static create(t,i,r=null){const s=vs(t.spatialReference),h=i.origin||Su(t.origin.x,t.origin.y),y=Su(t.size[0]*i.resolution,t.size[1]*i.resolution),f=Su(-1/0,-1/0),w=Su(1/0,1/0),S=Su(1/0,1/0);Y(r)&&(Xh(f,Math.max(0,Math.floor((r.xmin-h[0])/y[0])),Math.max(0,Math.floor((h[1]-r.ymax)/y[1]))),Xh(w,Math.max(0,Math.floor((r.xmax-h[0])/y[0])),Math.max(0,Math.floor((h[1]-r.ymin)/y[1]))),Xh(S,w[0]-f[0]+1,w[1]-f[1]+1));const{cols:E,rows:A}=i;let P,N,F,V;return!r&&E&&A&&(Xh(f,E[0],A[0]),Xh(w,E[1],A[1]),Xh(S,E[1]-E[0]+1,A[1]-A[0]+1)),t.isWrappable?(P=Su(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),S[1]),N=Su(Math.floor((s.origin[0]-h[0])/y[0]),f[1]),F=Su(P[0]+N[0]-1,w[1]),V=!0):(N=f,F=w,P=S,V=!1),new DE(i.level,i.resolution,i.scale,h,f,w,S,y,N,F,P,V)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){po.set(i);const s=r?po.col:this.denormalizeCol(po.col,po.world),h=po.row;return Bve(t,this.getXForColumn(s),this.getYForRow(h+1),this.getXForColumn(s+1),this.getYForRow(h)),t}getTileCoords(t,i,r=!1){po.set(i);const s=r?po.col:this.denormalizeCol(po.col,po.world);return Array.isArray(t)?Xh(t,this.getXForColumn(s),this.getYForRow(po.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(po.row)),t}}class H0{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:h}=s;if(r.length!==0)for(const{row:y,colFrom:f,colTo:w}of r)for(let S=f;S<=w;S++)t.call(i,h,y,s.normalizeCol(S),s.getWorldForColumn(S))}}H0.pool=new Zo(H0);class k9{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const xi=new Un("0/0/0/0");class zE{constructor(t,i,r,s,h,y,f,w){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=h,this.rightAdjust=y,this.leftBound=f,this.rightBound=w}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[h,y]=i,f=h-r,w=y-s,S=w!==0?f/w:0,E=(Math.ceil(s)-s)*S,A=(Math.floor(s)-s)*S;return new zE(r,Math.floor(s),Math.ceil(y),S,f<0?E:A,f<0?A:E,f<0?h:r,f<0?r:h)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const es=[[0,0],[0,0],[0,0],[0,0]],Hve=1e-6;class Wve{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((h,y)=>y.scale-h.scale);const s=this._lodInfos=r.map(h=>DE.create(t,h,i));r.forEach((h,y)=>{this._infoByLevel[h.level]=s[y],this._infoByScale[h.scale]=s[y],this.scales[y]=h.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){xi.set(i);const s=this._infoByLevel[xi.level];return s?s.getTileBounds(t,xi,r):t}getTileCoords(t,i,r=!1){xi.set(i);const s=this._infoByLevel[xi.level];return s?s.getTileCoords(t,xi,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),h=H0.pool.acquire(s),y=this._wrap;let f,w,S,E=1/0,A=-1/0;const P=h.spans;es[0][0]=es[0][1]=es[1][1]=es[3][0]=-i,es[1][0]=es[2][0]=t.size[0]+i,es[2][1]=es[3][1]=t.size[1]+i;for(const U of es)t.toMap(U,U),U[0]=s.getColumnForX(U[0]),U[1]=s.getRowForY(U[1]);const N=[];let F=3;for(let U=0;U<4;U++){if(es[U][1]===es[F][1]){F=U;continue}const X=zE.create(es[U],es[F]);E=Math.min(X.ymin,E),A=Math.max(X.ymax,A),N[X.ymin]===void 0&&(N[X.ymin]=[]),N[X.ymin].push(X),F=U}if(E==null||A==null||A-E>100)return null;let V=[];for(f=E;f<A;){N[f]!=null&&(V=V.concat(N[f])),w=1/0,S=-1/0;for(let U=V.length-1;U>=0;U--){const X=V[U];w=Math.min(w,X.getLeftCol()),S=Math.max(S,X.getRightCol())}if(w=Math.floor(w),S=Math.floor(S),f>=s.first[1]&&f<=s.last[1])if(y)if(s.size[0]<s.worldSize[0]){const U=Math.floor(S/s.worldSize[0]);for(let X=Math.floor(w/s.worldSize[0]);X<=U;X++)P.push(new k9(f,Math.max(s.getFirstColumnForWorld(X),w),Math.min(s.getLastColumnForWorld(X),S)))}else P.push(new k9(f,w,S));else w>s.last[0]||S<s.first[0]||(w=Math.max(w,s.first[0]),S=Math.min(S,s.last[0]),P.push(new k9(f,w,S)));f+=1;for(let U=V.length-1;U>=0;U--){const X=V[U];X.ymax>=f?X.incrRow():V.splice(U,1)}}return h}getTileParentId(t){xi.set(t);const i=this._infoByLevel[xi.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(xi,this._lodInfos[r],xi),xi.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){xi.set(i);const r=this._infoByLevel[xi.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(xi,s,xi);const y=s.denormalizeCol(xi.col,xi.world);for(const f of t.spans)if(f.row===xi.row&&f.colFrom<=y&&f.colTo>=y)return!0}if(s.resolution<r.resolution){const[y,f,w,S]=t.spans.reduce((V,U)=>(V[0]=Math.min(V[0],U.row),V[1]=Math.max(V[1],U.row),V[2]=Math.min(V[2],U.colFrom),V[3]=Math.max(V[3],U.colTo),V),[1/0,-1/0,1/0,-1/0]),E=r.denormalizeCol(xi.col,xi.world),A=s.getColumnForX(r.getXForColumn(E)),P=s.getRowForY(r.getYForRow(xi.row)),N=s.getColumnForX(r.getXForColumn(E+1))-1,F=s.getRowForY(r.getYForRow(xi.row+1))-1;return!(A>S||N<w||P>f||F<y)}const h=s.denormalizeCol(xi.col,xi.world);return t.spans.some(y=>y.row===xi.row&&y.colFrom<=h&&y.colTo>=h)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=vs(this.tileInfo.spatialReference),h=-r*(s.valid[1]-s.valid[0]);t[0]+=h,t[2]+=h}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Hve)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function Jve(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const C9=new Set,cv=[],id=new Map,fC=[0,0];let Il=class extends qe{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new lG({concurrency:e,process:(r,s)=>{const h=this._keyToItem.get(r);return t(h,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(S=>{const E=this._keyToItem.get(S),A=this.tileInfoView.getTileScale(E.key);id.has(A)||(id.set(A,[]),i=Math.max(A,i),r=Math.min(A,r)),id.get(A).push(E.key),C9.add(A)});let s=this.state.scale;id.has(s)||(Jve(cv,C9),cv.sort((S,E)=>S-E),s=cv.reduce((S,E)=>Math.abs(E-s)<Math.abs(S-s)?E:S,cv[0])),s=Math.min(s,i),s=Math.max(s,r);const h=id.get(s),y=t.getClosestInfoForScale(s),f=y.getColumnForX(this.state.center[0]),w=y.getRowForY(this.state.center[1]);return h.sort((S,E)=>{const A=y.denormalizeCol(S.col,S.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((f-A)*(f-A)+(w-S.row)*(w-S.row))-Math.sqrt((f-P)*(f-P)+(w-E.row)*(w-E.row))}),C9.clear(),id.clear(),h[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r=Number.POSITIVE_INFINITY,s=null;return e.forEach(h=>{const y=this._keyToItem.get(h);t.getTileCoords(fC,y.key);const f=zh(fC,i);f<r&&(r=f,s=y.key)}),s.id}};g([x({constructOnly:!0})],Il.prototype,"concurrency",void 0),g([x({constructOnly:!0})],Il.prototype,"process",void 0),g([x()],Il.prototype,"state",void 0),g([x({constructOnly:!0})],Il.prototype,"strategy",void 0),g([x({constructOnly:!0})],Il.prototype,"tileInfoView",void 0),g([x({readOnly:!0})],Il.prototype,"updating",null),Il=g([K("esri.views.2d.tiling.TileQueue")],Il);const I4e=Il;class Kve{constructor(t,i,r){this.maxSize=t,this.tileInfoView=i,this.removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const r=i.key.level,s=this._tileKeysPerLevel[r];yC(this._tilePerId,t);for(let h=0;h<s.length;h++)if(s[h].id===t){s.splice(h,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let h=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&h>=0;)h!==t&&(s=this._pruneAroundCenterTile(s,i,r,h)),h--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const h=this._tileKeysPerLevel[s];if(!h||h.length===0)return t;const{size:y,origin:f}=this.tileInfoView.tileInfo,w=r*y[0],S=r*y[1],E=[0,0],A=[0,0];for(h.sort((P,N)=>(E[0]=f.x+w*(P.col+.5),E[1]=f.y-S*(P.row+.5),A[0]=f.x+w*(N.col+.5),A[1]=f.y-S*(N.row+.5),Za(E,i)-Za(A,i)));h.length>0;){const P=h.pop();if(this._removeTile(P.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),yC(this._tilePerId,t)}}function yC(e,t){e.delete(t)}const Qh=new Un(0,0,0,0),Cs=new Map,rd=[],pv=[];class A4e{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new Kve(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(pv.length=0,rd.length=0,Cs.clear(),!s)return;const{minScale:h,maxScale:y}=this.tileInfoView.tileInfo,{spans:f,lodInfo:w}=s,{level:S}=w,{scale:E,center:A,resolution:P}=t.state,N=!t.stationary&&E>this._previousScale;if(this._previousScale=E,this.tiles.length=0,!i&&(E>h||E<y))return this.tiles.length=0,Cs.clear(),r.forEach(X=>{this.releaseTile(X)}),r.clear(),pv.length=0,rd.length=0,Cs.clear(),H0.pool.release(s),!0;r.forEach(X=>X.visible=!0);let F=0,V=0;if(f.length>0)for(const{row:X,colFrom:re,colTo:he}of f)for(let pe=re;pe<=he;pe++){F++;const ae=Qh.set(S,X,w.normalizeCol(pe),w.getWorldForColumn(pe)).id;if(r.has(ae)){const le=r.get(ae);le.isReady?(Cs.set(ae,le),V++):N||this._addParentTile(ae,Cs)}else{let le;if(this._tileCache&&this._tileCache.has(ae)){if(le=this._tileCache.pop(ae),this.tileIndex.set(ae,le),le.isReady){Cs.set(ae,le),V++;continue}}else le=this.acquireTile(Qh),this.tileIndex.set(ae,le);N||this._addParentTile(ae,Cs)}}const U=V===F;r.forEach((X,re)=>{if(Qh.set(re),Cs.has(re))return;const he=this.tileInfoView.intersects(s,Qh),pe=this.cachePolicy==="purge"?Qh.level!==S:Qh.level>S;!he||!N&&U?!pe&&he||rd.push(re):X.isReady?pe&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Qh,S)?rd.push(re):pv.push(re):pe&&rd.push(re)});for(const X of pv){const re=r.get(X);re&&re.isReady&&Cs.set(X,re)}for(const X of rd){const re=r.get(X);this._tileCache?this._tileCache.add(re):this.releaseTile(re),r.delete(X)}return Cs.forEach(X=>this.tiles.push(X)),r.forEach(X=>{Cs.has(X.key.id)||(X.visible=!1)}),this._tileCache&&this._tileCache.prune(S,A,P),H0.pool.release(s),Cs.clear(),U}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Ss();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const h=Ss();if(this.tileInfoView.getTileBounds(h,s.key,!0),XX(h,r))return!0}return!1}}function VE(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class mC extends Fr{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){VE(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class Yve extends Fr{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:h}=i,{view:y}=this,{mapViewNavigation:f}=y;switch(s){case"begin":{const{scale:w}=y;this._startScale=w,this._currentScale=w,this._previousDelta=h,f.begin();break}case"update":{if(this._previousDelta.y===h.y)return;this._previousDelta=h;const w=1.015**h.y,S=this._startScale*w,E=S/this._currentScale;f.setViewpointImmediate(E),this._currentScale=S;break}case"end":{const{constraints:w}=y,{effectiveLODs:S,snapToZoom:E}=w;if(!E||!S)return void f.end();const A=w.snapScale(this._currentScale),P=(h.y>0?Math.max(A,w.snapToPreviousScale(this._startScale)):Math.min(A,w.snapToNextScale(this._startScale)))/this._currentScale;f.zoom(P);break}}}}class $3{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this.currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class Zve extends Fr{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new $3({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&VE(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Xve extends Fr{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i;const s=this.view.mapViewNavigation;this.dragEventSeparator=new $3({start:(h,y)=>{s.rotate.begin(this.view,y.data),y.stopPropagation()},update:(h,y)=>{s.rotate.update(this.view,y.data),y.stopPropagation()},end:(h,y)=>{s.rotate.end(),y.stopPropagation()},condition:(h,y)=>h===1&&VE(y.data,this.pointerAction)}),this.registerIncoming("drag",r,h=>this.dragEventSeparator.handle(h))}}function fo(e){let t=e*e;return e<0&&(t*=-1),t}function Qve(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function ebe(e,t,i){const r=i,s=e.state,h=e.device,y=t.tiltDirection==="forward-down"?1:-1,f=1;return h.deviceType==="standard"?(r.translation[0]=fo(s.axes[0]),r.translation[1]=fo(s.axes[1]),r.translation[2]=fo(s.buttons[7])-fo(s.buttons[6]),r.heading=fo(s.axes[2]),r.tilt=fo(s.axes[3])):h.deviceType==="spacemouse"&&(r.translation[0]=1.2*fo(s.axes[0]),r.translation[1]=1.2*fo(s.axes[1]),r.translation[2]=2*-fo(s.axes[2]),r.heading=1.2*fo(s.axes[5]),r.tilt=1.2*fo(s.axes[3])),r.tilt*=y,IM(r.translation,r.translation,f),r}function tbe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class ibe extends Fr{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new er,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([$e(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=A0({update:r=>this._frameUpdate(r.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},Wt)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,Qve(this.transformation)):(this.currentDevice=t.data.device,ebe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(tbe(i))return;const r=this.view.viewpoint.clone(),s=this.view.navigation.gamepad.velocityFactor,h=nbe*s*t;T3(r,r,[i.translation[0]*h,-i.translation[1]*h]);const y=1+i.translation[2]*sbe*t,f=this.view.constraints.rotationEnabled?-i.heading*rbe*t:0,w=this.view.size,S=[w[0]/2,w[1]];WV(r,r,y,f,S,w);const E=this.view.constraints.constrain(r,this.view.viewpoint);this.view.viewpoint=E}}const rbe=.06,nbe=.7,sbe=6e-4;class obe extends Fr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class abe extends Fr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var c0;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(c0||(c0={}));class lbe extends Fr{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=c0.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=c0.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:h}=this.view;let y=null;switch(s){case c0.IN:y=h.zoomIn();break;case c0.OUT:y=h.zoomOut();break;default:return}h.begin(),y.then(()=>h.end()),t.stopPropagation()}}const ube=.6;class hbe extends Fr{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:r,y:s,deltaY:h}=t.data,y=1/ube**(1/60*h),f=i.zoom(y,[r,s]);f&&(this._canZoom=!1,f.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class cbe extends Fr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new $3({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function gC(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>fbe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function pbe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function dbe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function fbe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class ybe{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=h=>{this._connectGamepad(h.gamepad)},this._onDisconnectGamepad=h=>{const y=h.gamepad,f=y.index,w=this.inputDevices[f];w&&(this._emitGamepadEvent(y,gC(w),!1),this.inputDevices.splice(f,1),this.latestUpdate.splice(f,1),this.input.gamepad.devices.remove(w),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(h=>this._connectGamepad(h)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new kE(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=A0({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),r=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const h=this.inputDevices[s.index];if(!h)return;const y=this.latestUpdate[s.index],f=gC(h),w=r||dbe(f);y&&(y.timestamp===s.timestamp||!y.active&&w||pbe(y.state,f))||this._emitGamepadEvent(s,f,!w)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this.latestUpdate[t.index],h=s&&s.active;if(!h&&!r)return;const y=!h&&r?"start":h&&r?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const vC=we("trident"),bC=we("edge"),mbe=we("chrome"),gbe=we("ff"),vbe=we("safari"),nd={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class I3{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new ybe(t,this.input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(O9[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&O9[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(O9[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?nd.touchNone:nd.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?nd.touchPan:nd.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(nd.touchNone),this._element.classList.remove(nd.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=EV(this._element,t);return I3.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=tme(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:(vC||bC)&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}vC||bC?r*=.7:mbe||vbe?r*=.6:gbe&&(r*=1.375);const s=100,h=Math.abs(r);h>s&&(r=r/h*200/(1+Math.exp(-.02*(h-s))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}I3.test={disableSubpixelCoordinates:!1};const O9={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class bbe extends Fr{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function GE(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function wbe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function _be(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:_r()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[he,pe]=e,[ae,le]=[pe.x-he.x,pe.y-he.y];return t.radius=Math.sqrt(ae*ae+le*le)/2,t.center.x=(he.x+pe.x)/2,t.center.y=(he.y+pe.y)/2,t}let i=0,r=0;for(let he=0;he<e.length;he++)i+=e[he].x,r+=e[he].y;i/=e.length,r/=e.length;const s=e.map(he=>he.x-i),h=e.map(he=>he.y-r);let y=0,f=0,w=0,S=0,E=0,A=0,P=0;for(let he=0;he<s.length;he++){const pe=s[he],ae=h[he],le=pe*pe,Te=ae*ae;y+=le,f+=Te,w+=pe*ae,S+=le*pe,E+=Te*ae,A+=pe*Te,P+=ae*le}const N=.5*(S+A),F=.5*(E+P),V=y*f-w*w,U=(N*f-F*w)/V,X=(y*F-w*N)/V,re=_r(U+i,X+r);return{radius:Math.sqrt(U*U+X*X+(y+f)/e.length),center:re}}const Ys={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class xbe extends Fr{constructor(t=Ys.maximumDoubleClickDelay,i=Ys.maximumDoubleClickDistance,r=Ys.maximumDoubleTouchDelay,s=Ys.maximumDoubleTouchDistance,h=Am){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=Hn(t.doubleClickTimeout))}get hasPendingInputs(){return Em(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,r=this._pointerId(i),s=this._pointerState.get(r);if(s){const h=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;GE(s.event.data,i)>h?(this._clearDoubleClickTimeout(r,!0),this._startClick(t)):(this._clearDoubleClickTimeout(r,!1),this._doubleClick.emit(s.event.data,void 0,s.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),r)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class Sbe extends Fr{constructor(t=Ys.maximumDoubleClickDelay,i=Ys.maximumDoubleClickDistance,r=Ys.maximumDoubleTouchDelay,s=Ys.maximumDoubleTouchDistance,h=Am){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=h,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=_r(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new $3({start:(y,f)=>this._dragStart(y,f),update:(y,f)=>this._dragUpdate(f),end:(y,f)=>this._dragEnd(f)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return Em(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:h,pointer:y,pointers:f,pointerType:w,timestamp:S}=r;return{action:t,delta:i,button:s,buttons:h,pointer:y,pointers:f,pointerType:w,timestamp:S}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:h}=r;this._dragStartCenter=h;const y=this._createDoubleTapDragData("begin",_r(0,0),r);this._doubleTapDrag.emit(y,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,h=_r(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",h,i);this._doubleTapDrag.emit(y,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,h=_r(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",h,i);this._doubleTapDrag.emit(y,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=this._pointerId(i),s=this._pointerState.get(r),{pointerType:h}=i.native;if(s){const y=h==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(r),GE(s.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:r,button:s,pointerType:h}=i;return h==="mouse"?`${r}:${s}`:`${h}`}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=this._pointerId(i),h=r==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(s),h);this._pointerState.set(s,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}}class Mbe extends Fr{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:s,pointers:Ebe(this.activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=dv(this.activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,s);const h=zb(s,uG(this.activePointerMap));s.initialAngle=h,s.lastAngle=h,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this.activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=dv(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=dv(this.activePointerMap);this.activePointerMap.forEach(r=>{r.initialAngle=zb(r,i)-t,r.lastAngle=zb(r,i)-t})}_emitEvent(t,i,r){const s=dv(this.activePointerMap);this.drag.emit(this._createPayload(t,i,s,r),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this.isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(r),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function uG(e){const t=[];return e.forEach(i=>{t.push(_r(i.event.x,i.event.y))}),_be(t)}function dv(e){const t=uG(e);let i=0;return e.forEach(r=>{let s=zb(r,t),h=s-r.lastAngle;for(;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;s=r.lastAngle+h,r.lastAngle=s;const y=s-r.initialAngle;i+=y}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Ebe(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function zb(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var wC;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(wC||(wC={}));class Tbe extends Fr{constructor(t=Ys.maximumDoubleClickDelay,i=Ys.maximumDoubleClickDistance,r=Ys.maximumDoubleTouchDelay,s=Ys.maximumDoubleTouchDistance,h=Am){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=h,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=this._pointerId(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const r=t.data,s=this._pointerId(r),h=this._pointerState.get(s);if(h&&i==="pointer-up"&&h.downButton===r.native.button){const y=h.immediateDoubleClick;if(y){y.timeoutHandle.remove();const f=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;GE(y,t.data)>f?this._startImmediateDoubleClick(t,h):(this._immediateDoubleClick.emit(t.data,void 0,y.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,h)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const d1={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class $be extends Fr{constructor(t=d1.maximumClickDelay,i=d1.movementUntilMouseDrag,r=d1.movementUntilPenDrag,s=d1.movementUntilTouchDrag,h=d1.holdDelay,y=Am){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=r,this.movementUntilTouchDrag=s,this.holdDelay=h,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",f=>{this._handlePointerLoss(f,"pointer-up")}),this.registerIncoming("pointer-capture-lost",f=>{this._handlePointerLoss(f,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",f=>{this._handlePointerLoss(f,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const y=this._pointerState.get(r);if(y){if(!y.isDragging){const f=y.previousEvent;this._pointerHold.emit(f,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this.holdDelay));const h={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,h),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):wbe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,h=this._pointerState.get(s);h&&(h.holdTimeout!=null&&(h.holdTimeout.remove(),h.holdTimeout=null),h.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",h,i==="pointer-up"?r:h.previousEvent),void 0,h.modifiers):i==="pointer-up"&&h.downButton===r.native.button&&t.timestamp-h.startTimestamp<=this.maximumClickDelay&&!h.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const fv={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Kd=class extends qe{constructor(){super(...arguments),this._handles=new er}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([sn(()=>!e(),()=>this._disconnect()),sn(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new I3(e,this.view.input),i=[new Tbe,new $be,new xbe,new Mbe(this.view.navigation),new Sbe],r=new Ju({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new bbe],ri.INTERNAL),r.installHandlers("navigation",[new cbe(this.view),new ibe(this.view),new hbe(this.view),new mC(this.view),new mC(this.view,[fv.counter]),new Zve(this.view,"primary"),new obe(this.view,fv.pan),new lbe(this.view,fv.zoom),new abe(this.view,fv.rotate),new Xve(this.view,"secondary"),new Yve(this.view,"touch")],ri.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,$e(()=>{var s,h;return(h=(s=this.view)==null?void 0:s.navigation)==null?void 0:h.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Wt)}get test(){return{inputManager:this._inputManager}}};g([x()],Kd.prototype,"view",void 0),g([x()],Kd.prototype,"latestPointerType",null),g([x()],Kd.prototype,"latestPointerLocation",null),Kd=g([K("esri.views.2d.input.MapViewInputManager")],Kd);const Ibe=Kd;var _C,xC,SC,hG={exports:{}};_C=hG,xC=function(){function e(s,h,y,f,w){t(s,h,y||0,f||s.length-1,w||r)}function t(s,h,y,f,w){for(;f>y;){if(f-y>600){var S=f-y+1,E=h-y+1,A=Math.log(S),P=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*P*(S-P)/S)*(E-S/2<0?-1:1);t(s,h,Math.max(y,Math.floor(h-E*P/S+N)),Math.min(f,Math.floor(h+(S-E)*P/S+N)),w)}var F=s[h],V=y,U=f;for(i(s,y,h),w(s[f],F)>0&&i(s,y,f);V<U;){for(i(s,V,U),V++,U--;w(s[V],F)<0;)V++;for(;w(s[U],F)>0;)U--}w(s[y],F)===0?i(s,y,U):i(s,++U,f),U<=h&&(y=U+1),h<=U&&(f=U-1)}}function i(s,h,y){var f=s[h];s[h]=s[y],s[y]=f}function r(s,h){return s<h?-1:s>h?1:0}return e},(SC=xC())!==void 0&&(_C.exports=SC);const Abe=hG.exports;function a2(e,t){if(!(this instanceof a2))return new a2(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function kbe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function sd(e,t){my(e,0,e.children.length,t,e)}function my(e,t,i,r,s){s||(s=Yd(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var h,y=t;y<i;y++)h=e.children[y],gy(s,e.leaf?r(h):h);return s}function gy(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function MC(e,t){return e.minX-t.minX}function EC(e,t){return e.minY-t.minY}function P9(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function yv(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Cbe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Obe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),h=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,h-r)}function N9(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function mv(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Yd(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function TC(e,t,i,r,s){for(var h,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=r||(h=t+Math.ceil((i-t)/r/2)*r,Abe(e,h,t,i,s),y.push(t,h,h,i))}a2.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!mv(e,t))return i;for(var s,h,y,f,w=[];t;){for(s=0,h=t.children.length;s<h;s++)y=t.children[s],mv(e,f=t.leaf?r(y):y)&&(t.leaf?i.push(y):N9(e,f)?this._all(y,i):w.push(y));t=w.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!mv(e,t))return!1;for(var r,s,h,y,f=[];t;){for(r=0,s=t.children.length;r<s;r++)if(h=t.children[r],mv(e,y=t.leaf?i(h):h)){if(t.leaf||N9(e,y))return!0;f.push(h)}t=f.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Yd([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,h,y=this.data,f=this.toBBox(e),w=[],S=[];y||w.length;){if(y||(y=w.pop(),r=w[w.length-1],i=S.pop(),h=!0),y.leaf&&(s=kbe(e,y.children,t))!==-1)return y.children.splice(s,1),w.push(y),this._condense(w),this;h||y.leaf||!N9(y,f)?r?(i++,y=r.children[i],h=!1):y=null:(w.push(y),S.push(i),i=0,r=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:MC,compareMinY:EC,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,h=i-t+1,y=this._maxEntries;if(h<=y)return sd(s=Yd(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(h)/Math.log(y)),y=Math.ceil(h/Math.pow(y,r-1))),(s=Yd([])).leaf=!1,s.height=r;var f,w,S,E,A=Math.ceil(h/y),P=A*Math.ceil(Math.sqrt(y));for(TC(e,t,i,P,this.compareMinX),f=t;f<=i;f+=P)for(TC(e,f,S=Math.min(f+P-1,i),A,this.compareMinY),w=f;w<=S;w+=A)E=Math.min(w+A-1,S),s.children.push(this._build(e,w,E,r-1));return sd(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,h,y,f,w,S,E,A;r.push(t),!t.leaf&&r.length-1!==i;){for(E=A=1/0,s=0,h=t.children.length;s<h;s++)w=P9(y=t.children[s]),(S=Cbe(e,y)-w)<A?(A=S,E=w<E?w:E,f=y):S===A&&w<E&&(E=w,f=y);t=f||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),h=[],y=this._chooseSubtree(s,this.data,t,h);for(y.children.push(e),gy(y,s);t>=0&&h[t].children.length>this._maxEntries;)this._split(h,t),t--;this._adjustParentBBoxes(s,h,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var h=this._chooseSplitIndex(i,s,r),y=Yd(i.children.splice(h,i.children.length-h));y.height=i.height,y.leaf=i.leaf,sd(i,this.toBBox),sd(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=Yd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,sd(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,h,y,f,w,S,E;for(w=S=1/0,r=t;r<=i-t;r++)y=Obe(s=my(e,0,r,this.toBBox),h=my(e,r,i,this.toBBox)),f=P9(s)+P9(h),y<w?(w=y,E=r,S=f<S?f:S):y===w&&f<S&&(S=f,E=r);return E},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:MC,s=e.leaf?this.compareMinY:EC;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,h,y=this.toBBox,f=my(e,0,t,y),w=my(e,i-t,i,y),S=yv(f)+yv(w);for(s=t;s<i-t;s++)h=e.children[s],gy(f,e.leaf?y(h):h),S+=yv(f);for(s=i-t-1;s>=t;s--)h=e.children[s],gy(w,e.leaf?y(h):h),S+=yv(w);return S},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)gy(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():sd(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class l2{constructor(t,i){this.key=new Un(0,0,0,0),this.bounds=Ss(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return Ut.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=gn.acquire();for(let r=0;r<t.length;r++)i[r]=new l2(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return TF.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const ec={added:[],removed:[]},R9=new Set,Pbe=new Un(0,0,0,0);class Nbe extends ta{constructor(t){super(),this._tiles=new Map,this._index=a2(9,we("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new l2(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:h}=s;if(r.length>0)for(const{row:y,colFrom:f,colTo:w}of r)for(let S=f;S<=w;S++){const E=Pbe.set(h,y,s.normalizeCol(S),s.getWorldForColumn(S)).id;if(R9.add(E),!this.has(E)){const A=new l2(this.tileScheme,E);this._tiles.set(E,A),this._index.insert(A),this.tiles.push(A),ec.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const f=this.tiles[y];R9.has(f.id)||(this._tiles.delete(f.id),this.tiles.splice(y,1),this._index.remove(f),ec.removed.push(f))}(ec.added.length||ec.removed.length)&&this.emit("update",ec),H0.pool.release(i),R9.clear(),ec.added.length=0,ec.removed.length=0}}let Rbe=0,Qu=class extends qe{constructor(){super(...arguments),this.color=new rt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return Rbe++}};g([x({readOnly:!0})],Qu.prototype,"version",null),g([x({type:rt})],Qu.prototype,"color",void 0),g([x({type:rt})],Qu.prototype,"haloColor",void 0),g([x()],Qu.prototype,"haloOpacity",void 0),g([x()],Qu.prototype,"fillOpacity",void 0),Qu=g([K("esri.views.2d.support.HighlightOptions")],Qu);const cG=Qu,Lbe=e=>e.includes("Brush");class pG{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Lbe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function Fbe(e,t,i,r,s,h,y,f){let w;e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?w=[e.width,e.height]:e.width==null&&e.height!=null?w=[e.height,e.height]:e.width!=null&&e.height==null?w=[e.width,e.width]:e.width==null&&e.height==null&&(w=null);const S=i[0]-(r.left+r.right),E=i[1]-(r.top+r.bottom);let A,P,N=e.area||{x:0,y:0,width:S,height:E};if(w){const F=S/E,V=w[0]/w[1];if(V>F){const U=N.width/V;N={x:N.x,y:Math.round(N.y+(N.height-U)/2),width:N.width,height:Math.round(U)}}else{const U=N.height*V;N={x:Math.round(N.x+(N.width-U)/2),y:N.y,width:Math.round(U),height:N.height}}}else w=[N.width,N.height];return w[0]>N.width?(A=Math.min(w[0]/N.width,t),P=w[0]/N.width/A):(A=1,P=w[0]/N.width),{resolutionScale:A,cropArea:{x:Math.round((N.x+r.left)*A),y:Math.round((N.y+r.top)*A),width:Math.round(N.width*A),height:Math.round(N.height*A)},outputScale:P,format:s,quality:h,children:y,rotation:f}}function jbe(e,t,i){const{ctx:r,canvas:s}=dG(e,i),h=r.getImageData(0,0,e.width,e.height),y=Vbe(s,t);return fG(s),{dataUrl:y,data:h}}function Dbe(e,t){const{ctx:i,canvas:r}=dG(e,t),s=i.getImageData(0,0,e.width,e.height);return fG(r),s}function dG(e,t){const i=zbe();t.premultipliedAlpha&&Wbe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r.putImageData(e,0,0),t.flipY&&Hbe(r),{ctx:r,canvas:i}}function fG(e){e.width=0,e.height=0}function zbe(){return oe(L9)&&(L9=document.createElement("canvas")),L9}let L9=null;function Vbe(e,t){const i=Jbe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function Gbe(e,t){const i=Bbe(e),r=Ybe[i];return{format:i,quality:Kn(t!=null?t:r,0,100)}}function Ube(e,t){return t/Math.max(e[0],e[1])}function k4e(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(u2)try{return new ImageData(e,t)}catch{u2=!1}return yG(e,t,i)}function C4e(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(u2)try{return new ImageData(e,t,i)}catch{u2=!1}const s=yG(t,i,r);return s.data.set(e,0),s}function O4e(e,t,i,r=0,s=0,h=e.width-r,y=e.height-s,f=!1){const{data:w}=e,{width:S,height:E,data:A}=t,P=h/S,N=y/E,F=Math.ceil(P/2),V=Math.ceil(N/2),U=e.width;for(let X=0;X<E;X++)for(let re=0;re<S;re++){const he=4*(re+(f?E-X-1:X)*S);let pe=0,ae=0,le=0,Te=0,Ee=0,Oe=0;const Ae=(X+.5)*N;for(let Fe=Math.floor(X*N);Fe<(X+1)*N;Fe++){const ze=Math.abs(Ae-(Fe+.5))/V,Ge=(re+.5)*P,ke=ze*ze;for(let ht=Math.floor(re*P);ht<(re+1)*P;ht++){const Kt=Math.abs(Ge-(ht+.5))/F,bt=Math.sqrt(ke+Kt*Kt);if(bt>=1)continue;let Ct=2*bt*bt*bt-3*bt*bt+1;const yi=4*(r+ht+(s+Fe)*U);Oe+=Ct*w[yi+3],ae+=Ct,!i&&w[yi+3]<255&&(Ct=Ct*w[yi+3]/255),le+=Ct*w[yi],Te+=Ct*w[yi+1],Ee+=Ct*w[yi+2],pe+=Ct}}A[he]=le/pe,A[he+1]=Te/pe,A[he+2]=Ee/pe,A[he+3]=Oe/ae}return t}function yG(e,t,i){return i||(i=qbe()),i.getContext("2d").createImageData(e,t)}let f1=null,u2=!0;function qbe(){return f1||(f1=document.createElement("canvas"),f1.width=1,f1.height=1),f1}function Bbe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Kbe}}function Hbe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Wbe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const h=255/s;t[r+0]=t[r+0]*h,t[r+1]=t[r+1]*h,t[r+2]=t[r+2]*h}}}const Jbe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},$C=98,Kbe="png",Ybe={png:100,jpg:$C,jpeg:$C};var Qi;function P4e(e,t,i={}){const r=mG(e);for(;r.length>1;){const s=h2(t,r.shift(),i);if(Y(s))return s}return Zbe(t,r.shift(),i)}function mG(e){const t=we("esri-force-webgl");if(t===Qi.WEBGL1||t===Qi.WEBGL2)return[t];switch(e){case"2d":return we("mac")&&we("chrome")?[Qi.WEBGL1,Qi.WEBGL2]:[Qi.WEBGL2,Qi.WEBGL1];case"3d":return[Qi.WEBGL2,Qi.WEBGL1]}}function Zbe(e,t,i={}){if(!window.WebGLRenderingContext)return IC(e,Xbe),null;const r=h2(e,t,i);return oe(r)&&IC(e,Qbe),r}function h2(e,t,i={}){const r=t===Qi.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const h of r){try{s=e.getContext(h,i)}catch{}if(s)break}return s}function IC(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(Qi||(Qi={}));const Xbe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',Qbe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let F9,j9;function ewe(e){const t=mG(e);for(;t.length>1;){const i=AC(t.shift());if(i.available)return i}return AC(t.shift())}function AC(e){switch(e){case Qi.WEBGL1:return twe();case Qi.WEBGL2:return iwe()}}function twe(){return F9||(F9=swe()),F9}function iwe(){return j9||(j9=owe()),j9}class gG{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class rwe extends gG{constructor(){super(...arguments),this.type=Qi.WEBGL1}}class nwe extends gG{constructor(){super(...arguments),this.type=Qi.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function vG(e,t){var h;if(e===Qi.WEBGL1&&typeof WebGLRenderingContext===void 0||e===Qi.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let r=h2(i,e,{failIfMajorPerformanceCaveat:!0});if(oe(r)&&(r=h2(i,e),Y(r)&&(t.majorPerformanceCaveat=!0)),oe(r))return r;if(e===Qi.WEBGL1){const y=(h=r.getParameter(r.VERSION))==null?void 0:h.match(/^WebGL\s+([\d.]*)/);if(y){const f=parseFloat(y[1]);t.available=f>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function swe(){const e=new rwe,t=vG(Qi.WEBGL1,e);return oe(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function owe(){const e=new nwe,t=vG(Qi.WEBGL2,e);return oe(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function awe(e){const t=ewe(e);if(!t.available)return new ne("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===Qi.WEBGL1){if(!t.supportsElementIndexUint)return new ne("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new ne("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new ne("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function lwe(e){return e&&"nodeType"in e}function uwe(e){return e&&typeof e.render=="function"}const kC={component:"esri-component"};let Lc=class extends qe{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(kC.component),t&&t.classList.remove(kC.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||lwe(e)?(this._set("widget",null),V7(e)):(uwe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};g([x({dependsOn:[]})],Lc.prototype,"id",null),g([x()],Lc.prototype,"node",null),g([Mt("node")],Lc.prototype,"castNode",null),g([x({readOnly:!0})],Lc.prototype,"widget",void 0),Lc=g([K("esri.views.ui.Component")],Lc);const Vb=Lc,hwe={left:0,top:0,bottom:0,right:0},bG={bottom:30,top:15,right:15,left:15},D9="manual",ln={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function cwe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function z9(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function V9(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Al=class extends ta.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new er,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&V9(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&V9(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([$e(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Wt),$e(()=>this.padding,this._applyUIPadding,Wt)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(ln.ui),Dpe(e),this._attachContainers(e)),t&&(t.classList.remove(ln.ui),V9(t,{top:"",bottom:"",left:"",right:""}),hj(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...bG,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(h=>this.add(h,t));const s=z9(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||D9)===D9?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(ln.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(h=>this.move(h,t)),!e)return;let i;const r=z9(e)||z9(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Vb||(e=new Vb({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Vb?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||hwe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(ln.innerContainer),e.classList.add(ln.cornerContainer);const t=document.createElement("div");t.classList.add(ln.innerContainer),t.classList.add(ln.manualContainer);const i=document.createElement("div");i.classList.add(ln.topLeft),i.classList.add(ln.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(ln.topRight),r.classList.add(ln.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(ln.bottomLeft),s.classList.add(ln.corner),e.appendChild(s);const h=document.createElement("div");h.classList.add(ln.bottomRight),h.classList.add(ln.corner),e.appendChild(h),this._innerContainer=e,this._manualContainer=t;const y=wh();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":h,"top-leading":y?r:i,"top-trailing":y?i:r,"bottom-leading":y?h:s,"bottom-trailing":y?s:h},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||D9,r=e.index,s=this._positionNameToContainerLookup[i],h=r>-1;if(cwe(t.widget)&&t.widget.startup(),!h)return void s.appendChild(t.node);const y=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?QI(t.node,s.firstChild):s.appendChild(t.node));r>=y.length?s.appendChild(t.node):QI(t.node,y[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};g([x()],Al.prototype,"container",null),g([x()],Al.prototype,"height",null),g([x({value:bG})],Al.prototype,"padding",null),g([Mt("padding")],Al.prototype,"castPadding",null),g([x()],Al.prototype,"view",void 0),g([x()],Al.prototype,"width",null),Al=g([K("esri.views.ui.UI")],Al);const pwe=Al;function CC(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function dwe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function gv(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function fwe(e){return e.type==="bing-maps"}const Mu=[];let Zd=class extends Ap{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Je,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>$e(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([ro(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),sn(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");Mu.length=0,e?(e.forEach(t=>{var s;if(t.suspended||!((s=t.layer)!=null&&s.attributionVisible))return;const i=t.layer;if(CC(i,"user"))return void gv(Mu,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const h=this._fetchedAttributionData.get(t);return void(h?gv(Mu,t,this._getDynamicAttribution(h,this.view,i)):CC(i)&&gv(Mu,t,i.copyright))}return void this._fetchAttributionData(t)}const r=i.get("portalItem.accessInformation");gv(Mu,t,r||i.copyright)}),dwe(this.items,Mu)&&(this.items.removeAll(),this.items.addMany(Mu)),Mu.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await U2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,fwe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const h=i[s],y=h.coverageAreas;if(!y)return;for(const f of y){const w=f.bbox,S=f.zoomMin-(t&&f.zoomMin?1:0),E=f.zoomMax-(t&&f.zoomMax?1:0),A={xmin:w[1],ymin:w[0],xmax:w[3],ymax:w[2],spatialReference:ot.WGS84},P={extent:La(A),attribution:h.attribution||"",score:f.score!=null?f.score:100,id:s};for(let N=S;N<=E;N++)r[N]=r[N]||[],r[N].push(P)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let h=i.tileInfo.scaleToZoom(s);if(h=Math.min(e.maxKey,Math.round(h)),!r||h==null||h<=-1)return"";const y=e[h],f=S2(r.center.clone().normalize(),t.spatialReference),w={};return y?y.filter(S=>{const E=!w[S.id]&&f&&M2(S.extent,f);return E&&(w[S.id]=!0),E}).sort((S,E)=>E.score-S.score||S.objectId-E.objectId).map(S=>S.attribution).join(", "):""}};g([x({readOnly:!0,type:Je})],Zd.prototype,"items",void 0),g([x({readOnly:!0})],Zd.prototype,"state",null),g([x()],Zd.prototype,"view",void 0),Zd=g([K("esri.widgets.Attribution.AttributionViewModel")],Zd);const wG=Zd,Eu={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let pn=class extends Er{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=Eu.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new wG}initialize(){this.own(ro(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[Eu.open]:this._isOpen};return ue("div",{bind:this,class:this.classes(Eu.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return ue("div",{class:Eu.poweredBy},"Powered by"," ",ue("a",{class:Eu.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,s={[Eu.sourcesOpen]:e,[Eu.interactive]:t};return ue("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Eu.sources,s),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,h=s>r,y=this._attributionTextOverflowed!==h;if(this._attributionTextOverflowed=h,y&&(t=!0),this._isOpen){const f=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,f&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};g([x()],pn.prototype,"_isOpen",void 0),g([x()],pn.prototype,"_isInteractive",null),g([x()],pn.prototype,"_attributionTextOverflowed",void 0),g([x()],pn.prototype,"_prevSourceNodeHeight",void 0),g([x({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],pn.prototype,"attributionText",null),g([x()],pn.prototype,"iconClass",void 0),g([x()],pn.prototype,"itemDelimiter",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pn.prototype,"label",void 0),g([x(),Sr("esri/widgets/Attribution/t9n/Attribution")],pn.prototype,"messages",void 0),g([We("viewModel.view")],pn.prototype,"view",void 0),g([x({type:wG})],pn.prototype,"viewModel",void 0),g([jn()],pn.prototype,"_toggleState",null),pn=g([K("esri.widgets.Attribution")],pn);const ywe=pn,mwe="esri.widgets.CompassViewModel";let Fc=class extends mV(qe){constructor(e){super(e),this._handles=new er,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add($e(()=>this.view,this._updateRotationWatcher,Wt))}destroy(){this._handles=Hn(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?$e(()=>e==null?void 0:e.rotation,this._updateForRotation,Wt):$e(()=>e==null?void 0:e.camera,this._updateForCamera,Wt))}};g([x({readOnly:!0})],Fc.prototype,"canShowNorth",null),g([x()],Fc.prototype,"orientation",void 0),g([x({readOnly:!0})],Fc.prototype,"state",null),g([x()],Fc.prototype,"view",void 0),Fc=g([K(mwe)],Fc);const _G=Fc,Tu={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Ma=class extends Er{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Tu.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new _G}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,h={[Tu.disabled]:i,[Tu.interactive]:!i},y={[Tu.northIcon]:r,[Tu.rotationIcon]:!r},{messages:f}=this;return ue("div",{bind:this,class:this.classes(Tu.base,h),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":f.reset,title:f.reset},ue("span",{"aria-hidden":"true",class:this.classes(Tu.icon,y),styles:this._toRotationTransform(e)}),ue("span",{class:Tu.text},f.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};g([We("viewModel.goToOverride")],Ma.prototype,"goToOverride",void 0),g([x()],Ma.prototype,"iconClass",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ma.prototype,"label",void 0),g([x(),Sr("esri/widgets/Compass/t9n/Compass")],Ma.prototype,"messages",void 0),g([We("viewModel.view")],Ma.prototype,"view",void 0),g([x({type:_G})],Ma.prototype,"viewModel",void 0),g([jn()],Ma.prototype,"_reset",null),Ma=g([K("esri.widgets.Compass")],Ma);const gwe=Ma;let Xd=class extends qe{constructor(e){super(e),this._handles=new er,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(sn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};g([x({readOnly:!0})],Xd.prototype,"state",null),g([x()],Xd.prototype,"navigationMode",void 0),g([x()],Xd.prototype,"view",void 0),Xd=g([K("esri.widgets.NavigationToggleViewModel")],Xd);const xG=Xd,Os={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Ea=class extends Er{constructor(e,t){super(e,t),this.iconClass=Os.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new xG}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Os.disabled]:e,[Os.isLayoutHorizontal]:this.layout==="horizontal"},r={[Os.activeButton]:t},s={[Os.activeButton]:!t},h=e?-1:0,y=this.messages.toggle;return ue("div",{bind:this,class:this.classes(Os.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:h,"aria-label":y,title:y},ue("div",{class:this.classes(Os.button,Os.panButton,r)},ue("span",{class:Os.panIcon})),ue("div",{class:this.classes(Os.button,Os.rotateButton,s)},ue("span",{class:Os.rotationIcon})))}_toggle(){this.toggle()}};g([x()],Ea.prototype,"iconClass",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ea.prototype,"label",void 0),g([x({value:"vertical"})],Ea.prototype,"layout",null),g([x(),Sr("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ea.prototype,"messages",void 0),g([We("viewModel.view")],Ea.prototype,"view",void 0),g([x({type:xG})],Ea.prototype,"viewModel",void 0),g([jn()],Ea.prototype,"_toggle",null),Ea=g([K("esri.widgets.NavigationToggle")],Ea);const vwe=Ea,y1={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let eh=class extends Er{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[y1.disabled]:!this.enabled,[y1.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return ue("div",{bind:this,class:this.classes(y1.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},ue("span",{"aria-hidden":"true",role:"presentation",class:this.classes(y1.icon,i)}),ue("span",{class:y1.iconText},this.title))}_triggerAction(){this.action.call(this)}};g([x()],eh.prototype,"action",void 0),g([x()],eh.prototype,"enabled",void 0),g([x()],eh.prototype,"iconClass",void 0),g([x()],eh.prototype,"title",void 0),g([jn()],eh.prototype,"_triggerAction",null),eh=g([K("esri.widgets.IconButton")],eh);const OC=eh;let Qd=class extends qe{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};g([x({readOnly:!0})],Qd.prototype,"canZoomIn",null),g([x({readOnly:!0})],Qd.prototype,"canZoomOut",null),g([x()],Qd.prototype,"view",void 0),Qd=g([K("esri.widgets.Zoom.ZoomConditions2D")],Qd);const bwe=Qd;let e0=class extends qe{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};g([x({readOnly:!0})],e0.prototype,"canZoomIn",null),g([x({readOnly:!0})],e0.prototype,"canZoomOut",null),g([x()],e0.prototype,"view",void 0),e0=g([K("esri.widgets.Zoom.ZoomConditions3D")],e0);const wwe=e0;let th=class extends qe{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new bwe({view:e}):e.type==="3d"&&(this._zoomConditions=new wwe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():u5(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():u5(e.goTo({zoomFactor:.5}))}};g([x()],th.prototype,"_zoomConditions",void 0),g([x({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],th.prototype,"canZoomIn",void 0),g([x({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],th.prototype,"canZoomOut",void 0),g([x({readOnly:!0})],th.prototype,"state",null),g([x()],th.prototype,"view",null),th=g([K("esri.widgets.Zoom.ZoomViewModel")],th);const SG=th,m1={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let kl=class extends Er{constructor(e,t){super(e,t),this.iconClass=m1.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new SG}initialize(){this._zoomInButton=new OC({action:this.zoomIn.bind(this),iconClass:m1.zoomInIcon}),this._zoomOutButton=new OC({action:this.zoomOut.bind(this),iconClass:m1.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[m1.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,ue("div",{class:this.classes(m1.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};g([x()],kl.prototype,"iconClass",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],kl.prototype,"label",void 0),g([x({value:"vertical"})],kl.prototype,"layout",null),g([x(),Sr("esri/widgets/Zoom/t9n/Zoom")],kl.prototype,"messages",void 0),g([We("viewModel.view")],kl.prototype,"view",void 0),g([x({type:SG})],kl.prototype,"viewModel",void 0),kl=g([K("esri.widgets.Zoom")],kl);const _we=kl,MG="esri.views.ui.DefaultUI";function xwe(e){return e&&e.view!==void 0}Le.getLogger(MG);let Gb=class extends pwe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([$e(()=>this.components,this._componentsWatcher.bind(this),Wt),$e(()=>this.view,this._updateViewAwareWidgets.bind(this),Wt)])}_add(e,t,i,r){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;xwe(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Vb({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new ywe({view:this.view})}_createCompass(){return new gwe({view:this.view})}_createNavigationToggle(){return new vwe({view:this.view})}_createZoom(){return new _we({view:this.view})}};g([x()],Gb.prototype,"components",void 0),Gb=g([K(MG)],Gb);const Swe=Gb;let Ub=class extends Swe{constructor(e){super(e),this.components=["attribution","zoom"]}};g([x()],Ub.prototype,"components",void 0),Ub=g([K("esri.views.ui.2d.DefaultUI2D")],Ub);const EG=Ub,ll=Le.getLogger("esri.views.MapView");let TG,$G,IG,AG,kG,CG;async function Mwe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:h}]=await Promise.all([ge(()=>import("./webglDeps.7591c3bf.js"),["assets/webglDeps.7591c3bf.js","assets/VertexArrayObject.4198c73f.js","assets/Texture.599541db.js","assets/enums.de935fa5.js","assets/ProgramTemplate.cd2cb0c8.js","assets/programUtils.4a05d623.js","assets/NestedMap.21c7ee53.js"]),ge(()=>import("./mapViewDeps.82805282.js"),["assets/mapViewDeps.82805282.js","assets/CIMSymbolHelper.e0e771f8.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.b2358e75.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/utils.b41e6c9a.js","assets/Utils.df9e4e1f.js","assets/enums.de935fa5.js","assets/Texture.599541db.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.22dfe7e3.js","assets/WGLContainer.53f843cd.js","assets/pixelUtils.8ce71a56.js","assets/VertexArrayObject.4198c73f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.cd2cb0c8.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.4a05d623.js","assets/NestedMap.21c7ee53.js","assets/Rasterizer.ce9fe5b3.js","assets/cimAnalyzer.403243b4.js","assets/callExpressionWithFeature.620cb82f.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.06083eb8.js","assets/Matcher.6ee47eb7.js","assets/visualVariablesUtils.c0539cad.js","assets/visualVariablesUtils.4d2d720c.js","assets/tileUtils.e92a7825.js","assets/TileClipper.4cec25ed.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.b9a0041e.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.4337cbba.js","assets/requestImageUtils.4ea1aefd.js","assets/ComputedAttributeStorage.14e0f557.js","assets/centroid.641b4e25.js","assets/BaseGraphicContainer.521caa59.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureContainer.f7bac911.js","assets/TileContainer.ab2e04f2.js","assets/schemaUtils.9bfbe60e.js","assets/createSymbolSchema.43b2f77c.js","assets/MD5.97b39efc.js","assets/util.7dacde44.js","assets/vec3f32.0772c8d8.js","assets/GraphicContainer.4afce0c1.js"])]);$G=e,IG=t,AG=i,kG=r,CG=s,TG=h}const PC=160;function Ewe(e){return e&&e.declaredClass==="esri.Viewpoint"}let ct=class extends oue(Mme(Tme(Qme))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new j0({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new eve(this),this._pePromise=null,this.floors=new Je,this.highlightOptions=new cG,this.inputManager=new Ibe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new pG,this.type="2d",this.ui=new EG,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new XV,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([$e(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(PC)},Yl),this.on("resize",t=>this._resizeHandler(t)),$e(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),fne()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Nbe(this.featuresTilingScheme)}get initialExtentRequired(){var y;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let h=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)==null?void 0:y.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(h=-1),(!i||e===0&&h===-1)&&(!r||!Y(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Zl()||(this._pePromise||(this._pePromise=Xl().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!Ka(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new et({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void ll.error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;M6(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add($e(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Yl),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void ll.error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void ll.error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;jge(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;Yge(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;uC(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new ne("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):oe(e.targetGeometry)&&(i=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void ll.error(i);this._scaleBeforeChangingSpatialReference=null;const r=new qr({targetGeometry:new et,scale:0,rotation:0});ia(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;uC(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),kh(()=>this.ready,t).then(()=>{const i={animate:!0,...t},r=Rge(e,this);return this.animation.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});ll.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=rC(e)?iC(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,h=null,y=null;t!=null&&t.include?RC(t.include,NC(this,E=>r.add(E),E=>{h||(h=new Set),h.add(E)},E=>r.add(E),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&RC(t.exclude,NC(this,E=>r.delete(E),E=>{y||(y=new Set),y.add(E)}));const f=this.allLayerViews.filter(E=>!E.suspended&&r.has(E)).reverse(),w=this.toMap(i);let S=[...s?this.graphicsView.hitTest(w).map(E=>({type:"graphic",graphic:E,layer:null,mapPoint:w})):[],...await Promise.all(f.map(E=>E.hitTest(w,i)).toArray())].filter(Y).flat().filter(Y);return h&&(S=S.filter(E=>!("graphic"in E)||!E.graphic||h.has(O6(E.graphic)))),y&&(S=S.filter(E=>!("graphic"in E)||!E.graphic||y.has(O6(E.graphic)))),{screenPoint:i,results:S}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return jbe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return Dbe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,Ube(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(h=>{const y=this.allLayerViews.find(f=>f.layer.id===h.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:r,quality:s}=Gbe(e.format,e.quality);return Fbe(e,t,this.size,this.padding,r,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=rC(e)?iC(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),h=this.spatialReference;return new et({x:r,y:s,spatialReference:h})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),_r(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return cC.hasLayerViewModule(e)}importLayerView(e){return cC.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(ll.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=awe(this.type);return we("safari")&&we("safari")<9&&(e=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:we("safari")})),Y(e)?(ll.warn("#validate()",e.message),Promise.reject(e)):Mwe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new x6),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(y=>{throw r()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),y}),h=new Promise(y=>y(s));return t.when().catch(()=>{r()&&h.cancel&&h.cancel()}),h}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(h=>{if(di(t),i!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=h,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<PC&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var U,X,re,he;const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const h=i&&"initialViewProperties"in i&&i.initialViewProperties,y={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?y.zoom!==-1&&(y.scale=e.zoomToScale(y.zoom)):y.zoom=-1;let f=null,w=null,S=0;const E=y.viewpoint&&y.viewpoint.rotation,A=y.viewpoint&&y.viewpoint.targetGeometry;Y(A)&&(A.type==="extent"?f=A:A.type==="point"&&(w=A,S=y.viewpoint.scale));const P=y.extent||f||((X=(U=h==null?void 0:h.viewpoint)==null?void 0:U.targetGeometry)==null?void 0:X.extent)||t,N=y.center||w||(P==null?void 0:P.center),F=y.scale||S||((re=h==null?void 0:h.viewpoint)==null?void 0:re.scale)||P&&qy(P,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),V=y.rotation||E||((he=h==null?void 0:h.viewpoint)==null?void 0:he.rotation)||0;return N&&F?new qr({targetGeometry:N,scale:F,rotation:V}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation,s=e.then(h=>{if(di(t),i!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return r.update(h),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var s;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((s=i.spatialReference)==null?void 0:s.imageCoordinateSystem)||ki(t,i.spatialReference))return e;const r=Dh(i,t);if(!r)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return Ewe(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Kge(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var f,w;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(S){ll.warn(new _n("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:S})),e.targetGeometry=((f=this.defaultsFromMap.extent)==null?void 0:f.center)||new et({x:0,y:0,spatialReference:this.spatialReference})}(w=this.constraints)==null||w.fit(e),this._set("state",new Gve({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new TG(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new CG,this._magnifierView.magnifier=this.magnifier;const r=new AG({view:this});this._set("labelManager",r);const s=new Qge({view:this});this._set("animationManager",s);const h=new kG({view:this,animationManager:s});this._set("mapViewNavigation",h),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",S=>this.fatalError=S.error),$e(()=>this.stationary,S=>i.stationary=S,ys),$e(()=>this.background,S=>{i.background=S,this._magnifierView.background=S},ys),$e(()=>this.magnifier,S=>this._magnifierView.magnifier=S,ys),$e(()=>this.renderingOptions,S=>i.renderingOptions=S,ys),$e(()=>this.highlightOptions,S=>i.highlightOptions=S,ys),$e(()=>this.state.id,()=>i.state=this.state,ys)],"map-view"),this._updateStageChildren();const y=this._resolveWhenReady;this._resolveWhenReady=[],y.forEach(S=>S(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,h=new et({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",h),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Wve(Ly.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new $G({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new IG(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const f of this.allLayerViews)f.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(oe(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const f=t.viewpoint.clone();f.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=f}const i=t.clone(),[r,s]=t.center;let h=null;try{h=this._project(new et({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(f){Zl()||ll.warn(new _n("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:h.toJSON(),spatialReference:e,error:f}))}h||(h=new et({x:0,y:0,spatialReference:e}));const y=M6(new qr({targetGeometry:new et,scale:0,rotation:0}),t.viewpoint,h);i.viewpoint=y;try{const w=[t.size[0]/2,t.size[1]/2],S=[w[0]+20,w[1]],E=t.toMap([0,0],S),{x:A,y:P}=this._project(new et({x:E[0],y:E[1],spatialReference:t.spatialReference}),e);E[0]=A,E[1]=P,i.toScreen(E,E);const N=Wge(w,E,S),F=Math.hypot(E[0]-w[0],E[1]-w[1])/20;!Number.isFinite(F)||Math.abs(F)>4?(y.rotation=0,y.targetGeometry=new et({x:0,y:0,spatialReference:e})):(y.scale*=F,y.scale>we("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(N)?N:0)}catch{}this._get("constraints").constrain(y,null),this._get("state").viewpoint=y,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const f of this.allLayerViews)f.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};ct.type="2d",g([x({readOnly:!0})],ct.prototype,"animationManager",void 0),g([x({constructOnly:!0})],ct.prototype,"deactivatedWebGLExtensions",void 0),g([x({constructOnly:!0})],ct.prototype,"debugWebGLExtensions",void 0),g([x({readOnly:!0})],ct.prototype,"featuresTilingScheme",void 0),g([x({readOnly:!0})],ct.prototype,"fullOpacity",void 0),g([x({readOnly:!0})],ct.prototype,"graphicsTileStore",null),g([x()],ct.prototype,"graphicsView",void 0),g([x({readOnly:!0})],ct.prototype,"state",void 0),g([x()],ct.prototype,"initialExtentRequired",null),g([x()],ct.prototype,"labelManager",void 0),g([x({readOnly:!0})],ct.prototype,"resourceManager",null),g([x({readOnly:!0})],ct.prototype,"textureManager",null),g([x({readOnly:!0})],ct.prototype,"mapViewNavigation",void 0),g([x({constructOnly:!0})],ct.prototype,"renderCanvas",void 0),g([x()],ct.prototype,"renderingOptions",void 0),g([x({readOnly:!0})],ct.prototype,"rendering",void 0),g([x({constructOnly:!0})],ct.prototype,"supersampleScreenshotsEnabled",void 0),g([x({readOnly:!0})],ct.prototype,"supportsGround",void 0),g([x()],ct.prototype,"_stationaryTimer",void 0),g([x()],ct.prototype,"_defaultsFromMapSettings",null),g([x()],ct.prototype,"_pePromise",void 0),g([x({readOnly:!0})],ct.prototype,"typeSpecificPreconditionsReady",null),g([x()],ct.prototype,"animation",null),g([x({type:a3})],ct.prototype,"background",null),g([x({value:null,type:et,dependsOn:["state.id","ready"]})],ct.prototype,"center",null),g([x({type:XV})],ct.prototype,"constraints",null),g([x({value:null,type:Ut,dependsOn:["state.id","ready"]})],ct.prototype,"extent",null),g([x()],ct.prototype,"floors",void 0),g([x({type:cG})],ct.prototype,"highlightOptions",void 0),g([x({readOnly:!0})],ct.prototype,"inputManager",void 0),g([x()],ct.prototype,"map",void 0),g([x({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ct.prototype,"padding",null),g([x()],ct.prototype,"resizeAlign",void 0),g([x({readOnly:!0,dependsOn:["state.id"]})],ct.prototype,"resolution",null),g([x({value:0,type:Number,dependsOn:["state.id","ready"]})],ct.prototype,"rotation",null),g([x({value:0,type:Number,dependsOn:["state.id","ready"]})],ct.prototype,"scale",null),g([x({constructOnly:!0})],ct.prototype,"spatialReferenceLocked",void 0),g([x()],ct.prototype,"stationary",null),g([x({type:pG,readOnly:!0})],ct.prototype,"timeline",void 0),g([x({readOnly:!0})],ct.prototype,"type",void 0),g([x({readOnly:!0})],ct.prototype,"updating",null),g([x({value:null,type:qr,dependsOn:["state.id","ready"]})],ct.prototype,"viewpoint",null),g([x({value:-1,dependsOn:["state.id","ready"]})],ct.prototype,"zoom",null),g([x({type:Boolean})],ct.prototype,"navigating",null),g([x({type:EG})],ct.prototype,"ui",void 0),ct=g([K("esri.views.MapView")],ct);const Twe=ct;function O6(e){var i,r,s,h;const t=e.getObjectId();return t?`${(h=(s=(i=e.layer)==null?void 0:i.uid)!=null?s:(r=e.sourceLayer)==null?void 0:r.uid)!=null?h:"MapView"}/${t}`:`"MapView/${e.uid}`}function NC(e,t,i,r,s){return h=>{if(h instanceof Zn){if(h.layer===e)s==null||s();else{const y=e.allLayerViews.find(f=>f.layer===h.layer);y&&(r==null||r(y))}i(O6(h))}else{const y=e.allLayerViews.find(f=>f.layer===h);y&&t(y)}}}function RC(e,t){if(e)if(s5(e))for(const i of e)if(s5(i))for(const r of i)t(r);else t(i);else t(e)}let Cl=class extends EF(PF(om)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new bp,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};g([x({type:IF})],Cl.prototype,"elevationInfo",void 0),g([x(v6(bp,"graphics"))],Cl.prototype,"graphics",void 0),g([x({type:["show","hide"]})],Cl.prototype,"listMode",void 0),g([x()],Cl.prototype,"screenSizePerspectiveEnabled",void 0),g([x({readOnly:!0})],Cl.prototype,"type",void 0),g([x({constructOnly:!0})],Cl.prototype,"internal",void 0),Cl=g([K("esri.layers.GraphicsLayer")],Cl);const UE=Cl;function G9(e){switch(e){case Xt.SUPPORTED:break;case Xt.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Xt.GEOMETRY_MISSING:return"no geometry";case Xt.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Xt.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Xt.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Xt;(function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Xt||(Xt={}));function $we(e,t){return oe(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function OG(e,t){return $we(!!Y(e)&&e.hasZ,t)}function A3(e){const t=BE(e);return OG(e.geometry,t)}function N4e(e){const t=BE(e),i=OG(e.geometry,t);return{mode:i,offset:Y(t)&&i!=="on-the-ground"?Gr(t.offset,0)*hoe(Gr(t.unit,"meters")):0}}function qE(e){if(A3(e)==="on-the-ground")return!1;const t=BE(e),i=Y(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||i==="0")}function BE(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function R4e(e,t,i){if(oe(i)||!i.mode)return;const r=e.hasZ?e.z:0,s=Y(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-s;case"on-the-ground":return 0;case"relative-to-ground":return r-(Gr(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+s);case"relative-to-scene":return r-(Gr(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+s)}}function L4e(e,t,i,r=null){return PG(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function c2(e,t,i,r,s=null){return PG(e,t[0],t[1],t.length>2?t[2]:0,i,r,s)}function PG(e,t,i,r,s,h,y=null){if(oe(h))return;const f=Y(y)?y.mode:"absolute-height";if(f==="on-the-ground")return 0;const{absoluteZ:w}=Iwe(t,i,r,s,e,h);return Awe(w,t,i,r,s,e,y,f)}function Iwe(e,t,i,r,s,h){const y=Y(h.offset)?h.offset:0;switch(h.mode){case"absolute-height":return{absoluteZ:i+y,elevation:0};case"on-the-ground":{const f=Gr(s.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:f,elevation:f}}case"relative-to-ground":{const f=Gr(s.elevationProvider.getElevation(e,t,i,r,"ground"),0);return{absoluteZ:i+f+y,elevation:f}}case"relative-to-scene":{const f=Gr(s.elevationProvider.getElevation(e,t,i,r,"scene"),0);return{absoluteZ:i+f+y,elevation:f}}}}function Awe(e,t,i,r,s,h,y,f){const w=Y(y)&&Y(y.offset)?y.offset:0;switch(f){case"absolute-height":return e-w;case"relative-to-ground":return e-(Gr(h.elevationProvider.getElevation(t,i,r,s,"ground"),0)+w);case"relative-to-scene":return e-(Gr(h.elevationProvider.getElevation(t,i,r,s,"scene"),0)+w)}}function kwe(e){var t;if(((t=e.layer)==null?void 0:t.type)!=="graphics")return Xt.GRAPHICS_LAYER_MISSING;if(oe(e.geometry))return Xt.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return Xt.GEOMETRY_TYPE_UNSUPPORTED}return A3(e)!=="on-the-ground"&&qE(e)?Xt.ELEVATION_MODE_UNSUPPORTED:Xt.SUPPORTED}function NG(e){if(!e)return null;if(x2(e)&&e.wkid){const t=Yae[e.wkid];if(t)return t}if(e.wkt){const t=Cwe(e.wkt);if(t)return t}return null}function Cwe(e){const t=Jae.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function k3(e){const t=NG(e||ot.WGS84);if(Owe(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function Owe(e){return"b"in e&&"eSq"in e&&"radius"in e}function vv(e,t,i){const{a:r,eSq:s}=k3(i),h=Math.sqrt(s),y=Math.sin(t[1]*Gn),f=r*t[0]*Gn;let w;return s>0?w=r*((1-s)*(y/(1-s*(y*y))-1/(2*h)*Math.log((1-h*y)/(1+h*y))))*.5:w=r*y,e[0]=f,e[1]=w,e}function C3(e){return NG(e)!==null}function F4e(e,t="square-meters"){if(e.some(y=>!C3(y.spatialReference)))throw new ne("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let y=0;y<e.length;y++){const f=e[y],w=f.spatialReference,{radius:S,densificationRatio:E}=k3(w),A=S*E;i.push(Nwe(f,A))}const r=[],s=[0,0],h=[0,0];for(let y=0;y<i.length;y++){const{rings:f,spatialReference:w}=i[y];let S=0;for(let E=0;E<f.length;E++){const A=f[E];vv(s,A[0],w),vv(h,A[A.length-1],w);let P=h[0]*s[1]-s[0]*h[1];for(let N=0;N<A.length-1;N++)vv(s,A[N+1],w),vv(h,A[N],w),P+=h[0]*s[1]-s[0]*h[1];S+=P}S=Gt(S,"square-meters",t),r.push(S/-2)}return r}function Pwe(e,t="meters"){if(!e)throw new ne("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!C3(r.spatialReference)))throw new ne("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:h}=s,y=s.type==="polyline"?s.paths:s.rings;let f=0;for(let w=0;w<y.length;w++){const S=y[w];let E=0;for(let A=1;A<S.length;A++){const P=S[A-1][0],N=S[A][0],F=S[A-1][1],V=S[A][1];if(F!==V||P!==N){const U={distance:null};RG(U,[P,F],[N,V],h),E+=U.distance}}f+=E}f=Gt(f,"meters",t),i.push(f)}return i}function Nwe(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new ne("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!C3(i))throw new ne("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,s=[],h=[0,0],y={distance:null};for(const f of r){const w=[];s.push(w),w.push([f[0][0],f[0][1]]);let S,E,A=f[0][0],P=f[0][1];for(let N=0;N<f.length-1;N++){if(S=f[N+1][0],E=f[N+1][1],A===S&&P===E)continue;const F=[A,P];RG(y,[A,P],[S,E],i);const{azimuth:V,distance:U}=y,X=U/t;if(X>1){for(let re=1;re<=X-1;re++)qb(h,F,V,re*t,i),w.push(h.slice(0));qb(h,F,V,(U+Math.floor(X-1)*t)/2,i),w.push(h.slice(0))}qb(h,F,V,U,i),w.push(h.slice(0)),A=h[0],P=h[1]}}return e.type==="polyline"?new tn({paths:s,spatialReference:i}):new rn({rings:s,spatialReference:i})}function qb(e,t,i,r,s){const h=t[0],y=t[1],f=h*Gn,w=y*Gn,S=i*Gn,{a:E,b:A,f:P}=k3(s),N=Math.sin(S),F=Math.cos(S),V=(1-P)*Math.tan(w),U=1/Math.sqrt(1+V*V),X=V*U,re=Math.atan2(V,F),he=U*N,pe=he*he,ae=1-pe,le=ae*(E*E-A*A)/(A*A),Te=1+le/16384*(4096+le*(le*(320-175*le)-768)),Ee=le/1024*(256+le*(le*(74-47*le)-128));let Oe,Ae,Fe,ze,Ge=r/(A*Te),ke=2*Math.PI;for(;Math.abs(Ge-ke)>1e-12;)Fe=Math.cos(2*re+Ge),Oe=Math.sin(Ge),Ae=Math.cos(Ge),ze=Ee*Oe*(Fe+Ee/4*(Ae*(2*Fe*Fe-1)-Ee/6*Fe*(4*Oe*Oe-3)*(4*Fe*Fe-3))),ke=Ge,Ge=r/(A*Te)+ze;const ht=X*Oe-U*Ae*F,Kt=Math.atan2(X*Ae+U*Oe*F,(1-P)*Math.sqrt(pe+ht*ht)),bt=Math.atan2(Oe*N,U*Ae-X*Oe*F),Ct=P/16*ae*(4+P*(4-3*ae)),yi=Kt/Gn,Es=(f+(bt-(1-Ct)*P*he*(Ge+Ct*Oe*(Fe+Ct*Ae*(2*Fe*Fe-1)))))/Gn;return e[0]=Es,e[1]=yi,e}function RG(e,t,i,r){const s=t[0]*Gn,h=t[1]*Gn,y=i[0]*Gn,f=i[1]*Gn,{a:w,b:S,f:E,radius:A}=k3(r),P=y-s,N=Math.atan((1-E)*Math.tan(h)),F=Math.atan((1-E)*Math.tan(f)),V=Math.sin(N),U=Math.cos(N),X=Math.sin(F),re=Math.cos(F);let he,pe,ae,le,Te,Ee,Oe,Ae,Fe,ze,Ge=1e3,ke=P;do{if(Oe=Math.sin(ke),Ae=Math.cos(ke),ae=Math.sqrt(re*Oe*(re*Oe)+(U*X-V*re*Ae)*(U*X-V*re*Ae)),ae===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;Te=V*X+U*re*Ae,Ee=Math.atan2(ae,Te),Fe=U*re*Oe/ae,pe=1-Fe*Fe,le=Te-2*V*X/pe,isNaN(le)&&(le=0),ze=E/16*pe*(4+E*(4-3*pe)),he=ke,ke=P+(1-ze)*E*Fe*(Ee+ze*ae*(le+ze*Te*(2*le*le-1)))}while(Math.abs(ke-he)>1e-12&&--Ge>0);if(Ge===0){const Es=A,ra=Math.acos(Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos(y-s))*Es,au=y-s,lu=Math.sin(au)*Math.cos(f),Gh=Math.cos(h)*Math.sin(f)-Math.sin(h)*Math.cos(f)*Math.cos(au),Uh=Math.atan2(lu,Gh);return e.azimuth=Uh/Gn,e.distance=ra,e.reverseAzimuth=void 0,e}const ht=pe*(w*w-S*S)/(S*S),Kt=ht/1024*(256+ht*(ht*(74-47*ht)-128)),bt=S*(1+ht/16384*(4096+ht*(ht*(320-175*ht)-768)))*(Ee-Kt*ae*(le+Kt/4*(Te*(2*le*le-1)-Kt/6*le*(4*ae*ae-3)*(4*le*le-3)))),Ct=Math.atan2(re*Math.sin(ke),U*X-V*re*Math.cos(ke)),yi=Math.atan2(U*Math.sin(ke),U*X*Math.cos(ke)-V*re);return e.azimuth=Ct/Gn,e.distance=bt,e.reverseAzimuth=yi/Gn,e}var P6;let ih=P6=class extends rn{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e&&e.center)i=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return{...super.normalizeCtorArgs(),...i,...t}}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e&&e.hasZ,this.rings.length!==0||!e)return;const i=Gt(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let s,h="geographic";if(r.isWebMercator?h="webMercator":(J[r.wkid]!=null||r.wkt&&r.wkt.indexOf("PROJCS")===0)&&(h="projected"),this.geodesic){let y;switch(h){case"webMercator":y=zl(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":y=e}s=this._createGeodesicCircle(y,i,t),h==="webMercator"&&(s=La(s))}else{let y;h==="webMercator"||h==="projected"?y=i/this._convert2Meters(1,e.spatialReference):h==="geographic"&&(y=$L(i,"meters",l7(e.spatialReference).radius)),s=this._createPlanarCircle(e,y,t)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s}=this;return new P6({center:e.clone(),numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s})}_createGeodesicCircle(e,t,i){let r=0;const s=[];for(;r<360;){const h=[0,0],y=[e.x,e.y];qb(h,y,r,t),this.hasZ&&h.push(e.z),s.push(h),r+=360/i}return s.push(s[0]),new rn(s)}_createPlanarCircle(e,t,i){const r=[],s=2*Math.PI/i;for(let h=0;h<i;++h){const y=s*h,f=[e.x+Math.cos(-y)*t,e.y+Math.sin(-y)*t];this.hasZ&&f.push(e.z),r.push(f)}return r.push(r[0]),new rn({spatialReference:e.spatialReference,rings:[r]})}_convert2Meters(e,t){let i;if(J[t.wkid]!=null)i=J.values[J[t.wkid]];else{const r=t.wkt,s=r.lastIndexOf(",")+1,h=r.lastIndexOf("]]");i=parseFloat(r.substring(s,h))}return e*i}};g([x({type:et})],ih.prototype,"center",void 0),g([x()],ih.prototype,"geodesic",void 0),g([x()],ih.prototype,"numberOfPoints",void 0),g([x()],ih.prototype,"radius",void 0),g([x()],ih.prototype,"radiusUnit",void 0),ih=P6=g([K("esri.geometry.Circle")],ih);const Rwe=ih;function bv(e){return LG(e).result}function j4e(e){return LG(e).geometry}function LG(e){var t;return((t=e.layer)==null?void 0:t.type)!=="graphics"?{result:Xt.GRAPHICS_LAYER_MISSING,geometry:null}:oe(e.geometry)?{result:Xt.GEOMETRY_MISSING,geometry:null}:A3(e)!=="on-the-ground"&&qE(e)?{result:Xt.ELEVATION_MODE_UNSUPPORTED,geometry:null}:e.geometry.type!=="point"&&e.geometry.type!=="polyline"&&(e.geometry.type!=="polygon"||e.geometry instanceof Rwe)?{result:Xt.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:Xt.SUPPORTED,geometry:e.geometry}}function Lwe(e){var i;if(((i=e.layer)==null?void 0:i.type)!=="graphics")return Xt.GRAPHICS_LAYER_MISSING;if(oe(e.geometry))return Xt.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Xt.SUPPORTED;default:return Xt.GEOMETRY_TYPE_UNSUPPORTED}const t=Y(e.symbol)&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return t&&t.length>0&&t.some(r=>r.type==="object")?A3(e)!=="on-the-ground"&&qE(e)?Xt.ELEVATION_MODE_UNSUPPORTED:Xt.SUPPORTED:Xt.SYMBOL_TYPE_UNSUPPORTED}function LC(e,t,i){if(!t||!e||!e.map)return;const{map:r}=e,s=r.layers.find(h=>h===t);s||r.add(t,i),i!=null&&r.layers.reorder(s,i)}function D4e(e,t){return e.allLayerViews.find(i=>{const r=i.layer;return r===t||"sublayers"in r&&Y(r.sublayers)&&r.sublayers.includes(t)})}const ti={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};let Bb=class extends qe{constructor(e){super(e),this.enabled=!1}};g([x({type:Boolean,nonNullable:!0})],Bb.prototype,"enabled",void 0),Bb=g([K("esri.views.interactive.sketch.SketchLabelOptions")],Bb);const FG=Bb;let By=class extends qe{constructor(e){super(e),this.mode="absolute-height"}};g([x({type:String,nonNullable:!0})],By.prototype,"mode",void 0),By=g([K("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],By);let cs=class extends qe{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}};g([x({type:Boolean,nonNullable:!0})],cs.prototype,"distance",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"elevation",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"size",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"scale",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"rotation",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"orientation",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"totalLength",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"area",void 0),g([x({type:Boolean,nonNullable:!0})],cs.prototype,"radius",void 0),cs=g([K("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],cs);let jc=class extends qe{constructor(e){super(e),this.enabled=!1,this.elevation=new By,this.visibleElements=new cs,this.visualVariables=null}};g([x({type:Boolean,nonNullable:!0})],jc.prototype,"enabled",void 0),g([x({type:By,nonNullable:!0})],jc.prototype,"elevation",void 0),g([x({type:cs,nonNullable:!0})],jc.prototype,"visibleElements",void 0),g([x()],jc.prototype,"visualVariables",void 0),jc=g([K("esri.widgets.Sketch.SketchTooltipOptions")],jc);const jG=jc,Pf=(e,t,i)=>[t,i],so=(e,t,i)=>[t,i,e[2]],Nf=(e,t,i)=>[t,i,e[2],e[3]];function FC(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:Y(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function Sm({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function Mm({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function HE(e,t,i){const r=[];let s,h,y,f;for(let w=0;w<i.length;w++){const S=i[w];w>0?(y=Sm(e,S[0]),f=Mm(e,S[1]),y===s&&f===h||(r.push(t(S,y-s,f-h)),s=y,h=f)):(s=Sm(e,S[0]),h=Mm(e,S[1]),r.push(t(S,s,h)))}return r.length>0?r:null}function Fwe(e,t,i,r){return HE(e,i?r?Nf:so:r?so:Pf,t)}function jwe(e,t,i,r){const s=[],h=i?r?Nf:so:r?so:Pf;for(let y=0;y<t.length;y++){const f=HE(e,h,t[y]);f&&f.length>=3&&s.push(f)}return s.length?s:null}function Dwe(e,t,i,r){const s=[],h=i?r?Nf:so:r?so:Pf;for(let y=0;y<t.length;y++){const f=HE(e,h,t[y]);f&&f.length>=2&&s.push(f)}return s.length?s:null}function DG({scale:e,translate:t},i){return i*e[0]+t[0]}function zG({scale:e,translate:t},i){return t[1]-i*e[1]}function VG(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[s,h]=e.scale;let y=DG(e,i[0][0]),f=zG(e,i[0][1]);r[0]=t(i[0],y,f);for(let w=1;w<i.length;w++){const S=i[w];y+=S[0]*s,f-=S[1]*h,r[w]=t(S,y,f)}return r}function GG(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=VG(e,t,i[s]);return r}function zwe(e,t,i,r){return VG(e,i?r?Nf:so:r?so:Pf,t)}function Vwe(e,t,i,r){return GG(e,i?r?Nf:so:r?so:Pf,t)}function Gwe(e,t,i,r){return GG(e,i?r?Nf:so:r?so:Pf,t)}function Uwe(e,t,i,r,s){return t.xmin=Sm(e,i.xmin),t.ymin=Mm(e,i.ymin),t.xmax=Sm(e,i.xmax),t.ymax=Mm(e,i.ymax),t!==i&&(r&&(t.zmin=i.zmin,t.zmax=i.zmax),s&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}function qwe(e,t,i,r,s){return t.points=Fwe(e,i.points,r,s),t}function Bwe(e,t,i,r,s){return t.x=Sm(e,i.x),t.y=Mm(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m)),t}function Hwe(e,t,i,r,s){const h=jwe(e,i.rings,r,s);return h?(t.rings=h,t):null}function Wwe(e,t,i,r,s){const h=Dwe(e,i.paths,r,s);return h?(t.paths=h,t):null}function z4e(e,t){return e&&t?$2(t)?Bwe(e,{},t,!1,!1):I2(t)?Wwe(e,{},t,!1,!1):xh(t)?Hwe(e,{},t,!1,!1):T2(t)?qwe(e,{},t,!1,!1):mM(t)?Uwe(e,{},t,!1,!1):null:null}function V4e(e,t,i,r,s){return Y(i)&&(t.points=zwe(e,i.points,r,s)),t}function G4e(e,t,i,r,s){return oe(i)||(t.x=DG(e,i.x),t.y=zG(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m))),t}function U4e(e,t,i,r,s){return Y(i)&&(t.rings=Gwe(e,i.rings,r,s)),t}function q4e(e,t,i,r,s){return Y(i)&&(t.paths=Vwe(e,i.paths,r,s)),t}function Jwe(e,t){const i=UG[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function Kwe(e,t){const i=UG[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const UG={min:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.min.apply(Math,e[0])},max:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.max.apply(Math,e[0])},avg:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:qG(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Ywe(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sqrt(jC(e[0]))},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:jC(e[0])}};function qG(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}function Ywe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}function jC(e){const t=qG(e),i=e.length;let r=0;for(const s of e)r+=(s-t)**2;return i>1?r/(i-1):0}class vn{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(t){if(t.precision!==null||t.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(t){const i=new vn;return i.second=t/1e3,i}static createFromValueAndQualifer(t,i,r){let s=null;const h=new vn;if(h.op=r==="-"?"-":"+",i.type==="interval-period"){vn._fixDefaults(i);const y=new RegExp("^[0-9]{1,}$");if(i.period==="year"||i.period==="month")throw new Error("Year-Month Intervals not supported");if(!y.test(t))throw new Error("Illegal Interval");h[i.period]=parseFloat(t)}else{if(vn._fixDefaults(i.start),vn._fixDefaults(i.end),i.start.period==="year"||i.start.period==="month")throw new Error("Year-Month Intervals not supported");if(i.end.period==="year"||i.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(i.start.period){case"day":switch(i.end.period){case"hour":if(s=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");h[i.start.period]=parseFloat(t.split(" ")[0]),h[i.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");{h[i.start.period]=parseFloat(t.split(" ")[0]);const y=t.split(" ")[1].split(":");h.hour=parseFloat(y[0]),h.minute=parseFloat(y[1])}break;case"second":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{h[i.start.period]=parseFloat(t.split(" ")[0]);const y=t.split(" ")[1].split(":");h.hour=parseFloat(y[0]),h.minute=parseFloat(y[1]),h.second=parseFloat(y[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(i.end.period){case"minute":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");h.hour=parseFloat(t.split(":")[0]),h.minute=parseFloat(t.split(":")[1]);break;case"second":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const y=t.split(":");h.hour=parseFloat(y[0]),h.minute=parseFloat(y[1]),h.second=parseFloat(y[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(i.end.period!=="second")throw new Error("Invalid Interval.");if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const y=t.split(":");h.minute=parseFloat(y[0]),h.second=parseFloat(y[1])}break;default:throw new Error("Invalid Interval.")}}return h}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function BG(e,t){const i=HG[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function Zwe(e,t){const i=HG[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const HG={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(t==null)return null;if(t instanceof Date)switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){const[t,i]=e;return t==null||i==null?null:t.toString().substring(i-1)}if(e.length===3){const[t,i,r]=e;return t==null||i==null||r==null?null:r<=0?"":t.toString().substring(i-1,i+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=e.length===3,i=t?e[1]:" ",r=t?e[2]:e[1];if(i==null||r==null)return null;const s=`(${W6(i)})`;switch(e[0]){case"BOTH":return r.replace(new RegExp(`^${s}*|${s}*$`,"g"),"");case"LEADING":return r.replace(new RegExp(`^${s}*`,"g"),"");case"TRAILING":return r.replace(new RegExp(`${s}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],i=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*i)/i}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>typeof e[0]=="string"||e[0]instanceof String?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let i=0;i<e.length;i++){if(e[i]==null)return null;t+=e[i].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()}};var DC,zC,WG={exports:{}};zC=function(){function e(s,h){function y(){this.constructor=s}y.prototype=h.prototype,s.prototype=new y}function t(s,h,y,f){var w=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(w,t.prototype),w.expected=h,w.found=y,w.location=f,w.name="SyntaxError",w}function i(s,h,y){return y=y||" ",s.length>h?s:(h-=s.length,s+(y+=y.repeat(h)).slice(0,h))}function r(s,h){var y,f={},w=(h=h!==void 0?h:{}).grammarSource,S={start:wT},E=wT,A="!",P="=",N=">=",F=">",V="<=",U="<>",X="<",re="!=",he="+",pe="-",ae="*",le="/",Te="@",Ee="'",Oe="N'",Ae="''",Fe=".",ze="null",Ge="true",ke="false",ht="in",Kt="is",bt="like",Ct="escape",yi="not",Es="and",ra="or",au="between",lu="from",Gh="for",Uh="substring",Ff="extract",qp="trim",jf="position",Df="timestamp",zf="date",Vf="leading",Gf="trailing",Bp="both",zi="to",W="interval",Tr="year",Hp="month",Ot="day",wi="hour",Xn="minute",Ts="second",$s="case",oo="end",Wp="when",qh="then",uu="else",Pe=",",c="(",C=")",b="`",u=/^[A-Za-z_\x80-\uFFFF]/,a=/^[A-Za-z0-9_]/,n=/^[A-Za-z0-9_.\x80-\uFFFF]/,o=/^[^']/,l=/^[0-9]/,p=/^[eE]/,d=/^[+\-]/,m=/^[ \t\n\r]/,v=/^[^`]/,_=it("!",!1),M=it("=",!1),T=it(">=",!1),I=it(">",!1),O=it("<=",!1),R=it("<>",!1),L=it("<",!1),G=it("!=",!1),q=it("+",!1),D=it("-",!1),H=it("*",!1),ee=it("/",!1),te=tl([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),Z=tl([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),ce=tl([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),ye=it("@",!1),Me=it("'",!1),xe=it("N'",!1),be=it("''",!1),Ce=tl(["'"],!0,!1),Ze=it(".",!1),Qe=tl([["0","9"]],!1,!1),_t=tl(["e","E"],!1,!1),xt=tl(["+","-"],!1,!1),Ei=it("NULL",!0),Bt=it("TRUE",!0),Ue=it("FALSE",!0),Nt=it("IN",!0),dt=it("IS",!0),hi=it("LIKE",!0),Qt=it("ESCAPE",!0),jr=it("NOT",!0),wt=it("AND",!0),Ji=it("OR",!0),at=it("BETWEEN",!0),hu=it("FROM",!0),el=it("FOR",!0),cu=it("SUBSTRING",!0),Bh=it("EXTRACT",!0),z3=it("TRIM",!0),V3=it("POSITION",!0),G3=it("TIMESTAMP",!0),Tn=it("DATE",!0),U3=it("LEADING",!0),q3=it("TRAILING",!0),ie=it("BOTH",!0),Se=it("TO",!0),Ie=it("INTERVAL",!0),gt=it("YEAR",!0),cr=it("MONTH",!0),_i=it("DAY",!0),$n=it("HOUR",!0),Jp=it("MINUTE",!0),jU=it("SECOND",!0),DU=it("CASE",!0),zU=it("END",!0),VU=it("WHEN",!0),GU=it("THEN",!0),UU=it("ELSE",!0),qU=it(",",!1),BU=it("(",!1),HU=it(")",!1),WU=tl([" ","	",`
`,"\r"],!1,!1),lT=it("`",!1),uT=tl(["`"],!0,!1),JU=function(k){return k},KU=function(k,z){var B={type:"expression-list"},Q=kH(k,z);return B.value=Q,B},B3=function(k,z){return i_(k,z)},YU=function(k){return IH("NOT",k)},ZU=function(k,z){return z==""||z==null||z==null?k:z.type=="arithmetic"?i_(k,z.tail):JT(z.op,k,z.right,z.escape)},XU=function(k){return{type:"arithmetic",tail:k}},QU=function(k,z){return{op:k+"NOT",right:z}},eq=function(k,z){return{op:k,right:z}},tq=function(k,z,B){return{op:"NOT"+k,right:{type:"expression-list",value:[z,B]}}},iq=function(k,z,B){return{op:k,right:{type:"expression-list",value:[z,B]}}},hT=function(k){return k[0]+" "+k[2]},rq=function(k,z,B){return{op:k,right:z,escape:B.value}},nq=function(k,z){return{op:k,right:z,escape:""}},sq=function(k,z){return{op:k,right:z}},oq=function(k){return{op:k,right:{type:"expression-list",value:[]}}},aq=function(k,z){return{op:k,right:z}},lq=function(k,z){return i_(k,z)},uq=function(k){return k.paren=!0,k},hq=function(k){return/^CURRENT_DATE$/i.test(k)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(k)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:k}},cT=function(k){return k},pT=function(k,z){return k+z.join("")},cq=function(k){return{type:"parameter",value:k[1]}},pq=function(k,z){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:k},z]}}},dq=function(k,z,B){return{type:"function",name:"substring",args:{type:"expression-list",value:B?[k,z,B[2]]:[k,z]}}},fq=function(k,z,B){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:k==null?"BOTH":k},z,B]}}},yq=function(k,z){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:k==null?"BOTH":k},z]}}},mq=function(k,z){return{type:"function",name:"position",args:{type:"expression-list",value:[k,z]}}},gq=function(k,z){return{type:"function",name:k,args:z||{type:"expression-list",value:[]}}},vq=function(k){return{type:"timestamp",value:k.value}},bq=function(k,z,B){return{type:"interval",value:z,qualifier:B,op:k}},wq=function(k,z){return{type:"interval",value:k,qualifier:z,op:""}},_q=function(k,z){return{type:"interval-qualifier",start:k,end:z}},xq=function(k,z){return{type:"interval-period",period:k.value,precision:z,secondary:null}},dT=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},Sq=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},fT=function(k,z){return{type:"interval-period",period:"second",precision:k,secondary:z}},Mq=function(k){return{type:"interval-period",period:"second",precision:k,secondary:null}},Eq=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Tq=function(k,z){return{type:"interval-period",period:k.value,precision:z,secondary:null}},$q=function(k){return{type:"interval-period",period:"second",precision:k,secondary:null}},Iq=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Aq=function(){return{type:"string",value:"day"}},kq=function(){return{type:"string",value:"hour"}},Cq=function(){return{type:"string",value:"minute"}},Oq=function(){return{type:"string",value:"month"}},Pq=function(){return{type:"string",value:"year"}},yT=function(k){return parseFloat(k)},Nq=function(k){return{type:"date",value:k.value}},Rq=function(){return{type:"null",value:null}},Lq=function(){return{type:"boolean",value:!0}},Fq=function(){return{type:"boolean",value:!1}},mT=function(){return"'"},jq=function(k){return{type:"string",value:k.join("")}},Dq=function(k,z){return{type:"case-expression",format:"simple",operand:k,clauses:z,else:null}},zq=function(k,z,B){return{type:"case-expression",format:"simple",operand:k,clauses:z,else:B.value}},Vq=function(k){return{type:"case-expression",format:"searched",clauses:k,else:null}},Gq=function(k,z){return{type:"case-expression",format:"searched",clauses:k,else:z.value}},gT=function(k,z){return{type:"when-clause",operand:k,value:z}},Uq=function(k){return{type:"else-clause",value:k}},qq=function(k){return{type:"number",value:k}},Bq=function(k,z,B){return parseFloat(k+z+B)},Hq=function(k,z){return parseFloat(k+z)},Wq=function(k,z){return parseFloat(k+z)},Jq=function(k){return parseFloat(k)},Kq=function(k,z){return k[0]+z},Yq=function(k){return"."+(k!=null?k:"")},Zq=function(k,z){return k+z},Xq=function(k){return k.join("")},Qq=function(k,z){return"e"+(z===null?"":z)},eB=function(){return"IN"},tB=function(){return"IS"},iB=function(){return"LIKE"},rB=function(){return"ESCAPE"},nB=function(){return"NOT"},sB=function(){return"AND"},oB=function(){return"OR"},aB=function(){return"BETWEEN"},lB=function(){return"FROM"},uB=function(){return"FOR"},hB=function(){return"SUBSTRING"},cB=function(){return"EXTRACT"},pB=function(){return"TRIM"},dB=function(){return"POSITION"},fB=function(){return"TIMESTAMP"},yB=function(){return"DATE"},mB=function(){return"LEADING"},gB=function(){return"TRAILING"},vB=function(){return"BOTH"},bB=function(){return"TO"},wB=function(){return"INTERVAL"},_B=function(){return"YEAR"},xB=function(){return"MONTH"},SB=function(){return"DAY"},MB=function(){return"HOUR"},EB=function(){return"MINUTE"},TB=function(){return"SECOND"},$B=function(){return"CASE"},IB=function(){return"END"},AB=function(){return"WHEN"},kB=function(){return"THEN"},CB=function(){return"ELSE"},OB=function(k){return k.join("")},j=0,Zm=[{line:1,column:1}],na=0,H3=[],me=0;if("startRule"in h){if(!(h.startRule in S))throw new Error(`Can't start parsing from rule "`+h.startRule+'".');E=S[h.startRule]}function it(k,z){return{type:"literal",text:k,ignoreCase:z}}function tl(k,z,B){return{type:"class",parts:k,inverted:z,ignoreCase:B}}function PB(){return{type:"end"}}function vT(k){var z,B=Zm[k];if(B)return B;for(z=k-1;!Zm[z];)z--;for(B={line:(B=Zm[z]).line,column:B.column};z<k;)s.charCodeAt(z)===10?(B.line++,B.column=1):B.column++,z++;return Zm[k]=B,B}function bT(k,z){var B=vT(k),Q=vT(z);return{source:w,start:{offset:k,line:B.line,column:B.column},end:{offset:z,line:Q.line,column:Q.column}}}function Be(k){j<na||(j>na&&(na=j,H3=[]),H3.push(k))}function NB(k,z,B){return new t(t.buildMessage(k,z),k,z,B)}function wT(){var k,z;return k=j,_e(),(z=Ki())!==f?(_e(),k=JU(z)):(j=k,k=f),k}function _T(){var k,z,B,Q,He,Rt,ci,Ti;if(k=j,(z=Ki())!==f){for(B=[],Q=j,He=_e(),(Rt=ag())!==f?(ci=_e(),(Ti=Ki())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);Q!==f;)B.push(Q),Q=j,He=_e(),(Rt=ag())!==f?(ci=_e(),(Ti=Ki())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);k=KU(z,B)}else j=k,k=f;return k}function Ki(){var k,z,B,Q,He,Rt,ci,Ti;if(k=j,(z=W3())!==f){for(B=[],Q=j,He=_e(),(Rt=LT())!==f?(ci=_e(),(Ti=W3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);Q!==f;)B.push(Q),Q=j,He=_e(),(Rt=LT())!==f?(ci=_e(),(Ti=W3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);k=B3(z,B)}else j=k,k=f;return k}function W3(){var k,z,B,Q,He,Rt,ci,Ti;if(k=j,(z=Xm())!==f){for(B=[],Q=j,He=_e(),(Rt=ng())!==f?(ci=_e(),(Ti=Xm())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);Q!==f;)B.push(Q),Q=j,He=_e(),(Rt=ng())!==f?(ci=_e(),(Ti=Xm())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);k=B3(z,B)}else j=k,k=f;return k}function Xm(){var k,z,B,Q,He;return k=j,(z=qf())===f&&(z=j,s.charCodeAt(j)===33?(B=A,j++):(B=f,me===0&&Be(_)),B!==f?(Q=j,me++,s.charCodeAt(j)===61?(He=P,j++):(He=f,me===0&&Be(M)),me--,He===f?Q=void 0:(j=Q,Q=f),Q!==f?z=B=[B,Q]:(j=z,z=f)):(j=z,z=f)),z!==f?(B=_e(),(Q=Xm())!==f?k=YU(Q):(j=k,k=f)):(j=k,k=f),k===f&&(k=RB()),k}function RB(){var k,z,B;return k=j,(z=il())!==f?(_e(),(B=LB())===f&&(B=null),k=ZU(z,B)):(j=k,k=f),k}function LB(){var k;return(k=FB())===f&&(k=VB())===f&&(k=DB())===f&&(k=jB())===f&&(k=zB()),k}function FB(){var k,z,B,Q,He,Rt;if(k=[],z=j,B=_e(),(Q=xT())!==f?(He=_e(),(Rt=il())!==f?z=B=[B,Q,He,Rt]:(j=z,z=f)):(j=z,z=f),z!==f)for(;z!==f;)k.push(z),z=j,B=_e(),(Q=xT())!==f?(He=_e(),(Rt=il())!==f?z=B=[B,Q,He,Rt]:(j=z,z=f)):(j=z,z=f);else k=f;return k!==f&&(k=XU(k)),k}function xT(){var k;return s.substr(j,2)===N?(k=N,j+=2):(k=f,me===0&&Be(T)),k===f&&(s.charCodeAt(j)===62?(k=F,j++):(k=f,me===0&&Be(I)),k===f&&(s.substr(j,2)===V?(k=V,j+=2):(k=f,me===0&&Be(O)),k===f&&(s.substr(j,2)===U?(k=U,j+=2):(k=f,me===0&&Be(R)),k===f&&(s.charCodeAt(j)===60?(k=X,j++):(k=f,me===0&&Be(L)),k===f&&(s.charCodeAt(j)===61?(k=P,j++):(k=f,me===0&&Be(M)),k===f&&(s.substr(j,2)===re?(k=re,j+=2):(k=f,me===0&&Be(G)))))))),k}function jB(){var k,z,B,Q;return k=j,(z=NT())!==f?(_e(),(B=qf())!==f?(_e(),(Q=il())!==f?k=QU(z,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=NT())!==f?(_e(),(B=il())!==f?k=eq(z,B):(j=k,k=f)):(j=k,k=f)),k}function DB(){var k,z,B,Q,He,Rt;return k=j,(z=qf())!==f?(_e(),(B=FT())!==f?(_e(),(Q=il())!==f?(_e(),(He=ng())!==f?(_e(),(Rt=il())!==f?k=tq(B,Q,Rt):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=FT())!==f?(_e(),(B=il())!==f?(_e(),(Q=ng())!==f?(_e(),(He=il())!==f?k=iq(z,B,He):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)),k}function ST(){var k,z,B,Q,He;return k=j,z=j,(B=qf())!==f?(Q=_e(),(He=RT())!==f?z=B=[B,Q,He]:(j=z,z=f)):(j=z,z=f),z!==f&&(z=hT(z)),(k=z)===f&&(k=RT()),k}function J3(){var k,z,B,Q,He;return k=j,z=j,(B=qf())!==f?(Q=_e(),(He=e_())!==f?z=B=[B,Q,He]:(j=z,z=f)):(j=z,z=f),z!==f&&(z=hT(z)),(k=z)===f&&(k=e_()),k}function zB(){var k,z,B,Q;return k=j,(z=ST())!==f?(_e(),(B=Kp())!==f?(_e(),yH()!==f?(_e(),(Q=Q3())!==f?k=rq(z,B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=ST())!==f?(_e(),(B=Kp())!==f?k=nq(z,B):(j=k,k=f)):(j=k,k=f)),k}function VB(){var k,z,B,Q;return k=j,(z=J3())!==f?(_e(),(B=on())!==f?(_e(),(Q=_T())!==f?(_e(),an()!==f?k=sq(z,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=J3())!==f?(_e(),(B=on())!==f?(_e(),(Q=an())!==f?k=oq(z):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=J3())!==f?(_e(),(B=X3())!==f?k=aq(z,B):(j=k,k=f)):(j=k,k=f))),k}function il(){var k,z,B,Q,He,Rt,ci,Ti;if(k=j,(z=K3())!==f){for(B=[],Q=j,He=_e(),(Rt=MT())!==f?(ci=_e(),(Ti=K3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);Q!==f;)B.push(Q),Q=j,He=_e(),(Rt=MT())!==f?(ci=_e(),(Ti=K3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);k=B3(z,B)}else j=k,k=f;return k}function MT(){var k;return s.charCodeAt(j)===43?(k=he,j++):(k=f,me===0&&Be(q)),k===f&&(s.charCodeAt(j)===45?(k=pe,j++):(k=f,me===0&&Be(D))),k}function K3(){var k,z,B,Q,He,Rt,ci,Ti;if(k=j,(z=Y3())!==f){for(B=[],Q=j,He=_e(),(Rt=ET())!==f?(ci=_e(),(Ti=Y3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);Q!==f;)B.push(Q),Q=j,He=_e(),(Rt=ET())!==f?(ci=_e(),(Ti=Y3())!==f?Q=He=[He,Rt,ci,Ti]:(j=Q,Q=f)):(j=Q,Q=f);k=lq(z,B)}else j=k,k=f;return k}function ET(){var k;return s.charCodeAt(j)===42?(k=ae,j++):(k=f,me===0&&Be(H)),k===f&&(s.charCodeAt(j)===47?(k=le,j++):(k=f,me===0&&Be(ee))),k}function Y3(){var k,z;return(k=ZB())===f&&(k=BB())===f&&(k=HB())===f&&(k=WB())===f&&(k=JB())===f&&(k=KB())===f&&(k=oH())===f&&(k=GB())===f&&(k=X3())===f&&(k=j,on()!==f?(_e(),(z=Ki())!==f?(_e(),an()!==f?k=uq(z):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)),k}function GB(){var k;return(k=UB())!==f&&(k=hq(k)),k}function UB(){var k;return(k=qB())!==f&&(k=cT(k)),k}function qB(){var k,z,B,Q;if(k=j,(z=Z3())!==f){for(B=[],Q=$T();Q!==f;)B.push(Q),Q=$T();k=pT(z,B)}else j=k,k=f;return k}function TT(){var k,z,B,Q;if(k=j,(z=Z3())!==f){for(B=[],Q=Pt();Q!==f;)B.push(Q),Q=Pt();k=pT(z,B)}else j=k,k=f;return k}function Z3(){var k;return u.test(s.charAt(j))?(k=s.charAt(j),j++):(k=f,me===0&&Be(te)),k}function Pt(){var k;return a.test(s.charAt(j))?(k=s.charAt(j),j++):(k=f,me===0&&Be(Z)),k}function $T(){var k;return n.test(s.charAt(j))?(k=s.charAt(j),j++):(k=f,me===0&&Be(ce)),k}function X3(){var k,z,B;return k=j,s.charCodeAt(j)===64?(z=Te,j++):(z=f,me===0&&Be(ye)),z!==f&&(B=TT())!==f?k=z=[z,B]:(j=k,k=f),k!==f&&(k=cq(k)),k}function BB(){var k,z,B;return k=j,vH()!==f?(_e(),on()!==f?(_e(),(z=YB())!==f?(_e(),t_()!==f?(_e(),(B=Ki())!==f?(_e(),an()!==f?k=pq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function HB(){var k,z,B,Q,He,Rt,ci;return k=j,gH()!==f?(_e(),on()!==f?(_e(),(z=Ki())!==f?(_e(),t_()!==f?(_e(),(B=Ki())!==f?(_e(),Q=j,(He=mH())!==f?(Rt=_e(),(ci=Ki())!==f?Q=He=[He,Rt,ci,_e()]:(j=Q,Q=f)):(j=Q,Q=f),Q===f&&(Q=null),(He=an())!==f?k=dq(z,B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function WB(){var k,z,B,Q;return k=j,jT()!==f?(_e(),on()!==f?(_e(),(z=IT())===f&&(z=null),_e(),(B=Ki())!==f?(_e(),t_()!==f?(_e(),(Q=Ki())!==f?(_e(),an()!==f?k=fq(z,B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,jT()!==f?(_e(),on()!==f?(_e(),(z=IT())===f&&(z=null),_e(),(B=Ki())!==f?(_e(),an()!==f?k=yq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)),k}function IT(){var k;return(k=xH())===f&&(k=SH())===f&&(k=MH()),k}function JB(){var k,z,B;return k=j,bH()!==f?(_e(),on()!==f?(_e(),(z=Ki())!==f?(_e(),e_()!==f?(_e(),(B=Ki())!==f?(_e(),an()!==f?k=mq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function KB(){var k,z,B;return k=j,(z=$H())!==f?(_e(),on()!==f?(_e(),(B=_T())===f&&(B=null),_e(),an()!==f?k=gq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function YB(){var k;return(k=zT())===f&&(k=VT())===f&&(k=GT())===f&&(k=UT())===f&&(k=qT())===f&&(k=Hh()),k}function ZB(){var k;return(k=Q3())===f&&(k=uH())===f&&(k=sH())===f&&(k=nH())===f&&(k=rH())===f&&(k=XB())===f&&(k=QB()),k}function XB(){var k,z;return k=j,wH()!==f?(_e(),(z=Kp())!==f?k=vq(z):(j=k,k=f)):(j=k,k=f),k}function QB(){var k,z,B,Q;return k=j,DT()!==f?(_e(),s.charCodeAt(j)===45?(z=pe,j++):(z=f,me===0&&Be(D)),z===f&&(s.charCodeAt(j)===43?(z=he,j++):(z=f,me===0&&Be(q))),z!==f?(_e(),(B=Kp())!==f?(_e(),(Q=AT())!==f?k=bq(z,B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,DT()!==f?(_e(),(z=Kp())!==f?(_e(),(B=AT())!==f?k=wq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)),k}function AT(){var k,z,B;return k=j,(z=eH())!==f?(_e(),EH()!==f?(_e(),(B=tH())!==f?k=_q(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=iH()),k}function eH(){var k,z,B;return k=j,(z=Uf())!==f?(_e(),on()!==f?(_e(),(B=eg())!==f?(_e(),an()!==f?k=xq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Uf())!==f&&(z=dT(z)),k=z),k}function tH(){var k,z,B,Q;return k=j,(z=Uf())!==f&&(z=Sq(z)),(k=z)===f&&(k=j,(z=Hh())!==f?(_e(),on()!==f?(_e(),(B=eg())!==f?(_e(),ag()!==f?(_e(),(Q=Qm())!==f?(_e(),an()!==f?k=fT(B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Hh())!==f?(_e(),on()!==f?(_e(),(B=eg())!==f?(_e(),an()!==f?k=Mq(B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Hh())!==f&&(z=Eq()),k=z))),k}function iH(){var k,z,B,Q;return k=j,(z=Uf())!==f?(_e(),on()!==f?(_e(),(B=Qm())!==f?(_e(),an()!==f?k=Tq(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Uf())!==f&&(z=dT(z)),(k=z)===f&&(k=j,(z=Hh())!==f?(_e(),on()!==f?(_e(),(B=eg())!==f?(_e(),ag()!==f?(_e(),(Q=Qm())!==f?(_e(),an()!==f?k=fT(B,Q):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Hh())!==f?(_e(),on()!==f?(_e(),(B=Qm())!==f?(_e(),an()!==f?k=$q(B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k===f&&(k=j,(z=Hh())!==f&&(z=Iq()),k=z)))),k}function Uf(){var k,z;return k=j,(z=GT())!==f&&(z=Aq()),(k=z)===f&&(k=j,(z=UT())!==f&&(z=kq()),(k=z)===f&&(k=j,(z=qT())!==f&&(z=Cq()),(k=z)===f&&(k=j,(z=VT())!==f&&(z=Oq()),(k=z)===f&&(k=j,(z=zT())!==f&&(z=Pq()),k=z)))),k}function Qm(){var k;return(k=Yp())!==f&&(k=yT(k)),k}function eg(){var k;return(k=Yp())!==f&&(k=yT(k)),k}function rH(){var k,z;return k=j,_H()!==f?(_e(),(z=Kp())!==f?k=Nq(z):(j=k,k=f)):(j=k,k=f),k}function nH(){var k;return(k=pH())!==f&&(k=Rq()),k}function sH(){var k,z;return k=j,(z=dH())!==f&&(z=Lq()),(k=z)===f&&(k=j,(z=fH())!==f&&(z=Fq()),k=z),k}function Kp(){var k;return(k=Q3())===f&&(k=X3()),k}function Q3(){var k,z,B,Q,He;if(k=j,s.charCodeAt(j)===39?(z=Ee,j++):(z=f,me===0&&Be(Me)),z===f&&(s.substr(j,2)===Oe?(z=Oe,j+=2):(z=f,me===0&&Be(xe))),z!==f){for(B=[],Q=j,s.substr(j,2)===Ae?(He=Ae,j+=2):(He=f,me===0&&Be(be)),He!==f&&(He=mT()),(Q=He)===f&&(o.test(s.charAt(j))?(Q=s.charAt(j),j++):(Q=f,me===0&&Be(Ce)));Q!==f;)B.push(Q),Q=j,s.substr(j,2)===Ae?(He=Ae,j+=2):(He=f,me===0&&Be(be)),He!==f&&(He=mT()),(Q=He)===f&&(o.test(s.charAt(j))?(Q=s.charAt(j),j++):(Q=f,me===0&&Be(Ce)));s.charCodeAt(j)===39?(Q=Ee,j++):(Q=f,me===0&&Be(Me)),Q!==f?k=jq(B):(j=k,k=f)}else j=k,k=f;return k}function oH(){var k;return(k=aH())===f&&(k=lH()),k}function aH(){var k,z,B,Q,He;if(k=j,sg()!==f)if(_e(),(z=Ki())!==f){for(_e(),B=[],Q=ig();Q!==f;)B.push(Q),Q=ig();Q=_e(),(He=og())!==f?k=Dq(z,B):(j=k,k=f)}else j=k,k=f;else j=k,k=f;if(k===f)if(k=j,sg()!==f)if(_e(),(z=Ki())!==f){for(_e(),B=[],Q=ig();Q!==f;)B.push(Q),Q=ig();Q=_e(),(He=kT())!==f?(_e(),og()!==f?k=zq(z,B,He):(j=k,k=f)):(j=k,k=f)}else j=k,k=f;else j=k,k=f;return k}function lH(){var k,z,B,Q;if(k=j,sg()!==f){for(_e(),z=[],B=tg();B!==f;)z.push(B),B=tg();B=_e(),(Q=og())!==f?k=Vq(z):(j=k,k=f)}else j=k,k=f;if(k===f)if(k=j,sg()!==f){for(_e(),z=[],B=tg();B!==f;)z.push(B),B=tg();B=_e(),(Q=kT())!==f?(_e(),og()!==f?k=Gq(z,Q):(j=k,k=f)):(j=k,k=f)}else j=k,k=f;return k}function tg(){var k,z,B;return k=j,BT()!==f?(_e(),(z=Ki())!==f?(_e(),HT()!==f?(_e(),(B=Ki())!==f?k=gT(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function ig(){var k,z,B;return k=j,BT()!==f?(_e(),(z=Ki())!==f?(_e(),HT()!==f?(_e(),(B=Ki())!==f?k=gT(z,B):(j=k,k=f)):(j=k,k=f)):(j=k,k=f)):(j=k,k=f),k}function kT(){var k,z;return k=j,TH()!==f?(_e(),(z=Ki())!==f?k=Uq(z):(j=k,k=f)):(j=k,k=f),k}function uH(){var k,z,B,Q;return k=j,(z=hH())!==f?(B=j,me++,Q=Z3(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=qq(z):(j=k,k=f)):(j=k,k=f),k}function hH(){var k,z,B,Q;return k=j,(z=rg())!==f&&(B=CT())!==f&&(Q=OT())!==f?k=Bq(z,B,Q):(j=k,k=f),k===f&&(k=j,(z=rg())!==f&&(B=CT())!==f?k=Hq(z,B):(j=k,k=f),k===f&&(k=j,(z=rg())!==f&&(B=OT())!==f?k=Wq(z,B):(j=k,k=f),k===f&&(k=j,(z=rg())!==f&&(z=Jq(z)),k=z))),k}function rg(){var k,z,B;return(k=Yp())===f&&(k=j,s.charCodeAt(j)===45?(z=pe,j++):(z=f,me===0&&Be(D)),z===f&&(s.charCodeAt(j)===43?(z=he,j++):(z=f,me===0&&Be(q))),z!==f&&(B=Yp())!==f?k=Kq(z,B):(j=k,k=f)),k}function CT(){var k,z,B;return k=j,s.charCodeAt(j)===46?(z=Fe,j++):(z=f,me===0&&Be(Ze)),z!==f?((B=Yp())===f&&(B=null),k=Yq(B)):(j=k,k=f),k}function OT(){var k,z,B;return k=j,(z=cH())!==f&&(B=Yp())!==f?k=Zq(z,B):(j=k,k=f),k}function Yp(){var k,z;if(k=[],(z=PT())!==f)for(;z!==f;)k.push(z),z=PT();else k=f;return k!==f&&(k=Xq(k)),k}function PT(){var k;return l.test(s.charAt(j))?(k=s.charAt(j),j++):(k=f,me===0&&Be(Qe)),k}function cH(){var k,z,B;return k=j,p.test(s.charAt(j))?(z=s.charAt(j),j++):(z=f,me===0&&Be(_t)),z!==f?(d.test(s.charAt(j))?(B=s.charAt(j),j++):(B=f,me===0&&Be(xt)),B===f&&(B=null),k=Qq(z,B)):(j=k,k=f),k}function pH(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===ze?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(Ei)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=z=[z,B]:(j=k,k=f)):(j=k,k=f),k}function dH(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===Ge?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(Bt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=z=[z,B]:(j=k,k=f)):(j=k,k=f),k}function fH(){var k,z,B,Q;return k=j,s.substr(j,5).toLowerCase()===ke?(z=s.substr(j,5),j+=5):(z=f,me===0&&Be(Ue)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=z=[z,B]:(j=k,k=f)):(j=k,k=f),k}function e_(){var k,z,B,Q;return k=j,s.substr(j,2).toLowerCase()===ht?(z=s.substr(j,2),j+=2):(z=f,me===0&&Be(Nt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=eB():(j=k,k=f)):(j=k,k=f),k}function NT(){var k,z,B,Q;return k=j,s.substr(j,2).toLowerCase()===Kt?(z=s.substr(j,2),j+=2):(z=f,me===0&&Be(dt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=tB():(j=k,k=f)):(j=k,k=f),k}function RT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===bt?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(hi)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=iB():(j=k,k=f)):(j=k,k=f),k}function yH(){var k,z,B,Q;return k=j,s.substr(j,6).toLowerCase()===Ct?(z=s.substr(j,6),j+=6):(z=f,me===0&&Be(Qt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=rB():(j=k,k=f)):(j=k,k=f),k}function qf(){var k,z,B,Q;return k=j,s.substr(j,3).toLowerCase()===yi?(z=s.substr(j,3),j+=3):(z=f,me===0&&Be(jr)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=nB():(j=k,k=f)):(j=k,k=f),k}function ng(){var k,z,B,Q;return k=j,s.substr(j,3).toLowerCase()===Es?(z=s.substr(j,3),j+=3):(z=f,me===0&&Be(wt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=sB():(j=k,k=f)):(j=k,k=f),k}function LT(){var k,z,B,Q;return k=j,s.substr(j,2).toLowerCase()===ra?(z=s.substr(j,2),j+=2):(z=f,me===0&&Be(Ji)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=oB():(j=k,k=f)):(j=k,k=f),k}function FT(){var k,z,B,Q;return k=j,s.substr(j,7).toLowerCase()===au?(z=s.substr(j,7),j+=7):(z=f,me===0&&Be(at)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=aB():(j=k,k=f)):(j=k,k=f),k}function t_(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===lu?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(hu)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=lB():(j=k,k=f)):(j=k,k=f),k}function mH(){var k,z,B,Q;return k=j,s.substr(j,3).toLowerCase()===Gh?(z=s.substr(j,3),j+=3):(z=f,me===0&&Be(el)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=uB():(j=k,k=f)):(j=k,k=f),k}function gH(){var k,z,B,Q;return k=j,s.substr(j,9).toLowerCase()===Uh?(z=s.substr(j,9),j+=9):(z=f,me===0&&Be(cu)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=hB():(j=k,k=f)):(j=k,k=f),k}function vH(){var k,z,B,Q;return k=j,s.substr(j,7).toLowerCase()===Ff?(z=s.substr(j,7),j+=7):(z=f,me===0&&Be(Bh)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=cB():(j=k,k=f)):(j=k,k=f),k}function jT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===qp?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(z3)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=pB():(j=k,k=f)):(j=k,k=f),k}function bH(){var k,z,B,Q;return k=j,s.substr(j,8).toLowerCase()===jf?(z=s.substr(j,8),j+=8):(z=f,me===0&&Be(V3)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=dB():(j=k,k=f)):(j=k,k=f),k}function wH(){var k,z,B,Q;return k=j,s.substr(j,9).toLowerCase()===Df?(z=s.substr(j,9),j+=9):(z=f,me===0&&Be(G3)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=fB():(j=k,k=f)):(j=k,k=f),k}function _H(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===zf?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(Tn)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=yB():(j=k,k=f)):(j=k,k=f),k}function xH(){var k,z,B,Q;return k=j,s.substr(j,7).toLowerCase()===Vf?(z=s.substr(j,7),j+=7):(z=f,me===0&&Be(U3)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=mB():(j=k,k=f)):(j=k,k=f),k}function SH(){var k,z,B,Q;return k=j,s.substr(j,8).toLowerCase()===Gf?(z=s.substr(j,8),j+=8):(z=f,me===0&&Be(q3)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=gB():(j=k,k=f)):(j=k,k=f),k}function MH(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===Bp?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(ie)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=vB():(j=k,k=f)):(j=k,k=f),k}function EH(){var k,z,B,Q;return k=j,s.substr(j,2).toLowerCase()===zi?(z=s.substr(j,2),j+=2):(z=f,me===0&&Be(Se)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=bB():(j=k,k=f)):(j=k,k=f),k}function DT(){var k,z,B,Q;return k=j,s.substr(j,8).toLowerCase()===W?(z=s.substr(j,8),j+=8):(z=f,me===0&&Be(Ie)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=wB():(j=k,k=f)):(j=k,k=f),k}function zT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===Tr?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(gt)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=_B():(j=k,k=f)):(j=k,k=f),k}function VT(){var k,z,B,Q;return k=j,s.substr(j,5).toLowerCase()===Hp?(z=s.substr(j,5),j+=5):(z=f,me===0&&Be(cr)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=xB():(j=k,k=f)):(j=k,k=f),k}function GT(){var k,z,B,Q;return k=j,s.substr(j,3).toLowerCase()===Ot?(z=s.substr(j,3),j+=3):(z=f,me===0&&Be(_i)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=SB():(j=k,k=f)):(j=k,k=f),k}function UT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===wi?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be($n)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=MB():(j=k,k=f)):(j=k,k=f),k}function qT(){var k,z,B,Q;return k=j,s.substr(j,6).toLowerCase()===Xn?(z=s.substr(j,6),j+=6):(z=f,me===0&&Be(Jp)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=EB():(j=k,k=f)):(j=k,k=f),k}function Hh(){var k,z,B,Q;return k=j,s.substr(j,6).toLowerCase()===Ts?(z=s.substr(j,6),j+=6):(z=f,me===0&&Be(jU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=TB():(j=k,k=f)):(j=k,k=f),k}function sg(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===$s?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(DU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=$B():(j=k,k=f)):(j=k,k=f),k}function og(){var k,z,B,Q;return k=j,s.substr(j,3).toLowerCase()===oo?(z=s.substr(j,3),j+=3):(z=f,me===0&&Be(zU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=IB():(j=k,k=f)):(j=k,k=f),k}function BT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===Wp?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(VU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=AB():(j=k,k=f)):(j=k,k=f),k}function HT(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===qh?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(GU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=kB():(j=k,k=f)):(j=k,k=f),k}function TH(){var k,z,B,Q;return k=j,s.substr(j,4).toLowerCase()===uu?(z=s.substr(j,4),j+=4):(z=f,me===0&&Be(UU)),z!==f?(B=j,me++,Q=Pt(),me--,Q===f?B=void 0:(j=B,B=f),B!==f?k=CB():(j=k,k=f)):(j=k,k=f),k}function ag(){var k;return s.charCodeAt(j)===44?(k=Pe,j++):(k=f,me===0&&Be(qU)),k}function on(){var k;return s.charCodeAt(j)===40?(k=c,j++):(k=f,me===0&&Be(BU)),k}function an(){var k;return s.charCodeAt(j)===41?(k=C,j++):(k=f,me===0&&Be(HU)),k}function _e(){var k,z;for(k=[],z=WT();z!==f;)k.push(z),z=WT();return k}function WT(){var k;return m.test(s.charAt(j))?(k=s.charAt(j),j++):(k=f,me===0&&Be(WU)),k}function $H(){var k,z,B,Q;if(k=j,(z=TT())!==f&&(z=cT(z)),(k=z)===f)if(k=j,s.charCodeAt(j)===96?(z=b,j++):(z=f,me===0&&Be(lT)),z!==f){if(B=[],v.test(s.charAt(j))?(Q=s.charAt(j),j++):(Q=f,me===0&&Be(uT)),Q!==f)for(;Q!==f;)B.push(Q),v.test(s.charAt(j))?(Q=s.charAt(j),j++):(Q=f,me===0&&Be(uT));else B=f;B!==f?(s.charCodeAt(j)===96?(Q=b,j++):(Q=f,me===0&&Be(lT)),Q!==f?k=OB(B):(j=k,k=f)):(j=k,k=f)}else j=k,k=f;return k}function IH(k,z){return{type:"unary-expression",operator:k,expr:z}}function JT(k,z,B,Q){var He={type:"binary-expression",operator:k,left:z,right:B};return Q!==void 0&&(He.escape=Q),He}function AH(k,z){for(var B=[k],Q=0;Q<z.length;Q++)B.push(z[Q][3]);return B}function kH(k,z,B){return AH(k,z)}function i_(k,z){for(var B=k,Q=0;Q<z.length;Q++)B=JT(z[Q][1],B,z[Q][3]);return B}if((y=E())!==f&&j===s.length)return y;throw y!==f&&j<s.length&&Be(PB()),NB(H3,na<s.length?s.charAt(na):null,na<s.length?bT(na,na+1):bT(na,na))}return e(t,Error),t.prototype.format=function(s){var h="Error: "+this.message;if(this.location){var y,f=null;for(y=0;y<s.length;y++)if(s[y].source===this.location.source){f=s[y].text.split(/\r\n|\n|\r/g);break}var w=this.location.start,S=this.location.source+":"+w.line+":"+w.column;if(f){var E=this.location.end,A=i("",w.line.toString().length),P=f[w.line-1],N=w.line===E.line?E.column:P.length+1;h+=`
 --> `+S+`
`+A+` |
`+w.line+" | "+P+`
`+A+" | "+i("",w.column-1)+i("",N-w.column,"^")}else h+=`
 at `+S}return h},t.buildMessage=function(s,h){var y={literal:function(N){return'"'+w(N.text)+'"'},class:function(N){var F=N.parts.map(function(V){return Array.isArray(V)?S(V[0])+"-"+S(V[1]):S(V)});return"["+(N.inverted?"^":"")+F+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function f(N){return N.charCodeAt(0).toString(16).toUpperCase()}function w(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+f(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+f(F)})}function S(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+f(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+f(F)})}function E(N){return y[N.type](N)}function A(N){var F,V,U=N.map(E);if(U.sort(),U.length>0){for(F=1,V=1;F<U.length;F++)U[F-1]!==U[F]&&(U[V]=U[F],V++);U.length=V}switch(U.length){case 1:return U[0];case 2:return U[0]+" or "+U[1];default:return U.slice(0,-1).join(", ")+", or "+U[U.length-1]}}function P(N){return N?'"'+w(N)+'"':"end of input"}return"Expected "+A(s)+" but "+P(h)+" found."},{SyntaxError:t,parse:r}},(DC=WG).exports&&(DC.exports=zC());class Xwe{static parse(t){return WG.exports.parse(t)}}const JG=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Qwe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,e2e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,t2e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,i2e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,r2e=new Set(["current_timestamp","current_date","current_time"]);function tc(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function g1(e,t,i="0",r="0",s="0",h="0",y="",f="0",w="0"){if(y==="+"||y==="-"){const S=`${tc(parseInt(e,10),4)}-${tc(parseInt(t,10),2)}-${tc(parseInt(i,10),2)}`;let E="";parseFloat(h)<10&&(E="0");const A=`${tc(parseInt(r,10),2)}:${tc(parseInt(s,10),2)}:${E+parseFloat(h).toString()}`,P=`${y}${tc(parseInt(f,10),2)}:${tc(parseInt(w,10),2)}`;return new Date(S+"T"+A+P)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(i,10),parseInt(r,10),parseInt(s,10),parseFloat(h))}class n2e{static makeBool(t){return KG(t)}static featureValue(t,i,r,s){return eU(t,i,r,s)}static equalsNull(t){return t===null}static applyLike(t,i,r){return L6(t,i,r)}static ensureArray(t){return N6(t)}static applyIn(t,i){return R6(t,i)}static currentDate(){const t=new Date;return t.setHours(0,0,0,0),t}static makeSqlInterval(t,i,r){return vn.createFromValueAndQualifer(t,i,r)}static convertInterval(t){return t instanceof vn?t.valueInMilliseconds():t}static currentTimestamp(){return new Date}static compare(t,i,r){return XG(t,i,r)}static calculate(t,i,r){return QG(t,i,r)}static makeComparable(t){return Fl(t)}static evaluateFunction(t,i){return BG(t,i)}static lookup(t,i){const r=i[t];return r===void 0?null:r}static between(t,i){return t==null||i[0]==null||i[1]==null?null:t>=i[0]&&t<=i[1]}static notbetween(t,i){return t==null||i[0]==null||i[1]==null?null:t<i[0]||t>i[1]}static ternaryNot(t){return Hb(t)}static ternaryAnd(t,i){return YG(t,i)}static ternaryOr(t,i){return ZG(t,i)}}class O3{constructor(t,i){this.fieldsIndex=i,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Xwe.parse(t);const{isStandardized:r,isAggregate:s,referencedFieldNames:h}=this._extractExpressionInfo(i);this.referencedFieldNames=h,this.isStandardized=r,this.isAggregate=s}static create(t,i){return new O3(t,i)}get fieldNames(){return this.referencedFieldNames}testSet(t,i=Dc){const r={};for(const s of this.fieldNames)r[s]=t.map(h=>i.getAttribute(h,s));return!!this._evaluateNode(this.parseTree,{attributes:r},Dc)}calculateValue(t,i=Dc){const r=this._evaluateNode(this.parseTree,t,i);return r instanceof vn?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(t,i=Dc){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(t,this.parameters,i,this.datefields):we("esri-csp-restrictions")?this.calculateValue(t,i):(this._compileMe(),this.parseTree._compiledVersion(t,this.parameters,i,this.datefields))}testFeature(t,i=Dc){return!!this._evaluateNode(this.parseTree,t,i)}testFeatureCompiled(t,i=Dc){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(t,this.parameters,i,this.datefields):we("esri-csp-restrictions")?this.testFeature(t,i):(this._compileMe(),!!this.parseTree._compiledVersion(t,this.parameters,i,this.datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,t=>{t.type==="current-time"?this._hasDateFunctions=!0:t.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||r2e.has(t.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="function"&&t.add(i.name.toLowerCase())}),Array.from(t)}getExpressions(){const t=new Map;return this._visitAll(this.parseTree,i=>{if(i.type==="function"){const r=i.name.toLowerCase(),s=i.args.value[0];if(s.type==="column-reference"){const h=s.column,y=`${r}-${h}`;t.has(y)||t.set(y,{aggregateType:r,field:h})}}}),[...t.values()]}getVariables(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="parameter"&&t.add(i.value.toLowerCase())}),Array.from(t)}_compileMe(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",t).bind(n2e)}_extractExpressionInfo(t){const i=[],r=new Set;let s=!0,h=!0;return this._visitAll(this.parseTree,y=>{switch(y.type){case"column-reference":{const f=t.get(y.column);let w,S;f?w=S=f.name:(S=y.column,w=S.toLowerCase()),!f||f.type!=="date"&&f.type!=="esriFieldTypeDate"||(this.datefields[f.name]=1),r.has(w)||(r.add(w),i.push(S)),y.column=S;break}case"function":{const{name:f,args:w}=y,S=w.value.length;s&&(s=Zwe(f,S)),h&&(h=Kwe(f,S));break}}}),{referencedFieldNames:Array.from(i),isStandardized:s,isAggregate:h}}_visitAll(t,i){if(t!=null)switch(i(t),t.type){case"when-clause":this._visitAll(t.operand,i),this._visitAll(t.value,i);break;case"case-expression":for(const r of t.clauses)this._visitAll(r,i);t.format==="simple"&&this._visitAll(t.operand,i),t.else!==null&&this._visitAll(t.else,i);break;case"expression-list":for(const r of t.value)this._visitAll(r,i);break;case"unary-expression":this._visitAll(t.expr,i);break;case"binary-expression":this._visitAll(t.left,i),this._visitAll(t.right,i);break;case"function":this._visitAll(t.args,i)}}evaluateNodeToJavaScript(t){switch(t.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case"case-expression":{let i="";if(t.format==="simple"){const r="this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";i="( ";for(let s=0;s<t.clauses.length;s++)i+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[s].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[s].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}else{i="( ";for(let r=0;r<t.clauses.length;r++)i+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(t.clauses[r].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}return i}case"parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case"expression-list":{let i="[";for(const r of t.value)i!=="["&&(i+=","),i+=this.evaluateNodeToJavaScript(r);return i+="]",i}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case"binary-expression":switch(t.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw new Error("Not Supported Operator "+t.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(t.value);case"date":return"(new Date("+GC(t.value).getTime().toString()+"))";case"timestamp":return"(new Date("+VC(t.value).getTime().toString()+"))";case"current-time":return t.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(t.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw new Error("Unsupported sql syntax "+t.type)}_evaluateNode(t,i,r){switch(t.type){case"interval":{const s=this._evaluateNode(t.value,i,r);return vn.createFromValueAndQualifer(s,t.qualifier,t.op)}case"case-expression":if(t.format==="simple"){const s=Fl(this._evaluateNode(t.operand,i,r));for(let h=0;h<t.clauses.length;h++)if(s===Fl(this._evaluateNode(t.clauses[h].operand,i,r)))return this._evaluateNode(t.clauses[h].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}else{for(let s=0;s<t.clauses.length;s++)if(KG(this._evaluateNode(t.clauses[s].operand,i,r)))return this._evaluateNode(t.clauses[s].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}return null;case"parameter":return this.parameters[t.value.toLowerCase()];case"expression-list":{const s=[];for(const h of t.value)s.push(this._evaluateNode(h,i,r));return s}case"unary-expression":return Hb(this._evaluateNode(t.expr,i,r));case"binary-expression":switch(t.operator){case"AND":return YG(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"OR":return ZG(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)===null;case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)!==null;case"IN":{const s=N6(this._evaluateNode(t.right,i,r));return R6(this._evaluateNode(t.left,i,r),s)}case"NOT IN":{const s=N6(this._evaluateNode(t.right,i,r));return Hb(R6(this._evaluateNode(t.left,i,r),s))}case"BETWEEN":{const s=this._evaluateNode(t.left,i,r),h=this._evaluateNode(t.right,i,r);return s==null||h[0]==null||h[1]==null?null:s>=Fl(h[0])&&s<=Fl(h[1])}case"NOTBETWEEN":{const s=this._evaluateNode(t.left,i,r),h=this._evaluateNode(t.right,i,r);return s==null||h[0]==null||h[1]==null?null:s<Fl(h[0])||s>Fl(h[1])}case"LIKE":return L6(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape);case"NOT LIKE":return Hb(L6(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return XG(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"-":case"+":case"*":case"/":return QG(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r))}case"null":case"boolean":case"string":case"number":return t.value;case"date":return GC(t.value);case"timestamp":return VC(t.value);case"current-time":{const s=new Date;return t.mode==="date"&&s.setHours(0,0,0,0),s}case"column-reference":return eU(i,t.column,this.datefields,r);case"function":{const s=this._evaluateNode(t.args,i,r);return this.isAggregate?Jwe(t.name,s):BG(t.name,s)}}throw new Error("Unsupported sql syntax "+t.type)}}function VC(e){let t=Qwe.exec(e);if(t!==null){const[,i,r,s,h,y,f]=t;return g1(i,r,s,h,y,f)}if(t=e2e.exec(e),t!==null){const[,i,r,s,h,y,f,w,S,E]=t;return g1(i,r,s,h,y,f,w,S,E)}if(t=t2e.exec(e),t!==null){const[,i,r,s,h,y,f,w,S]=t;return g1(i,r,s,h,y,"0",f,w,S)}if(t=i2e.exec(e),t!==null){const[,i,r,s,h,y]=t;return g1(i,r,s,h,y)}if(t=JG.exec(e),t!==null){const[,i,r,s]=t;return g1(i,r,s)}throw new Error("SQL Invalid Timestamp")}function GC(e){const t=JG.exec(e);if(t===null)throw new Error("SQL Invalid Date");const[,i,r,s]=t;return new Date(parseInt(i,10),parseInt(r,10)-1,parseInt(s,10))}function KG(e){return e===!0}function N6(e){return Array.isArray(e)?e:[e]}function Hb(e){return e!==null?e!==!0:null}function YG(e,t){return e!=null&&t!=null?e===!0&&t===!0:e!==!1&&t!==!1&&null}function ZG(e,t){return e!=null&&t!=null?e===!0||t===!0:e===!0||t===!0||null}function R6(e,t){if(e==null)return null;let i=!1;for(const r of t)if(r==null)i=null;else if(e===r){i=!0;break}return i}const UC="-[]/{}()*+?.\\^$|";var Yc;function s2e(e,t){const i=t;let r="",s=Yc.Normal;for(let h=0;h<e.length;h++){const y=e.charAt(h);switch(s){case Yc.Normal:y===i?s=Yc.Escaped:UC.includes(y)?r+="\\"+y:r+=y==="%"?".*":y==="_"?".":y;break;case Yc.Escaped:UC.includes(y)?r+="\\"+y:r+=y,s=Yc.Normal}}return new RegExp("^"+r+"$","m")}function L6(e,t,i){return e==null?null:s2e(t,i).test(e)}function Fl(e){return e instanceof Date?e.valueOf():e}function XG(e,t,i){if(t==null||i==null)return null;const r=Fl(t),s=Fl(i);switch(e){case"<>":return r!==s;case"=":return r===s;case">":return r>s;case"<":return r<s;case">=":return r>=s;case"<=":return r<=s}}function QG(e,t,i){if(t instanceof vn)if(i instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+i.getTime());case"-":return t.valueInMilliseconds()-i.getTime();case"*":return t.valueInMilliseconds()*i.getTime();case"/":return t.valueInMilliseconds()/i.getTime()}else if(i instanceof vn)switch(e){case"+":return vn.createFromMilliseconds(t.valueInMilliseconds()+i.valueInMilliseconds());case"-":return vn.createFromMilliseconds(t.valueInMilliseconds()-i.valueInMilliseconds());case"*":return t.valueInMilliseconds()*i.valueInMilliseconds();case"/":return t.valueInMilliseconds()/i.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(i instanceof vn)if(t instanceof Date)switch(e){case"+":return new Date(i.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-i.valueInMilliseconds());case"*":return t.getTime()*i.valueInMilliseconds();case"/":return t.getTime()/i.valueInMilliseconds()}else i=i.valueInMilliseconds();else if(t instanceof Date&&typeof i=="number")switch(i=24*i*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}else if(i instanceof Date&&typeof t=="number")switch(t=24*t*60*60*1e3,i=i.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i}}function o2e(e){return e&&typeof e.attributes=="object"}function eU(e,t,i,r){const s=r.getAttribute(e,t);return s!=null&&i[t]===1?new Date(s):s}(function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"})(Yc||(Yc={}));const Dc={getAttribute:(e,t)=>(o2e(e)?e.attributes:e)[t]},tU=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:O3,defaultAttributeAdapter:Dc},Symbol.toStringTag,{value:"Module"}));class a2e{constructor(t,i){this._cache=new o6(t),this._invalidCache=new o6(i)}get(t,i){const r=`${i.uid}:${t}`,s=this._cache.get(r);if(s)return s;if(this._invalidCache.get(r)!==void 0)return null;try{const h=O3.create(t,i);return this._cache.put(r,h),h}catch{return this._invalidCache.put(r,null),null}}}const WE=new a2e(50,500),Ih="feature-store:unsupported-query",iU=" as ",l2e=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function B4e(e,t){if(!t)return!0;const i=WE.get(t,e);if(!i)throw new ne(Ih,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new ne(Ih,"where clause is not standard",{where:t});return JE(e,i.fieldNames,"where clause contains missing fields"),!0}function H4e(e,t,i){if(!t)return!0;const r=WE.get(t,e);if(!r)throw new ne(Ih,"invalid SQL expression",{having:t});if(!r.isAggregate)throw new ne(Ih,"having does not contain a valid aggregate function",{having:t});const s=r.fieldNames;if(JE(e,s,"having contains missing fields"),!r.getExpressions().every(h=>{const{aggregateType:y,field:f}=h,w=e.has(f)&&e.get(f).name;return i.some(S=>{const{onStatisticField:E,statisticType:A}=S;return(e.has(E)&&e.get(E).name)===w&&A.toLowerCase().trim()===y})}))throw new ne(Ih,"expressions in having should also exist in outStatistics",{having:t});return!0}function vy(e,t){return e?WE.get(e,t):null}function JE(e,t,i,r=!0){const s=[];for(const h of t)if(h!=="*"&&!e.has(h))if(r){const y=rU(h);try{const f=vy(y,e);if(!f)throw new ne(Ih,"invalid SQL expression",{where:y});if(!f.isStandardized)throw new ne(Ih,"expression is not standard",{clause:f});JE(e,f.fieldNames,"expression contains missing fields")}catch(f){const w=f&&f.details;if(w&&(w.clause||w.where))throw f;w&&w.missingFields?s.push(...w.missingFields):s.push(h)}}else s.push(h);if(s.length)throw new ne(Ih,i,{missingFields:s})}function rU(e){return e.split(iU)[0]}function u2e(e){return e.split(iU)[1]}function W4e(e,t){const i=t.get(e);return!!i&&!l2e.has(i.type)}const qC=new lt({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let t0=class extends ve{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};g([x({type:En,json:{write:!0}})],t0.prototype,"baseSymbol",void 0),g([x({types:cL,json:{read:{reader:pL},write:!0}})],t0.prototype,"colorRamp",void 0),g([x({json:{read:qC.read,write:qC.write}})],t0.prototype,"type",void 0),t0=g([K("esri.rest.support.ClassificationDefinition")],t0);const h2e=t0,BC=new lt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),HC=new lt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Oo=class extends h2e{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};g([x({json:{write:!0}})],Oo.prototype,"breakCount",void 0),g([x({json:{write:!0}})],Oo.prototype,"classificationField",void 0),g([x({type:String,json:{read:BC.read,write:BC.write}})],Oo.prototype,"classificationMethod",void 0),g([x({json:{write:!0}})],Oo.prototype,"normalizationField",void 0),g([x({json:{read:HC.read,write:HC.write}})],Oo.prototype,"normalizationType",void 0),g([x({value:null,json:{write:!0}})],Oo.prototype,"standardDeviationInterval",null),g([x({value:null,json:{write:!0}})],Oo.prototype,"definedInterval",null),g([x()],Oo.prototype,"type",void 0),Oo=g([K("esri.rest.support.ClassBreaksDefinition")],Oo);const c2e=Oo;function od(e,t){return Number(e.toFixed(t))}function p2e(e){const{normalizationTotal:t}=e;return{classBreaks:d2e(e),normalizationTotal:t}}function d2e(e){const t=e.definition,{classificationMethod:i,breakCount:r,normalizationType:s,definedInterval:h}=t,y=[];let f=e.values;if(f.length===0)return[];f=f.sort((E,A)=>E-A);const w=f[0],S=f[f.length-1];if(i==="equal-interval")if(f.length>=r){const E=(S-w)/r;let A=w;for(let P=1;P<r;P++){const N=od(w+P*E,6);y.push({minValue:A,maxValue:N,label:In(A,N,s)}),A=N}y.push({minValue:A,maxValue:S,label:In(A,S,s)})}else f.forEach(E=>{y.push({minValue:E,maxValue:E,label:In(E,E,s)})});else if(i==="natural-breaks"){const E=f2e(f),A=e.valueFrequency||E.valueFrequency,P=y2e(E.uniqueValues,A,r);let N=w;for(let F=1;F<r;F++)if(E.uniqueValues.length>F){const V=od(E.uniqueValues[P[F]],6);y.push({minValue:N,maxValue:V,label:In(N,V,s)}),N=V}y.push({minValue:N,maxValue:S,label:In(N,S,s)})}else if(i==="quantile")if(f.length>=r&&w!==S){let E=w,A=Math.ceil(f.length/r),P=0;for(let N=1;N<r;N++){let F=A+P-1;F>f.length&&(F=f.length-1),F<0&&(F=0),y.push({minValue:E,maxValue:f[F],label:In(E,f[F],s)}),E=f[F],P+=A,A=Math.ceil((f.length-P)/(r-N))}y.push({minValue:E,maxValue:S,label:In(E,S,s)})}else{let E=-1;for(let A=0;A<f.length;A++){const P=f[A];P!==E&&(E=P,y.push({minValue:E,maxValue:P,label:In(E,P,s)}),E=P)}}else if(i==="standard-deviation"){const E=v2e(f),A=b2e(f,E);if(A===0)y.push({minValue:f[0],maxValue:f[0],label:In(f[0],f[0],s)});else{const P=g2e(w,S,r,E,A)*A;let N=0,F=w;for(let U=r;U>=1;U--){const X=od(E-(U-.5)*P,6);y.push({minValue:F,maxValue:X,label:In(F,X,s)}),F=X,N++}let V=od(E+.5*P,6);y.push({minValue:F,maxValue:V,label:In(F,V,s)}),F=V,N++;for(let U=1;U<=r;U++)V=N===2*r?S:od(E+(U+.5)*P,6),y.push({minValue:F,maxValue:V,label:In(F,V,s)}),F=V,N++}}else if(i==="defined-interval"){if(!h)return y;const E=f[0],A=f[f.length-1],P=Math.ceil((A-E)/h);let N=E;for(let F=1;F<P;F++){const V=od(E+F*h,6);y.push({minValue:N,maxValue:V,label:In(N,V,s)}),N=V}y.push({minValue:N,maxValue:A,label:In(N,A,s)})}return y}function In(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function f2e(e){const t=[],i=[];let r=Number.MIN_VALUE,s=1,h=-1;for(let y=0;y<e.length;y++){const f=e[y];f===r?(s++,i[h]=s):f!==null&&(t.push(f),r=f,s=1,i.push(s),h++)}return{uniqueValues:t,valueFrequency:i}}function y2e(e,t,i){const r=e.length,s=[];i>r&&(i=r);for(let y=0;y<i;y++)s.push(Math.round(y*r/i-1));s.push(r-1);let h=WC(s,e,t,i);return m2e(h.mean,h.sdcm,s,e,t,i)&&(h=WC(s,e,t,i)),s}function WC(e,t,i,r){let s=[],h=[],y=[],f=0;const w=[],S=[];for(let N=0;N<r;N++){const F=p0(N,e,t,i);w.push(F.sbMean),S.push(F.sbSdcm),f+=S[N]}let E,A=f,P=!0;for(;P||f<A;){P=!1,s=[];for(let N=0;N<r;N++)s.push(e[N]);for(let N=0;N<r;N++)for(let F=e[N]+1;F<=e[N+1];F++)if(E=t[F],N>0&&F!==e[N+1]&&Math.abs(E-w[N])>Math.abs(E-w[N-1]))e[N]=F;else if(N<r-1&&e[N]!==F-1&&Math.abs(E-w[N])>Math.abs(E-w[N+1])){e[N+1]=F-1;break}A=f,f=0,h=[],y=[];for(let N=0;N<r;N++){h.push(w[N]),y.push(S[N]);const F=p0(N,e,t,i);w[N]=F.sbMean,S[N]=F.sbSdcm,f+=S[N]}}if(f>A){for(let N=0;N<r;N++)e[N]=s[N],w[N]=h[N],S[N]=y[N];f=A}return{mean:w,sdcm:S}}function m2e(e,t,i,r,s,h){let y=0,f=0,w=0,S=0,E=!0;for(let A=0;A<2&&E;A++){A===0&&(E=!1);for(let P=0;P<h-1;P++)for(;i[P+1]+1!==i[P+2];){i[P+1]=i[P+1]+1;const N=p0(P,i,r,s);w=N.sbMean,y=N.sbSdcm;const F=p0(P+1,i,r,s);if(S=F.sbMean,f=F.sbSdcm,!(y+f<t[P]+t[P+1])){i[P+1]=i[P+1]-1;break}t[P]=y,t[P+1]=f,e[P]=w,e[P+1]=S,E=!0}for(let P=h-1;P>0;P--)for(;i[P]!==i[P-1]+1;){i[P]=i[P]-1;const N=p0(P-1,i,r,s);w=N.sbMean,y=N.sbSdcm;const F=p0(P,i,r,s);if(S=F.sbMean,f=F.sbSdcm,!(y+f<t[P-1]+t[P])){i[P]=i[P]+1;break}t[P-1]=y,t[P]=f,e[P-1]=w,e[P]=S,E=!0}}return E}function g2e(e,t,i,r,s){let h=Math.max(r-e,t-r)/s/i;return h=h>=1?1:h>=.5?.5:.25,h}function v2e(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function b2e(e,t){let i=0;for(let r=0;r<e.length;r++){const s=e[r];i+=(s-t)*(s-t)}return i/=e.length,Math.sqrt(i)}function p0(e,t,i,r){let s=0,h=0;for(let w=t[e]+1;w<=t[e+1];w++){const S=r[w];s+=i[w]*S,h+=S}h<=0&&console.log("Exception in Natural Breaks calculation");const y=s/h;let f=0;for(let w=t[e]+1;w<=t[e+1];w++)f+=r[w]*(i[w]-y)**2;return{sbMean:y,sbSdcm:f}}const w2e="equal-interval",_2e=1,x2e=5,S2e=10,M2e=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,JC=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),E2e=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function nU(e){const t=e.normalizationField!=null||e.normalizationType!=null,i=e.minValue!=null||e.maxValue!=null,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!i&&!r}function KC(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,i=t.filter(s=>s!=null).length,r={count:i};return e.supportsNullCount&&(r.nullcount=t.length-i),e.percentileParams&&(r.median=KE(t,e.percentileParams)),r}function F6(e){const{values:t,useSampleStdDev:i,supportsNullCount:r}=e;let s=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,y=null,f=null,w=null,S=null,E=0;const A=e.minValue==null?-1/0:e.minValue,P=e.maxValue==null?1/0:e.maxValue;for(const F of t)Number.isFinite(F)?F>=A&&F<=P&&(y+=F,s=Math.min(s,F),h=Math.max(h,F),E++):typeof F=="string"&&E++;if(E&&y!=null){f=y/E;let F=0;for(const V of t)Number.isFinite(V)&&V>=A&&V<=P&&(F+=(V-f)**2);S=i?E>1?F/(E-1):0:E>0?F/E:0,w=Math.sqrt(S)}else s=null,h=null;const N={avg:f,count:E,max:h,min:s,stddev:w,sum:y,variance:S};return r&&(N.nullcount=t.length-E),e.percentileParams&&(N.median=KE(t,e.percentileParams)),N}function KE(e,t){const{fieldType:i,value:r,orderBy:s,isDiscrete:h}=t,y=sU(i,s==="desc");if((e=[...e].filter(N=>N!=null).sort((N,F)=>y(N,F))).length===0)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];const f=(e.length-1)*r,w=Math.floor(f),S=w+1,E=f%1,A=e[w],P=e[S];return S>=e.length||h||typeof A=="string"||typeof P=="string"?A:A*(1-E)+P*E}function sU(e,t){const i=t?1:-1,r=T2e(t),s=YC(t);if(!(!!e&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...JC].includes(e)))return(h,y)=>typeof h=="number"&&typeof y=="number"?r(h,y):typeof h=="string"&&typeof y=="string"?s(h,y):i;if(e==="esriFieldTypeDate")return(h,y)=>{const f=new Date(h).getTime(),w=new Date(y).getTime();return isNaN(f)||isNaN(w)?i:r(f,w)};if(JC.has(e))return(h,y)=>r(h,y);if(e==="esriFieldTypeString")return(h,y)=>s(h,y);if(e==="esriFieldTypeGUID"||e==="esriFieldTypeGlobalID"){const h=YC(t);return(y,f)=>h(ZC(y),ZC(f))}return t?(h,y)=>1:(h,y)=>-1}function YC(e){return e?(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t>i?-1:t<i?1:0):(t,i)=>(t=t==null?void 0:t.toUpperCase(),i=i==null?void 0:i.toUpperCase(),t<i?-1:t>i?1:0)}function T2e(e){return e?(t,i)=>i-t:(t,i)=>t-i}function ZC(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function $2e(e,t){let i;for(i in e)E2e.includes(i)&&(Number.isFinite(e[i])||(e[i]=null));return t&&["avg","stddev","variance"].forEach(r=>{e[r]!=null&&(e[r]=Math.ceil(e[r]))}),e}function I2e(e){const t={};for(let i of e)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),t[i]==null?t[i]={count:1,data:i}:t[i].count++;return{count:t}}function A2e(e,t,i){const r=e.count,s=[];i&&t&&t.type==="coded-value"&&t.codedValues.forEach(h=>{const y=h.code;r.hasOwnProperty(y)||(r[y]={data:y,count:0})});for(const h in r){const y=r[h];s.push({value:y.data,count:y.count,label:y.label})}return{uniqueValueInfos:s}}function k2e(e,t,i,r){let s=null;switch(t){case"log":e!==0&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&r!==0&&(s=e/r*100);break;case"field":Number.isFinite(i)&&i!==0&&(s=e/i);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s}function oU(e,t){const i=O2e({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||x2e});return e=C2e(e,t.minValue,t.maxValue),p2e({definition:i,values:e,normalizationTotal:t.normalizationTotal})}function C2e(e,t,i){return t=t==null?-1/0:t,i=i==null?1/0:i,e.filter(r=>Number.isFinite(r)&&r>=t&&r<=i)}function O2e(e){const t=e.field,i=e.classificationMethod||w2e,r=e.normalizationType,s=e.normalizationField,h=new c2e;return h.classificationField=t,h.breakCount=e.breakCount,h.classificationMethod=i,h.standardDeviationInterval=i==="standard-deviation"?e.standardDeviationInterval||_2e:void 0,h.normalizationType=r,h.normalizationField=r==="field"?s:void 0,h}function P2e(e,t){let i=e.classBreaks;const r=i.length,s=i[0].minValue,h=i[r-1].maxValue,y=t==="standard-deviation",f=M2e;return i=i.map(w=>{const S=w.label,E={minValue:w.minValue,maxValue:w.maxValue,label:S};if(y&&S){const A=S.match(f).map(P=>+P.trim());A.length===2?(E.minStdDev=A[0],E.maxStdDev=A[1],A[0]<0&&A[1]>0&&(E.hasAvg=!0)):A.length===1&&(S.includes("<")?(E.minStdDev=null,E.maxStdDev=A[0]):S.includes(">")&&(E.minStdDev=A[0],E.maxStdDev=null))}return E}),{minValue:s,maxValue:h,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function N2e(e,t){const{min:i,max:r,intervals:s}=R2e(e,t),h=s.map((y,f)=>({minValue:s[f][0],maxValue:s[f][1],count:0}));for(const y of e)if(y!=null&&y>=i&&y<=r){const f=L2e(s,y);f>-1&&h[f].count++}return{bins:h,minValue:i,maxValue:r,normalizationTotal:t.normalizationTotal}}function R2e(e,t){const{field:i,classificationMethod:r,standardDeviationInterval:s,normalizationType:h,normalizationField:y,normalizationTotal:f,minValue:w,maxValue:S}=t,E=t.numBins||S2e;let A=null,P=null,N=null;if((!r||r==="equal-interval")&&!h){if(w!=null&&S!=null)A=w,P=S;else{const F=F6({values:e,minValue:w,maxValue:S,useSampleStdDev:!h,supportsNullCount:nU({normalizationType:h,normalizationField:y,minValue:w,maxValue:S})});A=F.min,P=F.max}N=F2e(A,P,E)}else{const{classBreaks:F}=oU(e,{field:i,normalizationType:h,normalizationField:y,normalizationTotal:f,classificationMethod:r,standardDeviationInterval:s,minValue:w,maxValue:S,numClasses:E});A=F[0].minValue,P=F[F.length-1].maxValue,N=F.map(V=>[V.minValue,V.maxValue])}return{min:A,max:P,intervals:N}}function L2e(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(t>=e[r][0]){i=r;break}return i}function F2e(e,t,i){const r=(t-e)/i,s=[];let h,y=e;for(let f=1;f<=i;f++)h=y+r,h=Number(h.toFixed(16)),s.push([y,f===i?t:h]),y=h;return s}class wv{constructor(t,i,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=i;const s=t.outFields;if(s&&!s.includes("*")){this.outFields=s;let h=0;for(const y of s){const f=rU(y),w=this.fieldsIndex.get(f),S=w?null:vy(f,r),E=w?w.name:u2e(y)||"FIELD_EXP_"+h++;this._fieldDataCache.set(y,{alias:E,clause:S})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,r){const s=r?r.name:i;let h=null;return this._fieldDataCache.has(s)?h=this._fieldDataCache.get(s).clause:r||(h=vy(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:h})),r?this.featureAdapter.getAttribute(t,s):h.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,i){const r=i.normalizationType,s=i.normalizationTotal;let h=this.getFieldValue(t,i.field,i.fieldInfo);if(r&&Number.isFinite(h)){const y=this.getFieldValue(t,i.normalizationField,i.normalizationFieldInfo);h=k2e(h,r,y,s)}return h}getExpressionValue(t,i,r,s){const h={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},y=s.createExecContext(h,r);return s.executeFunction(i,y)}getExpressionValues(t,i,r,s){const h={fields:this.fieldsIndex.fields};return t.map(y=>{const f={attributes:this.featureAdapter.getAttributes(y),layer:h},w=s.createExecContext(f,r);return s.executeFunction(i,w)})}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:vy(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(t,this.featureAdapter)}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:vy(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const r={};for(const s of i){const{alias:h,clause:y}=this._fieldDataCache.get(s);r[h]=y?y.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,h)}return r}_processAttributesForDistinctValues(t){if(oe(t)||!this.returnDistinctValues)return t;const i=this.outFields,r=[];if(i)for(const y of i){const{alias:f}=this._fieldDataCache.get(y);r.push(t[f])}else for(const y in t)r.push(t[y]);const s=`${(i||["*"]).join(",")}=${r.join(",")}`;let h=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++h),h>1?null:t}}const aU={convertToGEGeometry:j2e,exportPoint:z2e,exportPolygon:G2e,exportPolyline:q2e,exportMultipoint:H2e,exportExtent:J2e};function j2e(e,t){return t==null?null:e.convertJSONToGeometry(t)}class D2e{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}}function z2e(e,t,i){const r=new D2e(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),h=e.hasM(t);return s&&(r.z=e.getPointZ(t)),h&&(r.m=e.getPointM(t)),r}class V2e{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function G2e(e,t,i){return new V2e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class U2e{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function q2e(e,t,i){return new U2e(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class B2e{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function H2e(e,t,i){return new B2e(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}class W2e{constructor(t,i,r,s,h){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=h,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function J2e(e,t,i){const r=e.hasZ(t),s=e.hasM(t),h=new W2e(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const y=e.getZExtent(t);h.zmin=y.vmin,h.zmax=y.vmax}if(s){const y=e.getMExtent(t);h.mmin=y.vmin,h.mmax=y.vmax}return h}const U9=[0,0];function lU(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,U9),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,U9),[i.xmax,i.ymax]=e(t.xmax,t.ymax,U9),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:XC(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:XC(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:uU(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function XC(e,t){const i=[];for(const r of e)i.push(uU(r,t));return i}function uU(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function hU(e,t){if(!t)return;const i=Array.isArray(e)?e.map(r=>Y(r.geometry)&&r.geometry.spatialReference):[e];await YF(i.map(r=>({source:r,dest:t})))}const cU=lU.bind(null,Zc),pU=lU.bind(null,m0);function p2(e,t,i,r){if(!e||(i||(i=t,t=e.spatialReference),!Mr(t)||!Mr(i)||ki(t,i)))return e;if(y0(t,i)){const s=Ga(i)?cU(e):pU(e);return s.spatialReference=i,s}return Fw(aU,[e],t,i,null,r)[0]}class K2e{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r){if(!t||!t.length||!i||!r||ki(i,r))return t;const s={geometries:t,inSpatialReference:i,outSpatialReference:r,resolve:null};return this._jobs.push(s),new Promise(h=>{s.resolve=h,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:h}=t;y0(r,s)?Ga(s)?h(i.map(cU)):h(i.map(pU)):h(Fw(aU,i,r,s,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const Y2e=new K2e;function J4e(e,t,i){return Y2e.push(e,t,i)}const Z2e=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),QC=Object.freeze({}),eO=new Rr,X2e=new Rr,j6=new Rr,q9={esriGeometryPoint:a6,esriGeometryPolyline:lE,esriGeometryPolygon:uE,esriGeometryMultipoint:aE};function tO(e,t,i,r=e.hasZ,s=e.hasM){if(oe(t))return null;const h=e.hasZ&&r,y=e.hasM&&s;if(i){const f=mm(j6,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,s);return a6(f,h,y)}return a6(t,h,y)}function B9(e,t,i,r,s,h,y=t,f=i){const w=t&&y,S=i&&f,E=Y(r)?"coords"in r?r:r.geometry:null;if(oe(E))return null;if(s){let A=o0e(X2e,E,t,i,e,s,y,f);return h&&(A=mm(j6,A,w,S,e,h)),q9[e](A,w,S)}if(h){const A=mm(j6,E,t,i,e,h,y,f);return q9[e](A,w,S)}return l0e(eO,E,t,i,y,f),q9[e](eO,w,S)}async function K4e(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:h,outStatistics:y}=e;if(r)for(let f=0;f<r.length;f++)r[f]=r[f].trim();if(s)for(let f=0;f<s.length;f++)s[f]=s[f].trim();if(h)for(let f=0;f<h.length;f++)h[f]=h[f].trim();if(y)for(let f=0;f<y.length;f++)y[f].onStatisticField&&(y[f].onStatisticField=y[f].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),Q2e(e,t,i)}async function Q2e(e,t,i){if(!e)return null;let{where:r}=e;if(e.where=r=r&&r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await e3e(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:w}=e.geometry;s=b5(s),s.spatialReference=w}e.geometry=s,await hU(s.spatialReference,i);const h=(await iE(Ua(s)))[0];if(oe(h))throw QC;const y=h.toJSON(),f=await p2(y,y.spatialReference,i);if(!f)throw QC;return f.spatialReference=i,e.geometry=f,e}async function e3e(e){const{geometry:t,distance:i,units:r}=e;if(i==null||"vertexAttributes"in t)return t;const s=t.spatialReference,h=r?Z2e.fromJSON(r):jm(s),y=s&&(x2(s)||Ga(s))?t:await hU(s,y5).then(()=>p2(t,y5));return(await t3e())(y.spatialReference,y,i,h)}async function t3e(){return(await ge(()=>import("./geometryEngineJSON.791d5f1d.js"),["assets/geometryEngineJSON.791d5f1d.js","assets/geometryEngineJSON.16e57e06.js"])).geodesicBuffer}function H9(e){return e&&dU in e?JSON.parse(JSON.stringify(e,i3e)):e}const dU="_geVersion",i3e=(e,t)=>e!==dU?t:void 0;class Y4e{constructor(t,i,r){this.items=t,this.query=i,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.fieldsIndex=r.fieldsIndex,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.featureAdapter=r.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new wv(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:r,outStatistics:s}=this.query;if(!(i==null?void 0:i.length))return 1;const y=new Map,f=new Map,w=new Set;for(const S of s){const{statisticType:E}=S,A=E!=="exceedslimit"?S.onStatisticField:void 0;if(!f.has(A)){const N=[];for(const F of i){const V=this._getAttributeValues(t,F,y);N.push(V)}f.set(A,this._calculateUniqueValues(N,t.returnDistinctValues))}const P=f.get(A);for(const N in P){const{data:F,items:V}=P[N],U=F.join(",");r&&!t.validateItems(V,r)||w.add(U)}}return w.size}async createQueryResponse(){let t;return this.query.outStatistics?t=this.query.outStatistics.some(i=>i.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):t=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry&&(Mr(this.query.outSR)&&!ki(this.query.geometry.spatialReference,this.query.outSR)?t.queryGeometry=H9({spatialReference:this.query.outSR,...p2(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):t.queryGeometry=H9({spatialReference:this.query.outSR,...this.query.geometry})),t}createSnappingResponse(t,i){const r=this.featureAdapter,s=n3e(this.hasZ,this.hasM),{x:h,y}=t.point,f=typeof t.distance=="number"?t.distance:t.distance.x,w=typeof t.distance=="number"?t.distance:t.distance.y,S={candidates:[]},E=this.geometryType==="esriGeometryPolygon",A=this._getPointCreator(t.point,this.spatialReference,i);for(const P of this.items){const N=r.getGeometry(P);if(oe(N))continue;const{coords:F,lengths:V}=N;if(t.types&W0.EDGE){let U=0;for(let X=0;X<V.length;X++){const re=V[X];for(let he=0;he<re;he++,U+=s){const pe=F[U],ae=F[U+1];if(he!==re-1){const le=F[U+s],Te=F[U+s+1],{x:Ee,y:Oe}=r3e(h,y,pe,ae,le,Te),Ae=(h-Ee)/f,Fe=(y-Oe)/w,ze=Ae*Ae+Fe*Fe;ze<=1&&S.candidates.push({type:"edge",objectId:r.getObjectId(P),distance:Math.sqrt(ze),target:A(Ee,Oe),start:A(pe,ae),end:A(le,Te)})}}}}if(t.types&W0.VERTEX){const U=E?F.length-s:F.length;for(let X=0;X<U;X+=s){const re=F[X],he=F[X+1],pe=(h-re)/f,ae=(y-he)/w,le=pe*pe+ae*ae;le<=1&&S.candidates.push({type:"vertex",objectId:r.getObjectId(P),distance:Math.sqrt(le),target:A(re,he)})}}}return S.candidates.sort((P,N)=>P.distance-N.distance),S}_getPointCreator(t,i,r){const s=Y(r)&&!ki(i,r)?h=>p2(h,i,r):h=>h;return t.z!=null&&t.m!=null?(h,y)=>s({x:h,y,z:t.z,m:t.m}):t.z!=null?(h,y)=>s({x:h,y,z:t.z}):t.m!=null?(h,y)=>s({x:h,y,m:t.m}):(h,y)=>s({x:h,y})}async createSummaryStatisticsResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,minValue:f,maxValue:w,scale:S}=t,E=this.fieldsIndex.isDateField(i),A=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,scale:S}),P=nU({normalizationType:h,normalizationField:s,minValue:f,maxValue:w}),N=this.fieldsIndex.get(i),F={value:.5,fieldType:N==null?void 0:N.type},V=k$(N)?KC({values:A,supportsNullCount:P,percentileParams:F}):F6({values:A,minValue:f,maxValue:w,useSampleStdDev:!h,supportsNullCount:P,percentileParams:F});return $2e(V,E)}async createUniqueValuesResponse(t){const{field:i,valueExpression:r,domain:s,returnAllCodedValues:h,scale:y}=t,f=await this._getDataValues({field:i,valueExpression:r,scale:y}),w=I2e(f);return A2e(w,s,h)}async createClassBreaksResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,classificationMethod:f,standardDeviationInterval:w,minValue:S,maxValue:E,numClasses:A,scale:P}=t,N=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,scale:P}),F=oU(N,{field:i,normalizationField:s,normalizationType:h,normalizationTotal:y,classificationMethod:f,standardDeviationInterval:w,minValue:S,maxValue:E,numClasses:A});return P2e(F,f)}async createHistogramResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,classificationMethod:f,standardDeviationInterval:w,minValue:S,maxValue:E,numBins:A,scale:P}=t,N=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:h,normalizationTotal:y,scale:P});return N2e(N,{field:i,normalizationField:s,normalizationType:h,normalizationTotal:y,classificationMethod:f,standardDeviationInterval:w,minValue:S,maxValue:E,numBins:A})}_sortFeatures(t,i,r){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const h=s.split(" "),y=h[0],f=this.fieldsIndex.get(y),w=h[1]&&h[1].toLowerCase()==="desc",S=sU(f==null?void 0:f.type,w);t.sort((E,A)=>{const P=r(E,y,f),N=r(A,y,f);return S(P,N)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:r,hasM:s,hasZ:h,objectIdField:y,spatialReference:f}=this,{outFields:w,outSR:S,quantizationParameters:E,resultRecordCount:A,resultOffset:P,returnZ:N,returnM:F}=t,V=A!=null&&i.length>(P||0)+A,U=w&&(w.includes("*")?[...this.fieldsIndex.fields]:w.map(X=>this.fieldsIndex.get(X)));return{exceededTransferLimit:V,features:this._createFeatures(t,i),fields:U,geometryType:r,hasM:s&&F,hasZ:h&&N,objectIdFieldName:y,spatialReference:H9(S||f),transform:E&&FC(E)||null}}_createFeatures(t,i){const r=new wv(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:h}=this,{orderByFields:y,quantizationParameters:f,returnGeometry:w,returnCentroid:S,maxAllowableOffset:E,resultOffset:A,resultRecordCount:P,returnZ:N=!1,returnM:F=!1}=t,V=h&&N,U=s&&F;let X=[],re=0;const he=[...i];if(this._sortFeatures(he,y,(ae,le,Te)=>r.getFieldValue(ae,le,Te)),w||S){const ae=FC(f);if(w&&!S)for(const le of he)X[re++]={attributes:r.getAttributes(le),geometry:B9(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(le),E,ae,V,U)};else if(!w&&S)for(const le of he)X[re++]={attributes:r.getAttributes(le),centroid:tO(this,this.featureAdapter.getCentroid(le,this),ae)};else for(const le of he)X[re++]={attributes:r.getAttributes(le),centroid:tO(this,this.featureAdapter.getCentroid(le,this),ae),geometry:B9(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(le),E,ae,V,U)}}else for(const ae of he){const le=r.getAttributes(ae);le&&(X[re++]={attributes:le})}const pe=A||0;if(P!=null){const ae=pe+P;X=X.slice(pe,Math.min(X.length,ae))}return X}_createExceedsLimitQueryResponse(t){let i=!1,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY;for(const y of t.outStatistics)if(y.statisticType==="exceedslimit"){r=y.maxPointCount!=null?y.maxPointCount:Number.POSITIVE_INFINITY,s=y.maxRecordCount!=null?y.maxRecordCount:Number.POSITIVE_INFINITY,h=y.maxVertexCount!=null?y.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")i=this.items.length>r;else if(this.items.length>s)i=!0;else{const y=this.hasZ?this.hasM?4:3:this.hasM?3:2,f=this.featureAdapter;i=this.items.reduce((w,S)=>{const E=f.getGeometry(S);return w+(Y(E)&&E.coords.length||0)},0)/y>h}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}async _createStatisticsQueryResponse(t){const i={attributes:{}},r=[],s=new Map,h=new Map,y=new Map,f=new Map,w=new wv(t,this.featureAdapter,this.fieldsIndex),S=t.outStatistics,{groupByFieldsForStatistics:E,having:A,orderByFields:P}=t,N=E&&E.length,F=!!N,V=F&&E[0],U=F&&!this.fieldsIndex.get(V);for(const re of S){const{outStatisticFieldName:he,statisticType:pe}=re,ae=re,le=pe!=="exceedslimit"?re.onStatisticField:void 0,Te=pe==="percentile_disc"||pe==="percentile_cont",Ee=pe==="EnvelopeAggregate"||pe==="CentroidAggregate"||pe==="ConvexHullAggregate",Oe=F&&N===1&&(le===V||U)&&pe==="count";if(F){if(!y.has(le)){const Fe=[];for(const ze of E){const Ge=this._getAttributeValues(w,ze,s);Fe.push(Ge)}y.set(le,this._calculateUniqueValues(Fe,w.returnDistinctValues))}const Ae=y.get(le);for(const Fe in Ae){const{count:ze,data:Ge,items:ke,itemPositions:ht}=Ae[Fe],Kt=Ge.join(",");if(!A||w.validateItems(ke,A)){const bt=f.get(Kt)||{attributes:{}};if(Ee){bt.aggregateGeometries||(bt.aggregateGeometries={});const{aggregateGeometries:Ct,outStatisticFieldName:yi}=await this._getAggregateGeometry(ae,ke);bt.aggregateGeometries[yi]=Ct}else{let Ct=null;if(Oe)Ct=ze;else{const yi=this._getAttributeValues(w,le,s),Es=ht.map(ra=>yi[ra]);Ct=Te&&"statisticParameters"in ae?this._getPercentileValue(ae,Es):this._getStatisticValue(ae,Es,null,w.returnDistinctValues)}bt.attributes[he]=Ct}E.forEach((Ct,yi)=>bt.attributes[this.fieldsIndex.get(Ct)?Ct:`EXPR_${yi+1}`]=Ge[yi]),f.set(Kt,bt)}}}else if(Ee){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:Ae,outStatisticFieldName:Fe}=await this._getAggregateGeometry(ae,this.items);i.aggregateGeometries[Fe]=Ae}else{const Ae=this._getAttributeValues(w,le,s);i.attributes[he]=Te&&"statisticParameters"in ae?this._getPercentileValue(ae,Ae):this._getStatisticValue(ae,Ae,h,w.returnDistinctValues)}r.push({name:he,alias:he,type:"esriFieldTypeDouble"})}const X=F?Array.from(f.values()):[i];return this._sortFeatures(X,P,(re,he)=>re.attributes[he]),{fields:r,features:X}}async _getAggregateGeometry(t,i){const r=await ge(()=>import("./geometryEngineJSON.791d5f1d.js"),["assets/geometryEngineJSON.791d5f1d.js","assets/geometryEngineJSON.16e57e06.js"]),{statisticType:s,outStatisticFieldName:h}=t,{featureAdapter:y,spatialReference:f,geometryType:w,hasZ:S,hasM:E}=this,A=i.map(F=>B9(w,S,E,y.getGeometry(F))),P=r.convexHull(f,A,!0)[0],N={aggregateGeometries:null,outStatisticFieldName:null};if(s==="EnvelopeAggregate"){const F=P?fM(P):b5(r.union(f,A));N.aggregateGeometries={...F,spatialReference:f},N.outStatisticFieldName=h||"extent"}else if(s==="CentroidAggregate"){const F=P?LP(P):vK(b5(r.union(f,A)));N.aggregateGeometries={x:F[0],y:F[1],spatialReference:f},N.outStatisticFieldName=h||"centroid"}else s==="ConvexHullAggregate"&&(N.aggregateGeometries=P,N.outStatisticFieldName=h||"convexHull");return N}_getStatisticValue(t,i,r,s){const{onStatisticField:h,statisticType:y}=t;let f=null;return f=r!=null&&r.has(h)?r.get(h):k$(this.fieldsIndex.get(h))?KC({values:i,returnDistinct:s}):F6({values:i,minValue:null,maxValue:null,useSampleStdDev:!0}),r&&r.set(h,f),f[y==="var"?"variance":y]}_getPercentileValue(t,i){const{onStatisticField:r,statisticParameters:s,statisticType:h}=t,{value:y,orderBy:f}=s,w=this.fieldsIndex.get(r);return KE(i,{value:y,orderBy:f,fieldType:w==null?void 0:w.type,isDiscrete:h==="percentile_disc"})}_getAttributeValues(t,i,r){if(r.has(i))return r.get(i);const s=this.fieldsIndex.get(i),h=this.items.map(y=>t.getFieldValue(y,i,s));return r.set(i,h),h}_getAttributeNormalizedValues(t,i){return this.items.map(r=>t.getNormalizedValue(r,{field:i.field,fieldInfo:this.fieldsIndex.get(i.field),normalizationField:i.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(i.normalizationField),normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}async _getAttributeExpressionValues(t,i,r){const{arcadeUtils:s}=await qa(),h=s.createFunction(i),y=r&&s.getViewInfo(r);return t.getExpressionValues(this.items,h,y,s)}_calculateUniqueValues(t,i){const r={},s=this.items,h=s.length;for(let y=0;y<h;y++){const f=s[y],w=[];for(const E of t)w.push(E[y]);const S=w.join(",");i?r[S]==null&&(r[S]={count:1,data:w,items:[f],itemPositions:[y]}):r[S]==null?r[S]={count:1,data:w,items:[f],itemPositions:[y]}:(r[S].count++,r[S].items.push(f),r[S].itemPositions.push(y))}return r}async _getDataValues(t){const i=new wv(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:s,normalizationField:h,normalizationType:y,normalizationTotal:f,scale:w}=t,S=r?{viewingMode:"map",scale:w,spatialReference:this.query.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(i,r,S):this._getAttributeNormalizedValues(i,{field:s,normalizationField:h,normalizationType:y,normalizationTotal:f})}}function r3e(e,t,i,r,s,h){const y=s-i,f=h-r,w=y*y+f*f,S=(e-i)*y+(t-r)*f,E=Math.min(1,Math.max(0,S/w));return{x:i+y*E,y:r+f*E}}function n3e(e,t){return e?t?4:3:t?3:2}var W0;(function(e){e[e.NONE=0]="NONE",e[e.EDGE=1]="EDGE",e[e.VERTEX=2]="VERTEX"})(W0||(W0={}));let qo=class extends ve{constructor(){super(...arguments),this.enabled=!0}};g([x({type:Boolean})],qo.prototype,"enabled",void 0),qo=g([K("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],qo);let Ni=class extends ve{constructor(e){super(e),this.lineSnapper=new qo,this.parallelLineSnapper=new qo,this.rightAngleSnapper=new qo,this.rightAngleTriangleSnapper=new qo,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new rt([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};g([x({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ni.prototype,"lineSnapper",void 0),g([x({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ni.prototype,"parallelLineSnapper",void 0),g([x({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ni.prototype,"rightAngleSnapper",void 0),g([x({type:qo,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Ni.prototype,"rightAngleTriangleSnapper",void 0),g([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ni.prototype,"shortLineThreshold",void 0),g([x({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Ni.prototype,"distance",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ni.prototype,"pointThreshold",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ni.prototype,"intersectionParallelLineThreshold",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ni.prototype,"parallelLineThreshold",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ni.prototype,"touchSensitivityMultiplier",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Ni.prototype,"pointOnLineThreshold",void 0),g([x({type:rt,nonNullable:!0})],Ni.prototype,"orange",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ni.prototype,"lineHintWidthReference",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ni.prototype,"lineHintWidthTarget",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Ni.prototype,"lineHintFadedExtensions",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Ni.prototype,"parallelLineHintWidth",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Ni.prototype,"parallelLineHintLength",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Ni.prototype,"parallelLineHintOffset",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Ni.prototype,"rightAngleHintSize",void 0),g([x({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Ni.prototype,"rightAngleHintOutlineSize",void 0),Ni=g([K("esri.views.interactive.snapping.Settings.Defaults")],Ni);const iu=new Ni;function Lp(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function Yo(e,t){const i=e.length===t.length&&e[0]===t[0]&&e[1]===t[1];switch(e.length){case 2:return i;case 3:return i&&e[2]===t[2];case 4:return i&&e[3]===t[3]}return!1}function YE(e,t){t.sort((i,r)=>Za(i.targetPoint,e)-Za(r.targetPoint,e))}var Qo;(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(Qo||(Qo={}));function W9(e,t){return e[0]*t[1]-e[1]*t[0]}function fU(e,t,i){const r=(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0]);return Math.abs(r)/zh(t,i)}function s3e(e,t,i){const r=Vh(i,t)/Rp(i);return kf(e,i,r)}function $0(e,t,i,r,s=i){return Hi(Bo,r,i),Hi(Qs,t,s),s3e(J0,Qs,Bo),E3(e,s,J0)}function o3e(e,t,i,r){Hi(Bo,r,i),Hi(Qs,t,i);const s=Vh(Bo,Qs)/Rp(Bo);return s>0?ja(e,i,Bo,s):Np(e,i)}function ZE(e,t,i,r){Hi(Bo,t,i);const s=r/xm(Bo);return ja(e,i,Bo,s)}function yU(e,t){return $0(Qs,t,e.start,e.end),Fa(Qs[0],t[0])&&Fa(Qs[1],t[1])?[PE(t)]:[]}function mU(e,t,i){return ZE(Qs,i,e,t),Fa(Qs[0],i[0])&&Fa(Qs[1],i[1])?[PE(i)]:[]}function a3e(e,t){const i=e.start,r=e.end,s=t.start,h=t.end,y=Hi(Bo,r,i),f=Hi(vU,h,s),w=W9(y,f);if(Math.abs(w)<=l3e)return[];const S=Hi(Qs,i,s),E=W9(f,S)/w,A=W9(y,S)/w;if(E>=0){if(A>=0||t.type===lr.LINE)return[ja(J0,i,y,E)]}else if(e.type===lr.LINE&&(A>=0||t.type===lr.LINE))return[ja(J0,i,y,E)];return[]}function gU(e,t,i){const r=[],s=Hi(Bo,e.end,e.start),h=Hi(vU,e.start,t),y=Rp(s),f=2*Vh(s,h),w=f*f-4*y*(Rp(h)-i*i);if(w===0){const S=-f/(2*y);(e.type===lr.LINE||S>=0)&&r.push(ja(J0,e.start,s,S))}else if(w>0){const S=Math.sqrt(w),E=(-f+S)/(2*y);(e.type===lr.LINE||E>=0)&&r.push(ja(J0,e.start,s,E));const A=(-f-S)/(2*y);(e.type===lr.LINE||A>=0)&&r.push(ja(Qs,e.start,s,A))}return r}var lr;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(lr||(lr={}));const l3e=1e-6,Bo=At(),vU=At(),Qs=At(),J0=At();class P3{constructor(t){this.coordinateHelper=t}}class N3 extends P3{constructor(t,i){super(t),this.point=i}objectEqual(t){return t instanceof N3&&Yo(this.point,t.point)}check(t){return Za(t,this.point)<iu.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}intersect(t){const i=[];return t instanceof Fp?i.push(...yU({start:t.start,end:t.end,type:t instanceof Ho?lr.LINE:lr.RAY},this.point)):t instanceof Ym&&i.push(...mU(t.center,t.radius,this.point)),i.map(r=>new Rf(this.coordinateHelper,r,this,t))}}class Fp extends P3{constructor(t,i,r){super(t),this.start=i,this.end=r}objectEqual(t){return t instanceof Fp&&Yo(this.start,t.start)&&Yo(this.end,t.end)}intersect(t){const i=[];return t instanceof N3?i.push(...yU({start:this.start,end:this.end,type:this instanceof Ho?lr.LINE:lr.RAY},t.point)):t instanceof Fp?i.push(...a3e({start:this.start,end:this.end,type:this instanceof Ho?lr.LINE:lr.RAY},{start:t.start,end:t.end,type:t instanceof Ho?lr.LINE:lr.RAY})):t instanceof Ym&&i.push(...gU({start:this.start,end:this.end,type:this instanceof Ho?lr.LINE:lr.RAY},t.center,t.radius)),i.map(r=>new Rf(this.coordinateHelper,r,this,t))}}class R3 extends Fp{constructor(t,i,r){super(t,i,r),this.dir=At(),this.p=At()}objectEqual(t){return t instanceof R3&&super.objectEqual(t)}check(t){return Hi(this.dir,this.end,this.start),Hi(this.p,t,this.start),Vh(this.dir,this.p)>=0&&fU(t,this.start,this.end)<iu.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper.clone(t);return o3e(i,t,this.start,this.end),i}}class Ho extends Fp{constructor(t,i,r){super(t,i,r)}objectEqual(t){return t instanceof Ho&&super.objectEqual(t)}check(t){return fU(t,this.start,this.end)<iu.pointOnLineThreshold}closestTo(t){const i=this.coordinateHelper.clone(t);return $0(i,t,this.start,this.end),i}}class Rf extends P3{constructor(t,i,r,s){super(t),this.intersection=i,this.first=r,this.second=s}objectEqual(t){return t instanceof Rf&&this.first.objectEqual(t.first)&&this.second.objectEqual(t.second)}check(){return!1}closestTo(t){const i=this.coordinateHelper.clone(t);return Np(i,this.intersection),i}intersect(){return[]}}class Ym extends P3{constructor(t,i,r){super(t),this.center=i,this.radius=r}objectEqual(t){return t instanceof Ym&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}check(){return!1}closestTo(t){const i=this.coordinateHelper.clone(t);return ZE(i,t,this.center,this.radius),i}intersect(t){const i=[];return t instanceof Fp?i.push(...gU({start:t.start,end:t.end,type:t instanceof Ho?lr.LINE:lr.RAY},this.center,this.radius)):t instanceof N3&&i.push(...mU(this.center,this.radius,t.point)),i.map(r=>new Rf(this.coordinateHelper,r,this,t))}}class Lf{constructor(t,i,r,s){this.coordinateHelper=t,this.targetPoint=i,this.constraint=r,this.elevationInfo=s}}class bU extends Lf{constructor({coordinateHelper:t,targetPoint:i,objectId:r,constraint:s,elevationInfo:h}){super(t,i,s,h),this.objectId=r}}class L3{constructor(t){this.elevationInfo=t}}Le.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class ea extends L3{constructor(t,i,r,s,h=!0,y=!0){super(s),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=h,this.fadeRight=y}equals(t){return t instanceof ea&&this.type===t.type&&Yo(this.lineStart,t.lineStart)&&Yo(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}}class u3e extends bU{constructor(t){super({...t,constraint:new Ho(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new ea(Qo.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo)]}}Le.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class F3 extends L3{constructor(t,i,r,s){super(s),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof F3&&Yo(this.previousVertex,t.previousVertex)&&Yo(this.centerVertex,t.centerVertex)&&Yo(this.nextVertex,t.nextVertex)}}class wU extends Lf{constructor({coordinateHelper:t,targetPoint:i,constraint:r,previousVertex:s,otherVertex:h,otherVertexType:y,objectId:f,elevationInfo:w}){super(t,i,r,w),this.previousVertex=s,this.otherVertex=h,this.otherVertexType=y,this.objectId=f}get hints(){const t=this.previousVertex,i=this.otherVertexType===K0.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===K0.CENTER?this.targetPoint:this.otherVertex,s=this.elevationInfo;return[new ea(Qo.TARGET,i,r,s),new ea(Qo.REFERENCE,t,i,s),new F3(this.previousVertex,i,r,s)]}}var K0;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(K0||(K0={}));function _U(e,t,i,r,s=Lr()){const h=t.toXYZ(e);return h[2]=c2(r,h,t.spatialReference,i)||0,r.renderCoordsHelper.toRenderCoords(h,t.spatialReference,s),s}function Z4e(e,t,i,r,s=Lr()){const h=tm(D6,e);return h[2]=c2(r,h,t,i)||0,r.renderCoordsHelper.toRenderCoords(h,t,s),s}function xr(e,t,i,r){return r.type==="2d"?r.toScreen(t.vectorToPoint(e,h3e)):(_U(e,t,i,r,D6),r.state.camera.projectToScreen(D6,J9),_r(J9[0],J9[1]))}function X4e(e,t,i,r,s,h,y){const f=i.toXYZ(e),w=i.toXYZ(t);if(r.mode!=="absolute-height"){const S=c2(s,f,i.spatialReference,r),E=c2(s,w,i.spatialReference,r),A=(S==null?E:E==null?S:Math.min(S,E))||0;f[2]=A,w[2]=A}s.renderCoordsHelper.toRenderCoords(f,i.spatialReference,h),s.renderCoordsHelper.toRenderCoords(w,i.spatialReference,y)}const h3e=new et,D6=Lr(),J9=PX();let rh=class extends Ap{constructor(e){super(e),this.options=null,this.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}}}get updating(){return Em(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,t=new Map;if(Y(this.options)&&Y(this.options.featureSources))for(const i of this.options.featureSources.items){const r=i.layer.uid,s=e.get(r);if(s){e.delete(r),t.set(r,s);continue}if(!i.layer.loaded){this.updatingHandles.addPromise(i.layer.load());continue}const h=this._createSourceInfo(i);Y(h)&&t.set(r,h)}for(const[,i]of e)i.destroy();return t}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),Yl),Y(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,t){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=t)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,i){if(oe(this.options)||!this.options.effectiveFeatureEnabled)return[];const r=[],s=this._computeScreeenSizeDistanceParameters(e,t),h={distance:s,point:e,coordinateHelper:t.coordinateHelper,types:this.types,filter:null};for(const[,{snappingSource:f,layerView:w}]of this.snappingSources)!f.layerSource.enabled||Y(w)&&w.suspended||r.push(f.fetchCandidates(h,i).then(S=>S.filter(E=>!this._candidateIsExcluded(f,E,t.excludeFeature))));const y=(await pP(r)).flat();return this._addRightAngleCandidates(y,e,s,t),di(i),YE(e,y),y}_addRightAngleCandidates(e,t,i,r){var f,w,S,E,A,P,N,F;const s=Y(r.vertexHandle)?(w=(f=r.vertexHandle.rightEdge)==null?void 0:f.rightVertex)==null?void 0:w.pos:Y(r.editGeometryOperations)&&r.editGeometryOperations.data.type==="polygon"?(E=(S=r.editGeometryOperations.data.components[0])==null?void 0:S.getFirstVertex())==null?void 0:E.pos:null,h=Y(r.vertexHandle)?(P=(A=r.vertexHandle.leftEdge)==null?void 0:A.leftVertex)==null?void 0:P.pos:Y(r.editGeometryOperations)?(F=(N=r.editGeometryOperations.data.components[0])==null?void 0:N.getLastVertex())==null?void 0:F.pos:null,y=e.length;for(let V=0;V<y;V++)this._addRightAngleCandidate(e[V],h,t,i,r,e),this._addRightAngleCandidate(e[V],s,t,i,r,e)}_addRightAngleCandidate(e,t,i,r,s,h){if(oe(t)||!(e instanceof u3e))return;const y=e.constraint.closestTo(t),f=(y[0]-i[0])/r.x,w=(y[1]-i[1])/r.y;if(f*f+w*w<=1){const S=s.coordinateHelper;h.push(new wU({coordinateHelper:S,targetPoint:y,otherVertex:t,otherVertexType:K0.NEXT,previousVertex:e.constraint.start,constraint:new R3(S,t,y),objectId:e.objectId,elevationInfo:e.elevationInfo}))}}_computeScreeenSizeDistanceParameters(e,t){const i=Y(this.options)?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;if(oe(this.view))return{x:i,y:i,pixelSize:i};if(this.view.type==="2d"){const r=i*this.view.resolution;return{x:r,y:r,pixelSize:r}}return this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,r){const{coordinateHelper:s,elevationInfo:h}=r,y=i.state.camera.computeScreenPixelSizeAt(_U(e,s,h,i,p3e)),f=y*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,w=t*f;return{x:w/this._computeScreenMagnitudeOfMapOffset(e,f,0,i,r),y:w/this._computeScreenMagnitudeOfMapOffset(e,0,f,i,r),pixelSize:y}}_computeScreenMagnitudeOfMapOffset(e,t,i,r,{coordinateHelper:s,elevationInfo:h}){const y=s.clone(e);y[0]+=t,y[1]+=i;const f=xr(e,s,h,r),w=xr(y,s,h,r),S=w.x-f.x,E=w.y-f.y;return Math.sqrt(S*S+E*E)}get types(){return W0.EDGE|W0.VERTEX}_candidateIsExcluded(e,t,i){if(oe(i))return!1;const r=this._getCandidateObjectId(t);if(oe(r))return!1;const s=e.layerSource.layer;return s.type==="graphics"?i.uid===r:i.sourceLayer===s&&!(!i.attributes||!("objectIdField"in s))&&i.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof bU?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(oe(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=Y(this.view)?this.view.allLayerViews.find(r=>r.layer===e.layer):null;return new c3e(t.source,i)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e)}return null}_createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source.type){case"feature-layer":{const t=this._getSourceModule("featureService");return Y(t.module)?{source:new t.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const t=this._getSourceModule("featureCollection");return Y(t.module)?{source:new t.module.FeatureCollectionSnappingSource({layerSource:e})}:{loading:t.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule("graphics");return Y(t.module)?{source:new t.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this.sourceModules[e];if(oe(t.loader)){const i=this._loadSourceModule(e).then(r=>{t.module=r});return t.loader=i,{module:t.module,loader:i}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){switch(e){case"featureService":return this.updatingHandles.addPromise(ge(()=>import("./FeatureServiceSnappingSource.385cdc58.js"),["assets/FeatureServiceSnappingSource.385cdc58.js","assets/boundedPlane.2500e48f.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/sphere.f1597b20.js","assets/lineSegment.901d4e43.js","assets/plane.f3b639d8.js","assets/queryEngineUtils.1a2e7353.js","assets/PointSnappingHint.427009a4.js","assets/WorkerHandle.d222cfbe.js"]));case"featureCollection":return this.updatingHandles.addPromise(ge(()=>import("./FeatureCollectionSnappingSource.7e4bffb8.js"),["assets/FeatureCollectionSnappingSource.7e4bffb8.js","assets/queryEngineUtils.1a2e7353.js","assets/PointSnappingHint.427009a4.js"]));case"graphics":return this.updatingHandles.addPromise(ge(()=>import("./GraphicsSnappingSource.de18e818.js"),["assets/GraphicsSnappingSource.de18e818.js","assets/normalizeUtilsSync.49c44a3e.js","assets/FeatureStore.b45aee3f.js","assets/PooledRBush.84072bba.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/QueryEngine.9f557dec.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.58b91d3a.js","assets/queryEngineUtils.1a2e7353.js","assets/PointSnappingHint.427009a4.js"]))}return null}};g([x({constructOnly:!0})],rh.prototype,"spatialReference",void 0),g([x({constructOnly:!0})],rh.prototype,"view",void 0),g([x()],rh.prototype,"options",void 0),g([x({readOnly:!0})],rh.prototype,"updating",null),g([x({readOnly:!0})],rh.prototype,"snappingSources",null),rh=g([K("esri.views.interactive.snapping.FeatureSnappingEngine")],rh);class c3e{constructor(t,i){this.snappingSource=t,this.layerView=i,this.handles=new er;const r=this.snappingSource.layerSource.layer;if("refresh"in r){const s=r;this.handles.add(s.on("refresh",()=>t.refresh()))}this.handles.add([$e(()=>t.updating,s=>t.layerSource.updating=s,ys),$e(()=>t.availability,s=>t.layerSource.availability=s,ys)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}const p3e=Lr();class j3{constructor(t,i){this.view=t,this.options=i,this.squaredShortLineThreshold=iu.shortLineThreshold*iu.shortLineThreshold}snap(t,i){return Y(i.vertexHandle)?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(t,i):this.snapNewVertex(t,i)}edgeExceedsShortLineThreshold(t,i){return this.exceedsShortLineThreshold(t.leftVertex.pos,t.rightVertex.pos,i)}exceedsShortLineThreshold(t,i,{elevationInfo:r,editGeometryOperations:s}){const h=s.data.coordinateHelper;return this.squaredShortLineThreshold===0||Lp(xr(i,h,r,this.view),xr(t,h,r,this.view))>this.squaredShortLineThreshold}squaredProximityTreshold(t){return t==="touch"?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:i}=this.options,r=t*i;return r*r}}class d3e extends Lf{constructor({coordinateHelper:t,lineStart:i,lineEnd:r,targetPoint:s,elevationInfo:h}){super(t,s,new Ho(t,i,r),h),this.referenceLineHint=new ea(Qo.REFERENCE_EXTENSION,i,r,h)}get hints(){return[this.referenceLineHint,new ea(Qo.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo)]}_lineEndClosestToTarget(){const t=this.constraint.start,i=this.constraint.end;return Math.sign(Vh(Hi(y3e,i,t),Hi(f3e,this.targetPoint,t)))>0?i:t}}const f3e=At(),y3e=At();class m3e extends j3{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,h=[];if(s<1)return h;const y=i.coordinateHelper,f=xr(t,y,i.elevationInfo,this.view),w=r.edges[s-1];let S=w;do this.edgeExceedsShortLineThreshold(S,i)&&this._processCandidateProposal(S.leftVertex.pos,S.rightVertex.pos,t,f,i,h),S=S.leftVertex.leftEdge;while(S&&S!==w);return h}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,h=s.component;if(h.edges.length<2)return r;const y=i.coordinateHelper,f=xr(t,y,i.elevationInfo,this.view),w=s.leftEdge,S=s.rightEdge;w&&S&&this.edgeExceedsShortLineThreshold(w,i)&&this.edgeExceedsShortLineThreshold(S,i)&&this._processCandidateProposal(w.leftVertex.pos,S.rightVertex.pos,t,f,i,r);const E=h.edges[0];let A=E;do A!==s.leftEdge&&A!==s.rightEdge&&this.edgeExceedsShortLineThreshold(A,i)&&this._processCandidateProposal(A.leftVertex.pos,A.rightVertex.pos,t,f,i,r),A=A.rightVertex.rightEdge;while(A&&A!==E);return r}_processCandidateProposal(t,i,r,s,h,y){const f=$0(At(),r,t,i),{coordinateHelper:w,elevationInfo:S,pointer:E}=h,A=w.fromXYZ(f,w.getZ(r,0));Lp(s,xr(A,w,S,this.view))<this.squaredProximityTreshold(E)&&y.push(new d3e({coordinateHelper:w,lineStart:t,lineEnd:i,targetPoint:A,elevationInfo:S}))}}Le.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class XE extends L3{constructor(t,i,r){super(r),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof XE&&Yo(this.lineStart,t.lineStart)&&Yo(this.lineEnd,t.lineEnd)}}class g3e extends Lf{constructor({coordinateHelper:t,referenceLine:i,lineStart:r,targetPoint:s,elevationInfo:h}){const y=t.clone(r);Hi(y,E3(y,y,i.rightVertex.pos),i.leftVertex.pos),super(t,s,new Ho(t,r,y),h),this._referenceLines=[{edge:i,fadeLeft:!0,fadeRight:!0}]}get hints(){const t=this.elevationInfo;return[new ea(Qo.TARGET,this.constraint.start,this.targetPoint,t),new XE(this.constraint.start,this.targetPoint,t),...this._referenceLines.map(i=>new ea(Qo.REFERENCE,i.edge.leftVertex.pos,i.edge.rightVertex.pos,t,i.fadeLeft,i.fadeRight))]}addReferenceLine(t){const i={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(r=>{t.rightVertex.rightEdge===r.edge&&(r.fadeLeft=!1,i.fadeRight=!1),t.leftVertex.leftEdge===r.edge&&(r.fadeRight=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}}class v3e extends j3{constructor(){super(...arguments),this._tmpProjection=At()}snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,h=r.vertices.length,y=[];if(s<2)return y;const f=xr(t,i.coordinateHelper,i.elevationInfo,this.view),w=r.vertices[h-1],S=r.vertices[0],E=r.edges[s-1];let A=E;do this.edgeExceedsShortLineThreshold(A,i)&&(this._checkEdgeForParalleLines(A,w.pos,t,f,i,y),this._checkEdgeForParalleLines(A,S.pos,t,f,i,y)),A=A.leftVertex.leftEdge;while(A&&A!==E);return y}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,h=s.component;if(h.edges.length<3)return r;const y=xr(t,i.coordinateHelper,i.elevationInfo,this.view),f=s.leftEdge,w=s.rightEdge,S=h.vertices[0],E=h.vertices.length,A=h.vertices[E-1],P=h.edges[0];let N=P;do N!==f&&N!==w&&this.edgeExceedsShortLineThreshold(N,i)&&(f&&this._checkEdgeForParalleLines(N,f.leftVertex.pos,t,y,i,r),w&&this._checkEdgeForParalleLines(N,w.rightVertex.pos,t,y,i,r),s===S?this._checkEdgeForParalleLines(N,A.pos,t,y,i,r):s===A&&this._checkEdgeForParalleLines(N,S.pos,t,y,i,r)),N=N.rightVertex.rightEdge;while(N&&N!==P);return r}_checkEdgeForParalleLines(t,i,r,s,h,y){const f=t.leftVertex.pos,w=t.rightVertex.pos;if($0(this._tmpProjection,i,f,w),Za(this._tmpProjection,i)<iu.parallelLineThreshold)return;$0(this._tmpProjection,r,f,w,i);const{coordinateHelper:S,elevationInfo:E,pointer:A}=h,P=S.fromXYZ(this._tmpProjection,S.getZ(r,0));if(Lp(s,xr(P,S,E,this.view))<this.squaredProximityTreshold(A)){if(this._parallelToPreviousCandidate(t,y))return;y.push(new g3e({coordinateHelper:S,referenceLine:t,lineStart:i,targetPoint:P,elevationInfo:E}))}}_parallelToPreviousCandidate(t,i){const r=t.leftVertex.pos,s=t.rightVertex.pos;for(const h of i)if($0(this._tmpProjection,s,h.constraint.start,h.constraint.end,r),Za(this._tmpProjection,s)<iu.parallelLineThreshold)return h.addReferenceLine(t),!0;return!1}}class b3e extends j3{constructor(){super(...arguments),this._tmp=At()}snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.vertices.length,h=[];if(s<2)return h;const y=xr(t,i.coordinateHelper,i.elevationInfo,this.view),f=r.vertices[s-1];this._checkForSnappingCandidate(h,f.leftEdge,f.pos,t,f.leftEdge.leftVertex.pos,f.pos,i,t,y);const w=r.vertices[0];return this._checkForSnappingCandidate(h,w.rightEdge,w.pos,t,w.rightEdge.rightVertex.pos,w.pos,i,t,y),h}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,h=s.component,y=h.vertices.length;if(y<3)return r;const f=xr(t,i.coordinateHelper,i.elevationInfo,this.view),w=s.leftEdge,S=s.rightEdge,E=h.vertices[0],A=h.vertices[y-1];if(!w)return this._checkForSnappingCandidate(r,E.rightEdge.rightVertex.rightEdge,E.rightEdge.rightVertex.pos,t,E.rightEdge.rightVertex.rightEdge.rightVertex.pos,E.rightEdge.rightVertex.pos,i,t,f),r;if(!S)return this._checkForSnappingCandidate(r,A.leftEdge.leftVertex.leftEdge,A.leftEdge.leftVertex.pos,t,A.leftEdge.leftVertex.leftEdge.leftVertex.pos,A.leftEdge.leftVertex.pos,i,t,f),r;if(w&&w.leftVertex.leftEdge){const P=w.leftVertex.leftEdge;this._checkForSnappingCandidate(r,P,w.leftVertex.pos,t,P.leftVertex.pos,w.leftVertex.pos,i,t,f)}if(S&&S.rightVertex.rightEdge){const P=S.rightVertex.rightEdge;this._checkForSnappingCandidate(r,P,S.rightVertex.pos,t,P.rightVertex.pos,S.rightVertex.pos,i,t,f)}return r}_checkForSnappingCandidate(t,i,r,s,h,y,f,w,S){if(!this.edgeExceedsShortLineThreshold(i,f))return;Hi(this._tmp,i.rightVertex.pos,i.leftVertex.pos);const E=Cf(this._tmp[1],-this._tmp[0]),A=Vh(E,Hi(this._tmp,s,r))/Rp(E),{coordinateHelper:P,elevationInfo:N,pointer:F}=f,V=P.fromXYZ(ja(At(),y,E,A),P.getZ(w,0));Lp(S,xr(V,P,N,this.view))<this.squaredProximityTreshold(F)&&t.push(new wU({coordinateHelper:P,targetPoint:V,constraint:new R3(P,y,ja(P.createVector(),y,E,Math.sign(A))),previousVertex:h,otherVertex:y,otherVertexType:K0.CENTER,elevationInfo:N}))}}class w3e extends Lf{constructor({coordinateHelper:t,targetPoint:i,point1:r,point2:s,elevationInfo:h}){super(t,i,new Ym(t,CE(_3e,r,s,.5),.5*zh(r,s)),h),this.p1=r,this.p2=s}get hints(){const t=this.elevationInfo;return[new ea(Qo.REFERENCE,this.targetPoint,this.p1,t),new ea(Qo.REFERENCE,this.targetPoint,this.p2,t),new F3(this.p1,this.targetPoint,this.p2,t)]}}const _3e=At();class x3e extends j3{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=[],h=r.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||h<2)return s;const y=r.vertices[0],f=r.vertices[h-1];return this._processCandidateProposal(y.pos,f.pos,t,i,s),s}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,h=s.component;return h.edges.length<2||(i.editGeometryOperations.data.type!=="polyline"||s.index!==0&&s.index!==h.vertices.length-1)&&this._processCandidateProposal(s.leftEdge.leftVertex.pos,s.rightEdge.rightVertex.pos,t,i,r),r}_processCandidateProposal(t,i,r,s,h){if(!this.exceedsShortLineThreshold(t,i,s))return;const y=CE(At(),t,i,.5),f=.5*zh(t,i),w=ZE(At(),r,y,f),{coordinateHelper:S,elevationInfo:E,pointer:A}=s,P=S.fromXYZ(w,S.getZ(r,0)),N=xr(r,S,E,this.view);Lp(N,xr(P,S,E,this.view))<this.squaredProximityTreshold(A)&&h.push(new w3e({coordinateHelper:S,targetPoint:P,point1:t,point2:i,elevationInfo:E}))}}let i0=class extends qe{constructor(e){super(e),this.updating=!1,this._snappers=new Je}initialize(){this._snappers.push(new v3e(this.view,this.options),new m3e(this.view,this.options),new b3e(this.view,this.options),new x3e(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t){if(!this.options.effectiveSelfEnabled)return[];const i=[];for(const r of this._snappers.items)i.push(...r.snap(e,t));return YE(e,i),i}};g([x({readOnly:!0})],i0.prototype,"updating",void 0),g([x({constructOnly:!0})],i0.prototype,"view",void 0),g([x()],i0.prototype,"options",null),i0=g([K("esri.views.interactive.snapping.SelfSnappingEngine")],i0);function S3e(e,t){return[new i0({view:e,options:t}),new rh({view:e,options:t,spatialReference:e.spatialReference})]}let zc=class extends qe{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};g([x({constructOnly:!0})],zc.prototype,"layer",void 0),g([x()],zc.prototype,"enabled",void 0),g([x()],zc.prototype,"updating",void 0),g([x()],zc.prototype,"availability",void 0),zc=g([K("esri.views.interactive.snapping.SnappingLayerSource")],zc);const M3e=zc;let ls=class extends qe{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new Je,this.distance=iu.distance,this.touchSensitivityMultiplier=iu.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};g([x()],ls.prototype,"enabled",void 0),g([x()],ls.prototype,"enabledToggled",void 0),g([x()],ls.prototype,"selfEnabled",void 0),g([x()],ls.prototype,"featureEnabled",void 0),g([x({type:Je.ofType(M3e)})],ls.prototype,"featureSources",void 0),g([x()],ls.prototype,"distance",void 0),g([x()],ls.prototype,"touchSensitivityMultiplier",void 0),g([x({readOnly:!0})],ls.prototype,"effectiveEnabled",null),g([x({readOnly:!0})],ls.prototype,"effectiveSelfEnabled",null),g([x({readOnly:!0})],ls.prototype,"effectiveFeatureEnabled",null),ls=g([K("esri.views.interactive.snapping.SnappingOptions")],ls);const QE=ls;class eT extends L3{constructor(t,i){super(i),this.intersectionPoint=t}equals(t){return t instanceof eT&&Yo(this.intersectionPoint,t.intersectionPoint)}}class _v extends Lf{constructor(t,i,r,s,h){super(t,i,new Rf(t,i,r.constraint,s.constraint),h),this.first=r,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new eT(this.targetPoint,this.elevationInfo)]}}let Ta=class extends ta.EventedMixin(Ap){constructor(e){super(e),this.options=new QE,this.snappingEnginesFactory=S3e,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}initialize(){this.handles.add([$e(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}},()=>{this.doneSnapping(),this.emit("changed")},Yl),$e(()=>this.options,e=>{for(const t of this._engines)t.options=e},Yl),$e(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t),ys)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:i,options:r}=this;this._engines=t(i,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}async snap(e,t,i){const r=t.coordinateHelper.pointToVector(e),s=await this._fetchCandidates(r,t,i);return{get valid(){return!eo(i)},apply:()=>{const{snappedPoint:h,hints:y}=this._processCandidates(r,s,t);return this._removeVisualization(),Y(t.visualizer)&&this.handles.add(t.visualizer.draw(y,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),xv),h}}}update(e,t){this._removeVisualization();let i=e;const r=[];if(Y(this._currentMainCandidate)){const s=t.coordinateHelper,h=s.pointToVector(e),y=this._currentMainCandidate.constraint.closestTo(h);if(Lp(xr(h,s,t.elevationInfo,this.view),xr(y,s,t.elevationInfo,this.view))<this._squaredPointProximityThreshold(t.pointer)){i=s.vectorToDehydratedPoint(y),this._currentMainCandidate.targetPoint=y,r.push(...this._currentMainCandidate.hints);for(const f of this._currentOtherActiveCandidates)f.targetPoint=y,r.push(...f.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return Y(t.visualizer)&&this.handles.add(t.visualizer.draw(r,{coordinateHelper:t.coordinateHelper,elevationInfo:t.elevationInfo,view:this.view}),xv),i}doneSnapping(){this._removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}_removeVisualization(){this.handles.remove(xv)}async _fetchCandidates(e,t,i){return(await Promise.all(this._engines.map(r=>r.fetchCandidates(e,t,i)))).flat()}_processCandidates(e,t,i){if(t.length<1)return this.doneSnapping(),{snappedPoint:i.coordinateHelper.vectorToDehydratedPoint(e),hints:[]};YE(e,t);const r=this._currentMainCandidate;if(Y(r)){const s=this._findOldConstraintInNewCandidates(r,t);if(s>=0){if(!(t[s]instanceof _v))return this._intersectWithOtherCandidates(s,t,e,i);if(Za(e,r.targetPoint)<this._squaredPointProximityThreshold(i.pointer))return this._updateSnappingCandidate(r,t,i)}}return this._intersectWithOtherCandidates(0,t,e,i)}_findOldConstraintInNewCandidates(e,t){return e instanceof _v?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,i,r){const s=t[e],h=[],y=r.coordinateHelper;for(let f=0;f<t.length;++f){if(f===e)continue;const w=t[f];for(const S of s.constraint.intersect(w.constraint)){const E=y.fromXYZ(S.intersection,s.targetPoint[2]);h.push([new _v(y,E,s,w,w.elevationInfo),Lp(xr(i,r.coordinateHelper,r.elevationInfo,this.view),xr(E,r.coordinateHelper,r.elevationInfo,this.view))])}}return h.length>0&&(h.sort((f,w)=>f[1]-w[1]),h[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(h[0][0],t,r):this._updateSnappingCandidate(s,t,r)}_updateSnappingCandidate(e,t,i){this.doneSnapping(),this._currentMainCandidate=e;const r=this._currentMainCandidate.targetPoint,s=[];s.push(...e.hints);for(const h of t){if(e instanceof _v){if(h.constraint.objectEqual(e.first.constraint)||h.constraint.objectEqual(e.second.constraint))continue}else if(h.constraint.objectEqual(e.constraint))continue;h.constraint.check(r)&&(h.targetPoint=r,this._currentOtherActiveCandidates.push(h),s.push(...h.hints))}return{snappedPoint:i.coordinateHelper.vectorToDehydratedPoint(r),hints:s}}_squaredPointProximityThreshold(e){return e==="touch"?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}_findOldCandidateIndex(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.objectEqual(e[r].constraint)){i=r;break}return i}get test(){return{visualizationsActive:this.handles.has(xv),engines:this._engines}}};g([x({constructOnly:!0})],Ta.prototype,"view",void 0),g([x()],Ta.prototype,"options",void 0),g([x({readOnly:!0})],Ta.prototype,"updating",null),g([x()],Ta.prototype,"snappingEnginesFactory",void 0),g([x()],Ta.prototype,"_engines",void 0),g([x()],Ta.prototype,"squaredMouseProximityTreshold",null),g([x()],Ta.prototype,"squaredTouchProximityThreshold",null),Ta=g([K("esri.views.interactive.snapping.SnappingManager")],Ta);const xv="visualization-handle";function E3e(e){return Y(e)&&e.type==="graphic"}function T3e(e){var t;return(t=e.find(E3e))!=null?t:null}let Cr=class extends ta.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};g([x()],Cr.prototype,"activeComponent",void 0),g([x()],Cr.prototype,"cancelled",void 0),g([x()],Cr.prototype,"history",void 0),g([x()],Cr.prototype,"tool",null),g([x()],Cr.prototype,"type",void 0),g([x()],Cr.prototype,"canUndo",null),g([x()],Cr.prototype,"canRedo",null),g([x()],Cr.prototype,"onEnd",void 0),g([x()],Cr.prototype,"undo",null),g([x()],Cr.prototype,"redo",null),g([x()],Cr.prototype,"toggleTool",void 0),g([x()],Cr.prototype,"addToSelection",void 0),g([x()],Cr.prototype,"removeFromSelection",void 0),Cr=g([K("esri.widgets.Sketch.support.OperationHandle")],Cr);let K9=class extends Cr{};g([x()],K9.prototype,"activeComponent",void 0),K9=g([K("esri.widgets.Sketch.support.CreateOperationHandle")],K9);let jl=class extends Cr{constructor(e){super(e)}};g([x()],jl.prototype,"activeComponent",void 0),jl=g([K("esri.widgets.Sketch.support.UpdateOperationHandle")],jl);const xU="esri.widgets.Sketch.SketchViewModel",$3e=Le.getLogger(xU),iO={defaultZ:0},Sv={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let oi=class extends ta.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new er,this._internalGraphicsLayer=new UE({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new er,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new FG,this.layer=null,this.pointSymbol=new Jo({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Ja({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Yn({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new jG,this.updateGraphics=new Je,this.updateOnGraphicClick=!0,this.updatePointSymbol=new Jo({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new Ja({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new Yn({color:[12,207,255],width:2}),this.vertexSymbol=new Jo({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=iO,this.defaultUpdateOptions=Sv,this.snappingOptions=new QE}initialize(){this._handles.add([ro(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),ro(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(Y(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),$e(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.elevationInfo)!=null?t:null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},ys),$e(()=>this.view,e=>{Pr(this._snappingManager),e&&(this._snappingManager=new Ta({view:e,options:this.snappingOptions}),e.type==="2d"?ge(()=>import("./editingTools.34edfc35.js"),["assets/editingTools.34edfc35.js","assets/SnappingVisualizer2D.ae6302e2.js","assets/enums.05a6ea95.js","assets/settings.a33937e7.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js"]):e.type==="3d"&&(ge(()=>import("./editingTools.ee901d5c.js").then(t=>t.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]),ge(()=>import("./GraphicsLayerView3D.77d8f84c.js").then(t=>t.G),["assets/GraphicsLayerView3D.77d8f84c.js","assets/NativeLineMaterial.2ca4252c.js","assets/vec3f32.0772c8d8.js","assets/plane.f3b639d8.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/requestImageUtils.4ea1aefd.js","assets/enums.de935fa5.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/geometryDataUtils.337d3a34.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/VertexAttribute.5551e0d8.js","assets/VertexArrayObject.4198c73f.js","assets/VertexElementDescriptor.d386088d.js","assets/BufferView.9de22bcf.js","assets/quat.2f83a288.js","assets/InterleavedLayout.e9290885.js","assets/types.28f12cac.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/earcut.d30cbec0.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/Octree.5f16cd20.js","assets/boundedPlane.2500e48f.js","assets/glUtil.345a77b1.js","assets/dehydratedFeatures.98692fb8.js","assets/optimizedFeatureQueryEngineAdapter.2ee1d3de.js","assets/centroid.641b4e25.js","assets/vec33.3d48e3ad.js","assets/objectResourceUtils.4c6802f7.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/DefaultMaterial_COLOR_GAMMA.bcf83e8a.js","assets/callExpressionWithFeature.620cb82f.js","assets/MeshComponent.dab05eed.js","assets/projection.10917aac.js","assets/PooledRBush.84072bba.js","assets/geometryServiceUtils.c5056942.js","assets/LayerView.cbd5bd2c.js"])))},ys),$e(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})])}destroy(){this.cancel(),this._handles=Pr(this._handles),this._viewHandles=Pr(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=Pr(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return this.view.type==="3d"?"move":"transform"}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return!Y(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...iO,...e})}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...Sv,...e,reshapeOptions:{...Sv.reshapeOptions,...e==null?void 0:e.reshapeOptions}})}set snappingOptions(e){Y(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var i;const e=!(!((i=this.view)!=null&&i.ready)||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:r,map:s}=t;r&&(t.cursor=null),s&&s.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),e&&this._handles.add(sn(()=>e.ready,r=>{this._viewHandles.removeAll(),r&&this._viewHandles.add(this._generateViewHandles(e))},ys),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=pp(this._moduleLoaderAbortController),this._viewReadyAbortController=pp(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){const{activeTool:i,layer:r}=this,s=t.toArray();r.removeMany(s),this.cancel(),this._emitDeleteEvent({graphics:s,tool:i})}}async create(e,t){if(this.cancel(),await this._waitViewReady(),this.state==="disabled")throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),bi();if(Y(this.view.activeTool)&&(this.view.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");LC(this.view,this._internalGraphicsLayer);const i=await this._setupCreateOperation(e,t);if(oe(i)||this.destroyed)return void this.view.map.remove(this._internalGraphicsLayer);const r=()=>{if(i===this._operationHandle){const s=this.createGraphic,h=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||s==null||this.layer.add(s),this.emit("create",{graphic:s,state:h?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};i.on("complete",r),this._operationHandle=i,this.view.ready&&Eme(this.view)&&this.view.focus()}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:s}=this;if(s==="disabled")throw r||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),i||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),bi();Y(this.view.activeTool)&&(this.view.activeTool=null);const h=Array.isArray(e)?e:[e];if(e==null||!h||!h.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(h.some(f=>f.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!oe(f.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const y=await this._setupUpdateOperation(h,t);this.destroyed||oe(y)||tr(y)||(LC(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(y,t),this.emit("update",{graphics:h,state:"start",aborted:!1,tool:y.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const t of e)Y(t.geometry)&&t.geometry.type!=="mesh"&&!ki(t.geometry.spatialReference,this.view.spatialReference)&&(Ka(t.geometry.spatialReference,this.view.spatialReference)||Zl()||await Xl(),t.geometry=Dh(t.geometry,this.view.spatialReference));this._endAsyncOperation()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=this.view;if(t.type==="2d"){const s=[];this.view.map.allLayers.forEach(y=>{y.type!=="vector-tile"&&y.type!=="imagery"||s.push(y)});const h=await this.view.hitTest(e,{exclude:s});return T3e(h.results)}const i=[this.view.map.ground];t.map.allLayers.forEach(s=>{s.type==="integrated-mesh"&&i.push(s)});const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const s=r.results[0];if(Y(s)&&s.type==="graphic"&&s.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-Gr(s.distance,0)>-Math.min(3*r.ground.distance,t.viewingMode==="global"?l7(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return s}return null}_generateViewHandles(e){return[e.on("immediate-click",async t=>{const i=this.state==="active"&&this._operationHandle.type==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async(()=>this._getFirstHit(Gs(t)));let s=null;if(Y(r)){const h=r.graphic;this.updateGraphics.includes(h)||h.layer===this.layer?(t.stopPropagation(),s=h):e.type!=="2d"||this._isComponentGraphic(h)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();Y(s)&&!this.updateGraphics.includes(s)&&await this.update([s],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},ri.WIDGET)]}async _setupCreateOperation(e,t){const i={hasZ:this.view.type==="3d",...this.defaultCreateOptions,...t},r=await this._setupDrawGraphicTool(e,this.view,i);return oe(r)?null:(this.view.tools.add(r),this.view.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(e,t,i){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const r=e!=="rectangle",s=e!=="rectangle";this.snappingOptions.enabledToggled=!1;const h={view:t,mode:e==="rectangle"||e==="circle"?"hybrid":"click",...i,snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:s,centered:r};return this.view.type==="2d"?this._makeDrawGraphicTool2D(h):this._makeDrawGraphicTool3D(h)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(ge(()=>import("./editingTools.34edfc35.js"),["assets/editingTools.34edfc35.js","assets/SnappingVisualizer2D.ae6302e2.js","assets/enums.05a6ea95.js","assets/settings.a33937e7.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js"]));return tr(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:I3e(e.geometryType)?this.activeFillSymbol:null})}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(ge(()=>import("./editingTools.ee901d5c.js").then(r=>r.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]));if(tr(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:i,snapToScene:!Y(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(e){let t=null;const i=e.forceUniformSize,r=e.centered,s=[this.view.on("key-down",y=>{if(y.key===ti.pan)y.stopPropagation(),y.repeat||(e.enabled=!1);else if(y.key===ti.complete)y.stopPropagation(),e.completeCreateOperation();else if(y.key!==ti.vertexAdd||y.repeat)y.key===ti.undo?(y.stopPropagation(),h.undo()):y.key===ti.redo?(y.stopPropagation(),h.redo()):y.key!==ti.snappingToggle||e.geometryType==="rectangle"||e.geometryType==="circle"||y.repeat?y.key!==ti.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||y.repeat?y.key===ti.center&&(y.repeat||(e.centered=!r,y.stopPropagation())):(e.forceUniformSize=!i,y.stopPropagation()):(this.snappingOptions.enabledToggled=!0,y.stopPropagation());else{const f=e.drawOperation.geometryType;f!=="polyline"&&f!=="polygon"&&f!=="multipoint"||(y.stopPropagation(),e.drawOperation.commitStagedVertex())}},ri.WIDGET),this.view.on("key-up",y=>{y.key===ti.pan?e.enabled=!0:y.key===ti.snappingToggle&&e.geometryType!=="rectangle"&&e.geometryType!=="circle"?(this.snappingOptions.enabledToggled=!1,y.stopPropagation()):y.key!==ti.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?y.key===ti.center&&(e.centered=r,y.stopPropagation()):(e.forceUniformSize=i,y.stopPropagation())},ri.WIDGET),e.on("vertex-add",y=>{switch(t=oe(t)?"start":"active",y.operation){case"apply":this.emit("create",{graphic:e.graphic,state:t,tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",y=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:y.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",y=>{switch(y.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:y,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",y=>{this._set("createGraphic",y.graphic),t="complete",y.aborted?h&&h.cancel():h&&h.complete()}),$e(()=>this._getGraphicSymbolFromTool(e.geometryType),y=>{e.graphicSymbol=y})],h=new Cr({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var y;s.forEach(f=>f.remove()),s.length=0,(y=this.view.tools)==null||y.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return h}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;default:return null}}async _setupUpdateOperation(e,t){const{layer:i,view:r}=this,s={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t==null?void 0:t.reshapeOptions}};let h=s.tool;for(const y of e)i.remove(y),i.add(y);if(r.type==="3d"){if(e.length===0)return null;switch(h){case"move":return this._setupMove3DOperation(e,s,r,h);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const y=bv(e[0]);return y===Xt.SUPPORTED?this._setupReshape3DOperation(e[0],s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${G9(y)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,s,r)}}switch(h){case"move":return this._setupMove2DOperation(e,s,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const y=bv(e[0]);return y===Xt.SUPPORTED?this._setupTransformOrReshape2DOperation(e,h,s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${G9(y)}).`),null)}case"transform":if(e.length===1){const y=Jb(e[0].geometry,"type");y!=="point"&&y!=="multipoint"||(h="reshape")}return this._setupTransformOrReshape2DOperation(e,h,s,r)}}async _setupMove3DOperation(e,t,i,r,s=!1){for(const S of e){const E=kwe(S);if(E!==Xt.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${G9(E)}).`),null}const h=await this._requireModule(ge(()=>import("./editingTools.ee901d5c.js").then(S=>S.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]));if(tr(h))return h;const y=new h.module.GraphicMoveTool({view:i,enableZ:t.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(y),y.graphics.addMany(e),s||this.updateGraphics.addMany(e);const f=[],w=new jl({activeComponent:y,tool:r,type:"update",onEnd:()=>{var S;f.forEach(E=>E.remove()),f.length=0,(S=this.view.tools)==null||S.remove(y),y.destroyed||y.destroy()},undo:()=>{Mv(w,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{Ev(w,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:S=>{this.updateGraphics.push(S),y.graphics.push(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:S=>{const E=this.updateGraphics.indexOf(S);w.history.undo.forEach(A=>A.updates.splice(E,1)),w.history.redo.forEach(A=>A.updates.splice(E,1)),this.updateGraphics.remove(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?y.graphics.remove(S):w.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||r!=="transform")return;const S=this.updateGraphics.getItemAt(0);if(bv(S)!==Xt.SUPPORTED)return;const E=await this._setupReshape3DOperation(S,t,i,!0);tr(E)||(w.onEnd(),w.destroy(),this._setUpdateOperationHandle(E,t))}});return f.push(...this._getHandlesForComponent(w,t),this.view.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(w,S,t),ri.WIDGET),i.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(w,S),S.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!0,S.stopPropagation())},ri.WIDGET),i.on("key-up",S=>{S.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!1,S.stopPropagation())},ri.WIDGET)),w}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(e.length===1&&Lwe(e[0])===Xt.SUPPORTED){const s=e[0],h=s.geometry;if(Y(h)&&(h.type==="point"||h.type==="mesh"))return this._setupPointTransform3DOperation(s,t,i);if(Y(h)&&(h.type==="polygon"||h.type==="polyline"))return this._setupPolyTransform3DOperation(s,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:s,enableScaling:h,enableZ:y}=t,f=await this._requireModule(ge(()=>import("./editingTools.ee901d5c.js").then(A=>A.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]));if(tr(f))return f;const w=new f.module.GraphicTransformTool({graphic:e,view:i,enableRotation:s,enableScaling:h,enableZ:y,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(w),this.updateGraphics.add(e);const S=[],E=new jl({activeComponent:w,tool:r,type:"update",onEnd:()=>{var A;S.forEach(P=>P.remove()),S.length=0,(A=this.view.tools)==null||A.remove(w),w.destroyed||w.destroy()},undo:()=>{Mv(E,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{Ev(E,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async A=>{this.updateGraphics.add(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[A],removed:[],type:"selection-change"},type:"update"});const P=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);tr(P)||(E.onEnd(),E.destroy(),this._setUpdateOperationHandle(P,t))},removeFromSelection:A=>{this.updateGraphics.remove(A),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[A],type:"selection-change"},type:"update"}),E.complete()},toggleTool:()=>{}});return S.push(...this._getHandlesForComponent(E,t),this.view.on("immediate-click",A=>this._getCommonUpdateOperationClickHandlers(E,A,t),ri.WIDGET),i.on("key-down",A=>{this._getCommonUpdateOperationKeyDownHandlers(E,A),A.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!0,A.stopPropagation())},ri.WIDGET),i.on("key-up",A=>{A.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!1,A.stopPropagation())},ri.WIDGET)),E}async _setupPolyTransform3DOperation(e,t,i,r=!1){const s="transform",{enableRotation:h,enableScaling:y,enableZ:f,preserveAspectRatio:w}=t,S=await this._requireModule(ge(()=>import("./editingTools.ee901d5c.js").then(N=>N.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]));if(tr(S))return S;const E=new S.module.ExtentTransformTool({graphic:e,view:i,enableRotation:h,enableScaling:y,enableZ:f,preserveAspectRatio:w,tooltipOptions:this.tooltipOptions});this.view.tools.add(E),r||this.updateGraphics.add(e);const A=[],P=new jl({activeComponent:E,tool:s,type:"update",onEnd:()=>{var N;A.forEach(F=>F.remove()),A.length=0,(N=this.view.tools)==null||N.remove(E),E.destroyed||E.destroy()},canUndo:()=>E.canUndo,undo:()=>{E.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>E.canRedo,redo:()=>{E.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async N=>{this.updateGraphics.add(N),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[N],removed:[],type:"selection-change"},type:"update"});const F=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);tr(F)||(P.onEnd(),P.destroy(),this._setUpdateOperationHandle(F,t))},removeFromSelection:N=>{this.updateGraphics.remove(N),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[N],type:"selection-change"},type:"update"}),P.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;const N=this.updateGraphics.getItemAt(0);if(bv(N)!==Xt.SUPPORTED)return;const F=await this._setupReshape3DOperation(N,t,i,!0);tr(F)||(P.onEnd(),P.destroy(),this._setUpdateOperationHandle(F,t))}});return A.push(...this._getHandlesForComponent(P,t),this.view.on("immediate-click",N=>this._getCommonUpdateOperationClickHandlers(P,N,t),ri.WIDGET),this.view.on("key-down",N=>this._getCommonUpdateOperationKeyDownHandlers(P,N),ri.WIDGET),this.view.on("key-down",N=>{N.key!==ti.constraint||N.repeat||(E.preserveAspectRatio=!E.preserveAspectRatio,N.stopPropagation())},ri.WIDGET),this.view.on("key-up",N=>{N.key===ti.constraint&&(E.preserveAspectRatio=!E.preserveAspectRatio,N.stopPropagation())},ri.WIDGET)),P}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=await this._getGraphicMover(e,t,i);if(tr(s))return s;const h=new jl({activeComponent:s,tool:r,type:"update",onEnd:()=>{var S;this._displayDefaultCursor(),w.forEach(E=>E.remove()),f.forEach(E=>E.remove()),w=[],f=[],s.destroy(),(S=this._internalGraphicsLayer)==null||S.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const S=this.updateGraphics.toArray();Mv(h,S),h.refreshComponent(),this._emitUndoEvent({graphics:S,tool:r})},redo:()=>{const S=this.updateGraphics.toArray();Ev(h,S),h.refreshComponent(),this._emitRedoEvent({graphics:S,tool:r})},addToSelection:async S=>{await this._updateSpatialReference(S),this.updateGraphics.push(S),s.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:S=>{const E=this.updateGraphics.indexOf(S);h.history.undo.forEach(P=>P.updates.splice(E,1)),h.history.redo.forEach(P=>P.updates.splice(E,1)),this.updateGraphics.remove(S);const A=this.updateGraphics.toArray();this.emit("update",{graphics:A,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?s.graphics=A:h.complete()}});let y=!1,f=[i.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(h,S,t),ri.WIDGET),i.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(h,S),S.key!==ti.constraint||S.repeat||(y=!0,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},ri.WIDGET),i.on("key-up",S=>{S.key===ti.constraint&&y&&(y=!1,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},ri.WIDGET)],w=this._getHandlesForComponent(h,t);return h}async _setupReshape3DOperation(e,t,i,r=!1){const s="reshape",h=await this._requireModule(ge(()=>import("./editingTools.ee901d5c.js").then(S=>S.e),["assets/editingTools.ee901d5c.js","assets/drawSurfaces.e22da837.js","assets/quat.2f83a288.js","assets/quatf64.ddec7ef6.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/drawUtils.fc519f2d.js","assets/earcut.d30cbec0.js","assets/triangle.70405bec.js","assets/lineSegment.901d4e43.js","assets/dehydratedFeatures.98692fb8.js","assets/vec4f32.8f10672a.js","assets/Octree.5f16cd20.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.e9290885.js","assets/BufferView.9de22bcf.js","assets/types.28f12cac.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.b7dc351c.js","assets/Texture.599541db.js","assets/requestImageUtils.4ea1aefd.js","assets/geometryDataUtils.337d3a34.js","assets/VertexArrayObject.4198c73f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.2ca4252c.js","assets/floatRGBA.b2358e75.js","assets/triangulationUtils.27ba054b.js","assets/deduplicate.c1f3fafb.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.2500e48f.js","assets/colorUtils.9445c15b.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/axisAngleDegrees.16b78055.js","assets/persistable.1aa521e0.js"]));if(tr(h))return h;this.snappingOptions.enabledToggled=!1;const y=new h.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:t.enableZ&&t.reshapeOptions.vertexOperation==="move",enableZShape:t.enableZ&&t.reshapeOptions.shapeOperation==="move",enableMoveGraphic:t.reshapeOptions.shapeOperation==="move"||t.reshapeOptions.shapeOperation==="move-xy",enableMidpoints:t.reshapeOptions.edgeOperation==="split",enableEdgeOffset:t.reshapeOptions.edgeOperation==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(y),r||this.updateGraphics.add(e);const f=[],w=new jl({activeComponent:y,tool:s,type:"update",onEnd:()=>{var S;f.forEach(E=>E.remove()),f.length=0,(S=this.view.tools)==null||S.remove(y),y.destroyed||y.destroy()},canUndo:()=>y.canUndo,undo:()=>{y.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>y.canRedo,redo:()=>{y.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async S=>{this.updateGraphics.add(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"});const E=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);tr(E)||(w.onEnd(),w.destroy(),this._setUpdateOperationHandle(E,t))},removeFromSelection:S=>{this.updateGraphics.remove(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),w.complete()},toggleTool:async()=>{if(t.toggleToolOnClick===!1)return;const S=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);tr(S)||(w.onEnd(),w.destroy(),this._setUpdateOperationHandle(S,t))}});return f.push(...this._getHandlesForComponent(w,t),i.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(w,S,t),ri.WIDGET),i.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(w,S),S.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!0,S.stopPropagation())},ri.WIDGET),i.on("key-up",S=>{S.key===ti.snappingToggle&&(this.snappingOptions.enabledToggled=!1,S.stopPropagation())},ri.WIDGET)),w}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=t==="transform"?await this._getBox(e,i,r):await this._getReshape(e,i,r);if(tr(s))return s;const h=new jl({activeComponent:s,type:"update",onEnd:()=>{f.forEach(w=>w.remove()),y.forEach(w=>w.remove()),f=[],y=[],h.activeComponent&&!h.activeComponent.destroyed&&h.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Mv(h,this.updateGraphics.toArray()),h.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:h.tool})},redo:()=>{Ev(h,this.updateGraphics.toArray()),h.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:h.tool})},addToSelection:async w=>{let S=h.activeComponent;if(S.type==="reshape"){const E=[...this.updateGraphics,w];this.updateGraphics.removeAll();const A=await this._setupMove2DOperation(E,i,r);if(tr(A))return;h.onEnd(),h.destroy(),this._setUpdateOperationHandle(A,i)}else this.updateGraphics.add(w),S.graphics=this.updateGraphics.toArray(),S.refresh(),h.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[w],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async w=>{const S=this.updateGraphics.indexOf(w);h.history.undo.forEach(A=>A.updates.splice(S,1)),h.history.redo.forEach(A=>A.updates.splice(S,1)),this.updateGraphics.remove(w);const E=this.updateGraphics.toArray();if(E.length===0)h.complete();else{const A=E[0].geometry;E.length!==1||!Y(A)||A.type!=="point"&&A.type!=="multipoint"?h.activeComponent.graphics=E:h.toggleTool()}this.emit("update",{graphics:E,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[w],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const w=this.updateGraphics.getItemAt(0),S=w.geometry;if(Y(S)&&(h.tool==="reshape"&&(S.type==="point"||S.type==="multipoint")||h.tool==="transform"&&S.type==="extent"))return;let E=null;h.tool==="transform"?E=await this._getReshape([w],i,r):h.tool==="reshape"&&(E=await this._getBox([w],i,r)),tr(E)||(h.activeComponent.destroy(),h.activeComponent=E,h.activeComponent&&(f.forEach(A=>A.remove()),f=this._getHandlesForComponent(h,i)))}});let y=[r.on("immediate-click",w=>this._getCommonUpdateOperationClickHandlers(h,w,i),ri.WIDGET),r.on("key-down",w=>{if(this._getCommonUpdateOperationKeyDownHandlers(h,w),w.key!==ti.snappingToggle||w.repeat||(this.snappingOptions.enabledToggled=!0,w.stopPropagation()),w.key===ti.constraint&&!w.repeat&&h){const S=h.activeComponent;S&&S.type==="box"&&(S.preserveAspectRatio=!S.preserveAspectRatio)}},ri.WIDGET),r.on("key-up",w=>{var S;if(w.key===ti.snappingToggle&&((S=h==null?void 0:h.activeComponent)==null?void 0:S.type)==="reshape"&&(this.snappingOptions.enabledToggled=!1,w.stopPropagation()),w.key===ti.constraint&&h){const E=h.activeComponent;E&&E.type==="box"&&(E.preserveAspectRatio=!E.preserveAspectRatio)}},ri.WIDGET)],f=this._getHandlesForComponent(h,i);return h}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r}=t,s=await this._requireModule(ge(()=>import("./GraphicMover.5800177d.js").then(h=>h.G),["assets/GraphicMover.5800177d.js","assets/drawUtils.fc519f2d.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js"]));return tr(s)?s:new s.module.default({enableMoveAllGraphics:r,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:h,dy:y,graphic:f})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:h,dy:y,mover:f,type:"move-start"},type:"update"})},onGraphicMove:({dx:h,dy:y,graphic:f})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:h,dy:y,mover:f,type:"move"},type:"update"}),onGraphicMoveStop:({dx:h,dy:y,graphic:f})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:h,dy:y,mover:f,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){const{enableRotation:r,enableScaling:s,preserveAspectRatio:h}=t,y=await this._requireModule(ge(()=>import("./Box.847abf4c.js"),["assets/Box.847abf4c.js","assets/drawUtils.fc519f2d.js","assets/GraphicMover.5800177d.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js","assets/settings.a33937e7.js"]));return tr(y)?y:new y.module.default({graphics:e,enableRotation:r,enableScaling:s,preserveAspectRatio:h,layer:this._internalGraphicsLayer,view:i,callbacks:{onMoveStart:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onMove:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onMoveStop:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onScaleStart:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onScale:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onScaleStop:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onRotateStart:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onRotate:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"}),onRotateStop:f=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...f},type:"update"})}})}async _getReshape(e,t,i){var y,f;const r=((y=t.reshapeOptions)==null?void 0:y.edgeOperation)==="split",s=((f=t.reshapeOptions)==null?void 0:f.shapeOperation)==="move",h=await this._requireModule(ge(()=>import("./Reshape.51209fb0.js"),["assets/Reshape.51209fb0.js","assets/SnappingVisualizer2D.ae6302e2.js","assets/enums.05a6ea95.js","assets/settings.a33937e7.js","assets/SnappingContext.24f379b6.js","assets/PointSnappingHint.427009a4.js","assets/plane.f3b639d8.js","assets/sphere.f1597b20.js","assets/vectorStacks.f85d4a03.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.84d5c445.js","assets/drawUtils.fc519f2d.js","assets/GraphicMover.5800177d.js","assets/GraphicManipulator.81a13ed3.js","assets/drapedUtils.765e9a9c.js"]));return tr(h)?h:new h.module.default({enableMidpoints:r,enableMovement:s,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:i,callbacks:{onReshapeStart:w=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...w},type:"update"}),onReshape:w=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...w},type:"update"}),onReshapeStop:({mover:w,type:S})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:w,type:S},type:"update"}),onMoveStart:({dx:w,dy:S,mover:E,type:A})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:w,dy:S,mover:E,type:A},type:"update"}),onMove:({dx:w,dy:S,mover:E,type:A})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:w,dy:S,mover:E,type:A},type:"update"}),onMoveStop:({dx:w,dy:S,mover:E,type:A})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:w,dy:S,mover:E,type:A},type:"update"}),onVertexAdd:({added:w,type:S,vertices:E})=>{const A=w.map(P=>M$(P.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:A,vertices:E,type:S},type:"update"})},onVertexRemove:({removed:w,type:S,vertices:E})=>{const A=w.map(P=>M$(P.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:A,vertices:E,type:S},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:s})=>{var h;(h=s.native)!=null&&h.shiftKey&&(s.stopPropagation(),e.removeFromSelection(r))}),i.on("graphic-move-start",r=>e.addToHistory(ul(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(ul(r.graphics))),i.on("rotate-start",r=>e.addToHistory(ul(r.graphics))),i.on("scale-start",r=>e.addToHistory(ul(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(ul([r.mover]))),i.on("reshape-start",r=>e.addToHistory(ul([r.graphic]))),i.on("vertex-add",r=>e.addToHistory(ul([r.oldGraphic]))),i.on("vertex-remove",r=>e.addToHistory(ul([r.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",r=>{e.addToHistory(ul(r.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:r})=>{e.addToHistory({updates:[r]})}),i.on("graphic-translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];default:return}}_onTransformOrReshape2DGraphicClick(e,t,i){var h;const{graphic:r,viewEvent:s}=i;return((h=s.native)==null?void 0:h.shiftKey)&&r.layer===this.layer?(s.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(s.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const i=this.view.map;this._disablePopup(t);const r=()=>{if(e===this._operationHandle){const s=this.updateGraphics.toArray(),h=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:s,state:"complete",aborted:e.cancelled,tool:h,toolEventInfo:null,type:"update"})}};e.on("complete",r)}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=Gs(t),s=await t.async(()=>this._getFirstHit(r));if(oe(s))return void e.complete();if(t.native.shiftKey&&this._toggleSelection([s.graphic],e,i))return void t.stopPropagation();this.updateGraphics.includes(s.graphic)?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some(s=>s!=null&&!(!r||s.layer!==this.layer)&&(this.updateGraphics.includes(s)?t.removeFromSelection(s):t.addToSelection(s),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===ti.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===ti.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===ti.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&ti.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;const t=this.activeComponent,i=this.updateGraphics.toArray();oe(t)||t.type==="reshape-3d"||(t.type!=="reshape"||i.length===1&&Jb(i[0].geometry,"type")==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=Pr(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||oe(t))&&(e.attributes&&e.attributes.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,i){$3e.error(new ne(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:Sv}}wait(){return kh(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t;return((t=this.view)==null?void 0:t.type)!=="3d"||this.updateOnGraphicClick||Y(e)&&e.toggleToolOnClick}_disablePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&oe(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){if(!this._disablePopupEnabled(e))return;const t=this.view.popup;t&&Y(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const e=this.view;e&&(pp(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await cP(kh(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal))}};function I3e(e){return e==="polygon"||e==="rectangle"||e==="circle"}function Mv(e,t){SU("undo",e.history.undo,e.history.redo,t)}function Ev(e,t){SU("redo",e.history.redo,e.history.undo,t)}function SU(e,t,i,r){const s=t.pop().updates,h=[];r.forEach((y,f)=>{const w=s[f];w!=null&&("geometry"in w&&Y(w.geometry)&&(h.push({geometry:y.geometry}),y.geometry=w.geometry),"symbol"in w&&Y(w.symbol)&&(h.push({symbol:y.symbol}),y.symbol=w.symbol),"undo"in w&&(h.push(w),w[e](y)))}),i.push({updates:h})}function ul(e){return{updates:e.map(t=>({geometry:t.geometry}))}}function tr(e){return"requireError"in e&&e.requireError==="aborted"}g([x()],oi.prototype,"updating",null),g([x()],oi.prototype,"_operationHandle",void 0),g([x({readOnly:!0})],oi.prototype,"activeTool",null),g([x()],oi.prototype,"activeFillSymbol",void 0),g([x()],oi.prototype,"activeLineSymbol",void 0),g([x()],oi.prototype,"activeVertexSymbol",void 0),g([x()],oi.prototype,"allowDeleteKey",void 0),g([x({readOnly:!0})],oi.prototype,"createGraphic",null),g([x()],oi.prototype,"defaultCreateOptions",null),g([x()],oi.prototype,"defaultUpdateOptions",null),g([x({type:FG,nonNullable:!0})],oi.prototype,"labelOptions",void 0),g([x()],oi.prototype,"layer",void 0),g([x({types:zn})],oi.prototype,"pointSymbol",void 0),g([x({types:zn})],oi.prototype,"polygonSymbol",void 0),g([x({types:zn})],oi.prototype,"polylineSymbol",void 0),g([x({type:QE,nonNullable:!0})],oi.prototype,"snappingOptions",null),g([x()],oi.prototype,"_snappingManager",void 0),g([x({readOnly:!0})],oi.prototype,"state",null),g([x({type:jG,nonNullable:!0})],oi.prototype,"tooltipOptions",void 0),g([x({readOnly:!0})],oi.prototype,"updateGraphics",void 0),g([x()],oi.prototype,"updateOnGraphicClick",void 0),g([x({types:zn})],oi.prototype,"updatePointSymbol",void 0),g([x({types:zn})],oi.prototype,"updatePolygonSymbol",void 0),g([x({types:zn})],oi.prototype,"updatePolylineSymbol",void 0),g([x({types:zn})],oi.prototype,"vertexSymbol",void 0),g([x({value:null})],oi.prototype,"view",null),oi=g([K(xU)],oi);const A3e=oi,MU="esri.widgets.Slider.SliderViewModel",k3e=Le.getLogger(MU);let dn=class extends qe{constructor(e){super(e),this.precision=4,this.thumbsConstrained=!0}set effectiveMax(e){this.setEffectiveMax(e)}set effectiveMin(e){this.setEffectiveMin(e)}set labelFormatFunction(e){this._set("labelFormatFunction",e)}set inputFormatFunction(e){this._set("inputFormatFunction",e)}set inputParseFunction(e){this._set("inputParseFunction",e)}get labels(){const{max:e,min:t,values:i}=this,r=i&&i.length?i.map((s,h)=>this.getLabelForValue(s,"value",h)):[];return{max:this.getLabelForValue(e,"max"),min:this.getLabelForValue(t,"min"),values:r}}set max(e){this.setMax(e)}set min(e){this.setMin(e)}get state(){const{max:e,min:t}=this;return Y(e)&&Y(t)&&e>t?"ready":"disabled"}set values(e){const{max:t,min:i}=this,r=this.values;r&&e&&r.length===e.length&&r.every((s,h)=>s===e[h])||(this._set("values",null),e&&e.length&&(Y(i)&&e.some(s=>s<i)&&(this.min=Math.min(...e)),Y(t)&&e.some(s=>s>t)&&(this.max=Math.max(...e))),this._set("values",e))}toPrecision(e){return parseFloat(e.toFixed(this.precision))}defaultLabelFormatFunction(e){const{max:t,min:i,precision:r}=this,s=t-i>10?2:r;return parseFloat(e.toFixed(s)).toString()}defaultInputFormatFunction(e){return e.toString()}defaultInputParseFunction(e){return parseFloat(e)}getBounds(){const{effectiveMax:e,effectiveMin:t,max:i,min:r}=this;return{min:Y(t)?Math.max(r,t):r,max:Y(e)?Math.min(i,e):i}}getBoundsForValueAtIndex(e){const{thumbsConstrained:t,values:i}=this,{min:r,max:s}=this.getBounds();if(t){const h=e-1,y=e+1;return{min:Y(i[h])?i[h]:r,max:Y(i[y])?i[y]:s}}return{min:r,max:s}}getLabelForValue(e,t,i){return oe(e)?null:this.labelFormatFunction?this.labelFormatFunction(e,t,i):this.defaultLabelFormatFunction(e)}setMax(e){const{max:t,values:i}=this;if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'max' is NaN.");if(e===null)return void this._set("max",null);const r=this.toPrecision(e);if(t!==r&&(this._set("max",r),i&&i.length))for(let s=0;s<i.length;s++)r<i[s]&&this.setValue(s,r)}setMin(e){const{min:t,values:i}=this;if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'min' is NaN.");if(e===null)return void this._set("min",null);const r=this.toPrecision(e);if(t!==r&&(this._set("min",r),i&&i.length))for(let s=0;s<i.length;s++)r>i[s]&&this.setValue(s,r)}setEffectiveMax(e){if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMax' is NaN.");if(e===null)return void this._set("effectiveMax",null);const t=this.toPrecision(e);this.effectiveMax!==t&&this._set("effectiveMax",this._applyBoundsToValue(t))}setEffectiveMin(e){if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMin' is NaN.");if(e===null)return void this._set("effectiveMin",null);const t=this.toPrecision(e);this.effectiveMin!==t&&this._set("effectiveMin",this._applyBoundsToValue(t))}setValue(e,t){if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is NaN.");const{values:i}=this,r=i[e],s=this.toPrecision(t);if(r===s)return;const h=[...i];h[e]=s,this._set("values",h),this.notifyChange("labels")}_applyBoundsToValue(e){const{max:t,min:i}=this;return Y(i)&&e<i?i:Y(t)&&e>t?t:e}_logError(e,t,i){k3e.error(new ne(e,t,i))}};g([x()],dn.prototype,"effectiveMax",null),g([x()],dn.prototype,"effectiveMin",null),g([x()],dn.prototype,"labelFormatFunction",null),g([x()],dn.prototype,"inputFormatFunction",null),g([x()],dn.prototype,"inputParseFunction",null),g([x({readOnly:!0})],dn.prototype,"labels",null),g([x()],dn.prototype,"max",null),g([x()],dn.prototype,"min",null),g([x()],dn.prototype,"precision",void 0),g([x({readOnly:!0})],dn.prototype,"state",null),g([x()],dn.prototype,"thumbsConstrained",void 0),g([x()],dn.prototype,"values",null),dn=g([K(MU)],dn);const C3e=dn,ft={base:"esri-slider",reversed:"esri-slider--reversed",horizontalLayout:"esri-slider--horizontal",verticalLayout:"esri-slider--vertical",contentElement:"esri-slider__content",extraContentElement:"esri-slider__extra-content",trackElement:"esri-slider__track",ticksContainerElement:"esri-slider__ticks",tickElement:"esri-slider__tick",tickLabelElement:"esri-slider__tick-label",maxElement:"esri-slider__max",minElement:"esri-slider__min",maxElementInteractive:"esri-slider__max--interactive",minElementInteractive:"esri-slider__min--interactive",rangeElementActive:"esri-slider__range--active",rangeInput:"esri-slider__range-input",anchorElement:"esri-slider__anchor",movingAnchorElement:"esri-slider__anchor--moving",lastMovedAnchorElement:"esri-slider__anchor--moved",anchorElementActive:"esri-slider__anchor--active",anchorElementIndexPrefix:"esri-slider__anchor-",segmentElement:"esri-slider__segment",segmentElementIndexPrefix:"esri-slider__segment-",segmentElementInteractive:"esri-slider__segment--interactive",segmentElementActive:"esri-slider__segment--active",effectiveSegmentElement:"esri-slider__effective-segment",effectiveMaxSegmentElement:"esri-slider__effective-max-segment",effectiveMinSegmentElement:"esri-slider__effective-min-segment",thumbElement:"esri-slider__thumb",labelElement:"esri-slider__label",labelElementInteractive:"esri-slider__label--interactive",labelInput:"esri-slider__label-input",esriWidget:"esri-widget",widgetIcon:"esri-icon-edit",disabled:"esri-disabled",hidden:"esri-hidden"},An={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},O3e="esri.widgets.Slider",rO={labels:!1,rangeLabels:!1};let St=class extends Er{constructor(e,t){super(e,t),this._activeLabelInputIndex=null,this._anchorElements=[],this._dragged=!1,this._dragStartInfo=null,this._focusedAnchorIndex=null,this._isMinInputActive=!1,this._isMaxInputActive=!1,this._lastMovedHandleIndex=null,this._positionPrecision=5,this._segmentDragStartInfo=null,this._trackHeight=null,this._trackWidth=null,this._zIndices=null,this._zIndexOffset=3,this.disabled=!1,this.draggableSegmentsEnabled=!0,this.effectiveMax=null,this.effectiveMin=null,this.effectiveSegmentElements=new Je,this.extraNodes=[],this.inputCreatedFunction=null,this.inputFormatFunction=null,this.inputParseFunction=null,this.label=void 0,this.labelElements=new Je,this.labelInputsEnabled=!1,this.labelFormatFunction=null,this.labels=null,this.max=null,this.maxLabelElement=null,this.messages=null,this.min=null,this.minLabelElement=null,this.precision=4,this.rangeLabelInputsEnabled=!1,this.segmentElements=new Je,this.snapOnClickEnabled=!0,this.steps=null,this.syncedSegmentsEnabled=!1,this.thumbsConstrained=!0,this.thumbCreatedFunction=null,this.thumbElements=new Je,this.tickElements=new Je,this.trackElement=null,this.values=null,this.viewModel=new C3e,this.visibleElements={...rO},this._onAnchorPointerDown=this._onAnchorPointerDown.bind(this),this._onAnchorPointerMove=this._onAnchorPointerMove.bind(this),this._onAnchorPointerUp=this._onAnchorPointerUp.bind(this),this._onLabelPointerDown=this._onLabelPointerDown.bind(this),this._onLabelPointerUp=this._onLabelPointerUp.bind(this),this._onSegmentPointerDown=this._onSegmentPointerDown.bind(this),this._onSegmentPointerMove=this._onSegmentPointerMove.bind(this),this._onSegmentPointerUp=this._onSegmentPointerUp.bind(this),this._onTrackPointerDown=this._onTrackPointerDown.bind(this),this._onTrackPointerMove=this._onTrackPointerMove.bind(this),this._onTrackPointerUp=this._onTrackPointerUp.bind(this)}destroy(){document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove),document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),this.labelElements.removeAll(),this.labelElements.destroy(),this.segmentElements.removeAll(),this.segmentElements.destroy(),this.effectiveSegmentElements.removeAll(),this.effectiveSegmentElements.destroy(),this.thumbElements.removeAll(),this.thumbElements.destroy(),this.tickElements.removeAll(),this.tickElements.destroy()}set layout(e){["vertical","vertical-reversed","horizontal","horizontal-reversed"].includes(e)||(e="horizontal"),this._set("layout",e)}get state(){const{_activeLabelInputIndex:e,_isMaxInputActive:t,_isMinInputActive:i,_dragStartInfo:r,_segmentDragStartInfo:s,disabled:h,viewModel:y}=this,f=Y(r)||Y(s);return h?"disabled":e===null&&!t&&!i?f?"dragging":y.state:"editing"}set tickConfigs(e){this._set("tickConfigs",e),this.scheduleRender()}castVisibleElements(e){return{...rO,...e}}render(){const{label:e}=this,t=this.classes(ft.base,ft.esriWidget,this._isHorizontalLayout()?ft.horizontalLayout:ft.verticalLayout,this._isReversedLayout()?ft.reversed:null,this._isDisabled()?ft.disabled:null);return this._storeTrackDimensions(),ue("div",{"aria-label":e,class:t,"touch-action":"none",bind:this,afterCreate:this._afterContainerCreate},this.renderContent())}toNextStep(e){this._toStep(e,1)}toPreviousStep(e){this._toStep(e,-1)}renderContent(){const{max:e,min:t}=this;if(!(oe(t)||oe(e)||t>=e))return[this.renderMin(),this.renderSliderContainer(),this.renderMax()]}renderSliderContainer(){return ue("div",{key:"slider-container",bind:this,class:ft.contentElement},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())}renderTrackElement(){return ue("div",{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:ft.trackElement,"data-node-ref":"trackElement","touch-action":"none"},this.renderEffectiveSegmentElements(),this.renderSegmentElements(),this.renderAnchorElements())}renderEffectiveSegmentElements(){if(!this.trackElement||!this.values||!this.values.length)return;const e=Y(this.effectiveMax),t=Y(this.effectiveMin);if(!e&&!t)return;const{max:i,min:r,viewModel:s}=this,h=s.getBounds(),y=[];return t&&y.push(this.renderEffectiveSegmentElement(r,h.min,!0)),e&&y.push(this.renderEffectiveSegmentElement(h.max,i,!1)),y}renderSegmentElements(){if(!this.trackElement||!this.values||!this.values.length)return;const e=this.values.length,t=[];for(let i=0;i<=e;i++)t.push(this.renderSegmentElement(i));return t}renderSegmentElement(e){const{_trackHeight:t,_trackWidth:i,draggableSegmentsEnabled:r,id:s,state:h,values:y}=this,f=this._isHorizontalLayout(),w=f?i:t,S=this.viewModel.getBounds(),E=this._positionFromValue(S.max),A=this._positionFromValue(S.min),P=e===y.length?null:e,N=e===0?null:e-1,F=Y(P),V=Y(N);let U,X;const re=[...y].sort((Te,Ee)=>Te-Ee);this._isReversedLayout()?(U=V?this._positionFromValue(re[N]):A,X=F?this._positionFromValue(re[P]):E):(U=F?this._positionFromValue(re[P]):E,X=V?this._positionFromValue(re[N]):A);const he=this._applyPrecisionToPosition(100*X/w),pe=(U-X)/w,ae=f?`transform: translate(${he}%, 0px) scale(${pe}, 1);`:`transform: translate(0px, ${he}%) scale(1, ${pe});`,le=this.classes(ft.segmentElement,ft.segmentElementIndexPrefix+e,r&&F&&V&&h!=="disabled"?ft.segmentElementInteractive:null);return ue("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:le,"data-max-thumb-index":P,"data-min-thumb-index":N,"data-segment-index":e,key:`${s}-segment-${e}`,style:ae,"touch-action":"none"})}renderEffectiveSegmentElement(e,t,i){const{_trackHeight:r,_trackWidth:s,layout:h}=this,y=this._positionFromValue(e),f=this._positionFromValue(t),w=this._isHorizontalLayout(),S=w?s:r,E=this._applyPrecisionToPosition(100*y/S);let A=null;if(h==="horizontal"){const F=i?S-f:f,V=y===S?0:E;A=`clip-path: inset(0% ${f===S?0:this._applyPrecisionToPosition(F/S*100)}% 0% ${V}%);`}else{const F=(f-y)/S;A=w?`transform: translate(${E}%, 0px) scale(${F}, 1);`:`transform: translate(0px, ${E}%) scale(1, ${F});`}const P=i?ft.effectiveMinSegmentElement:ft.effectiveMaxSegmentElement,N=this.classes(ft.segmentElement,ft.effectiveSegmentElement,P);return ue("div",{afterCreate:this._afterEffectiveSegmentCreate,afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:N,style:A,"touch-action":"none"})}renderAnchorElements(){const{trackElement:e,values:t}=this;if(t&&t.length)return this._zIndices=t.map((i,r)=>{const s=this._positionFromValue(i),h=this._positionToPercent(s),y=(this._isHorizontalLayout()?h>50:h<50)?-1:1;return this._zIndexOffset+(t.length+y*r)}),e&&t&&t.length?t.map((i,r)=>this.renderAnchorElement(i,r)):null}renderAnchorElement(e,t){const i=this._positionFromValue(e),r=this._valueFromPosition(i);if(oe(r)||isNaN(r))return;const{_dragStartInfo:s,_lastMovedHandleIndex:h,id:y,layout:f,values:w,visibleElements:{labels:S}}=this,E=s&&s.index===t,A=h===t,P=this.classes(ft.anchorElement,ft.anchorElementIndexPrefix+t,E?ft.movingAnchorElement:null,A?ft.lastMovedAnchorElement:null),N=this.labels.values[t],F=this._getStyleForAnchor(e,t,E||A),{min:V,max:U}=this.viewModel.getBoundsForValueAtIndex(t),{disabled:X,messages:re}=this,he=w.length===2?Aa(t===0?re.rangeMinimum:re.rangeMaximum,{value:e}):N,pe=w.length===1?null:t===0?`${y}-handle-${t+1}`:t===w.length-1?`${y}-handle-${t-1}`:`${y}-handle-${t-1} ${y}-handle-${t+1}`;return ue("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":pe,"aria-label":re.sliderValue,"aria-labelledby":S?`${y}-label-${t}`:null,"aria-orientation":f,"aria-valuemax":U.toString(),"aria-valuemin":V.toString(),"aria-valuenow":e.toString(),"aria-valuetext":he,bind:this,class:P,"data-thumb-index":t,"data-value":e,id:`${y}-handle-${t}`,key:`${y}-handle-${t}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:F,tabIndex:X?-1:0},ue("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:ft.thumbElement,"data-thumb-index":t,"touch-action":"none"}),this.renderThumbLabel(t))}renderThumbLabel(e){const{id:t,labels:i,labelInputsEnabled:r,state:s}=this,h=this.visibleElements.labels,y=i.values[e],f=this.classes(ft.labelElement,h?null:ft.hidden,r&&s!=="disabled"?ft.labelElementInteractive:null);return ue("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!h).toString(),bind:this,class:f,"data-thumb-index":e,key:`${t}-label-${e}`,id:`${t}-label-${e}`,role:r?"button":null,"touch-action":"none"},this._activeLabelInputIndex===e?this.renderValueInput(e):y)}renderValueInput(e){const{disabled:t,values:i}=this,r=i[e];return ue("input",{key:`value-input-${e}`,afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:ft.labelInput,"data-input-type":"thumb","data-input-index":e,required:!0,tabIndex:t?-1:0,type:"text",value:this._formatInputValue(r,"value",e),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})}renderMax(){const{_isMaxInputActive:e,labels:t,rangeLabelInputsEnabled:i,state:r}=this,s=this.visibleElements.rangeLabels,h=this.classes(ft.maxElement,{[ft.hidden]:!s,[ft.maxElementInteractive]:i&&r!=="disabled",[ft.rangeElementActive]:e});return ue("div",{"aria-hidden":(!s).toString(),afterCreate:this._afterMaxLabelCreate,bind:this,class:h,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:i?"button":null,tabIndex:!this.disabled&&i?0:-1},e?this.renderMaxInput():t.max)}renderMin(){const{_isMinInputActive:e,labels:t,rangeLabelInputsEnabled:i,state:r}=this,s=this.visibleElements.rangeLabels,h=this.classes(ft.minElement,{[ft.hidden]:!s,[ft.minElementInteractive]:i&&r!=="disabled",[ft.rangeElementActive]:e});return ue("div",{"aria-hidden":(!s).toString(),afterCreate:this._afterMinLabelCreate,bind:this,class:h,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:i?"button":null,tabIndex:!this.disabled&&i?0:-1},e?this.renderMinInput():t.min)}renderMaxInput(){return ue("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:ft.rangeInput,"data-input-type":"max",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})}renderMinInput(){return ue("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:ft.rangeInput,"data-input-type":"min",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})}renderExtraContentElements(){return ue("div",{bind:this,class:ft.extraContentElement},this.extraNodes)}renderTicksContainer(){if(this.tickConfigs&&this.trackElement&&(this._trackHeight!==0||this._trackWidth!==0))return this.tickConfigs.map((e,t)=>ue("div",{key:"ticks-container",class:this.classes(ft.ticksContainerElement)},this.renderTicks(e,t)))}renderTicks(e,t){const{mode:i,values:r}=e;if(this.tickElements.getItemAt(t)||this.tickElements.add(new Je,t),i==="position"){const y=Array.isArray(r)?r:[r];return this._calculateTickPositions(y).map((f,w)=>this.renderTickGroup(e,w,t,f))}if(i==="percent"&&Array.isArray(r)){const{max:y,min:f}=this,w=y-f,S=r.map(E=>this._applyPrecisionToPosition(E/100*w+f));return this._calculateTickPositions(S).map((E,A)=>this.renderTickGroup(e,A,t,E))}const s=Array.isArray(r)&&r.length?r[0]:isNaN(r)?null:r,h=this._getTickCounts(s,e);return this._calculateEquidistantTickPositions(h).map((y,f)=>this.renderTickGroup(e,f,t,y))}renderTickGroup(e,t,i,r){const s=e.mode==="position"?Array.isArray(e.values)?e.values[t]:e.values:this._valueFromPosition(r);if(!oe(s)&&!isNaN(s))return ue("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":e,"data-position":r,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":s,onclick:this._onTickGroupClick,key:`tick-group-${t}`},this.renderTickLine(e,t,i,s),e.labelsVisible?this.renderTickLabel(e,t,i,s):null)}renderTickLine(e,t,i,r){return ue("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":r.toString(),bind:this,class:ft.tickElement,"data-config":e,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":r,key:`tick-label-${t}`,style:this._getPositionStyleForElement(r)})}renderTickLabel(e,t,i,r){const s=e.labelFormatFunction?e.labelFormatFunction(r,"tick",t):this.viewModel.getLabelForValue(r,"tick",t);return ue("div",{afterCreate:this._afterTickLabelCreate,"aria-label":s,"aria-valuenow":r.toString(),"aria-valuetext":s,bind:this,class:ft.tickLabelElement,"data-config":e,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":r,key:`tick-label-${t}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(r)}`},s)}_afterContainerCreate(e){this.own(dhe(e,()=>this.scheduleRender()))}_afterTrackCreate(e){this._set("trackElement",e),e.addEventListener("pointerdown",this._onTrackPointerDown),this.scheduleRender()}_afterTrackRemoved(e){e.removeEventListener("pointerdown",this._onTrackPointerDown),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp)}_afterSegmentCreate(e){this.segmentElements.add(e),e.addEventListener("pointerdown",this._onSegmentPointerDown)}_afterSegmentRemoved(e){this.segmentElements.remove(e),e.removeEventListener("pointerdown",this._onSegmentPointerDown)}_afterEffectiveSegmentCreate(e){this.effectiveSegmentElements.add(e)}_afterEffectiveSegmentRemoved(e){this.effectiveSegmentElements.remove(e)}_afterAnchorCreate(e){if(this._anchorElements.push(e),e.addEventListener("pointerdown",this._onAnchorPointerDown),this.thumbCreatedFunction){const t=e["data-thumb-index"],i=e["data-value"],r=this.thumbElements.getItemAt(t)||null,s=this.labelElements.getItemAt(t)||null;this.thumbCreatedFunction(t,i,r,s)}}_afterAnchorUpdate(e){Y(this._focusedAnchorIndex)&&e["data-thumb-index"]===this._focusedAnchorIndex&&(e.focus(),this._focusedAnchorIndex=null)}_afterAnchorRemoved(e){const t=this._anchorElements.indexOf(e,0);t>-1&&this._anchorElements.splice(t,1),e.removeEventListener("pointerdown",this._onAnchorPointerDown)}_afterThumbCreate(e){this.thumbElements.add(e)}_afterThumbRemoved(e){this.thumbElements.remove(e)}_afterLabelCreate(e){this.labelElements.add(e),e.addEventListener("pointerdown",this._onLabelPointerDown),e.addEventListener("pointerup",this._onLabelPointerUp)}_afterLabelRemoved(e){this.labelElements.remove(e),e.removeEventListener("pointerdown",this._onLabelPointerDown),e.removeEventListener("pointerup",this._onLabelPointerUp)}_afterInputCreate(e){if(e.focus(),e.select(),this.inputCreatedFunction){const t=e.getAttribute("data-input-type"),i=t==="thumb"?e["data-input-index"]:null;this.inputCreatedFunction(e,t,i)}}_afterTickLineCreate(e){const t=e["data-tick-config-index"],i=e["data-tick-group-index"],r=this.tickElements.getItemAt(t);r.getItemAt(i)?r.getItemAt(i).tickElement=e:r.add({groupElement:null,tickElement:e,labelElement:null},i)}_afterTickLabelCreate(e){const t=e["data-tick-config-index"],i=e["data-tick-group-index"],r=this.tickElements.getItemAt(t);r.getItemAt(i)?r.getItemAt(i).labelElement=e:r.add({groupElement:null,labelElement:e,tickElement:null},i)}_afterTickGroupRemoved(e){const t=e["data-tick-config-index"],i=this.tickElements.items[t],r=i==null?void 0:i.find(s=>s.groupElement===e);r&&i.remove(r)}_afterTickGroupCreate(e){var i,r;const t=e["data-config"];if(t&&t.tickCreatedFunction){const s=e["data-tick-config-index"],h=e["data-tick-group-index"],y=e["data-value"],f=(r=(i=this.tickElements)==null?void 0:i.getItemAt(s))==null?void 0:r.getItemAt(h);if(f){f.groupElement=e;const w=f.tickElement||null,S=f.labelElement||null;t.tickCreatedFunction(y,w,S)}}}_afterMaxLabelCreate(e){this._set("maxLabelElement",e)}_afterMinLabelCreate(e){this._set("minLabelElement",e)}_onAnchorKeyDown(e){if(this._isDisabled()||this.state==="editing")return;const{target:t}=e,i=Vo(e),{_anchorElements:r,values:s}=this,h=t["data-thumb-index"],y=r[h],f=s[h],w=[An.moveAnchorUp,An.moveAnchorDown,An.moveAnchorLeft,An.moveAnchorRight];if(i===An.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=h,this.notifyChange("state");else if(w.includes(i)){e.preventDefault();const{steps:S}=this,E=i===An.moveAnchorUp||i===An.moveAnchorRight?1:-1;if(Y(S))this._toStep(h,this._isReversedLayout()?-1*E:E);else{const{precision:P}=this,N=this._getPositionOfElement(y),F=this._valueFromPosition(N),V=this._isHorizontalLayout()?E:-1*E;let U;U=P===0?this._positionFromValue(F+V):P===1?this._positionFromValue(F+.1*V):N+V,this._toPosition(h,U)}const A=this.values[h];f!==A&&this._emitThumbChangeEvent({index:h,oldValue:f,value:A})}else if(i===An.moveAnchorToMax||i===An.moveAnchorToMin){e.preventDefault();const{min:S,max:E}=this._getAnchorBoundsInPixels(h),A=this._isPositionInverted()?i===An.moveAnchorToMax?S:E:i===An.moveAnchorToMin?S:E;this._toPosition(h,A);const P=this.values[h];f!==P&&this._emitThumbChangeEvent({index:h,oldValue:f,value:P})}}_onAnchorPointerDown(e){if(this._isDisabled())return;const{target:t,clientX:i,clientY:r}=e,s=t["data-thumb-index"];s!==void 0&&(e.preventDefault(),this._anchorElements[s]&&this._anchorElements[s].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:i,clientY:r,index:s,position:this._getPositionOfElement(this._anchorElements[s])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onAnchorPointerMove(e){if(this.state==="editing"||!this._dragStartInfo)return;e.preventDefault();const{values:t,_anchorElements:i,_dragged:r,_dragStartInfo:s,_dragStartInfo:{index:h,position:y}}=this,{clientX:f,clientY:w}=e,S=r?"drag":"start",E=i[h],A=this._getPositionOfElement(E),P=this._applyPrecisionToPosition(this._isHorizontalLayout()?y+f-s.clientX:y+w-s.clientY);if(A===P)return;const N=t[h];this._dragged=!0,this._toPosition(h,P);const F=this.values[h];r?N!==F&&this._emitThumbDragEvent({index:h,state:S,value:F}):this._emitThumbDragEvent({index:h,state:S,value:N})}_onAnchorPointerUp(e){if(document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),!this._dragStartInfo)return;e.preventDefault();const{index:t}=this._dragStartInfo,i=this._dragged,r=this.values[t];this._dragged=!1,this._dragStartInfo=null,this._lastMovedHandleIndex=t,this.notifyChange("state"),i?this._emitThumbDragEvent({index:t,state:"stop",value:r}):(this.scheduleRender(),this.state!=="editing"&&this._emitThumbClickEvent({index:t,value:r}))}_onTrackPointerDown(e){const{_dragStartInfo:t,snapOnClickEnabled:i,state:r,values:s}=this;if(this._isDisabled()||r==="editing"||t||(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),!i||!s.length))return;const{steps:h}=this,{clientX:y,clientY:f}=e,w=this._getCursorPositionFromEvent(e),S=this._valueFromPosition(w),E=this._getIndexOfNearestValue(S),A=s[E],P=s.some((U,X)=>U===A&&X!==E)&&S>A?this.values.lastIndexOf(A):E;if(oe(P))return;const N=s[P],F=Y(h)?this._calculateNearestStepPosition(w):w;this._toPosition(P,F),this._dragged=!0,this._dragStartInfo={clientX:y,clientY:f,index:P,position:F},this._focusedAnchorIndex=P,this.notifyChange("state"),this._emitThumbDragEvent({index:P,state:"start",value:N});const V=this.values[P];N!==V&&this._emitThumbDragEvent({index:P,state:"drag",value:V}),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove)}_onTrackPointerMove(e){e.preventDefault(),this._dragged=!0}_onTrackPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp),this.snapOnClickEnabled||(this._dragged=!1),!this._dragged){const t=this._getCursorPositionFromEvent(e),i=this._valueFromPosition(t);this._emitTrackClickEvent({value:i})}}_onSegmentPointerDown(e){var f,w;e.preventDefault();const t=e.target,i=t["data-segment-index"],r=t["data-min-thumb-index"],s=t["data-max-thumb-index"];if(this._isDisabled()||oe(r)||oe(s))return;e.stopPropagation(),this._storeTrackDimensions(),document.addEventListener("pointerup",this._onSegmentPointerUp);const h=this._getAnchorDetails(r),y=this._getAnchorDetails(s);this.syncedSegmentsEnabled?(this.segmentElements.forEach(S=>S.classList.add(ft.segmentElementActive)),this._anchorElements.forEach(S=>S.classList.add(ft.anchorElementActive))):(this.segmentElements.getItemAt(i).classList.add(ft.segmentElementActive),(f=this._anchorElements[h.index])==null||f.classList.add(ft.anchorElementActive),(w=this._anchorElements[y.index])==null||w.classList.add(ft.anchorElementActive)),this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(e),index:i,details:this._normalizeSegmentDetails({min:h,max:y})},this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this.notifyChange("state"),this._emitSegmentDragEvent({index:i,state:"start",thumbIndices:[r,s]}))}_onSegmentPointerMove(e){if(!this._segmentDragStartInfo)return;e.preventDefault();const{_trackHeight:t,_trackWidth:i,_segmentDragStartInfo:{index:r,cursorPosition:s,details:{min:h,max:y}}}=this,{index:f,position:w,value:S}=h,{index:E,position:A,value:P}=y;this._dragged=!0;const N=this._getCursorPositionFromEvent(e);if(N===s)return;const F=this._positionToPercent(s),V=this._positionToPercent(N)-F,U=this._positionToPercent(w)+V,X=this._positionToPercent(A)+V,{min:re}=this._getAnchorBoundsAsPercents(f),{max:he}=this._getAnchorBoundsAsPercents(E);let pe=!1,ae=!1;if(U<re?pe=!0:X>he&&(ae=!0),pe){const{min:Ge,max:ke}=this.viewModel.getBoundsForValueAtIndex(f),ht=this._isPositionInverted()?ke:Ge,Kt=ht,bt=P+(ht-S),Ct=bt-this.values[E];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Ct):this._updateAnchorValues([f,E],[Kt,bt]))}if(ae){const{min:Ge,max:ke}=this.viewModel.getBoundsForValueAtIndex(E),ht=this._isPositionInverted()?Ge:ke,Kt=ht,bt=S+(ht-P),Ct=bt-this.values[f];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Ct):this._updateAnchorValues([f,E],[bt,Kt]))}const le=this._isHorizontalLayout()?i:t,Te=X/100*le,Ee=U/100*le,Oe=this.values,Ae=[Oe[f],Oe[E]],Fe=this._getValueForAnchorAtPosition(f,Ee),ze=this._getValueForAnchorAtPosition(E,Te);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Fe-Ae[0]):this._updateAnchorValues([f,E],[Fe,ze]),[this.values[f],this.values[E]].every((Ge,ke)=>Ge===Ae[ke])||this._emitSegmentDragEvent({index:r,state:"drag",thumbIndices:[f,E]})}_onSegmentPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointerup",this._onSegmentPointerUp),document.removeEventListener("pointermove",this._onSegmentPointerMove),!this._segmentDragStartInfo)return;const{_dragged:t,max:i,min:r,values:s}=this,{index:h,details:{min:{index:y},max:{index:f}}}=this._segmentDragStartInfo;if(this.segmentElements.forEach(w=>w.classList.remove(ft.segmentElementActive)),this._anchorElements.forEach(w=>w.classList.remove(ft.anchorElementActive)),this.draggableSegmentsEnabled){const w=i-r,S=s[y],E=s[f];this._lastMovedHandleIndex=S===E?S>w/2?y:f:null,this._dragged=!1,this._segmentDragStartInfo=null,this.notifyChange("state"),this._emitSegmentDragEvent({index:h,state:"stop",thumbIndices:[y,f]})}if(!t){const w=this._getCursorPositionFromEvent(e),S=this._valueFromPosition(w);this._emitSegmentClickEvent({index:h,value:S,thumbIndices:[y,f]})}}_onTickGroupClick(e){const t=e.target;if(t["data-config"]){const i=t["data-tick-config-index"],r=t["data-tick-group-index"],s=t["data-value"];this._emitTickClickEvent({configIndex:i,groupIndex:r,value:s})}}_storeTrackDimensions(){if(this.trackElement){const e=this._getDimensions(this.trackElement);this._trackHeight=e.height,this._trackWidth=e.width}}_onLabelPointerDown(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onLabelPointerMove(){this._isDisabled()||(this._dragged=!0)}_onLabelPointerUp(e){if(this._isDisabled())return;const t=e.target["data-thumb-index"];this.labelInputsEnabled&&!this._dragged&&Y(t)&&(this._activeLabelInputIndex=t),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove)}_onLabelInputBlur(e){const{_activeLabelInputIndex:t,values:i,viewModel:r}=this,s=e.target.value;if(this._activeLabelInputIndex=null,this.notifyChange("state"),!s)return;const h=this._parseInputValue(s,"value",t),y=i[t],{min:f,max:w}=this.viewModel.getBoundsForValueAtIndex(t);if(h<f||h>w)return;r.setValue(t,h);const S=this.values[t];y!==S&&this._emitThumbChangeEvent({index:t,oldValue:y,value:S})}_onInputKeyDown(e){if(this._isDisabled())return;const{target:t}=e,i=Vo(e),{hideInput1:r,hideInput2:s,hideInput3:h}=An,{_activeLabelInputIndex:y,_anchorElements:f}=this,w=t;if(i===r||i===s||i===h){e.stopPropagation();const S=y;w.blur(),Y(S)?f[S].focus():w.parentElement.focus()}}_onMaxLabelClick(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"max-click",value:this.max}),this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state")))}_onMaxLabelKeyDown(e){this._isDisabled()||Vo(e)!==An.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))}_onMaxInputBlur(e){const t=e.target.value;if(this._isMaxInputActive=!1,this.notifyChange("state"),!t)return;const i=this.max,r=this._parseInputValue(t,"max");r<=this.min||(this.viewModel.set("max",r),this.max!==i&&this._emitMaxChangeEvent({oldValue:i,value:this.max}))}_onMinLabelClick(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state")))}_onMinLabelKeyDown(e){this._isDisabled()||Vo(e)!==An.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))}_onMinInputBlur(e){const t=e.target.value;if(this._isMinInputActive=!1,this.notifyChange("state"),!t)return;const i=this.min,r=this._parseInputValue(t,"min");r>=this.max||(this.viewModel.set("min",r),this.min!==i&&this._emitMinChangeEvent({oldValue:i,value:this.min}))}_isDisabled(){return this.disabled||this.state==="disabled"}_positionFromValue(e){const{max:t,min:i}=this,r=t-i;if(r===0)return 0;const{_trackHeight:s,_trackWidth:h}=this,y=this._isHorizontalLayout();let f=parseFloat(y?(h*(e-i)/r).toFixed(2):(s*(t-e)/r).toFixed(2));return this._isReversedLayout()&&(f=y?h-f:s-f),f}_valueFromPosition(e){const{_trackHeight:t,_trackWidth:i,max:r,min:s,precision:h}=this,y=r-s;let f=this._isHorizontalLayout()?e*y/i+s:y*(1e3-e/t*1e3)/1e3+s;return this._isReversedLayout()&&(f=r+s-f),parseFloat(f.toFixed(h))}_positionToPercent(e){const{_trackHeight:t,_trackWidth:i}=this,r=100*e/(this._isHorizontalLayout()?i:t);return this._applyPrecisionToPosition(r)}_applyPrecisionToPosition(e){return parseFloat(e.toFixed(this._positionPrecision))}_isPositionInverted(){const{layout:e}=this;return e==="horizontal-reversed"||e==="vertical"}_isHorizontalLayout(){return this.layout.includes("horizontal")}_isReversedLayout(){return this.layout.includes("reversed")}_normalizeSegmentDetails(e){if(this._isPositionInverted()){const{min:t,max:i}=e;return{min:i,max:t}}return e}_parseInputValue(e,t,i){return this.inputParseFunction?this.inputParseFunction(e,t,i):this.viewModel.defaultInputParseFunction(e)}_formatInputValue(e,t,i){return this.inputFormatFunction?this.inputFormatFunction(e,t,i):this.viewModel.defaultInputFormatFunction(e)}_getAnchorDetails(e){const t=[...this.values].sort((r,s)=>r-s)[e],i=this.values.indexOf(t);return{index:i,position:this._getPositionOfElement(this._anchorElements[i]),value:t}}_updateAnchorStyle(e,t){const i=this._anchorElements[e];i&&(this._isHorizontalLayout()?i.style.left=`${t}`:i.style.top=`${t}`)}_getStyleForAnchor(e,t,i){const r=this._getPositionStyleForElement(e);if(this.values.length===1)return`${r}`;const s=this._zIndices[t];return`${r}; z-index: ${i?this._zIndexOffset+s:s}`}_getPositionStyleForElement(e){const t=this._positionFromValue(e),i=this._positionToPercent(t);return`${this._isHorizontalLayout()?"left":"top"}: ${i+"%"}`}_getPositionOfElement(e){const t=this._getDimensions(e.offsetParent),i=this._getDimensions(e);return this._isHorizontalLayout()?this._applyPrecisionToPosition(i.left-t.left):this._applyPrecisionToPosition(i.top-t.top)}_updateAnchorValues(e,t){e.forEach((i,r)=>this._toValue(i,t[r]))}_updateAnchorValuesByDifference(e){const{min:t,max:i,values:r}=this;r.forEach((s,h)=>this._toValue(h,Math.max(Math.min(s+e,i),t)))}_toValue(e,t){Y(this.steps)&&(t=this._getStepValues()[this._getIndexOfNearestStepValue(t)]),this._updateAnchorStyle(e,this._getPositionStyleForElement(t)),this.viewModel.setValue(e,t)}_toPosition(e,t){const i=Y(this.steps)?this._getStepValueForAnchorAtPosition(e,t):this._getValueForAnchorAtPosition(e,t);this._updateAnchorStyle(e,this._getPositionStyleForElement(i)),this.viewModel.setValue(e,i)}_getValueForAnchorAtPosition(e,t){const{min:i,max:r}=this._getAnchorBoundsInPixels(e),{min:s,max:h}=this.viewModel.getBoundsForValueAtIndex(e);let y,f,w=null;return this._isPositionInverted()?(y=s,f=h):(y=h,f=s),w=t>r?y:t<i?f:this._valueFromPosition(t),w>h?w=h:w<s&&(w=s),w}_getStepValueForAnchorAtPosition(e,t){const i=this._getStepValues(),r=this._calculateNearestStepPosition(t),s=this._getValueForAnchorAtPosition(e,r);return i[this._getIndexOfNearestStepValue(s)]}_getAnchorBoundsAsPercents(e){const{min:t,max:i}=this._getAnchorBoundsInPixels(e);return{min:this._positionToPercent(t),max:this._positionToPercent(i)}}_getAnchorBoundsInPixels(e){const{_anchorElements:t,_trackHeight:i,_trackWidth:r,effectiveMax:s,effectiveMin:h,thumbsConstrained:y}=this,f=t[e-1],w=t[e+1],S=this._isHorizontalLayout()?r:i;let E,A;return this._isPositionInverted()?(E=Y(h)?this._positionFromValue(h):S,A=Y(s)?this._positionFromValue(s):0):(E=Y(s)?this._positionFromValue(s):S,A=Y(h)?this._positionFromValue(h):0),y?this._isPositionInverted()?{max:f?this._getPositionOfElement(f):E,min:w?this._getPositionOfElement(w):A}:{max:w?this._getPositionOfElement(w):E,min:f?this._getPositionOfElement(f):A}:{max:E,min:A}}_getIndexOfNearestValue(e){return this.values.indexOf(this.values.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t))}_getCursorPositionFromEvent(e){const t=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?e.clientX-t.left:e.clientY-t.top}_getStepValues(){const{steps:e}=this;if(Array.isArray(e))return e;const{max:t,min:i}=this,r=Math.ceil((t-i)/e),s=[];for(let h=0;h<=r;h++){const y=i+e*h;s.push(y>t?t:y)}return s}_toStep(e,t){const{values:i,viewModel:r}=this,s=i[e],h=this._getStepValues(),y=h.indexOf(s);let f=null;if(y>-1){let w=h[y+t];isNaN(w)&&(w=h[y]);const S=this._positionFromValue(w);f=this._getStepValueForAnchorAtPosition(e,S)}else f=h[this._getIndexOfNearestStepValue(s)+t];r.setValue(e,f)}_getIndexOfNearestStepValue(e){const{steps:t}=this;if(oe(t))return null;const i=this._getStepValues(),r=i.reduce((s,h)=>Math.abs(h-e)<Math.abs(s-e)?h:s);return i.indexOf(r)}_calculateNearestStepPosition(e){const t=this._valueFromPosition(e),i=this._getIndexOfNearestStepValue(t),r=this._getStepValues();return this._positionFromValue(r[i])}_getTickCounts(e,t){const{mode:i}=t;return i==="count"||i==="position"?e||0:i==="percent"&&100/e||0}_calculateTickPositions(e){return e.map(t=>this._positionFromValue(t))}_calculateEquidistantTickPositions(e){const{_trackWidth:t,_trackHeight:i}=this,r=this._isHorizontalLayout()?t:i,s=r/(e-1),h=[];if(e===1)return[r/2];for(let y=0;y<e;y++){const f=y*s;f<=r&&h.push(f)}return h}_getDimensions(e){try{return e.getBoundingClientRect()}catch(t){if(typeof t=="object"&&t!==null)return new DOMRect(0,0,0,0);throw t}}_emitTrackClickEvent(e){this.emit("track-click",{...e,type:"track-click"})}_emitTickClickEvent(e){this.emit("tick-click",{...e,type:"tick-click"})}_emitMaxChangeEvent(e){this.emit("max-change",{...e,type:"max-change"})}_emitMinChangeEvent(e){this.emit("min-change",{...e,type:"min-change"})}_emitThumbChangeEvent(e){this.emit("thumb-change",{...e,type:"thumb-change"})}_emitThumbClickEvent(e){this.emit("thumb-click",{...e,type:"thumb-click"})}_emitThumbDragEvent(e){this.emit("thumb-drag",{...e,type:"thumb-drag"})}_emitSegmentClickEvent(e){this.emit("segment-click",{...e,type:"segment-click"})}_emitSegmentDragEvent(e){this.emit("segment-drag",{...e,type:"segment-drag"})}_emitRangeLabelClickEvent(e){this.emit(e.type,{...e})}};g([x()],St.prototype,"disabled",void 0),g([x()],St.prototype,"draggableSegmentsEnabled",void 0),g([We("viewModel.effectiveMax")],St.prototype,"effectiveMax",void 0),g([We("viewModel.effectiveMin")],St.prototype,"effectiveMin",void 0),g([x({readOnly:!0})],St.prototype,"effectiveSegmentElements",void 0),g([x()],St.prototype,"extraNodes",void 0),g([x()],St.prototype,"inputCreatedFunction",void 0),g([We("viewModel.inputFormatFunction")],St.prototype,"inputFormatFunction",void 0),g([We("viewModel.inputParseFunction")],St.prototype,"inputParseFunction",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],St.prototype,"label",void 0),g([x({readOnly:!0})],St.prototype,"labelElements",void 0),g([x()],St.prototype,"labelInputsEnabled",void 0),g([We("viewModel.labelFormatFunction")],St.prototype,"labelFormatFunction",void 0),g([We("viewModel.labels")],St.prototype,"labels",void 0),g([x({value:"horizontal"})],St.prototype,"layout",null),g([We("viewModel.max")],St.prototype,"max",void 0),g([x({readOnly:!0})],St.prototype,"maxLabelElement",void 0),g([x(),Sr("esri/widgets/Slider/t9n/Slider")],St.prototype,"messages",void 0),g([We("viewModel.min")],St.prototype,"min",void 0),g([x({readOnly:!0})],St.prototype,"minLabelElement",void 0),g([We("viewModel.precision")],St.prototype,"precision",void 0),g([x()],St.prototype,"rangeLabelInputsEnabled",void 0),g([x({readOnly:!0})],St.prototype,"segmentElements",void 0),g([x()],St.prototype,"snapOnClickEnabled",void 0),g([x({readOnly:!0})],St.prototype,"state",null),g([x()],St.prototype,"steps",void 0),g([x()],St.prototype,"syncedSegmentsEnabled",void 0),g([We("viewModel.thumbsConstrained")],St.prototype,"thumbsConstrained",void 0),g([x()],St.prototype,"thumbCreatedFunction",void 0),g([x({readOnly:!0})],St.prototype,"thumbElements",void 0),g([x()],St.prototype,"tickConfigs",null),g([x({readOnly:!0})],St.prototype,"tickElements",void 0),g([x({readOnly:!0})],St.prototype,"trackElement",void 0),g([We("viewModel.values")],St.prototype,"values",void 0),g([x()],St.prototype,"viewModel",void 0),g([x()],St.prototype,"visibleElements",void 0),g([Mt("visibleElements")],St.prototype,"castVisibleElements",null),St=g([K(O3e)],St);const P3e=St;let nh=class extends qe{constructor(e){super(e),this._viewpointHandle=null,this._handles=new er,this.group=null}initialize(){this._handles.add(ro(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&sn(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?sn(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(i&&t){const r=mte(()=>i.type==="3d"?i.camera:i.viewpoint,()=>this._collapse());this._handles.add(r,e),this._viewpointHandle=r}}_collapse(){this.expanded=!1}};g([x({value:!1})],nh.prototype,"autoCollapse",null),g([x({value:!1})],nh.prototype,"expanded",null),g([x()],nh.prototype,"group",void 0),g([x({readOnly:!0})],nh.prototype,"state",null),g([x({value:null})],nh.prototype,"view",null),nh=g([K("esri.widgets.Expand.ExpandViewModel")],nh);const EU=nh,ir={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let qi=class extends Er{constructor(e,t){super(e,t),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new EU,this._handleKeyDown=i=>{const{closeOnEsc:r,_toggleButtonEl:s,expanded:h}=this;!h||!r||i.target===s||i.key!=="Escape"||(typeof r=="function"?r(i):r)&&(this.expanded=!1,s==null||s.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:r}=this;return e?i||t.collapse:r||t.expand}get collapseIconClass(){return ir.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return Zw(this.content)?this.content.iconClass:ir.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[ir.modeAuto]:e==="auto",[ir.modeDrawer]:e==="drawer",[ir.modeFloating]:e==="floating"};return ue("div",{class:this.classes(ir.base,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[ir.containerExpanded]:e};return ue("div",{class:this.classes(ir.container,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[ir.expandMaskExpanded]:e};return ue("div",{bind:this,onclick:this._toggle,class:this.classes(ir.expandMask,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?ue("span",{key:"expand__icon-number",class:ir.iconNumber},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?ue("span",{key:"expand__expand-icon-number",class:this.classes(ir.iconNumber,ir.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:i}=this,r={[ir.iconExpanded]:i,[e]:i,[t]:!i};return e===t&&(r[e]=!0),ue("span",{"aria-hidden":"true",class:this.classes(ir.icon,r)})}renderTitle(){return ue("span",{class:ir.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:i}=this;return ue("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":e?"true":"false",bind:this,class:ir.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return ue("div",{class:ir.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:i}=this,r={[ir.contentExpanded]:e},s={id:t,role:"region",class:this.classes(ir.content,r)};return typeof i=="string"?ue("div",{key:"content__string",innerHTML:i,...s}):Zw(i)?ue("div",{key:"content__widget",...s},i.render()):i instanceof HTMLElement?ue("div",{key:"content__html-element",bind:i,afterCreate:this._attachToNode,...s}):_D(i)?ue("div",{key:"content__node",bind:i.domNode,afterCreate:this._attachToNode,...s}):null}_toggle(){this.toggle()}_attachToNode(e){const t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};g([x({readOnly:!0})],qi.prototype,"contentId",null),g([x({readOnly:!0})],qi.prototype,"expandTitle",null),g([We("viewModel.autoCollapse")],qi.prototype,"autoCollapse",void 0),g([x()],qi.prototype,"closeOnEsc",void 0),g([x()],qi.prototype,"collapseIconClass",null),g([x()],qi.prototype,"collapseTooltip",void 0),g([x()],qi.prototype,"content",void 0),g([We("viewModel.expanded")],qi.prototype,"expanded",void 0),g([x()],qi.prototype,"expandIconClass",null),g([x()],qi.prototype,"expandTooltip",void 0),g([We("viewModel.group")],qi.prototype,"group",void 0),g([x()],qi.prototype,"iconNumber",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],qi.prototype,"label",void 0),g([x(),Sr("esri/widgets/Expand/t9n/Expand")],qi.prototype,"messages",void 0),g([x(),Sr("esri/t9n/common")],qi.prototype,"messagesCommon",void 0),g([x()],qi.prototype,"mode",void 0),g([We("viewModel.view")],qi.prototype,"view",void 0),g([x({type:EU})],qi.prototype,"viewModel",void 0),g([jn()],qi.prototype,"_toggle",null),qi=g([K("esri.widgets.Expand")],qi);const TU=qi;class N3e{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function $U(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new N3e(t)}function Q4e(e,t){e||(t=t||"",console.warn("Verify failed: "+t+`
`+new Error("verify").stack))}function eSe(e,t,i,r){let s,h=(i[0]-e[0])/t[0],y=(r[0]-e[0])/t[0];h>y&&(s=h,h=y,y=s);let f=(i[1]-e[1])/t[1],w=(r[1]-e[1])/t[1];if(f>w&&(s=f,f=w,w=s),h>w||f>y)return!1;f>h&&(h=f),w<y&&(y=w);let S=(i[2]-e[2])/t[2],E=(r[2]-e[2])/t[2];return S>E&&(s=S,S=E,E=s),!(h>E||S>y)&&(E<y&&(y=E),!(y<0))}function tSe(e,t,i,r,s,h=At()){const y=(r[s]-i[s])*(t[0]-e[0])-(r[0]-i[0])*(t[s]-e[s]),f=(r[0]-i[0])*(e[s]-i[s])-(r[s]-i[s])*(e[0]-i[0]);if(y===0)return!1;const w=f/y;return h[0]=e[0]+w*(t[0]-e[0]),h[1]=e[s]+w*(t[s]-e[s]),!0}function iSe(e,t){return Math.log(e)/Math.log(t)}function rSe(e,t,i,r){e[12]=t,e[13]=i,e[14]=r}function nSe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[15]===1}function sSe(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/t)}function oSe(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/i)}function aSe(e,t,i){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}function lSe(e,t,i){return 2*Math.atan(i*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}class R3e{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class L3e{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new F3e}}class F3e{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class j3e{constructor(t,i,r,s){this._workerFunc=t,this._callbackFunc=i,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=s.map(h=>new L3e(h))}hasQuota(t){const i=this._clients[t];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(t){const i=this._clients[t.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(r,s)=>this._taskCallback(r,s))):i.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const i=this._clients[t.client];this._totalNumWorkers--,i.numWorkers--,i.statistics.requests++,i.statistics.size+=t.size||0,i.statistics.duration+=t.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,$U(i.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(i,r)=>this._taskCallback(i,r)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,i){t._cancelled||(this._callbackFunc(t,i),this._taskFinished(t))}getStatsForType(t){const i=this._clients[t];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const t=this;return{set workerFunc(i){t._workerFunc=i}}}}let Y9=class extends qe{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,i){this._loadQueue=new j3e((r,s)=>this._startLoading(r,s),(r,s)=>this._doneLoadingCB(r,s),e,t),i&&(this._frameTask=i.registerTask(Tt.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Hn(this._frameTask),this._tasks.forEach(e=>pp(e.abortController)),this._loadQueue=Pr(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,i,r={}){const s=dP();s.__signal=Y(r)?r.signal:null;const h=this._createOrUpdateTask(e,t,i,r,s);return to(r,()=>this._cancelRequest(h,s)),s.promise}_createTask(e,t,i,r,s,h){const y=new G3e(e,t,i,r,s);return this._updateTask(y,h),this._tasks.set(s,y),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(y),y}_cancelRequest(e,t){B6(e.resolvers,t),t.reject(bi()),e.resolvers.length===0&&(e.status===Us.DOWNLOADING&&(e.status=Us.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=Us.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,i,r,s){const h=U3e(Y(r)&&r.uid||e,t,i),y=this._tasks.get(h);return y?(this._updateTask(y,s),y):this._createTask(e,r,t,i,h,s)}_doneLoadingCB(e,t){this._loadQueue&&($U(e.status===Us.DOWNLOADING),e.status=Us.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();di(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==Us.DOWNLOADED&&(t.err=t.err||bi()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!Br(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(t)Br(t)?r.reject(t):r.reject(new ne("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const s=i<=0?e.result:de(e.result);r.resolve(s)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,t){if(e.status===Us.CANCELLED)return!1;let i,r;switch(e.startTime=performance.now(),e.status=Us.DOWNLOADING,e.docType){case"binary":r="array-buffer",i=0;break;case"image":r="image";break;case"image+type":r="array-buffer";break;default:r="json"}e.abortController=new AbortController;const s=e.abortController.signal;e.request=ni(e.url,{...e.options,responseType:r,timeout:i,signal:s});let h=()=>{};const y=w=>{e.duration=performance.now()-e.startTime,e.size=w instanceof ArrayBuffer?w.byteLength:e.size||0,e.result=w,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},f=w=>{e.status===Us.DOWNLOADING&&t(e,w),h()};return e.docType!=="image+type"?(e.request.then(w=>y(w.data),f),!0):(e.request.then(w=>{const S=w.data,E=z3e(S);if(r="image",e.size=S.byteLength,E==="unknown")return e.request=ni(e.url,{responseType:r,timeout:i,signal:s}),void e.request.then(N=>y(N.data),f);const A=new Blob([S],{type:E}),P=window.URL.createObjectURL(A);h=()=>window.URL.revokeObjectURL(P),e.request=ni(P,{responseType:r,timeout:i,signal:s}),e.request.then(N=>y(new V3e(N.data,E,h)),f)},f),!0)}get test(){return{loadQueue:this._loadQueue}}};g([x({readOnly:!0})],Y9.prototype,"updating",void 0),Y9=g([K("esri.views.3d.support.StreamDataLoader")],Y9);const D3e={numRetries:0};function z3e(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}class V3e{constructor(t,i,r){this.image=t,this.type=i,this.release=r}get isOpaque(){return this.type==="image/jpeg"}}class G3e extends R3e{constructor(t,i,r,s,h){super(s),this.url=t,this.options=i,this.docType=r,this.key=h,this.result=null,this.status=Us.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=D3e.numRetries}}function U3e(e,t,i){return`${e}:${t}:${i}`}var Us;(function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"})(Us||(Us={}));var nO,sO,Ra,oO,aO,lO;(function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"})(nO||(nO={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(sO||(sO={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(Ra||(Ra={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(oO||(oO={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(aO||(aO={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(lO||(lO={}));const q3e=12;class Ai{constructor(t){const i=Ai.checkUnsupported(t);if(Y(i))throw i;const r=t;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=N7(this.spatialReference)||ef(this.spatialReference)||tf(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const s=r.lods.reduce((S,E,A)=>(E.level<S.min&&(S.min=E.level,S.minIndex=A),S.max=Math.max(S.max,E.level),S),{min:1/0,minIndex:0,max:-1/0}),h=r.lods[s.minIndex],y=2**h.level;let f=h.resolution*y,w=h.scale*y;this.levels=new Array(s.max+1);for(let S=0;S<this.levels.length;S++)this.levels[S]={resolution:f,scale:w,tileSize:[f*r.size[0],f*r.size[1]]},f/=2,w/=2}clone(){return new Ai(this.toTileInfo())}toTileInfo(){return new Ly({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,i)=>({level:i,scale:t.scale,resolution:t.resolution}))})}getExtent(t,i,r,s){const h=this.levels[t],y=h.tileSize[0],f=h.tileSize[1];s[0]=this.origin[0]+r*y,s[2]=this.origin[0]+(r+1)*y,s[3]=this.origin[1]-i*f,s[1]=this.origin[1]-(i+1)*f}convertExtentToRadians(t,i){this._isWebMercator?(i[0]=b$(t[0]),i[1]=w$(t[1]),i[2]=b$(t[2]),i[3]=w$(t[3])):this._isGCS&&(i[0]=A1(t[0]),i[1]=A1(t[1]),i[2]=A1(t[2]),i[3]=A1(t[3]))}getExtentGeometry(t,i,r,s=new Ut){return this.getExtent(t,i,r,aa),s.spatialReference=this.spatialReference,s.xmin=aa[0],s.ymin=aa[1],s.xmax=aa[2],s.ymax=aa[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(t){if(t==null)return!1;let i=!1;for(;this.levels.length<=t;){const r=this.levels[this.levels.length-1],s=r.resolution/2;this.levels.push({resolution:s,scale:r.scale/2,tileSize:[s*this.pixelSize,s*this.pixelSize]}),i=!0}return i}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const i=this.levels[0].scale;return t>=i?0:Math.log(i/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof Ai)){if(Ai.checkUnsupported(t))return!1;t=new Ai(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,t.levels.length)-1,r=this.levels[i].resolution;let s=.5*r;return!Fa(t.origin[0],this.origin[0],s)||!Fa(t.origin[1],this.origin[1],s)?!1:(s=.5*r/2**i/this.pixelSize*q3e,Fa(r,t.levels[i].resolution,s))}rootTilesInExtent(t,i=null,r=1/0){const s=new Array,h=this.levels[0].tileSize;if(oe(t)||h[0]===0||h[1]===0)return s;Ai.computeRowColExtent(t,h,this.origin,aa);let y=aa[1],f=aa[3],w=aa[0],S=aa[2];const E=S-w,A=f-y;if(E*A>r){const P=Math.floor(Math.sqrt(r));A>P&&(y=y+Math.floor(.5*A)-Math.floor(.5*P),f=y+P),E>P&&(w=w+Math.floor(.5*E)-Math.floor(.5*P),S=w+P)}for(let P=y;P<f;P++)for(let N=w;N<S;N++)s.push([0,P,N]);return Y(i)&&(i[0]=this.origin[0]+w*h[0],i[1]=this.origin[1]-f*h[1],i[2]=this.origin[0]+S*h[0],i[3]=this.origin[1]-y*h[1]),s}static computeRowColExtent(t,i,r,s){const h=.001*(t[2]-t[0]+(t[3]-t[1]));s[0]=Math.max(0,Math.floor((t[0]+h-r[0])/i[0])),s[2]=Math.max(0,Math.ceil((t[2]-h-r[0])/i[0])),s[1]=Math.max(0,Math.floor((r[1]-t[3]+h)/i[1])),s[3]=Math.max(0,Math.ceil((r[1]-t[1]-h)/i[1]))}static isPowerOfTwo(t){const i=t.lods,r=i[0].resolution*2**i[0].level;return!i.some(s=>!IX(s.resolution,r/2**s.level))}static hasGapInLevels(t){const i=t.lods.map(r=>r.level);i.sort((r,s)=>r-s);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(t){const i=t.size[1];return i===t.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(t){const i=t.origin;return t.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new ne("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return oe(t)?tT():t.lods.length<1?new ne("tilingscheme:generic","Tiling scheme must have at least one level"):Ai.isPowerOfTwo(t)?Ai.hasGapInLevels(t)?new ne("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Ai.tileSizeSupported(t)?Ai.hasOriginPerLODs(t)?new ne("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new ne("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new ne("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,i){const r=t[2]-t[0],s=t[3]-t[1],h=mf(i),y=1.2*Math.max(r,s),f=256,w=96,S=.0254,E=new Ai(new Ly({size:[f,f],origin:{x:t[0]-.5*(y-r),y:t[3]+.5*(y-s)},lods:[{level:0,resolution:y/f,scale:1/(f/w*S/(y*h))}],spatialReference:i}));return E.ensureMaxLod(20),E}static makeWebMercatorAuxiliarySphere(t){const i=new Ai(Ai.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(t),i}static makeGCSWithTileSize(t,i=256,r=16){const s=256/i,h=new Ai(new Ly({size:[i,i],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*s,scale:295497598570834e-6*s}]}));return h.ensureMaxLod(r),h}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function tT(){return new ne("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Ai.WebMercatorAuxiliarySphereTileInfo=new Ly({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:ot.WebMercator},spatialReference:ot.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),Ai.WebMercatorAuxiliarySphere=Ai.makeWebMercatorAuxiliarySphere(19);const aa=Ss(),uO=64;AX(J5/10);const B3e=Ss();Ai.WebMercatorAuxiliarySphere.getExtent(0,0,0,B3e);Ss([-180,-90,180,90]);const ad=Lr(),H3e=Lr(),hl=Lr(),cl=Lr();function W3e(e,t,i=0){const r=e.extent;if(oe(r))return!1;if(i===0)return YX(r,t);const s=Math.min(r[2]-r[0],r[3]-r[1]);return ZX(r,t,i*s)}function Tv(e,t,i,r){tm(ad,i),ad[r]=t[r];const s=Ey(ad,ad,t),h=Ey(H3e,e,t),y=yw(h,s),f=yw(s,s);let w;w=y<=0?t:f<=y?i:ON(ad,t,IM(s,s,y/f));const S=Ey(ad,e,w);return Math.PI/2-Math.atan(S[2]/Math.sqrt(S[0]*S[0]+S[1]*S[1]))}function J3e(e,t,i){const r=e.extent;if(oe(r))return 0;hl[0]=r[0],hl[1]=r[1],hl[2]=i,cl[0]=r[2],cl[1]=r[3],cl[2]=i;let s=1/0,h=1/0;return t[0]<hl[0]?s=Tv(t,hl,cl,0):t[0]>cl[0]&&(s=Tv(t,cl,hl,0)),t[1]<hl[1]?h=Tv(t,hl,cl,1):t[1]>cl[1]&&(h=Tv(t,cl,hl,1)),Math.min(s,h)}function K3e(e,t,i){if(oe(e))return tT();if(e.spatialReference.isGeographic&&!N7(e.spatialReference))return new ne("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=Ai.checkUnsupported(e);if(Y(r))return r;if(oe(i))return new ne("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const s=Y3e(e,i);if(s)return s;const h=e.spatialReference;return Y(t)&&!(h.equals(t)||t.isWGS84&&h.isWebMercator)?new ne("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function Y3e(e,t){const i=e.lods,r=i[0].resolution*2**i[0].level,s=[r*e.size[0],r*e.size[1]],h=[e.origin.x,e.origin.y],y=WX(t),f=Ss();Ai.computeRowColExtent(y,s,h,f);const w=(f[2]-f[0])*(f[3]-f[1]);if(w>uO){const S=i[0].scale*2**i[0].level;let E=Math.max((y[3]-y[1])/e.size[1],(y[2]-y[0])/e.size[0])*S/r;const A=Math.floor(Math.log(E)/Math.log(10));return E=Math.ceil(E/10**A)*10**A,new ne("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(S).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+E.toLocaleString()+".",{level0Scale:S,suggestedLevel0Scale:E,requiredNumRootTiles:w,allowedNumRootTiles:uO})}return null}const Z3e=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:W3e,tiltToExtentEdge:J3e,checkIfTileInfoSupportedForViewSR:K3e},Symbol.toStringTag,{value:"Module"}));function X3e(){return!0}function Q3e(){return 0}function e_e(e,t){if(oe(e))return tT();const i=e.lods.length-1,r=e.spatialReference,s=N7(r)||ef(r)||tf(r);if(r.isWebMercator){if(!Ai.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new ne("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!s)return new ne("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Ai.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new ne("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new ne("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return Y(t)&&!e.spatialReference.equals(t)?new ne("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const t_e=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:X3e,tiltToExtentEdge:Q3e,checkIfTileInfoSupportedForViewSR:e_e},Symbol.toStringTag,{value:"Module"})),i_e={[tu.Global]:t_e,[tu.Local]:Z3e};function z6(e,t,i,r){return i_e[r].checkIfTileInfoSupportedForViewSR(e,i,t)}function r_e(e,t,i){const r=nte(e);if(Y(r)){if(!Je.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const s=r.find(h=>z6(h.tileInfo,h.fullExtent,t,i)==null);if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}return{tileInfo:null,fullExtent:null}}Ra.NORTH,Ra.EAST,Ra.SOUTH,Ra.WEST;Ra.NORTH_EAST,Ra.SOUTH_EAST,Ra.SOUTH_WEST,Ra.NORTH_WEST;function n_e(e,t){return e!=null&&(t==null||(t===tu.Local?!e.isGeographic||e.isWGS84||e.wkid===Ws.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===Ws.CGCS2000||e.wkid===Ws.GCSMARS2000||e.wkid===Ws.GCSMARS2000_SPHERE||e.wkid===Ws.GCSMOON2000))}async function s_e(e,t={}){await a_e(e,t),di(t)}async function o_e(e,t={}){const{basemap:i,view:r}=e;if(di(t),"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(t),di(t),i.baseLayers.length===0))return;const s=i.baseLayers.getItemAt(0);if(!rte(s))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;hO()}await s.load(t),di(t);const h=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo.spatialReference:null]).filter(Boolean);h.length!==0&&h.every(y=>!r.spatialReference.equals(y))&&hO()}function hO(){throw new ne("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function a_e(e,t){const{basemap:i,view:r}=e;if(await i.load(t),i.baseLayers.length===0)return;const s=i.baseLayers.concat(i.referenceLayers).toArray().filter(y=>!Q$(y)).map(y=>new ne("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:y,operationalLayerType:y.operationalLayerType||"unknown"}));if(s.length)throw s[0];const h=i.baseLayers.getItemAt(0);if(Q$(h)){try{await h.load(t)}catch(y){const f="basemap-compatibility:unknown-error",w="Unknown basemap compatibility error",{name:S=f,message:E=w,details:A}=y;throw new ne(S,E,A)}l_e(h,r)}}function l_e(e,t){const i=t.state.viewingMode;if(!i)return;let r,s;if((e==null?void 0:e.type)==="wmts"){const w=r_e(e,t.spatialReference,i);if(oe(w.tileInfo))throw new ne("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=w.tileInfo,s=w.fullExtent}else r=e.tileInfo,s=e.fullExtent;if(oe(r))return;if(!n_e(r.spatialReference,i))throw new ne(`basemapgalleryitem:spatial-reference-unsupported-${lC(i)}`,`Basemap spatial reference is unsupported in ${lC(i)} mode`);const h=r.spatialReference.isGeographic,y=(e==null?void 0:e.type)==="vector-tile"?r.getOrCreateCompatible(256,h?1:2):null;if(i===tu.Global){let w=z6(r,s,null,i);if(w&&(e==null?void 0:e.type)==="vector-tile"&&Y(s)&&y&&!z6(y,s,null,i)&&(w=null),w){const S=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new ne(`basemapgalleryitem:tiling-scheme-unsupported-${S}-global`,"Basemap tiling scheme is unsupported in global mode",{error:w})}}else if(Ai.checkUnsupported(r))throw new ne("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const f=t.get("basemapTerrain.tilingScheme");if(f&&!f.compatibleWith(r)&&((e==null?void 0:e.type)!=="vector-tile"||!y||!f.compatibleWith(y)))throw new ne("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let $a=class extends nu(qe){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([$e(()=>{var t;return(t=this.basemap)==null?void 0:t.loadStatus},e),$e(()=>this.compatibilityFunction,e),$e(()=>{var t;return this.view&&"basemapTerrain"in this.view&&((t=this.view.basemapTerrain)==null?void 0:t.tilingScheme)},e),$e(()=>{var t;return(t=this.view)==null?void 0:t.ready},e),$e(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return tL(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var r;this._cancelRefresh(),this._set("state","loading");const e=(r=this.basemap)==null?void 0:r.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then(()=>kh(()=>!this._spatialReferenceTask.updating,i)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{Br(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};g([x({readOnly:!0})],$a.prototype,"_spatialReferenceTask",null),g([x()],$a.prototype,"basemap",null),g([x()],$a.prototype,"compatibilityFunction",void 0),g([x({readOnly:!0})],$a.prototype,"error",void 0),g([x({readOnly:!0})],$a.prototype,"spatialReference",null),g([x({readOnly:!0})],$a.prototype,"state",void 0),g([x()],$a.prototype,"view",void 0),$a=g([K("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],$a);const IU=$a,AU=Je.ofType(Ip);let by=class extends qe{constructor(e){super(e),this.basemaps=new AU}get state(){return"ready"}refresh(){}};g([x({type:AU})],by.prototype,"basemaps",void 0),g([x({readOnly:!0})],by.prototype,"state",null),by=g([K("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],by);const kU=by,CU=Je.ofType(Ip),OU="esri.widgets.BasemapGallery.support.PortalBasemapsSource",u_e=Le.getLogger(OU);let Ol=class extends Sn.LoadableMixin(pf(kU)){constructor(e){super(e),this._handles=new er,this.basemaps=new CU,this.filterFunction=null,this.portal=ur.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([$e(()=>{var e,t;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(t=this.portal)==null?void 0:t.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Wt)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(i)}catch(i){if(Br(i))throw i;u_e.warn(new ne("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};g([x({readOnly:!0,type:CU})],Ol.prototype,"basemaps",void 0),g([x()],Ol.prototype,"filterFunction",void 0),g([x({type:ur})],Ol.prototype,"portal",void 0),g([x()],Ol.prototype,"query",void 0),g([x({readOnly:!0})],Ol.prototype,"state",null),g([x()],Ol.prototype,"updateBasemapsCallback",void 0),Ol=g([K(OU)],Ol);const Wb=Ol,PU=Je.ofType(IU);function h_e(e){return e&&e.declaredClass==="esri.portal.Portal"}function c_e(e){return e&&!(e instanceof Wb)&&(!!e.portal||!!e.query)}function p_e(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let Po=class extends nu(Sn){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new PU,this.source=new Wb,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([$e(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),ro(()=>{var t;return(t=this.source)==null?void 0:t.basemaps},"change",e,{onListenerAdd:e})])}get activeBasemap(){var e,t,i;return(i=(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)!=null?i:null}set activeBasemap(e){var r,s;if(!this.view.map)return;const t=typeof e=="string"?Ip.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const i=t.spatialReference||((s=(r=this.items)==null?void 0:r.find(h=>this.basemapEquals(t,h.basemap)))==null?void 0:s.spatialReference);if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const h=this.view.spatialReference;if(Y(i)&&!ki(h,i)&&!Ka(this.view.spatialReference,i)&&!Zl())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void Xl().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),Y(i)&&!ki(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?s_e:o_e}set compatibilityFunction(e){Y(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||Je.isCollection(e)?new kU({basemaps:e}):h_e(e)?new Wb({portal:e}):c_e(e)?new Wb(e):p_e(e)?e:null}get state(){var e;return((e=this.view)==null?void 0:e.ready)&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return _te(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Sn.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){var r;const e=(r=this.source)==null?void 0:r.basemaps,{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach(s=>s.destroy()),e&&this.items.addMany(e.map(s=>new IU({basemap:s,compatibilityFunction:i,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};g([x()],Po.prototype,"_loadingProjectionEngine",void 0),g([x()],Po.prototype,"activeBasemap",null),g([x()],Po.prototype,"compatibilityFunction",null),g([x({readOnly:!0,type:PU})],Po.prototype,"items",void 0),g([x()],Po.prototype,"source",void 0),g([Mt("source")],Po.prototype,"castSource",null),g([x({readOnly:!0})],Po.prototype,"state",null),g([x()],Po.prototype,"view",void 0),Po=g([K("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Po);const d_e=Po,ts={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let us=class extends Er{constructor(e,t){super(e,t),this._handles=new er,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=ts.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new d_e}initialize(){const e=this._handles;this.own([ro(()=>this.viewModel.items,"change",t=>{const i="basemap-gallery-item-changes",{added:r,moved:s}=t;e.remove(i),e.add([...r,...s].map(h=>$e(()=>h.state,()=>this.scheduleRender())),i),this.scheduleRender()}),e,sn(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return ge(()=>import("./calcite-scrim.070ff48e.js"),[])}render(){const e=this.get("source.state")==="loading",t=this.disabled||this.get("viewModel.state")==="disabled",i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),r={[ts.sourceLoading]:e,[ts.disabled]:t},s=e?ue("div",{class:ts.loader,key:"esri-basemap-gallery__loader"}):null,h=e?null:i.length>0?ue("ul",{class:ts.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},i):ue("div",{class:ts.emptyMessage,key:"esri-basemap-gallery__empty-message"},ue(d3,{level:this.headingLevel},this.messages.noBasemaps));return ue("div",{class:this.classes(ts.base,r)},s,h)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||Ft("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),r=e.get("basemap.portalItem.snippet"),s=e.get("error.message")||r||i,{viewModel:h}=this,y=!this.disabled&&h.state!=="disabled"&&e.state==="ready"?0:-1,f=h.basemapEquals(e.basemap,this.activeBasemap),w=h.state==="loading",S={[ts.selectedItem]:f,[ts.itemError]:e.state==="error"};return ue("li",{"aria-selected":f.toString(),bind:this,class:this.classes(ts.item,S),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:y,title:s},ue("img",{alt:"",class:ts.itemThumbnail,src:t}),ue("div",{class:ts.itemTitle},i),e.state==="loading"||f&&w?ue("calcite-scrim",null,ue("span",{"aria-hidden":"true",role:"presentation",class:ts.loaderAnimation})):null)}};g([We("viewModel.activeBasemap")],us.prototype,"activeBasemap",void 0),g([x()],us.prototype,"disabled",void 0),g([x()],us.prototype,"headingLevel",void 0),g([x()],us.prototype,"iconClass",void 0),g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],us.prototype,"label",void 0),g([x(),Sr("esri/widgets/BasemapGallery/t9n/BasemapGallery")],us.prototype,"messages",void 0),g([We("viewModel.source")],us.prototype,"source",void 0),g([We("viewModel.view")],us.prototype,"view",void 0),g([x()],us.prototype,"viewModel",void 0),g([jn()],us.prototype,"_handleClick",null),us=g([K("esri.widgets.BasemapGallery")],us);const f_e=us;function y_e(e){const{wkid:t}=e;if(J[t]!=null)return J.values[J[t]];const{wkt:i}=e,r=i.lastIndexOf(",")+1,s=i.lastIndexOf("]]");return parseFloat(i.substring(r,s))}function cO(e,t){return e&&e.includes(t)}function pO(e,t){const{x:i,y:r}=e==="decimal-degrees"?zl(t,!0):t;return[i,r]}function dO({state:{paddedViewState:e},spatialReference:t,width:i}){return t.isWrappable&&e.worldScreenWidth<i}let r0=class extends qe{constructor(e){super(e),this.scaleComputedFrom=_r(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const i=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(oe(i))return null;if(t==="metric")return this._getScaleBarProps(e,i,"metric");const r=i/1.609;return this._getScaleBarProps(e,r,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:i,wkt:r}=e;return t||cO(r,"WGS_1984_Web_Mercator")?"decimal-degrees":J[i]!=null||cO(r,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:i,spatialReference:r}=e,s=this._getLocationUnit();if(s==="linear-unit")return i.extent.width*y_e(r)/1e3;const[h,y]=this._getScaleMeasuringPoints(e,t),f=s==="decimal-degrees"||r.isGeographic&&!C3(r)?ot.WGS84:r,w=new tn({paths:[[pO(s,h),pO(s,y)]],spatialReference:f}),S=$D(w,10);let E;try{[E]=Pwe([S],"kilometers")}catch{return null}return E}_getScaleMeasuringPoints(e,t){const{width:i,height:r,position:s,spatialReference:h}=e;if(dO(e)){const{valid:S}=vs(h);return[new et(S[0],0,h),new et(S[1],0,h)]}let y=t.y-s[1];y>r?y=r:y<0&&(y=0);const f=_r(0,y),w=_r(i,y);return[e.toMap(f),e.toMap(w)]}_getScaleBarProps(e,t,i){const{view:r}=this;let s=e*t/(dO(r)?r.state.paddedViewState.worldScreenWidth:r.width),h=i==="metric"?"km":"mi";s<.1&&(h==="mi"?(s*=5280,h="ft"):h==="km"&&(s*=1e3,h="m"));let y=0;for(;s>=1;)s/=10,y++;const f=this._getConstraints(s);if(!f)return null;const{min:w,max:S}=f,E=S/s>=s/w?w:S;return{length:e*(E/s),value:10**y*E,unit:h}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};g([x()],r0.prototype,"scaleComputedFrom",void 0),g([x({readOnly:!0})],r0.prototype,"state",null),g([x()],r0.prototype,"view",void 0),r0=g([K("esri.widgets.Scalebar.ScaleBarViewModel")],r0);const m_e=r0,Oi={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function $v(e){return 2*e}let No=class extends Er{constructor(e,t){super(e,t),this.label=void 0,this.messages=null,this.unit="non-metric",this.view=null,this.viewModel=new m_e}initialize(){this.own([$e(()=>{const{view:e}=this;return[e==null?void 0:e.stationary,e==null?void 0:e.center,e==null?void 0:e.scale,e==null?void 0:e.zoom]},([e])=>{e&&this.scheduleRender()})])}set style(e){const t=this.unit==="dual"?"line":e;this._set("style",t)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}render(){const e=this.get("viewModel.state")==="disabled",t={[Oi.disabled]:e};let i,r;if(!e){const{unit:s,style:h}=this,y=s==="metric"||s==="dual",f=50;if(s==="non-metric"||s==="dual"){const w=this.viewModel.getScaleBarProperties(f,"non-metric");w&&(r=h==="ruler"?this._renderRuler(w):this._renderLine(w,"bottom"))}if(y){const w=this.viewModel.getScaleBarProperties(f,"metric");w&&(i=h==="ruler"?this._renderRuler(w):this._renderLine(w,"top"))}}return ue("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Oi.base,t)},i,r)}_renderRuler(e){const t=$v(Math.round(e.length)),{messages:i}=this,r=i[e.unit]||i.unknownUnit,s=`${$v(e.value)} ${r}`;return ue("div",{class:this.classes(Oi.barContainer,Oi.rulerBarContainer),key:"esri-scale-bar__ruler"},ue("div",{class:Oi.ruler,styles:{width:`${t}px`}},ue("div",{class:Oi.rulerBlock}),ue("div",{class:Oi.rulerBlock}),ue("div",{class:Oi.rulerBlock}),ue("div",{class:Oi.rulerBlock})),ue("div",{class:this.classes(Oi.labelContainer,Oi.rulerLabelContainer)},ue("div",{class:Oi.label},"0"),ue("div",{class:Oi.label},s)))}_renderLine(e,t){const{messages:i}=this,r=i[e.unit]||i.unknownUnit,s=`${$v(e.value)} ${r}`,h={[Oi.topLabelContainer]:t==="top",[Oi.bottomLabelContainer]:t==="bottom"},y=ue("div",{class:this.classes(Oi.labelContainer,Oi.lineLabelContainer,h),key:"esri-scale-bar__label"},ue("div",{class:Oi.label},s)),f={[Oi.topLine]:t==="top",[Oi.bottomLine]:t==="bottom"},w=$v(Math.round(e.length)),S=ue("div",{class:this.classes(Oi.line,f),key:"esri-scale-bar__line",styles:{width:`${w}px`}});return ue("div",{class:this.classes(Oi.barContainer,Oi.lineBarContainer),key:"esri-scale-bar__line-container"},[S,y])}_handleRootCreateOrUpdate(e){const t=this.viewModel;if(!t)return;const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset,h=_r(r,s);(h.x!==t.scaleComputedFrom.x||h.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=h)}};g([x({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],No.prototype,"label",void 0),g([x(),Sr("esri/widgets/ScaleBar/t9n/ScaleBar")],No.prototype,"messages",void 0),g([x()],No.prototype,"style",null),g([Mt("style")],No.prototype,"castStyle",null),g([x()],No.prototype,"unit",void 0),g([Mt("unit")],No.prototype,"castUnit",null),g([We("viewModel.view")],No.prototype,"view",void 0),g([x()],No.prototype,"viewModel",void 0),No=g([K("esri.widgets.ScaleBar")],No);const g_e=No,iT=new e7({basemap:"gray-vector"}),v_e=new sf({title:"Zoning Details",defaultPopupTemplateEnabled:!0,content:[{type:"fields",fieldInfos:[{fieldName:"ZONE_LABEL",label:"ZONE_LABEL"},{fieldName:"DESC_ENG",label:"DESC_ENG"},{fieldName:"DESC_CHT",label:"DESC_CHT"},{fieldName:"SPUSE_ENG",label:"SPUSE_ENG"},{fieldName:"SPUSE_CHT",label:"SPUSE_CHT"},{fieldName:"PLAN_NO",label:"PLAN_NO"},{fieldName:"NAME_ENG",label:"NAME_ENG"},{fieldName:"NAME_CHT",label:"NAME_CHT"},{fieldName:"PUB_DATE",label:"PUB_DATE"},{fieldName:"APRV_DATE",label:"APRV_DATE"},{fieldName:"SECT_NO",label:"SECT_NO"}]}]}),rT=new Gm({url:"https://services5.arcgis.com/xH8UmTNerx1qYfXM/ArcGIS/rest/services/ZONE_MASTER_LATEST/FeatureServer",outFields:["*"],popupTemplate:v_e}),b_e=new Gm({url:"https://services5.arcgis.com/xH8UmTNerx1qYfXM/arcgis/rest/services/PLAN_SCHEME_AREA_LATEST/FeatureServer",outFields:["*"]});iT.add(rT,0);iT.add(b_e);const Ms=new Twe({container:"viewDiv",map:iT,zoom:14,center:[114.172,22.281],constraints:{maxScale:0,minScale:2e5,rotationEnabled:!1}}),nT=new UE,sT=new UE;Ms.map.addMany([sT,nT]);const V6=rT;let I0=0;const w_e=new g_e({view:Ms,unit:"metric"});Ms.ui.add(w_e,{position:"bottom-right"});const __e=document.getElementById("queryDiv");rT.load().then(()=>{__e.style.display="block"});Ms.ui.add([queryDiv],"bottom-left");const NU=new TU({expandIconClass:"esri-icon-question",expandTooltip:"How to use",view:Ms,expanded:!0,content:"<div class='expand-widget'><b>Click</b> the buttons to <b>draw</b> your area of interest. For lines and polygons, <b>double click</b> to finish drawing. <br><br><b>Move</b> the slider to change the buffer distance.</div>"});Ms.ui.add(NU,"top-left");Ms.watch("focused",function(e){e&&(NU.expanded=!1)});const RU=new f_e({view:Ms,container:document.createElement("div")}),LU=new TU({view:Ms,content:RU,expandTooltip:"Change Basemap"});RU.watch("activeBasemap",function(){(Ms.heightBreakpoint==="xsmall"||Ms.widthBreakpoint==="xsmall")&&LU.collapse()});Ms.ui.add(LU,"top-left");let Da=null;const D3=new A3e({layer:nT,defaultUpdateOptions:{tool:"reshape",toggleToolOnClick:!1},pointSymbol:{type:"text",color:[51,51,204,.9],text:"\uE61D",font:{size:24,family:"CalciteWebCoreIcons"}},polylineSymbol:{type:"simple-line",color:[51,51,204,.5],width:"4px"},polygonSymbol:{type:"simple-fill",color:[51,51,204,.4],style:"solid",outline:{color:"white",width:1}},view:Ms,defaultCreateOptions:{hasZ:!1}});D3.on("create",function(e){e.state==="complete"&&(Da=e.graphic.geometry,EO(),aT())});D3.on("update",function(e){e.state==="complete"&&(Da=e.graphics[0].geometry,EO(),aT())});document.getElementById("point-geometry-button").addEventListener("click",oT);document.getElementById("line-geometry-button").addEventListener("click",oT);document.getElementById("polygon-geometry-button").addEventListener("click",oT);function oT(e){const t=e.target.value;FU(),D3.create(t)}const x_e=new P3e({container:"bufferNum",min:0,max:1e3,steps:10,visibleElements:{labels:!0},precision:0,labelFormatFunction:function(e,t){return e.toString()+"m"},values:[0]});x_e.on(["thumb-change","thumb-drag"],S_e);function S_e(e){I0=e.value,aT()}document.getElementById("clearResults").addEventListener("click",FU);function FU(){Da=null,D3.cancel(),nT.removeAll(),sT.removeAll(),Uee(),document.getElementById("count").innerHTML=0,document.getElementById("query-geometry-size-ha").innerHTML=0,document.getElementById("query-geometry-size-sqkm").innerHTML=0,document.getElementById("OZP-size-ha").innerHTML=0,document.getElementById("OZP-size-sqkm").innerHTML=0}const M_e=["R(A)","R(B)","R(C)","G/IC","O","C","MRDJ"],E_e=nM(e=>{if(!!Da)return T_e(e)});async function aT(){Dee(I0,Da,sT),$_e(Da,I0),E_e(M_e).then(i=>{ww(JR,i.map(Math.round))}).catch(i=>{i.name!=="AbortError"&&console.error(i)});const e=await OH(V6,Da,I0);console.log(e),ww(WR,[e.zone_RA,e.zone_RB,e.zone_RC,e.zone_GIC,e.zone_O,e.zone_C,e.zone_MRDJ,e.zone_OTHERS]),I_e(e),document.querySelector(".query-stats").scrollIntoView({behavior:"smooth"})}async function T_e(e){console.time("test_parallel");let t;try{t=await Promise.all(e.map(s=>fO(I0,s))),console.log("selectedZoningAreas: ",t)}catch(s){console.error("error: ",s)}console.timeEnd("test_parallel");const i=await fO(I0);console.log("totalAreaInOZP: ",i),document.getElementById("OZP-size-ha").innerHTML=(i*1e-4).toLocaleString(),document.getElementById("OZP-size-sqkm").innerHTML=(i*1e-6).toLocaleString();const r=t.reduce((s,h)=>s+h,0);return t.push(i-r),console.log("selectedZoningAreas",t),t}function $_e(e,t){let i=0;if(t>0){const r=E2(e,t,"meters");i=cw(r,"square-meters")}else e.type==="polygon"&&(i=cw(e,"square-meters"));document.getElementById("query-geometry-size-ha").innerHTML=(i*1e-4).toLocaleString(),document.getElementById("query-geometry-size-sqkm").innerHTML=(i*1e-6).toLocaleString()}async function fO(e,t){if(e===0&&Da.type!=="polygon")return console.log("The query geometry is a point/line. Returning area of 0."),0;let i=0;const r=V6.createQuery();r.geometry=Da,r.distance=e,r.spatialRelationship="intersects",t!==void 0&&(r.where=`ZONE_MAS = '${t}'`,console.log(`Query zoning of ${t} intersects with buffer`));const s=await V6.queryFeatures(r);if(s.features.length>0){const h=[];s.features.forEach(function(S){h.push(S.geometry)});const y=E2(Da,e,"meters"),f=YP(h),w=KP(y,f);i=cw(w,"square-meters")}return i}function I_e(e){const t=Object.values(e).reduce((i,r)=>i+r,0);document.getElementById("count").innerHTML=t}const d2=document.querySelector(".sidebar"),G6=document.querySelector("#collapse-button");d2.classList.toggle("open");MO(d2,G6);G6.addEventListener("click",()=>{d2.classList.toggle("open"),MO(d2,G6)});export{ot as $,_S as A,ur as B,X2 as C,V4 as D,Nr as E,rf as F,Ep as G,Lg as H,g as I,x as J,K,iE as L,Ut as M,qe as N,jo as O,we as P,Jde as Q,cP as R,_5e as S,lt as T,ni as U,Sn as V,nM as W,mne as X,Mn as Y,Ur as Z,ge as _,Cd as a,nu as a$,Ua as a0,Joe as a1,Koe as a2,Yoe as a3,Hde as a4,Bde as a5,Le as a6,Vte as a7,q2 as a8,t1 as a9,Or as aA,YN as aB,rG as aC,Lr as aD,Db as aE,P2 as aF,dve as aG,cve as aH,tG as aI,I6 as aJ,Cf as aK,TM as aL,ta as aM,of as aN,Oa as aO,Gr as aP,rM as aQ,pG as aR,A0 as aS,b2 as aT,$e as aU,Wt as aV,O4e as aW,k4e as aX,Kn as aY,wr as aZ,H2 as a_,j7 as aa,j_e as ab,Gm as ac,Ch as ad,$xe as ae,As as af,e8 as ag,qte as ah,E5e as ai,P4e as aj,Qi as ak,YH as al,XH as am,D_e as an,C_e as ao,F_e as ap,M9e as aq,A_e as ar,l5 as as,gp as at,to as au,bi as av,X_e as aw,Br as ax,di as ay,lG as az,F0 as b,jye as b$,B7 as b0,ri as b1,_r as b2,$M as b3,IM as b4,qr as b5,et as b6,sn as b7,T3 as b8,PX as b9,T2 as bA,ZX as bB,a2 as bC,Yxe as bD,H9e as bE,L9e as bF,l9e as bG,C2 as bH,ewe as bI,JX as bJ,KX as bK,km as bL,mM as bM,hU as bN,p2 as bO,s9e as bP,$2 as bQ,dxe as bR,fxe as bS,pxe as bT,eG as bU,jE as bV,B0 as bW,Do as bX,lV as bY,cV as bZ,hV as b_,HV as ba,E3 as bb,WV as bc,At as bd,Lge as be,T4e as bf,Wge as bg,Np as bh,$4e as bi,er as bj,fP as bk,T5e as bl,vs as bm,Ss as bn,rn as bo,t4e as bp,Rr as bq,xh as br,LP as bs,Bwe as bt,z4e as bu,I2 as bv,UD as bw,o0e as bx,mm as by,lE as bz,hr as c,J6 as c$,Ca as c0,wm as c1,x3 as c2,F9e as c3,Zo as c4,Ba as c5,D9e as c6,E9e as c7,rt as c8,SF as c9,De as cA,VL as cB,a0 as cC,rie as cD,Tre as cE,HD as cF,s4e as cG,i4e as cH,Tde as cI,u4e as cJ,yre as cK,P_e as cL,N_e as cM,hae as cN,Age as cO,pve as cP,r0e as cQ,BD as cR,QV as cS,v1 as cT,mf as cU,Aw as cV,Ft as cW,V4e as cX,q4e as cY,U4e as cZ,G4e as c_,Ese as ca,Tse as cb,dP as cc,Y5e as cd,Ga as ce,Zg as cf,ED as cg,o9e as ch,up as ci,Un as cj,h4e as ck,r4e as cl,Dt as cm,AE as cn,wre as co,rxe as cp,_re as cq,txe as cr,cf as cs,ixe as ct,Xoe as cu,Qoe as cv,eae as cw,eo as cx,Gie as cy,p9e as cz,CS as d,ys as d$,Cm as d0,Fh as d1,Mt as d2,ve as d3,Pm as d4,Jo as d5,Nh as d6,jp as d7,Pr as d8,Yn as d9,Gt as dA,Dh as dB,tu as dC,Tt as dD,w6 as dE,u5 as dF,pp as dG,Hn as dH,Hxe as dI,Wxe as dJ,Sf as dK,p3 as dL,Lxe as dM,Fxe as dN,jxe as dO,Dxe as dP,qxe as dQ,zxe as dR,Vxe as dS,Gxe as dT,Uxe as dU,Bxe as dV,Sr as dW,Er as dX,H5e as dY,io as dZ,ue as d_,iu as da,tn as db,Hi as dc,FV as dd,$h as de,ige as df,$E as dg,yw as dh,Ey as di,W5 as dj,OZ as dk,DZ as dl,R_e as dm,a9e as dn,q6 as dp,hM as dq,Mr as dr,ZK as ds,gK as dt,GK as du,Rwe as dv,_m as dw,Eme as dx,UE as dy,l4 as dz,Y as e,Yo as e$,wh as e0,z5e as e1,Ka as e2,bL as e3,oie as e4,B5e as e5,Sxe as e6,BZ as e7,tm as e8,x2 as e9,zh as eA,$ge as eB,PZ as eC,pZ as eD,J2 as eE,vf as eF,BN as eG,Yie as eH,tX as eI,qH as eJ,WZ as eK,kZ as eL,ON as eM,a3e as eN,lr as eO,S6 as eP,Vh as eQ,HZ as eR,A1 as eS,yge as eT,wge as eU,OM as eV,d5e as eW,e5e as eX,J9e as eY,V9e as eZ,L3 as e_,C3 as ea,F4e as eb,cw as ec,bxe as ed,ki as ee,q5e as ef,U5e as eg,RN as eh,RG as ei,fY as ej,Mxe as ek,Pwe as el,vxe as em,Ap as en,FG as eo,jG as ep,D0 as eq,L4e as er,jH as es,R4e as et,eT as eu,ea as ev,XE as ew,F3 as ex,y2 as ey,CE as ez,zM as f,jh as f$,pt as f0,iX as f1,rX as f2,uX as f3,fX as f4,UN as f5,qN as f6,dX as f7,bX as f8,wX as f9,One as fA,S9e as fB,Q9e as fC,bF as fD,Fne as fE,K_e as fF,_U as fG,X4e as fH,Qo as fI,Ql as fJ,IF as fK,$U as fL,r5e as fM,u5e as fN,$we as fO,P9e as fP,tC as fQ,C9e as fR,BO as fS,R9e as fT,sve as fU,jZ as fV,O9e as fW,fZ as fX,gxe as fY,B9e as fZ,eC as f_,QZ as fa,vh as fb,cZ as fc,I9e as fd,Une as fe,FZ as ff,FN as fg,A9e as fh,LN as fi,M$ as fj,O0 as fk,HN as fl,nw as fm,Ww as fn,Ige as fo,dZ as fp,Zie as fq,YR as fr,ro as fs,Za as ft,OG as fu,kf as fv,Z4e as fw,Lne as fx,O_e as fy,mX as fz,Zn as g,sSe as g$,vF as g0,l7 as g1,L7 as g2,ej as g3,w7 as g4,Pne as g5,N4e as g6,J_e as g7,h5e as g8,xxe as g9,ou as gA,_y as gB,dp as gC,Xie as gD,nSe as gE,Qie as gF,q_e as gG,QH as gH,eW as gI,n9e as gJ,r9e as gK,bK as gL,Kie as gM,m5e as gN,s5e as gO,CN as gP,zne as gQ,Txe as gR,qa as gS,hoe as gT,oxe as gU,aO as gV,W9e as gW,CM as gX,nO as gY,tse as gZ,aSe as g_,sR as ga,N9e as gb,Hne as gc,Gne as gd,ZZ as ge,Dne as gf,kwe as gg,Xt as gh,Jxe as gi,Qk as gj,j4e as gk,bv as gl,Yl as gm,jne as gn,F5e as go,LH as gp,Wi as gq,nL as gr,Bs as gs,kge as gt,ese as gu,GZ as gv,age as gw,lge as gx,AZ as gy,Vne as gz,oe as h,rae as h$,lSe as h0,oSe as h1,vge as h2,JZ as h3,eX as h4,XZ as h5,GN as h6,T9e as h7,sse as h8,nse as h9,vve as hA,A3 as hB,cxe as hC,eSe as hD,$5e as hE,JO as hF,m2 as hG,qM as hH,Nm as hI,sm as hJ,zte as hK,yh as hL,_s as hM,UQ as hN,khe as hO,Jb as hP,I5e as hQ,Yme as hR,kh as hS,E4e as hT,Cie as hU,Die as hV,Qc as hW,tae as hX,z2 as hY,iae as hZ,Lm as h_,iSe as ha,LV as hb,Q4e as hc,tSe as hd,gZ as he,fi as hf,Q_e as hg,ah as hh,k_ as hi,rSe as hj,Em as hk,yJ as hl,_V as hm,BH as hn,ale as ho,Mge as hp,o5e as hq,c5e as hr,p5e as hs,Q2 as ht,j2 as hu,U_e as hv,WH as hw,ZQ as hx,ru as hy,fse as hz,L5e as i,pf as i$,ZM as i0,R2 as i1,jF as i2,FX as i3,hxe as i4,Ya as i5,l5e as i6,zH as i7,O5e as i8,N5e as i9,PN as iA,PE as iB,pge as iC,xm as iD,$9e as iE,PM as iF,iM as iG,y5e as iH,Qye as iI,H_e as iJ,Jl as iK,$g as iL,CI as iM,D2 as iN,yf as iO,zp as iP,om as iQ,f7 as iR,X0 as iS,g5e as iT,U9e as iU,z9e as iV,XX as iW,YX as iX,q9e as iY,M4e as iZ,S2 as i_,P5e as ia,iQ as ib,rQ as ic,Exe as id,Nxe as ie,qee as ig,Y9e as ih,t5e as ii,G9e as ij,f5e as ik,bve as il,a5e as im,Z9e as io,Kxe as ip,U2 as iq,A5e as ir,_xe as is,ave as it,X9e as iu,lve as iv,i5e as iw,b5e as ix,n5e as iy,v5e as iz,Je as j,$p as j$,L_e as j0,IO as j1,Abe as j2,TO as j3,jw as j4,NN as j5,Tp as j6,je as j7,C4e as j8,Y6 as j9,Toe as jA,B2 as jB,rm as jC,zm as jD,foe as jE,Ly as jF,z_e as jG,e9e as jH,yne as jI,Aa as jJ,KS as jK,Zw as jL,Fi as jM,AO as jN,nm as jO,Sh as jP,pR as jQ,S5e as jR,Xs as jS,F2 as jT,Y0 as jU,v_ as jV,k5e as jW,Wve as jX,I4e as jY,A4e as jZ,Jn as j_,w$ as ja,t9e as jb,ef as jc,tf as jd,Ive as je,x5e as jf,qne as jg,FO as jh,gs as ji,D4e as jj,Rk as jk,LC as jl,Gs as jm,Ja as jn,mte as jo,mK as jp,ti as jq,Cxe as jr,Ixe as js,Vj as jt,Yhe as ju,j9e as jv,YF as jw,WX as jx,$ne as jy,_oe as jz,HA as k,no as k$,vw as k0,H0 as k1,soe as k2,noe as k3,lxe as k4,tN as k5,d9e as k6,oJ as k7,b9e as k8,f9e as k9,T$ as kA,Sle as kB,xle as kC,G5e as kD,It as kE,mxe as kF,OP as kG,j0 as kH,Jr as kI,zn as kJ,Xe as kK,Cve as kL,fre as kM,Jc as kN,yn as kO,mn as kP,Vr as kQ,Qa as kR,Cb as kS,bm as kT,ME as kU,i2 as kV,Ri as kW,iye as kX,Th as kY,Qr as kZ,eye as k_,m9e as ka,y9e as kb,g9e as kc,Yy as kd,Zs as ke,qY as kf,v9e as kg,sf as kh,nxe as ki,d7 as kj,wR as kk,bp as kl,Zl as km,Xl as kn,ES as ko,Mi as kp,MS as kq,$S as kr,Rw as ks,Zae as kt,Bge as ku,y0 as kv,BM as kw,L$ as kx,u9e as ky,Rh as kz,n0e as l,aU as l$,K1e as l0,B1e as l1,q1e as l2,Pp as l3,fs as l4,Zz as l5,k0e as l6,j1e as l7,V1e as l8,mt as l9,X1e as lA,cye as lB,cE as lC,S4e as lD,z1e as lE,D1e as lF,G1e as lG,U1e as lH,NQ as lI,W5e as lJ,L0 as lK,Ay as lL,Ix as lM,UJ as lN,k2e as lO,Q5e as lP,lre as lQ,nU as lR,KC as lS,F6 as lT,$2e as lU,I2e as lV,A2e as lW,oU as lX,P2e as lY,N2e as lZ,kt as l_,Yz as la,bs as lb,tye as lc,Y1e as ld,g5 as le,Gp as lf,rye as lg,nye as lh,sye as li,xE as lj,aye as lk,oye as ll,lye as lm,vm as ln,N1e as lo,Q1e as lp,Z1e as lq,H1e as lr,gye as ls,fye as lt,dye as lu,w4e as lv,yye as lw,mye as lx,W1e as ly,J1e as lz,de as m,tie as m$,P1e as m0,OY as m1,Zc as m2,Fw as m3,y5 as m4,l4e as m5,HL as m6,J5e as m7,H9 as m8,QC as m9,b7 as mA,e4e as mB,bM as mC,_9e as mD,x9e as mE,k$ as mF,w9e as mG,AX as mH,Z2 as mI,Ude as mJ,Fde as mK,zA as mL,PD as mM,FC as mN,a4e as mO,Kre as mP,exe as mQ,pP as mR,a9 as mS,l9 as mT,FH as mU,Zxe as mV,Nbe as mW,n4e as mX,y3 as mY,li as mZ,w0 as m_,Y4e as ma,W0 as mb,K4e as mc,vy as md,J4e as me,B9 as mf,JE as mg,B4e as mh,H4e as mi,W4e as mj,sK as mk,pK as ml,M2 as mm,i9e as mn,V_e as mo,G_e as mp,dse as mq,pse as mr,R5e as ms,uL as mt,Xxe as mu,o4e as mv,OD as mw,Rxe as mx,b0 as my,NF as mz,DI as n,C7 as n$,bh as n0,Y_e as n1,AQ as n2,GM as n3,Z_e as n4,yY as n5,gn as n6,Pxe as n7,kxe as n8,Oxe as n9,voe as nA,Bte as nB,n7 as nC,Wte as nD,Jte as nE,Fte as nF,Rte as nG,Ate as nH,Vx as nI,nn as nJ,Ky as nK,yoe as nL,En as nM,V2 as nN,Moe as nO,Kse as nP,ooe as nQ,Poe as nR,I$ as nS,eN as nT,lae as nU,$7 as nV,o3 as nW,xI as nX,vb as nY,K2 as nZ,doe as n_,Axe as na,df as nb,z7 as nc,Cme as nd,bU as ne,N3 as nf,u3e as ng,YE as nh,B6 as ni,o6 as nj,EF as nk,PF as nl,koe as nm,axe as nn,xw as no,Sae as np,Sre as nq,T7 as nr,pae as ns,_n as nt,Hee as nu,ZN as nv,Tne as nw,XM as nx,uxe as ny,moe as nz,gF as o,hye as o$,GF as o0,We as o1,h5 as o2,o9 as o3,TW as o4,vae as o5,gf as o6,dL as o7,cL as o8,pL as o9,rF as oA,Mh as oB,mI as oC,im as oD,woe as oE,boe as oF,Z0 as oG,UR as oH,j5e as oI,Wo as oJ,w5e as oK,bR as oL,goe as oM,D5e as oN,FJ as oO,f$ as oP,J as oQ,V5e as oR,DM as oS,Q2e as oT,s0 as oU,X5e as oV,O3 as oW,b4e as oX,Ek as oY,c4e as oZ,Mk as o_,gL as oa,nde as ob,Oie as oc,sde as od,jL as oe,BL as of,Tw as og,W_e as oh,hL as oi,$w as oj,Hte as ok,wxe as ol,Q0 as om,ji as on,B_e as oo,J$ as op,K9e as oq,K6 as or,xd as os,mae as ot,rw as ou,Wa as ov,za as ow,wN as ox,gR as oy,k_e as oz,rj as p,v4e as p0,x4e as p1,$F as p2,_4e as p3,d4e as p4,p4e as p5,f4e as p6,y4e as p7,g4e as p8,F1e as p9,$k as pa,m4e as pb,uye as pc,_3 as pd,Qz as pe,eV as pf,Z5e as pg,k7 as ph,c9e as pi,Kl as pj,LF as pk,SM as pl,M5e as pm,k9e as pn,h9e as po,pee as pp,K5e as pq,sxe as pr,yxe as ps,Qxe as pt,tU as pu,Js as q,Lt as r,ne as s,bae as t,qde as u,C5e as v,Bce as w,ID as x,bS as y,Wde as z};
