import{d4 as d,d5 as v,aP as n,ar as g,e as r,b6 as G,g as o,d6 as c,d7 as E,I as l,J as h,d8 as p,K as b}from"./index.c449ba0d.js";import{g as _}from"./SnappingVisualizer2D.0cb7b6b9.js";import{_ as S,F as V,G as w,c as f}from"./drawSurfaces.e5b2050e.js";import"./enums.05a6ea95.js";import"./settings.0a04c34d.js";import"./SnappingContext.24f3178c.js";import"./PointSnappingHint.aa80bfe9.js";import"./plane.bb677d0e.js";import"./sphere.f8db6816.js";import"./vectorStacks.fa4b7083.js";import"./quatf64.ddec7ef6.js";import"./mat4f64.84d5c445.js";import"./quat.110a73a9.js";import"./drawUtils.4cf30de4.js";import"./earcut.d30cbec0.js";import"./triangle.b9902d31.js";import"./lineSegment.32e011bb.js";import"./dehydratedFeatures.41fe0a15.js";const x=new d({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),L=new v({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),C=new v({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});let a=class extends S{constructor(e){super(e),this._visualElementGraphics={outline:null,regularVertices:null,activeVertex:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:n(e.activeLineSymbol,x),regularVertices:n(e.regularVerticesSymbol,L),activeVertex:n(e.activeVertexSymbol,C),fill:g(e.activeFillSymbol)}}normalizeCtorArgs(e){const t={...e};return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}initializeGraphic(e){return r(this._visualElementSymbols.fill)&&(e.symbol=this._visualElementSymbols.fill),null}makeDrawOperation(){const e=this.view;return new V({view:e,manipulators:this.manipulators,geometryType:w(this.geometryType),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new f(e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new _(this.internalGraphicsLayer)})}onActiveVertexChanged(e){if(this.geometryType==="point")return null;const[t,i]=e,s=new G({x:t,y:i,spatialReference:this.view.spatialReference});return r(this._visualElementGraphics.activeVertex)?(this._visualElementGraphics.activeVertex.geometry=s,null):(this._visualElementGraphics.activeVertex=new o({geometry:s,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(m),c(()=>{r(this._visualElementGraphics.activeVertex)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=p(this._visualElementGraphics.activeVertex))}))}onOutlineChanged(e){const t=e.clone();if(t.type==="polyline"){const i=t.paths[t.paths.length-1];i.splice(0,i.length-2)}return r(this._visualElementGraphics.outline)?(this._visualElementGraphics.outline.geometry=t,null):(this._visualElementGraphics.outline=new o({geometry:t,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.outline),this.internalGraphicsLayer.graphics.sort(m),c(()=>{r(this._visualElementGraphics.outline)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.outline),this._visualElementGraphics.outline=p(this._visualElementGraphics.outline))}))}onRegularVerticesChanged(e){const t=new E({points:e,spatialReference:this.view.spatialReference});return r(this._visualElementGraphics.regularVertices)?(this._visualElementGraphics.regularVertices.geometry=t,null):(this._visualElementGraphics.regularVertices=new o({geometry:t,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(m),c(()=>{r(this._visualElementGraphics.regularVertices)&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=p(this._visualElementGraphics.regularVertices))}))}};function m(e,t){var i,s,u,y;return((s=(i=e.attributes)==null?void 0:i.displayOrder)!=null?s:-1/0)-((y=(u=t.attributes)==null?void 0:u.displayOrder)!=null?y:-1/0)}l([h()],a.prototype,"activeFillSymbol",void 0),l([h({readOnly:!0})],a.prototype,"type",void 0),l([h({constructOnly:!0,nonNullable:!0})],a.prototype,"view",void 0),a=l([b("esri.views.2d.interactive.draw.DrawGraphicTool2D")],a);export{a as DrawGraphicTool2D};
