import{aF as A,b4 as U,eM as h,ge as F,aD as p}from"./index.4188ada5.js";import{w as j}from"./triangle.ba012858.js";let w=(()=>{const t=new Uint32Array(131072);for(let n=0;n<t.length;++n)t[n]=n;return t})();const D=new Uint16Array([0]),d=(()=>{const t=new Uint16Array(65536);for(let n=0;n<t.length;++n)t[n]=n;return t})();function B(t){if(t===1)return D;if(t<d.length)return new Uint16Array(d.buffer,0,t);if(t>w.length){const n=Math.max(2*w.length,t);w=new Uint32Array(n);for(let r=0;r<w.length;r++)w[r]=r}return new Uint32Array(w.buffer,0,t)}function C(t){if(t===1)return new Uint16Array(D);if(t<d.length)return new Uint16Array(d.slice(0,t));if(t>w.length){const n=new Uint32Array(t);for(let r=0;r<n.length;r++)n[r]=r;return n}return new Uint32Array(w.slice(0,t))}function E(t,n,r){if(!t)return!1;const{size:f,data:a}=t;A(r,0,0,0),A(o,0,0,0);let l=0,c=0;for(let u=0;u<n.length-2;u+=3){const i=n[u+0]*f,m=n[u+1]*f,s=n[u+2]*f;A(e,a[i+0],a[i+1],a[i+2]),A(g,a[m+0],a[m+1],a[m+2]),A(b,a[s+0],a[s+1],a[s+2]);const y=j(e,g,b);y?(h(e,e,g),h(e,e,b),U(e,e,1/3*y),h(r,r,e),l+=y):(h(o,o,e),h(o,o,g),h(o,o,b),c+=3)}return(c!==0||l!==0)&&(l!==0?(U(r,r,1/l),!0):c!==0&&(U(r,o,1/c),!0))}function G(t,n,r){if(!t||!n)return!1;const{size:f,data:a}=t;A(r,0,0,0);let l=-1,c=0;for(let u=0;u<n.length;u++){const i=n[u]*f;l!==i&&(r[0]+=a[i+0],r[1]+=a[i+1],r[2]+=a[i+2],c++),l=i}return c>1&&U(r,r,1/c),c>0}function H(t,n,r,f){if(!t)return!1;const{size:a,data:l}=t;A(f,0,0,0),A(o,0,0,0);let c=0,u=0;const i=n?n.length-1:l.length/a-1,m=i+(r?2:0);for(let s=0;s<m;s+=2){const y=s<i?s:i,q=s<i?s+1:0,z=(n?n[y]:y)*a,x=(n?n[q]:q)*a;e[0]=l[z+0],e[1]=l[z+1],e[2]=l[z+2],g[0]=l[x+0],g[1]=l[x+1],g[2]=l[x+2],U(e,h(e,e,g),.5);const M=F(e,g);M>0?(h(f,f,U(e,e,M)),c+=M):(h(o,o,e),u++)}return c!==0?(U(f,f,1/c),!0):u!==0&&(U(f,o,1/u),!0)}const e=p(),g=p(),b=p(),o=p();export{C as a,G as g,H as h,B as l,E as u};
